import{_ as qn}from"./AppTextarea.vue_vue_type_script_setup_true_lang-V0dHxVfT.js";import{_ as Un}from"./AppSelect.vue_vue_type_script_setup_true_lang-z1MTBCIG.js";import{dg as Wn,dp as Yn,dd as Xn,db as Bt,d as x,r as v,X as W,G as Jn,aZ as Me,f8 as Zn,w as Ne,af as Qn,b2 as ei,b3 as H,c as Z,o as Q,l as Mt,e as s,aI as ti,b as a,v as g,f as d,I as ni,t as y,m as b,b7 as Ve,x as Je,d3 as P,a_ as F,ae as D,Z as Fe,F as Re,ba as Vt}from"./main-B-solxbJ.js";import{u as ii}from"./pageTitle-CUzLFAyu.js";import{p as oi,a as k}from"./editor-C50-WWRN.js";import{q as ai}from"./overlay-hUTCjXr4.js";import{B as li,a as si,b as ri,c as ui,d as di,e as ci,f as pi}from"./base_range_container-CnHhRvwo.js";import{p as mi,s as Lt,Y as fi,v as Kt,n as vi}from"./m_base_widget-DFULvZr6.js";import{a as M,l as hi,D as _i}from"./data-grid-DwWOUIui.js";import{D as gi,a as bi}from"./popup-Dtkd9f7p.js";import{n as V}from"./notify-D-J-DLpw.js";import{V as E}from"./VCol-DA5oTj4L.js";import{V as de,b as ce,c as Ze}from"./VCard-C4_7gHfC.js";import{V as ee}from"./VRow-CIgqKDcB.js";import{V as yi}from"./VSwitch-_FutNByu.js";import{V as Qe}from"./VCardText-DoIcs66V.js";import{V as et}from"./VTextField-CD7pg2bv.js";import{V as tt}from"./VSpacer-61U0cAQS.js";import{V as nt}from"./VDialog-DTiI1PKs.js";import{_ as xi}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-GD1DrYze.js";import"./VTextarea-DD5R_aOY.js";/* empty css                   */import"./VCounter-ByYTLrXs.js";import"./VImg-YsJEMk2j.js";import"./VField-D0VVHw0a.js";import"./easing-Bybner-F.js";import"./VInput-Bcy6y-wI.js";import"./form-Bfi1zknx.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CE477Lxc.js";import"./VList-zGGJWcUa.js";import"./ssrBoot-BkACHsL1.js";import"./VAvatar-DJW_gFzx.js";import"./VDivider-CDQihvEL.js";import"./dialog-transition-BSP8-i6d.js";import"./VMenu-C6X_3K5V.js";import"./VOverlay-DSysHqGq.js";import"./delay-xBEVBdtL.js";import"./lazy-Do7bzwrm.js";import"./scopeId-vpjvTw2C.js";import"./VCheckboxBtn-zkpbVJAF.js";import"./VSelectionControl-DRz9gECd.js";import"./VChip-B_6N5oa7.js";import"./VSlideGroup-6m2D2ZrS.js";import"./m_row_dragging-DOxzfGbh.js";import"./m_select_box-CgXejxxU.js";import"./themes-tqCBIF1-.js";/* empty css              */const it={dispose:function(){this._centerTemplateGroup.linkOff().dispose()},members:{_renderCenterTemplate(){const e=this.option("centerTemplate"),i=this._centerTemplateGroup.clear();if(!e)return;i.attr({visibility:"hidden"});const o=this._getCenter();this._getTemplate(e).render({model:this,container:i.element,onRendered:()=>{const l=i,r=l.getBBox(),c=r.x+r.width/2,u=r.y+r.height/2;l.move(o.x-c,o.y-u),l.attr({visibility:"visible"})}})}},customize(e){e.addChange({code:"CENTER_TEMPLATE",handler:function(){this._renderCenterTemplate()},option:"centerTemplate"})}},wi={name:"center_template_gauge",init:Wn,dispose:it.dispose,extenders:{_initCore(){this._createCenterTemplateGroup()},_renderContent(){const e=mi(this._themeManager._font);this._centerTemplateGroup.css(e),this._requestChange(["CENTER_TEMPLATE"])},_updateExtraElements(){this._requestChange(["CENTER_TEMPLATE"])}},members:{_renderCenterTemplate:it.members._renderCenterTemplate,_createCenterTemplateGroup(){this._centerTemplateGroup=this._renderer.g().attr({class:"dxg-hole-template"}).linkOn(this._renderer.root,"center-template").linkAppend()}},customize:it.customize},ki={gauge:wi},A=Number,Te=Lt,jt=fi;function at(e,i){return e&&e.radius-i<=0&&(e.radius=i+1),e}const Ht=li.inherit({_move:function(){const e=this._options,i=jt(this._actualPosition);this._rootElement.rotate(i,e.x,e.y),this._trackerElement&&this._trackerElement.rotate(i,e.x,e.y)},_isEnabled:function(){return this._options.width>0},_isVisible:function(e){return e.radius-A(this._options.indentFromCenter)>0},_getTrackerSettings:function(){const e=this._options,i=this._getRadius(),o=this._getIndentFromCenter(),l=e.x,r=e.y-(i+o)/2;let c=e.width/2,u=(i-o)/2;return c>10||(c=10),u>10||(u=10),{points:[l-c,r-u,l-c,r+u,l+c,r+u,l+c,r-u]}},_render:function(){this._renderPointer()},_clearPointer:function(){delete this._element},_clear:function(){this._clearPointer()},_getIndentFromCenter:function(e){return Number(this._options.indentFromCenter)||0},_getRadius:function(){return 0},measure:function(e){const i={max:e.radius};return this._options.indentFromCenter<0&&(i.inverseHorizontalOffset=i.inverseVerticalOffset=-A(this._options.indentFromCenter)),i},getTooltipParameters:function(){const e=this._options,i=Te(this._actualPosition),o=(this._getRadius()+this._getIndentFromCenter())/2;return{x:e.x+i.cos*o,y:e.y-i.sin*o,value:this._currentValue,color:e.color,offset:e.width/2}}}),lt=Ht.inherit({_isVisible:function(e){const i=this._adjustOffset(Number(this._options.indentFromCenter),e.radius),o=this._adjustOffset(Number(this._options.offset),e.radius);return e.radius-i-o>0},getOffset:function(){return 0},_adjustOffset:function(e,i){const o=Number(this._options.beginAdaptingAtRadius),l=i/o;return l<1&&(e=Math.floor(e*l)),e||0},_getIndentFromCenter:function(e){return this._adjustOffset(Number(this._options.indentFromCenter),this._options.radius)},_getRadius:function(){const e=this._options;return e.radius-this._adjustOffset(Number(e.offset),e.radius)},_renderSpindle:function(){const e=this,i=e._options,o=i.radius,l=2*this._adjustOffset(A(i.spindleSize)/2,o);let r=2*this._adjustOffset(A(i.spindleGapSize)/2,o)||0;r>0&&(r=r<=l?r:l),l>0&&(e._spindleOuter=e._spindleOuter||e._renderer.circle().append(e._rootElement),e._spindleInner=e._spindleInner||e._renderer.circle().append(e._rootElement),e._spindleOuter.attr({class:"dxg-spindle-border",cx:i.x,cy:i.y,r:l/2}),e._spindleInner.attr({class:"dxg-spindle-hole",cx:i.x,cy:i.y,r:r/2,fill:i.containerBackgroundColor}))},_render:function(){this.callBase(),this._renderSpindle()},_clear:function(){this.callBase(),delete this._spindleOuter,delete this._spindleInner}}),Gt=lt.inherit({_renderPointer:function(){const e=this._options,i=e.y-this._getRadius(),o=e.y-this._getIndentFromCenter(),l=e.x-e.width/2,r=l+A(e.width);this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[l,o,l,i,r,i,r,o]})}}),Ci=lt.inherit({_renderPointer:function(){const e=this._options,i=e.y-this._getRadius(),o=e.y-this._getIndentFromCenter(),l=e.x-e.width/2,r=e.x+e.width/2;this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[l,o,e.x,i,r,o]})}}),Si=lt.inherit({_renderPointer:function(){const e=this._options,i=e.x-e.width/2,o=e.x+e.width/2,l=e.y-this._getRadius(),r=e.y-this._getIndentFromCenter(),c=A(e.secondFraction)||0;let u,_;c>=1?u=_=r:c<=0?u=_=l:(_=l+(r-l)*c,u=_+A(e.space)),this._firstElement=this._firstElement||this._renderer.path([],"area").append(this._rootElement),this._spaceElement=this._spaceElement||this._renderer.path([],"area").append(this._rootElement),this._secondElement=this._secondElement||this._renderer.path([],"area").append(this._rootElement),this._firstElement.attr({points:[i,r,i,u,o,u,o,r]}),this._spaceElement.attr({points:[i,u,i,_,o,_,o,u],class:"dxg-hole",fill:e.containerBackgroundColor}),this._secondElement.attr({points:[i,_,i,l,o,l,o,_],class:"dxg-part",fill:e.secondColor})},_clearPointer:function(){delete this._firstElement,delete this._secondElement,delete this._spaceElement}}),Ni=Ht.inherit({_isEnabled:function(){return this._options.length>0&&this._options.width>0},_isVisible:e=>!0,resize(e){return this.callBase(at(e,0))},_render:function(){const e=this._options,i=e.x,o=e.y-e.radius,l=e.width/2||0,r=o-A(e.length);this._element=this._element||this._renderer.path([],"area").append(this._rootElement);const c={points:[i,o,i-l,r,i+l,r],stroke:"none","stroke-width":0,"stroke-linecap":"square"};e.space>0&&(c["stroke-width"]=Math.min(e.space,e.width/4)||0,c.stroke=c["stroke-width"]>0&&e.containerBackgroundColor||"none"),this._element.attr(c).sharp()},_clear:function(){delete this._element},_getTrackerSettings:function(){const e=this._options,i=e.x,o=e.y-e.radius-e.length/2;let l=e.width/2,r=e.length/2;return l>10||(l=10),r>10||(r=10),{points:[i-l,o-r,i-l,o+r,i+l,o+r,i+l,o-r]}},measure:function(e){return{min:e.radius,max:e.radius+A(this._options.length)}},getTooltipParameters:function(){const e=this._options,i=Te(this._actualPosition),o=e.radius+e.length/2,l=this.callBase();return l.x=e.x+i.cos*o,l.y=e.y-i.sin*o,l.offset=e.length/2,l}}),Ii=si.inherit({_isEnabled:function(){return!0},_isVisible:e=>!0,resize(e){return this.callBase(at(e,0))},_getTextCloudOptions:function(){const e=Te(this._actualPosition),i=Kt(this._actualPosition);return{x:this._options.x+e.cos*this._options.radius,y:this._options.y-e.sin*this._options.radius,type:i>270?"left-top":i>180?"top-right":i>90?"right-bottom":"bottom-left"}},measure:function(e){const i=A(this._options.arrowLength)||0;this._measureText();const o=this._textFullHeight+i,l=this._textFullWidth+i;return{min:e.radius,max:e.radius,horizontalOffset:l,verticalOffset:o,inverseHorizontalOffset:l,inverseVerticalOffset:o}}}),Ti=ri.inherit({_isEnabled:function(){return this._options.size>0},_isVisible:e=>!0,resize(e){return this.callBase(at(e,A(this._options.size)))},_createBarItem:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"}).append(this._rootElement)},_createTracker:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"})},_setBarSides:function(){this._maxSide=this._options.radius,this._minSide=this._maxSide-A(this._options.size)},_getSpace:function(){const e=this._options;return e.space>0?180*e.space/e.radius/Math.PI:0},_isTextVisible:function(){return(this._options.text||{}).indent>0},_setTextItemsSides:function(){const e=this._options,i=A(e.text.indent);this._lineFrom=e.y-e.radius,this._lineTo=this._lineFrom-i,this._textRadius=e.radius+i},_getPositions:function(){const e=this._basePosition,i=this._actualPosition;let o,l;return e>=i?(o=e,l=i):(o=i,l=e),{start:this._startPosition,end:this._endPosition,main1:o,main2:l,back1:Math.min(o+this._space,this._startPosition),back2:Math.max(l-this._space,this._endPosition)}},_buildItemSettings:function(e,i){return{x:this._options.x,y:this._options.y,innerRadius:this._minSide,outerRadius:this._maxSide,startAngle:i,endAngle:e}},_updateTextPosition:function(){const e=Te(this._actualPosition);let i=this._options.x+this._textRadius*e.cos,o=this._options.y-this._textRadius*e.sin;i+=e.cos*this._textWidth*.6,o-=e.sin*this._textHeight*.6,this._text.attr({x:i,y:o+this._textVerticalOffset})},_updateLinePosition:function(){const e=this._options.x;let i,o;this._basePosition>this._actualPosition?(i=e-2,o=e):this._basePosition<this._actualPosition?(i=e,o=e+2):(i=e-1,o=e+1),this._line.attr({points:[i,this._lineFrom,i,this._lineTo,o,this._lineTo,o,this._lineFrom]}).rotate(jt(this._actualPosition),e,this._options.y).sharp()},_getTooltipPosition:function(){const e=Te((this._basePosition+this._actualPosition)/2),i=(this._minSide+this._maxSide)/2;return{x:this._options.x+e.cos*i,y:this._options.y-e.sin*i}},measure:function(e){const i=this,o={min:e.radius-A(i._options.size),max:e.radius};return i._measureText(),i._hasText&&(o.max+=A(i._options.text.indent),o.horizontalOffset=i._textWidth,o.verticalOffset=i._textHeight),o}}),pe=Number,Ft=Math.max,Di=ui.inherit({_processOptions:function(){const e=this;switch(e._inner=e._outer=0,vi(e._options.orientation)){case"inside":e._inner=1;break;case"center":e._inner=e._outer=.5;break;default:e._outer=1}},_isVisible:function(e){let i=this._options.width;return i=pe(i)||Ft(pe(i.start),pe(i.end)),e.radius-this._inner*i>0},_createRange:function(e,i){const o=(e.startWidth+e.endWidth)/2;return this._renderer.arc(i.x,i.y,i.radius-this._inner*o,i.radius+this._outer*o,this._translator.translate(e.end),this._translator.translate(e.start)).attr({"stroke-linejoin":"round"})},measure:function(e){let i=this._options.width;return i=pe(i)||Ft(pe(i.start),pe(i.end)),{min:e.radius-this._inner*i,max:e.radius+this._outer*i}}}),Rt=isFinite,$t=Kt,Pt=Lt,Ei=Math.abs,B=Math.max,Ie=Math.min,ot=Math.round,Ai=Xn,Oi=Math.PI;function zi(e,i){const o=Pt(e),l=Pt(i),r=o.cos,c=o.sin,u=l.cos,_=l.sin;return{left:c<=0&&_>=0||c<=0&&_<=0&&r<=u||c>=0&&_>=0&&r>=u?-1:Ie(r,u,0),right:c>=0&&_<=0||c>=0&&_>=0&&r>=u||c<=0&&_<=0&&r<=u?1:B(r,u,0),up:r<=0&&u>=0||r<=0&&u<=0&&c>=_||r>=0&&u>=0&&c<=_?-1:-B(c,_,0),down:r>=0&&u<=0||r>=0&&u>=0&&c<=_||r<=0&&u<=0&&c>=_?1:-Ie(c,_,0)}}const fe=di.inherit({_rootClass:"dxg-circular-gauge",_factoryMethods:{rangeContainer:"createCircularRangeContainer",indicator:"createCircularIndicator"},_gridSpacingFactor:17,_scaleTypes:{type:"polarAxes",drawingType:"circular"},_getThemeManagerOptions(){const e=this.callBase.apply(this,arguments);return e.subTheme="_circular",e},_updateScaleTickIndent:function(e){const i=e.label.indentFromTick,o=e.tick.visible?e.tick.length:0,l=this._scale.measureLabels(Bt({},this._canvas)),r=e.orientation,c=o;let u=i;if(i>=0)r==="outside"?u+=c:r==="center"&&(u+=c/2);else{const _=B(l.width,l.height);u-=_,r==="inside"?u-=c:r==="center"&&(u-=c/2)}e.label.indentFromAxis=u,this._scale.updateOptions(e)},_setupCodomain:function(){const e=this.option("geometry")||{};let i=e.startAngle,o=e.endAngle,l;i=Rt(i)?$t(i):225,o=Rt(o)?$t(o):-45,Ei(i-o)<1?(o-=360,l={left:-1,up:-1,right:1,down:1}):(i<o&&(o-=360),l=zi(i,o)),this._area={x:0,y:0,radius:100,startCoord:i,endCoord:o,sides:l},this._translator.setCodomain(i,o)},_getCenter:function(){return this._getElementLayout()},_shiftScale:function(e){const i=this._scale,o=i.getCanvas();o.width=o.height=2*e.radius,i.draw(o);const l=i.getCenter();i.shift({right:e.x-l.x,bottom:e.y-l.y})},_getScaleLayoutValue:function(){return this._area.radius},_getTicksOrientation:function(e){return e.orientation},_getTicksCoefficients:function(e){const i={inner:0,outer:1};return e.orientation==="inside"?(i.inner=1,i.outer=0):e.orientation==="center"&&(i.inner=i.outer=.5),i},_correctScaleIndents:function(e,i,o){i>=0?(e.horizontalOffset=i+o.width,e.verticalOffset=i+o.height):(e.horizontalOffset=e.verticalOffset=0,e.min-=-i+B(o.width,o.height)),e.inverseHorizontalOffset=o.width/2,e.inverseVerticalOffset=o.height/2},_measureMainElements:function(e,i){const o=this._area.radius;let l=0,r=1/0,c=0,u=0,_=0,m=0;const G=this._scale;return Ai(e.concat(G),(function(ve,he){const w=he.measure?he.measure({radius:o-he.getOffset()}):i;w.min>0&&(r=Ie(r,w.min)),w.max>0&&(l=B(l,w.max)),w.horizontalOffset>0&&(c=B(c,w.max+w.horizontalOffset)),w.verticalOffset>0&&(u=B(u,w.max+w.verticalOffset)),w.inverseHorizontalOffset>0&&(_=B(_,w.inverseHorizontalOffset)),w.inverseVerticalOffset>0&&(m=B(m,w.inverseVerticalOffset))})),c=B(c-l,0),u=B(u-l,0),{minRadius:r,maxRadius:l,horizontalMargin:c,verticalMargin:u,inverseHorizontalMargin:_,inverseVerticalMargin:m}},_applyMainLayout:function(e,i){const o=this._measureMainElements(e,i),l=this._area,r=l.sides,c={left:(r.left<-.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,right:(r.right>.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,top:(r.up<-.1?o.verticalMargin:o.inverseVerticalMargin)||0,bottom:(r.down>.1?o.verticalMargin:o.inverseVerticalMargin)||0},u=Mi(this._innerRect,(r.down-r.up)/(r.right-r.left),c);let _=Ie(ie(u)/(r.right-r.left),oe(u)/(r.down-r.up));_=_-o.maxRadius+l.radius;const m=u.left-ie(u)*r.left/(r.right-r.left),G=u.top-oe(u)*r.up/(r.down-r.up);l.x=ot(m),l.y=ot(G),l.radius=_,u.left-=c.left,u.right+=c.right,u.top-=c.top,u.bottom+=c.bottom,this._innerRect=u},_getElementLayout:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{x:this._area.x,y:this._area.y,radius:ot(this._area.radius-e)}},_getApproximateScreenRange:function(){const e=this._area;let i=Ie(this._canvas.width/(e.sides.right-e.sides.left),this._canvas.height/(e.sides.down-e.sides.up));return i>e.totalRadius&&(i=e.totalRadius),i*=.8,-this._translator.getCodomainRange()*i*Oi/180},_getDefaultSize:function(){return{width:300,height:300}},_factory:Yn(ci.prototype._factory)});function ie(e){return e.right-e.left}function oe(e){return e.bottom-e.top}function Mi(e,i,o){const l=Bt({},e);let r,c=0,u=0;return o=o||{},i>0&&(l.left+=o.left||0,l.right-=o.right||0,l.top+=o.top||0,l.bottom-=o.bottom||0,ie(l)>0&&oe(l)>0?(r=oe(l)/ie(l),r>1?i<r?c=ie(l):u=oe(l):i>r?u=oe(l):c=ie(l),c>0||(c=u/i),u>0||(u=c*i),c=(ie(l)-c)/2,u=(oe(l)-u)/2,l.left+=c,l.right-=c,l.top+=u,l.bottom-=u):(l.left=l.right=(l.left+l.right)/2,l.top=l.bottom=(l.top+l.bottom)/2)),l}const te=fe.prototype._factory.indicators={};fe.prototype._factory.createIndicator=pi(te);te._default=Gt;te.rectangleneedle=Gt;te.triangleneedle=Ci;te.twocolorneedle=Si;te.trianglemarker=Ni;te.textcloud=Ii;te.rangebar=Ti;fe.prototype._factory.RangeContainer=Di;ai("dxCircularGauge",fe);fe.addPlugin(ki.gauge);/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const qt={props:{animation:Object,centerTemplate:{},containerBackgroundColor:String,disabled:Boolean,elementAttr:Object,export:Object,geometry:Object,loadingIndicator:Object,margin:Object,onDisposing:Function,onDrawn:Function,onExported:Function,onExporting:Function,onFileSaving:Function,onIncidentOccurred:Function,onInitialized:Function,onOptionChanged:Function,onTooltipHidden:Function,onTooltipShown:Function,pathModified:Boolean,rangeContainer:Object,redrawOnResize:Boolean,rtlEnabled:Boolean,scale:Object,size:Object,subvalueIndicator:Object,subvalues:Array,theme:String,title:[Object,String],tooltip:Object,value:Number,valueIndicator:Object},emits:{"update:isActive":null,"update:hoveredElement":null,"update:animation":null,"update:centerTemplate":null,"update:containerBackgroundColor":null,"update:disabled":null,"update:elementAttr":null,"update:export":null,"update:geometry":null,"update:loadingIndicator":null,"update:margin":null,"update:onDisposing":null,"update:onDrawn":null,"update:onExported":null,"update:onExporting":null,"update:onFileSaving":null,"update:onIncidentOccurred":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onTooltipHidden":null,"update:onTooltipShown":null,"update:pathModified":null,"update:rangeContainer":null,"update:redrawOnResize":null,"update:rtlEnabled":null,"update:scale":null,"update:size":null,"update:subvalueIndicator":null,"update:subvalues":null,"update:theme":null,"update:title":null,"update:tooltip":null,"update:value":null,"update:valueIndicator":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=fe,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},export:{isCollectionItem:!1,optionName:"export"},geometry:{isCollectionItem:!1,optionName:"geometry"},loadingIndicator:{isCollectionItem:!1,optionName:"loadingIndicator"},margin:{isCollectionItem:!1,optionName:"margin"},rangeContainer:{isCollectionItem:!1,optionName:"rangeContainer"},scale:{isCollectionItem:!1,optionName:"scale"},size:{isCollectionItem:!1,optionName:"size"},subvalueIndicator:{isCollectionItem:!1,optionName:"subvalueIndicator"},title:{isCollectionItem:!1,optionName:"title"},tooltip:{isCollectionItem:!1,optionName:"tooltip"},valueIndicator:{isCollectionItem:!1,optionName:"valueIndicator"}}}};oi(qt);const Vi=x(qt),Ut={emits:{"update:isActive":null,"update:hoveredElement":null,"update:duration":null,"update:easing":null,"update:enabled":null},props:{duration:Number,easing:String,enabled:Boolean}};k(Ut);const Fi=x(Ut);Fi.$_optionName="animation";const Wt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};k(Wt);const Ri=x(Wt);Ri.$_optionName="backgroundColor";const Yt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,dashStyle:String,opacity:Number,visible:Boolean,width:Number}};k(Yt);const $i=x(Yt);$i.$_optionName="border";const Xt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};k(Xt);const Pi=x(Xt);Pi.$_optionName="color";const Jt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:enabled":null,"update:fileName":null,"update:formats":null,"update:margin":null,"update:printingEnabled":null,"update:svgToCanvas":null},props:{backgroundColor:String,enabled:Boolean,fileName:String,formats:Array,margin:Number,printingEnabled:Boolean,svgToCanvas:Function}};k(Jt);const Zt=x(Jt);Zt.$_optionName="export";const Qt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:family":null,"update:opacity":null,"update:size":null,"update:weight":null},props:{color:String,family:String,opacity:Number,size:[Number,String],weight:Number}};k(Qt);const Bi=x(Qt);Bi.$_optionName="font";const en={emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null,"update:useCurrencyAccountingStyle":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String,useCurrencyAccountingStyle:Boolean}};k(en);const Li=x(en);Li.$_optionName="format";const tn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:endAngle":null,"update:startAngle":null},props:{endAngle:Number,startAngle:Number}};k(tn);const nn=x(tn);nn.$_optionName="geometry";const on={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:hideFirstOrLast":null,"update:indentFromTick":null,"update:overlappingBehavior":null,"update:useRangeColors":null,"update:visible":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],hideFirstOrLast:String,indentFromTick:Number,overlappingBehavior:String,useRangeColors:Boolean,visible:Boolean}};k(on);const st=x(on);st.$_optionName="label";st.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const an={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:font":null,"update:show":null,"update:text":null},props:{backgroundColor:String,font:Object,show:Boolean,text:String}};k(an);const ln=x(an);ln.$_optionName="loadingIndicator";ln.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const sn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:bottom":null,"update:left":null,"update:right":null,"update:top":null},props:{bottom:Number,left:Number,right:Number,top:Number}};k(sn);const Ki=x(sn);Ki.$_optionName="margin";const rn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};k(rn);const un=x(rn);un.$_optionName="minorTick";const dn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:endValue":null,"update:startValue":null},props:{color:[Object,String],endValue:Number,startValue:Number}};k(dn);const me=x(dn);me.$_optionName="ranges";me.$_isCollectionItem=!0;me.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"}};const cn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:offset":null,"update:orientation":null,"update:palette":null,"update:paletteExtensionMode":null,"update:ranges":null,"update:width":null},props:{backgroundColor:[Object,String],offset:Number,orientation:String,palette:[Array,String],paletteExtensionMode:String,ranges:Array,width:Number}};k(cn);const rt=x(cn);rt.$_optionName="rangeContainer";rt.$_expectedChildren={backgroundColor:{isCollectionItem:!1,optionName:"backgroundColor"},range:{isCollectionItem:!0,optionName:"ranges"}};const pn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDecimals":null,"update:customMinorTicks":null,"update:customTicks":null,"update:endValue":null,"update:label":null,"update:minorTick":null,"update:minorTickInterval":null,"update:orientation":null,"update:scaleDivisionFactor":null,"update:startValue":null,"update:tick":null,"update:tickInterval":null},props:{allowDecimals:Boolean,customMinorTicks:Array,customTicks:Array,endValue:Number,label:Object,minorTick:Object,minorTickInterval:Number,orientation:String,scaleDivisionFactor:Number,startValue:Number,tick:Object,tickInterval:Number}};k(pn);const ut=x(pn);ut.$_optionName="scale";ut.$_expectedChildren={label:{isCollectionItem:!1,optionName:"label"},minorTick:{isCollectionItem:!1,optionName:"minorTick"},tick:{isCollectionItem:!1,optionName:"tick"}};const mn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:blur":null,"update:color":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null},props:{blur:Number,color:String,offsetX:Number,offsetY:Number,opacity:Number}};k(mn);const ji=x(mn);ji.$_optionName="shadow";const fn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:width":null},props:{height:Number,width:Number}};k(fn);const Hi=x(fn);Hi.$_optionName="size";const vn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null,"update:textOverflow":null,"update:wordWrap":null},props:{font:Object,offset:Number,text:String,textOverflow:String,wordWrap:String}};k(vn);const hn=x(vn);hn.$_optionName="subtitle";hn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const _n={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};k(_n);const gn=x(_n);gn.$_optionName="subvalueIndicator";gn.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const bn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:indent":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],indent:Number}};k(bn);const yn=x(bn);yn.$_optionName="text";yn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const xn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};k(xn);const wn=x(xn);wn.$_optionName="tick";const kn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:textOverflow":null,"update:verticalAlignment":null,"update:wordWrap":null},props:{font:Object,horizontalAlignment:String,margin:[Number,Object],placeholderSize:Number,subtitle:[Object,String],text:String,textOverflow:String,verticalAlignment:String,wordWrap:String}};k(kn);const Cn=x(kn);Cn.$_optionName="title";Cn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},margin:{isCollectionItem:!1,optionName:"margin"},subtitle:{isCollectionItem:!1,optionName:"subtitle"}};const Sn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:border":null,"update:color":null,"update:container":null,"update:contentTemplate":null,"update:cornerRadius":null,"update:customizeTooltip":null,"update:enabled":null,"update:font":null,"update:format":null,"update:interactive":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:shadow":null,"update:zIndex":null},props:{arrowLength:Number,border:Object,color:String,container:{},contentTemplate:{},cornerRadius:Number,customizeTooltip:Function,enabled:Boolean,font:Object,format:[Object,String,Function],interactive:Boolean,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,shadow:Object,zIndex:Number}};k(Sn);const Nn=x(Sn);Nn.$_optionName="tooltip";Nn.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"},shadow:{isCollectionItem:!1,optionName:"shadow"}};const In={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};k(In);const dt=x(In);dt.$_optionName="valueIndicator";dt.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const Gi={class:"page-rollform pa-0"},qi={key:0,class:"rf-loading-overlay"},Ui={class:"rf-loader-box"},Wi={key:0,class:"hint-line"},Yi={key:1,class:"warn-line"},Xi={class:"rollform-header"},Ji={class:"gauge-wrap"},Zi={class:"badge-left"},Qi={class:"gauge-center-value"},eo={style:{color:"goldenrod"}},to={class:"clock-wrap"},no={class:"digital-clock"},io={class:"digital-date"},oo={class:"kpi-row"},ao={class:"kpi"},lo={class:"kpi-value"},so={class:"pb-1 ms-1 me-1"},ro={class:"kpi"},uo={class:"kpi-value"},co={class:"pb-1 ms-1 me-1"},po={class:"kpi"},mo={class:"kpi-value"},fo={class:"pb-1 ms-1 me-1"},vo={class:"oee-title"},ho={class:"panel status-panel"},_o={class:"form-row mt-2"},go={style:{display:"flex","align-items":"center",gap:"8px"}},bo={class:"status-actions justify-between"},yo={class:"status-actions justify-between"},xo={class:"status-metrics mt-4 text-center"},wo={class:"metric-time"},ko={class:"metric-time"},Co={class:"uclu text-center mt-4"},So={class:"metric-time ok"},No={class:"metric-time warn"},Io={class:"metric-time"},To={class:"panel status-panel"},Do={width:"60%"},Eo={class:"sayac siparis digit"},Ao={width:"60%"},Oo={class:"sayac siparis digit"},zo={width:"60%"},Mo={class:"sayac net digit"},Vo={width:"60%"},Fo={class:"sayac net digit"},Ro={width:"60%"},$o={class:"sayac kalan digit"},Po={class:"sayac hurda digit"},Bo={class:"sayac net digit"},Lo={width:"60%"},Ko={class:"bilgi"},jo={width:"60%"},Ho={class:"bilgi"},Go={width:"60%"},qo={class:"bilgi"},Uo={width:"60%"},Wo={class:"bilgi"},Yo={class:"panel grid-panel"},Xo={class:"mb-2"},Jo={class:"mb-2"},Zo={class:"bilgi"},Qo={class:"bilgi"},ea={class:"bilgi"},ta=x({__name:"uretim-rollform",setup(e){const i=ii(),o=v(null);function l(){var n;try{return`rollform:lastDurusReason:${((n=q==null?void 0:q.value)==null?void 0:n.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function r(){try{const n=localStorage.getItem(l());if(!n)return!1;const t=JSON.parse(n);if(t&&t.break_reason_code&&t.break_reason_code!=="000")return o.value={break_reason_code:t.break_reason_code,description:t.description},!0}catch{}return!1}const c=v([]),u=v(""),_=v(!1),m=v(null),G=W(()=>{var n;return((n=m.value)==null?void 0:n.wstation_code)??"..."}),ve=W(()=>{var n;return((n=m.value)==null?void 0:n.wstation_name)??"..."}),he=W(()=>{var t;const n=(t=m.value)==null?void 0:t.statu_id;return n===0?"rgba(192, 167, 167, 0.30)":n===1?"rgba(180, 50, 50, 1.00)":n===2?"green":"#4b7027"}),w=W(()=>{var n;return((n=m.value)==null?void 0:n.statu_id)===1});i.setTitle(`${G.value} (${ve.value})`),document.title=`OFT - ${G.value} | ${ve.value}`;const ct=W(()=>`${G.value} (${ve.value})`),Tn=W(()=>{const n=Number(U.value.oee||0);return n<50?"oee-low":n<70?"oee-mid":n<85?"oee-high":"oee-top"}),De=()=>{i.setTitle(ct.value),document.title=`OFT - ${G.value} | ${ve.value}`};Jn(async()=>{if(await Me(),De(),await Gn(),!N.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}Ae(),ye(),setInterval(ye,1e4),setInterval(()=>{const n=new Date,t=String(n.getHours()).padStart(2,"0"),f=String(n.getMinutes()).padStart(2,"0"),h=String(n.getSeconds()).padStart(2,"0");ft.value=`${t}:${f}:${h}`;const p=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],C=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];vt.value=`${n.getDate()} ${C[n.getMonth()]} ${n.getFullYear()} ${p[n.getDay()]}`,Ae(),ht()},1e3),setInterval(se,2e3),Et(),jn(),setTimeout(()=>{be.value||(be.value=!0)},15e3),window.addEventListener("keydown",_t),window.addEventListener("keydown",wt)}),Zn(()=>{De()});const Dn=Ne(()=>i.title,n=>{n!==ct.value&&De()},{flush:"post"});Qn(()=>{Dn(),window.removeEventListener("keydown",_t),window.removeEventListener("keydown",wt)}),Ne(()=>m.value,()=>{De(),Ae()});const q=ei("userData");function L(n){const t=Number(n??0);return Number.isFinite(t)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(t)):"0"}const $e=v("00:00:00"),Pe=v("00:00"),Be=v("00:00"),Le=v("00:00"),Ke=v("00:00"),pt=v(0),mt=v(0),je=v(null),ft=v("00:00:00"),vt=v("...");function En(n){const t=Math.max(0,Math.floor(n||0)),f=Math.floor(t/3600),h=Math.floor(t%3600/60),p=t%60,C=O=>String(O).padStart(2,"0");return`${C(f)}:${C(h)}:${C(p)}`}function Ee(n){const t=Math.max(0,Math.floor(n||0)),f=Math.floor(t/3600),h=Math.floor(t%3600/60),p=C=>String(C).padStart(2,"0");return`${p(f)}:${p(h)}`}function Ae(){var f;const n=(f=m.value)==null?void 0:f.statu_time;if(n==null){$e.value="00:00:00";return}let t=0;if(typeof n=="number")n>1e12?t=Math.max(0,Math.floor((Date.now()-n)/1e3)):n>1e9?t=Math.max(0,Math.floor(Date.now()/1e3-n)):t=Math.max(0,Math.floor(n));else if(typeof n=="string"){const h=Date.parse(n);Number.isNaN(h)||(t=Math.max(0,Math.floor((Date.now()-h)/1e3)))}else n instanceof Date&&(t=Math.max(0,Math.floor((Date.now()-n.getTime())/1e3)));$e.value=En(t)}function ht(){if(je.value!=null){const n=Math.max(0,Math.floor((Date.now()-je.value)/1e3));Pe.value=Ee(n);const t=Math.max(0,Math.floor(pt.value||0)),f=Math.max(0,Math.floor(mt.value||0));Be.value=Ee(t),Le.value=Ee(f);const h=Math.max(0,n-t-f);Ke.value=Ee(h)}else Pe.value="00:00",Be.value="00:00",Le.value="00:00",Ke.value="00:00"}function R(n){const t=n.toLowerCase();return c.value.find(f=>String(f.description||"").toLowerCase().includes(t))}function _t(n){if(w.value){if(n.key==="F9"){const t=R("çay ve yemek")||R("cay ve yemek")||R("çay & yemek");t&&(o.value={break_reason_code:t.break_reason_code,description:t.description},n.preventDefault())}else if(n.key==="F8")n.preventDefault(),gt();else if(n.key==="F10"){const t=R("yemek")||R("öğle")||R("ogle");t&&(o.value={break_reason_code:t.break_reason_code,description:t.description},n.preventDefault())}}}async function gt(){if(w.value&&N.value)try{await H.post("/api/uretim-rollform/close-and-open-down",{station_id:N.value}),V({message:"Yeni duruş başlatıldı (F8)",type:"success",displayTime:1500}),Promise.allSettled([se(),ye()])}catch(n){console.error("F8 yeni duruş hata",n),V({message:"Yeni duruş başlatılamadı",type:"error",displayTime:2e3})}}async function An(){if(!w.value||T.value)return;const n=R("çay")||R("cay");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await re()):V({message:"Çay molası sebebi bulunamadı",type:"warning",displayTime:1500})}async function On(){if(!w.value||T.value)return;const n=R("yemek")||R("öğle")||R("ogle");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await re()):V({message:"Yemek molası sebebi bulunamadı",type:"warning",displayTime:1500})}const _e=v(!1),ge=v(""),He=v(null),ae=v(!1);let Ge=null;function bt(){var n,t;if(!Ge){Ge=setTimeout(()=>{Ge=null},300);try{(t=(n=He.value)==null?void 0:n.blur)==null||t.call(n)}catch{}xt()}}function yt(){ge.value="",_e.value=!0,Me(()=>{var n;return(n=He.value)==null?void 0:n.focus()})}async function xt(){var C;const n=Number(ge.value);if(!Number.isFinite(n)||n<=0){qe();return}let t=m.value?{...m.value}:null,f=((C=m.value)==null?void 0:C.worder_id)??null,h=-1,p=null;try{if(ae.value)return;if(!N.value)throw new Error("İstasyon yok");ae.value=!0;const O=typeof performance<"u"&&performance.now?performance.now():Date.now();if(t){const S=Number(t.scrap_qty||0);m.value={...t,scrap_qty:S+n}}if(f&&(h=K.value.findIndex(S=>S.isEmriID===f),h>=0)){p=Number(K.value[h].hurda||0);const S={...K.value[h],hurda:p+n};K.value.splice(h,1,S)}await H.post("/api/uretim-rollform/hurda-gir",{station_id:N.value,qty:n});const I=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Hurda] POST tamam: ${(I-O).toFixed(0)}ms (qty=${n})`)}catch{}V({message:"Hurda kaydedildi",type:"success",displayTime:1200}),_e.value=!1,Promise.allSettled([se(),Et(),ye()])}catch(O){console.error("hurda kayıt hata",O);try{if(f!=null){const I=K.value.findIndex(S=>S.isEmriID===f);if(I>=0&&p!=null){const S={...K.value[I],hurda:p};K.value.splice(I,1,S)}}}catch{}try{t!==null&&(m.value=t)}catch{}V({message:"Hurda kaydedilemedi",type:"error",displayTime:2e3})}finally{ae.value=!1}}function qe(){ge.value="",_e.value=!1}function wt(n){n.key==="F8"&&(yt(),n.preventDefault())}v("uretim-disi");const zn=v(!1),be=v(!1),kt=v(!1),Ct=v(!1),St=v(!1),Nt=v(!1),It=v(!1),Mn=W(()=>kt.value&&Ct.value&&St.value&&Nt.value&&It.value);Ne(Mn,n=>{n&&!be.value&&(be.value=!0)});const Vn=W(()=>!be.value),U=v({availability:0,performance:0,quality:0,oee:0}),Fn=v(null);async function ye(){try{if(!N.value)return;const{data:n}=await H.get("/api/uretim-rollform/kpi",{params:{station_id:N.value}});if(n!=null&&n.kpi){const t=f=>Math.round(Number(f||0)*100);if(U.value={availability:t(n.kpi.availability),performance:t(n.kpi.performance),quality:t(n.kpi.quality),oee:t(n.kpi.oee)},n.shift){Fn.value={id:n.shift.id,start:String(n.shift.start||"").substring(11,16),end:String(n.shift.end||"").substring(11,16)};const f=Date.parse(n.shift.start);Number.isNaN(f)||(je.value=f)}n.raw&&(pt.value=Math.max(0,Math.floor(Number(n.raw.upSeconds||0))),mt.value=Math.max(0,Math.floor(Number(n.raw.downSeconds||0)))),ht(),zn.value=!0,St.value=!0}}catch(n){console.error("fetchKpiDirect error",n)}}const K=v([]),Rn=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:n=>{var t;return $n((t=n==null?void 0:n.row)==null?void 0:t.data)}}],ne=v(!1),xe=v(null),z=v(null);function $n(n){z.value=n,xe.value=null,ne.value=!0}const we=v(!1),ke=v(null),Tt=v(null),le=v(!1);function Pn(){ke.value=null,we.value=!0,Me(()=>{var n,t;return(t=(n=Tt.value)==null?void 0:n.focus)==null?void 0:t.call(n)})}function Ue(){we.value=!1}async function Dt(){if(!le.value&&ke.value!=null)try{le.value=!0,await new Promise(n=>setTimeout(n,800)),V({message:"Üretim girişi kaydedildi (örnek).",type:"success",displayTime:1500}),we.value=!1}catch(n){console.error("Üretim girişi hata",n),V({message:"Üretim girişi kaydedilemedi",type:"error",displayTime:1800})}finally{le.value=!1}}async function We(){if(!z.value)return;const n=Number(xe.value??0),t=N.value;if(!t)return;const f={wstation_id:t,worder_id:Number(z.value.isEmriID??0),worder_no:z.value.isEmriNo,item_id:0,item_code:z.value.stokKodu,item_name:z.value.stokAdi,item_length:n,order_qty:Number(z.value.plnAd??0),net_qty:Number(z.value.urtAd??0),scrap_qty:Number(z.value.hurda??0)};try{await H.post("/api/uretim-rollform/activate-workorder",f),ne.value=!1,se()}catch(h){console.error("Aktivasyon hatası",h)}}async function se(){try{if(!N.value){m.value=null;return}const n=await H.get("/api/kapasite-works-info",{params:{station_id:N.value}}),t=Array.isArray(n.data)?n.data:[];m.value=t.length>0?t[0]:null,Ae()}catch(n){console.error("WorksInfo alınamadı",n),m.value=null}finally{Ct.value=!0}}function Bn(){var f,h;const n=((f=z.value)==null?void 0:f.stokKodu)||((h=m.value)==null?void 0:h.item_code)||null;if(!n){alert("Önce bir iş emri/ürün seçiniz (stok kodu yok).");return}const t=`/teknik-resim?code=${encodeURIComponent(n)}`;window.open(t,"_blank")}async function Et(){try{if(!N.value){K.value=[];return}const{data:n}=await H.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:N.value}}),t=(n||[]).map(f=>({grp:0,isEmriID:f.isemri_id,isEmriNo:f.isemri_no,stokKodu:f.stok_kodu,stokAdi:f.stok_adi,plnAd:Number(f.siparis_miktari??0),ilvAd:0,klnAd:Number(f.kalan_miktar??0),urtAd:Number(f.uretilen_net_miktar??0),hurda:Number(f.toplam_hurda_miktari??0),plnSure:Number(f.operasyon_suresi??0),grcSure:0}));K.value=t}catch(n){console.error("İş emirleri alınamadı",n)}finally{Nt.value=!0}}const j=v(!1),T=v(!1),Oe=v(!0),Ye=v(null);function ze(n=0){var t,f,h;try{const p=((t=Ye.value)==null?void 0:t.$el)||((h=(f=Ye.value)==null?void 0:f.$refs)==null?void 0:h.root)||null;if(p){const C=p.querySelector("input")||p.querySelector('[role="combobox"]');if(C){C.focus(),document.activeElement!==C&&n<3&&setTimeout(()=>ze(n+1),40);return}}n<5&&setTimeout(()=>ze(n+1),50)}catch{}}function Ln(){setTimeout(()=>ze(),10)}const Xe=v(!0),Kn=W(()=>({width:110,marginBottom:30,type:"success",text:T.value?"Kaydediliyor...":"Kaydet",stylingMode:"contained",elementAttr:{class:T.value?"btn-loading":""},disabled:T.value,onClick:()=>{T.value||re()}}));function jn(){N.value&&H.get("/api/durus-sebepleri-al",{params:{istasyon:N.value}}).then(n=>{var t;c.value=((t=n.data)==null?void 0:t.durusSebepleri)||[]}).catch(n=>{console.error("Duruş sebepleri alınamadı",n)}).finally(()=>{It.value=!0})}function At(){o.value={break_reason_code:"000",description:"GİRİLMEDİ"},j.value=!0,Me(()=>ze())}async function re(){var n;if(!T.value){if(!o.value){V({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((n=m.value)!=null&&n.worder_id)){V({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),j.value=!1;return}if(!N.value){V({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{T.value=!0,Oe.value=!1;const t=typeof performance<"u"&&performance.now?performance.now():Date.now();await H.post("/api/duruskaydet-mekanik",{istasyonID:N.value,selectedDurus:o.value});const f=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Duruş] POST tamam: ${(f-t).toFixed(0)}ms (code=${o.value.break_reason_code})`)}catch{}V({message:"Duruş kaydedildi.",type:"success",displayTime:1600});try{localStorage.setItem(l(),JSON.stringify(o.value))}catch{}j.value=!1,Promise.allSettled([se(),ye()])}catch(t){console.error("Duruş kaydedilemedi",t),V({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{T.value=!1,Oe.value=!0}}}function Hn(n){Oe.value||(n.cancel=!0)}Ne(j,(n,t)=>{t&&!n&&se()});const Ot=v(null);Ne(()=>{var n;return(n=m.value)==null?void 0:n.statu_id},async(n,t)=>{n===1&&Ot.value!==1?Xe.value?!r()&&!j.value&&At():j.value||At():n!==1&&(j.value&&(T.value=!1,Oe.value=!0,j.value=!1),o.value=null),Ot.value=n??null,Xe.value&&(Xe.value=!1)});const N=v(null),ue=v(null);async function Gn(){var n,t,f;try{ue.value=null;const{data:h}=await H.get("/api/uretim-rollform/detect-station");if(h&&h.station_id){N.value=Number(h.station_id),kt.value=!0;try{const p=Number(((n=q==null?void 0:q.value)==null?void 0:n.id)||((f=(t=q==null?void 0:q.value)==null?void 0:t.user)==null?void 0:f.id));Number.isFinite(p)&&p>0&&await H.post("/api/uretim-rollform/set-operator",{station_id:N.value,operator_id:p})}catch{}}else{N.value=null;const p=h!=null&&h.ip?` – tespit edilen IP: ${h.ip}`:"";ue.value="İstasyon bulunamadı (IP eşleşmedi)"+p}}catch(h){ue.value="İstasyon tespiti hata: "+((h==null?void 0:h.message)||"bilinmiyor")}}return(n,t)=>{const f=Un,h=qn;return Q(),Z("div",Gi,[Vn.value?(Q(),Z("div",qi,[s("div",Ui,[t[14]||(t[14]=s("div",{class:"rf-spinner","aria-hidden":"true"},null,-1)),t[15]||(t[15]=s("h2",null,"Veriler yükleniyor",-1)),t[16]||(t[16]=s("p",null,"İstasyon, aktif iş emri, sayaç ve KPI verileri hazırlanıyor. Lütfen bekleyin…",-1)),!N.value&&!ue.value?(Q(),Z("small",Wi,"İstasyon tespiti yapılıyor...")):ue.value?(Q(),Z("small",Yi,g(ue.value)+" – yeniden deniyor...",1)):Mt("",!0)])])):Mt("",!0),s("div",Xi,[a(ee,{class:"match-height"},{default:d(()=>[a(E,{cols:"12",md:"3",sm:"6"},{default:d(()=>[a(de,{class:"pa-3"},{default:d(()=>{var p,C,O;return[s("section",null,[a(ce,{class:"durum-title",style:ni({backgroundColor:he.value})},{default:d(()=>{var I,S;return[y(g(((I=m.value)==null?void 0:I.statu_id)===0?"KAPALI":((S=m.value)==null?void 0:S.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),t[22]||(t[22]=s("hr",null,null,-1)),s("div",Ji,[s("div",Zi,g(G.value),1),a(b(Vi),{class:"oee-gauge",value:(p=m.value)==null?void 0:p.speed,subvalues:(C=m.value)==null?void 0:C.speed_target,tooltip:n.gaugeTooltip,size:n.gaugeSize},{default:d(()=>{var I;return[a(b(nn),{"start-angle":225,"end-angle":-45}),a(b(ut),{"start-value":0,"end-value":(I=m.value)==null?void 0:I.speed_max,"tick-interval":10,"minor-tick-interval":5},{default:d(()=>[a(b(wn),{length:8,color:"#666"}),a(b(un),{length:4,color:"#444"}),a(b(st),{"use-range-colors":!0,font:n.gaugeLabelFont},null,8,["font"])]),_:1},8,["end-value"]),a(b(rt),{"background-color":"#20252b",offset:10,width:10},{default:d(()=>{var S,Y,X,$,J;return[a(b(me),{"start-value":0,"end-value":.4*((S=m.value)==null?void 0:S.speed_max),color:"#ce6978"},null,8,["end-value"]),a(b(me),{"start-value":.4*((Y=m.value)==null?void 0:Y.speed_max),"end-value":.7*((X=m.value)==null?void 0:X.speed_max),color:"#caa93b"},null,8,["start-value","end-value"]),a(b(me),{"start-value":.7*(($=m.value)==null?void 0:$.speed_max),"end-value":(J=m.value)==null?void 0:J.speed_max,color:"#1e8e3e"},null,8,["start-value","end-value"])]}),_:1}),a(b(dt),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),a(b(Zt),{enabled:!1})]}),_:1},8,["value","subvalues","tooltip","size"]),s("div",Qi,[t[17]||(t[17]=s("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız",-1)),s("div",eo,g((O=m.value)==null?void 0:O.speed),1)])]),s("div",to,[s("div",no,g(ft.value),1),s("div",io,g(vt.value),1)]),s("div",oo,[s("div",ao,[t[18]||(t[18]=s("div",null,"Meço %",-1)),s("div",lo,[y(g(U.value.availability)+" ",1),s("div",so,[a(Ve,{"model-value":U.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),s("div",ro,[t[19]||(t[19]=s("div",null,"Performans %",-1)),s("div",uo,[y(g(U.value.performance)+" ",1),s("div",co,[a(Ve,{"model-value":U.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),s("div",po,[t[20]||(t[20]=s("div",null,"Kalite %",-1)),s("div",mo,[y(g(U.value.quality)+" ",1),s("div",fo,[a(Ve,{"model-value":U.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),a(ee,null,{default:d(()=>[a(E,{cols:"12",class:"text-center"},{default:d(()=>[s("div",vo,[t[21]||(t[21]=y("OEE % ")),s("span",{class:Je(["kpi-oee",Tn.value])},g(U.value.oee),3)])]),_:1})]),_:1})])]}),_:1})]),_:1}),a(E,{cols:"12",md:"4",sm:"6"},{default:d(()=>[a(de,{class:"pa-3"},{default:d(()=>[a(ce,{class:"panel-title pa-0"},{default:d(()=>t[23]||(t[23]=[y("DURUM BİLGİLERİ")])),_:1,__:[23]}),t[35]||(t[35]=s("hr",null,null,-1)),s("section",ho,[s("div",_o,[t[25]||(t[25]=s("label",null,"Duruş Sebebi (F8 – Yeni Duruş)",-1)),s("div",go,[a(f,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=p=>o.value=p),items:c.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!w.value||T.value,class:Je({"app-select--force-disabled":!w.value||T.value}),onKeydown:P(F(re,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"]),a(D,{color:"success",variant:"tonal",size:"small",disabled:!w.value||T.value||!o.value,onClick:re},{default:d(()=>[t[24]||(t[24]=y(" Kaydet ")),a(Fe,{end:"",icon:"tabler-check"})]),_:1,__:[24]},8,["disabled"])]),a(h,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=p=>u.value=p),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),s("div",bo,[a(D,{variant:"tonal",color:"error",size:"small"},{default:d(()=>t[26]||(t[26]=[y("Açıklama Gir")])),_:1,__:[26]}),a(yi,{color:"error",modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=p=>_.value=p),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),s("div",yo,[a(D,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:gt},{default:d(()=>[t[27]||(t[27]=y(" F8 - Yeni Duruş ")),a(Fe,{end:"",icon:"tabler-player-skip-forward"})]),_:1,__:[27]}),a(D,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:An},{default:d(()=>[t[28]||(t[28]=y(" F9 - Çay Molası ")),a(Fe,{end:"",icon:"tabler-mug"})]),_:1,__:[28]}),a(D,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:On},{default:d(()=>[t[29]||(t[29]=y(" F10 - Yemek Molası ")),a(Fe,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[29]})]),s("div",xo,[s("div",null,[t[30]||(t[30]=s("div",{class:"label"},"Durum Süresi",-1)),s("div",wo,g($e.value),1)]),s("div",null,[t[31]||(t[31]=s("div",{class:"label"},"Vardiya",-1)),s("div",ko,g(Pe.value),1)])]),s("div",Co,[s("div",null,[t[32]||(t[32]=s("div",{class:"label"},"Çalışma",-1)),s("div",So,g(Be.value),1)]),s("div",null,[t[33]||(t[33]=s("div",{class:"label"},"Duruş",-1)),s("div",No,g(Le.value),1)]),s("div",null,[t[34]||(t[34]=s("div",{class:"label"},"Boşta",-1)),s("div",Io,g(Ke.value),1)])])])]),_:1,__:[35]})]),_:1}),a(E,{cols:"12",md:"5",sm:"6"},{default:d(()=>[a(de,{class:"pa-3"},{default:d(()=>{var p,C,O;return[a(ce,{class:"panel-title pa-0"},{default:d(()=>t[36]||(t[36]=[y("ÜRETİM RAKAMLARI")])),_:1,__:[36]}),t[52]||(t[52]=s("hr",null,null,-1)),s("section",To,[a(Ve,{"model-value":(((p=m.value)==null?void 0:p.net_qty)+((C=m.value)==null?void 0:C.counter))/((O=m.value)==null?void 0:O.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),a(ee,null,{default:d(()=>[a(E,{cols:"5"},{default:d(()=>{var I,S,Y,X,$,J,Ce,Se;return[s("div",null,[s("div",Do,[t[37]||(t[37]=s("div",{class:"label"},"İş Emri Miktarı",-1)),s("div",Eo,g(L((I=m.value)==null?void 0:I.order_qty)),1)]),s("div",Ao,[t[38]||(t[38]=s("div",{class:"label"},"Üretilen (uyumsoft)",-1)),s("div",Oo,g(L((S=m.value)==null?void 0:S.net_qty)),1)]),s("div",zo,[t[39]||(t[39]=s("div",{class:"label"},"Sayaç",-1)),s("div",Mo,g(L((Y=m.value)==null?void 0:Y.counter)),1)]),s("div",Vo,[t[40]||(t[40]=s("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),s("div",Fo,g(L(((X=m.value)==null?void 0:X.net_qty)+(($=m.value)==null?void 0:$.counter))),1)]),s("div",Ro,[t[41]||(t[41]=s("div",{class:"label"},"Kalan",-1)),s("div",$o,g(L((((J=m.value)==null?void 0:J.order_qty)??0)-((Ce=m.value)==null?void 0:Ce.counter)-(((Se=m.value)==null?void 0:Se.net_qty)??0))),1)])])]}),_:1}),a(E,{cols:"7"},{default:d(()=>{var I,S,Y,X;return[s("div",null,[a(ee,null,{default:d(()=>[a(E,{cols:"6"},{default:d(()=>{var $;return[t[42]||(t[42]=s("div",{class:"label"},"Hurda",-1)),s("div",Po,g(L(($=m.value)==null?void 0:$.scrap_qty)),1)]}),_:1,__:[42]}),a(E,{cols:"6"},{default:d(()=>{var $,J,Ce,Se,zt;return[t[43]||(t[43]=s("div",{class:"label"},"O.A.%",-1)),s("div",Bo,g((($=m.value)==null?void 0:$.net_qty)===0||((J=m.value)==null?void 0:J.order_qty)===0?0:((((Ce=m.value)==null?void 0:Ce.net_qty)+((Se=m.value)==null?void 0:Se.counter))/((zt=m.value)==null?void 0:zt.order_qty)*100).toFixed(0)),1)]}),_:1,__:[43]})]),_:1}),s("div",Lo,[t[44]||(t[44]=s("div",{class:"label"},"İş Emri No",-1)),s("div",Ko,g((I=m.value)==null?void 0:I.worder_no),1)]),s("div",jo,[t[45]||(t[45]=s("div",{class:"label"},"Ürün Kodu",-1)),s("div",Ho,g((S=m.value)==null?void 0:S.item_code),1)]),s("div",Go,[t[46]||(t[46]=s("div",{class:"label"},"Kalan",-1)),s("div",qo,g((Y=m.value)==null?void 0:Y.item_name),1)])]),s("div",Uo,[t[47]||(t[47]=s("div",{class:"label"},"Ürün Boyu",-1)),s("div",Wo,g(L((X=m.value)==null?void 0:X.item_length)),1)]),a(ee,{class:"mt-1"},{default:d(()=>[a(E,{cols:"6",class:"mt-0 py-2 pe-1"},{default:d(()=>[a(D,{id:"hurdaGir",block:"",variant:"outlined",color:"error",onClick:yt},{default:d(()=>t[48]||(t[48]=[y(" F8 - Hurda Girişi ")])),_:1,__:[48]})]),_:1}),a(E,{cols:"6",class:"mt-0 py-2 ps-1"},{default:d(()=>[a(D,{variant:"outlined",block:"",onClick:Pn},{default:d(()=>t[49]||(t[49]=[y("İş Emrini Kapat")])),_:1,__:[49]})]),_:1})]),_:1}),a(ee,{class:"mt-1"},{default:d(()=>[a(E,{cols:"6",class:"mt-0 py-2 pe-1"},{default:d(()=>[a(D,{variant:"outlined",block:"",onClick:Bn},{default:d(()=>t[50]||(t[50]=[y("Teknik Resim")])),_:1,__:[50]})]),_:1}),a(E,{cols:"6",class:"mt-0 py-2 ps-1"},{default:d(()=>[a(D,{variant:"outlined",block:""},{default:d(()=>t[51]||(t[51]=[y("Ürün Etiketi Bas")])),_:1,__:[51]})]),_:1})]),_:1})]}),_:1})]),_:1})])]}),_:1,__:[52]})]),_:1})]),_:1})]),s("section",Yo,[a(b(_i),{class:"orders-grid","data-source":K.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:d(()=>[a(b(M),{type:"buttons",width:"30",buttons:Rn}),a(b(M),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),a(b(M),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),a(b(M),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),a(b(M),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),a(b(M),{"data-field":"stokAdi",caption:"STOK ADI"}),a(b(M),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(M),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),a(b(hi),{visible:!0,width:240})]),_:1},8,["data-source"])]),t[69]||(t[69]=ti('<div class="bottom-tabs" data-v-2b88354f><button class="tab active" data-v-2b88354f>İş Emirleri</button><button class="tab" data-v-2b88354f>Duruşlar</button><button class="tab" data-v-2b88354f>Hurdalar</button><button class="tab" data-v-2b88354f>Ölçümler</button><button class="tab" data-v-2b88354f>Kısayollar</button></div>',1)),a(nt,{modelValue:_e.value,"onUpdate:modelValue":t[4]||(t[4]=p=>_e.value=p),"max-width":"400"},{default:d(()=>[a(de,null,{default:d(()=>[a(ce,null,{default:d(()=>t[53]||(t[53]=[y("Hurda Girişi")])),_:1,__:[53]}),a(Qe,null,{default:d(()=>[a(et,{ref_key:"hurdaInputRef",ref:He,modelValue:ge.value,"onUpdate:modelValue":t[3]||(t[3]=p=>ge.value=p),label:"Hurda Miktarı",type:"number","hide-details":"",min:1,step:"1",autofocus:"",onKeydown:[P(F(bt,["prevent"]),["enter"]),P(F(qe,["prevent"]),["esc"])],onKeyup:P(F(bt,["prevent"]),["enter"])},null,8,["modelValue","onKeydown","onKeyup"]),t[54]||(t[54]=s("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[54]}),a(Ze,null,{default:d(()=>[a(tt),a(D,{variant:"text",color:"grey",onClick:qe},{default:d(()=>t[55]||(t[55]=[y("İptal (Esc)")])),_:1,__:[55]}),a(D,{variant:"elevated",color:"error",onClick:xt,loading:ae.value,disabled:ae.value},{default:d(()=>[ae.value?(Q(),Z(Re,{key:0},[a(Vt,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),t[56]||(t[56]=y(" Kaydediliyor... "))],64)):(Q(),Z(Re,{key:1},[y("Kaydet (Enter)")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(nt,{modelValue:ne.value,"onUpdate:modelValue":t[8]||(t[8]=p=>ne.value=p),"max-width":"420",onKeydown:t[9]||(t[9]=P(F(p=>ne.value=!1,["prevent","stop"]),["esc"]))},{default:d(()=>[a(de,null,{default:d(()=>[a(ce,null,{default:d(()=>t[57]||(t[57]=[y("İş Emrini Aktif Et")])),_:1,__:[57]}),a(Qe,null,{default:d(()=>{var p,C,O;return[s("form",{onSubmit:F(We,["prevent"])},[s("div",Xo,[s("strong",null,g((p=z.value)==null?void 0:p.isEmriNo),1),y(" – "+g((C=z.value)==null?void 0:C.stokKodu),1)]),s("div",Jo,g((O=z.value)==null?void 0:O.stokAdi),1),a(et,{ref:"activateLengthInput",modelValue:xe.value,"onUpdate:modelValue":t[5]||(t[5]=I=>xe.value=I),modelModifiers:{number:!0},type:"number",label:"Ürün Boyu (mm)",variant:"outlined",density:"compact",autofocus:"",onKeydown:[P(F(We,["prevent"]),["enter"]),t[6]||(t[6]=P(F(I=>ne.value=!1,["prevent","stop"]),["esc"]))]},null,8,["modelValue","onKeydown"]),t[58]||(t[58]=s("button",{type:"submit",style:{display:"none"}},null,-1))],32)]}),_:1}),a(Ze,null,{default:d(()=>[a(tt),a(D,{variant:"text",onClick:t[7]||(t[7]=p=>ne.value=!1)},{default:d(()=>t[59]||(t[59]=[y("İptal")])),_:1,__:[59]}),a(D,{color:"primary",variant:"flat",onClick:We,disabled:!xe.value},{default:d(()=>t[60]||(t[60]=[y("Onayla")])),_:1,__:[60]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(nt,{modelValue:we.value,"onUpdate:modelValue":t[11]||(t[11]=p=>we.value=p),"max-width":"520",onKeydown:P(F(Ue,["prevent","stop"]),["esc"])},{default:d(()=>[a(de,null,{default:d(()=>[a(ce,{class:"text-h5",style:{"background-color":"green",color:"black"}},{default:d(()=>t[61]||(t[61]=[y("Üretim Girişi")])),_:1,__:[61]}),a(Qe,null,{default:d(()=>[a(ee,{class:"mb-2"},{default:d(()=>[a(E,{cols:"12",sm:"4"},{default:d(()=>{var p;return[t[62]||(t[62]=s("div",{class:"label"},"İş Emri Miktarı",-1)),s("div",Zo,g(L((p=m.value)==null?void 0:p.order_qty)),1)]}),_:1,__:[62]}),a(E,{cols:"12",sm:"4"},{default:d(()=>{var p;return[t[63]||(t[63]=s("div",{class:"label"},"Üretilen (uyum)",-1)),s("div",Qo,g(L((p=m.value)==null?void 0:p.net_qty)),1)]}),_:1,__:[63]}),a(E,{cols:"12",sm:"4"},{default:d(()=>{var p;return[t[64]||(t[64]=s("div",{class:"label"},"Sayaç",-1)),s("div",ea,g(L((p=m.value)==null?void 0:p.counter)),1)]}),_:1,__:[64]})]),_:1}),a(et,{ref_key:"uretimInputRef",ref:Tt,modelValue:ke.value,"onUpdate:modelValue":t[10]||(t[10]=p=>ke.value=p),modelModifiers:{number:!0},type:"number",label:"Elle Üretim Miktarı",variant:"outlined",density:"comfortable",min:0,step:1,"hide-details":"",autofocus:"",onKeydown:[P(F(Dt,["prevent"]),["enter"]),P(F(Ue,["prevent"]),["esc"])]},null,8,["modelValue","onKeydown"]),t[65]||(t[65]=s("div",{class:"text-caption mt-2"},"Sayaç değeri yanlış olabilir. Gerçek sayıyı giriniz...",-1))]),_:1,__:[65]}),a(Ze,null,{default:d(()=>[a(tt),a(D,{variant:"outlined",color:"grey",onClick:Ue},{default:d(()=>t[66]||(t[66]=[y("Vazgeç")])),_:1,__:[66]}),a(D,{color:"primary",variant:"outlined",onClick:Dt,disabled:ke.value==null||le.value,loading:le.value},{default:d(()=>[le.value?(Q(),Z(Re,{key:0},[a(Vt,{indeterminate:"",size:"18",color:"primary",class:"mr-2"}),t[67]||(t[67]=y(" Kaydediliyor... "))],64)):(Q(),Z(Re,{key:1},[y("Kaydet (Enter)")],64))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]),a(b(bi),{visible:j.value,"onUpdate:visible":t[13]||(t[13]=p=>j.value=p),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":Hn,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}},"on-shown":Ln},{content:d(()=>[a(ee,{class:"pa-4"},{default:d(()=>[a(f,{ref_key:"durusSelectRef",ref:Ye,modelValue:o.value,"onUpdate:modelValue":t[12]||(t[12]=p=>o.value=p),items:c.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!w.value||T.value,class:Je({"app-select--force-disabled":!w.value||T.value}),onKeydown:P(F(re,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"])]),_:1})]),title:d(()=>t[68]||(t[68]=[s("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:d(()=>[a(b(gi),{widget:"dxButton",toolbar:"bottom",location:"center",options:Kn.value},null,8,["options"])]),_:1},8,["visible"])])}}}),Ja=xi(ta,[["__scopeId","data-v-2b88354f"]]);export{Ja as default};
