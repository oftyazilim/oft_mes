import{_ as va}from"./AppStepper.vue_vue_type_style_index_0_lang-Br36wvPF.js";import{d as ya,r,i as ga,aK as Ge,q as ba,eC as ka,D as st,a as wa,c as z,o as T,b as e,f as n,e as m,g as ha,l,m as X,aA as xe,az as J,V as _a,p as V,aF as I,T as K,y as xa,F as Da,s as w}from"./main-D2EscoYj.js";import{u as Sa}from"./pageTitle-CDHIlgog.js";import{D as F}from"./button-BjFj9KTD.js";import{D as rt,a as Ue}from"./switch-BdF_MYFG.js";import{D as Be}from"./select-box-CNlnsB4V.js";import{D as Ta}from"./context-menu-DI9v36-5.js";import{s as De,D as o,e as Ia,f as Aa,g as Se,h as Ra,i as Ca,j as za,k as Va,d as Te,l as Ka,m as Na,n as Ea,o as Pa,p as Oa,b as Ma,c as x,q as Fa,r as G,t as U}from"./data-grid-BfcfGamX.js";import{D as Ga}from"./load-panel-CRsBFIHx.js";import{D as Ua}from"./number-box-BG4B_APw.js";import{D as N,a as B}from"./popup-FXIPek9M.js";import{D as ut}from"./text-area-BHTWLY_u.js";import{D as A}from"./text-box-CNACMJWi.js";import{D as Ba}from"./tooltip-CXT1pXTu.js";import{q as $a}from"./m_resize_observer-DMNQssYY.js";import"./dom_component-DKv5MAZF.js";import"./m_select_box-CRhMyRR9.js";import{e as La}from"./export_data_grid-DmsREjLK.js";import"./format_helper-Bl50ZXvO.js";import{n as b}from"./notify-5gMcoo8D.js";import{e as Ya}from"./exceljs.min-Dm3_meIG.js";import{F as qa}from"./FileSaver.min-DTJoJ69M.js";import{_ as Ha}from"./SurecCell.vue_vue_type_style_index_0_lang-BFLRfPO-.js";import{V as de}from"./VCardText-azI7535g.js";import{V as p}from"./VCol-CHpY8aMB.js";import{V as Ie,a as dt,b as mt}from"./VCard-T0k1kNet.js";import{V as S}from"./VRow-f6KsoHu4.js";import{V as Wa}from"./VDivider-OU4rXVTX.js";import{V as ja}from"./VForm-Cz8DPMNr.js";import{V as Za,a as $e}from"./VWindowItem-CDAhSQYy.js";import{V as Xa}from"./VTextField-QsHauao8.js";import{V as Ja}from"./VSwitch-DOPRZBRC.js";import{V as ct}from"./VSpacer-B6ifK6te.js";import{V as pt}from"./VDialog-BzOaHVNr.js";import{V as Qa}from"./VSelect-CZVXuET4.js";import"./VSlideGroup-B2JTZhi6.js";import"./VSlideGroupItem-Dv8egWOk.js";import"./VAvatar-CniZUwYN.js";import"./VImg-MKRtm9f5.js";import"./index-CbQT9NGC.js";import"./index-CA1WRiNf.js";import"./m_row_dragging-D0lZX4Sz.js";import"./themes-DyoTXICD.js";import"./overlay-PilLaCDt.js";import"./editor--UgCKd49.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./m_utils.scroll-Cf9h5Otv.js";import"./m_popover-Egqjmt12.js";import"./export_merged_ranges_manager-DeCXVQ0Y.js";import"./language_codes-DEHyqWqV.js";import"./progress-bar-mb7bRk1x.js";/* empty css              */import"./createSimpleFunctional-1c_CO4g1.js";import"./form-D_460Fj6.js";import"./forwardRefs-C-GTDzx5.js";import"./lazy-D-yUueBT.js";import"./ssrBoot-BtnQwhjz.js";/* empty css                   */import"./VCounter-DSXlZ9wc.js";import"./VField-B3rh4XK5.js";import"./easing-Bybner-F.js";import"./VInput-BjvMkA0i.js";import"./VSelectionControl-DZw2etde.js";import"./VOverlay-CGyptLmx.js";import"./delay-CUVxFBQ2.js";import"./scopeId-ChRikLqb.js";import"./dialog-transition-Br_wbx3h.js";import"./VList-CH4I0jaF.js";import"./VMenu-C5fVlsME.js";import"./VCheckboxBtn-BZ-Spw8D.js";import"./VChip-BX_uTapI.js";const el={id:"liste",style:{"margin-block-end":"-10px"}},tl={class:"informer"},al={class:"count"},ll={class:"informer"},il={class:"count"},nl={key:0,class:J(["dx-icon","dx-icon-belloutline"]),style:{fontSize:"20px",color:"green"}},ol={key:0,class:J(["dx-icon","dx-icon-warning"]),style:{fontSize:"20px",color:"red"}},sl={class:"popup-center"},rl={class:"popup-center"},ul={class:"popup-center"},dl={class:"popup-center"},ml={key:0},cl={key:1},pl={class:"popup-center"},fl={class:"caption"},vl={style:{"block-size":"613px"}},ft="İş Emirleri",vt="MEKANIK",Ae="planlama:is-emirleri-mekanik",Ni=ya({__name:"is-emirleri-mekanik",props:{tab:{},mesaj:{},tablo:{},istasyon:{type:Boolean},operasyon:{type:Boolean},grup:{type:Boolean},isMerkezi:{},indx:{}},setup(yt){function D(a){return typeof a.value=="number"?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a.value):a.valueText}const Q=r(!1),ee=r(!1),te=r(!1),me=r(!1),ce=r(!1),ae=r(!1),Re=r(!1),v=r([]);r(null);const Le=r(null);Sa().setTitle(`${ft} (${vt})`),document.title=`OFT - ${ft} | ${vt}`,r(null),r({});const pe=r(!1),E=r(!1),le=r(!1),ie=r(!0),Ye=r([]),$=r([]),gt=r([]),qe=r([]),ne=r([]);r([]),r([]);const Ce=r([]),h=r(null),bt=r(null),kt=r(null),ze=r(!0),Ve=r(!1),Ke=r("");async function fe(a="Veriler yükleniyor…"){Ke.value=a,await Ge(),await new Promise(requestAnimationFrame)}function ve(){Ve.value=!1,Ke.value=""}const He={of:"window"},ye=r(0),We=r(0),P=r(null),ge=r(!1),y=r([]),_=r(new Date),je=r(new Date),Ze=r(null),L=r(""),Ne=r("");r(null);const oe=r(null),R=r(""),wt=r(Date.now()),Ee=r(0);r(0),r(0);const Pe=r(2),Xe=r(0),Je=r(""),Oe=r([]),se=r(0),Me=r([]),re=r(0);r([]),r([]);const ht=()=>{const a=["ITEM ID","STOK KODU","BAKİYE"],t=ne.value.filter(u=>u.bakiye?u.bakiye<0:!1);if(t.length===0){const u=document.createElement("textarea");u.value=" ",u.style.position="absolute",u.style.left="-9999px",document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),b("Eksik bulunamadı.","warning",1500);return}const s=t.map(u=>{const g=Number.parseFloat(u.bakiye.toString())||0;return`${u.item_id}	${u.stok_kodu}	${u.stok_adi}	${g}`}),d=[a.join("	"),...s].join(`
`),i=document.createElement("textarea");i.value=d,i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select();try{document.execCommand("copy"),b("Eksikler kopyalandı.","success",1500)}catch(u){console.error("Kopyalama sırasında bir hata oluştu:",u)}document.body.removeChild(i)},Y=r(!1),q=r(""),ue=r(!0),H=r([]),W=r(!1),C=r(null);async function be(){try{const{data:a}=await w.get("/api/grid-layouts",{params:{page:Ae}});H.value=Array.isArray(a)?a:[]}catch(a){console.error("Düzenler alınamadı:",a)}}function _t(){var s;const a=(s=h.value)==null?void 0:s.instance;if(!a)return null;const t=a.state();return t&&!ue.value&&("filterValue"in t&&delete t.filterValue,"filterPanel"in t&&delete t.filterPanel,Array.isArray(t.columns)&&t.columns.forEach(d=>{!d||typeof d!="object"||(delete d.filterValue,delete d.filterType,delete d.filterValues,delete d.selectedFilterOperation)})),t}async function xt(){const a=_t();if(a){if(!q.value.trim()){Y.value=!0;return}try{await w.post("/api/grid-layouts",{page_key:Ae,name:q.value.trim(),include_filters:ue.value,state:a,meta:{version:1,last_used:!0}}),b("Düzen kaydedildi","success",1200),Y.value=!1,await be();const t=H.value.find(s=>s.name===q.value.trim());if(t!=null&&t.id)try{await w.put(`/api/grid-layouts/${t.id}/last-used`,{page_key:Ae})}catch{}}catch(t){console.error("Düzen kayıt hatası:",t),b("Kayıt sırasında hata","error",1500)}}}async function Dt(){await be(),C.value=null,W.value=!0}function Qe(a){var t;(t=h.value)!=null&&t.instance&&h.value.instance.state(a)}function St(){const a=H.value.find(t=>t.id===C.value);a&&(Qe(a.state),W.value=!1,a.id&&w.put(`/api/grid-layouts/${a.id}/last-used`,{page_key:Ae}).catch(()=>{}))}async function Tt(){if(C.value)try{await w.delete(`/api/grid-layouts/${C.value}`),b("Düzen silindi","success",1200),await be(),C.value=null,H.value.length===0&&(W.value=!1)}catch(a){console.error("Düzen silme hatası:",a),b("Silme sırasında hata","error",1500)}}const It=()=>{var a;(a=h.value)!=null&&a.instance&&h.value.instance.state(null)},At=a=>{y.value=a.selectedRowsData},Rt=(a,t)=>{const s=t.data.renk_kodu;a.innerText=t.text;const d=i=>{const u=document.createElement("span");return u.className="dx-icon dx-icon-square",u.style.marginLeft="8px",u.style.color=i,u.style.fontSize="20",u.style.display="inline-flex",u};if(s){let i="";switch(s){case"RAL7035":i="#D7D7D7";break;case"RAL7016":i="#293133";break;case"RAL7031":i="#474B4E";break;case"RAL7032":i="#721422";break;case"RAL5026":i="#102C54";break;case"RAL7037":i="#7D7F7D";break;case"RAL9003":i="#F4F4F4";break;case"RAL9005":i="#0A0A0A";break;case"RAL9006":i="#A5A5A5";break;case"RAL9007":i="#8F8F8F";break;case"RAL9010":i="#FFFFFF";break;case"RAL9016":i="#F6F6F6";break;default:i="white";break}const u=d(i);a.insertBefore(u,a.firstChild)}},Ct=(a,t)=>{const s=t.data.teknik_not1&&t.data.teknik_not1.trim()!=="",d=t.data.teknik_not2&&t.data.teknik_not2.trim()!=="";a.innerText=t.text;const i=(u,g)=>{const k=document.createElement("span");return g==="Planlamanın Notu"?k.className="dx-icon dx-icon-square":k.className="dx-icon dx-icon-message",k.style.marginLeft="8px",k.style.color=u,k.style.fontSize="16",k.style.display="inline-flex",k.addEventListener("click",()=>{Ze.value=g==="Planlamanın Notu"?t.data.teknik_not1:t.data.teknik_not2,L.value=g,me.value=!me.value}),k};if(s){let u="";switch(t.data.teknik_not1){case"Mekanik eksik":u="orange";break;case"Satınalma eksik":u="red";break;case"Revizyon yapıldı. Müşteri / Arge":u="gray";break;case"Ürün ağacı yok":u="gray";break;case"Beklemede - Yönetim - Fiyat":u="#f79191";break;case"İptal - Müşteri":u="darkgray";break;default:u="#a29bef";break}const g=i(u,"Planlamanın Notu");a.appendChild(g)}if(d){const u=i("green","Üretimin Notu");a.appendChild(u)}},et=a=>{if(!a||typeof a!="string")return null;const[t,s,d]=a.split(".");return`${d}-${s}-${t}`},zt=(a,t)=>{const s=et(t.data.teslim_tarihi),d=et(t.data.planlanan_bitis_tarihi),i=d?new Date(d):new Date,u=s?new Date(s):new Date;i.setHours(0,0,0,0),u.setHours(0,0,0,0);const g=Math.floor((u.getTime()-i.getTime())/(1e3*60*60*24));a.innerText=t.text;const k=(f,fa)=>{const Z=document.createElement("span");return Z.className=fa?"dx-icon dx-icon-isnotblank":"dx-icon dx-icon-isblank",Z.style.marginRight="8px",Z.style.color=f,Z.style.fontSize="16",Z.style.display="inline-flex",Z};if(g<0){const f=k("red",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else if(g===0){const f=k("blue",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else if(g<=3){const f=k("orange",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else{const f=k("white",!1);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}},c=r({hafta:"",isemri_no:"",teslim_tarihi:"",siparis_belge_no:"",isemri_id:"",sip_not1:"",sip_not2:"",sip_not3:"",sip_not4:"",teknik_not1:"",teknik_not2:"",cari_ad:"",eksikler:"",kaydi_giren_kullanici:"",planlanan_baslangic:"",planlanan_bitis_tarihi:"",aksesuar:"",sip_detay_id:0,istasyon:"",stok_kodu:"",stok_adi:"",CIKIS_DEPO:"",siparis_miktari:0}),Fe=r([{title:"Sipariş Detayı",subtitle:"Seçilmedi"},{title:"Alt İş Emirleri",subtitle:"Seçilmedi"},{title:"Rota",subtitle:"Tasarım aşamasında"}]),ke=r(0),Vt=()=>{if(c.value===null||c.value.isemri_no===""){b("Önce iş emrini seçmelisiniz...","error",1500);return}oe.value&&(R.value===""?R.value=oe.value:R.value+=(R.value?`
`:"")+oe.value)},we={width:100,type:"success",text:"Kaydet",stylingMode:"contained"},he={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{Q.value=!1,ee.value=!1,te.value=!1,ce.value=!1,ae.value=!1}},Kt=async()=>{const a=y.value.map(s=>({item_id:s.item_id,isemriID:s.isemri_id,operasyonID:s.OPERASYON_ID,istasyonID:s.IS_ISTASYONU_ID,isMerkeziID:s.IS_MERKEZI_ID,satir_id:s.satir_id,ismerkezi_kodu:re.value,istasyon_kodu:se.value,rotaGuncelle:ie.value})),t=j.value.id;try{const s=await w.post("/api/istasyonKaydet",{updateData:a,userID:t});O(),y.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(s){console.error("Güncelleme sırasında hata oluştu:",s)}ae.value=!1},Nt=()=>{Ne.value==="planlanan_baslangic"&&Ot("t"),Q.value=!1},Et=()=>{Mt(),ee.value=!1},Pt=async()=>{te.value=!1;const a=y.value.map(s=>({isemriNo:s.isemri_no,aksesuar:E.value===!0?1:0,orderDId:s.sip_detay_id})),t=j.value.id;console.log("Aksesuar güncelleme verisi:",a);try{const s=await w.post("/api/aksesuarKaydet",{updateData:a,userID:t});O(),y.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(s){console.error("Güncelleme sırasında hata oluştu:",s)}},Ot=async a=>{v.value[1]===null&&(v.value[1]=v.value[0]),new Date(_.value),new Date(_.value);const t=y.value.map(d=>({tur:a,satir_id:d.satir_id,isEmriID:d.isemri_id,isemriNo:d.isemri_no,sure:0,aksesuar:E.value===!0?1:0,teslimTarih:`${v.value[0].getFullYear()}-${(v.value[0].getMonth()+1).toString().padStart(2,"0")}-${v.value[0].getDate().toString().padStart(2,"0")} ${v.value[0].getHours().toString().padStart(2,"0")}:${v.value[0].getMinutes().toString().padStart(2,"0")}:${v.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_baslangic:`${v.value[0].getFullYear()}-${(v.value[0].getMonth()+1).toString().padStart(2,"0")}-${v.value[0].getDate().toString().padStart(2,"0")} ${v.value[0].getHours().toString().padStart(2,"0")}:${v.value[0].getMinutes().toString().padStart(2,"0")}:${v.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_bitis:`${v.value[1].getFullYear()}-${(v.value[1].getMonth()+1).toString().padStart(2,"0")}-${v.value[1].getDate().toString().padStart(2,"0")} ${v.value[1].getHours().toString().padStart(2,"0")}:${v.value[1].getMinutes().toString().padStart(2,"0")}:${v.value[1].getSeconds().toString().padStart(2,"0")}`})),s=j.value.id;try{const d=await w.post("/api/updatePlanBaslangic",{updateData:t,userID:s});O(),y.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(d){console.error("Güncelleme sırasında hata oluştu:",d)}},Mt=async()=>{const a=y.value.map(s=>({tur:"s",birlesik:le.value===!0?1:0,gun:Pe.value,satir_id:s.satir_id,isEmriID:s.isemri_id,isemriNo:s.isemri_no,sure:0,sip_detay_id:s.sip_detay_id,aksesuar:E.value===!0?1:0,teslimTarih:`${_.value.getFullYear()}-${(_.value.getMonth()+1).toString().padStart(2,"0")}-${_.value.getDate().toString().padStart(2,"0")} ${_.value.getHours().toString().padStart(2,"0")}:${_.value.getMinutes().toString().padStart(2,"0")}:${_.value.getSeconds().toString().padStart(2,"0")}`})),t=j.value.id;try{const s=await w.post("/api/updatePlanBaslangic",{updateData:a,userID:t});O(),y.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(s){console.error("Güncelleme sırasında hata oluştu:",s)}},_e=()=>{var t;const a=(t=h.value)==null?void 0:t.instance;a==null||a.clearSelection()},Ft=async()=>{try{const a=$.value.findIndex(s=>s.isemri_no===c.value.isemri_no);if(a===-1){b("Güncellenecek kayıt bulunamadı.","success",1500);return}if((await w.post("/api/planNotKaydet",{satir_id:c.value.isemri_no,not:R.value})).status===200){const s=[...$.value];s[a].teknik_not1=R.value,$.value=s,b("Notlar başarıyla güncellendi...","success",1500)}}catch(a){console.error("Kaydetme sırasında bir hata oluştu:",a)}},tt=a=>{a.rowType==="data"&&(a.column.dataField==="isemri_miktari"||a.column.dataField==="uretilen_net_miktar"||a.column.dataField==="kalan_miktar")&&a.value>0&&(a.cellElement.style.fontWeight="bold"),a.rowType==="data"&&a.column.dataField==="toplam_hurda_miktari"&&a.value>0&&(a.cellElement.style.color="white",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#EC2407"),a.rowType==="data"&&a.column.dataField==="kalan_siparis_miktari"&&a.value>0&&(a.cellElement.style.color="black",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#b7d0e8"),a.rowType==="data"&&a.column.dataField==="hafta"&&(a.cellElement.style.fontWeight="bold")},Gt=a=>{var k;if(a.rowType!=="data")return;const t=new Date,s=new Date;s.setDate(t.getDate()-1);const d=f=>f.toISOString().split("T")[0],i=d(t),u=d(s),g=(k=a.data)==null?void 0:k.kayit_tarihi;if(g){const f=d(new Date(g));(f===i||f===u)&&(a.rowElement.style.backgroundColor="rgba(250,160,8,0.12)",a.rowElement.style.fontWeight="bold")}},Ut=a=>{a.rowType==="data"&&a.column.dataField==="qty_prm"&&(a.cellElement.style.fontWeight="bold")},Bt=a=>{a.rowType==="data"&&a.column.dataField==="bakiye"&&a.value<0&&(a.cellElement.style.color="white",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#EC2407"),a.rowType==="data"&&(a.column.dataField==="qty_net"||a.column.dataField==="qty_prm")&&(a.cellElement.style.fontWeight="bold")},$t=a=>{a.rowType==="data"&&(Ce.value=[],Xe.value=a.data.stok_kodu,Je.value=a.data.stok_adi,la(a.data.item_id),Re.value=!0)},at=yt,Lt=()=>{var a,t;(t=(a=h.value)==null?void 0:a.instance)==null||t.clearFilter()},Yt=(a,t)=>{a.innerText=t.text;const s=t.data.tipi,d=(g,k)=>{const f=document.createElement("span");return f.className="dx-icon dx-icon-isnotblank",f.style.marginRight="8px",f.style.color=g,f.style.fontSize="16",f.style.display="inline-flex",f};let i="gray";switch(s){case"Hammadde":i="gold";break;case"YarıMamul":i="limegreen";break;case"Mamul":i="green";break;case"Ticari":i="gray";break}const u=d(i);a.insertBefore(u,a.firstChild)},qt=a=>{if(a.rowIndex===-1)return;const t=a.row.data;Fe.value[0].subtitle=t.siparis_belge_no,c.value=t,Ee.value=t.satir_id,c.value.siparis_belge_no=t.siparis_belge_no!=null?t.siparis_belge_no:"",c.value.istasyon=t.IS_ISTASYONU,R.value=t.teknik_not1!=null?t.teknik_not1:"",at.grup&&(ge.value=!0)},Ht=a=>{const t=a.row.data;E.value=t.aksesuar!==null},Wt=a=>{var d,i,u,g;const t=(d=h.value)==null?void 0:d.instance;if(!t)return;We.value=((i=t.getDataSource())==null?void 0:i.totalCount())||0;const s=(u=t.getDataSource())==null?void 0:u.group();Array.isArray(s)&&s.length>0?(P.value=((g=s[0])==null?void 0:g.selector)||null,ye.value=P.value?lt(P.value):0):s!=null&&s.selector?(P.value=s.selector,ye.value=P.value?lt(P.value):0):(P.value=null,ye.value=0)},jt=a=>{a.fullName},lt=a=>$a($.value).groupBy(a).toArray().length,Zt=()=>{ze.value=!ze.value},it=a=>{if(y.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}Ne.value=a,_.value=new Date(a==="planlanan_baslangic"?y.value[0].planlanan_baslangic:y.value[0].teslim_tarihi),je.value=new Date(a==="planlanan_baslangic"?y.value[0].planlanan_bitis_tarihi:y.value[0].teslim_tarihi),v.value=[_.value,je.value],Q.value=!0},Xt=a=>{if(y.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}Ne.value=a,le.value=!1,_.value=new Date(y.value[0].teslim_tarihi),ee.value=!0},Jt=()=>{if(y.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}re.value=0,se.value=0,Me.value=[],Oe.value=[],ta(),ie.value=!0,ae.value=!0},Qt=()=>{if(c.value===null){b("Önce iş emrini seçmelisiniz...","error",1500);return}ne.value=[],L.value=`${c.value.isemri_no} nolu iş emri detayı ( ${c.value.stok_adi} )`,ea(),ce.value=!0},nt=()=>{if(y.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}E.value=y.value[0].aksesuar!==""&&c.value.aksesuar!==null,te.value=!0},O=async()=>{try{await fe("Veriler yükleniyor…");const a=await w.get("/api/data",{params:{tablo:"DETAY",isMerkezi:["1100","1150","1200","1500","110","200","sele"],coID:j.value.co_id}});$.value=a.data.emirler,gt.value=a.data.siparisler,Ye.value=a.data.notlar}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{ve()}},ea=async()=>{try{const a=await w.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:c.value.CIKIS_DEPO||0,isemri_id:c.value.isemri_id}});qe.value=a.data.data,Fe.value[1].subtitle=`${a.data.toplamIsEmri} ad / ${a.data.toplamSure} dk`,ne.value=a.data.malzemeler}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}},ta=async()=>{await fe("İş merkezleri yükleniyor…");try{const a=await w.get("/api/merkezal");Me.value=a.data.merkezler}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{ve()}},aa=async()=>{se.value=0,await fe("İstasyonlar yükleniyor…");try{const a=await w.get("/api/istasyonal",{params:{ismerkezi:re.value}});Oe.value=a.data.istasyonlar}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{ve()}},la=async a=>{try{const t=await w.get("/api/digerdepobakiyeleri",{params:{item_id:a,depo:c.value.CIKIS_DEPO||0}});Ce.value=t.data.bakiyeler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}};ga(async()=>{await O();try{await be();const a=H.value.find(t=>{var s;return(s=t==null?void 0:t.meta)==null?void 0:s.last_used});a!=null&&a.state&&(await Ge(),Qe(a.state))}catch{}Ge(()=>{h.value&&h.value.instance&&h.value.instance.clearSelection()})});const ia=async()=>{await O()},na=()=>{pe.value=!pe.value},oa=a=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a),j=ba("userData"),sa=a=>{const t=new Ya.Workbook,s=t.addWorksheet("MekanikIsEmirleri");La({component:a.component,worksheet:s,autoFilterEnabled:!0}).then(()=>{t.xlsx.writeBuffer().then(d=>{qa.saveAs(new Blob([d],{type:"application/octet-stream"}),"MekanikIsEmirleri.xlsx")})}),a.cancel=!0},ot=ka(),M=st(()=>ot.can("manage","planlama")||ot.can("update","mekanik")),ra=[{text:"Yenile"},{text:"Haftaya Göre Grupla"},{text:"Detay Göster"},{text:"İstasyona Gönder",requiresManage:!0},{text:"Üretim Tarihini Değiştir",requiresManage:!0},{text:"Teslim Tarihini Değiştir",requiresManage:!0},{text:"Aksesuar",requiresManage:!0},{text:"Teknik Resim Göster"},{text:"Düzen Yükle"},{text:"Düzen Kaydet"},{text:"Düzen Sıfırla"}],ua=st(()=>ra.filter(a=>M.value||!("requiresManage"in a)));function da({itemData:a}){if(!(a!=null&&a.items))switch(a==null?void 0:a.text){case"Yenile":O();break;case"Detay Göster":Qt();break;case"Haftaya Göre Grupla":ca();break;case"İstasyona Gönder":Jt();break;case"Üretim Tarihini Değiştir":L.value="Üretim tarihini seçiniz",it("planlanan_baslangic");break;case"Teslim Tarihini Değiştir":L.value="Teslim tarihini seçiniz",Xt("teslim_tarihi");break;case"Aksesuar":nt();break;case"Düzen Yükle":Dt();break;case"Teknik Resim Göster":ma();break;case"Düzen Kaydet":q.value="",ue.value=!0,Y.value=!0;break;case"Düzen Sıfırla":It();break;case"RAL Kodlarını Güncelle":pa();break}}const ma=()=>{const t=`undefined/api/get-pdf/${`${c.value.stok_kodu}.pdf`}`;window.open(t,"_blank")};function ca(){var a;(a=h.value)!=null&&a.instance&&(h.value.instance.clearGrouping(),h.value.instance.columnOption("haftax","groupIndex",0))}const pa=async()=>{await fe("RAL kodları güncelleniyor…");const a=j.value.id;try{const t=await w.post("/api/ralguncelle",{userID:a});b("Renk Kodları başarıyla güncellendi...","success",2e3)}catch(t){console.error("Güncelleme sırasında hata oluştu:",t)}ve()};return(a,t)=>{const s=wa("DxScrollView"),d=va;return T(),z(Da,null,[e(Ie,{class:"mt-0 pa-0 pt-2"},{default:n(()=>[e(de,{class:"mt-0 pa-0 ms-2 me-1"},{default:n(()=>[e(p,{cols:"12",class:"mt-0 pa-1 pe-2"},{default:n(()=>[m("div",el,[e(l(Ta),{"data-source":ua.value,width:200,target:"#grid",onItemClick:da},null,8,["data-source"]),(T(),ha(l(De),{id:"grid",ref_key:"dataGridRef",ref:h,key:wt.value,"data-source":$.value,"key-expr":"satir_id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!1,"min-width":200,onExporting:sa,"allow-column-reordering":!0,"column-auto-width":!1,onContentReady:Wt,onFocusedRowChanged:qt,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:tt,onSelectionChanged:At,"auto-navigate-to-focused-row":!0,onRowPrepared:Gt,"on-option-changed":jt,onContextMenuPreparing:Ht,"focused-row-key":Ee.value,"onUpdate:focusedRowKey":t[0]||(t[0]=i=>Ee.value=i),"selected-rows-keys":y.value},{aksesuarliTemplate:n(()=>[e(l(F),{icon:"gift","styling-mode":"text",hint:"Aksesuar Ekle/Kaldır"})]),baslangicTarihiTemplate:n(()=>[e(l(F),{icon:"clock","styling-mode":"text",hint:"Başlangıç Tarihini Değiştir"})]),gruplaTemplate:n(()=>[e(l(F),{icon:"hierarchy","styling-mode":"text",hint:"Haftayı Grupla"})]),totalCountTemplate:n(()=>[m("div",tl,[m("div",al,V(ye.value),1),t[36]||(t[36]=m("span",null,"Toplam Grup",-1))])]),totalRecordTemplate:n(()=>[m("div",ll,[m("div",il,V(We.value),1),t[37]||(t[37]=m("span",null,"Toplam Kayıt",-1))])]),filtreTemizleTemplate:n(()=>[e(l(F),{icon:"notequal","styling-mode":"text",hint:"Filtre Temizle",id:"filtretemizle"})]),menuFiltreTemizleTemplate:n(()=>t[38]||(t[38]=[m("div",{style:{display:"flex","align-items":"center"}},[m("i",{class:"dx-icon dx-icon-undo"}),m("span",{style:{"margin-inline-start":"8px"}},"Filtre Temizle")],-1)])),yenileTemplate:n(()=>[e(l(F),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:n(()=>t[39]||(t[39]=[m("div",{style:{display:"flex","align-items":"center"}},[m("i",{class:"dx-icon dx-icon-refresh"}),m("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),filtreGosterTemplate:n(()=>[e(l(F),{icon:"filter","styling-mode":"text",hint:"Filtre Goster"})]),menuFiltreGosterTemplate:n(()=>t[40]||(t[40]=[m("div",{style:{display:"flex","align-items":"center"}},[m("i",{class:"dx-icon dx-icon-filter"}),m("span",{style:{"margin-inline-start":"8px"}},"Filtre Göster")],-1)])),collapseTemplate:n(()=>[e(l(F),{icon:pe.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:na},null,8,["icon"])]),surecCellTemplate:n(({data:i})=>[e(_a,{modelValue:i.value,"onUpdate:modelValue":u=>i.value=u,height:"20",color:"warning"},{default:n(()=>[m("span",null,V(Math.ceil(i.value))+"%",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),notlarPTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(T(),z("i",nl)):X("",!0)]),notlarOTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(T(),z("i",{key:0,class:J(["dx-icon","dx-icon-belloutline"]),style:xe({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):X("",!0)]),eksiklerTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(T(),z("i",ol)):X("",!0)]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(T(),z("i",{key:0,class:J(["dx-icon","dx-icon-gift"]),style:xe({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):X("",!0)]),aktifTemplate:n(({data:i})=>[i.value===1?(T(),z("i",{key:0,class:J(["dx-icon","dx-icon-runner"]),style:xe({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):X("",!0)]),default:n(()=>[e(l(o),{"data-field":"id",caption:"ID",visible:!1,"min-width":90}),e(l(o),{"data-field":"aktif",caption:"AKTIF",visible:!0,"min-width":40,"cell-template":"aktifTemplate"}),e(l(o),{"data-field":"hafta",caption:"HAFTA",fixed:!0,width:120,visible:!0,alignment:"left","cell-template":Ct}),e(l(o),{"data-field":"haftax",caption:"HFT","data-type":"string",visible:!1,width:20}),e(l(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:!0,width:60,"cell-template":"aksesuarTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"grup_id",caption:"GRUP ID","data-type":"string",visible:!1,width:40}),e(l(o),{"data-field":"IS_ISTASYONU",caption:"İST. ADI",visible:!0,width:130}),e(l(o),{"data-field":"IS_ISTASYONU_ID",caption:"İSTASYON ID",visible:!1,width:90}),e(l(o),{"data-field":"IS_MERKEZI_ID",caption:"İŞ MERKEZİ ID",visible:!1,width:90}),e(l(o),{"data-field":"IS_MERKEZI_ADI",caption:"İŞ MERKEZİ ADI",visible:!1,width:90}),e(l(o),{"data-field":"IS_ISTASYONU_KODU",caption:"İSTASYON KODU",visible:!1,width:150}),e(l(o),{"data-field":"IS_ISTASYONU_ADI",caption:"İSTASYON ADIx",visible:!1,width:150}),e(l(o),{"data-field":"OPERASYON_ID",caption:"OPRSYN ID",visible:!1,width:120}),e(l(o),{"data-field":"OPERASYON",caption:"OPRSYN",visible:!0,width:120}),e(l(o),{"data-field":"Operasyon_no",caption:"OPRSYN NO",visible:!1,width:120}),e(l(o),{"data-field":"siparis_belge_no",caption:"SİPARİŞ NO",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"siparis_miktari",caption:"SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"kalan_siparis_miktari",caption:"KALAN SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"cari_ad",caption:"MÜŞTERİ",visible:!0,"min-width":140,"allow-sorting":!1}),e(l(o),{"data-field":"renk_id",caption:"RENK ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"renk_kodu",caption:"RENK KODU",visible:!0,"min-width":110,"allow-sorting":!1,"cell-template":Rt}),e(l(o),{"data-field":"renk_adi",caption:"RENK ADI",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"item_id",caption:"ITEM ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"stok_kodu",caption:"STOK KODU",visible:!0,width:120,"allow-sorting":!1}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200,"allow-sorting":!1}),e(l(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:100,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"isemri_no",caption:"İŞ EMRİ NO",width:120,"allow-sorting":!1}),e(l(o),{"data-field":"teslim_tarihi",caption:"TESLİM TARİHİ","data-type":"date",width:140,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},"cell-template":zt,"allow-sorting":!1},null,8,["format"]),e(l(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:110,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},alignment:"left"},null,8,["format"]),e(l(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:80,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"isemri_miktari",caption:"İŞ EMRİ MİKTARI","data-type":"number",width:110,visible:!0}),e(l(o),{"data-field":"uretilen_toplam_miktar",caption:"TOPLAM URETİLEN","data-type":"number",width:60,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"uretilen_net_miktar",caption:"NET URETILEN","data-type":"number",width:60,visible:!0}),e(l(o),{"data-field":"toplam_hurda_miktari",caption:"HURDA MİKTARI","data-type":"number",width:60,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HAZIRLIK SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(l(o),{"data-field":"operasyon_suresi",caption:"OPERASYON SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","},"allow-sorting":!1}),e(l(o),{"data-field":"sip_detay_id","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"eksikler",caption:"EKSİKLER",visible:!0,width:60,"cell-template":"eksiklerTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"teknik_not1",caption:"PLN NOTU",width:60,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"teknik_not2",caption:"OPR NOTU",width:90,visible:!1,alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"kaydi_giren_kullanici",caption:"KAYIT YAPAN","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"satir_id",caption:"SATIR ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not1",caption:"SİP NOT 1","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not2",caption:"SİP NOT 2","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not3",caption:"SİP NOT 3","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not4",caption:"SİP NOT 4","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"CIKIS_DEPO",caption:"ÇIKIŞ DEPO","min-width":80,"allow-sorting":!1}),e(l(o),{"data-field":"kayit_tarihi",caption:"OLUŞTURMA TARİHİ","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(Ia),{mode:"multiple","select-all-mode":"page","show-check-boxes-mode":"onClick"}),e(l(Aa),{"auto-expand-all":pe.value},null,8,["auto-expand-all"]),e(l(Se),{visible:!0}),e(l(Ra),{visible:!0}),e(l(Ca),{visible:!0}),e(l(za),{visible:ze.value},null,8,["visible"]),e(l(Va),{visible:!0,width:240}),e(l(Te),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(l(Ka),{mode:"multiple"}),e(l(Na),{enabled:!0,"allow-export-selected-data":!1}),e(l(Ea),{height:"540px",enabled:!0,mode:"select",position:He},{default:n(()=>[e(l(Pa),{enabled:!0}),e(l(Oa),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(l(Ma),null,{default:n(()=>[e(l(x),{location:"before",name:"groupPanel"}),e(l(x),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(l(x),{location:"before",template:"totalCountTemplate"}),e(l(x),{location:"before",template:"totalRecordTemplate"}),e(l(x),{location:"before",template:"gruplaTemplate",visible:ge.value&&M.value,onClick:a.grup},null,8,["visible","onClick"]),e(l(x),{location:"before",template:"baslangicTarihiTemplate",visible:ge.value&&M.value,onClick:it},null,8,["visible"]),e(l(x),{location:"before","locate-in-menu":"auto",template:"aksesuarliTemplate",visible:ge.value&&M.value,onClick:nt},null,8,["visible"]),e(l(x),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:ia}),e(l(x),{location:"after","locate-in-menu":"auto",template:"filtreTemizleTemplate","menu-item-template":"menuFiltreTemizleTemplate",onClick:Lt}),e(l(x),{location:"after","locate-in-menu":"auto",template:"filtreGosterTemplate","menu-item-template":"menuFiltreGosterTemplate",onClick:Zt}),e(l(x),{name:"exportButton"}),e(l(x),{name:"columnChooserButton"}),e(l(x),{name:"searchPanel"})]),_:1}),e(l(Fa),null,{default:n(()=>[e(l(G),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(G),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(l(G),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(G),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(G),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(G),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(G),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(U),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D})]),_:1})]),_:1},8,["data-source","focused-row-key","selected-rows-keys"]))]),e(l(Ga),{visible:Ve.value,"onUpdate:visible":t[1]||(t[1]=i=>Ve.value=i),"show-indicator":!0,"show-pane":!0,shading:!0,message:Ke.value||"Yükleniyor...",position:He,"shading-color":"rgba(0,0,0,0.35)"},null,8,["visible","message"])]),_:1})]),_:1})]),_:1}),e(l(B),{visible:ee.value,"onUpdate:visible":t[6]||(t[6]=i=>ee.value=i),width:500,height:560,"hide-on-outside-click":!0,"show-close-button":!0,title:"Teslim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[m("div",sl,[e(l(rt),{ref_key:"calendarRef",ref:Le,value:_.value,"onUpdate:value":t[2]||(t[2]=i=>_.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"single","show-today-button":!0},null,8,["value"])])]),_:1}),e(p,{cols:"12"},{default:n(()=>[m("div",rl,[t[41]||(t[41]=m("h2",{class:"mr-4"},"Üretimi Etkileme",-1)),e(l(Ue),{value:le.value,"onUpdate:value":t[3]||(t[3]=i=>le.value=i)},null,8,["value"]),t[42]||(t[42]=m("h2",{class:"ml-4"},"Üretimi Etkile",-1))])]),_:1}),e(p,{cols:"12"},{default:n(()=>[m("div",ul,[t[43]||(t[43]=m("h2",null,"Geri çekilecek gün sayısı: ",-1)),e(l(Ua),{min:0,"show-spin-buttons":!0,"read-only":!le.value,value:Pe.value,"onUpdate:value":t[4]||(t[4]=i=>Pe.value=i),"input-attr":{"aria-label":"Gun"},style:{"inline-size":"100px","margin-inline-start":"10px"}},null,8,["read-only","value"])])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:we,onClick:t[5]||(t[5]=i=>Et())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:he})]),_:1},8,["visible"]),e(l(B),{visible:Q.value,"onUpdate:visible":t[9]||(t[9]=i=>Q.value=i),width:350,height:470,"hide-on-outside-click":!0,"show-close-button":!0,title:"Üretim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(rt),{ref_key:"calendarRef",ref:Le,value:v.value,"onUpdate:value":t[7]||(t[7]=i=>v.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"range","show-today-button":!0},null,8,["value"])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:we,onClick:t[8]||(t[8]=i=>Nt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:he})]),_:1},8,["visible"]),e(l(B),{visible:ae.value,"onUpdate:visible":t[15]||(t[15]=i=>ae.value=i),width:400,height:330,"hide-on-outside-click":!1,"show-close-button":!0,title:"İş Merkezi / İstasyonu seçiniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(Be),{"data-source":Me.value,value:re.value,"onUpdate:value":t[10]||(t[10]=i=>re.value=i),label:"İş Merkezi","label-mode":"floating","display-expr":"mrk_adi","value-expr":"is_merkezi_id",onValueChanged:t[11]||(t[11]=i=>aa()),style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[e(l(Be),{"data-source":Oe.value,value:se.value,"onUpdate:value":t[12]||(t[12]=i=>se.value=i),label:"İstasyon","label-mode":"floating","display-expr":"ist_adi","value-expr":"istasyon_id",style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[m("div",dl,[e(l(Ue),{value:ie.value,"onUpdate:value":t[13]||(t[13]=i=>ie.value=i)},null,8,["value"]),ie.value?(T(),z("div",ml,t[44]||(t[44]=[m("h2",{class:"ms-2"}," Rota Güncellensin",-1)]))):(T(),z("div",cl,t[45]||(t[45]=[m("h2",{class:"ms-2"}," Rota Güncellenmesin",-1)])))])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:we,onClick:t[14]||(t[14]=i=>Kt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:he})]),_:1},8,["visible"]),e(l(B),{visible:te.value,"onUpdate:visible":t[18]||(t[18]=i=>te.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:"Aksesuar olacak mı?"},{content:n(()=>[m("div",pl,[t[46]||(t[46]=m("h2",{class:"mr-4"},"Aksesuarsız",-1)),e(l(Ue),{value:E.value,"onUpdate:value":t[16]||(t[16]=i=>E.value=i)},null,8,["value"]),t[47]||(t[47]=m("h2",{class:"ml-4"},"Aksesuarlı",-1))])]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:we,onClick:t[17]||(t[17]=i=>Pt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:he})]),_:1},8,["visible"]),e(l(B),{visible:me.value,"onUpdate:visible":t[19]||(t[19]=i=>me.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:L.value},{content:n(()=>[e(s,{width:"100%",height:"100%"},{default:n(()=>[m("div",fl,V(c.value.isemri_no),1),I(" "+V(Ze.value),1)]),_:1})]),_:1},8,["visible","title"]),e(l(B),{visible:Re.value,"onUpdate:visible":t[20]||(t[20]=i=>Re.value=i),"hide-on-outside-click":!0,title:"Diğer Depo Bakiyeleri","show-close-button":!1,"show-title":!0,width:600,height:500},{default:n(()=>[e(p,{class:"text-center"},{default:n(()=>[m("h2",null,V(Xe.value),1),m("h2",null,V(Je.value),1)]),_:1}),t[48]||(t[48]=m("br",null,null,-1)),e(S,null,{default:n(()=>[e(p,null,{default:n(()=>[e(l(De),{id:"gridBakiyeler",ref:"dataGridRefB","data-source":Ce.value,"show-borders":!0,"column-auto-width":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Ut,"row-alternation-enabled":!0},{default:n(()=>[e(l(o),{"data-field":"whouse_id",caption:"DEPO ID",width:80}),e(l(o),{"data-field":"whouse_code",caption:"DEPO KODU",width:100}),e(l(o),{"data-field":"description",caption:"DEPO ADI"}),e(l(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(Se),{visible:!1}),e(l(Te),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1,__:[48]},8,["visible"]),e(l(B),{visible:ce.value,"onUpdate:visible":t[28]||(t[28]=i=>ce.value=i),width:1320,height:800,"hide-on-outside-click":!0,"show-close-button":!0,title:L.value},{content:n(()=>[e(Ie,null,{default:n(()=>[e(de,{class:"mb-0 pb-0"},{default:n(()=>[e(d,{"current-step":ke.value,"onUpdate:currentStep":t[21]||(t[21]=i=>ke.value=i),items:Fe.value,class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),e(Wa),e(de,null,{default:n(()=>[e(ja,null,{default:n(()=>[e(Za,{modelValue:ke.value,"onUpdate:modelValue":t[27]||(t[27]=i=>ke.value=i),class:"disable-tab-transition",style:{"block-size":"170px"}},{default:n(()=>[e($e,null,{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"4",class:"mt-0 pa-0"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.istasyon,label:"İş İstasyonu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.siparis_belge_no,label:"Sipariş Nosu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.kaydi_giren_kullanici,label:"Kayıt Yapan Personel","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.isemri_no,label:"İş Emri No","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.teslim_tarihi,label:"Teslim Tarihi","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:oa(c.value.siparis_miktari),label:"Sipariş Miktarı","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not1,label:"Sipariş Notu 1","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not2,label:"Sipariş Notu 2","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not3,label:"Sipariş Notu 3","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(A),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not4,label:"Sipariş Notu 4","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,null,{default:n(()=>[e(p,{cols:"7",class:"pa-0 ps-2 pe-3"},{default:n(()=>[e(l(Be),{modelValue:oe.value,"onUpdate:modelValue":t[22]||(t[22]=i=>oe.value=i),items:Ye.value,"display-expr":"not","value-expr":"not",disabled:!M.value,label:"Planlama Notu Eklemeleri",class:"kalin"},null,8,["modelValue","items","disabled"])]),_:1}),e(p,{cols:"5",class:"mt-4 pa-0 ps-0 pe-0"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"2",class:"pe-0 ps-1"},{default:n(()=>[e(K,{text:"",icon:"tabler-arrow-down",rounded:"",color:"warning",block:"",disabled:!M.value,modelValue:c.value.teknik_not1,"onUpdate:modelValue":t[23]||(t[23]=i=>c.value.teknik_not1=i),onClick:Vt},null,8,["disabled","modelValue"])]),_:1}),e(p,{cols:"7",class:"pa-0 ps-1 pt-3 pe-1"},{default:n(()=>[e(K,{color:"error",block:"",onClick:Ft,disabled:!M.value},{default:n(()=>[e(xa,{start:"",icon:"tabler-device-floppy"}),t[49]||(t[49]=I(" Kaydet "))]),_:1,__:[49]},8,["disabled"])]),_:1}),e(p,{cols:"3",class:"pe-6 ps-0"},{default:n(()=>[e(K,{text:"",icon:"tabler-copy",rounded:"",color:"success",block:"",modelValue:c.value.teknik_not1,"onUpdate:modelValue":t[24]||(t[24]=i=>c.value.teknik_not1=i),onClick:ht,id:"kopyala"},null,8,["modelValue"])]),_:1}),e(l(Ba),{"hide-on-outside-click":!1,target:"#kopyala","show-event":"mouseenter","hide-event":"mouseleave",position:"right"},{default:n(()=>t[50]||(t[50]=[m("b",null,"Malzeme listesindeki 0'dan küçük satırları kopyalar",-1),m("br",null,null,-1),I(" * satırları seçmenize gerek yoktur ")])),_:1,__:[50]})]),_:1})]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(ut),{modelValue:R.value,"onUpdate:modelValue":t[25]||(t[25]=i=>R.value=i),'"':"",label:" Planlamanın Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98,"max-length":950},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(ut),{modelValue:c.value.teknik_not2,"onUpdate:modelValue":t[26]||(t[26]=i=>c.value.teknik_not2=i),label:"Üretimin Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{cols:"8",class:"mt-0 pa-0 ps-2"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"12",class:"mt-2 pa-0 ps-2 pe-3 text-center"},{default:n(()=>[m("h4",null,"Malzeme Listesi ("+V(ne.value.length)+" parça) (Depo ID: "+V(c.value.CIKIS_DEPO)+")",1),m("div",vl,[e(l(De),{id:"gridMalzemeler",ref_key:"dataGridRefM",ref:kt,"data-source":ne.value,"key-expr":"item_id","show-borders":!0,"min-width":400,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Bt,height:"100%","row-alternation-enabled":!0,onRowClick:$t},{default:n(()=>[e(l(o),{"data-field":"tipi",caption:"TİPİ","data-type":"string",visible:!0,width:65,"cell-template":Yt}),e(l(o),{"data-field":"user_line_no",caption:"LINE NO",width:60,visible:!1}),e(l(o),{"data-field":"item_id",caption:"ITEM ID",width:180,visible:!1}),e(l(o),{"data-field":"stok_kodu",caption:"STOK KODU","min-width":120}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":180}),e(l(o),{"data-field":"worder_m_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(o),{"data-field":"qty_base_bom",caption:"BOM",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_net",caption:"İHTİYAÇ",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"bakiye",caption:"BAKİYE",width:100,"data-type":"number","sort-order":"asc",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_min_inv",visible:!1,caption:"MİN STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_max_inv",visible:!1,caption:"MAX STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(Se),{visible:!1}),e(l(Te),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e($e,null,{default:n(()=>[e(S,null,{default:n(()=>[e(l(De),{id:"gridDetay",ref_key:"dataGridRefD",ref:bt,"data-source":qe.value,"key-expr":"satir_id","show-borders":!0,"min-width":200,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:tt,height:"195"},{surecCellTemplate:n(({data:i})=>[e(Ha,{"cell-data":i,"max-deger":100},null,8,["cell-data"])]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(T(),z("i",{key:0,class:J(["dx-icon","dx-icon-gift"]),style:xe({fontSize:"16px",color:a.staticPrimaryColor})},null,4)):X("",!0)]),default:n(()=>[e(l(o),{"data-field":"IS_ISTASYONU",caption:"İSTASYON ADI",width:180}),e(l(o),{"data-field":"OPERASYON",caption:"OPERASYON",width:180}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200}),e(l(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:60,visible:!0}),e(l(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center"}),e(l(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:at.operasyon,width:60,"cell-template":"aksesuarTemplate",alignment:"center"},null,8,["visible"]),e(l(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HZRL DK","data-type":"number","min-width":90,width:90}),e(l(o),{"data-field":"operasyon_suresi",caption:"OPRS DK","data-type":"number","min-width":90,width:90}),e(l(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140}),e(l(Se),{visible:!1}),e(l(Te),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1}),e($e,null,{default:n(()=>[e(S)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"]),e(pt,{modelValue:Y.value,"onUpdate:modelValue":t[32]||(t[32]=i=>Y.value=i),"max-width":"520"},{default:n(()=>[e(Ie,null,{default:n(()=>[e(dt,null,{default:n(()=>t[51]||(t[51]=[I("Sayfa Düzenini Kaydet")])),_:1,__:[51]}),e(de,null,{default:n(()=>[e(Xa,{modelValue:q.value,"onUpdate:modelValue":t[29]||(t[29]=i=>q.value=i),label:"Düzen adı",density:"comfortable",clearable:""},null,8,["modelValue"]),e(Ja,{modelValue:ue.value,"onUpdate:modelValue":t[30]||(t[30]=i=>ue.value=i),label:"Filtreler dahil edilsin",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),e(mt,null,{default:n(()=>[e(ct),e(K,{variant:"text",onClick:t[31]||(t[31]=i=>Y.value=!1)},{default:n(()=>t[52]||(t[52]=[I("İptal")])),_:1,__:[52]}),e(K,{color:"primary",onClick:xt},{default:n(()=>t[53]||(t[53]=[I("Kaydet")])),_:1,__:[53]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(pt,{modelValue:W.value,"onUpdate:modelValue":t[35]||(t[35]=i=>W.value=i),"max-width":"520"},{default:n(()=>[e(Ie,null,{default:n(()=>[e(dt,null,{default:n(()=>t[54]||(t[54]=[I("Kayıtlı Düzenler")])),_:1,__:[54]}),e(de,null,{default:n(()=>[e(Qa,{items:H.value,"item-title":"name","item-value":"id",label:"Bir düzen seçin",modelValue:C.value,"onUpdate:modelValue":t[33]||(t[33]=i=>C.value=i)},null,8,["items","modelValue"])]),_:1}),e(mt,null,{default:n(()=>[e(ct),e(K,{variant:"text",onClick:t[34]||(t[34]=i=>W.value=!1)},{default:n(()=>t[55]||(t[55]=[I("Kapat")])),_:1,__:[55]}),e(K,{color:"error",variant:"tonal",disabled:!C.value,onClick:Tt},{default:n(()=>t[56]||(t[56]=[I("Sil")])),_:1,__:[56]},8,["disabled"]),e(K,{color:"primary",disabled:!C.value,onClick:St},{default:n(()=>t[57]||(t[57]=[I("Yükle")])),_:1,__:[57]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Ni as default};
