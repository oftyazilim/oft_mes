import{_ as q}from"./AppTextField.vue_vue_type_script_setup_true_lang-eyO-b99C.js";import{d as D,u as E,j as G,r,w as Y,a as A,c as H,o as h,b as a,f as l,e as n,m as e,H as R,v as k,g as I,l as T,t as w,b0 as O,aU as x,ae as Z,Z as J,F as K}from"./main-BMEXx-r1.js";import{u as z}from"./useGenerateImageVariant-HSwuXItE.js";import{r as M}from"./validators-BwBNGiur.js";import{V as Q}from"./VNodeRenderer-CpvWmm0T.js";import{a as W,b as X}from"./auth-v2-reset-password-illustration-light-DXjlOEVK.js";import{a as ee,b as ae}from"./misc-mask-light-Ha4lQOdV.js";import{$ as te}from"./api-BFmmzLjd.js";import{V as u}from"./VCol-BnyN1nRi.js";import{V as le}from"./VImg-BMF71Ab9.js";import{V as oe}from"./VCard-7WGGzEhi.js";import{V as B}from"./VCardText-BXH6U-yS.js";import{V as F}from"./VAlert-C2dBnaDC.js";import{V as se}from"./VForm-CwBA4Tqb.js";import{V as L}from"./VRow-CqMaUOiH.js";import"./focus-93MJm1H7.js";import"./VTextField-CSqqCZ7l.js";/* empty css                   */import"./VCounter-DiFNKIXz.js";import"./VField-d0gop777.js";import"./easing-Bybner-F.js";import"./VInput-mRO-xpbZ.js";import"./form-B_nFtxHt.js";import"./forwardRefs-C-GTDzx5.js";import"./helpers-BGv4x_9E.js";import"./index-BExijLSQ.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-qnl7KfvA.js";const re={class:"auth-logo d-flex align-center gap-x-3"},ne={class:"auth-title"},ie={class:"position-relative bg-background w-100 me-0"},ue={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"150px"}},me=["src"],De=D({__name:"reset-password",setup(de){const v=E(),S=G(),b=r(v.query.token||""),m=r(v.query.email||""),f=r(""),c=r(""),V=r(!1),g=r(!1),y=r(!1),_=r(null),d=r(null),C=r(),N=z(X,W),P=z(ae,ee),U=o=>((o==null?void 0:o.length)??0)>=8||"Şifre en az 8 karakter olmalıdır.",$=o=>o===f.value||"Şifreler eşleşmiyor.";Y(()=>v.query,o=>{b.value=o.token||"",m.value=o.email||""},{deep:!0});const j=async()=>{var t;if(_.value=null,d.value=null,!b.value||!m.value){d.value="Bağlantı geçersiz. Lütfen “Şifremi Unuttum” üzerinden tekrar deneyin.";return}const o=await((t=C.value)==null?void 0:t.validate());if(o!=null&&o.valid)try{y.value=!0,await te("/auth/reset-password",{method:"POST",body:{token:b.value,email:m.value,password:f.value,password_confirmation:c.value},onResponseError({response:s}){var p;d.value=((p=s==null?void 0:s._data)==null?void 0:p.message)||"İşlem sırasında bir hata oluştu."}}),_.value="Şifreniz başarıyla güncellendi.",setTimeout(()=>S.push({name:"login"}),1500)}catch(s){d.value=(s==null?void 0:s.message)||"İşlem sırasında bir hata oluştu."}finally{y.value=!1}};return(o,t)=>{const s=A("RouterLink"),p=q;return h(),H(K,null,[a(s,{to:"/"},{default:l(()=>[n("div",re,[a(e(Q),{nodes:e(R).app.logo},null,8,["nodes"]),n("h1",ne,k(e(R).app.title),1)])]),_:1}),a(L,{class:"auth-wrapper bg-surface","no-gutters":""},{default:l(()=>[a(u,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[n("div",ie,[n("div",ue,[a(le,{"max-width":"451",src:e(N),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),n("img",{class:"auth-footer-mask flip-in-rtl",src:e(P),alt:"auth-footer-mask",height:"280",width:"100"},null,8,me)])]),_:1}),a(u,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[a(oe,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:l(()=>[a(B,null,{default:l(()=>t[5]||(t[5]=[n("h4",{class:"text-h4 mb-1"}," Şifreyi Sıfırla 🔒 ",-1),n("p",{class:"mb-0"}," Yeni şifreniz en az 8 karakter olmalı ve onay şifresiyle eşleşmelidir. ",-1)])),_:1,__:[5]}),a(B,null,{default:l(()=>[e(_)?(h(),I(F,{key:0,type:"success",variant:"tonal",class:"mb-4"},{default:l(()=>[w(k(e(_)),1)]),_:1})):T("",!0),e(d)?(h(),I(F,{key:1,type:"error",variant:"tonal",class:"mb-4"},{default:l(()=>[w(k(e(d)),1)]),_:1})):T("",!0),a(e(se),{ref_key:"refVForm",ref:C,onSubmit:O(j,["prevent"])},{default:l(()=>[a(L,null,{default:l(()=>[a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(m),"onUpdate:modelValue":t[0]||(t[0]=i=>x(m)?m.value=i:null),label:"E-posta",type:"email",readonly:!0},null,8,["modelValue"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(f),"onUpdate:modelValue":t[1]||(t[1]=i=>x(f)?f.value=i:null),autofocus:"",label:"Yeni Şifre",placeholder:"············",type:e(V)?"text":"password",autocomplete:"new-password","append-inner-icon":e(V)?"tabler-eye-off":"tabler-eye",rules:[e(M),U],"onClick:appendInner":t[2]||(t[2]=i=>V.value=!e(V))},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(c),"onUpdate:modelValue":t[3]||(t[3]=i=>x(c)?c.value=i:null),label:"Yeni Şifre (Tekrar)",placeholder:"············",type:e(g)?"text":"password",autocomplete:"new-password","append-inner-icon":e(g)?"tabler-eye-off":"tabler-eye",rules:[e(M),$],"onClick:appendInner":t[4]||(t[4]=i=>g.value=!e(g))},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(Z,{block:"",type:"submit",loading:e(y),disabled:e(y)},{default:l(()=>t[6]||(t[6]=[w(" Şifreyi Güncelle ")])),_:1,__:[6]},8,["loading","disabled"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(s,{class:"d-flex align-center justify-center",to:{name:"login"}},{default:l(()=>[a(J,{icon:"tabler-chevron-left",size:"20",class:"me-1 flip-in-rtl"}),t[7]||(t[7]=n("span",null,"Giriş sayfasına dön",-1))]),_:1,__:[7]})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{De as default};
