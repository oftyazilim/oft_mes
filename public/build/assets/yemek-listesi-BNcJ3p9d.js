import{d as _,b4 as u,r as d,g as k,f as s,o as b,b as i,t as m,e as t,J as v,b0 as h,ae as C,K as V,m as g,a$ as w}from"./main-LxvBfCYO.js";import{V as x,a as D}from"./VCard-BbJErTjL.js";import{V as T}from"./VCardText-DzFEJt83.js";import"./VAvatar-A1xjLlVP.js";import"./VImg-2yOFTAKV.js";const B={class:"mt-6"},Y=["src"],S=_({__name:"yemek-listesi",setup(F){const p=u("userAbilityRules").value||[];let o=!1;p.forEach((e,a)=>{(e.action==="all"&&e.subject==="Planlama"||e.action==="read"&&e.subject==="Planlama")&&(o=!0)});const l=d(null),r=d("/storage/yemeklistesi/yemeklistesi.pdf"),c=u("userData");function f(e){var n;const a=(n=e.target.files)==null?void 0:n[0];a&&(l.value=a)}async function y(){if(!l.value)return;const e=new FormData;e.append("pdf",l.value),e.append("user_id",c.value.id);try{await w.post("/api/upload-yemek-listesi",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Yemek listesi yüklendi!"),r.value="/storage/yemeklistesi/yemeklistesi.pdf?"+new Date().getTime()}catch(a){alert("Yükleme başarısız oldu."),console.error(a)}}return(e,a)=>(b(),k(x,null,{default:s(()=>[i(D,null,{default:s(()=>a[0]||(a[0]=[m("Yemek Listesi")])),_:1,__:[0]}),i(T,null,{default:s(()=>[t("div",null,[v(t("form",{onSubmit:h(y,["prevent"])},[t("input",{type:"file",accept:"application/pdf",onChange:f},null,32),i(C,{type:"submit",color:"primary",class:"mt-2"},{default:s(()=>a[1]||(a[1]=[m("Yükle")])),_:1,__:[1]})],544),[[V,g(o)]])]),t("div",B,[t("iframe",{src:r.value+"#toolbar=0&navpanes=0&scrollbar=0",width:"100%",height:"800px",style:{border:"none"}},null,8,Y)])]),_:1})]),_:1}))}});export{S as default};
