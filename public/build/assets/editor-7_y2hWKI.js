import{ep as $,eq as vt,er as Ct,a$ as K,d as S,aT as q,dl as X,dt as Vt,dk as C,d0 as p,d5 as v,dg as Y,d8 as c,dS as yt,d1 as V,dN as Q,dP as O,d9 as M,dQ as Et,d4 as Z,dv as $t,e3 as bt,dp as Ot,dE as Mt,d7 as D,a_ as R,ee as At,df as xt}from"./main-BOWGhs4r.js";import{e as g,h as Rt,O as It,S as Nt,r as I,B as kt,f as St,a as Tt,W as wt,aC as G,P as Pt,l as Dt,V as Gt,aZ as Bt}from"./overlay-BAwKQzyS.js";const Fe=g.on,B=g.one,je=g.off,ze=g.trigger;g.Event;const Lt=g.triggerHandler;/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function L(i,t){for(const e in i)if(i[e]===t)return e;return t}function Wt(i){return i[0].toUpperCase()+i.substr(1)}function Ft(i){return i[0].toLowerCase()+i.substr(1)}function J(i){return Ft(i.split("-").map(t=>Wt(t)).join(""))}function A(i){return i instanceof Date?i.getTime():i}function tt(i,t){return A(i)===A(t)?!0:Array.isArray(i)&&Array.isArray(t)?i.length===0&&t.length===0:!1}function jt(i,t){Array.prototype.slice.call(i.childNodes).forEach(t)}function zt(i,t){const e=Object.keys(i);if(e.length!==Object.keys(t).length)return!1;for(const n of e)if(!t.hasOwnProperty(n))return!1;return!0}function Ut(i,t){let e=i;return t.split(".").forEach(n=>{var a;const s=et(n);e&&(e=s.isCollection?(a=e[s.name])==null?void 0:a[s.index]:e[s.name])}),e}function et(i){const t=i.split("[");return t.length===1?{isCollection:!1,name:i,fullName:i}:{isCollection:!0,name:t[0],fullName:i,index:Number(t[1].slice(0,-1))}}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function Ht(i,t,e){!i||i.length===0||N(i,t,e)}function y(i){const{patchFlag:t}=i;return t===$.KEYED_FRAGMENT||t===$.UNKEYED_FRAGMENT||t===$.STABLE_FRAGMENT||t===$.BAIL}function N(i,t,e){i.forEach(n=>{if(y(n)&&Array.isArray(n.children)&&N(n.children,t,e),y(n)||t.push(n),!n)return;const s=Kt(n);if(!(s!=null&&s.$_optionName))return;const a=qt(n),o={...s.$_predefinedProps,...it(n.props||{})},r=e.createNested(s.$_optionName,o,s.$_isCollectionItem,s.$_expectedChildren);n.$_config=r,n.$_innerChanges={},a&&N(a,t,r)})}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const _="modelValue";function T(i){if(!oe(i)||!i.$_config)return[];const t=i.$.subTree&&i.$.subTree.children;return Array.isArray(t)?t.filter(e=>{if(!y(e))return e}):[]}function Kt(i){return rt(i)}function it(i){const t={};for(const e in i)i.hasOwnProperty(e)&&(t[J(e)]=i[e]);return t}function qt(i){var t;return(t=i.children)!=null&&t.default?ot(i.children.default()):[]}function nt(i){if(!(!i.children||i.children==="object"||!i.children.default))return ne(i.children.default())?i.children.default:void 0}function Xt(i){return nt(i)}function st(i){return i.$slots}function Yt(i){const t=st(i);return t.default?t.default():[]}function Qt(i,t,e){const n=vt(i);return n.provide("eventBus",t.eventBus),ie(n,t),n.mount(e)}function W(i){const t=i.$.vnode.props||{};return it(t)}function at(i){return i.$?i.$.vnode:i}function Zt(i){return i.$.vnode.type}function Jt(i){return i[_]}function te(i){const t=`update:${_}`;i.model.prop=_,i.model.event=t,i.props.modelValue={},i.emits={...i.emits,[`${t}`]:null}}function ee(i,t){for(const e in t)!i.hasOwnProperty(e)&&t.hasOwnProperty(e)&&(i[e]=t[e])}function ie(i,t){i._context.components=Object.assign(t.$.appContext.components,i._context.components),Object.setPrototypeOf(i._context.provides,Object.getPrototypeOf(t.$.provides)),Object.assign(i._context.provides,t.$.appContext.provides),i._context.config=t.$.appContext.config,i._context.directives=t.$.appContext.directives,i._context.mixins=t.$.appContext.mixins,ee(i._context.app,t.$.appContext.app)}function ot(i){return i.filter(t=>{if(y(t))return ot(t.children||[]);const e=t.type;if(e&&typeof e=="object"&&e.$_optionName)return delete t.$_config,delete t.$_innerChanges,t})}function ne(i){let t=!1;return i.forEach(e=>{!ae(e)&&!y(e)&&!se(e)&&(t=!0)}),t}function se(i){return i.type===Ct||i.type.toString()==="Symbol()"&&!i.children}function ae(i){return i.type&&typeof i.type=="object"&&i.type.$_optionName}function rt(i){return i.type}function oe(i){return i.$.vnode&&i.$.vnode.children&&i.$.vnode.children.default}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */let re={deepWatch:!1};function le(i){return re[i]}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */class w{constructor(t,e,n,s,a,o,r){this._updateFunc=t,this._name=e,this._initialValues=n||{},this._nestedConfigurations=[],this._isCollectionItem=!!a,this._collectionItemIndex=o,this._expectedChildren=s||{},this._ownerConfig=r,this._componentChanges=[],this.updateValue=this.updateValue.bind(this)}get name(){return this._name}get fullName(){return this._name&&this._isCollectionItem?`${this._name}[${this._collectionItemIndex}]`:this._name}get componentsCountChanged(){return this._componentChanges}cleanComponentsCountChanged(){this._componentChanges=[]}get fullPath(){var t;return(t=this._ownerConfig)!=null&&t.fullPath?`${this._ownerConfig.fullPath}.${this.fullName}`:this.fullName}get ownerConfig(){return this._ownerConfig}get options(){return this._options}get initialValues(){return this._initialValues}get expectedChildren(){return this._expectedChildren}get nested(){return this._nestedConfigurations}get prevNestedOptions(){return this._prevNestedConfigOptions}get collectionItemIndex(){return this._collectionItemIndex}get isCollectionItem(){return this._isCollectionItem}get updateFunc(){return this._updateFunc}init(t){this._options=t||[]}set emitOptionChanged(t){this._emitOptionChanged=t}setPrevNestedOptions(t){this._prevNestedConfigOptions=t}onOptionChanged(t){tt(t.value,t.previousValue)||this._onOptionChanged(t.fullName.split("."),t)}cleanNested(){this._nestedConfigurations=[]}createNested(t,e,n,s){const a=this._expectedChildren[t];let o=t,r=n;a&&(r=a.isCollectionItem,a.optionName&&(o=a.optionName));let l=-1;r&&o&&(l=this._nestedConfigurations.filter(h=>h._name&&h._name===o).length);const d=new w(this._updateFunc,o,e,s,r,l,this);return this._nestedConfigurations.push(d),d}updateValue(t,e){const n=[this.fullPath,t].filter(s=>s).join(".");this._updateFunc(n,e)}getNestedOptionValues(){const t={};return this._nestedConfigurations.forEach(e=>{if(!e._name)return;const n={...e.initialValues,...e.getNestedOptionValues()};if(n)if(!e._isCollectionItem)t[e._name]=n;else{let s=t[e._name];(!s||!Array.isArray(s))&&(s=[],t[e._name]=s),s.push(n)}}),t}getOptionsToWatch(){const t={};return this._nestedConfigurations.forEach(e=>e._name&&(t[e._name]=!0)),this._options.filter(e=>!t[e])}_onOptionChanged(t,e){if(t.length===0)return;const n=et(t[0]);if(n.isCollection||t.length>1){const s=this._getNestedConfig(n.fullName);if(s){s._onOptionChanged(t.slice(1),e);return}this._tryEmitOptionChanged(n.name,e.component.option(this.fullPath?`${this.fullPath}.${n.name}`:n.name))}else this._tryEmitOptionChanged(n.name,e.value)}_getNestedConfig(t){for(const e of this._nestedConfigurations)if(e.fullName===t)return e}_tryEmitOptionChanged(t,e){this._emitOptionChanged&&this._emitOptionChanged(t,e)}}function lt(i,t,e){const n=i&&i.getOptionsToWatch();n&&n.forEach(s=>{t.$watch(s,a=>{const o=K(a);(!e.hasOwnProperty(s)||e[s]!==o)&&i.updateValue(s,a),delete e[s]},{deep:le("deepWatch")})})}function de(i,t){const{props:e}=i.$options;return e==null?void 0:e.hasOwnProperty(t)}function ue(i,t,e){var n;return i.model&&t.hasOwnProperty(_)&&((n=e==null?void 0:e.props)==null?void 0:n.hasOwnProperty(_))}function dt(i,t,e){i.emitOptionChanged=(n,s)=>{var d;const a=t.$props,o=(d=t==null?void 0:t.$)==null?void 0:d.vnode,r=n==="value"&&ue(t.$options,a,o)?_:n,l=`update:${r}`;de(t,n)&&!tt(s,a[r])&&t.$emit&&(e[r]=K(s),t.$emit(l,s))}}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function x(i){const t=at(i);if(t)return t.$_config||i.$_config}function ce(i){const t=at(i);if(t)return t.$_innerChanges||i.$_innerChanges}function ut(i,t,e,n){i&&(i.init(Object.keys(t)),e&&dt(i,e,n))}function F({name:i,isCollectionItem:t,ownerConfig:e},n){const s=e==null?void 0:e.fullPath;return{optionPath:i&&s?`${s}.${i}`:i||"",isCollection:t,removed:n}}function he(){return S({beforeMount(){const i=this,t=x(i),e=ce(i);ut(t,Zt(i).props,i,e),lt(t,this,e)},mounted(){this.$parent.$_instance&&this.$parent.$_config.componentsCountChanged.push(F(x(this)))},beforeUnmount(){const i=x(this);i&&this.$parent.$_config.componentsCountChanged.push(F(i,!0))},render(){return null}})}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const pe="dx-template-wrapper",k="dxremove";/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const ct="template";function fe(i){var e;const t=i;if(t&&(e=t.$_config)!=null&&e.name)return t}function ge(i){return ct in i.type.props&&Xt(i)}function _e(i){const t={},e=st(i);for(const s in e){if(s==="default"&&i.$slots.default)continue;const a=e[s];a&&(t[s]=a)}const n=T(i);for(const s of n){const a=fe(s);if(!a)continue;const o=nt(s);if(!o||!ge(s))continue;const r=`${a.$_config.fullPath}.${ct}`;t[r]=o}return t}function me(i){const t=[];return i.forEach(e=>{const n=rt(e);n!=null&&n.$_optionName||t.push(e)}),t}function ve(i,t,e,n,s){return Qt({name:n,inject:["eventBus"],created(){this.eventBus.add(this.$_updatedHandler)},mounted(){e.onRendered()},unmounted(){this.eventBus.remove(this.$_updatedHandler)},methods:{$_updatedHandler(){this.$forceUpdate()}},render:()=>{const a=me(i()(e));return a?a.length>1?a:a[0]:q("div")}},t,s)}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */class Ce{constructor(t){this._slots={},this._templates={},this._isDirty=!1,this._component=t,this.discover()}discover(){this._slots={..._e(this._component)},zt(this._templates,this._slots)||this._prepareTemplates()}get templates(){return this._templates}get isDirty(){return this._isDirty}resetDirtyFlag(){this._isDirty=!1}_prepareTemplates(){this._templates={};for(const t of Object.keys(this._slots))this._templates[t]=this.createDxTemplate(t);this._isDirty=!0}createDxTemplate(t){return{render:e=>{const n=((d,h=0)=>()=>{h===1&&d&&d(),h++})(e.onRendered),s={data:e.model,index:e.index,onRendered:n},a=document.createElement("div"),o=e.container.get?e.container.get(0):e.container;o.appendChild(a);const r=ve(()=>this._slots[t],this._component,s,t,a),l=r.$el;for(o.removeChild(a);a.firstChild;)o.appendChild(a.firstChild);if(Rt.setClass(l,pe,!0),l.nodeType===Node.TEXT_NODE){const d=document.createElement(o.nodeName==="TABLE"?"tbody":"span");d.style.display="none",o.insertBefore(d,o.firstChild),B(d,k,()=>{r.$.appContext.app.unmount.bind(r)(),d.remove()})}else B(l,k,r.$.appContext.app.unmount.bind(r));return n(),l}}}}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Ve=["id","class","style"],ht="dx-";Vt({buyNowLink:"https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeVue.aspx",licensingDocLink:"https://go.devexpress.com/Licensing_Documentation_DevExtremeVue.aspx"});function j(i){return i.trim().split(/\s+/)}function ye(i,t){const e={};return Ve.forEach(n=>{const s=i[n];if(s!=null)if(n==="class"){const a=s.split(" ").filter(o=>!o.startsWith(ht)).join(" ");e[n]=[a,t].filter(o=>o!=="").join(" ")}else e[n]=s}),e}function Ee(){return S({inheritAttrs:!1,data(){return{eventBus:X(),prevClassAttr:""}},provide(){return{eventBus:this.eventBus}},render(){const i=this,t=[],e=$e(this.$el)||[];return i.$_config.cleanNested&&i.$_config.cleanNested(),Ht(Yt(this),t,i.$_config),this.$_processChildren(t),q("div",{...ye(this.$attrs,e.join(" "))},t)},beforeUpdate(){const i=this;i.$_config.setPrevNestedOptions(i.$_config.getNestedOptionValues()),this.$_syncElementClassesWithClassAttr()},updated(){const i=this,t=pt(this.$el);if(T(i).forEach(e=>{var n;ut(e.$_config,e.type.props||{},(n=e==null?void 0:e.component)==null?void 0:n.proxy,e.$_innerChanges)}),i.$_templatesManager.discover(),i.$_instance.beginUpdate(),this.$_applyConfigurationChanges(),i.$_templatesManager.isDirty){i.$_instance.option("integrationOptions.templates",i.$_templatesManager.templates);const{props:e}=i.$.vnode;for(const n of Object.keys(i.$_templatesManager.templates))i.$_instance.option(L(e,n),n);i.$_templatesManager.resetDirtyFlag()}for(const e of Object.keys(i.$_pendingOptions))i.$_instance.option(e,i.$_pendingOptions[e]);i.$_pendingOptions={},i.$_instance.endUpdate(),ft(this.$el,t),this.eventBus.fire()},beforeUnmount(){const t=this.$_instance;t&&(Lt(this.$el,k),t.dispose())},created(){const i=this,t=W(this);i.$_config=new w((e,n)=>{Array.isArray(n)?i.$_instance.option(e,n):i.$_pendingOptions[e===_?"value":e]=n},null,t&&{...t},i.$_expectedChildren),i.$_innerChanges={},i.$_config.init(this.$props&&Object.keys(this.$props))},methods:{$_syncElementClassesWithClassAttr(){var t,e;const i=typeof((t=this.$attrs)==null?void 0:t.class)=="string"?(e=this.$attrs)==null?void 0:e.class:"";this.prevClassAttr!==i&&(this.prevClassAttr.length&&this.$el.classList.remove(...j(this.prevClassAttr)),i.length&&this.$el.classList.add(...j(i)),this.prevClassAttr=i)},$_applyConfigurationChanges(){const i=this;i.$_config.componentsCountChanged.forEach(({optionPath:t,isCollection:e,removed:n})=>{const s=i.$_config.getNestedOptionValues();!e&&n?i.$_instance.resetOption(t):i.$_instance.option(t,Ut(s,t))}),i.$_config.cleanComponentsCountChanged()},$_createWidget(i){const t=this;t.$_pendingOptions={},t.$_templatesManager=new Ce(this);const e=t.$_config;e.initialValues.hasOwnProperty(_)&&(e.initialValues.value=Jt(e.initialValues));const n={templatesRenderAsynchronously:t.$_hasAsyncTemplate,...W(t),...e.initialValues,...e.getNestedOptionValues(),...this.$_getIntegrationOptions()},s=new t.$_WidgetClass(i,n);t.$_instance=s,s.on("optionChanged",a=>e.onOptionChanged(a)),dt(e,t,t.$_innerChanges),lt(e,t,t.$_innerChanges),this.$_createEmitters(s)},$_getIntegrationOptions(){const i=this,t={integrationOptions:{watchMethod:this.$_getWatchMethod()},...this.$_getExtraIntegrationOptions()};if(i.$_templatesManager.isDirty){const{templates:e}=i.$_templatesManager;t.integrationOptions.templates=e;const{props:n}=i.$.vnode;for(const s of Object.keys(e))t[L(n,s)]=s;i.$_templatesManager.resetDirtyFlag()}return t},$_getWatchMethod(){return(i,t,e)=>(e=e||{},e.skipImmediate||t(i()),this.$watch(()=>i(),(n,s)=>{(A(s)!==A(n)||e.deep)&&t(n)},{deep:e.deep}))},$_getExtraIntegrationOptions(){return{}},$_processChildren(i){},$_createEmitters(i){this.$attrs&&Object.keys(this.$attrs).forEach(t=>{const e=J(t);i.on(e,n=>{this.$emit(t,n)})})}}})}function pt(i){const t=[];return jt(i,e=>{const n=e.parentNode,s=e.hasAttribute&&e.hasAttribute("isExtension");(e.nodeName==="#comment"||s)&&n&&(t.push(e),n.removeChild(e))}),t}function $e(i){return i&&Array.from(i.classList).filter(t=>t.startsWith(ht))}function ft(i,t){t.forEach(e=>{i.appendChild(e)})}function be(){return S({extends:Ee(),methods:{$_getExtraIntegrationOptions(){return{onInitializing(){this.beginUpdate()}}},$_processChildren(i){i.forEach(t=>{!t||typeof t!="object"||(t.$_hasOwner=!0)})}},mounted(){var e;const i=pt(this.$el),t=this;this.$_createWidget(this.$el),this.$_syncElementClassesWithClassAttr(),t.$_instance.endUpdate(),ft(this.$el,i),(e=this.$slots)!=null&&e.default&&T(t).forEach(n=>{const s=n;s&&s.$_isExtension&&s.$_attachTo(this.$el)})}})}/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */function Ue(i){i.extends=be(),i.model&&te(i)}function He(i){i.extends=he()}const Oe=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i,u={valid:"valid",invalid:"invalid",pending:"pending"};class m{constructor(){this.NAME="base"}defaultMessage(t){return D.getFormatter(`validation-${this.NAME}`)(t)}defaultFormattedMessage(t){return D.getFormatter(`validation-${this.NAME}-formatted`)(t)}_isValueEmpty(t){return!E.required.validate(t,{})}validate(t,e){const n=Array.isArray(t)?t:[t];let s=!0;return n.length?n.every((a=>(s=this._validate(a,e),s))):s=this._validate(null,e),s}}class Me extends m{constructor(){super(),this.NAME="required"}_validate(t,e){return!c(t)||t===!1?!1:(t=String(t),(e.trim||!c(e.trim))&&(t=t.trim()),t!=="")}}class Ae extends m{constructor(){super(),this.NAME="numeric"}_validate(t,e){return e.ignoreEmptyValue!==!1&&this._isValueEmpty(t)?!0:e.useCultureSettings&&V(t)?!isNaN(bt.parse(t)):Ot(t)}}class xe extends m{constructor(){super(),this.NAME="range"}_validate(t,e){if(e.ignoreEmptyValue!==!1&&this._isValueEmpty(t))return!0;const n=E.numeric.validate(t,e),s=c(t)&&t!=="",a=n?parseFloat(t):s&&t.valueOf(),{min:o}=e,{max:r}=e;if(!(n||$t(t))&&!s)return!1;if(c(o))return c(r)?a>=o&&a<=r:a>=o;if(c(r))return a<=r;throw C.Error("E0101")}}class Re extends m{constructor(){super(),this.NAME="stringLength"}_validate(t,e){return t=String(t??""),(e.trim||!c(e.trim))&&(t=t.trim()),e.ignoreEmptyValue&&this._isValueEmpty(t)?!0:E.range.validate(t.length,p({},e))}}class gt extends m{constructor(){super(),this.NAME="custom"}validate(t,e){if(e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;const{validator:n}=e,s=n&&M(n.option)&&n.option("dataGetter"),a=M(s)&&s(),o={value:t,validator:n,rule:e};return a&&p(o,a),e.validationCallback(o)}}class Ie extends gt{constructor(){super(),this.NAME="async"}validate(t,e){if(c(e.reevaluate)||p(e,{reevaluate:!0}),e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;const{validator:n}=e,s=n&&M(n.option)&&n.option("dataGetter"),a=M(s)&&s(),o={value:t,validator:n,rule:e};a&&p(o,a);const r=e.validationCallback(o);if(!Q(r))throw C.Error("E0103");return this._getWrappedPromise(Et(r).promise())}_getWrappedPromise(t){const e=Z();return t.then((n=>{e.resolve(n)}),(n=>{const s={isValid:!1};c(n)&&(V(n)?s.message=n:Y(n)&&c(n.message)&&V(n.message)&&(s.message=n.message)),e.resolve(s)})),e.promise()}}class Ne extends m{constructor(){super(),this.NAME="compare"}_validate(t,e){if(!e.comparisonTarget)throw C.Error("E0102");if(e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;p(e,{reevaluate:!0});const n=e.comparisonTarget();switch(e.comparisonType||"=="){case"==":return t==n;case"!=":return t!=n;case"===":return t===n;case"!==":return t!==n;case">":return t>n;case">=":return t>=n;case"<":return t<n;case"<=":return t<=n}}}class ke extends m{constructor(){super(),this.NAME="pattern"}_validate(t,e){if(e.ignoreEmptyValue!==!1&&this._isValueEmpty(t))return!0;let{pattern:n}=e;return V(n)&&(n=new RegExp(n)),n.test(t)}}class Se extends m{constructor(){super(),this.NAME="email"}_validate(t,e){return e.ignoreEmptyValue!==!1&&this._isValueEmpty(t)?!0:E.pattern.validate(t,p({},e,{pattern:Oe}))}}const E={required:new Me,numeric:new Ae,range:new xe,stringLength:new Re,custom:new gt,async:new Ie,compare:new Ne,pattern:new ke,email:new Se};class Te extends Mt.inherit({}){ctor(t,e){this.group=t,this.validators=[],this._isRemovable=e,this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new It(this)}validate(){const t={isValid:!0,brokenRules:[],validators:[],status:u.valid,complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),v(this.validators,((e,n)=>{const s=n.validate();t.isValid=t.isValid&&s.isValid,s.brokenRules&&(t.brokenRules=t.brokenRules.concat(s.brokenRules)),t.validators.push(n),s.status===u.pending&&this._addPendingValidator(n),this._subscribeToChangeEvents(n)})),this._pendingValidators.length?t.status=u.pending:(t.status=t.isValid?u.valid:u.invalid,this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(t)),this._updateValidationInfo(t),p({},this._validationInfo.result)}_subscribeToChangeEvents(t){t.on("validating",this._onValidatorStatusChanged),t.on("validated",this._onValidatorStatusChanged)}_unsubscribeFromChangeEvents(t){t.off("validating",this._onValidatorStatusChanged),t.off("validated",this._onValidatorStatusChanged)}_unsubscribeFromAllChangeEvents(){v(this.validators,((t,e)=>{this._unsubscribeFromChangeEvents(e)}))}_updateValidationInfo(t){this._validationInfo.result=t,t.status===u.pending&&(this._validationInfo.deferred||(this._validationInfo.deferred=Z(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()))}_addPendingValidator(t){O(this._pendingValidators,(n=>n===t))[0]||this._pendingValidators.push(t)}_removePendingValidator(t){const e=this._pendingValidators.indexOf(t);e>=0&&this._pendingValidators.splice(e,1)}_orderBrokenRules(t){let e=[];return v(this.validators,((n,s)=>{const a=O(t,(o=>o.validator===s));a.length&&(e=e.concat(a))})),e}_updateBrokenRules(t){if(!this._validationInfo.result)return;let{brokenRules:e}=this._validationInfo.result;const n=O(e,(s=>s.validator!==t.validator));t.brokenRules&&(e=n.concat(t.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(e)}_onValidatorStatusChanged(t){if(t.status===u.pending){this._addPendingValidator(t.validator);return}this._resolveIfComplete(t)}_resolveIfComplete(t){if(this._removePendingValidator(t.validator),this._updateBrokenRules(t),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=this._validationInfo.result.brokenRules.length===0?u.valid:u.invalid,this._validationInfo.result.isValid=this._validationInfo.result.status===u.valid;const e=p({},this._validationInfo.result,{complete:null}),{deferred:n}=this._validationInfo;this._validationInfo.deferred=null,this._raiseValidatedEvent(e),n&&setTimeout((()=>{n.resolve(e)}))}}_raiseValidatedEvent(t){this._eventsStrategy.fireEvent("validated",[t])}_resetValidationInfo(){this._validationInfo={result:null,deferred:null}}_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)}removeRegisteredValidator(t){const e=this.validators.indexOf(t);e>-1&&(this.validators.splice(e,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:t}))}registerValidator(t){this.validators.includes(t)||(this.validators.push(t),this._synchronizeValidationInfo())}reset(){v(this.validators,((t,e)=>{e.reset()})),this._pendingValidators=[],this._resetValidationInfo()}on(t,e){return this._eventsStrategy.on(t,e),this}off(t,e){return this._eventsStrategy.off(t,e),this}}const f={groups:[],getGroupConfig(i){const t=O(this.groups,(e=>e.group===i));if(t.length)return t[0]},findGroup(i,t){var e;const s=((e=i.data())===null||e===void 0||(e=e.dxComponents)===null||e===void 0?void 0:e.includes("dxValidationGroup"))&&i.dxValidationGroup("instance");if(s)return s;const a=i.parents(".dx-validationgroup").first();return a.length?a.dxValidationGroup("instance"):t},initGroups(){this.groups=[],this.addGroup(void 0,!1)},addGroup(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=this.getGroupConfig(i);return e||(e=new Te(i,t),this.groups.push(e)),e},removeGroup(i){const t=this.getGroupConfig(i),e=this.groups.indexOf(t);return e>-1&&this.groups.splice(e,1),t},_setDefaultMessage(i){const{rule:t,validator:e,name:n}=i;c(t.message)||(e.defaultFormattedMessage&&c(n)?t.message=e.defaultFormattedMessage(n):t.message=e.defaultMessage())},_addBrokenRule(i){const{result:t,rule:e}=i;t.brokenRule||(t.brokenRule=e),t.brokenRules||(t.brokenRules=[]),t.brokenRules.push(e)},validate(i,t,e){var n;let s={name:e,value:i,brokenRule:null,brokenRules:null,isValid:!0,validationRules:t,pendingRules:null,status:u.valid,complete:null};const a=t==null||(n=t[0])===null||n===void 0?void 0:n.validator,o=[];return v(t||[],((r,l)=>{const d=E[l.type];let h;if(d){if(c(l.isValid)&&l.value===i&&!l.reevaluate)return l.isValid?!0:(s.isValid=!1,this._addBrokenRule({result:s,rule:l}),!1);if(l.value=i,l.type==="async")return o.push({rule:l,ruleValidator:d}),!0;if(h=d.validate(i,l),l.isValid=h,h||(s.isValid=!1,this._setDefaultMessage({rule:l,validator:d,name:e}),this._addBrokenRule({result:s,rule:l})),!l.isValid)return!1}else throw C.Error("E0100")})),s.isValid&&!s.brokenRules&&o.length&&(s=this._validateAsyncRules({value:i,items:o,result:s,name:e})),this._synchronizeGroupValidationInfo(a,s),s.status=s.pendingRules?u.pending:s.isValid?u.valid:u.invalid,s},_synchronizeGroupValidationInfo(i,t){if(!i)return;const e=f.getGroupConfig(i._validationGroup);e._updateBrokenRules.call(e,{validator:i,brokenRules:t.brokenRules??[]})},_validateAsyncRules(i){let{result:t,value:e,items:n,name:s}=i;const a=[];return v(n,((o,r)=>{const l=r.ruleValidator.validate(e,r.rule);if(!Q(l))this._updateRuleConfig({rule:r.rule,ruleResult:this._getPatchedRuleResult(l),validator:r.ruleValidator,name:s});else{t.pendingRules||(t.pendingRules=[]),t.pendingRules.push(r.rule);const d=l.then((h=>{const P=this._getPatchedRuleResult(h);return this._updateRuleConfig({rule:r.rule,ruleResult:P,validator:r.ruleValidator,name:s}),P}));a.push(d)}})),a.length&&(t.complete=Promise.all(a).then((o=>this._getAsyncRulesResult({result:t,values:o})))),t},_updateRuleConfig(i){let{rule:t,ruleResult:e,validator:n,name:s}=i;t.isValid=e.isValid,e.isValid||(c(e.message)&&V(e.message)&&e.message.length?t.message=e.message:this._setDefaultMessage({rule:t,validator:n,name:s}))},_getPatchedRuleResult(i){let t;return Y(i)?(t=p({},i),c(t.isValid)||(t.isValid=!0)):t={isValid:yt(i)?i:!0},t},_getAsyncRulesResult(i){let{values:t,result:e}=i;return v(t,((n,s)=>{if(s.isValid===!1){e.isValid=s.isValid;const a=e.pendingRules[n];this._addBrokenRule({result:e,rule:a})}})),e.pendingRules=null,e.complete=null,e.status=e.isValid?u.valid:u.invalid,e},registerValidatorInGroup(i,t){const e=f.addGroup(i);e.registerValidator.call(e,t)},removeRegisteredValidator(i,t){const e=f.getGroupConfig(i);if(e){e.removeRegisteredValidator.call(e,t);const n=e.validators,s=e._isRemovable;n.length===0&&s&&this.removeGroup(i)}},initValidationOptions(i){const t={};return i&&["isValid","validationStatus","validationError","validationErrors"].forEach((n=>{n in i&&p(t,this.synchronizeValidationOptions({name:n,value:i[n]},i))})),t},synchronizeValidationOptions(i,t){let{name:e,value:n}=i;switch(e){case"validationStatus":{const s=n===u.valid||n===u.pending;return t.isValid!==s?{isValid:s}:{}}case"isValid":{const{validationStatus:s}=t;let a=s;return n&&s===u.invalid?a=u.valid:!n&&s!==u.invalid&&(a=u.invalid),a!==s?{validationStatus:a}:{}}case"validationErrors":{const s=n!=null&&n.length?n[0]:null;return t.validationError!==s?{validationError:s}:{}}case"validationError":{const{validationErrors:s}=t;if(!n&&s)return{validationErrors:null};if(n&&!s)return{validationErrors:[n]};if(n&&s&&n!==s[0])return s[0]=n,{validationErrors:s.slice()}}}return{}},validateGroup(i){const t=f.getGroupConfig(i);if(!t)throw C.Error("E0110");return t.validate()},resetGroup(i){const t=f.getGroupConfig(i);if(!t)throw C.Error("E0110");return t.reset()}};f.initGroups();const b="dx-invalid-message",we="dx-invalid-message-auto",Pe="dx-invalid-message-always",De="dx-invalid-message-content";let _t=class extends Nt{_getDefaultOptions(){return R({},super._getDefaultOptions(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),mode:"auto",preventScrollEvents:!1,positionSide:"top",offset:{h:0,v:0}})}_init(){super._init(),this.updateMaxWidth(),this._updatePosition()}_initMarkup(){super._initMarkup(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()}_updatePositionByTarget(){const{target:t}=this.option();this.option("position.of",t)}_ensureMessageNotEmpty(){this._textMarkup=this._getTextMarkup();const t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)}_toggleVisibilityClasses(t){t?(this.$element().addClass(b),this.$wrapper().addClass(b)):(this.$element().removeClass(b),this.$wrapper().removeClass(b))}_updateContentId(){const{container:t,contentId:e}=this.option(),n=e??I(t).attr("aria-describedby");this.$content().addClass(De).attr("id",n)}_renderInnerHtml(t){const e=t&&I(t);e==null||e.html(this._textMarkup)}_getTextMarkup(){const t=this.option("validationErrors")??[];let e="";return t.forEach((n=>{e+=(e?"<br />":"")+At((n==null?void 0:n.message)??"")})),e}_toggleModeClass(){const{mode:t}=this.option();this.$wrapper().toggleClass(we,t==="auto").toggleClass(Pe,t==="always")}updateMaxWidth(){const t=this.option("target"),e=kt(t);let n="100%";e&&(n=Math.max(e,100)),this.option({maxWidth:n})}_getPositionsArray(t,e){switch(t){case"top":return[`${e} bottom`,`${e} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${e} top`,`${e} bottom`]}}_updatePosition(){const{positionSide:t,rtlEnabled:e,offset:n,boundary:s}=this.option(),a=St(e),o=this._getPositionsArray(t,a),r=R({},n);this.$element().addClass(`dx-invalid-message-${t}`),e&&t!=="left"&&t!=="right"&&(r.h=-r.h),t==="top"&&(r.v=-r.v),t==="left"&&(r.h=-r.h),this.option("position",{offset:r,boundary:s,my:o[0],at:o[1],collision:"none flip"})}_optionChanged(t){const{name:e,value:n,previousValue:s}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),super._optionChanged(t);break;case"boundary":this.option("position.boundary",n);break;case"mode":this._toggleModeClass();break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${s}`),this._updatePosition();break;case"container":this._updateContentId(),super._optionChanged(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:super._optionChanged(t)}}};Tt("dxValidationMessage",_t);const z="dx-invalid-message-auto",Ge="dx-show-invalid-badge",U="dx-validation-target",Be=["outlined","filled","underlined"],H={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"};class mt extends wt{static isEditor(t){return t instanceof mt}ctor(t,e){this.showValidationMessageTimeout=void 0,this.validationRequest=X(),super.ctor(t,e)}_createElement(t){super._createElement(t);const e=this.$element();e&&G(e[0],U,this)}_initOptions(t){super._initOptions(t),this.option(f.initValidationOptions(t))}_init(){this._initialValue=this.option("value"),super._init();const{validationTooltipOptions:t}=this.option();this._options.cache("validationTooltipOptions",t),this.$element().addClass(Ge)}_getDefaultOptions(){return R({},super._getDefaultOptions(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})}_shouldAttachKeyboardEvents(){const{readOnly:t}=this.option();return!t}_attachKeyboardEvents(){this._shouldAttachKeyboardEvents()&&super._attachKeyboardEvents()}_setOptionsByReference(){super._setOptionsByReference(),p(this._optionsByReference,{validationError:!0})}_createValueChangeAction(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_suppressValueChangeAction(){this._valueChangeActionSuppressed=!0}_resumeValueChangeAction(){this._valueChangeActionSuppressed=!1}_initMarkup(){this._toggleReadOnlyState();const{name:t,_onMarkupRendered:e}=this.option();this._setSubmitElementName(t),super._initMarkup(),this._renderValidationState(),e==null||e()}_raiseValueChangeAction(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))}_valueChangeArgs(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}}_saveValueChangeEvent(t){this._valueChangeEventInstance=t}_focusInHandler(t){const{validationMessageMode:e}=this.option(),n=e==="auto";if(this._canValueBeChangedByClick()&&n){var s;const a=(s=this._validationMessage)===null||s===void 0?void 0:s.$wrapper();a==null||a.removeClass(z),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>a==null?void 0:a.addClass(z)),150)}super._focusInHandler(t)}_canValueBeChangedByClick(){return!1}_getStylingModePrefix(){return"dx-editor-"}_renderStylingMode(){const{stylingMode:t}=this.option(),e=this._getStylingModePrefix(),n=Be.map((a=>e+a));n.forEach((a=>this.$element().removeClass(a)));let s=e+String(t);if(!n.includes(s)){const a="stylingMode",o=this._getDefaultOptions()[a],r=this._convertRulesToOptions(this._defaultOptionsRules())[a];s=e+(r??o)}this.$element().addClass(s)}_getValidationErrors(){let{validationErrors:t}=this.option();const{validationError:e}=this.option();return!t&&e&&(t=[e]),t}_disposeValidationMessage(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)}_toggleValidationClasses(t){this.$element().toggleClass("dx-invalid",t),this.setAria("invalid",t||void 0)}_renderValidationState(){const{validationStatus:t,_showValidationMessage:e}=this.option(),n=this.option("isValid")&&t!=="invalid",s=this._getValidationErrors(),a=this.$element();if(this._toggleValidationClasses(!n),!(!Pt()||!e)&&(this._disposeValidationMessage(),!n&&s)){const{validationMessageMode:o,validationMessageOffset:r,validationBoundary:l,rtlEnabled:d}=this.option();this._$validationMessage=I("<div>").appendTo(a);const h=`dx-${new xt}`;this.setAria("describedby",h),this._validationMessage=new _t(this._$validationMessage,p({validationErrors:s,rtlEnabled:d,target:this._getValidationMessageTarget(),visualContainer:a,mode:o,positionSide:this._getValidationMessagePosition(),offset:r,boundary:l,contentId:h},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}}_getValidationMessagePosition(){const{validationMessagePosition:t}=this.option();return t}_getValidationMessageTarget(){return this.$element()}_toggleReadOnlyState(){const{readOnly:t}=this.option();this._toggleBackspaceHandler(t),this.$element().toggleClass("dx-state-readonly",!!t),this._setAriaReadonly(t)}_setAriaReadonly(t){this.setAria("readonly",t||void 0)}_toggleBackspaceHandler(t){const e=this._keyboardEventBindingTarget(),n=Dt("keydown","editorReadOnly");g.off(e,n),t&&g.on(e,n,(s=>{Gt(s)==="backspace"&&s.preventDefault()}))}_dispose(){const t=this.$element()[0];G(t,U,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),super._dispose()}_setSubmitElementName(t){const e=this._getSubmitElement();e&&(t&&t.length>0?e.attr("name",t):e.removeAttr("name"))}_getSubmitElement(){return null}_setValidationMessageOption(t){var e;let{name:n,value:s}=t;const a=H[String(n)]?H[String(n)]:n;(e=this._validationMessage)===null||e===void 0||e.option(a,s)}_hasActiveElement(){return!1}_optionChanged(t){var e;const{name:n,value:s,previousValue:a}=t;switch(n){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":s!=a&&(this.option("isDirty",this._initialValue!==s),this.validationRequest.fire({value:s,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(s,a),this._saveValueChangeEvent(void 0));break;case"width":super._optionChanged(t),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(s);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(f.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),super._optionChanged(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;case"_showValidationMessage":case"isDirty":break;default:super._optionChanged(t)}}_resetToInitialValue(){this.option("value",this._initialValue)}blur(){this._hasActiveElement()&&Bt.resetActiveElement()}clear(){const t=this._getDefaultOptions();this.option("value",t.value)}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=t),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}}export{mt as E,f as V,He as a,_t as b,Fe as c,B as d,Lt as e,je as o,Ue as p,ze as t};
