import{d as _,q as u,r as d,g as k,f as s,b as i,aF as p,e as a,j as v,v as h,l as b,aM as C,T as V,s as g,o as w}from"./main-rVToGM8O.js";import{V as x,a as D}from"./VCard-BzJbiGF2.js";import{V as T}from"./VCardText-DKrHnciU.js";import"./createSimpleFunctional-DOGz1yyV.js";import"./VAvatar-D9GpE4S7.js";import"./VImg-Dsa0SEbV.js";import"./index-OYEsvMyx.js";const B={class:"mt-6"},F=["src"],U=_({__name:"yemek-listesi",setup(Y){const m=u("userAbilityRules").value||[];let o=!1;m.forEach((e,t)=>{(e.action==="all"&&e.subject==="Planlama"||e.action==="read"&&e.subject==="Planlama")&&(o=!0)});const l=d(null),r=d("/storage/yemeklistesi/yemeklistesi.pdf"),c=u("userData");function f(e){var n;const t=(n=e.target.files)==null?void 0:n[0];t&&(l.value=t)}async function y(){if(!l.value)return;const e=new FormData;e.append("pdf",l.value),e.append("user_id",c.value.id);try{await g.post("/api/upload-yemek-listesi",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Yemek listesi yüklendi!"),r.value="/storage/yemeklistesi/yemeklistesi.pdf?"+new Date().getTime()}catch(t){alert("Yükleme başarısız oldu."),console.error(t)}}return(e,t)=>(w(),k(x,null,{default:s(()=>[i(D,null,{default:s(()=>t[0]||(t[0]=[p("Yemek Listesi")])),_:1,__:[0]}),i(T,null,{default:s(()=>[a("div",null,[v(a("form",{onSubmit:C(y,["prevent"])},[a("input",{type:"file",accept:"application/pdf",onChange:f},null,32),i(V,{type:"submit",color:"primary",class:"mt-2"},{default:s(()=>t[1]||(t[1]=[p("Yükle")])),_:1,__:[1]})],544),[[h,b(o)]])]),a("div",B,[a("iframe",{src:r.value+"#toolbar=0&navpanes=0&scrollbar=0",width:"100%",height:"800px",style:{border:"none"}},null,8,F)])]),_:1})]),_:1}))}});export{U as default};
