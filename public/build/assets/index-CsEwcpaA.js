import{f as Le}from"./formatters-wLeIh16p.js";import{d as ie,r as k,g as I,f as t,b as e,e as s,a as oe,u as l,aA as O,aU as fe,c as E,j as K,L as X,aB as x,m as u,o as f,w as ge,v as q,at as pe,F as R,au as N,ac as ve,k as h,aV as _e,ar as J,as as W,aJ as H,av as ee,aW as Te,aw as De}from"./main-DCTzRXlG.js";import{_ as ye}from"./TiptapEditor.vue_vue_type_style_index_0_lang-vrLq9JTI.js";import{V as Y,c as Ae}from"./VCard-BncKXtyi.js";import{V as G}from"./VSpacer-DXsVkPe3.js";import{V as Q}from"./VTextField-DQvP3y-U.js";import{V as F}from"./VDivider-BDU-JRTi.js";import{V as he}from"./VChip-B0zZsxuY.js";import{$ as be}from"./api-dCJABIPl.js";import{V as $e}from"./VNavigationDrawer-lkyVjq2t.js";import{V as B}from"./VTooltip-DLfj1LOX.js";import{V as te}from"./VMenu-Bb07_KWd.js";import{V as ae,a as le,b as se}from"./VList-XytivpMy.js";import{V as ke}from"./VBadge-Bw8Kwv9l.js";import{V as Ce}from"./VAvatar-CI5fi2vF.js";import{V as de}from"./VImg-57XdJR07.js";import{V as Z}from"./VCardText-DhiBZ5aK.js";import{u as Re,V as Ie,a as Ue}from"./VMain-C68dP1RD.js";import{u as Be}from"./useApi-BHkrb_l2.js";import{c as Ne}from"./createUrl-D8T1TDP7.js";import{V as xe}from"./VCheckbox-CNqjwHpz.js";import"./helpers-BGv4x_9E.js";import"./index-CkcJsErb.js";import"./index-rFLhrple.js";import"./createSimpleFunctional-vPO4U9sU.js";/* empty css              *//* empty css                   */import"./VCounter-CRp2IXCY.js";import"./index-CIXxXFLS.js";import"./VField-Y2uOYs8f.js";import"./focus-BNHhFyVA.js";import"./easing-Bybner-F.js";import"./VInput-CZ0p8pgH.js";import"./form-BY3jqAhR.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-Nh0ii8DB.js";import"./index-CTLKTyaY.js";import"./index-CvOPxmL5.js";import"./delay-CJl1CYkv.js";import"./scopeId-CwLlTXlU.js";import"./ssrBoot-DsHIbpzm.js";import"./VOverlay-CPNSiNfW.js";import"./lazy-xfGsQO4z.js";import"./dialog-transition-Ro2ngC1Q.js";import"./VCheckboxBtn-Bz5F9lRr.js";import"./VSelectionControl-NPRrrcty.js";const Fe={class:"d-flex align-center"},Pe={class:"d-flex align-center gap-x-2"},Oe={class:"px-1 pe-6 py-1"},je={class:"cursor-pointer"},qe={key:0},He={class:"px-1 pe-6 py-1"},Je={key:0},We={class:"px-1 pe-6 py-1"},Ge={class:"px-1 pe-6 py-1"},Ke={class:"d-flex align-center px-6 py-4"},Qe=ie({__name:"ComposeDialog",emits:["close"],setup(L){const C=k(""),p=k(""),V=k(""),$=k(""),z=k(""),S=k(""),T=k(!1),d=k(!1),g=()=>{p.value=V.value=$.value=""};return(b,i)=>{const M=oe("IconBtn"),D=ye;return f(),I(Y,{class:"email-compose-dialog",elevation:"10","max-width":"30vw"},{default:t(()=>[e(Ae,{class:"py-3 px-6"},{default:t(()=>[s("div",Fe,[i[11]||(i[11]=s("h5",{class:"text-h5"}," Compose Mail ",-1)),e(G),s("div",Pe,[e(M,{size:"small",icon:"tabler-minus",onClick:i[0]||(i[0]=m=>b.$emit("close"))}),e(M,{size:"small",icon:"tabler-x",onClick:i[1]||(i[1]=m=>{b.$emit("close"),g(),T.value=!1,d.value=!1})})])])]),_:1}),s("div",Oe,[e(Q,{modelValue:l(p),"onUpdate:modelValue":i[4]||(i[4]=m=>O(p)?p.value=m:null),density:"compact"},{"prepend-inner":t(()=>i[12]||(i[12]=[s("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1)])),append:t(()=>[s("span",je,[s("span",{onClick:i[2]||(i[2]=m=>T.value=!l(T))},"Cc"),i[13]||(i[13]=s("span",null," | ",-1)),s("span",{onClick:i[3]||(i[3]=m=>d.value=!l(d))},"Bcc")])]),_:1},8,["modelValue"])]),e(fe,null,{default:t(()=>[l(T)?(f(),E("div",qe,[e(F),s("div",He,[e(Q,{modelValue:l(z),"onUpdate:modelValue":i[5]||(i[5]=m=>O(z)?z.value=m:null),density:"compact"},{"prepend-inner":t(()=>i[14]||(i[14]=[s("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1)])),_:1},8,["modelValue"])])])):K("",!0)]),_:1}),e(fe,null,{default:t(()=>[l(d)?(f(),E("div",Je,[e(F),s("div",We,[e(Q,{modelValue:l(S),"onUpdate:modelValue":i[6]||(i[6]=m=>O(S)?S.value=m:null),density:"compact"},{"prepend-inner":t(()=>i[15]||(i[15]=[s("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1)])),_:1},8,["modelValue"])])])):K("",!0)]),_:1}),e(F),s("div",Ge,[e(Q,{modelValue:l(V),"onUpdate:modelValue":i[7]||(i[7]=m=>O(V)?V.value=m:null),density:"compact"},{"prepend-inner":t(()=>i[16]||(i[16]=[s("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1)])),_:1},8,["modelValue"])]),e(F),e(D,{modelValue:l(C),"onUpdate:modelValue":i[8]||(i[8]=m=>O(C)?C.value=m:null),placeholder:"Message"},null,8,["modelValue"]),s("div",Ke,[e(X,{color:"primary",class:"me-4","append-icon":"tabler-send",disabled:l(p)==="",onClick:i[9]||(i[9]=m=>{b.$emit("close"),C.value="",g(),T.value=!1,d.value=!1})},{default:t(()=>i[17]||(i[17]=[x(" send ")])),_:1,__:[17]},8,["disabled"]),e(M,{size:"small"},{default:t(()=>[e(u,{icon:"tabler-paperclip"})]),_:1}),e(G),e(M,{size:"small",class:"me-2"},{default:t(()=>[e(u,{icon:"tabler-dots-vertical"})]),_:1}),e(M,{size:"small",onClick:i[10]||(i[10]=m=>{b.$emit("close"),g(),C.value="",T.value=!1,d.value=!1})},{default:t(()=>[e(u,{icon:"tabler-trash"})]),_:1})])]),_:1})}}}),Xe={class:"d-flex flex-column h-100"},Ye={class:"px-6 pb-5 pt-6"},Ze={class:"email-filters py-4"},et=["href","onClick"],tt={class:"text-base"},at={class:"email-labels py-4"},lt=["href","onClick"],st={class:"text-body-1 text-high-emphasis"},it=ie({inheritAttrs:!1,__name:"EmailLeftSidebarContent",props:{emailsMeta:{}},emits:["toggleComposeDialogVisibility"],setup(L){const C=L,p=k(0),V=k(0),$=k(0),z=k(0);ge(()=>C.emailsMeta,d=>{d&&(p.value=d.inbox,V.value=d.draft,$.value=d.spam,z.value=d.star)},{immediate:!0,deep:!0});const S=q(()=>[{title:"Inbox",prependIcon:"tabler-mail",to:{name:"apps-email"},badge:{content:p.value,color:"primary"}},{title:"Sent",prependIcon:"tabler-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"tabler-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:V.value,color:"warning"}},{title:"Starred",prependIcon:"tabler-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:z.value,color:"success"}},{title:"Spam",prependIcon:"tabler-alert-circle",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:$.value,color:"error"}},{title:"Trash",prependIcon:"tabler-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}]),T=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(d,g)=>{const b=oe("RouterLink");return f(),E("div",Xe,[s("div",Ye,[e(X,{block:"",onClick:g[0]||(g[0]=i=>d.$emit("toggleComposeDialogVisibility"))},{default:t(()=>g[1]||(g[1]=[x(" Compose ")])),_:1,__:[1]})]),e(l(pe),{options:{wheelPropagation:!1},class:"h-100"},{default:t(()=>[s("ul",Ze,[(f(!0),E(R,null,N(l(S),i=>(f(),I(b,{key:i.title,class:"d-flex align-center cursor-pointer align-center",to:i.to,custom:""},{default:t(({isActive:M,href:D,navigate:m})=>{var _;return[s("li",ve({ref_for:!0},d.$attrs,{href:D,class:[M&&"email-filter-active text-primary","d-flex align-center cursor-pointer"],onClick:m}),[e(u,{icon:i.prependIcon,class:"me-2",size:"20"},null,8,["icon"]),s("div",tt,h(i.title),1),e(G),(_=i.badge)!=null&&_.content?(f(),I(he,{key:0,color:i.badge.color,label:"",size:"small",class:"rounded-xl px-3"},{default:t(()=>{var n;return[x(h((n=i.badge)==null?void 0:n.content),1)]}),_:2},1032,["color"])):K("",!0)],16,et)]}),_:2},1032,["to"]))),128))]),s("ul",at,[g[2]||(g[2]=s("div",{class:"text-caption text-disabled mb-4 px-6"}," LABELS ",-1)),(f(),E(R,null,N(T,i=>e(b,{key:i.title,class:"d-flex align-center",to:i.to,custom:""},{default:t(({isActive:M,href:D,navigate:m})=>[s("li",ve({ref_for:!0},d.$attrs,{href:D,class:[M&&"email-label-active text-primary","cursor-pointer d-flex align-center"],onClick:m}),[e(u,{icon:"tabler-circle-filled",color:i.color,class:"me-2",size:"12"},null,8,["color"]),s("div",st,h(i.title),1)],16,lt)]),_:2},1032,["to"])),64))])]),_:1})])}}}),me=()=>{const L=_e(),C=async(d,g)=>{await be("apps/email",{method:"POST",body:JSON.stringify({ids:d,data:g})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:d=>d==="personal"?"success":d==="company"?"primary":d==="important"?"warning":d==="private"?"error":"secondary",shallShowMoveToActionFor:d=>d==="trash"?L.params.filter!=="trashed":d==="inbox"?!(L.params.filter===void 0||L.params.filter==="sent"||L.params.filter==="draft"):d==="spam"?!(L.params.filter==="spam"||L.params.filter==="sent"||L.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"tabler-mail"},{action:"spam",icon:"tabler-alert-octagon"},{action:"trash",icon:"tabler-trash"}],moveSelectedEmailTo:async(d,g)=>{const b={};d==="inbox"?(L.params.filter==="trashed"&&(b.isDeleted=!1),b.folder="inbox"):d==="spam"?(L.params.filter==="trashed"&&(b.isDeleted=!1),b.folder="spam"):d==="trash"&&(b.isDeleted=!0),await C(g,b)},updateEmails:C,updateEmailLabels:async(d,g)=>{await be("/apps/email",{method:"POST",body:{ids:d,label:g}})}}},ot={class:"email-view-header d-flex align-center px-5 py-3"},nt={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},rt={class:"text-body-1 text-high-emphasis text-truncate"},dt={class:"d-flex flex-wrap gap-2"},mt={class:"d-flex align-center"},pt={class:"email-view-action-bar d-flex align-center text-medium-emphasis px-6 gap-x-1"},ut={class:"d-flex align-center gap-x-1"},ct={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},ft={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},vt={class:"text-truncate"},bt={class:"text-body-1 text-high-emphasis text-truncate"},xt={class:"text-sm"},gt={class:"d-flex align-center gap-x-4"},_t={class:"text-disabled text-base"},yt={class:"text-body-1 font-weight-medium text-truncate mb-4"},ht=["innerHTML"],$t={class:"text-base"},kt={class:"text-h6 mb-6"},Ct={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},Vt=ie({__name:"EmailView",props:{email:{},emailMeta:{}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(L,{emit:C}){const p=L,V=C,$=k(""),z=k(!1),S=k(!0),{updateEmailLabels:T}=me(),{labels:d,resolveLabelColor:g,emailMoveToFolderActions:b,shallShowMoveToActionFor:i,moveSelectedEmailTo:M}=me(),D=async _=>{await M(_,[p.email.id]),V("refresh"),V("close")},m=async _=>{await T([p.email.id],_),V("refresh")};return(_,n)=>{const v=oe("IconBtn"),ne=ye;return f(),I($e,{"data-allow-mismatch":"",temporary:"","model-value":!!p.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[p.email?(f(),E(R,{key:0},[s("div",ot,[e(v,{class:"me-2",onClick:n[0]||(n[0]=c=>{_.$emit("close"),z.value=!1,S.value=!0,$.value=""})},{default:t(()=>[e(u,{size:"22",icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1}),s("div",nt,[s("div",rt,h(p.email.subject),1),s("div",dt,[(f(!0),E(R,null,N(p.email.labels,c=>(f(),I(he,{key:c,color:l(g)(c),class:"text-capitalize flex-shrink-0",size:"small",label:!1},{default:t(()=>[x(h(c),1)]),_:2},1032,["color"]))),128))])]),s("div",null,[s("div",mt,[e(v,{disabled:!p.emailMeta.hasPreviousEmail,onClick:n[1]||(n[1]=c=>_.$emit("navigated","previous"))},{default:t(()=>[e(u,{icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1},8,["disabled"]),e(v,{disabled:!p.emailMeta.hasNextEmail,onClick:n[2]||(n[2]=c=>_.$emit("navigated","next"))},{default:t(()=>[e(u,{icon:"tabler-chevron-right",class:"flip-in-rtl"})]),_:1},8,["disabled"])])])]),e(F),s("div",pt,[J(e(v,{onClick:n[3]||(n[3]=c=>{_.$emit("trash"),_.$emit("close")})},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>n[9]||(n[9]=[x(" Delete Mail ")])),_:1,__:[9]})]),_:1},512),[[W,!p.email.isDeleted]]),e(v,{onClick:n[4]||(n[4]=H(c=>{_.$emit("unread"),_.$emit("close")},["stop"]))},{default:t(()=>[e(u,{icon:"tabler-mail",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>n[10]||(n[10]=[x(" Mark as Unread ")])),_:1,__:[10]})]),_:1}),e(v,null,{default:t(()=>[e(u,{icon:"tabler-folder",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>n[11]||(n[11]=[x(" Move to ")])),_:1,__:[11]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),E(R,null,N(l(b),c=>(f(),I(le,{key:c.title,class:ee([l(i)(c.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:U=>D(c.action)},{prepend:t(()=>[e(u,{icon:c.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[x(h(c.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(u,{icon:"tabler-tag",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>n[12]||(n[12]=[x(" Label ")])),_:1,__:[12]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),E(R,null,N(l(d),c=>(f(),I(le,{key:c.title,href:"#",onClick:H(U=>m(c.title),["stop"])},{prepend:t(()=>[e(ke,{inline:"",color:l(g)(c.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[x(h(c.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(G),s("div",ut,[e(v,{color:p.email.isStarred?"warning":"default",onClick:n[5]||(n[5]=c=>{var U;(U=p.email)!=null&&U.isStarred?_.$emit("unstar"):_.$emit("star"),_.$emit("refresh")})},{default:t(()=>[e(u,{icon:"tabler-star"})]),_:1},8,["color"]),e(v,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical"})]),_:1})])]),e(F),e(l(pe),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(Y,{class:"mb-4"},{default:t(()=>[s("div",ct,[e(Ce,{size:"38"},{default:t(()=>[e(de,{src:p.email.from.avatar,alt:p.email.from.name},null,8,["src","alt"])]),_:1}),s("div",ft,[s("div",vt,[s("div",bt,h(p.email.from.name),1),s("div",xt,h(p.email.from.email),1)]),e(G),s("div",gt,[s("div",_t,h(new Date(p.email.time).toDateString()),1),s("div",null,[J(e(v,null,{default:t(()=>[e(u,{icon:"tabler-paperclip",size:"22"})]),_:1},512),[[W,p.email.attachments.length]]),e(v,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical",size:"22"})]),_:1})])])])]),e(F),e(Z,null,{default:t(()=>[s("div",yt,h(p.email.from.name)+", ",1),s("div",{class:"text-base",innerHTML:p.email.message},null,8,ht)]),_:1}),p.email.attachments.length?(f(),E(R,{key:0},[e(F),e(Z,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[n[13]||(n[13]=s("span",null,"2 Attachments",-1)),(f(!0),E(R,null,N(p.email.attachments,c=>(f(),E("div",{key:c.fileName,class:"d-flex align-center"},[e(de,{src:c.thumbnail,alt:c.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),s("span",null,h(c.fileName),1)]))),128))]),_:1,__:[13]})],64)):K("",!0)]),_:1}),J(e(Y,null,{default:t(()=>[e(Z,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[s("div",$t,[n[14]||(n[14]=x(" Click here to ")),s("span",{class:"text-primary cursor-pointer",onClick:n[6]||(n[6]=c=>{z.value=!l(z),S.value=!l(S)})}," Reply "),n[15]||(n[15]=x(" or ")),n[16]||(n[16]=s("span",{class:"text-primary cursor-pointer"}," Forward ",-1))])]),_:1})]),_:1},512),[[W,l(S)]]),l(z)?(f(),I(Y,{key:0},{default:t(()=>[e(Z,null,{default:t(()=>{var c;return[s("h6",kt," Reply to "+h((c=_.email)==null?void 0:c.from.name),1),e(ne,{modelValue:l($),"onUpdate:modelValue":n[7]||(n[7]=U=>O($)?$.value=U:null),placeholder:"Write your message..."},null,8,["modelValue"]),s("div",Ct,[e(X,{icon:"",variant:"text",color:"secondary",onClick:n[8]||(n[8]=U=>{z.value=!l(z),S.value=!l(S),$.value=""})},{default:t(()=>[e(u,{icon:"tabler-trash"})]),_:1}),e(X,{variant:"text",color:"secondary"},{prepend:t(()=>[e(u,{icon:"tabler-paperclip",class:"text-high-emphasis",size:"16"})]),default:t(()=>[n[17]||(n[17]=x(" Attachments "))]),_:1,__:[17]}),e(X,{"append-icon":"tabler-send"},{default:t(()=>n[18]||(n[18]=[x(" Send ")])),_:1,__:[18]})])]}),_:1})]),_:1})):K("",!0)]),_:1})],64)):K("",!0)]),_:1},8,["model-value"])}}}),wt={class:"d-flex align-center"},Et={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},zt=["onClick"],St={class:"text-h6"},Mt={class:"text-body-2 truncate"},Lt={class:"text-sm text-disabled"},Tt={class:"email-actions d-none"},Dt={class:"py-4 px-5 text-center"},wa=ie({__name:"index",async setup(L){let C,p;const{isLeftSidebarOpen:V}=Re(),$=_e(),{labels:z,resolveLabelColor:S,emailMoveToFolderActions:T,shallShowMoveToActionFor:d,moveSelectedEmailTo:g,updateEmails:b,updateEmailLabels:i}=me(),M=k(!1),D=k(""),m=k([]),{data:_,execute:n}=([C,p]=Te(()=>Be(Ne("/apps/email",{query:{q:D,filter:()=>"filter"in $.params?$.params.filter:void 0,label:()=>"label"in $.params?$.params.label:void 0}}))),C=await C,p(),C),v=q(()=>{var r;return((r=_.value)==null?void 0:r.emails)||[]}),ne=q(()=>{var r;return((r=_.value)==null?void 0:r.emailsMeta)||{}}),c=r=>{const a=m.value.indexOf(r);a===-1?m.value.push(r):m.value.splice(a,1)},U=q(()=>v.value.length&&v.value.length===m.value.length),ue=q(()=>!!m.value.length&&v.value.length!==m.value.length),re=q(()=>m.value.every(r=>{var a;return(a=v.value.find(w=>w.id===r))==null?void 0:a.isRead})),Ve=()=>{m.value=U.value?[]:v.value.map(r=>r.id)},y=k(null),we=q(()=>{const r={hasNextEmail:!1,hasPreviousEmail:!1};if(y.value){const a=v.value.findIndex(w=>{var o;return w.id===((o=y.value)==null?void 0:o.id)});r.hasNextEmail=!!v.value[a+1],r.hasPreviousEmail=!!v.value[a-1]}return r}),ce=async()=>{await n(),y.value&&(y.value=v.value.find(r=>{var a;return r.id===((a=y.value)==null?void 0:a.id)}))},A=async(r,a=m.value)=>{m.value=[],m.value=[],a.length&&(r==="trash"?await b(a,{isDeleted:!0}):r==="spam"?await b(a,{folder:"spam"}):r==="unread"?await b(a,{isRead:!1}):r==="read"?await b(a,{isRead:!0}):r==="star"?await b(a,{isStarred:!0}):r==="unstar"&&await b(a,{isStarred:!1}),y.value?ce():await n())},Ee=async r=>{await g(r,m.value),await n()},ze=async r=>{await i(m.value,r),await n()},Se=r=>{if(!y.value)return;const a=v.value.findIndex(o=>{var j;return o.id===((j=y.value)==null?void 0:j.id)}),w=r==="previous"?a-1:a+1;y.value=v.value[w]},Me=async r=>{y.value=r,await A("read",[r.id])};return ge(()=>$.params,()=>{m.value=[]},{deep:!0}),(r,a)=>{const w=oe("IconBtn");return f(),I(Ie,{style:{"z-index":"0","min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e($e,{modelValue:l(V),"onUpdate:modelValue":a[1]||(a[1]=o=>O(V)?V.value=o:null),"data-allow-mismatch":"",absolute:"",touchless:"",location:"start",temporary:r.$vuetify.display.mdAndDown},{default:t(()=>[e(it,{"emails-meta":l(ne),onToggleComposeDialogVisibility:a[0]||(a[0]=o=>M.value=!l(M))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(Vt,{email:l(y),"email-meta":l(we),onRefresh:ce,onNavigated:Se,onClose:a[2]||(a[2]=o=>y.value=null),onTrash:a[3]||(a[3]=o=>A("trash",l(y)?[l(y).id]:[])),onUnread:a[4]||(a[4]=o=>A("unread",l(y)?[l(y).id]:[])),onStar:a[5]||(a[5]=o=>A("star",l(y)?[l(y).id]:[])),onUnstar:a[6]||(a[6]=o=>A("unstar",l(y)?[l(y).id]:[]))},null,8,["email","email-meta"]),e(Ue,null,{default:t(()=>[e(Y,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[s("div",wt,[e(w,{class:"d-lg-none ms-3",onClick:a[7]||(a[7]=o=>V.value=!0)},{default:t(()=>[e(u,{icon:"tabler-menu-2"})]),_:1}),e(Q,{modelValue:l(D),"onUpdate:modelValue":a[8]||(a[8]=o=>O(D)?D.value=o:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(u,{icon:"tabler-search",size:"24",class:"me-1 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(F),s("div",Et,[e(xe,{"model-value":l(U),indeterminate:l(ue),class:"d-flex","onUpdate:modelValue":Ve},null,8,["model-value","indeterminate"]),s("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:De({visibility:l(ue)||l(U)?void 0:"hidden"})},[J(e(w,{onClick:a[9]||(a[9]=o=>A("trash"))},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>a[13]||(a[13]=[x(" Delete Mail ")])),_:1,__:[13]})]),_:1},512),[[W,"filter"in l($).params?l($).params.filter!=="trashed":!0]]),e(w,{onClick:a[10]||(a[10]=o=>l(re)?A("unread"):A("read"))},{default:t(()=>[e(u,{icon:l(re)?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(B,{activator:"parent",location:"top"},{default:t(()=>[x(h(l(re)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"tabler-folder",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>a[14]||(a[14]=[x(" Folder ")])),_:1,__:[14]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),E(R,null,N(l(T),o=>(f(),I(le,{key:o.title,class:ee([l(d)(o.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:j=>Ee(o.action)},{prepend:t(()=>[e(u,{icon:o.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[x(h(o.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"tabler-tag",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>a[15]||(a[15]=[x(" Label ")])),_:1,__:[15]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),E(R,null,N(l(z),o=>(f(),I(le,{key:o.title,href:"#",onClick:j=>ze(o.title)},{prepend:t(()=>[e(ke,{inline:"",color:l(S)(o.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[x(h(o.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(G),e(w,{onClick:l(n)},{default:t(()=>[e(u,{icon:"tabler-refresh",size:"22"})]),_:1},8,["onClick"]),e(w,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical",size:"22"})]),_:1})]),e(F),e(l(pe),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(f(!0),E(R,null,N(l(v),o=>{var j;return J((f(),E("li",{key:o.id,class:ee(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":o.isRead}]]),onClick:P=>Me(o)},[e(xe,{"model-value":l(m).includes(o.id),class:"flex-shrink-0","onUpdate:modelValue":P=>c(o.id),onClick:a[11]||(a[11]=H(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(w,{color:o.isStarred?"warning":"default",onClick:H(P=>A(o.isStarred?"unstar":"star",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-star",size:"22"})]),_:2},1032,["color","onClick"]),e(Ce,{size:"32"},{default:t(()=>[e(de,{src:o.from.avatar,alt:o.from.name},null,8,["src","alt"])]),_:2},1024),s("h6",St,h(o.from.name),1),s("span",Mt,h(o.subject),1),e(G),s("div",{class:ee(["email-meta align-center gap-2",r.$vuetify.display.xs?"d-none":""])},[(f(!0),E(R,null,N(o.labels,P=>(f(),I(u,{key:P,icon:"tabler-circle-filled",size:"10",color:l(S)(P)},null,8,["color"]))),128)),s("span",Lt,h(("formatDateToMonthShort"in r?r.formatDateToMonthShort:l(Le))(o.time)),1)],2),s("div",Tt,[e(w,{onClick:H(P=>A("trash",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>a[16]||(a[16]=[x(" Delete Mail ")])),_:1,__:[16]})]),_:2},1032,["onClick"]),e(w,{class:"mx-2",onClick:H(P=>A(o.isRead?"unread":"read",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:o.isRead?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(B,{activator:"parent",location:"top"},{default:t(()=>[x(h(o.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(w,{onClick:H(P=>A("spam",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-info-circle",size:"22"}),e(B,{activator:"parent",location:"top"},{default:t(()=>a[17]||(a[17]=[x(" Move to Spam ")])),_:1,__:[17]})]),_:2},1032,["onClick"])])],10,zt)),[[W,(j=l(v))==null?void 0:j.length]])}),128)),J(s("li",Dt,a[18]||(a[18]=[s("span",{class:"text-high-emphasis"},"No items found.",-1)]),512),[[W,!l(v).length]])]),_:1})]),_:1}),J(e(Qe,{onClose:a[12]||(a[12]=o=>M.value=!1)},null,512),[[W,l(M)]])]),_:1})]),_:1})}}});export{wa as default};
