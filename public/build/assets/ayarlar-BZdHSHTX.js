import{d as w,r as o,G as z,g as f,f as i,b0 as y,b as l,e as n,Z as A,af as V,t as m,l as g,d4 as E,c as k,i as F,v as _,F as K,o as p,_ as N}from"./main-PIO7dkvE.js";import{V as T,a as h}from"./VCard-Dd-LZgmu.js";import{V as I}from"./VSpacer-kLSd2RU3.js";import{V as D}from"./VTextField-wgidcyfN.js";import{V as G}from"./VChip-CiQrzYhT.js";import{V as S}from"./VAlert-B5J91szb.js";import{V as $}from"./VDivider-B0NzdLDu.js";import{V as H}from"./VCardText-XQayp_gG.js";import"./VAvatar-DefvcMrz.js";import"./VImg-DRuoOn4X.js";/* empty css              *//* empty css                   */import"./VCounter-BVktfWCx.js";import"./VField-Dk2Amc53.js";import"./focus--AY2Vyh7.js";import"./easing-Bybner-F.js";import"./VInput-X0HQAo38.js";import"./form-Hec9IYfH.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-Drv1S0ve.js";const L={class:"d-flex gap-2 align-center",style:{"max-inline-size":"560px"}},M={class:"mt-4 d-flex flex-wrap gap-2"},U={key:0,class:"text-medium-emphasis"},Y=w({__name:"ayarlar",setup(Z){const s=o([]),u=o(!1),c=o(!1),d=o(""),r=o(null);z(async()=>{u.value=!0,r.value=null;try{const{data:e}=await y.get("/api/settings/notifications/feedback");s.value=Array.isArray(e==null?void 0:e.recipients)?e.recipients:[]}catch(e){r.value=(e==null?void 0:e.message)||"Yükleme hatası"}finally{u.value=!1}});const v=()=>{const e=d.value.trim();if(!e)return;const a=e.split(/[;,\s]+/).map(t=>t.trim()).filter(Boolean);for(const t of a)x(t)&&!s.value.includes(t)&&s.value.push(t);d.value=""},x=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),b=e=>{s.value.splice(e,1)},C=async()=>{var e,a;c.value=!0,r.value=null;try{await y.put("/api/settings/notifications/feedback",{recipients:s.value})}catch(t){r.value=((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)||(t==null?void 0:t.message)||"Kaydetme hatası"}finally{c.value=!1}};return(e,a)=>(p(),f(T,{loading:u.value},{default:i(()=>[l(h,{class:"d-flex align-center gap-3"},{default:i(()=>[l(A,{icon:"tabler-bell",color:"primary"}),a[2]||(a[2]=n("span",null,"Bildirim Ayarları",-1)),l(I),l(V,{color:"primary",loading:c.value,onClick:C},{default:i(()=>a[1]||(a[1]=[m("Kaydet")])),_:1,__:[1]},8,["loading"])]),_:1,__:[2]}),l(H,null,{default:i(()=>[a[4]||(a[4]=n("p",{class:"text-body-2"}," Geri bildirimler için e-posta alıcılarını yönetin. Birden fazla e-posta ekleyebilirsiniz. ",-1)),n("div",L,[l(D,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value=t),label:"E-posta ekle",density:"compact",onKeyup:E(v,["enter"]),"hide-details":""},null,8,["modelValue"]),l(V,{variant:"tonal",onClick:v},{default:i(()=>a[3]||(a[3]=[m("Ekle")])),_:1,__:[3]})]),n("div",M,[(p(!0),k(K,null,F(s.value,(t,B)=>(p(),f(G,{key:t,closable:"","onClick:close":q=>b(B),color:"primary",variant:"tonal"},{default:i(()=>[m(_(t),1)]),_:2},1032,["onClick:close"]))),128)),s.value.length?g("",!0):(p(),k("span",U,"Henüz alıcı eklenmedi."))]),r.value?(p(),f(S,{key:0,type:"error",class:"mt-4",density:"compact"},{default:i(()=>[m(_(r.value),1)]),_:1})):g("",!0),l($,{class:"my-6"}),a[5]||(a[5]=n("div",{class:"text-caption"}," İpucu: Birden fazla alıcıyı virgül, noktalı virgül veya boşlukla ayırarak tek seferde ekleyebilirsiniz. ",-1))]),_:1,__:[4,5]})]),_:1},8,["loading"]))}}),ce=N(Y,[["__scopeId","data-v-cae55c3b"]]);export{ce as default};
