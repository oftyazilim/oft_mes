import{dy as ti,dj as O,dN as $,dQ as ei,db as y,eh as ke,dd as g,ee as ii,de as z,dq as v,dg as _,dl as F,dK as Ft,dB as vt,dF as Rt,dX as ot,e2 as ni,dL as se,dH as yt,dh as oe,ea as re,bd as w,eC as si,dm as oi,e6 as ri,dk as ai}from"./main-D-SiMLc-.js";import{an as C,o as c,aP as He,N as bt,O as Ct,g as Ie,q as m,a4 as W,k as X,d as A,aQ as ae,n as Ve,aB as li,U as At,e as f,a as S,t as tt,y as ci,x as ut,Z as rt,aR as di,f as Wt,h as hi,w as Et,B as $e,S as Bt,p as I,E as ui,V as at,aG as V,aS as fi,aq as Fe,i as pi,z as le,A as M,aM as _i,aa as gi,aT as mi,aA as vi,aU as yi,D as bi,G as St,aV as ce,a0 as ft,aW as de,M as pt,a1 as Ci,ap as Ai,af as K,ah as Ei,aN as Si,aX as Ti,aJ as xi,ab as he,aY as ue,a8 as wi,m as Di,s as Pi,r as Oi}from"./ui.errors-DA9dmEOa.js";const ki=/matrix(3d)?\((.+?)\)/,Hi=/translate(?:3d)?\((.+?)\)/,Re=function(e){e=c(e);const t=it(e);return{left:t.x,top:t.y}};function et(e){return ti(e)==="string"&&e[e.length-1]==="%"}function We(e,t){e.length&&C(e.get(0),"dxTranslator",t)}const zt=function(e){e.length&&He(e.get(0),"dxTranslator")},j=function(e){e.x=e.x||0,e.y=e.y||0;const t=et(e.x)?e.x:e.x+"px",i=et(e.y)?e.y:e.y+"px";return"translate("+t+", "+i+")"},it=function(e){let t=e.length?C(e.get(0),"dxTranslator"):null;if(!t){let n=(e.css("transform")||j({x:0,y:0})).match(ki);const s=n&&n[1];n?(n=n[2].split(","),s==="3d"?n=n.slice(12,15):(n.push(0),n=n.slice(4,7))):n=[0,0,0],t={x:parseFloat(n[0]),y:parseFloat(n[1]),z:parseFloat(n[2])},We(e,t)}return t},Be=function(e,t){e=c(e);const i=t.left,n=t.top;let s;i===void 0?(s=it(e),s.y=n||0):n===void 0?(s=it(e),s.x=i||0):(s={x:i||0,y:n||0,z:0},We(e,s)),e.css({transform:j(s)}),(et(i)||et(n))&&zt(e)},ze=function(e,t){e=c(e);let i;const n={left:0,top:0,transform:"none"};t&&(i=e.css("transition"),n.transition="none"),e.css(n),zt(e),t&&(e.get(0).offsetHeight,e.css("transition",i))},Ii=function(e){let t=e.match(Hi);if(!(!t||!t[1]))return t=t[1].split(","),t={x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])},t},fe=/cubic-bezier\((\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\)/,pe={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)"},Vi=function(e,t,i,n){const s=3*e,o=3*(i-e)-s,r=1-s-o,a=3*t,l=3*(n-t)-a,d=1-a-l,p=function(h){return h*(s+h*(o+h*r))},P=function(h){return s+h*(2*o+3*h*r)};return function(h){return(function(u){return u*(a+u*(l+u*d))})((function(u){let T=u,H=0,b;for(;H<14&&(b=p(T)-u,!(Math.abs(b)<.001));)T-=b/P(T),H++;return T})(h))}};let Tt={};const $i=function(e){e=pe[e]||e;let t=e.match(fe),i;t||(i="linear",t=pe[i].match(fe)),t=t.slice(1,5);for(let s=0;s<t.length;s++)t[s]=parseFloat(t[s]);const n=i||"cubicbezier_"+t.join("_").replace(/\./g,"p");return O(Tt[n])||(Tt[n]=function(s,o,r,a,l){return a*Vi(t[0],t[1],t[2],t[3])(o/l)+r}),n};function Fi(e){return Tt[e]}const Nn=e=>e??ei().rtlEnabled?"right":"left",Ri=e=>{var t;return $(e)?{width:e.outerWidth,height:e.outerHeight}:(t=e.getBoundingClientRect)===null||t===void 0?void 0:t.call(e)},_e=(function(){let e=[];return{add:function(t){e.includes(t)||e.push(t)},remove:function(t){const i=e.indexOf(t);i!==-1&&e.splice(i,1)},fire:function(){const t=e.pop(),i=!!t;return i&&t(),i},hasCallback:function(){return e.length>0}}})(),ge=Ie(),Wi=/left|right/,Bi=/top|bottom/,me=/fit|flip|none/,zi=/scale\(.+?\)/,Li=Ve.safari,xt=function(e){const t={h:"center",v:"center"},i=ke(e);return i&&g(i,(function(){const n=String(this).toLowerCase();Wi.test(n)?t.h=n:Bi.test(n)&&(t.v=n)})),t},ve=function(e,t){return ii(e,t)},Ni=function(e){const t=ke(e);let i=String(t&&t[0]).toLowerCase(),n=String(t&&t[1]).toLowerCase();return me.test(i)||(i="none"),me.test(n)||(n=i),{h:i,v:n}},ye=function(e){switch(e){case"center":return .5;case"right":case"bottom":return 1;default:return 0}},wt=function(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return e}},Dt=function(e,t){let i=0;return e.myLocation<t.min&&(i+=t.min-e.myLocation),e.myLocation>t.max&&(i+=e.myLocation-t.max),i},be=function(e,t,i){return t.myLocation<i.min?e==="h"?"left":"top":t.myLocation>i.max?e==="h"?"right":"bottom":"none"},Pt=function(e){e.myLocation=e.atLocation+ye(e.atAlign)*e.atSize-ye(e.myAlign)*e.mySize+e.offset},q={fit:function(e,t){let i=!1;e.myLocation>t.max&&(e.myLocation=t.max,i=!0),e.myLocation<t.min&&(e.myLocation=t.min,i=!0),e.fit=i},flip:function(e,t){if(e.flip=!1,!(e.myAlign==="center"&&e.atAlign==="center")&&(e.myLocation<t.min||e.myLocation>t.max)){const i=y({},e,{myAlign:wt(e.myAlign),atAlign:wt(e.atAlign),offset:-e.offset});Pt(i),i.oversize=Dt(i,t),(i.myLocation>=t.min&&i.myLocation<=t.max||e.oversize>i.oversize)&&(e.myLocation=i.myLocation,e.oversize=i.oversize,e.flip=!0)}},flipfit:function(e,t){this.flip(e,t),this.fit(e,t)},none:function(e){e.oversize=0}};let Le;const Ne=function(){const e=c("<div>").css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(c("body")),t=e.get(0).offsetWidth-e.get(0).clientWidth;e.remove(),Le=t},Mi={h:{location:0,flip:!1,fit:!1,oversize:0},v:{location:0,flip:!1,fit:!1,oversize:0}},Me=function(e,t){const i=c(e),n=i.offset(),s=y(!0,{},Mi,{h:{location:n.left},v:{location:n.top}});if(!t)return s;const o=xt(t.my),r=xt(t.at);let a=c(t.of).length&&t.of||ge;const l=ve(t.offset,t.precise),d=Ni(t.collision),p=t.boundary,P=ve(t.boundaryOffset,t.precise),h={mySize:bt(i),myAlign:o.h,atAlign:r.h,offset:l.h,collision:d.h,boundaryOffset:P.h},u={mySize:Ct(i),myAlign:o.v,atAlign:r.v,offset:l.v,collision:d.v,boundaryOffset:P.v};if(a.preventDefault)h.atLocation=a.pageX,u.atLocation=a.pageY,h.atSize=0,u.atSize=0;else if(a=c(a),$(a[0]))h.atLocation=a.scrollLeft(),u.atLocation=a.scrollTop(),m.real().deviceType==="phone"&&a[0].visualViewport?(h.atLocation=Math.max(h.atLocation,a[0].visualViewport.offsetLeft),u.atLocation=Math.max(u.atLocation,a[0].visualViewport.offsetTop),h.atSize=a[0].visualViewport.width,u.atSize=a[0].visualViewport.height):(h.atSize=a[0].innerWidth>a[0].outerWidth?a[0].innerWidth:W(a),u.atSize=a[0].innerHeight>a[0].outerHeight||Li?a[0].innerHeight:X(a));else if(a[0].nodeType===9)h.atLocation=0,u.atLocation=0,h.atSize=W(a),u.atSize=X(a);else{const b=Ri(a.get(0)),L=nt(a);h.atLocation=L.left,u.atLocation=L.top,h.atSize=Math.max(b.width,bt(a)),u.atSize=Math.max(b.height,Ct(a))}Pt(h),Pt(u);const T=(function(){const b=c(ge),L=W(b),Jt=X(b);let ct=b.scrollLeft(),dt=b.scrollTop();const te=A.getDocumentElement(),Qe=ae?te.clientWidth/L:1,Je=ae?te.clientHeight/Jt:1;Le===void 0&&Ne();let ee=L,ie=Jt;if(p&&!$(p)){const ht=c(p),ne=ht.offset();ct=ne.left,dt=ne.top,ee=W(ht),ie=X(ht)}return{h:{min:ct+h.boundaryOffset,max:ct+ee/Qe-h.mySize-h.boundaryOffset},v:{min:dt+u.boundaryOffset,max:dt+ie/Je-u.mySize-u.boundaryOffset}}})();h.oversize=Dt(h,T.h),u.oversize=Dt(u,T.v),h.collisionSide=be("h",h,T.h),u.collisionSide=be("v",u,T.v),q[h.collision]&&q[h.collision](h,T.h),q[u.collision]&&q[u.collision](u,T.v);const H=function(b){return t.precise?b:Math.round(b)};return y(!0,s,{h:{location:H(h.myLocation),oversize:H(h.oversize),fit:h.fit,flip:h.flip,collisionSide:h.collisionSide},v:{location:H(u.myLocation),oversize:H(u.oversize),fit:u.fit,flip:u.flip,collisionSide:u.collisionSide},precise:t.precise}),s},Ce=function(e,t,i,n){const s=z(e.style)&&!A.isNode(e.style),o=n?i.replace(t,""):i;if(s)li(e,o,!1);else{const r=A.createAttribute("style");r.value=o,e.setAttributeNode(r)}},nt=function(e){var t,i;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const s=n.get(0);if(!s)return e.offset();const o=((t=s.getAttribute)===null||t===void 0?void 0:t.call(s,"style"))||"",r=(i=o.match(zi))===null||i===void 0?void 0:i[0];let a;return r?(Ce(s,r,o,!0),a=nt(e,n.parent()),Ce(s,r,o,!1)):a=nt(e,n.parent()),a},U=function(e,t){const i=c(e);if(!t)return i.offset();ze(i,!0);const n=nt(i),s=t.h&&t.v?t:Me(i,t),o=function(r){return t.precise?r:Math.round(r)};return Be(i,{left:s.h.location-o(n.left),top:s.v.location-o(n.top)}),s},Ki=function(e){return e=c(e).get(0),$(e)?null:e&&"pageY"in e&&"pageX"in e?{top:e.pageY,left:e.pageX}:c(e).offset()};U.inverseAlign||(U.inverseAlign=wt);U.normalizeAlign||(U.normalizeAlign=xt);const Ot={calculateScrollbarWidth:Ne,calculate:Me,setup:U,offset:Ki},Ke=Ie(),G=S(rt,"dxFX"),Gi=/^([+-])=(.*)/i,Ui={initAnimation:function(e,t){e.css({transitionProperty:"none"}),typeof t.from=="string"?e.addClass(t.from):Ht(e,t.from);const i=this,n=new v,s=t.cleanupWhen;t.transitionAnimation={deferred:n,finish:function(){i._finishTransition(e),s?vt(n,s).always((function(){i._cleanup(e,t)})):i._cleanup(e,t),n.resolveWith(e,[t,e])}},this._completeAnimationCallback(e,t).done((function(){t.transitionAnimation.finish()})).fail((function(){n.rejectWith(e,[t,e])})),t.duration||t.transitionAnimation.finish(),e.css("transform")},animate:function(e,t){return this._startAnimation(e,t),t.transitionAnimation.deferred.promise()},_completeAnimationCallback:function(e,t){const i=this,n=Date.now()+t.delay,s=new v,o=new v,r=new v;let a;const l=At.transitionEndEventName()+".dxFX";t.transitionAnimation.cleanup=function(){clearTimeout(a),clearTimeout(d),f.off(e,l),f.off(e,G)},f.one(e,l,(function(){Date.now()-n>=t.duration&&o.reject()})),f.off(e,G),f.on(e,G,(function(){i.stop(e,t),s.reject()}));const d=setTimeout((function(){a=setTimeout((function(){r.reject()}),t.duration+t.delay+E._simulatedTransitionEndDelay),vt(o,r).fail((function(){s.resolve()}).bind(this))}));return s.promise()},_startAnimation:function(e,t){e.css({transitionProperty:"all",transitionDelay:t.delay+"ms",transitionDuration:t.duration+"ms",transitionTimingFunction:t.easing}),typeof t.to=="string"?e[0].className+=" "+t.to:t.to&&Ht(e,t.to)},_finishTransition:function(e){e.css("transition","none")},_cleanup:function(e,t){t.transitionAnimation.cleanup(),typeof t.from=="string"&&(e.removeClass(t.from),e.removeClass(t.to))},stop:function(e,t,i){t&&(i?t.transitionAnimation.finish():(F(t.to)&&g(t.to,(function(n){e.css(n,e.css(n))})),this._finishTransition(e),this._cleanup(e,t)))}},Ae={initAnimation:function(e,t){Ht(e,t.from)},animate:function(e,t){const i=new v,n=this;return t?(g(t.to,(function(s){t.from[s]===void 0&&(t.from[s]=n._normalizeValue(e.css(s)))})),t.to.transform&&(t.from.transform=n._parseTransform(t.from.transform),t.to.transform=n._parseTransform(t.to.transform)),t.frameAnimation={to:t.to,from:t.from,currentValue:t.from,easing:$i(t.easing),duration:t.duration,startTime:new Date().valueOf(),finish:function(){this.currentValue=this.to,this.draw(),ut(t.frameAnimation.animationFrameId),i.resolve()},draw:function(){if(t.draw){t.draw(this.currentValue);return}const s=y({},this.currentValue);s.transform&&(s.transform=Rt(s.transform,(function(o,r){if(r==="translate")return j(o);if(r==="scale")return"scale("+o+")";if(r.substr(0,r.length-1)==="rotate")return r+"("+o+"deg)"})).join(" ")),e.css(s)}},t.delay?(t.frameAnimation.startTime+=t.delay,t.frameAnimation.delayTimeout=setTimeout((function(){n._startAnimation(e,t)}),t.delay)):n._startAnimation(e,t),i.promise()):i.reject().promise()},_startAnimation:function(e,t){f.off(e,G),f.on(e,G,(function(){t.frameAnimation&&ut(t.frameAnimation.animationFrameId)})),this._animationStep(e,t)},_parseTransform:function(e){const t={};return g(e.match(/\w+\d*\w*\([^)]*\)\s*/g),(function(i,n){const s=Ii(n),o=n.match(/scale\((.+?)\)/),r=n.match(/(rotate.)\((.+)deg\)/);s&&(t.translate=s),o&&o[1]&&(t.scale=parseFloat(o[1])),r&&r[1]&&(t[r[1]]=parseFloat(r[2]))})),t},stop:function(e,t,i){const n=t&&t.frameAnimation;n&&(ut(n.animationFrameId),clearTimeout(n.delayTimeout),i&&n.finish(),delete t.frameAnimation)},_animationStep:function(e,t){const i=t&&t.frameAnimation;if(!i)return;const n=new Date().valueOf();if(n>=i.startTime+i.duration){i.finish();return}i.currentValue=this._calcStepValue(i,n-i.startTime),i.draw();const s=this;i.animationFrameId=ci((function(){s._animationStep(e,t)}))},_calcStepValue:function(e,t){const i=function(n,s){const o=Array.isArray(s)?[]:{};return g(s,(function(r,a){if(typeof a=="string"&&parseFloat(a)===!1)return!0;o[r]=typeof a=="object"?i(n[r],a):(function(l){const d=t/e.duration,p=t,P=1*n[l],h=s[l]-n[l],u=e.duration;return Fi(e.easing)(d,p,P,h,u)})(r)})),o};return i(e.from,e.to)},_normalizeValue:function(e){const t=parseFloat(e);return t===!1?e:t}},ji={initAnimation:function(){},animate:function(){return new v().resolve().promise()},stop:_,isSynchronous:!0},Xi=function(e){e=e||{};const t={transition:At.transition()?Ui:Ae,frame:Ae,noAnimation:ji};let i=e.strategy||"transition";return e.type==="css"&&!At.transition()&&(i="noAnimation"),t[i]},Ge=function(e,t,i,n){g(["from","to"],(function(){if(!i(e[this]))throw Ft.Error("E0010",t,this,n)}))},Ue=function(e,t){return Ge(e,t,(function(i){return F(i)}),"a plain object")},qi=function(e,t){return Ge(e,t,(function(i){return typeof i=="string"}),"a string")},Yi={setup:function(){}},Zi={validateConfig:function(e){qi(e,"css")},setup:function(){}},Qi={top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},right:{my:"left center",at:"right center"},left:{my:"right center",at:"left center"}},_t={validateConfig:function(e){Ue(e,"slide")},setup:function(e,t){const i=Re(e);if(t.type!=="slide"){const n=t.type==="slideIn"?t.from:t.to;n.position=y({of:Ke},Qi[t.direction]),kt(e,n)}this._setUpConfig(i,t.from),this._setUpConfig(i,t.to),zt(e)},_setUpConfig:function(e,t){t.left="left"in t?t.left:"+=0",t.top="top"in t?t.top:"+=0",this._initNewPosition(e,t)},_initNewPosition:function(e,t){const i={left:t.left,top:t.top};delete t.left,delete t.top;let n=this._getRelativeValue(i.left);n!==void 0?i.left=n+e.left:t.left=0,n=this._getRelativeValue(i.top),n!==void 0?i.top=n+e.top:t.top=0,t.transform=j({x:i.left,y:i.top})},_getRelativeValue:function(e){let t;if(typeof e=="string"&&(t=Gi.exec(e)))return parseInt(t[1]+"1")*t[2]}},gt={setup:function(e,t){const i=t.from,n=t.to,s=t.type==="fadeOut"?1:0,o=t.type==="fadeOut"?0:1;let r=F(i)?String(i.opacity??s):String(i),a=F(n)?String(n.opacity??o):String(n);switch(t.skipElementInitialStyles||(r=e.css("opacity")),t.type){case"fadeIn":a=1;break;case"fadeOut":a=0}t.from={visibility:"visible",opacity:r},t.to={opacity:a}}},Ji={validateConfig:function(e){Ue(e,"pop")},setup:function(e,t){const i=t.from,n=t.to,s="opacity"in i?i.opacity:e.css("opacity"),o="opacity"in n?n.opacity:1,r="scale"in i?i.scale:0,a="scale"in n?n.scale:1;t.from={opacity:s};const l=it(e);t.from.transform=this._getCssTransform(l,r),t.to={opacity:o},t.to.transform=this._getCssTransform(l,a)},_getCssTransform:function(e,t){return j(e)+"scale("+t+")"}},je={custom:Yi,slide:_t,slideIn:_t,slideOut:_t,fade:gt,fadeIn:gt,fadeOut:gt,pop:Ji,css:Zi},tn=function(e){const t=je[e.type];if(!t)throw Ft.Error("E0011",e.type);return t},en={type:"custom",from:{},to:{},duration:400,start:_,complete:_,easing:"ease",delay:0},nn={duration:400,easing:"ease",delay:0};function sn(){const e=this.element,t=this.config;if(kt(e,t.from),kt(e,t.to),this.configurator.setup(e,t),e.data("dxAnimData",this),this.strategy.initAnimation(e,t),t.start){const i=tt(e);t.start.apply(this,[i,t])}}const on=function(e){const t=e.element,i=e.config;if(t.removeData("dxAnimData"),i.complete){const n=tt(t);i.complete.apply(this,[n,i])}e.deferred.resolveWith(this,[t,i])},rn=function(){const e=this,t=e.element,i=e.config;return e.isStarted=!0,e.strategy.animate(t,i).done((function(){on(e)})).fail((function(){e.deferred.rejectWith(this,[t,i])}))},an=function(e){const t=this,i=t.element,n=t.config;clearTimeout(t.startTimeout),t.isStarted||t.start(),t.strategy.stop(i,n,e)},mt=S(rt,"dxFXStartAnimation"),ln=function(e){f.off(e.element,mt),f.on(e.element,mt,(function(){E.stop(e.element)})),e.deferred.always((function(){f.off(e.element,mt)}))},Xe=function(e,t){const i=t.type==="css"?nn:en,n=y(!0,{},i,t),s=tn(n),o=Xi(n),r={element:c(e),config:n,configurator:s,strategy:o,isSynchronous:o.isSynchronous,setup:sn,start:rn,stop:an,deferred:new v};return O(s.validateConfig)&&s.validateConfig(n),ln(r),r},cn=function(e,t){const i=c(e);if(!i.length)return new v().resolve().promise();const n=Xe(i,t);return dn(i,n),n.deferred.promise()};function dn(e,t){const i=Lt(e);hn(e,i),i.push(t),lt(e)||Nt(e,i)}function Lt(e){return e.data("dxAnimQueue")||[]}function hn(e,t){e.data("dxAnimQueue",t)}const qe=function(e){e.removeData("dxAnimQueue")};function lt(e){return!!c(e).data("dxAnimData")}function Nt(e,t){if(t=Lt(e),!t.length)return;const i=t.shift();t.length===0&&qe(e),un(i).done((function(){lt(e)||Nt(e)}))}function un(e){return e.setup(),e.isSynchronous?e.start():e.startTimeout=setTimeout((function(){e.start()})),e.deferred.promise()}function kt(e,t){if(!t||!t.position)return;const i=c(Ke);let n=0,s=0;const o=Ot.calculate(e,t.position),r=e.offset(),a=e.position();a.top>r.top&&(s=i.scrollTop()),a.left>r.left&&(n=i.scrollLeft()),y(t,{left:o.h.location-r.left+a.left-n,top:o.v.location-r.top+a.top-s}),delete t.position}function Ht(e,t){g(t,(function(i,n){try{e.css(i,O(n)?n():n)}catch{}}))}const fn=function(e,t){const i=c(e),n=Lt(i);g(n,(function(o,r){r.config.delay=0,r.config.duration=0,r.isSynchronous=!0})),lt(i)||Nt(i,n);const s=i.data("dxAnimData");s&&s.stop(t),i.removeData("dxAnimData"),qe(i)},E={off:!1,animationTypes:je,animate:cn,createAnimation:Xe,isAnimating:lt,stop:fn,_simulatedTransitionEndDelay:100},Y={forward:" dx-forward",backward:" dx-backward",none:" dx-no-direction",undefined:" dx-no-direction"},pn=di.inherit({ctor:function(){this.callBase.apply(this,arguments),this._registeredPresets=[],this.resetToDefaults()},_getDefaultOptions:function(){return y(this.callBase(),{defaultAnimationDuration:400,defaultAnimationDelay:0,defaultStaggerAnimationDuration:300,defaultStaggerAnimationDelay:40,defaultStaggerAnimationStartDelay:500})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){return e.phone},options:{defaultStaggerAnimationDuration:350,defaultStaggerAnimationDelay:50,defaultStaggerAnimationStartDelay:0}},{device:function(){return m.current().android||m.real.android},options:{defaultAnimationDelay:100}}])},_getPresetOptionName:function(e){return"preset_"+e},_createAndroidSlideAnimationConfig:function(e,t){const i=this,n=function(s){return{type:"slide",delay:s.delay===void 0?i.option("defaultAnimationDelay"):s.delay,duration:s.duration===void 0?i.option("defaultAnimationDuration"):s.duration}};return{enter:function(s,o){const r=W(s.parent())*t,a=o.direction,l=n(o);return l.to={left:0,opacity:1},a==="forward"?l.from={left:r,opacity:e}:a==="backward"?l.from={left:-r,opacity:e}:l.from={left:0,opacity:0},E.createAnimation(s,l)},leave:function(s,o){const r=W(s.parent())*t,a=o.direction,l=n(o);return l.from={left:0,opacity:1},a==="forward"?l.to={left:-r,opacity:e}:a==="backward"?l.to={left:r,opacity:e}:l.to={left:0,opacity:0},E.createAnimation(s,l)}}},_createOpenDoorConfig:function(){const e=this,t=function(i){return{type:"css",extraCssClasses:"dx-opendoor-animation",delay:i.delay===void 0?e.option("defaultAnimationDelay"):i.delay,duration:i.duration===void 0?e.option("defaultAnimationDuration"):i.duration}};return{enter:function(i,n){const s=n.direction,o=t(n);return o.delay=s==="none"?o.delay:o.duration,o.from="dx-enter dx-opendoor-animation"+Y[s],o.to="dx-enter-active",E.createAnimation(i,o)},leave:function(i,n){const s=n.direction,o=t(n);return o.from="dx-leave dx-opendoor-animation"+Y[s],o.to="dx-leave-active",E.createAnimation(i,o)}}},_createWinPopConfig:function(){const e=this,t={type:"css",extraCssClasses:"dx-win-pop-animation",duration:e.option("defaultAnimationDuration")};return{enter:function(i,n){const s=t,o=n.direction;return s.delay=o==="none"?e.option("defaultAnimationDelay"):e.option("defaultAnimationDuration")/2,s.from="dx-enter dx-win-pop-animation"+Y[o],s.to="dx-enter-active",E.createAnimation(i,s)},leave:function(i,n){const s=t,o=n.direction;return s.delay=e.option("defaultAnimationDelay"),s.from="dx-leave dx-win-pop-animation"+Y[o],s.to="dx-leave-active",E.createAnimation(i,s)}}},resetToDefaults:function(){this.clear(),this.registerDefaultPresets(),this.applyChanges()},clear:function(e){const t=this,i=[];g(this._registeredPresets,(function(n,s){!e||e===s.name?t.option(t._getPresetOptionName(s.name),void 0):i.push(s)})),this._registeredPresets=i,this.applyChanges()},registerPreset:function(e,t){this._registeredPresets.push({name:e,config:t})},applyChanges:function(){const e=this,t=[];g(this._registeredPresets,(function(i,n){const s={device:n.config.device,options:{}};s.options[e._getPresetOptionName(n.name)]=n.config.animation,t.push(s)})),this._setOptionsByDevice(t)},getPreset:function(e){let t=e;for(;typeof t=="string";)t=this.option(this._getPresetOptionName(t));return t},registerDefaultPresets:function(){this.registerPreset("pop",{animation:{extraCssClasses:"dx-android-pop-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("openDoor",{animation:this._createOpenDoorConfig()}),this.registerPreset("win-pop",{animation:this._createWinPopConfig()}),this.registerPreset("fade",{animation:{extraCssClasses:"dx-fade-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("slide",{device:function(){return m.current().android||m.real.android},animation:this._createAndroidSlideAnimationConfig(1,1)}),this.registerPreset("slide",{device:function(){return!m.current().android&&!m.real.android},animation:{extraCssClasses:"dx-slide-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("ios7-slide",{animation:{extraCssClasses:"dx-ios7-slide-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("overflow",{animation:{extraCssClasses:"dx-overflow-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("ios7-toolbar",{device:function(){return!m.current().android&&!m.real.android},animation:{extraCssClasses:"dx-ios7-toolbar-animation",delay:this.option("defaultAnimationDelay"),duration:this.option("defaultAnimationDuration")}}),this.registerPreset("ios7-toolbar",{device:function(){return m.current().android||m.real.android},animation:this._createAndroidSlideAnimationConfig(0,.4)}),this.registerPreset("stagger-fade",{animation:{extraCssClasses:"dx-fade-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-slide",{animation:{extraCssClasses:"dx-slide-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-fade-slide",{animation:{extraCssClasses:"dx-fade-slide-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-drop",{animation:{extraCssClasses:"dx-drop-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-fade-drop",{animation:{extraCssClasses:"dx-fade-drop-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-fade-rise",{animation:{extraCssClasses:"dx-fade-rise-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-3d-drop",{animation:{extraCssClasses:"dx-3d-drop-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}}),this.registerPreset("stagger-fade-zoom",{animation:{extraCssClasses:"dx-fade-zoom-animation",staggerDelay:this.option("defaultStaggerAnimationDelay"),duration:this.option("defaultStaggerAnimationDuration"),delay:this.option("defaultStaggerAnimationStartDelay")}})}}),_n=new pn,gn={forward:" dx-forward",backward:" dx-backward",none:" dx-no-direction",undefined:" dx-no-direction"};ot.inherit({ctor:function(){this._accumulatedDelays={enter:0,leave:0},this._animations=[],this.reset()},_createAnimations:function(e,t,i,n){e=c(e);const s=this,o=[];i=i||{};const r=this._prepareElementAnimationConfig(t,i,n);return r&&e.each((function(){const a=s._createAnimation(c(this),r,i);a&&(a.element.addClass("dx-animating"),a.setup(),o.push(a))})),o},_prepareElementAnimationConfig:function(e,t,i){let n;if(typeof e=="string"){const s=e;e=_n.getPreset(s)}if(!e)n=void 0;else if(O(e[i]))n=e[i];else{if(n=y({skipElementInitialStyles:!0,cleanupWhen:this._completePromise},e,t),!n.type||n.type==="css"){const s="dx-"+i,o=(n.extraCssClasses?" "+n.extraCssClasses:"")+gn[n.direction];n.type="css",n.from=(n.from||s)+o,n.to=n.to||s+"-active"}n.staggerDelay=n.staggerDelay||0,n.delay=n.delay||0,n.staggerDelay&&(n.delay+=this._accumulatedDelays[i],this._accumulatedDelays[i]+=n.staggerDelay)}return n},_createAnimation:function(e,t,i){let n;return F(t)?n=E.createAnimation(e,t):O(t)&&(n=t(e,i)),n},_startAnimations:function(){const e=this._animations;for(let t=0;t<e.length;t++)e[t].start()},_stopAnimations:function(e){const t=this._animations;for(let i=0;i<t.length;i++)t[i].stop(e)},_clearAnimations:function(){const e=this._animations;for(let t=0;t<e.length;t++)e[t].element.removeClass("dx-animating");this._animations.length=0},reset:function(){this._accumulatedDelays.enter=0,this._accumulatedDelays.leave=0,this._clearAnimations(),this._completeDeferred=new v,this._completePromise=this._completeDeferred.promise()},enter:function(e,t,i){const n=this._createAnimations(e,t,i,"enter");this._animations.push.apply(this._animations,n)},leave:function(e,t,i){const n=this._createAnimations(e,t,i,"leave");this._animations.push.apply(this._animations,n)},start:function(){const e=this;let t;if(!this._animations.length)e.reset(),t=new v().resolve().promise();else{const i=Rt(this._animations,(function(n){const s=new v;return n.deferred.always((function(){s.resolve()})),s.promise()}));t=vt.apply(c,i).always((function(){e._completeDeferred.resolve(),e.reset()})),ni.executeAsync((function(){e._startAnimations()}))}return t},stop:function(e){this._stopAnimations(e)}});const Mt=ot.inherit({ctor(e){this._$element=c(e),this._cancelCallback=se(),this._acceptCallback=se()},getElement(){return this._$element},validate:e=>!Et(e),validatePointers:e=>hi(e)===1,allowInterruptionByMouseWheel:()=>!0,configure(e){y(this,e)},addCancelCallback(e){this._cancelCallback.add(e)},removeCancelCallback(){this._cancelCallback.empty()},_cancel(e){this._cancelCallback.fire(this,e)},addAcceptCallback(e){this._acceptCallback.add(e)},removeAcceptCallback(){this._acceptCallback.empty()},_accept(e){this._acceptCallback.fire(this,e)},_requestAccept(e){this._acceptRequestEvent=e},_forgetAccept(){this._accept(this._acceptRequestEvent),this._acceptRequestEvent=null},start:_,move:_,end:_,cancel:_,reset(){this._acceptRequestEvent&&this._accept(this._acceptRequestEvent)},_fireEvent(e,t,i){const n=y({type:e,originalEvent:t,target:this._getEmitterTarget(t),delegateTarget:this.getElement().get(0)},i);return t=Wt(n),t.cancel&&this._cancel(t),t},_getEmitterTarget(e){return(this.delegateSelector?c(e.target).closest(this.delegateSelector):this.getElement()).get(0)},dispose:_}),Z="dxEventManager",mn=ot.inherit({ctor(){this._attachHandlers(),this.reset(),this._proxiedCancelHandler=this._cancelHandler.bind(this),this._proxiedAcceptHandler=this._acceptHandler.bind(this)},_attachHandlers(){Bt.add((()=>{const e=A.getDocument();f.subscribeGlobal(e,S(I.down,Z),this._pointerDownHandler.bind(this)),f.subscribeGlobal(e,S(I.move,Z),this._pointerMoveHandler.bind(this)),f.subscribeGlobal(e,S([I.up,I.cancel].join(" "),Z),this._pointerUpHandler.bind(this)),f.subscribeGlobal(e,S(ui,Z),this._mouseWheelHandler.bind(this))}))},_eachEmitter(e){const t=this._activeEmitters||[];let i=0;for(;t.length>i;){const n=t[i];if(e(n)===!1)break;t[i]===n&&i++}},_applyToEmitters(e,t){this._eachEmitter((i=>{i[e].call(i,t)}))},reset(){this._eachEmitter(this._proxiedCancelHandler),this._activeEmitters=[]},resetEmitter(e){this._proxiedCancelHandler(e)},_pointerDownHandler(e){$e(e)&&e.which>1||this._updateEmitters(e)},_updateEmitters(e){this._isSetChanged(e)&&(this._cleanEmitters(e),this._fetchEmitters(e))},_isSetChanged(e){const t=this._closestEmitter(e),i=this._emittersSet||[];let n=t.length!==i.length;return g(t,((s,o)=>(n=n||i[s]!==o,!n))),this._emittersSet=t,n},_closestEmitter(e){const t=this,i=[];let n=c(e.target);function s(o,r){r&&r.validatePointers(e)&&r.validate(e)&&(r.addCancelCallback(t._proxiedCancelHandler),r.addAcceptCallback(t._proxiedAcceptHandler),i.push(r))}for(;n.length;){const o=C(n.get(0),"dxEmitter")||[];g(o,s),n=n.parent()}return i},_acceptHandler(e,t){this._eachEmitter((i=>{i!==e&&this._cancelEmitter(i,t)}))},_cancelHandler(e,t){this._cancelEmitter(e,t)},_cancelEmitter(e,t){const i=this._activeEmitters;t?e.cancel(t):e.reset(),e.removeCancelCallback(),e.removeAcceptCallback();const n=i.indexOf(e);n>-1&&i.splice(n,1)},_cleanEmitters(e){this._applyToEmitters("end",e),this.reset(e)},_fetchEmitters(e){this._activeEmitters=this._emittersSet.slice(),this._applyToEmitters("start",e)},_pointerMoveHandler(e){this._applyToEmitters("move",e)},_pointerUpHandler(e){this._updateEmitters(e)},_mouseWheelHandler(e){this._allowInterruptionByMouseWheel()&&(e.pointers=[null],this._pointerDownHandler(e),this._adjustWheelEvent(e),this._pointerMoveHandler(e),e.pointers=[],this._pointerUpHandler(e))},_allowInterruptionByMouseWheel(){let e=!0;return this._eachEmitter((t=>(e=t.allowInterruptionByMouseWheel()&&e,e))),e},_adjustWheelEvent(e){let t=null;if(this._eachEmitter((o=>{if(!o.gesture)return;const r=o.getDirection(e);if(r!=="horizontal"&&!e.shiftKey||r!=="vertical"&&e.shiftKey)return t=o,!1})),!t)return;const i=t.getDirection(e),s=i==="both"&&!e.shiftKey||i==="vertical"?"pageY":"pageX";e[s]+=e.delta},isActive(e){let t=!1;return this._eachEmitter((i=>{t=t||i.getElement().is(e)})),t}}),Ee=new mn,Kt=function(e){const t=e.emitter,i=e.events[0],n=e.events;g(n,((s,o)=>{at(o,{noBubble:!e.bubble,setup(r){const a=C(r,"dxEmitterSubscription")||{},l=C(r,"dxEmitter")||{},d=l[i]||new t(r);a[o]=!0,l[i]=d,C(r,"dxEmitter",l),C(r,"dxEmitterSubscription",a)},add(r,a){C(r,"dxEmitter")[i].configure(y({delegateSelector:a.selector},a.data),a.type)},teardown(r){const a=C(r,"dxEmitterSubscription"),l=C(r,"dxEmitter"),d=l[i];delete a[o];let p=!0;g(n,((P,h)=>(p=p&&!a[h],p))),p&&(Ee.isActive(r)&&Ee.resetEmitter(d),d&&d.dispose(),delete l[i])}})}))};function Ye(e){return e&&[e.target,e.delegateTarget,e.relatedTarget,e.currentTarget].filter((t=>!!t))}const vn=(e,t)=>{f.one(Ye(e),rt,t)},yn=(e,t)=>{f.off(Ye(e),rt,t)},Mn="dxclick";let It=null,N=null;const Se=()=>{N=null},Te=function(e){const{originalEvent:t}=e,i=N===t||t&&t.DXCLICK_FIRED;(!e.which||e.which===1)&&!It&&!i&&(t&&(t.DXCLICK_FIRED=!0),yn(N,Se),N=t,vn(N,Se),Wt({type:"dxclick",originalEvent:e}))},bn=Mt.inherit({ctor(e){this.callBase(e),f.on(this.getElement(),"click",Te)},start(){It=null},cancel(){It=!0},dispose(){f.off(this.getElement(),"click",Te)}});(function(){if(!m.real().generic){let t=null,i=!1;const n=function(d){return c(d).is("input, textarea, select, button ,:focus, :focus *")},s=function(d){t=d.target,i=d.isDefaultPrevented()},o=function(d){const p=fi(d);return c(p)},r=function(d){const p=o(d);!i&&t&&!p.is(t)&&!c(t).is("label")&&n(p)&&V.resetActiveElement(),t=null,i=!1},a="NATIVE_CLICK_FIXER",l=A.getDocument();f.subscribeGlobal(l,S(I.down,a),s),f.subscribeGlobal(l,S("click",a),r)}})();Kt({emitter:bn,bubble:!0,events:["dxclick"]});const Kn="dxactive",Q=ot.inherit({ctor(e,t){this._timeout=e,this._fire=t},start(){const e=this;this._schedule((()=>{e.force()}))},_schedule(e){this.stop(),this._timer=setTimeout(e,this._timeout)},stop(){clearTimeout(this._timer)},force(){this._fired||(this.stop(),this._fire(),this._fired=!0)},fired(){return this._fired}});let x;const Gt=Mt.inherit({ctor(){this.callBase.apply(this,arguments),this._active=new Q(0,_),this._inactive=new Q(0,_)},configure(e,t){switch(t){case"dxactive":e.activeTimeout=e.timeout;break;case"dxinactive":e.inactiveTimeout=e.timeout}this.callBase(e)},start(e){if(x){const t=Fe(this.getElement().get(0),x.getElement().get(0)),i=!x._active.fired();if(t&&i){this._cancel();return}x._inactive.force()}x=this,this._initEvents(e),this._active.start()},_initEvents(e){const t=this,i=this._getEmitterTarget(e),n=$e(e),o=m.isSimulator()||!n,r=yt(this.activeTimeout,30),a=yt(this.inactiveTimeout,400);this._active=new Q(o?r:0,(()=>{t._fireEvent("dxactive",e,{target:i})})),this._inactive=new Q(o?a:0,(()=>{t._fireEvent("dxinactive",e,{target:i}),x=null}))},cancel(e){this.end(e)},end(e){const t=e.type!==I.up;t?this._active.stop():this._active.force(),this._inactive.start(),t&&this._inactive.force()},dispose(){this._active.stop(),this._inactive.stop(),x===this&&(x=null),this.callBase()},lockInactive(){return this._active.force(),this._inactive.stop(),x=null,this._cancel(),this._inactive.force.bind(this._inactive)}});Gt.lock=function(e){const t=x?x.lockInactive():_;e.done(t)};Kt({emitter:Gt,events:["dxactive","dxinactive"]});const{lock:Gn}=Gt,Cn=Bt.add,{abs:xe}=Math;let st=10;const An=function(){return vi("pointer-events")},En=mi((()=>{const e=m.real().deviceType==="desktop";if(!An()||!e)return _;const t=c("<div>").addClass("dx-gesture-cover").css("pointerEvents","none");return f.subscribeGlobal(t,"dxmousewheel",(i=>{i.preventDefault()})),Cn((()=>{t.appendTo("body")})),function(i,n){t.css("pointerEvents",i?"all":"none"),i&&t.css("cursor",n)}})),Sn=function(e,t){En()(e,t)},Ut=Mt.inherit({gesture:!0,configure(e){this.getElement().css("msTouchAction",e.immediate?"pinch-zoom":""),this.callBase(e)},allowInterruptionByMouseWheel(){return this._stage!==2},getDirection(){return this.direction},_cancel(){this.callBase.apply(this,arguments),this._toggleGestureCover(!1),this._stage=0},start(e){if(e._needSkipEvent||_i(e)){this._cancel(e);return}this._startEvent=gi(e),this._startEventData=M(e),this._stage=1,this._init(e),this._setupImmediateTimer()},_setupImmediateTimer(){if(clearTimeout(this._immediateTimer),this._immediateAccepted=!1,!!this.immediate){if(this.immediateTimeout===0){this._immediateAccepted=!0;return}this._immediateTimer=setTimeout((()=>{this._immediateAccepted=!0}),this.immediateTimeout??180)}},move(e){if(this._stage===1&&this._directionConfirmed(e)){if(this._stage=2,this._resetActiveElement(),this._toggleGestureCover(!0),this._clearSelection(e),this._adjustStartEvent(e),this._start(this._startEvent),this._stage===0)return;this._requestAccept(e),this._move(e),this._forgetAccept()}else this._stage===2&&(this._clearSelection(e),this._move(e))},_directionConfirmed(e){const t=this._getTouchBoundary(e),i=le(this._startEventData,M(e)),n=xe(i.x),s=xe(i.y),o=this._validateMove(t,n,s),r=this._validateMove(t,s,n),a=this.getDirection(e);return a==="both"&&(o||r)||a==="horizontal"&&o||a==="vertical"&&r||this._immediateAccepted},_validateMove(e,t,i){return t&&t>=e&&(this.immediate?t>=i:!0)},_getTouchBoundary(e){return this.immediate||Et(e)?0:st},_adjustStartEvent(e){const t=this._getTouchBoundary(e),i=le(this._startEventData,M(e));this._startEvent.pageX+=oe(i.x)*t,this._startEvent.pageY+=oe(i.y)*t},_resetActiveElement(){m.real().platform==="ios"&&this.getElement().find(":focus").length&&V.resetActiveElement()},_toggleGestureCover(e){this._toggleGestureCoverImpl(e)},_toggleGestureCoverImpl(e){this._stage===2&&Sn(e,this.getElement().css("cursor"))},_clearSelection(e){Et(e)||pi(e)||V.clearSelection()},end(e){this._toggleGestureCover(!1),this._stage===2?this._end(e):this._stage===1&&this._stop(e),this._stage=0},dispose(){clearTimeout(this._immediateTimer),this.callBase.apply(this,arguments),this._toggleGestureCover(!1)},_init:_,_start:_,_move:_,_stop:_,_end:_});Ut.initialTouchBoundary=st;Ut.touchBoundary=function(e){if(z(e)){st=e;return}return st};const Un="dxdragstart",Tn="dxdrag",jn="dxdragend",jt="dxdragenter",Xt="dxdragleave",qt="dxdrop",D=[],B=[],Vt=[],Yt={setup(e,t){D.includes(e)||(D.push(e),B.push([]),Vt.push(t||{}))},add(e,t){const i=D.indexOf(e);this.updateEventsCounter(e,t.type,1);const{selector:n}=t;B[i].includes(n)||B[i].push(n)},updateEventsCounter(e,t,i){if([jt,Xt,qt].includes(t)){const n=C(e,"dxDragEventsCount")||0;C(e,"dxDragEventsCount",Math.max(0,n+i))}},remove(e,t){this.updateEventsCounter(e,t.type,-1)},teardown(e){if(!C(e,"dxDragEventsCount")){const i=D.indexOf(e);D.splice(i,1),B.splice(i,1),Vt.splice(i,1),He(e,"dxDragEventsCount")}}};at(jt,Yt);at(Xt,Yt);at(qt,Yt);const xn=function(e){const t=D.indexOf(e.get(0)),i=B[t].filter((s=>s));let n=e.find(i.join(", "));return B[t].includes(void 0)&&(n=n.add(e)),n},wn=function(e){const t=D.indexOf(e.get(0));return Vt[t]},Dn=function(e,t){return e.itemPositionFunc?e.itemPositionFunc(t):t.offset()},Pn=function(e,t){return e.itemSizeFunc?e.itemSizeFunc(t):{width:t.get(0).getBoundingClientRect().width,height:t.get(0).getBoundingClientRect().height}},On=Ut.inherit({ctor(e){this.callBase(e),this.direction="both"},_init(e){this._initEvent=e},_start(e){if(e=this._fireEvent("dxdragstart",this._initEvent),this._maxLeftOffset=e.maxLeftOffset,this._maxRightOffset=e.maxRightOffset,this._maxTopOffset=e.maxTopOffset,this._maxBottomOffset=e.maxBottomOffset,e.targetElements||e.targetElements===null){const t=yi(e.targetElements||[]);this._dropTargets=Rt(t,(i=>c(i).get(0)))}else this._dropTargets=D},_move(e){const t=M(e),i=this._calculateOffset(t);e=this._fireEvent("dxdrag",e,{offset:i}),this._processDropTargets(e),e._cancelPreventDefault||e.preventDefault()},_calculateOffset(e){return{x:this._calculateXOffset(e),y:this._calculateYOffset(e)}},_calculateXOffset(e){if(this.direction!=="vertical"){const t=e.x-this._startEventData.x;return this._fitOffset(t,this._maxLeftOffset,this._maxRightOffset)}return 0},_calculateYOffset(e){if(this.direction!=="horizontal"){const t=e.y-this._startEventData.y;return this._fitOffset(t,this._maxTopOffset,this._maxBottomOffset)}return 0},_fitOffset(e,t,i){return t!=null&&(e=Math.max(e,-t)),i!=null&&(e=Math.min(e,i)),e},_processDropTargets(e){const t=this._findDropTarget(e);t===this._currentDropTarget||(this._fireDropTargetEvent(e,Xt),this._currentDropTarget=t,this._fireDropTargetEvent(e,jt))},_fireDropTargetEvent(e,t){if(!this._currentDropTarget)return;const i={type:t,originalEvent:e,draggingElement:this._$element.get(0),target:this._currentDropTarget};Wt(i)},_findDropTarget(e){const t=this;let i;return g(D,((n,s)=>{if(!t._checkDropTargetActive(s))return;const o=c(s);g(xn(o),((r,a)=>{const l=c(a);t._checkDropTarget(wn(o),l,c(i),e)&&(i=a)}))})),i},_checkDropTargetActive(e){let t=!1;return g(this._dropTargets,((i,n)=>(t=t||n===e||Fe(n,e),!t))),t},_checkDropTarget(e,t,i,n){if(t.get(0)===c(n.target).get(0))return!1;const o=Dn(e,t);if(n.pageX<o.left||n.pageY<o.top)return!1;const r=Pn(e,t);return n.pageX>o.left+r.width||n.pageY>o.top+r.height||i.length&&i.closest(t).length||e.checkDropTarget&&!e.checkDropTarget(t,n)?!1:t},_end(e){const t=M(e);this._fireEvent("dxdragend",e,{offset:this._calculateOffset(t)}),this._fireDropTargetEvent(e,qt),delete this._currentDropTarget}});Kt({emitter:On,events:["dxdragstart","dxdrag","dxdragend"]});function kn(e,t,i){function n(o){return typeof o=="string"?o.split("."):typeof o=="number"?[o]:o}e=n(e),t=n(t);let s=Math.max(e.length,t.length);isFinite(i)&&(s=Math.min(s,i));for(let o=0;o<s;o++){const r=parseInt(e[o]||0,10),a=parseInt(t[o]||0,10);if(r<a)return-1;if(r>a)return 1}return 0}const Xn="dx-state-focused";function we(e,t,i){const n=e==="role"||e==="id"?e:`aria-${e}`,s=z(t)?t.toString():null;i.attr(n,s)}class Zt extends bi{constructor(){super(...arguments),this._feedbackHideTimeout=400,this._feedbackShowTimeout=30}static getOptionsFromContainer(t){let{name:i,fullName:n,value:s}=t,o={};if(i===n)o=s;else{const r=n.split(".").pop();o[r]=s}return o}_supportedKeys(t){return{}}_getDefaultOptions(){return y(super._getDefaultOptions(),{hoveredElement:null,isActive:!1,disabled:!1,visible:!0,hint:void 0,activeStateEnabled:!1,onContentReady:null,hoverStateEnabled:!1,focusStateEnabled:!1,tabIndex:0,accessKey:void 0,onFocusIn:null,onFocusOut:null,onKeyboardHandled:null,ignoreParentReadOnly:!1,useResizeObserver:!0})}_defaultOptionsRules(){return[...super._defaultOptionsRules(),{device(){const i=m.real(),{platform:n}=i,{version:s}=i;return n==="ios"&&kn(s,"13.3")<=0},options:{useResizeObserver:!1}}]}_init(){super._init(),this._initContentReadyAction()}_innerWidgetOptionChanged(t,i){const n=Zt.getOptionsFromContainer(i);t&&t.option(n),this._options.cache(i.name,n)}_bindInnerWidgetOptions(t,i){const n=()=>this._options.silent(i,y({},t.option()));n(),t.on("optionChanged",n)}_getAriaTarget(){return this._focusTarget()}_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})}_initMarkup(){const{disabled:t,visible:i}=this.option();this.$element().addClass("dx-widget"),this._toggleDisabledState(t),this._toggleVisibility(i),this._renderHint(),this._isFocusable()&&this._renderFocusTarget(),super._initMarkup()}_render(){super._render(),this._renderContent(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents(),this._toggleIndependentState()}_renderHint(){const{hint:t}=this.option();this.$element().attr("title",t||null)}_renderContent(){re((()=>this._disposed?void 0:this._renderContentImpl())).done((()=>this._disposed?void 0:this._fireContentReadyAction()))}_renderContentImpl(){}_fireContentReadyAction(){return re((()=>{var t;return(t=this._contentReadyAction)===null||t===void 0?void 0:t.call(this)}))}_dispose(){this._contentReadyAction=null,this._detachKeyboardEvents(),super._dispose()}_resetActiveState(){this._toggleActiveState(this._eventBindingTarget(),!1)}_clean(){this._cleanFocusState(),this._resetActiveState(),super._clean(),this.$element().empty()}_toggleVisibility(t){this.$element().toggleClass("dx-state-invisible",!t)}_renderFocusState(){this._attachKeyboardEvents(),this._isFocusable()&&(this._renderFocusTarget(),this._attachFocusEvents(),this._renderAccessKey())}_renderAccessKey(){const t=this._focusTarget(),{accessKey:i}=this.option();t.attr("accesskey",i)}_isFocusable(){const{focusStateEnabled:t,disabled:i}=this.option();return t&&!i}_eventBindingTarget(){return this.$element()}_focusTarget(){return this._getActiveElement()}_isFocusTarget(t){return c(this._focusTarget()).toArray().includes(t)}_findActiveTarget(t){return t.find(this._activeStateUnit).not(".dx-state-disabled")}_getActiveElement(){const t=this._eventBindingTarget();return this._activeStateUnit?this._findActiveTarget(t):t}_renderFocusTarget(){const{tabIndex:t}=this.option();this._focusTarget().attr("tabIndex",t)}_keyboardEventBindingTarget(){return this._eventBindingTarget()}_refreshFocusEvent(){this._detachFocusEvents(),this._attachFocusEvents()}_focusEventTarget(){return this._focusTarget()}_focusInHandler(t){t.isDefaultPrevented()||this._createActionByOption("onFocusIn",{beforeExecute:()=>this._updateFocusState(t,!0),excludeValidators:["readOnly"]})({event:t})}_focusOutHandler(t){t.isDefaultPrevented()||this._createActionByOption("onFocusOut",{beforeExecute:()=>this._updateFocusState(t,!1),excludeValidators:["readOnly","disabled"]})({event:t})}_updateFocusState(t,i){let{target:n}=t;this._isFocusTarget(n)&&this._toggleFocusClass(i,c(n))}_toggleFocusClass(t,i){(i!=null&&i.length?i:this._focusTarget()).toggleClass("dx-state-focused",t)}_hasFocusClass(t){return c(t??this._focusTarget()).hasClass("dx-state-focused")}_isFocused(){return this._hasFocusClass()}_getKeyboardListeners(){return[]}_attachKeyboardEvents(){this._detachKeyboardEvents();const{focusStateEnabled:t,onKeyboardHandled:i}=this.option(),n=this._getKeyboardListeners().length;(t||n||!!i)&&(this._keyboardListenerId=St.on(this._keyboardEventBindingTarget(),this._focusTarget(),(r=>this._keyboardHandler(r))))}_keyboardHandler(t,i){if(!i){const{originalEvent:o,keyName:r,which:a}=t,l=this._supportedKeys(o),d=l[r]||l[a];if(d!==void 0&&!d.bind(this)(o,t))return!1}const n=this._getKeyboardListeners(),{onKeyboardHandled:s}=this.option();return n.forEach((o=>o==null?void 0:o._keyboardHandler(t))),s&&s(t),!0}_refreshFocusState(){this._cleanFocusState(),this._renderFocusState()}_cleanFocusState(){this._focusTarget().removeAttr("tabIndex"),this._toggleFocusClass(!1),this._detachFocusEvents(),this._detachKeyboardEvents()}_detachKeyboardEvents(){St.off(this._keyboardListenerId),this._keyboardListenerId=null}_attachHoverEvents(){const{hoverStateEnabled:t}=this.option(),i=this._activeStateUnit,n=this._eventBindingTarget();ce.off(n,{selector:i,namespace:"UIFeedback"}),t&&ce.on(n,new ft((s=>{let{event:o,element:r}=s;this._hoverStartHandler(o),this.option("hoveredElement",c(r))}),{excludeValidators:["readOnly"]}),(s=>{this.option("hoveredElement",null),this._hoverEndHandler(s)}),{selector:i,namespace:"UIFeedback"})}_attachFeedbackEvents(){const{activeStateEnabled:t}=this.option(),i=this._activeStateUnit,n=this._eventBindingTarget();de.off(n,{namespace:"UIFeedback",selector:i}),t&&de.on(n,new ft((s=>{let{event:o,element:r}=s;return this._toggleActiveState(c(r),!0,o)})),new ft((s=>{let{event:o,element:r}=s;return this._toggleActiveState(c(r),!1,o)}),{excludeValidators:["disabled","readOnly"]}),{showTimeout:this._feedbackShowTimeout,hideTimeout:this._feedbackHideTimeout,selector:i,namespace:"UIFeedback"})}_detachFocusEvents(){const t=this._focusEventTarget();pt.off(t,{namespace:`${this.NAME}Focus`})}_attachFocusEvents(){const t=this._focusEventTarget();pt.on(t,(i=>this._focusInHandler(i)),(i=>this._focusOutHandler(i)),{namespace:`${this.NAME}Focus`,isFocusable:(i,n)=>c(n).is(Ci)})}_hoverStartHandler(t){}_hoverEndHandler(t){}_toggleActiveState(t,i,n){this.option("isActive",i),t.toggleClass("dx-state-active",i)}_updatedHover(){const t=this._options.silent("hoveredElement");this._hover(t,t)}_findHoverTarget(t){return t==null?void 0:t.closest(this._activeStateUnit||this._eventBindingTarget())}_hover(t,i){var n;const{hoverStateEnabled:s,disabled:o,isActive:r}=this.option();if(i=this._findHoverTarget(i),(n=i)===null||n===void 0||n.toggleClass("dx-state-hover",!1),t&&s&&!o&&!r){const a=this._findHoverTarget(t);a==null||a.toggleClass("dx-state-hover",!0)}}_toggleDisabledState(t){this.$element().toggleClass("dx-state-disabled",!!t),this.setAria("disabled",t||void 0)}_toggleIndependentState(){const{ignoreParentReadOnly:t}=this.option();this.$element().toggleClass("dx-state-independent",t)}_setWidgetOption(t,i){if(!this[t])return;if(F(i[0])){g(i[0],((r,a)=>this._setWidgetOption(t,[r,a])));return}const n=i[0];let s=i[1];i.length===1&&(s=this.option(n));const o=this[`${t}OptionMap`];this[t].option(o?o(n):n,s)}_optionChanged(t){const{name:i,value:n,previousValue:s}=t;switch(i){case"disabled":this._toggleDisabledState(n),this._updatedHover(),this._refreshFocusState();break;case"hint":this._renderHint();break;case"ignoreParentReadOnly":this._toggleIndependentState();break;case"activeStateEnabled":this._attachFeedbackEvents();break;case"hoverStateEnabled":this._attachHoverEvents(),this._updatedHover();break;case"tabIndex":case"focusStateEnabled":this._refreshFocusState();break;case"onFocusIn":case"onFocusOut":case"useResizeObserver":break;case"accessKey":this._renderAccessKey();break;case"hoveredElement":this._hover(n,s);break;case"isActive":this._updatedHover();break;case"visible":this._toggleVisibility(n),this._isVisibilityChangeSupported()&&this._checkVisibilityChanged(n?"shown":"hiding");break;case"onKeyboardHandled":this._attachKeyboardEvents();break;case"onContentReady":this._initContentReadyAction();break;default:super._optionChanged(t)}}_isVisible(){const{visible:t}=this.option();return super._isVisible()&&t}beginUpdate(){this._ready(!1),super.beginUpdate()}endUpdate(){super.endUpdate(),this._initialized&&this._ready(!0)}_ready(t){return arguments.length===0?!!this._isReady:(this._isReady=!!t,this._isReady)}setAria(){if(!F(arguments.length<=0?void 0:arguments[0]))we(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],(arguments.length<=2?void 0:arguments[2])||this._getAriaTarget());else{const t=(arguments.length<=1?void 0:arguments[1])||this._getAriaTarget();g(arguments.length<=0?void 0:arguments[0],((i,n)=>we(i,n,t)))}}isReady(){return this._ready()}repaint(){this._refresh()}focus(){pt.trigger(this._focusTarget())}registerKeyHandler(t,i){const n=this._supportedKeys();this._supportedKeys=()=>w({},n,{[t]:i})}}const Hn=e=>{const i=c(e).closest('[class^="dx-swatch-"], [class*=" dx-swatch-"]'),n=Ai();if(!i.length)return n;const s=new RegExp("(\\s|^)(dx-swatch-.*?)(\\s|$)"),o=i[0].className.match(s)[2];let r=n.children(`.${o}`);return r.length||(r=c("<div>").addClass(o).appendTo(n)),r},In={getSwatchContainer:Hn},Vn=K.getWindow(),Ze={top:{my:"top center",at:"top center"},bottom:{my:"bottom center",at:"bottom center"},right:{my:"right center",at:"right center"},left:{my:"left center",at:"left center"},center:{my:"center",at:"center"},"right bottom":{my:"right bottom",at:"right bottom"},"right top":{my:"right top",at:"right top"},"left bottom":{my:"left bottom",at:"left bottom"},"left top":{my:"left top",at:"left top"}},De={h:0,v:0},$n=e=>oi(e);class Fn{constructor(t){const{properties:i,elements:n}=t,{container:s,position:o,visualContainer:r}=i,{$root:a,$content:l,$wrapper:d}=n;this._properties=i,this._$root=a,this._$content=l,this._$wrapper=d,this._$markupContainer=void 0,this._$visualContainer=void 0,this._shouldRenderContentInitialPosition=!0,this._visualPosition=void 0,this._initialPosition=void 0,this._previousVisualPosition=void 0,this.updateContainer(s),this.updatePosition(o),this.updateVisualContainer(r)}get $container(){return this.updateContainer(),this._$markupContainer}get $visualContainer(){return this._$visualContainer}get position(){return this._position}set fixWrapperPosition(t){this._properties._fixWrapperPosition=t,this.styleWrapperPosition()}set restorePosition(t){this._properties.restorePosition=t}updatePosition(t){this._properties.position=t,this._position=this._normalizePosition(t),this.updateVisualContainer()}updateContainer(t){const i=t??this._properties.container;z(t)&&(this._properties.container=i),i?this._$markupContainer=c(i):this._$root&&(this._$markupContainer=In.getSwatchContainer(this._$root)),this.updateVisualContainer(this._properties.visualContainer)}updateVisualContainer(t){z(t)&&(this._properties.visualContainer=t),this._$visualContainer=this._getVisualContainer()}restorePositionOnNextRender(t){this._shouldRenderContentInitialPosition=t||!this._visualPosition}openingHandled(){const t=!!this._properties.restorePosition;this.restorePositionOnNextRender(t)}detectVisualPositionChange(t){this._updateVisualPositionValue(),this._raisePositionedEvents(t)}positionContent(){this._shouldRenderContentInitialPosition?this._renderContentInitialPosition():(Be(this._$content,this._visualPosition),this.detectVisualPositionChange())}positionWrapper(){this._$visualContainer&&Ot.setup(this._$wrapper,{my:"top left",at:"top left",of:this._$visualContainer})}styleWrapperPosition(){var t,i;const o=$((t=this.$visualContainer)===null||t===void 0?void 0:t.get(0))||this._properties._fixWrapperPosition?"fixed":"absolute";(i=this._$wrapper)===null||i===void 0||i.css("position",o)}_updateVisualPositionValue(){this._previousVisualPosition=this._visualPosition,this._visualPosition=Re(this._$content)}_renderContentInitialPosition(){var t,i,n;this._renderBoundaryOffset(),ze(this._$content);const s=((t=this._$wrapper)===null||t===void 0?void 0:t.css("overflow"))??"";if((i=this._$wrapper)===null||i===void 0||i.css("overflow","hidden"),!this._properties._skipContentPositioning){const o=Ot.setup(this._$content,this._position);this._initialPosition=o}(n=this._$wrapper)===null||n===void 0||n.css("overflow",s),this.detectVisualPositionChange()}_raisePositionedEvents(t){var i,n;const s=this._previousVisualPosition,o=this._visualPosition,r=(s==null?void 0:s.top)===(o==null?void 0:o.top),a=(s==null?void 0:s.left)===(o==null?void 0:o.left);if(!(r&&a)){var d,p;(d=(p=this._properties).onVisualPositionChanged)===null||d===void 0||d.call(p,{event:t,previousPosition:s,position:o})}(i=(n=this._properties).onPositioned)===null||i===void 0||i.call(n,{position:this._initialPosition})}_renderBoundaryOffset(){var t,i;const n=((t=this._position)===null||t===void 0?void 0:t.boundaryOffset)??De,{v:s,h:o}=n;s&&o&&((i=this._$content)===null||i===void 0||i.css("margin",`${n.v}px ${n.h}px`))}_getVisualContainer(){var t,i,n;const s=this._properties.container,o=this._properties.visualContainer,r=si((t=this._properties.position)===null||t===void 0?void 0:t.of)?(i=this._properties.position)===null||i===void 0||(i=i.of)===null||i===void 0?void 0:i.target:(n=this._properties.position)===null||n===void 0?void 0:n.of;return o?c(o):s?c(s):r?c(r):c(Vn)}_normalizePosition(t){const i={boundaryOffset:De};if(z(t)){const n=this._positionToObject(t);return y(!0,{},i,n)}return i}_positionToObject(t){return $n(t)?w({},Ze[t]):t}}let J=1500,k=[];const Rn=e=>(J=yt(e,J),J),Wn=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;const{length:t}=k,i=(t?k[t-1]:e)+1;return k.push(i),i},Pe=e=>{const t=k.indexOf(e);t>=0&&k.splice(t,1)},qn=e=>k.length?k[k.length-1]===e:!1,Bn=Bt.add,R=K.getWindow(),Oe=Si,$t=[];Bn((()=>{f.subscribeGlobal(A.getDocument(),I.down,(e=>{for(let n=$t.length-1;n>=0;n-=1){var t,i;if(!((t=(i=$t[n])._proxiedDocumentDownHandler)!==null&&t!==void 0&&t.call(i,e)))return}}))}));class Qt extends Zt{_supportedKeys(){return w({},super._supportedKeys(),{escape(){this.hide()}})}_getDefaultOptions(){return w({},super._getDefaultOptions(),{activeStateEnabled:!1,visible:!1,deferRendering:!0,shading:!0,shadingColor:"",wrapperAttr:{},position:w({},Ze.center),width:"80vw",minWidth:null,maxWidth:null,height:"80vh",minHeight:null,maxHeight:null,animation:{show:{type:"pop",duration:300,from:{scale:.55}},hide:{type:"pop",duration:300,from:{opacity:1,scale:1},to:{opacity:0,scale:.55}}},hideOnOutsideClick:!1,onShowing:null,onShown:null,onHiding:null,onHidden:null,contentTemplate:"content",innerOverlay:!1,restorePosition:!0,hideOnParentScroll:!1,preventScrollEvents:!0,onPositioned:null,propagateOutsideClick:!1,ignoreChildEvents:!0,_checkParentVisibility:!0,_fixWrapperPosition:!1,_loopFocus:!1,_ignorePreventScrollEventsDeprecation:!1,hideTopOverlayHandler:()=>{this.hide()}})}_defaultOptionsRules(){return[...super._defaultOptionsRules(),{device:()=>!K.hasWindow(),options:{width:null,height:null,animation:null,_checkParentVisibility:!1}}]}_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=w({},this._optionsByReference,{animation:!0})}$wrapper(){return this._$wrapper}_eventBindingTarget(){return this._$content}ctor(t,i){super.ctor(t,i),i&&"preventScrollEvents"in i&&!i._ignorePreventScrollEventsDeprecation&&this._logDeprecatedPreventScrollEventsInfo()}_logDeprecatedPreventScrollEventsInfo(){this._logDeprecatedOptionWarning("preventScrollEvents",{since:"23.1",message:"If you enable this option, end-users may experience scrolling issues."})}_init(){super._init(),this._initActions(),this._initHideOnOutsideClickHandler(),this._initTabTerminatorHandler(),this._customWrapperClass=null,this._$wrapper=c("<div>").addClass("dx-overlay-wrapper"),this._$content=c("<div>").addClass("dx-overlay-content"),this._initInnerOverlayClass(),this.$element().addClass("dx-overlay"),this._$wrapper.attr("data-bind","dxControlsDescendantBindings: true"),this._toggleViewPortSubscription(!0);const{hideTopOverlayHandler:i}=this.option();this._initHideTopOverlayHandler(i),this._parentsScrollSubscriptionInfo={handler:n=>{this._hideOnParentsScrollHandler(n)}},this.warnPositionAsFunction()}warnPositionAsFunction(){const{position:t}=this.option();O(t)&&Ft.log("W0018")}_initInnerOverlayClass(){const{innerOverlay:t}=this.option();this._$content.toggleClass("dx-inner-overlay",t)}_initHideTopOverlayHandler(t){t&&(this._hideTopOverlayHandler=t)}_getActionsList(){return["onShowing","onShown","onHiding","onHidden","onPositioned","onVisualPositionChanged"]}_initActions(){this._actions={};const t=this._getActionsList();g(t,((i,n)=>{this._actions&&(this._actions[n]=this._createActionByOption(n,{excludeValidators:["disabled","readOnly"]})||_)}))}_initHideOnOutsideClickHandler(){this._proxiedDocumentDownHandler=t=>this._documentDownHandler(t)}_initMarkup(){super._initMarkup(),this._renderWrapperAttributes(),this._initPositionController()}_documentDownHandler(t){this._showAnimationProcessing&&this._stopAnimation();const{target:i}=t,n=c(i),s=V.contains(R.document,i),o=c(R.document).is(n)||s,r=c(n).closest(".dx-inner-overlay").length,a=this._$content.is(n),l=V.contains(this._$content.get(0),i);o&&!r&&!(a||l)&&this._shouldHideOnOutsideClick(t)&&this._outsideClickHandler(t);const{propagateOutsideClick:p}=this.option();return!!p}_shouldHideOnOutsideClick(t){const{hideOnOutsideClick:i}=this.option();return O(i)?i(t):!!i}_outsideClickHandler(t){const{shading:i}=this.option();i&&t.preventDefault(),this.hide()}_getAnonymousTemplateName(){return"content"}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Ei}),super._initTemplates()}_isTopOverlay(){const t=this._overlayStack();for(let i=t.length-1;i>=0;i-=1){const n=t[i]._findTabbableBounds();if(n.$first||n.$last)return t[i]===this}return!1}_overlayStack(){return $t}_zIndexInitValue(){return Qt.baseZIndex()}_toggleViewPortSubscription(t){this._viewPortChangeHandle&&Oe.remove(this._viewPortChangeHandle),t&&(this._viewPortChangeHandle=()=>{this._viewPortChangeHandler()},Oe.add(this._viewPortChangeHandle))}_viewPortChangeHandler(){const{container:t}=this.option();this._positionController.updateContainer(t),this._refresh()}_renderWrapperAttributes(){const{wrapperAttr:t}=this.option(),i=w({},t),n=i.class;delete i.class;const s=this.$wrapper();s.attr(i),this._customWrapperClass&&s.removeClass(this._customWrapperClass),s.addClass(n),this._customWrapperClass=n}_renderVisibilityAnimate(t){return this._stopAnimation(),t?this._show():this._hide()}_getAnimationConfig(){return this._getOptionValue("animation",this)??{}}_toggleBodyScroll(t){}_animateShowing(){const t=this._getAnimationConfig(),i=this._normalizeAnimation(t.show,"to"),n=(i==null?void 0:i.start)??_,s=(i==null?void 0:i.complete)??_;this._animate(i,((o,r)=>{var a,l;if(this._isAnimationPaused)return;const{focusStateEnabled:d}=this.option();d&&f.trigger(this._focusTarget(),"focus"),s.call(this,o,r),this._showAnimationProcessing=!1,this._isHidden=!1,(a=this._actions)===null||a===void 0||(l=a.onShown)===null||l===void 0||l.call(a),this._toggleSafariScrolling(),this._showingDeferred.resolve()}),((o,r)=>{this._isAnimationPaused||(n.call(this,o,r),this._showAnimationProcessing=!0)}))}_processShowingHidingCancel(t,i,n){ri(t)?t.then((s=>{s?n():i()})).catch((()=>i())):t?n():i()}_show(){return this._showingDeferred=v(),this._parentHidden=this._isParentHidden(),this._showingDeferred.done((()=>{delete this._parentHidden})),this._parentHidden?(this._isHidden=!0,this._showingDeferred.resolve()):this._currentVisible?v().resolve().promise():(this._currentVisible=!0,this._isHidingActionCanceled?(delete this._isHidingActionCanceled,this._showingDeferred.reject()):(()=>{var i,n;this._stopAnimation();const{enableBodyScroll:s}=this.option();this._toggleBodyScroll(s),this._toggleVisibility(!0),this._$content.css("visibility","hidden"),this._$content.toggleClass("dx-state-invisible",!1),this._updateZIndexStackPosition(!0),this._positionController.openingHandled(),this._renderContent();const o={cancel:!1};(i=this._actions)===null||i===void 0||(n=i.onShowing)===null||n===void 0||n.call(i,o),this._processShowingHidingCancel(o.cancel,(()=>{this._$content.css("visibility",""),this._renderVisibility(!0),this._animateShowing()}),(()=>{this._toggleVisibility(!1),this._$content.css("visibility",""),this._$content.toggleClass("dx-state-invisible",!0),this._isShowingActionCanceled=!0,this._moveFromContainer(),this._toggleBodyScroll(!0),this.option("visible",!1),this._showingDeferred.resolve()}))})(),this._showingDeferred.promise())}_normalizeAnimation(t,i){if(!t)return;const n=w({type:"slide",skipElementInitialStyles:!0},t);return ai(n[i])&&y(n[i],{position:this._positionController.position}),n}_animateHiding(){const t=this._getAnimationConfig(),i=this._normalizeAnimation(t.hide,"from"),n=(i==null?void 0:i.start)??_,s=(i==null?void 0:i.complete)??_;this._animate(i,((o,r)=>{var a,l;this._$content.css("pointerEvents",""),this._renderVisibility(!1),s.call(this,o,r),this._hideAnimationProcessing=!1,(a=this._actions)===null||a===void 0||(l=a.onHidden)===null||l===void 0||l.call(a),this._hidingDeferred.resolve()}),((o,r)=>{this._$content.css("pointerEvents","none"),n.call(this,o,r),this._hideAnimationProcessing=!0}))}_hide(){if(!this._currentVisible)return v().resolve().promise();this._currentVisible=!1,this._hidingDeferred=v();const t={cancel:!1};if(this._isShowingActionCanceled)delete this._isShowingActionCanceled,this._hidingDeferred.reject();else{var i,n;(i=this._actions)===null||i===void 0||(n=i.onHiding)===null||n===void 0||n.call(i,t),this._toggleSafariScrolling(),this._toggleBodyScroll(!0);const s=()=>{this._isHidingActionCanceled=!0;const{enableBodyScroll:r}=this.option();this._toggleBodyScroll(r),this.option("visible",!0),this._hidingDeferred.resolve()},o=()=>{this._forceFocusLost(),this._toggleShading(!1),this._toggleSubscriptions(!1),this._animateHiding()};this._processShowingHidingCancel(t.cancel,o,s)}return this._hidingDeferred.promise()}_forceFocusLost(){const t=A.getActiveElement();!!this._$content.find(t).length&&V.resetActiveElement()}_animate(t,i,n){if(t){const s=n??t.start??_,o=w({},t,{start:s,complete:i});E.animate(this._$content.get(0),o)}else i()}_stopAnimation(){E.stop(this._$content.get(0),!0)}_renderVisibility(t){t&&this._isParentHidden()||(this._currentVisible=t,this._stopAnimation(),t||Ti(this._$content),t?(this._checkContainerExists(),this._moveToContainer(),this._renderGeometry(),xi(this._$content),he(this._$content)):(this._toggleVisibility(t),this._$content.toggleClass("dx-state-invisible",!t),this._updateZIndexStackPosition(t),this._moveFromContainer()),this._toggleShading(t),this._toggleSubscriptions(t))}_updateZIndexStackPosition(t){const i=this._overlayStack(),n=i.indexOf(this);t?(n===-1&&(this._zIndex=Wn(this._zIndexInitValue()),i.push(this)),this._$wrapper.css("zIndex",this._zIndex),this._$content.css("zIndex",this._zIndex)):n!==-1&&(i.splice(n,1),Pe(this._zIndex))}_toggleShading(t){const{shading:i,shadingColor:n}=this.option();this._$wrapper.toggleClass("dx-overlay-shader",t&&i),this._$wrapper.css("backgroundColor",i?n??"":""),this._toggleTabTerminator(!!(t&&i))}_initTabTerminatorHandler(){this._proxiedTabTerminatorHandler=t=>{this._tabKeyHandler(t)}}_toggleTabTerminator(t){const{_loopFocus:i}=this.option(),n=S("keydown",this.NAME);i||t?f.on(A.getDocument(),n,this._proxiedTabTerminatorHandler):this._destroyTabTerminator()}_destroyTabTerminator(){const t=S("keydown",this.NAME);f.off(A.getDocument(),t,this._proxiedTabTerminatorHandler)}_findTabbableBounds(){const t=this._$wrapper.find("*"),i=t.length-1;let n=null,s=null;for(let o=0;o<=i;o+=1){const r=t.eq(o),a=t.eq(i-o);if(!n&&r.is(ue.tabbable)&&(n=r),!s&&a.is(ue.tabbable)&&(s=a),n&&s)break}return{$first:n,$last:s}}_tabKeyHandler(t){if(wi(t)!=="tab"||!this._isTopOverlay())return;const i=this._$wrapper.get(0),n=A.getActiveElement(i),{$first:s,$last:o}=this._findTabbableBounds(),r=!t.shiftKey&&n===(o==null?void 0:o.get(0)),a=t.shiftKey&&n===(s==null?void 0:s.get(0)),l=!V.contains(i,n);if(r||a||l){t.preventDefault();const p=t.shiftKey?o:s;f.trigger(p,"focusin"),f.trigger(p,"focus")}}_toggleSubscriptions(t){K.hasWindow()&&(this._toggleHideTopOverlayCallback(t),this._toggleHideOnParentsScrollSubscription(t))}_toggleHideTopOverlayCallback(t){this._hideTopOverlayHandler&&(t?_e.add(this._hideTopOverlayHandler):_e.remove(this._hideTopOverlayHandler))}_toggleHideOnParentsScrollSubscription(t){const i=S("scroll",this.NAME),n=this._parentsScrollSubscriptionInfo??{},{prevTargets:s,handler:o}=n;f.off(s,i,o);const{hideOnParentScroll:r}=this.option();if(t&&r){let a=this._getHideOnParentScrollTarget().parents();m.real().deviceType==="desktop"&&(a=a.add(R)),f.on(a,i,o),this._parentsScrollSubscriptionInfo=w({},n,{prevTargets:a})}}_hideOnParentsScrollHandler(t){let i=!1;const{hideOnParentScroll:n}=this.option();O(n)&&(i=n(t)),!i&&!this._showAnimationProcessing&&this.hide()}_getHideOnParentScrollTarget(){const{_hideOnParentScrollTarget:t}=this.option(),i=c(t);return i.length?i:this._$wrapper}_render(){super._render(),this._appendContentToElement(),this._renderVisibilityAnimate(this._isVisible())}_appendContentToElement(){this._$content.parent().is(this.$element())||this._$content.appendTo(this.$element())}_renderContent(){const{deferRendering:t}=this.option(),i=!this._currentVisible&&t;if(this._isVisible()&&this._isParentHidden()){this._isHidden=!0;return}this._contentAlreadyRendered||i||(this._contentAlreadyRendered=!0,this._appendContentToElement(),super._renderContent())}_isParentHidden(){const{_checkParentVisibility:t}=this.option();if(!t)return!1;if(this._parentHidden!==void 0)return this._parentHidden;const i=this.$element().parent();if(i.is(":visible"))return!1;let n=!1;return i.add(i.parents()).each(((s,o)=>{if(c(o).css("display")==="none")return n=!0,!1})),n||!A.getBody().contains(i.get(0))}_renderContentImpl(){const{contentTemplate:t}=this.option(),i=v(),n=this._getTemplate(t),s=this._templateManager.anonymousTemplateName===t;n==null||n.render({container:tt(this.$content()),noModel:!0,transclude:s,onRendered:()=>{i.resolve();const{templatesRenderAsynchronously:r}=this.option();r&&this._dimensionChanged()}});const{preventScrollEvents:o}=this.option();return this._toggleWrapperScrollEventsSubscription(o),i.done((()=>{this._processContentRendering()})),i.promise()}_processContentRendering(){this._isVisible()&&this._moveToContainer()}_getPositionControllerConfig(){var t,i;const{container:n,visualContainer:s,restorePosition:o,_fixWrapperPosition:r,_skipContentPositioning:a}=this.option(),l={container:n,visualContainer:s,restorePosition:o,_fixWrapperPosition:r,_skipContentPositioning:a,onPositioned:(t=this._actions)===null||t===void 0?void 0:t.onPositioned,onVisualPositionChanged:(i=this._actions)===null||i===void 0?void 0:i.onVisualPositionChanged},d={$root:this.$element(),$content:this._$content,$wrapper:this._$wrapper};return{properties:l,elements:d}}_initPositionController(){this._positionController=new Fn(this._getPositionControllerConfig())}_toggleWrapperScrollEventsSubscription(t){const i=S(Tn,this.NAME);if(f.off(this._$wrapper,i),t){const n=o=>{const{originalEvent:r}=o.originalEvent,{type:a}=r??{},l=a==="wheel",d=a==="mousemove",p=l&&Pi(o);o._cancelPreventDefault=!0,r&&o.cancelable!==!1&&!(d||p)&&o.preventDefault()},s={validate:()=>!0,getDirection:()=>"both",_toggleGestureCover(o){o||this._toggleGestureCoverImpl(o)},_clearSelection:_,isNative:!0};f.on(this._$wrapper,i,s,n)}}_moveFromContainer(){this._$content.appendTo(this.$element()),this._$wrapper.detach()}_checkContainerExists(){const t=this._positionController.$container;if(t===void 0)return;t.length>0||Di.log("W1021",this.NAME)}_moveToContainer(){const t=this._positionController.$container;t!==void 0&&this._$wrapper.appendTo(t),this._$content.appendTo(this._$wrapper)}_renderGeometry(){this._isVisible()&&K.hasWindow()&&(this._stopAnimation(),this._renderGeometryImpl())}_renderGeometryImpl(){this._positionController.updatePosition(this._getOptionValue("position")),this._renderWrapper(),this._renderDimensions(),this._renderPosition()}_renderPosition(t){this._positionController.positionContent()}_isAllWindowCovered(){var t;const{shading:i}=this.option(),n=(t=this._positionController.$visualContainer)===null||t===void 0?void 0:t.get(0);return $(n)&&!!i}_toggleSafariScrolling(){const t=this._isVisible(),i=c(A.getBody()),n=m.real().platform==="ios"&&Ve.safari,s=this._isAllWindowCovered(),o=i.hasClass("dx-prevent-safari-scrolling"),r=!o&&t&&s,a=o&&(!t||!s||this._disposed);n&&(a?(i.removeClass("dx-prevent-safari-scrolling"),R.scrollTo(0,this._cachedBodyScrollTop),this._cachedBodyScrollTop=void 0):r&&(this._cachedBodyScrollTop=R.pageYOffset,i.addClass("dx-prevent-safari-scrolling")))}_renderWrapper(){this._positionController.styleWrapperPosition(),this._renderWrapperDimensions(),this._positionController.positionWrapper()}_renderWrapperDimensions(){const{$visualContainer:t}=this._positionController,i=A.getDocumentElement(),n=$(t==null?void 0:t.get(0)),s=n?i.clientWidth:bt(t),o=n?R.innerHeight:Ct(t);this._$wrapper.css({width:s,height:o})}_renderDimensions(){const t=this._$content.get(0);this._$content.css({minWidth:this._getOptionValue("minWidth",t),maxWidth:this._getOptionValue("maxWidth",t),minHeight:this._getOptionValue("minHeight",t),maxHeight:this._getOptionValue("maxHeight",t),width:this._getOptionValue("width",t),height:this._getOptionValue("height",t)})}_focusTarget(){return this._$content}_attachKeyboardEvents(){this._keyboardListenerId=St.on(this._$content,null,(t=>this._keyboardHandler(t)))}_keyboardHandler(t,i){const n=t.originalEvent,s=c(n.target),{ignoreChildEvents:o}=this.option();(s.is(this._$content)||!o)&&super._keyboardHandler(t,i)}_isVisible(){return!!this.option("visible")}_visibilityChanged(t){t?this._isVisible()&&this._renderVisibilityAnimate(t):this._renderVisibilityAnimate(t)}_dimensionChanged(){this._renderGeometry()}_clean(){this._contentAlreadyRendered||this.$content().empty(),this._renderVisibility(!1),this._cleanFocusState()}_dispose(){E.stop(this._$content.get(0),!1),this._toggleViewPortSubscription(!1),this._toggleSubscriptions(!1),this._updateZIndexStackPosition(!1),this._actions={},this._parentsScrollSubscriptionInfo=void 0,super._dispose(),this._toggleSafariScrolling(),this._isVisible()&&Pe(this._zIndex),this._$wrapper.remove(),this._$content.remove(),this._destroyTabTerminator()}_toggleRTLDirection(t){this._$content.toggleClass("dx-rtl",t)}_optionChanged(t){const{value:i,name:n}=t;if(this._getActionsList().includes(n)){this._initActions();return}switch(n){case"animation":case"hideOnOutsideClick":case"propagateOutsideClick":break;case"_loopFocus":case"shading":this._toggleShading(this._isVisible()),this._toggleSafariScrolling();break;case"shadingColor":this._toggleShading(this._isVisible());break;case"width":case"height":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":this._renderGeometry();break;case"position":{const{position:s}=this.option();this._positionController.updatePosition(s),this._positionController.restorePositionOnNextRender(!0),this._renderGeometry(),this._toggleSafariScrolling();break}case"visible":this._renderVisibilityAnimate(!!i).done((()=>{var s;return(s=this._animateDeferred)===null||s===void 0?void 0:s.resolveWith(this)})).fail((()=>{var s;return(s=this._animateDeferred)===null||s===void 0?void 0:s.reject()}));break;case"container":this._positionController.updateContainer(i),this._invalidate(),this._toggleSafariScrolling();break;case"visualContainer":this._positionController.updateVisualContainer(i),this._renderWrapper(),this._toggleSafariScrolling();break;case"innerOverlay":this._initInnerOverlayClass();break;case"deferRendering":case"contentTemplate":this._contentAlreadyRendered=!1,this._clean(),this._invalidate();break;case"hideTopOverlayHandler":this._toggleHideTopOverlayCallback(!1),this._initHideTopOverlayHandler(i),this._toggleHideTopOverlayCallback(this._isVisible());break;case"hideOnParentScroll":case"_hideOnParentScrollTarget":this._toggleHideOnParentsScrollSubscription(this._isVisible());break;case"rtlEnabled":this._contentAlreadyRendered=!1,super._optionChanged(t);break;case"_fixWrapperPosition":this._positionController.fixWrapperPosition=i;break;case"wrapperAttr":this._renderWrapperAttributes();break;case"restorePosition":this._positionController.restorePosition=i;break;case"preventScrollEvents":this._logDeprecatedPreventScrollEventsInfo(),this._toggleWrapperScrollEventsSubscription(i);break;default:super._optionChanged(t)}}toggle(t){const i=this._isVisible(),n=t??!i,s=v();if(n===i)return s.resolveWith(this,[n]).promise();const o=v();return this._animateDeferred=o,this.option("visible",n),o.promise().done((()=>{delete this._animateDeferred,s.resolveWith(this,[this._isVisible()])})).fail((()=>{delete this._animateDeferred,s.reject()})),s.promise()}$content(){return this._$content}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}content(){return tt(this._$content)}repaint(){this._contentAlreadyRendered?(this._positionController.restorePositionOnNextRender(!0),this._renderGeometry({forceStopAnimation:!0}),he(this._$content)):super.repaint()}static baseZIndex(t){return Rn(t)}}Oi("dxOverlay",Qt);export{Kn as A,Mn as C,Un as D,Mt as E,Xn as F,Ut as G,Qt as O,Zt as W,Tn as a,jn as b,Ri as c,ze as d,Fn as e,E as f,Nn as g,Wn as h,qn as i,Pe as j,Gn as k,Re as l,Be as m,jt as n,Xt as o,Ot as p,qt as q,Kt as r,In as s};
