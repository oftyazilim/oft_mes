import{dD as c,dg as L,bd as z,db as D,dq as W}from"./main-a5TZ7bT9.js";import{u as n,aq as K,V as g,X as f,g as b,p as x,ag as M,e as l,aG as P,ar as r,ae as y,q as J,j as X,C as j,an as I,am as C,b6 as Y}from"./overlay-CPHJx6aV.js";import{av as h,aw as E,F as Q,B as u,C as Z,d as tt,P as et}from"./m_select_box-B67HaXIb.js";import{i as H,c as k}from"./themes-CPMmBKdn.js";import{P as it}from"./m_popover-C3_lVfoK.js";const w="dx-list-context-menu";class st extends E{_init(){const t=n("<div>").addClass(w);this._list.$element().append(t),this._menu=this._renderOverlay(t)}_renderOverlay(t){return this._list._createComponent(t,K,{shading:!1,deferRendering:!0,hideOnParentScroll:!0,hideOnOutsideClick:e=>!n(e.target).closest(`.${w}`).length,animation:{show:{type:"slide",duration:300,from:{height:0,opacity:1},to:{height:()=>f(this._$menuList),opacity:1}},hide:{type:"slide",duration:0,from:{opacity:1},to:{opacity:0}}},_ignoreFunctionValueDeprecation:!0,height:()=>this._$menuList?f(this._$menuList):0,width:()=>g(this._list.$element()),onContentReady:e=>{this._renderMenuContent(e)}})}_renderMenuContent(t){const e=n(t.component.content()),{menuItems:i=[],allowItemDeleting:s}=this._list.option(),o=i.slice();s&&o.push({text:c.format("dxListEditDecorator-delete"),action:this._deleteItem.bind(this)}),this._$menuList=n("<div>"),this._list._createComponent(this._$menuList,Q,{items:o,onItemClick:a=>{this._menuItemClickHandler(a)},height:"auto",integrationOptions:{}}),e.addClass("dx-list-context-menucontent"),e.append(this._$menuList)}_menuItemClickHandler(t){this._menu.hide(),this._list._itemEventHandlerByHandler(n(this._$itemWithMenu),t.itemData.action,{},{excludeValidators:["disabled","readOnly"]})}_deleteItem(){this._$itemWithMenu&&this._list.deleteItem(this._$itemWithMenu.get(0))}handleContextMenu(t){return this._$itemWithMenu=t,this._menu.option({position:{my:"top",at:"bottom",of:t,collision:"flip"}}),this._menu.show(),!0}dispose(){this._menu&&this._menu.$element().remove(),super.dispose()}}h("menu","context",st);const U="dxListEditDecorator",B=b(x.down,U),A=b(M,U),$="dx-list-switchable-delete-ready",nt="dx-list-switchable-menu-shield-positioning",ot="dx-list-switchable-delete-top-shield",at="dx-list-switchable-delete-bottom-shield",O="dx-list-switchable-menu-item-shield-positioning",lt="dx-list-switchable-delete-item-content-shield",dt="dx-list-switchable-delete-button-container";class V extends E{_init(){this._$topShield=n("<div>").addClass(ot),this._$bottomShield=n("<div>").addClass(at),this._$itemContentShield=n("<div>").addClass(lt),l.on(this._$topShield,B,(()=>{this._cancelDeleteReadyItem()})),l.on(this._$bottomShield,B,(()=>{this._cancelDeleteReadyItem()})),this._list.$element().append(this._$topShield.toggle(!1)).append(this._$bottomShield.toggle(!1))}handleClick(t,e){return this._cancelDeleteReadyItem()}_cancelDeleteReadyItem(){return this._$readyToDeleteItem?(this._cancelDelete(this._$readyToDeleteItem),!0):!1}_cancelDelete(t){this._toggleDeleteReady(t,!1)}_toggleDeleteReady(t,e){const i=e??!this._isReadyToDelete(t);this._toggleShields(t,i),this._toggleScrolling(i),this._cacheReadyToDeleteItem(t,i),this._animateToggleDelete(t,i)}_isReadyToDelete(t){return t.hasClass($)}_toggleShields(t,e){this._list.$element().toggleClass(nt,e),this._$topShield.toggle(e),this._$bottomShield.toggle(e),e&&this._updateShieldsHeight(t),this._toggleContentShield(t,e)}_updateShieldsHeight(t){var e,i;const s=this._list.$element(),o=((e=s.offset())===null||e===void 0?void 0:e.top)??0,a=f(s),p=((i=t.offset())===null||i===void 0?void 0:i.top)??0,m=f(t),T=p-o,S=a-m-T;P(this._$topShield,Math.max(T,0)),P(this._$bottomShield,Math.max(S,0))}_toggleContentShield(t,e){e?t.find(".dx-list-item-content").first().append(this._$itemContentShield):this._$itemContentShield.detach()}_toggleScrolling(t){const e=this._list._scrollView;t?e.on("start",this._cancelScrolling):e.off("start",this._cancelScrolling)}_cancelScrolling(t){t.event&&(t.event.cancel=!0)}_cacheReadyToDeleteItem(t,e){e?this._$readyToDeleteItem=t:delete this._$readyToDeleteItem}_animateToggleDelete(t,e){e?(this._enablePositioning(t),this._prepareDeleteReady(t),this._animatePrepareDeleteReady(t),l.off(t,x.up)):(this._forgetDeleteReady(t),this._animateForgetDeleteReady(t).done(this._disablePositioning.bind(this,t)))}_enablePositioning(t){t.addClass(O),l.on(t,A,L),l.one(t,x.up,this._disablePositioning.bind(this,t))}_disablePositioning(t){t.removeClass(O),l.off(t,A)}_prepareDeleteReady(t){t.addClass($)}_forgetDeleteReady(t){t.removeClass($)}_getDeleteButtonContainer(t){return(t||this._$readyToDeleteItem).children(`.${dt}`)}_deleteItem(t){const e=t??this._$readyToDeleteItem;e&&(this._getDeleteButtonContainer(e).detach(),!e.is(".dx-state-disabled, .dx-state-disabled *")&&this._list.deleteItem(e.get(0)).always(this._cancelDelete.bind(this,e)))}_isRtlEnabled(){const{rtlEnabled:t=!1}=this._list.option();return t}dispose(){this._$topShield&&this._$topShield.remove(),this._$bottomShield&&this._$bottomShield.remove(),super.dispose()}}const rt="dx-list-switchable-delete-button-container",ht="dx-list-switchable-delete-button-wrapper",_t="dx-list-switchable-delete-button-inner-wrapper",ct="dx-list-switchable-delete-button";class G extends V{_init(){super._init();const t=n("<div>").addClass(rt),e=n("<div>").addClass(ht),i=n("<div>").addClass(_t),s=n("<div>").addClass(ct);this._list._createComponent(s,u,{text:c.format("dxListEditDecorator-delete"),type:"danger",stylingMode:H(k())?"text":"contained",onClick:o=>{this._deleteItem();const{event:a}=o;a==null||a.stopPropagation()},integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),t.append(e),e.append(i),i.append(s),this._$buttonContainer=t}_enablePositioning(t){super._enablePositioning(t),r.stop(this._$buttonContainer.get(0),!0),this._$buttonContainer.appendTo(t)}_disablePositioning(t){t&&super._disablePositioning(t),this._$buttonContainer.detach()}_animatePrepareDeleteReady(){const t=this._isRtlEnabled(),e=y(this._list.$element()),i=this._buttonWidth(),s=t?e:-i,o=t?e-i:0;return r.animate(this._$buttonContainer.get(0),{type:"custom",duration:200,from:{right:s},to:{right:o}})}_animateForgetDeleteReady(){const t=this._isRtlEnabled(),e=y(this._list.$element()),i=this._buttonWidth(),s=t?e-i:0,o=t?e:-i;return r.animate(this._$buttonContainer.get(0),{type:"custom",duration:200,from:{right:s},to:{right:o}})}_buttonWidth(){return this._buttonContainerWidth||(this._buttonContainerWidth=g(this._$buttonContainer)),this._buttonContainerWidth}dispose(){this._$buttonContainer&&this._$buttonContainer.remove(),super.dispose()}}const ut="dx-list-toggle-delete-switch-container",pt="dx-list-toggle-delete-switch";class mt extends G{beforeBag(t){const{$itemElement:e,$container:i}=t,s=n("<div>").addClass(pt);this._list._createComponent(s,u,{icon:"toggle-delete",onClick:o=>{var a;r.stop(this._$buttonContainer.get(0),!1),this._toggleDeleteReady(e),(a=o.event)===null||a===void 0||a.stopPropagation()},integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),i.addClass(ut),i.append(s)}}h("delete","toggle",mt);class Ct extends G{_shouldHandleSwipe(){return!0}_swipeEndHandler(t,e){e.targetOffset!==0&&(r.stop(this._$buttonContainer.get(0),!1),this._toggleDeleteReady(t))}}h("delete","slideButton",Ct);const _=X();class F extends Z{_getDefaultOptions(){return z({},super._getDefaultOptions(),{usePopover:!1,target:null,title:"",showTitle:!0,showCancelButton:!0,cancelText:c.format("Cancel"),onCancelClick:null,visible:!1,noDataText:"",focusStateEnabled:!1,selectByClick:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios",tablet:!0},options:{usePopover:!0}}])}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({item:new tt(((t,e)=>{const i=new u(n("<div>"),D({onClick:e==null?void 0:e.click,stylingMode:(e==null?void 0:e.stylingMode)||"outlined"},e));t.append(i.$element())}),["disabled","icon","text","type","onClick","click","stylingMode"],this.option("integrationOptions.watchMethod"))})}_itemContainer(){return this._$itemContainer}_itemClass(){return"dx-actionsheet-item"}_itemDataKey(){return"dxActionSheetItemData"}_toggleVisibility(){}_renderDimensions(){}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-actionsheet"),this._createItemContainer()}_render(){this._renderPopup()}_createItemContainer(){this._$itemContainer=n("<div>").addClass("dx-actionsheet-container"),this._renderDisabled()}_renderDisabled(){const{disabled:t}=this.option();this._$itemContainer.toggleClass("dx-state-disabled",t)}_renderPopup(){this._$popup=n("<div>").appendTo(this.$element()),this._isPopoverMode()?this._createPopover():this._createPopup(),this._renderPopupTitle(),this._mapPopupOption("visible")}_mapPopupOption(t){var e;(e=this._popup)===null||e===void 0||e.option(t,this.option(t))}_isPopoverMode(){const{usePopover:t,target:e}=this.option();return!!(t&&e)}_renderPopupTitle(){var t;this._mapPopupOption("showTitle"),(t=this._popup)===null||t===void 0||t.$wrapper().toggleClass("dx-actionsheet-without-title",!this.option("showTitle"))}_clean(){this._$popup&&this._$popup.remove(),super._clean()}_overlayConfig(){const{title:t}=this.option();return{onInitialized:e=>{this._popup=e.component},disabled:!1,showTitle:!0,title:t,deferRendering:!0,onContentReady:this._popupContentReadyAction.bind(this),onHidden:()=>{this.hide()}}}_createPopover(){this._createComponent(this._$popup,it,D(this._overlayConfig(),{width:this.option("width")||200,height:this.option("height")||"auto",target:this.option("target")})),this._popup.$overlayContent().attr("role","dialog"),this._popup.$wrapper().addClass("dx-actionsheet-popover-wrapper")}_createPopup(){this._createComponent(this._$popup,et,D(this._overlayConfig(),{dragEnabled:!1,width:this.option("width")||"100%",height:this.option("height")||"auto",showCloseButton:!1,position:{my:"bottom",at:"bottom",of:_},animation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom",of:_}},to:{position:{my:"bottom",at:"bottom",of:_}}},hide:{type:"slide",duration:400,from:{position:{my:"bottom",at:"bottom",of:_}},to:{position:{my:"top",at:"bottom",of:_}}}}})),this._popup.$wrapper().addClass("dx-actionsheet-popup-wrapper")}_popupContentReadyAction(){this._popup.$content().append(this._$itemContainer),this._attachClickEvent(),this._attachHoldEvent(),this._prepareContent(),this._renderContent(),this._renderCancelButton()}_renderCancelButton(){if(this._isPopoverMode())return;this._$cancelButton&&this._$cancelButton.remove();const{showCancelButton:t,cancelText:e}=this.option();if(t){var i;const s=this._createActionByOption("onCancelClick")||L;this._$cancelButton=n("<div>").addClass("dx-actionsheet-cancel").appendTo((i=this._popup)===null||i===void 0?void 0:i.$content()),this._createComponent(this._$cancelButton,u,{disabled:!1,stylingMode:"outlined",text:e,onClick:o=>{const a={event:o,cancel:!1};s(a),a.cancel||this.hide()},integrationOptions:{}})}}_attachItemClickEvent(){}_itemClickHandler(t){super._itemClickHandler(t),n(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()}_itemHoldHandler(t){super._itemHoldHandler(t),n(t.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()}_optionChanged(t){const{name:e}=t;switch(e){case"width":case"height":case"visible":case"title":this._mapPopupOption(e);break;case"disabled":this._renderDisabled();break;case"showTitle":this._renderPopupTitle();break;case"showCancelButton":case"onCancelClick":case"cancelText":this._renderCancelButton();break;case"target":case"usePopover":case"items":this._invalidate();break;default:super._optionChanged(t)}}toggle(t){const e=W();return this._popup.toggle(t).done((()=>{this.option("visible",t),e.resolveWith(this)})),e.promise()}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}J("dxActionSheet",F);const q="dxListEditDecorator",N=b(j,q),gt=b(M,q),ft="dx-list-slide-menu",bt="dx-list-slide-menu-wrapper",v="dx-list-slide-menu-content",Et="dx-list-slide-menu-buttons-container",Tt="dx-list-slide-menu-buttons",R="dx-list-slide-menu-button",St="dx-list-slide-menu-button-menu",Dt="dx-list-slide-menu-button-delete",It="cubic-bezier(0.075, 0.82, 0.165, 1)";class $t extends V{_shouldHandleSwipe(){return!0}_init(){super._init(),this._$buttonsContainer=n("<div>").addClass(Et),l.on(this._$buttonsContainer,gt,L),this._$buttons=n("<div>").addClass(Tt).appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()}_renderMenu(){const{menuItems:t=[]}=this._list.option();if(t.length)if(t.length===1){const e=t[0];this._renderMenuButton(e.text??"",(i=>{i.stopPropagation(),this._fireAction(e)}))}else{const e=n("<div>").addClass(ft);this._menu=this._list._createComponent(e,F,{showTitle:!1,items:t,onItemClick:s=>{this._fireAction(s.itemData)},integrationOptions:{}}),e.appendTo(this._list.$element());const i=this._renderMenuButton(c.format("dxListEditDecorator-more"),(s=>{s.stopPropagation(),this._menu.show()}));this._menu.option("target",i)}}_renderMenuButton(t,e){const i=n("<div>").addClass(R).addClass(St).text(t);return this._$buttons.append(i),l.on(i,N,e),i}_renderDeleteButton(){const{allowItemDeleting:t}=this._list.option();if(!t)return;const e=n("<div>").addClass(R).addClass(Dt).text(H(k())?"":c.format("dxListEditDecorator-delete"));l.on(e,N,(i=>{i.stopPropagation(),this._deleteItem()})),this._$buttons.append(e)}_fireAction(t){this._list._itemEventHandlerByHandler(n(this._cachedNode),t.action,{},{excludeValidators:["disabled","readOnly"]}),this._cancelDeleteReadyItem()}modifyElement(t){super.modifyElement(t);const{$itemElement:e}=t;e.addClass(bt);const i=n("<div>").addClass(v);e.wrapInner(i)}_getDeleteButtonContainer(){return this._$buttonsContainer}handleClick(t,e){return n(e.target).closest(`.${v}`).length?super.handleClick(t,e):!1}_swipeStartHandler(t){this._enablePositioning(t),this._cacheItemData(t),this._setPositions(this._getPositions(0))}_swipeUpdateHandler(t,e){const s=this._isRtlEnabled()?-1:1,o=this._isReadyToDelete(t);if(this._getCurrentPositions().content===this._getStartPositions().content&&!o&&e.offset*s>0){e.cancel=!0;return}const p=this._cachedItemWidth*e.offset,m=o?-this._cachedButtonWidth*s:0,S=(p+m)*s<0?Math.abs((p+m)/this._cachedButtonWidth):0;this._setPositions(this._getPositions(S))}_getStartPositions(){const t=this._isRtlEnabled(),e=t?-1:1;return{content:0,buttonsContainer:t?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*e}}_getPositions(t){const i=this._isRtlEnabled()?-1:1,s=this._getStartPositions();return{content:s.content-t*this._cachedButtonWidth*i,buttonsContainer:s.buttonsContainer-Math.min(t,1)*this._cachedButtonWidth*i,buttons:s.buttons+Math.min(t,1)*this._cachedButtonWidth*i}}_getCurrentPositions(){return{content:I(this._$cachedContent).left,buttonsContainer:I(this._$buttonsContainer).left,buttons:I(this._$buttons).left}}_setPositions(t){C(this._$cachedContent,{left:t.content}),C(this._$buttonsContainer,{left:t.buttonsContainer}),C(this._$buttons,{left:t.buttons})}_cacheItemData(t){var e;t[0]!==this._cachedNode&&(this._$cachedContent=t.find(`.${v}`),this._cachedItemWidth=g(t),this._cachedButtonWidth=this._cachedButtonWidth||g(this._$buttons),Y(this._$buttonsContainer,this._cachedButtonWidth),(e=this._$cachedContent)!==null&&e!==void 0&&e.length&&(this._cachedNode=t.get(0)))}_minButtonContainerLeftOffset(){return this._cachedItemWidth-this._cachedButtonWidth}_swipeEndHandler(t,e){this._cacheItemData(t);const i=this._isRtlEnabled()?1:-1,s=this._cachedItemWidth*e.offset,o=!this._isReadyToDelete(t)&&s*i>.2*this._cachedButtonWidth,a=e.targetOffset===i&&o;this._toggleDeleteReady(t,a)}_enablePositioning(t){this._$cachedContent&&r.stop(this._$cachedContent.get(0),!0),super._enablePositioning(t),this._$buttonsContainer.appendTo(t)}_disablePositioning(t){super._disablePositioning(t),this._$buttonsContainer.detach()}_animatePrepareDeleteReady(){return this._animateToPositions(this._getPositions(1))}_animateForgetDeleteReady(t){return this._cacheItemData(t),this._animateToPositions(this._getPositions(0))}_animateToPositions(t){const e=this._getCurrentPositions(),i=Math.min(Math.abs(e.content-t.content)/this._cachedButtonWidth,1);return r.animate(n(this._$cachedContent).get(0),{from:e,to:t,easing:It,duration:400*i,strategy:"frame",draw:s=>{this._setPositions(s)}})}dispose(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),super.dispose()}}h("menu","slide",$t);const vt="dx-list-static-delete-button-container",xt="dx-list-static-delete-button";class yt extends E{afterBag(t){const{$itemElement:e,$container:i}=t,s=n("<div>").addClass(xt);this._list._createComponent(s,u,{icon:"remove",onClick:o=>{const{event:a}=o;a==null||a.stopPropagation(),this._deleteItem(e)},integrationOptions:{},elementAttr:{role:null,"aria-label":null},tabIndex:-1}),i.addClass(vt).append(s)}_deleteItem(t){t.is(".dx-state-disabled, .dx-state-disabled *")||this._list.deleteItem(t.get(0))}}h("delete","static",yt);class Lt extends E{_shouldHandleSwipe(){return!0}_renderItemPosition(t,e,i){const s=W(),o=e*this._itemElementWidth;return i?r.animate(t.get(0),{to:{left:o},type:"slide",complete(){s.resolve(t,e)}}):(C(t,{left:o}),s.resolve()),s.promise()}_swipeStartHandler(t){this._itemElementWidth=y(t)}_swipeUpdateHandler(t,e){const{offset:i}=e;this._renderItemPosition(t,i)}_swipeEndHandler(t,e){const{targetOffset:i}=e;this._renderItemPosition(t,i,!0).done(((s,o)=>{Math.abs(o)&&this._list.deleteItem(s.get(0)).fail((()=>{this._renderItemPosition(s,0,!0)}))}))}}h("delete","swipe",Lt);
