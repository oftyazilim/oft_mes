import{_ as da}from"./AppStepper.vue_vue_type_style_index_0_lang-BcgDth2d.js";import{d as ma,r as s,D as Ne,w as it,i as ca,eY as nt,aK as ot,q as pa,eZ as fa,a as st,c as T,o as _,m as K,b as e,e as u,aF as ve,p as A,f as n,g as rt,l as a,aA as ye,az as Y,V as va,T as Ee,y as ya,F as ga,s as I}from"./main-Bci61fJ-.js";import{u as ba}from"./pageTitle-BsPjT34h.js";import{D as M}from"./button-BUB4ujb_.js";import{D as ut,a as Oe}from"./switch-CwO6zcKM.js";import{D as Me}from"./select-box-D57zFuw-.js";import{D as ka}from"./context-menu-zlxKD21C.js";import{s as ge,D as o,e as ha,f as wa,g as be,h as _a,i as xa,j as Da,k as Sa,d as ke,l as Ta,m as Ia,n as Aa,o as Ra,p as Ca,b as za,c as x,q as Ka,r as F,t as G}from"./data-grid-Ba5VG15X.js";import{D as Pa}from"./load-panel-BaqqkQvq.js";import{D as Na}from"./number-box-efeXTrp6.js";import{D as P,a as V}from"./popup-DUMZEf75.js";import{D as dt}from"./text-area-N2gWBYee.js";import{D as R}from"./text-box-CkM1dOd1.js";import{D as Ea}from"./tooltip-DDCQQV9R.js";import{q as Oa}from"./m_resize_observer-BpDlBMfk.js";import"./dom_component-CFxGGT7a.js";import"./m_select_box-DyZ6-Naj.js";import{e as Ma}from"./export_data_grid-D3_41EJd.js";import"./format_helper-DkqiVhdE.js";import{n as h}from"./notify-CUlG_ZGR.js";import{e as Fa}from"./exceljs.min-Dm3_meIG.js";import{F as Ga}from"./FileSaver.min-DTJoJ69M.js";import{_ as Va}from"./SurecCell.vue_vue_type_style_index_0_lang-D6v5SDQk.js";import{V as Fe}from"./VCardText-0M6eGHjW.js";import{V as p}from"./VCol-BEDQ_1zk.js";import{V as mt}from"./VCard-DQQZhClb.js";import{V as S}from"./VRow-BvKpZ9wV.js";import{V as Ba}from"./VDivider-CnalsRSc.js";import{V as Ua}from"./VForm-BGOBMIVH.js";import{V as $a,a as Ge}from"./VWindowItem-CZNXw4o6.js";import"./VSlideGroup-C9vOVZvx.js";import"./VSlideGroupItem-Fg9UjV3A.js";import"./VAvatar-DkAFqoU2.js";import"./VImg-B8Lz61Aj.js";import"./index-DU9wqqct.js";import"./index-BhwJuAw7.js";import"./m_row_dragging-5DAy3AAN.js";import"./themes-skhwAFDA.js";import"./overlay-4BK_jUr6.js";import"./editor-BxQEF_dH.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./m_utils.scroll-D9xWF5JS.js";import"./m_popover-BkuIG_57.js";import"./export_merged_ranges_manager-C8HPV7SA.js";import"./language_codes-BEq3epWt.js";import"./progress-bar-BSIIuz56.js";/* empty css              */import"./createSimpleFunctional-DfuAzFL8.js";import"./form-BZUIokvT.js";import"./forwardRefs-C-GTDzx5.js";import"./lazy-CPQDz-0i.js";import"./ssrBoot-DhpILRlj.js";const Ya={key:0,class:"montaj-loading-overlay"},La={class:"montaj-loading-content"},Ha={class:"montaj-loading-hint"},ja={key:0,class:"montaj-loading-timeout"},qa={id:"liste",style:{"margin-block-end":"-10px"}},Wa={class:"informer"},Za={class:"count"},Ja={class:"informer"},Xa={class:"count"},Qa={key:0,class:Y(["dx-icon","dx-icon-belloutline"]),style:{fontSize:"20px",color:"green"}},el={key:0,class:Y(["dx-icon","dx-icon-warning"]),style:{fontSize:"20px",color:"red"}},tl={class:"popup-center"},al={class:"popup-center"},ll={class:"popup-center"},il={class:"popup-center"},nl={key:0},ol={key:1},sl={class:"popup-center"},rl={class:"caption"},ul={style:{"block-size":"613px"}},ct="İş Emirleri",pt="MONTAJ",ui=ma({__name:"is-emirleri-montaj",props:{tab:{},mesaj:{},tablo:{},istasyon:{type:Boolean},operasyon:{type:Boolean},grup:{type:Boolean},isMerkezi:{},indx:{}},setup(ft){function D(t){return typeof t.value=="number"?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t.value):t.valueText}const L=s(!1),H=s(!1),j=s(!1),le=s(!1),ie=s(!1),q=s(!1),he=s(!1),y=s([]);s(null);const Ve=s(null);ba().setTitle(`${ct} (${pt})`),document.title=`OFT - ${ct} | ${pt}`,s(null),s({});const ne=s(!1),N=s(!1),W=s(!1),Z=s(!0),Be=s([]),B=s([]),vt=s([]),Ue=s([]),J=s([]);s([]),s([]);const we=s([]),b=s(null),yt=s(null),gt=s(null),_e=s(!0),oe=s(!1),se=s(""),$e={of:"window"},re=s(0),Ye=s(0),E=s(null),ue=s(!1),X=s(!1),xe=s(!1),De=s(!1),Se=s(!1),Le=s(!1),bt=Ne(()=>xe.value&&De.value&&Se.value);it(bt,t=>{t&&!X.value&&(X.value=!0)});const kt=Ne(()=>{const t=[];return t.push(xe.value?"Veri ✓":"Veri..."),t.push(De.value?"Düzen ✓":"Düzen..."),t.push(Se.value?"Render ✓":"Render..."),t.join(" / ")});setTimeout(()=>{X.value||(Le.value=!0,X.value=!0)},12e3);async function Te(t){se.value=t,await ot(),await new Promise(l=>requestAnimationFrame(()=>l()))}function Ie(){oe.value=!1,se.value=""}const g=s([]),w=s(new Date),He=s(new Date),je=s(null),U=s(""),Ae=s("");s(null);const Q=s(null),C=s(""),ht=s(Date.now()),Re=s(0);s(0),s(0);const Ce=s(2),qe=s(0),We=s(""),ze=s([]),ee=s(0),Ke=s([]),te=s(0);s([]),s([]);const wt=()=>{const t=["ITEM ID","STOK KODU","BAKİYE"],l=J.value.filter(i=>i.bakiye?i.bakiye<0:!1);if(l.length===0){const i=document.createElement("textarea");i.value=" ",i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),h("Eksik bulunamadı.","warning",1500);return}const r=l.map(i=>{const f=Number.parseFloat(i.bakiye.toString())||0;return`${i.item_id}	${i.stok_kodu}	${i.stok_adi}	${f}`}),c=[t.join("	"),...r].join(`
`),d=document.createElement("textarea");d.value=c,d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d),d.select();try{document.execCommand("copy"),h("Eksikler kopyalandı.","success",1500)}catch(i){console.error("Kopyalama sırasında bir hata oluştu:",i)}document.body.removeChild(d)},_t=()=>{var l;let t=null;if((l=b.value)!=null&&l.instance){t=b.value.instance.state();const r=JSON.stringify(t);localStorage.setItem(ae.tab,r)}},Ze=()=>{const t=localStorage.getItem(ae.tab);t&&b.value&&b.value.instance&&b.value.instance.state(JSON.parse(t))},xt=()=>{var t;localStorage.removeItem(ae.tab),(t=b.value)!=null&&t.instance&&b.value.instance.state(null)},Dt=t=>{g.value=t.selectedRowsData},St=(t,l)=>{const r=l.data.renk_kodu;t.innerText=l.text;const c=d=>{const i=document.createElement("span");return i.className="dx-icon dx-icon-square",i.style.marginLeft="8px",i.style.color=d,i.style.fontSize="20",i.style.display="inline-flex",i};if(r){let d="";switch(r){case"RAL7035":d="#D7D7D7";break;case"RAL7016":d="#293133";break;case"RAL7031":d="#474B4E";break;case"RAL7032":d="#721422";break;case"RAL5026":d="#102C54";break;case"RAL7037":d="#7D7F7D";break;case"RAL9003":d="#F4F4F4";break;case"RAL9005":d="#0A0A0A";break;case"RAL9006":d="#A5A5A5";break;case"RAL9007":d="#8F8F8F";break;case"RAL9010":d="#FFFFFF";break;case"RAL9016":d="#F6F6F6";break;default:d="white";break}const i=c(d);t.insertBefore(i,t.firstChild)}},Tt=(t,l)=>{const r=l.data.teknik_not1&&l.data.teknik_not1.trim()!=="",c=l.data.teknik_not2&&l.data.teknik_not2.trim()!=="";t.innerText=l.text;const d=(i,f)=>{const k=document.createElement("span");return f==="Planlamanın Notu"?k.className="dx-icon dx-icon-square":k.className="dx-icon dx-icon-message",k.style.marginLeft="8px",k.style.color=i,k.style.fontSize="16",k.style.display="inline-flex",k.addEventListener("click",()=>{je.value=f==="Planlamanın Notu"?l.data.teknik_not1:l.data.teknik_not2,U.value=f,le.value=!le.value}),k};if(r){let i="";switch(l.data.teknik_not1){case"Mekanik eksik":i="orange";break;case"Satınalma eksik":i="red";break;case"Revizyon yapıldı. Müşteri / Arge":i="gray";break;case"Ürün ağacı yok":i="gray";break;case"Beklemede - Yönetim - Fiyat":i="#f79191";break;case"İptal - Müşteri":i="darkgray";break;default:i="#a29bef";break}const f=d(i,"Planlamanın Notu");t.appendChild(f)}if(c){const i=d("green","Üretimin Notu");t.appendChild(i)}},Je=t=>{if(!t||typeof t!="string")return null;const[l,r,c]=t.split(".");return`${c}-${r}-${l}`},It=(t,l)=>{const r=Je(l.data.teslim_tarihi),c=Je(l.data.planlanan_bitis_tarihi),d=c?new Date(c):new Date,i=r?new Date(r):new Date;d.setHours(0,0,0,0),i.setHours(0,0,0,0);const f=Math.floor((i.getTime()-d.getTime())/(1e3*60*60*24));t.innerText=l.text;const k=(v,ua)=>{const $=document.createElement("span");return $.className=ua?"dx-icon dx-icon-isnotblank":"dx-icon dx-icon-isblank",$.style.marginRight="8px",$.style.color=v,$.style.fontSize="16",$.style.display="inline-flex",$};if(f<0){const v=k("red",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else if(f===0){const v=k("blue",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else if(f<=3){const v=k("orange",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else{const v=k("white",!1);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}},m=s({hafta:"",isemri_no:"",teslim_tarihi:"",siparis_belge_no:"",isemri_id:"",sip_not1:"",sip_not2:"",sip_not3:"",sip_not4:"",teknik_not1:"",teknik_not2:"",cari_ad:"",eksikler:"",kaydi_giren_kullanici:"",planlanan_baslangic:"",planlanan_bitis_tarihi:"",aksesuar:"",sip_detay_id:0,istasyon:"",stok_kodu:"",stok_adi:"",CIKIS_DEPO:"",siparis_miktari:0}),Pe=s([{title:"Sipariş Detayı",subtitle:"Seçilmedi"},{title:"Alt İş Emirleri",subtitle:"Seçilmedi"},{title:"Rota",subtitle:"Tasarım aşamasında"}]),de=s(0),At=()=>{if(m.value===null||m.value.isemri_no===""){h("Önce iş emrini seçmelisiniz...","error",1500);return}Q.value&&(C.value===""?C.value=Q.value:C.value+=(C.value?`
`:"")+Q.value)},me={width:100,type:"success",text:"Kaydet",stylingMode:"contained"},ce={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{L.value=!1,H.value=!1,j.value=!1,ie.value=!1,q.value=!1}},Rt=async()=>{const t=g.value.map(r=>({item_id:r.item_id,isemriID:r.isemri_id,operasyonID:r.OPERASYON_ID,istasyonID:r.IS_ISTASYONU_ID,isMerkeziID:r.IS_MERKEZI_ID,satir_id:r.satir_id,ismerkezi_kodu:te.value,istasyon_kodu:ee.value,rotaGuncelle:Z.value})),l=z.value.id;try{const r=await I.post("/api/istasyonKaydet",{updateData:t,userID:l});O(),g.value=[],pe(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}q.value=!1},Ct=()=>{Ae.value==="planlanan_baslangic"&&Pt("t"),L.value=!1},zt=()=>{Nt(),H.value=!1},Kt=async()=>{j.value=!1;const t=g.value.map(r=>({isemriNo:r.isemri_no,aksesuar:N.value===!0?1:0,orderDId:r.sip_detay_id})),l=z.value.id;console.log("Aksesuar güncelleme verisi:",t);try{const r=await I.post("/api/aksesuarKaydet",{updateData:t,userID:l});O(),g.value=[],pe(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},Pt=async t=>{y.value[1]===null&&(y.value[1]=y.value[0]),new Date(w.value),new Date(w.value);const l=g.value.map(c=>({tur:t,satir_id:c.satir_id,isEmriID:c.isemri_id,isemriNo:c.isemri_no,sure:0,aksesuar:N.value===!0?1:0,teslimTarih:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_baslangic:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_bitis:`${y.value[1].getFullYear()}-${(y.value[1].getMonth()+1).toString().padStart(2,"0")}-${y.value[1].getDate().toString().padStart(2,"0")} ${y.value[1].getHours().toString().padStart(2,"0")}:${y.value[1].getMinutes().toString().padStart(2,"0")}:${y.value[1].getSeconds().toString().padStart(2,"0")}`})),r=z.value.id;try{const c=await I.post("/api/updatePlanBaslangic",{updateData:l,userID:r});O(),g.value=[],pe(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(c){console.error("Güncelleme sırasında hata oluştu:",c)}},Nt=async()=>{const t=g.value.map(r=>({tur:"s",birlesik:W.value===!0?1:0,gun:Ce.value,satir_id:r.satir_id,isEmriID:r.isemri_id,isemriNo:r.isemri_no,sure:0,sip_detay_id:r.sip_detay_id,aksesuar:N.value===!0?1:0,teslimTarih:`${w.value.getFullYear()}-${(w.value.getMonth()+1).toString().padStart(2,"0")}-${w.value.getDate().toString().padStart(2,"0")} ${w.value.getHours().toString().padStart(2,"0")}:${w.value.getMinutes().toString().padStart(2,"0")}:${w.value.getSeconds().toString().padStart(2,"0")}`})),l=z.value.id;try{const r=await I.post("/api/updatePlanBaslangic",{updateData:t,userID:l});O(),g.value=[],pe(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},pe=()=>{var l;const t=(l=b.value)==null?void 0:l.instance;t==null||t.clearSelection()},Et=async()=>{try{const t=B.value.findIndex(r=>r.isemri_no===m.value.isemri_no);if(t===-1){h("Güncellenecek kayıt bulunamadı.","success",1500);return}if((await I.post("/api/planNotKaydet",{satir_id:m.value.isemri_no,not:C.value})).status===200){const r=[...B.value];r[t].teknik_not1=C.value,B.value=r,h("Notlar başarıyla güncellendi...","success",1500)}}catch(t){console.error("Kaydetme sırasında bir hata oluştu:",t)}},Xe=t=>{t.rowType==="data"&&(t.column.dataField==="isemri_miktari"||t.column.dataField==="uretilen_net_miktar"||t.column.dataField==="kalan_miktar")&&t.value>0&&(t.cellElement.style.fontWeight="bold"),t.rowType==="data"&&t.column.dataField==="toplam_hurda_miktari"&&t.value>0&&(t.cellElement.style.color="white",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#EC2407"),t.rowType==="data"&&t.column.dataField==="kalan_siparis_miktari"&&t.value>0&&(t.cellElement.style.color="black",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#b7d0e8"),t.rowType==="data"&&t.column.dataField==="hafta"&&(t.cellElement.style.fontWeight="bold")},Ot=t=>{var k;if(t.rowType!=="data")return;const l=new Date,r=new Date;r.setDate(l.getDate()-1);const c=v=>v.toISOString().split("T")[0],d=c(l),i=c(r),f=(k=t.data)==null?void 0:k.kayit_tarihi;if(f){const v=c(new Date(f));(v===d||v===i)&&(t.rowElement.style.backgroundColor="rgba(250,160,8,0.12)",t.rowElement.style.fontWeight="bold")}},Mt=t=>{t.rowType==="data"&&t.column.dataField==="qty_prm"&&(t.cellElement.style.fontWeight="bold")},Ft=t=>{t.rowType==="data"&&t.column.dataField==="bakiye"&&t.value<0&&(t.cellElement.style.color="white",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#EC2407"),t.rowType==="data"&&(t.column.dataField==="qty_net"||t.column.dataField==="qty_prm")&&(t.cellElement.style.fontWeight="bold")},Gt=t=>{t.rowType==="data"&&(we.value=[],qe.value=t.data.stok_kodu,We.value=t.data.stok_adi,Qt(t.data.item_id),he.value=!0)},ae=ft,Vt=()=>{var t,l;(l=(t=b.value)==null?void 0:t.instance)==null||l.clearFilter()},Bt=(t,l)=>{t.innerText=l.text;const r=l.data.tipi,c=(f,k)=>{const v=document.createElement("span");return v.className="dx-icon dx-icon-isnotblank",v.style.marginRight="8px",v.style.color=f,v.style.fontSize="16",v.style.display="inline-flex",v};let d="gray";switch(r){case"Hammadde":d="gold";break;case"YarıMamul":d="limegreen";break;case"Mamul":d="green";break;case"Ticari":d="gray";break}const i=c(d);t.insertBefore(i,t.firstChild)},Ut=t=>{if(t.rowIndex===-1)return;const l=t.row.data;Pe.value[0].subtitle=l.siparis_belge_no,m.value=l,Re.value=l.satir_id,m.value.siparis_belge_no=l.siparis_belge_no!=null?l.siparis_belge_no:"",m.value.istasyon=l.IS_ISTASYONU,C.value=l.teknik_not1!=null?l.teknik_not1:"",ae.grup&&(ue.value=!0)},$t=t=>{const l=t.row.data;N.value=l.aksesuar!==null},Yt=t=>{var c,d,i,f;const l=(c=b.value)==null?void 0:c.instance;if(!l)return;Ye.value=((d=l.getDataSource())==null?void 0:d.totalCount())||0;const r=(i=l.getDataSource())==null?void 0:i.group();Array.isArray(r)&&r.length>0?(E.value=((f=r[0])==null?void 0:f.selector)||null,re.value=E.value?Qe(E.value):0):r!=null&&r.selector?(E.value=r.selector,re.value=E.value?Qe(E.value):0):(E.value=null,re.value=0)},Lt=t=>{},Qe=t=>Oa(B.value).groupBy(t).toArray().length,Ht=()=>{_e.value=!_e.value},et=t=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}Ae.value=t,w.value=new Date(t==="planlanan_baslangic"?g.value[0].planlanan_baslangic:g.value[0].teslim_tarihi),He.value=new Date(t==="planlanan_baslangic"?g.value[0].planlanan_bitis_tarihi:g.value[0].teslim_tarihi),y.value=[w.value,He.value],L.value=!0},jt=t=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}Ae.value=t,W.value=!1,w.value=new Date(g.value[0].teslim_tarihi),H.value=!0},qt=()=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}te.value=0,ee.value=0,Ke.value=[],ze.value=[],Jt(),Z.value=!0,q.value=!0},Wt=()=>{if(m.value===null){h("Önce iş emrini seçmelisiniz...","error",1500);return}J.value=[],U.value=`${m.value.isemri_no} nolu iş emri detayı ( ${m.value.stok_adi} )`,Zt(),ie.value=!0},tt=()=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}N.value=g.value[0].aksesuar!==""&&m.value.aksesuar!==null,j.value=!0},O=async()=>{try{await Te("Veriler yükleniyor...");const t=await I.get("/api/data",{params:{tablo:"DETAY",isMerkezi:["4001","800"],coID:z.value.co_id}});B.value=t.data.emirler,vt.value=t.data.siparisler,Be.value=t.data.notlar}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Ie(),xe.value=!0}},Zt=async()=>{try{const t=await I.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:m.value.CIKIS_DEPO||0,isemri_id:m.value.isemri_id,coID:z.value.co_id}});console.log("Detay response:",t),Ue.value=t.data.data,Pe.value[1].subtitle=`${t.data.toplamIsEmri} ad / ${t.data.toplamSure} dk`,J.value=t.data.malzemeler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}},Jt=async()=>{await Te("İş merkezleri yükleniyor...");try{const t=await I.get("/api/merkezal",{params:{coID:z.value.co_id}});Ke.value=t.data.merkezler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Ie()}},Xt=async()=>{ee.value=0,await Te("İstasyonlar yükleniyor...");try{const t=await I.get("/api/istasyonal",{params:{ismerkezi:te.value}});ze.value=t.data.istasyonlar}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Ie()}},Qt=async t=>{try{const l=await I.get("/api/digerdepobakiyeleri",{params:{item_id:t,depo:m.value.CIKIS_DEPO||0}});we.value=l.data.bakiyeler}catch(l){console.error("Veri çekilirken hata oluştu: ",l)}};ca(async()=>{try{await nt()}catch{}await O(),Ze(),De.value=!0,ot(()=>{b.value&&b.value.instance&&b.value.instance.clearSelection(),requestAnimationFrame(()=>{Se.value=!0})})});const ea=async()=>{await O()},ta=()=>{ne.value=!ne.value},aa=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),z=pa("userData"),la=t=>{const l=new Fa.Workbook,r=l.addWorksheet("MontajIsEmirleri");Ma({component:t.component,worksheet:r,autoFilterEnabled:!0}).then(()=>{l.xlsx.writeBuffer().then(c=>{Ga.saveAs(new Blob([c],{type:"application/octet-stream"}),"MontajIsEmirleri.xlsx")})}),t.cancel=!0},at=[{text:"Yenile"},{text:"Haftaya Göre Grupla"},{text:"Detay Göster"},{text:"İstasyona Gönder",policyKey:"button:planlama:isemri-rota"},{text:"Üretim Tarihini Değiştir",policyKey:"button:planlama:isemri-uretim-tarihi"},{text:"Teslim Tarihini Değiştir",policyKey:"button:planlama:isemri-teslim-tarihi"},{text:"Aksesuar",policyKey:"button:planlama:isemri-aksesuar"},{text:"Teknik Resim Göster"},{text:"Düzen Yükle"},{text:"Düzen Kaydet"},{text:"Düzen Sıfırla"}],fe=s(!1);(async()=>{try{await nt(),fe.value=!0}catch{fe.value=!0}})();const lt=s(0);it(fe,t=>{t&&lt.value++});const ia=Ne(()=>fe.value?at.filter(t=>t.policyKey?fa(t.policyKey):!0):at.filter(t=>!t.policyKey));function na({itemData:t}){if(!(t!=null&&t.items))switch(t==null?void 0:t.text){case"Yenile":O();break;case"Detay Göster":Wt();break;case"Haftaya Göre Grupla":sa();break;case"İstasyona Gönder":qt();break;case"Üretim Tarihini Değiştir":U.value="Üretim tarihini seçiniz",et("planlanan_baslangic");break;case"Teslim Tarihini Değiştir":U.value="Teslim tarihini seçiniz",jt("teslim_tarihi");break;case"Aksesuar":tt();break;case"Düzen Yükle":Ze();break;case"Teknik Resim Göster":oa();break;case"Düzen Kaydet":_t();break;case"Düzen Sıfırla":xt();break;case"RAL Kodlarını Güncelle":ra();break}}const oa=()=>{const l=`undefined/api/get-pdf/${`${m.value.stok_kodu}.pdf`}`;window.open(l,"_blank")};function sa(){var t;(t=b.value)!=null&&t.instance&&(b.value.instance.clearGrouping(),b.value.instance.columnOption("haftax","groupIndex",0))}const ra=async()=>{const t=z.value.id;try{const l=await I.post("/api/ralguncelle",{userID:t});h("Renk Kodları başarıyla güncellendi...","success",2e3)}catch(l){console.error("Güncelleme sırasında hata oluştu:",l)}oe.value=!1};return(t,l)=>{const r=st("DxGridLoadPanel"),c=st("DxScrollView"),d=da;return _(),T(ga,null,[X.value?K("",!0):(_(),T("div",Ya,[u("div",La,[l[31]||(l[31]=u("div",{class:"montaj-spinner","aria-label":"Yükleniyor"},null,-1)),l[32]||(l[32]=u("h2",{class:"montaj-loading-title"},"Montaj İş Emirleri Yükleniyor",-1)),u("p",Ha,[l[29]||(l[29]=ve(" Kritik veriler alınıyor: ")),u("strong",null,A(kt.value),1)]),l[33]||(l[33]=u("p",{class:"montaj-loading-sub"}," İlk listeleme tamamlandığında ekran otomatik açılacak. ",-1)),Le.value?(_(),T("p",ja,l[30]||(l[30]=[u("span",{class:"warn"},"Beklenen bazı veriler gecikti, yine de gösteriliyor...",-1)]))):K("",!0)])])),e(mt,{class:"mt-0 pa-0 pt-2"},{default:n(()=>[e(Fe,{class:"mt-0 pa-0 ms-2 me-1"},{default:n(()=>[e(p,{cols:"12",class:"mt-0 pa-1 pe-2"},{default:n(()=>[u("div",qa,[(_(),rt(a(ka),{key:lt.value,"data-source":ia.value,width:200,target:"#grid",onItemClick:na},null,8,["data-source"])),(_(),rt(a(ge),{id:"grid",ref_key:"dataGridRef",ref:b,key:ht.value,"data-source":B.value,"key-expr":"satir_id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,onExporting:la,"allow-column-reordering":!0,"column-auto-width":!1,onContentReady:Yt,onFocusedRowChanged:Ut,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Xe,onSelectionChanged:Dt,"auto-navigate-to-focused-row":!0,onRowPrepared:Ot,"on-option-changed":Lt,onContextMenuPreparing:$t,"focused-row-key":Re.value,"onUpdate:focusedRowKey":l[0]||(l[0]=i=>Re.value=i),"selected-rows-keys":g.value},{aksesuarliTemplate:n(()=>[e(a(M),{icon:"gift","styling-mode":"text",hint:"Aksesuar Ekle/Kaldır"})]),baslangicTarihiTemplate:n(()=>[e(a(M),{icon:"clock","styling-mode":"text",hint:"Başlangıç Tarihini Değiştir"})]),gruplaTemplate:n(()=>[e(a(M),{icon:"hierarchy","styling-mode":"text",hint:"Haftayı Grupla"})]),totalCountTemplate:n(()=>[u("div",Wa,[u("div",Za,A(re.value),1),l[34]||(l[34]=u("span",null,"Toplam Grup",-1))])]),totalRecordTemplate:n(()=>[u("div",Ja,[u("div",Xa,A(Ye.value),1),l[35]||(l[35]=u("span",null,"Toplam Kayıt",-1))])]),filtreTemizleTemplate:n(()=>[e(a(M),{icon:"notequal","styling-mode":"text",hint:"Filtre Temizle",id:"filtretemizle"})]),menuFiltreTemizleTemplate:n(()=>l[36]||(l[36]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-undo"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Temizle")],-1)])),yenileTemplate:n(()=>[e(a(M),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:n(()=>l[37]||(l[37]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-refresh"}),u("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),filtreGosterTemplate:n(()=>[e(a(M),{icon:"filter","styling-mode":"text",hint:"Filtre Goster"})]),menuFiltreGosterTemplate:n(()=>l[38]||(l[38]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-filter"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Göster")],-1)])),collapseTemplate:n(()=>[e(a(M),{icon:ne.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:ta},null,8,["icon"])]),surecCellTemplate:n(({data:i})=>[e(va,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,height:"20",color:"warning"},{default:n(()=>[u("span",null,A(Math.ceil(i.value))+"%",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),notlarPTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(_(),T("i",Qa)):K("",!0)]),notlarOTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(_(),T("i",{key:0,class:Y(["dx-icon","dx-icon-belloutline"]),style:ye({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):K("",!0)]),eksiklerTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(_(),T("i",el)):K("",!0)]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(_(),T("i",{key:0,class:Y(["dx-icon","dx-icon-gift"]),style:ye({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):K("",!0)]),aktifTemplate:n(({data:i})=>[i.value===1?(_(),T("i",{key:0,class:Y(["dx-icon","dx-icon-runner"]),style:ye({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):K("",!0)]),default:n(()=>[e(a(o),{"data-field":"id",caption:"ID",visible:!1,"min-width":90}),e(a(o),{"data-field":"aktif",caption:"AKTIF",visible:!0,"min-width":40,"cell-template":"aktifTemplate"}),e(a(o),{"data-field":"hafta",caption:"HAFTA",fixed:!0,width:120,visible:!0,alignment:"left","cell-template":Tt}),e(a(o),{"data-field":"haftax",caption:"HFT","data-type":"string",visible:!1,width:20}),e(a(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:!0,width:60,"cell-template":"aksesuarTemplate",alignment:"center","allow-sorting":!1}),e(a(o),{"data-field":"grup_id",caption:"GRUP ID","data-type":"string",visible:!1,width:40}),e(a(o),{"data-field":"IS_ISTASYONU",caption:"İST. ADI",visible:!0,width:130}),e(a(o),{"data-field":"IS_ISTASYONU_ID",caption:"İSTASYON ID",visible:!1,width:90}),e(a(o),{"data-field":"IS_MERKEZI_ID",caption:"İŞ MERKEZİ ID",visible:!1,width:90}),e(a(o),{"data-field":"IS_MERKEZI_ADI",caption:"İŞ MERKEZİ ADI",visible:!1,width:90}),e(a(o),{"data-field":"IS_ISTASYONU_KODU",caption:"İSTASYON KODU",visible:!1,width:150}),e(a(o),{"data-field":"IS_ISTASYONU_ADI",caption:"İSTASYON ADIx",visible:!1,width:150}),e(a(o),{"data-field":"OPERASYON_ID",caption:"OPRSYN ID",visible:!1,width:120}),e(a(o),{"data-field":"OPERASYON",caption:"OPRSYN",visible:!0,width:120}),e(a(o),{"data-field":"Operasyon_no",caption:"OPRSYN NO",visible:!1,width:120}),e(a(o),{"data-field":"siparis_belge_no",caption:"SİPARİŞ NO",width:90,visible:!0,"allow-sorting":!1}),e(a(o),{"data-field":"siparis_miktari",caption:"SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(a(o),{"data-field":"kalan_siparis_miktari",caption:"KALAN SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(a(o),{"data-field":"cari_ad",caption:"MÜŞTERİ",visible:!0,"min-width":140,"allow-sorting":!1}),e(a(o),{"data-field":"renk_id",caption:"RENK ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(a(o),{"data-field":"renk_kodu",caption:"RENK KODU",visible:!0,"min-width":110,"allow-sorting":!1,"cell-template":St}),e(a(o),{"data-field":"renk_adi",caption:"RENK ADI",visible:!1,"min-width":90,"allow-sorting":!1}),e(a(o),{"data-field":"item_id",caption:"ITEM ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(a(o),{"data-field":"stok_kodu",caption:"STOK KODU",visible:!0,width:120,"allow-sorting":!1}),e(a(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200,"allow-sorting":!1}),e(a(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:100,visible:!1,"allow-sorting":!1}),e(a(o),{"data-field":"isemri_no",caption:"İŞ EMRİ NO",width:120,"allow-sorting":!1}),e(a(o),{"data-field":"teslim_tarihi",caption:"TESLİM TARİHİ","data-type":"date",width:140,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},"cell-template":It,"allow-sorting":!1},null,8,["format"]),e(a(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(a(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:110,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},alignment:"left"},null,8,["format"]),e(a(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:80,visible:!0,"allow-sorting":!1}),e(a(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center","allow-sorting":!1}),e(a(o),{"data-field":"isemri_miktari",caption:"İŞ EMRİ MİKTARI","data-type":"number",width:110,visible:!0}),e(a(o),{"data-field":"uretilen_toplam_miktar",caption:"TOPLAM URETİLEN","data-type":"number",width:60,visible:!1,"allow-sorting":!1}),e(a(o),{"data-field":"uretilen_net_miktar",caption:"NET URETILEN","data-type":"number",width:60,visible:!0}),e(a(o),{"data-field":"toplam_hurda_miktari",caption:"HURDA MİKTARI","data-type":"number",width:60,visible:!0,"allow-sorting":!1}),e(a(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HAZIRLIK SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(a(o),{"data-field":"operasyon_suresi",caption:"OPERASYON SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","},"allow-sorting":!1}),e(a(o),{"data-field":"sip_detay_id","min-width":120,width:140,"allow-sorting":!1}),e(a(o),{"data-field":"eksikler",caption:"EKSİKLER",visible:!0,width:60,"cell-template":"eksiklerTemplate",alignment:"center","allow-sorting":!1}),e(a(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140,"allow-sorting":!1}),e(a(o),{"data-field":"teknik_not1",caption:"PLN NOTU",width:60,visible:!1,"allow-sorting":!1}),e(a(o),{"data-field":"teknik_not2",caption:"OPR NOTU",width:90,visible:!1,alignment:"center","allow-sorting":!1}),e(a(o),{"data-field":"kaydi_giren_kullanici",caption:"KAYIT YAPAN","min-width":120,width:140,"allow-sorting":!1}),e(a(o),{"data-field":"satir_id",caption:"SATIR ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(a(o),{"data-field":"sip_not1",caption:"SİP NOT 1","min-width":120,"allow-sorting":!1}),e(a(o),{"data-field":"sip_not2",caption:"SİP NOT 2","min-width":120,"allow-sorting":!1}),e(a(o),{"data-field":"sip_not3",caption:"SİP NOT 3","min-width":120,"allow-sorting":!1}),e(a(o),{"data-field":"sip_not4",caption:"SİP NOT 4","min-width":120,"allow-sorting":!1}),e(a(o),{"data-field":"CIKIS_DEPO",caption:"ÇIKIŞ DEPO","min-width":80,"allow-sorting":!1}),e(a(o),{"data-field":"kayit_tarihi",caption:"OLUŞTURMA TARİHİ","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(r,{enabled:!0,text:se.value||"Yükleniyor...","show-indicator":!0,"show-pane":!0,shading:!0},null,8,["text"]),e(a(ha),{mode:"multiple","select-all-mode":"page","show-check-boxes-mode":"onClick"}),e(a(wa),{"auto-expand-all":ne.value},null,8,["auto-expand-all"]),e(a(be),{visible:!0}),e(a(_a),{visible:!0}),e(a(xa),{visible:!0}),e(a(Da),{visible:_e.value},null,8,["visible"]),e(a(Sa),{visible:!0,width:240}),e(a(ke),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(a(Ta),{mode:"multiple"}),e(a(Ia),{enabled:!0,"allow-export-selected-data":!1}),e(a(Aa),{height:"540px",enabled:!0,mode:"select",position:$e},{default:n(()=>[e(a(Ra),{enabled:!0}),e(a(Ca),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(a(za),null,{default:n(()=>[e(a(x),{location:"before",name:"groupPanel"}),e(a(x),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(a(x),{location:"before",template:"totalCountTemplate"}),e(a(x),{location:"before",template:"totalRecordTemplate"}),e(a(x),{location:"before",template:"gruplaTemplate",visible:ue.value&&t.canManagePlanlama,onClick:t.grup},null,8,["visible","onClick"]),e(a(x),{location:"before",template:"baslangicTarihiTemplate",visible:ue.value&&t.canManagePlanlama,onClick:et},null,8,["visible"]),e(a(x),{location:"before","locate-in-menu":"auto",template:"aksesuarliTemplate",visible:ue.value&&t.canManagePlanlama,onClick:tt},null,8,["visible"]),e(a(x),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:ea}),e(a(x),{location:"after","locate-in-menu":"auto",template:"filtreTemizleTemplate","menu-item-template":"menuFiltreTemizleTemplate",onClick:Vt}),e(a(x),{location:"after","locate-in-menu":"auto",template:"filtreGosterTemplate","menu-item-template":"menuFiltreGosterTemplate",onClick:Ht}),e(a(x),{name:"exportButton"}),e(a(x),{name:"columnChooserButton"}),e(a(x),{name:"searchPanel"})]),_:1}),e(a(Ka),null,{default:n(()=>[e(a(F),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(a(F),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(a(F),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(F),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(F),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(F),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(a(F),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(a(G),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(a(G),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D})]),_:1})]),_:1},8,["data-source","focused-row-key","selected-rows-keys"])),e(a(Pa),{visible:oe.value,"onUpdate:visible":l[1]||(l[1]=i=>oe.value=i),"show-indicator":!0,"show-pane":!0,shading:!0,message:se.value||"Yükleniyor...",position:$e},null,8,["visible","message"])])]),_:1})]),_:1})]),_:1}),e(a(V),{visible:H.value,"onUpdate:visible":l[6]||(l[6]=i=>H.value=i),width:500,height:560,"hide-on-outside-click":!0,"show-close-button":!0,title:"Teslim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[u("div",tl,[e(a(ut),{ref_key:"calendarRef",ref:Ve,value:w.value,"onUpdate:value":l[2]||(l[2]=i=>w.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"single","show-today-button":!0},null,8,["value"])])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",al,[l[39]||(l[39]=u("h2",{class:"mr-4"},"Üretimi Etkileme",-1)),e(a(Oe),{value:W.value,"onUpdate:value":l[3]||(l[3]=i=>W.value=i)},null,8,["value"]),l[40]||(l[40]=u("h2",{class:"ml-4"},"Üretimi Etkile",-1))])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",ll,[l[41]||(l[41]=u("h2",null,"Geri çekilecek gün sayısı: ",-1)),e(a(Na),{min:0,"show-spin-buttons":!0,"read-only":!W.value,value:Ce.value,"onUpdate:value":l[4]||(l[4]=i=>Ce.value=i),"input-attr":{"aria-label":"Gun"},style:{"inline-size":"100px","margin-inline-start":"10px"}},null,8,["read-only","value"])])]),_:1})]),default:n(()=>[e(a(P),{widget:"dxButton",toolbar:"bottom",location:"center",options:me,onClick:l[5]||(l[5]=i=>zt())}),e(a(P),{widget:"dxButton",toolbar:"bottom",location:"center",options:ce})]),_:1},8,["visible"]),e(a(V),{visible:L.value,"onUpdate:visible":l[9]||(l[9]=i=>L.value=i),width:350,height:470,"hide-on-outside-click":!0,"show-close-button":!0,title:"Üretim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(a(ut),{ref_key:"calendarRef",ref:Ve,value:y.value,"onUpdate:value":l[7]||(l[7]=i=>y.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"range","show-today-button":!0},null,8,["value"])]),_:1})]),default:n(()=>[e(a(P),{widget:"dxButton",toolbar:"bottom",location:"after",options:me,onClick:l[8]||(l[8]=i=>Ct())}),e(a(P),{widget:"dxButton",toolbar:"bottom",location:"after",options:ce})]),_:1},8,["visible"]),e(a(V),{visible:q.value,"onUpdate:visible":l[15]||(l[15]=i=>q.value=i),width:400,height:330,"hide-on-outside-click":!1,"show-close-button":!0,title:"İş Merkezi / İstasyonu seçiniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(a(Me),{"data-source":Ke.value,value:te.value,"onUpdate:value":l[10]||(l[10]=i=>te.value=i),label:"İş Merkezi","label-mode":"floating","display-expr":"mrk_adi","value-expr":"is_merkezi_id",onValueChanged:l[11]||(l[11]=i=>Xt()),style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[e(a(Me),{"data-source":ze.value,value:ee.value,"onUpdate:value":l[12]||(l[12]=i=>ee.value=i),label:"İstasyon","label-mode":"floating","display-expr":"ist_adi","value-expr":"istasyon_id",style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",il,[e(a(Oe),{value:Z.value,"onUpdate:value":l[13]||(l[13]=i=>Z.value=i)},null,8,["value"]),Z.value?(_(),T("div",nl,l[42]||(l[42]=[u("h2",{class:"ms-2"}," Rota Güncellensin",-1)]))):(_(),T("div",ol,l[43]||(l[43]=[u("h2",{class:"ms-2"}," Rota Güncellenmesin",-1)])))])]),_:1})]),default:n(()=>[e(a(P),{widget:"dxButton",toolbar:"bottom",location:"center",options:me,onClick:l[14]||(l[14]=i=>Rt())}),e(a(P),{widget:"dxButton",toolbar:"bottom",location:"center",options:ce})]),_:1},8,["visible"]),e(a(V),{visible:j.value,"onUpdate:visible":l[18]||(l[18]=i=>j.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:"Aksesuar olacak mı?"},{content:n(()=>[u("div",sl,[l[44]||(l[44]=u("h2",{class:"mr-4"},"Aksesuarsız",-1)),e(a(Oe),{value:N.value,"onUpdate:value":l[16]||(l[16]=i=>N.value=i)},null,8,["value"]),l[45]||(l[45]=u("h2",{class:"ml-4"},"Aksesuarlı",-1))])]),default:n(()=>[e(a(P),{widget:"dxButton",toolbar:"bottom",location:"after",options:me,onClick:l[17]||(l[17]=i=>Kt())}),e(a(P),{widget:"dxButton",toolbar:"bottom",location:"after",options:ce})]),_:1},8,["visible"]),e(a(V),{visible:le.value,"onUpdate:visible":l[19]||(l[19]=i=>le.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:U.value},{content:n(()=>[e(c,{width:"100%",height:"100%"},{default:n(()=>[u("div",rl,A(m.value.isemri_no),1),ve(" "+A(je.value),1)]),_:1})]),_:1},8,["visible","title"]),e(a(V),{visible:he.value,"onUpdate:visible":l[20]||(l[20]=i=>he.value=i),"hide-on-outside-click":!0,title:"Diğer Depo Bakiyeleri","show-close-button":!1,"show-title":!0,width:600,height:500},{default:n(()=>[e(p,{class:"text-center"},{default:n(()=>[u("h2",null,A(qe.value),1),u("h2",null,A(We.value),1)]),_:1}),l[46]||(l[46]=u("br",null,null,-1)),e(S,null,{default:n(()=>[e(p,null,{default:n(()=>[e(a(ge),{id:"gridBakiyeler",ref:"dataGridRefB","data-source":we.value,"show-borders":!0,"column-auto-width":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Mt,"row-alternation-enabled":!0},{default:n(()=>[e(a(o),{"data-field":"whouse_id",caption:"DEPO ID",width:80}),e(a(o),{"data-field":"whouse_code",caption:"DEPO KODU",width:100}),e(a(o),{"data-field":"description",caption:"DEPO ADI"}),e(a(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(be),{visible:!1}),e(a(ke),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1,__:[46]},8,["visible"]),e(a(V),{visible:ie.value,"onUpdate:visible":l[28]||(l[28]=i=>ie.value=i),width:1320,height:800,"hide-on-outside-click":!0,"show-close-button":!0,title:U.value},{content:n(()=>[e(mt,null,{default:n(()=>[e(Fe,{class:"mb-0 pb-0"},{default:n(()=>[e(d,{"current-step":de.value,"onUpdate:currentStep":l[21]||(l[21]=i=>de.value=i),items:Pe.value,class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),e(Ba),e(Fe,null,{default:n(()=>[e(Ua,null,{default:n(()=>[e($a,{modelValue:de.value,"onUpdate:modelValue":l[27]||(l[27]=i=>de.value=i),class:"disable-tab-transition",style:{"block-size":"170px"}},{default:n(()=>[e(Ge,null,{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"4",class:"mt-0 pa-0"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.istasyon,label:"İş İstasyonu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.siparis_belge_no,label:"Sipariş Nosu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.kaydi_giren_kullanici,label:"Kayıt Yapan Personel","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.isemri_no,label:"İş Emri No","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.teslim_tarihi,label:"Teslim Tarihi","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:aa(m.value.siparis_miktari),label:"Sipariş Miktarı","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not1,label:"Sipariş Notu 1","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not2,label:"Sipariş Notu 2","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not3,label:"Sipariş Notu 3","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(a(R),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not4,label:"Sipariş Notu 4","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(S,null,{default:n(()=>[e(p,{cols:"7",class:"pa-0 ps-2 pe-3"},{default:n(()=>[e(a(Me),{modelValue:Q.value,"onUpdate:modelValue":l[22]||(l[22]=i=>Q.value=i),items:Be.value,"display-expr":"not","value-expr":"not",disabled:!t.canManagePlanlama,label:"Planlama Notu Eklemeleri",class:"kalin"},null,8,["modelValue","items","disabled"])]),_:1}),e(p,{cols:"5",class:"mt-4 pa-0 ps-0 pe-0"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"2",class:"pe-0 ps-1"},{default:n(()=>[e(Ee,{text:"",icon:"tabler-arrow-down",rounded:"",color:"warning",block:"",disabled:!t.canManagePlanlama,modelValue:m.value.teknik_not1,"onUpdate:modelValue":l[23]||(l[23]=i=>m.value.teknik_not1=i),onClick:At},null,8,["disabled","modelValue"])]),_:1}),e(p,{cols:"7",class:"pa-0 ps-1 pt-3 pe-1"},{default:n(()=>[e(Ee,{color:"error",block:"",onClick:Et,disabled:!t.canManagePlanlama},{default:n(()=>[e(ya,{start:"",icon:"tabler-device-floppy"}),l[47]||(l[47]=ve(" Kaydet "))]),_:1,__:[47]},8,["disabled"])]),_:1}),e(p,{cols:"3",class:"pe-6 ps-0"},{default:n(()=>[e(Ee,{text:"",icon:"tabler-copy",rounded:"",color:"success",block:"",modelValue:m.value.teknik_not1,"onUpdate:modelValue":l[24]||(l[24]=i=>m.value.teknik_not1=i),onClick:wt,id:"kopyala"},null,8,["modelValue"])]),_:1}),e(a(Ea),{"hide-on-outside-click":!1,target:"#kopyala","show-event":"mouseenter","hide-event":"mouseleave",position:"right"},{default:n(()=>l[48]||(l[48]=[u("b",null,"Malzeme listesindeki 0'dan küçük satırları kopyalar",-1),u("br",null,null,-1),ve(" * satırları seçmenize gerek yoktur ")])),_:1,__:[48]})]),_:1})]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(a(dt),{modelValue:C.value,"onUpdate:modelValue":l[25]||(l[25]=i=>C.value=i),'"':"",label:" Planlamanın Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98,"max-length":950},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(a(dt),{modelValue:m.value.teknik_not2,"onUpdate:modelValue":l[26]||(l[26]=i=>m.value.teknik_not2=i),label:"Üretimin Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{cols:"8",class:"mt-0 pa-0 ps-2"},{default:n(()=>[e(S,null,{default:n(()=>[e(p,{cols:"12",class:"mt-2 pa-0 ps-2 pe-3 text-center"},{default:n(()=>[u("h4",null,"Malzeme Listesi ("+A(J.value.length)+" parça) (Depo ID: "+A(m.value.CIKIS_DEPO)+")",1),u("div",ul,[e(a(ge),{id:"gridMalzemeler",ref_key:"dataGridRefM",ref:gt,"data-source":J.value,"key-expr":"item_id","show-borders":!0,"min-width":400,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Ft,height:"100%","row-alternation-enabled":!0,onRowClick:Gt},{default:n(()=>[e(a(o),{"data-field":"tipi",caption:"TİPİ","data-type":"string",visible:!0,width:65,"cell-template":Bt}),e(a(o),{"data-field":"user_line_no",caption:"LINE NO",width:60,visible:!1}),e(a(o),{"data-field":"item_id",caption:"ITEM ID",width:180,visible:!1}),e(a(o),{"data-field":"stok_kodu",caption:"STOK KODU","min-width":120}),e(a(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":180}),e(a(o),{"data-field":"worder_m_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(a(o),{"data-field":"qty_base_bom",caption:"BOM",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(o),{"data-field":"ihtiyac",caption:"İHTİYAÇ",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(o),{"data-field":"bakiye",caption:"BAKİYE",width:100,"data-type":"number","sort-order":"asc",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(o),{"data-field":"qty_min_inv",visible:!1,caption:"MİN STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(o),{"data-field":"qty_max_inv",visible:!1,caption:"MAX STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(a(be),{visible:!1}),e(a(ke),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Ge,null,{default:n(()=>[e(S,null,{default:n(()=>[e(a(ge),{id:"gridDetay",ref_key:"dataGridRefD",ref:yt,"data-source":Ue.value,"key-expr":"satir_id","show-borders":!0,"min-width":200,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Xe,height:"195"},{surecCellTemplate:n(({data:i})=>[e(Va,{"cell-data":i,"max-deger":100},null,8,["cell-data"])]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(_(),T("i",{key:0,class:Y(["dx-icon","dx-icon-gift"]),style:ye({fontSize:"16px",color:t.staticPrimaryColor})},null,4)):K("",!0)]),default:n(()=>[e(a(o),{"data-field":"IS_ISTASYONU",caption:"İSTASYON ADI",width:180}),e(a(o),{"data-field":"OPERASYON",caption:"OPERASYON",width:180}),e(a(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200}),e(a(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(a(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(a(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(a(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:60,visible:!0}),e(a(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center"}),e(a(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:ae.operasyon,width:60,"cell-template":"aksesuarTemplate",alignment:"center"},null,8,["visible"]),e(a(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HZRL DK","data-type":"number","min-width":90,width:90}),e(a(o),{"data-field":"operasyon_suresi",caption:"OPRS DK","data-type":"number","min-width":90,width:90}),e(a(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140}),e(a(be),{visible:!1}),e(a(ke),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1}),e(Ge,null,{default:n(()=>[e(S)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"])],64)}}});export{ui as default};
