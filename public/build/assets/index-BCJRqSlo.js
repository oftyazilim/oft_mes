import{_ as ne}from"./AppTextField.vue_vue_type_script_setup_true_lang-Bt60128y.js";import{_ as ve}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CXkqurIE.js";import{V as _e}from"./VDialog-BtUd6v9G.js";import{V as j}from"./VCard-jOSqDFZy.js";import{V as L}from"./VCardText-BTgV4Yj0.js";import{V as ge}from"./VForm-jBQkvfCx.js";import{V as Ve}from"./VTable-C5LJLGi8.js";import{V as M}from"./VCheckbox-DWItAVhb.js";import{d as W,r as m,D as q,w as O,g as $,f as t,b as e,e as a,p as k,l as i,aE as y,c as B,F,ay as H,T as K,aF as C,o as c,i as J,m as S,aY as ie,a as Z,y as A}from"./main-B6i6dty6.js";import{a as ye}from"./avatar-1-mrBiEG2D.js";import{a as be}from"./avatar-2-J3iDMrW6.js";import{a as xe}from"./avatar-3-CCfT4M2Q.js";import{a as we}from"./avatar-4-CkT0aFRW.js";import{$ as I}from"./api-BaG_qSR2.js";import{V as ee}from"./VRow-GpTmeG2Y.js";import{V as D}from"./VCol-DxrLDpzA.js";import{V as ue}from"./VSpacer-DOueQTgm.js";import{V as Q}from"./VAvatar-FumarS5E.js";import{a as he}from"./formatters-wLeIh16p.js";import{_ as ke}from"./TablePagination.vue_vue_type_script_setup_true_lang-mlTLyGZN.js";import{_ as Ue}from"./AppSelect.vue_vue_type_script_setup_true_lang-DvyUs27V.js";import{_ as $e}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-DxoWSShu.js";import{V as Ce}from"./VDivider-DloX-zeB.js";import{V as Pe}from"./VDataTableServer-B35Z5rs-.js";import{V as De}from"./VMenu-DPg1S_zJ.js";import{V as Re,a as Y,b as G}from"./VList-BpEisPC2.js";import{V as Ae}from"./VChip-DL9IkIeV.js";import{V as Be}from"./VImg-Bd80kkMc.js";import"./form-DTfmPQ_9.js";import"./VTextField--peWYyMB.js";/* empty css                   */import"./VCounter-C7UQnJ-t.js";import"./index-ejyjG1Sy.js";import"./VField--DKjM9jv.js";import"./easing-Bybner-F.js";import"./VInput-m6lXfH74.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-t35WJ_H0.js";import"./delay-DDoX-FYH.js";import"./lazy-C47masz6.js";import"./scopeId-COhFSpGd.js";import"./dialog-transition-YFZtB8lp.js";import"./createSimpleFunctional-DvncLQDF.js";import"./VCheckboxBtn-IWHDvz8c.js";import"./VSelectionControl-CpC3U0wk.js";import"./index-DWzD-w9h.js";import"./index-CvOPxmL5.js";/* empty css              */import"./helpers-BGv4x_9E.js";import"./VPagination-0xDZa-Ji.js";import"./VSelect-TqOdvFQB.js";import"./validators-BwBNGiur.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-z-S73XMk.js";import"./VNavigationDrawer-z2JkR1oD.js";import"./ssrBoot-BcK0LX2G.js";import"./VDataTable-DnqdHaaY.js";import"./filter-CUXoEex9.js";import"./VSlideGroup-BCHG3aTP.js";const Ee={class:"text-h4 text-center mb-2"},Te={colspan:"3"},Le={class:"d-flex justify-end"},Se={class:"text-h6"},ze={class:"d-flex justify-end"},Fe={class:"d-flex justify-end"},Ie={class:"d-flex justify-end"},je={class:"d-flex align-center justify-center gap-4"},Ne=W({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(N,{emit:U}){const p=N,g=U,d=m([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),f=m(!1),V=m(""),x=m(),b=q(()=>{let s=0;return d.value.forEach(r=>{Object.entries(r).forEach(([h,R])=>{h!=="name"&&R&&s++})}),s}),u=q(()=>b.value>0&&b.value<d.value.length*3);O(f,s=>{d.value=d.value.map(r=>({...r,read:s,write:s,create:s}))}),O(u,()=>{u.value||(f.value=!1)}),O(d,()=>{b.value===d.value.length*3&&(f.value=!0)},{deep:!0}),O(()=>p,()=>{p.rolePermissions&&p.rolePermissions.permissions.length&&(V.value=p.rolePermissions.name,d.value=d.value.map(s=>{var h;const r=(h=p.rolePermissions)==null?void 0:h.permissions.find(R=>R.name===s.name);return r?{...s,...r}:s}))});const w=()=>{var r;const s={name:V.value,permissions:d.value};g("update:rolePermissions",s),g("update:isDialogVisible",!1),f.value=!1,(r=x.value)==null||r.reset()},_=()=>{var s;g("update:isDialogVisible",!1),f.value=!1,(s=x.value)==null||s.reset()};return(s,r)=>{const h=ve,R=ne;return c(),$(_e,{width:s.$vuetify.display.smAndDown?"auto":900,"model-value":p.isDialogVisible,"onUpdate:modelValue":_},{default:t(()=>[e(h,{onClick:_}),e(j,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(L,null,{default:t(()=>[a("h4",Ee,k(p.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(i(ge),{ref_key:"refPermissionForm",ref:x},{default:t(()=>[e(R,{modelValue:i(V),"onUpdate:modelValue":r[0]||(r[0]=v=>y(V)?V.value=v:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(Ve,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Te,[a("div",Le,[e(M,{modelValue:i(f),"onUpdate:modelValue":r[1]||(r[1]=v=>y(f)?f.value=v:null),indeterminate:i(u),"onUpdate:indeterminate":r[2]||(r[2]=v=>y(u)?u.value=v:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(c(!0),B(F,null,H(i(d),v=>(c(),B("tr",{key:v.name},[a("td",null,[a("h6",Se,k(v.name),1)]),a("td",null,[a("div",ze,[e(M,{modelValue:v.read,"onUpdate:modelValue":P=>v.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Fe,[e(M,{modelValue:v.write,"onUpdate:modelValue":P=>v.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Ie,[e(M,{modelValue:v.create,"onUpdate:modelValue":P=>v.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",je,[e(K,{onClick:w},{default:t(()=>r[4]||(r[4]=[C(" Submit ")])),_:1,__:[4]}),e(K,{color:"secondary",variant:"tonal",onClick:_},{default:t(()=>r[5]||(r[5]=[C(" Cancel ")])),_:1,__:[5]})])]),_:1,__:[6]},512)]),_:1,__:[7]})]),_:1})]),_:1},8,["width","model-value"])}}}),Me="/build/assets/girl-using-mobile-CKXBkoEQ.png",Oe={class:"text-body-1"},Qe={class:"v-avatar-group"},qe={class:"d-flex justify-space-between align-center"},Ke={class:"text-h5"},We={class:"d-flex align-center"},Xe=["onClick"],Ye=["src"],Ge=W({__name:"RoleCards",setup(N){const U=m([]),p=m(!1),g=async()=>{try{p.value=!0;const u=(await I("/roles")).roles||[];U.value=u.map(w=>{var _;return{role:w.name,users:[ye,be,xe,we],details:{name:w.name,permissions:((_=w.permissions)==null?void 0:_.map(s=>({name:s.name,read:!0,write:!0,create:!0})))||[]}}})}catch(b){console.error("Error fetching roles:",b)}finally{p.value=!1}};J(()=>{g()});const d=m(!1),f=m(),V=m(!1),x=b=>{d.value=!0,f.value=b};return(b,u)=>{const w=Z("IconBtn"),_=Ne;return c(),B(F,null,[e(ee,null,{default:t(()=>[i(p)?(c(),$(D,{key:0,cols:"12"},{default:t(()=>[e(j,null,{default:t(()=>[e(L,{class:"text-center"},{default:t(()=>[e(ie,{indeterminate:""}),u[4]||(u[4]=a("p",{class:"mt-2"},"Loading roles...",-1))]),_:1,__:[4]})]),_:1})]),_:1})):S("",!0),(c(!0),B(F,null,H(i(U),s=>(c(),$(D,{key:s.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(j,null,{default:t(()=>[e(L,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Oe," Total "+k(s.users.length)+" users ",1),e(ue),a("div",Qe,[(c(!0),B(F,null,H(s.users,(r,h)=>(c(),B(F,{key:r},[s.users.length>4&&s.users.length!==4&&h<3?(c(),$(Q,{key:0,size:"40",image:r},null,8,["image"])):S("",!0),s.users.length===4?(c(),$(Q,{key:1,size:"40",image:r},null,8,["image"])):S("",!0)],64))),128)),s.users.length>4?(c(),$(Q,{key:0,color:b.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+k(s.users.length-3),1)]),_:2},1032,["color"])):S("",!0)])]),_:2},1024),e(L,null,{default:t(()=>[a("div",qe,[a("div",null,[a("h5",Ke,k(s.role),1),a("div",We,[a("a",{href:"javascript:void(0)",onClick:r=>x(s.details)}," Edit Role ",8,Xe)])]),e(w,null,{default:t(()=>[e(A,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(D,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(j,{class:"h-100",ripple:!1},{default:t(()=>[e(ee,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(D,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:i(Me)},null,8,Ye)]),_:1}),e(D,{cols:"7"},{default:t(()=>[e(L,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(K,{size:"small",onClick:u[0]||(u[0]=s=>V.value=!0)},{default:t(()=>u[5]||(u[5]=[C(" Add New Role ")])),_:1,__:[5]}),u[6]||(u[6]=a("div",{class:"text-end"},[C(" Add new role,"),a("br"),C(" if it doesn't exist. ")],-1))]),_:1,__:[6]})]),_:1})]),_:1})]),_:1}),e(_,{"is-dialog-visible":i(V),"onUpdate:isDialogVisible":u[1]||(u[1]=s=>y(V)?V.value=s:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(_,{"is-dialog-visible":i(d),"onUpdate:isDialogVisible":u[2]||(u[2]=s=>y(d)?d.value=s:null),"role-permissions":i(f),"onUpdate:rolePermissions":u[3]||(u[3]=s=>y(f)?f.value=s:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),He={class:"d-flex gap-2 align-center"},Je={class:"d-flex align-center flex-wrap gap-4"},Ze={class:"d-flex align-center gap-x-4"},et={key:1},tt={class:"d-flex flex-column"},lt={class:"text-base"},at={class:"text-sm"},st={class:"d-flex align-center gap-x-2"},ot={class:"text-capitalize text-high-emphasis text-body-1"},rt={class:"text-body-1 text-high-emphasis text-capitalize"},nt=W({__name:"UserList",setup(N){const U=m(""),p=m();m(),m();const g=m(10),d=m(1),f=m(),V=m(),x=m([]),b=n=>{var l,E;f.value=(l=n.sortBy[0])==null?void 0:l.key,V.value=(E=n.sortBy[0])==null?void 0:E.order},u=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],w=m(null),_=m(!1),s=async()=>{try{_.value=!0;const n=await I("/roles/users",{query:{role:p.value||"all",page:d.value,itemsPerPage:g.value,searchQuery:U.value,sortBy:f.value,orderBy:V.value}});w.value=n}catch(n){console.error("Error fetching users:",n)}finally{_.value=!1}},r=q(()=>{var n;return((n=w.value)==null?void 0:n.users)||[]}),h=q(()=>{var n;return((n=w.value)==null?void 0:n.totalUsers)||0});J(()=>{s()});const R=m([{title:"All",value:"all"}]),v=async()=>{try{const n=await I("/roles/available");R.value=[{title:"All",value:"all"},...n.roles.map(l=>({title:l.name,value:l.name}))]}catch(n){console.error("Error fetching roles:",n)}};J(()=>{v()});const P=n=>{const l=n.toLowerCase();return l==="subscriber"?{color:"primary",icon:"tabler-user"}:l==="author"?{color:"warning",icon:"tabler-settings"}:l==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},de=n=>{const l=n.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},X=m(!1),me=async n=>{await I("/apps/users",{method:"POST",body:n}),s()},te=async n=>{await I(`/apps/users/${n}`,{method:"DELETE"});const l=x.value.findIndex(E=>E===n);l!==-1&&x.value.splice(l,1),s()};return(n,l)=>{const E=Ue,pe=ne,ce=Z("RouterLink"),le=Z("IconBtn"),fe=ke;return c(),B("section",null,[e(j,null,{default:t(()=>[e(L,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",He,[l[8]||(l[8]=a("p",{class:"text-body-1 mb-0"}," Show ",-1)),e(E,{"model-value":i(g),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=o=>g.value=parseInt(o,10))},null,8,["model-value"])]),e(ue),a("div",Je,[e(pe,{modelValue:i(U),"onUpdate:modelValue":l[1]||(l[1]=o=>y(U)?U.value=o:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(E,{modelValue:i(p),"onUpdate:modelValue":l[2]||(l[2]=o=>y(p)?p.value=o:null),placeholder:"Select Role",items:i(R),clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue","items"])])]),_:1}),e(Ce),i(_)?(c(),$(L,{key:0,class:"text-center"},{default:t(()=>[e(ie,{indeterminate:""}),l[9]||(l[9]=a("p",{class:"mt-2"},"Loading users...",-1))]),_:1,__:[9]})):S("",!0),i(_)?S("",!0):(c(),$(Pe,{key:1,"items-per-page":i(g),"onUpdate:itemsPerPage":l[4]||(l[4]=o=>y(g)?g.value=o:null),"model-value":i(x),"onUpdate:modelValue":l[5]||(l[5]=o=>y(x)?x.value=o:null),page:i(d),"onUpdate:page":l[6]||(l[6]=o=>y(d)?d.value=o:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:i(r),"items-length":i(h),headers:u,class:"text-no-wrap","show-select":"","onUpdate:options":b},{"item.user":t(({item:o})=>{var T,z;return[a("div",Ze,[e(Q,{size:"34",variant:o.avatar?void 0:"tonal",color:o.avatar?void 0:P(((z=(T=o.roles)==null?void 0:T[0])==null?void 0:z.name)||"user").color},{default:t(()=>[o.avatar?(c(),$(Be,{key:0,src:o.avatar},null,8,["src"])):(c(),B("span",et,k(("avatarText"in n?n.avatarText:i(he))(o.name)),1))]),_:2},1032,["variant","color"]),a("div",tt,[a("h6",lt,[e(ce,{to:{name:"apps-user-view-id",params:{id:o.id}},class:"font-weight-medium text-link"},{default:t(()=>[C(k(o.name),1)]),_:2},1032,["to"])]),a("div",at,k(o.email),1)])])]}),"item.role":t(({item:o})=>{var T,z,ae,se,oe,re;return[a("div",st,[e(A,{size:22,icon:P(((z=(T=o.roles)==null?void 0:T[0])==null?void 0:z.name)||"user").icon,color:P(((se=(ae=o.roles)==null?void 0:ae[0])==null?void 0:se.name)||"user").color},null,8,["icon","color"]),a("div",ot,k(((re=(oe=o.roles)==null?void 0:oe[0])==null?void 0:re.name)||"user"),1)])]}),"item.plan":t(({item:o})=>[a("div",rt,k(o.currentPlan||"Basic"),1)]),"item.status":t(({item:o})=>[e(Ae,{color:de(o.status||"active"),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[C(k(o.status||"active"),1)]),_:2},1032,["color"])]),"item.actions":t(({item:o})=>[e(le,{onClick:T=>te(o.id)},{default:t(()=>[e(A,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(le,null,{default:t(()=>[e(A,{icon:"tabler-eye"})]),_:1}),e(K,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(A,{icon:"tabler-dots-vertical"}),e(De,{activator:"parent"},{default:t(()=>[e(Re,null,{default:t(()=>[e(Y,{to:{name:"apps-user-view-id",params:{id:o.id}}},{prepend:t(()=>[e(A,{icon:"tabler-eye"})]),default:t(()=>[e(G,null,{default:t(()=>l[10]||(l[10]=[C("View")])),_:1,__:[10]})]),_:2},1032,["to"]),e(Y,{link:""},{prepend:t(()=>[e(A,{icon:"tabler-pencil"})]),default:t(()=>[e(G,null,{default:t(()=>l[11]||(l[11]=[C("Edit")])),_:1,__:[11]})]),_:1}),e(Y,{onClick:T=>te(o.id)},{prepend:t(()=>[e(A,{icon:"tabler-trash"})]),default:t(()=>[e(G,null,{default:t(()=>l[12]||(l[12]=[C("Delete")])),_:1,__:[12]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(fe,{page:i(d),"onUpdate:page":l[3]||(l[3]=o=>y(d)?d.value=o:null),"items-per-page":i(g),"total-items":i(h)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"]))]),_:1}),e($e,{"is-drawer-open":i(X),"onUpdate:isDrawerOpen":l[7]||(l[7]=o=>y(X)?X.value=o:null),onUserData:me},null,8,["is-drawer-open"])])}}}),pl=W({__name:"index",setup(N){return(U,p)=>(c(),$(ee,null,{default:t(()=>[e(D,{cols:"12"},{default:t(()=>p[0]||(p[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1,__:[0]}),e(D,{cols:"12"},{default:t(()=>[e(Ge)]),_:1}),e(D,{cols:"12"},{default:t(()=>p[1]||(p[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your company’s administrator accounts and their associate roles. ",-1)])),_:1,__:[1]}),e(D,{cols:"12"},{default:t(()=>[e(nt)]),_:1})]),_:1}))}});export{pl as default};
