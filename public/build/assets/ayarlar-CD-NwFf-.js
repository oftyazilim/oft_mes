import{d as w,r as o,G as z,g as f,f as i,a$ as y,o as n,b as l,e as p,Z as A,ae as V,t as d,l as g,d3 as E,c as k,F,i as K,v as _}from"./main-CGkPrE09.js";import{V as N,a as T}from"./VCard-ph4770N6.js";import{V as h}from"./VSpacer-BRLR6wPP.js";import{V as I}from"./VCardText-C7FC8qmE.js";import{V as $}from"./VTextField-ClNHtNp6.js";import{V as D}from"./VChip-BHfqy44e.js";import{V as G}from"./VAlert-CIknl2CW.js";import{V as S}from"./VDivider-DikLrc5d.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VAvatar-DgmoYuSu.js";import"./VImg-BDyG9ze5.js";/* empty css              *//* empty css                   */import"./VCounter-D5LpeFPP.js";import"./VField-4OkunUwg.js";import"./focus-DEtEw_FI.js";import"./easing-Bybner-F.js";import"./VInput-Dj950Xti.js";import"./form-QdzgWLjn.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-DMTchpLF.js";const L={class:"d-flex gap-2 align-center",style:{"max-inline-size":"560px"}},M={class:"mt-4 d-flex flex-wrap gap-2"},U={key:0,class:"text-medium-emphasis"},Y=w({__name:"ayarlar",setup(Z){const s=o([]),u=o(!1),c=o(!1),m=o(""),r=o(null);z(async()=>{u.value=!0,r.value=null;try{const{data:e}=await y.get("/api/settings/notifications/feedback");s.value=Array.isArray(e==null?void 0:e.recipients)?e.recipients:[]}catch(e){r.value=(e==null?void 0:e.message)||"Yükleme hatası"}finally{u.value=!1}});const v=()=>{const e=m.value.trim();if(!e)return;const a=e.split(/[;,\s]+/).map(t=>t.trim()).filter(Boolean);for(const t of a)x(t)&&!s.value.includes(t)&&s.value.push(t);m.value=""},x=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),b=e=>{s.value.splice(e,1)},C=async()=>{var e,a;c.value=!0,r.value=null;try{await y.put("/api/settings/notifications/feedback",{recipients:s.value})}catch(t){r.value=((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)||(t==null?void 0:t.message)||"Kaydetme hatası"}finally{c.value=!1}};return(e,a)=>(n(),f(N,{loading:u.value},{default:i(()=>[l(T,{class:"d-flex align-center gap-3"},{default:i(()=>[l(A,{icon:"tabler-bell",color:"primary"}),a[2]||(a[2]=p("span",null,"Bildirim Ayarları",-1)),l(h),l(V,{color:"primary",loading:c.value,onClick:C},{default:i(()=>a[1]||(a[1]=[d("Kaydet")])),_:1,__:[1]},8,["loading"])]),_:1,__:[2]}),l(I,null,{default:i(()=>[a[4]||(a[4]=p("p",{class:"text-body-2"}," Geri bildirimler için e-posta alıcılarını yönetin. Birden fazla e-posta ekleyebilirsiniz. ",-1)),p("div",L,[l($,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),label:"E-posta ekle",density:"compact",onKeyup:E(v,["enter"]),"hide-details":""},null,8,["modelValue"]),l(V,{variant:"tonal",onClick:v},{default:i(()=>a[3]||(a[3]=[d("Ekle")])),_:1,__:[3]})]),p("div",M,[(n(!0),k(F,null,K(s.value,(t,B)=>(n(),f(D,{key:t,closable:"","onClick:close":q=>b(B),color:"primary",variant:"tonal"},{default:i(()=>[d(_(t),1)]),_:2},1032,["onClick:close"]))),128)),s.value.length?g("",!0):(n(),k("span",U,"Henüz alıcı eklenmedi."))]),r.value?(n(),f(G,{key:0,type:"error",class:"mt-4",density:"compact"},{default:i(()=>[d(_(r.value),1)]),_:1})):g("",!0),l(S,{class:"my-6"}),a[5]||(a[5]=p("div",{class:"text-caption"}," İpucu: Birden fazla alıcıyı virgül, noktalı virgül veya boşlukla ayırarak tek seferde ekleyebilirsiniz. ",-1))]),_:1,__:[4,5]})]),_:1},8,["loading"]))}}),fe=H(Y,[["__scopeId","data-v-cae55c3b"]]);export{fe as default};
