import{d as T,r as s,u as _,i as C,s as g,q as E,g as S,o as I,f as l,b as e,l as t,e as d}from"./main-B6i6dty6.js";import{u as L}from"./pageTitle-nrhlDzjY.js";import{D as P}from"./button-hihoso2m.js";import{s as R,q as Y,t as A,r as F,D as a,f as V,g as B,h as G,i as K,j as N,k as M,d as O,m as U,n as W,w as j,p as q,b as H,c as n}from"./data-grid-DQPF9vTi.js";import{D as z}from"./load-panel-BkRCX7NH.js";import{e as Z}from"./export_data_grid-DW-iD1hi.js";import"./dom_component-D3V0Bbzx.js";import"./m_select_box-CIeh4Pc2.js";import"./m_resize_observer-D2Sp4xct.js";import"./format_helper-BcnKhHHT.js";import{n as J}from"./notify-CxCCselG.js";import{e as Q}from"./exceljs.min-Dm3_meIG.js";import{s as X}from"./FileSaver-CQu8bA20.js";import{V as $}from"./VCol-DxrLDpzA.js";import{V as ee}from"./VRow-GpTmeG2Y.js";import"./index-BKqjtbmz.js";import"./m_row_dragging-C7q_nebm.js";import"./themes-i9g-CTBc.js";import"./overlay-BFs2HduG.js";import"./editor-B52tXpDq.js";import"./export_merged_ranges_manager-BVzTSjdv.js";import"./language_codes-CZTcVhrU.js";import"./_commonjsHelpers-D6-XlEtG.js";/* empty css              */const te="/api/loglar",Ee=T({__name:"loglar",setup(ae){const u=L();u.setTitle("Kullanıcı Logları"),u.setToplam(""),document.title="OFT - Kullanıcı Logları";const b=s(!0),m=s([]),p=s(!1),c=s(null),f=_(),y=o=>{o.rowType==="data"&&o.column.dataField==="eylem"&&(o.cellElement.style.fontWeight="bold")},D=o=>{},w=()=>{x()},x=async()=>{var o;f.start();try{const i=await g.get(te);m.value=i.data.data;const r=(o=c.value)==null?void 0:o.instance;r==null||r.refresh()}catch(i){console.error("Error fetching data:",i),J("Veri alınamadı","error",1500)}finally{f.stop()}};C(()=>{x(),g.post("/api/log-kayit",{userId:v.value.id,sayfa:"Kullanıcı Logları",eylem:"Yükleme"})});const v=E("userData"),k=o=>{const i=new Q.Workbook,r=i.addWorksheet("KullaniciLoglari");Z({component:o.component,worksheet:r,autoFilterEnabled:!0}).then(()=>{i.xlsx.writeBuffer().then(h=>{X(new Blob([h],{type:"application/octet-stream"}),"KullaniciLoglari.xlsx")})}),o.cancel=!0};return(o,i)=>(I(),S(ee,null,{default:l(()=>[e($,{cols:"12"},{default:l(()=>[e(t(R),{id:"grid-satis",ref_key:"dataGridRef",ref:c,"data-source":m.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,onExporting:k,onFocusedRowChanged:D,onCellPrepared:y},{yenileTemplate:l(()=>[e(t(P),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim",onClick:w})]),menuYenileTemplate:l(()=>i[1]||(i[1]=[d("div",{style:{display:"flex","align-items":"center"}},[d("i",{class:"dx-icon dx-icon-refresh"}),d("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),default:l(()=>[e(t(Y),null,{default:l(()=>[e(t(A),{column:"unvan","summary-type":"count","display-format":"Toplam: {0} kayıt"}),e(t(F),{column:"unvan","summary-type":"count","display-format":"Grup: {0} kayıt"})]),_:1}),e(t(a),{"data-field":"id",caption:"ID",visible:!0,width:"90"}),e(t(a),{"data-field":"user_id",caption:"USER ID",visible:!0,width:"80"}),e(t(a),{"data-field":"name",caption:"KULLANICI",visible:!0,width:"130"}),e(t(a),{"data-field":"tarih",caption:"TARİH","data-type":"date",width:150,visible:!0,alignment:"center",format:{formatter:r=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(r)).replace(/\//g,".")}},null,8,["format"]),e(t(a),{"data-field":"sayfa",caption:"SAYFA",visible:!0,width:"150"}),e(t(a),{"data-field":"eylem",caption:"EYLEM",visible:!0,width:"150"}),e(t(a),{"data-field":"ip",caption:"IP",visible:!0,width:"120"}),e(t(a),{"data-field":"unvan",caption:"ÜNVAN",visible:!0,width:"200"}),e(t(a),{"data-field":"proses",caption:"PROSES",visible:!0,width:"190"}),e(t(a),{"data-field":"ismerkezi_id",caption:"İŞ MERKEZİ ID",visible:!0,width:"90"}),e(t(a),{"data-field":"istasyon_id",caption:"İSTASYON ID",visible:!0,width:"90"}),e(t(a),{"data-field":"method",caption:"METOD",visible:!0,width:"90"}),e(t(a),{"data-field":"komut",caption:"KOMUT",visible:!0,width:"auto"}),e(t(V),{"auto-expand-all":b.value},null,8,["auto-expand-all"]),e(t(B),{visible:!0}),e(t(G),{visible:!0}),e(t(K),{visible:!0}),e(t(N),{visible:!0}),e(t(M),{visible:!0,width:240,placeholder:"Ara..."}),e(t(O),{mode:"virtual"}),e(t(U),{enabled:!0,"allow-export-selected-data":!1}),e(t(W),{height:"540px",enabled:!0,mode:"select"},{default:l(()=>[e(t(j),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(q),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(H),null,{default:l(()=>[e(t(n),{location:"before",name:"groupPanel"}),e(t(n),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate"}),e(t(n),{name:"exportButton"}),e(t(n),{name:"columnChooserButton"}),e(t(n),{name:"searchPanel"})]),_:1}),e(t(z),{visible:p.value,"onUpdate:visible":i[0]||(i[0]=r=>p.value=r),"show-indicator":!0,"show-pane":!0,shading:!0,message:"Yükleniyor...",position:{of:"#grid-satis"}},null,8,["visible"])]),_:1},8,["data-source"])]),_:1})]),_:1}))}});export{Ee as default};
