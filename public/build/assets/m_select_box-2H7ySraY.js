import{bd as v,dM as il,de as E,dl as z,dV as nl,db as D,dO as Ho,dm as $e,dQ as be,dX as P,dj as M,dK as Et,dD as $,dP as Fo,d$ as ol,dq as b,dF as Ee,dJ as Vt,e0 as Oi,dv as Ri,dG as J,dk as H,dE as le,dd as S,dC as Kt,dx as Bs,dg as w,dB as W,e1 as We,e2 as rl,e3 as mn,dc as st,e4 as al,dH as ge,e5 as Pt,e6 as Vo,e7 as Wt,dA as ll,e8 as ti,e9 as Ko,ea as pi,eb as zt,ec as gn,dN as yt,ed as vn,di as He,ee as dl,dy as _i,dI as bn,dL as he,ef as cl,eg as Cn,eh as hl}from"./main-Cc9Orlpg.js";import{G as Wo,r as Bi,C as xe,E as ul,W as Ps,A as pl,m as we,l as es,c as et,d as _l,O as zo,f as ps,D as No,a as Uo,b as Go,e as fl,i as ml,h as gl,j as vl,g as bl,p as yn}from"./overlay-C9SHwVv-.js";import{o as _,d as F,u as Cl,t as B,v as yl,_ as Ye,D as Pi,K as Sl,q as O,a as I,e as g,w as me,x as vt,y as fi,z as Rt,A as X,B as jo,C as Sn,G as In,H as En,I as xn,J as wn,L as mi,M as Il,N as ee,O as j,P as Tn,Q as bs,R as El,r as oe,S as qo,g as Ne,T as Yo,f as xl,U as dt,V as wl,W as Tl,X as Dl,Y as Al,Z as kl,$ as $l,p as ce,a0 as Dn,a1 as An,s as xt,m as ie,a2 as kn,a3 as Ol,a4 as L,k as K,a5 as Xo,a6 as Rl,a7 as Nt,a8 as Ue,a9 as $n,n as Mi,E as Bl,aa as Pl,l as de,ab as Me,ac as On,ad as Rn,ae as Bn,af as it,ag as Ml,ah as si,ai as Ll,aj as Hl,ak as ii,al as Pn,am as Fl,an as Mn,F as Vl,i as Kl,ao as Wl}from"./ui.errors-BfAujpM4.js";import{a as ze,c as Q,i as wt,b as zl,d as Cs,w as Nl}from"./themes-zB3ZtWhL.js";import{V as ys,E as Ms,a as Ul}from"./editor-BJEWTaGX.js";import{A as Qo,r as Ss}from"./m_resize_observer-C1MyCSBi.js";const Ls=i=>!i||typeof i!="string"?!1:/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(i)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(i)?"image":/^[\w-_]+$/.test(i)?"dxIcon":/^\s?([\w-_:]\s?)+$/.test(i)?"fontIcon":!1,Gl=i=>{switch(Ls(i)){case"image":return _("<img>").attr("src",i).addClass("dx-icon");case"fontIcon":return _("<i>").addClass(`dx-icon ${i}`);case"dxIcon":return _("<i>").addClass(`dx-icon dx-icon-${i}`);case"svg":return _("<i>").addClass("dx-icon dx-svg-icon").append(i);default:return null}};var Ut=Array.isArray;function Is(i){var e=typeof i;return e==="string"||e==="number"}function A(i){return i==null}function Gt(i){return i===null||i===!1||i===!0||i===void 0}function k(i){return typeof i=="function"}function jt(i){return typeof i=="string"}function jl(i){return typeof i=="number"}function ne(i){return i===null}function ql(i){return i===void 0}function Xe(i,e){var t={};if(i)for(var s in i)t[s]=i[s];if(e)for(var n in e)t[n]=e[n];return t}function Li(i){return!ne(i)&&typeof i=="object"}var N={},Yl="$F",ct=function(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]};function Hi(i){return i.substring(2).toLowerCase()}function Jo(i,e){i.appendChild(e)}function Hs(i,e,t){ne(t)?Jo(i,e):i.insertBefore(e,t)}function Xl(i,e){return e?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}function Ql(i,e,t){i.replaceChild(e,t)}function Zo(i,e){i.removeChild(e)}function er(i){for(var e=0;e<i.length;e++)i[e]()}function Jl(i,e,t){var s=i.children;return t&4?s.$LI:t&8192?i.childFlags===2?s:s[e?0:s.length-1]:s}function ae(i,e){for(var t;i;){if(t=i.flags,t&1521)return i.dom;i=Jl(i,e,t)}return null}function Fs(i,e){for(var t=i.length,s;(s=i.pop())!==void 0;)s(function(){--t<=0&&k(e)&&e()})}function Zl(i){for(var e=0;e<i.length;e++)i[e].fn();for(var t=0;t<i.length;t++){var s=i[t];Hs(s.parent,s.dom,s.next)}i.splice(0,i.length)}function Vs(i,e,t){do{var s=i.flags;if(s&1521){(!t||i.dom.parentNode===e)&&Zo(e,i.dom);return}var n=i.children;if(s&4&&(i=n.$LI),s&8&&(i=n),s&8192)if(i.childFlags===2)i=n;else{for(var o=0,r=n.length;o<r;++o)Vs(n[o],e,!1);return}}while(i)}function ed(i,e){return function(){Vs(i,e,!0)}}function Ks(i,e,t){t.componentWillDisappear.length>0?Fs(t.componentWillDisappear,ed(i,e)):Vs(i,e,!1)}function td(i,e,t,s,n,o,r,a){i.componentWillMove.push({dom:s,fn:function(){r&4?t.componentWillMove(e,n,s):r&8&&t.onComponentWillMove(e,n,s,a)},next:o,parent:n})}function tr(i,e,t,s,n){var o,r,a=e.flags;do{var l=e.flags;if(l&1521){!A(o)&&(k(o.componentWillMove)||k(o.onComponentWillMove))?td(n,i,o,e.dom,t,s,a,r):Hs(t,e.dom,s);return}var d=e.children;if(l&4)o=e.children,r=e.props,e=d.$LI;else if(l&8)o=e.ref,r=e.props,e=d;else if(l&8192)if(e.childFlags===2)e=d;else{for(var c=0,u=d.length;c<u;++c)tr(i,d[c],t,s,n);return}}while(e)}function sr(i,e,t){return i.constructor.getDerivedStateFromProps?Xe(t,i.constructor.getDerivedStateFromProps(e,t)):t}var qt={v:!1},Ln={componentComparator:null,createVNode:null,renderComplete:null};function Mt(i,e){i.textContent=e}function ir(i,e){return Li(i)&&i.event===e.event&&i.data===e.data}function nr(i,e){for(var t in e)ql(i[t])&&(i[t]=e[t]);return i}function Fi(i,e){return!!k(i)&&(i(e),!0)}var Lt="$";function Ws(i,e,t,s,n,o,r,a){this.childFlags=i,this.children=e,this.className=t,this.dom=null,this.flags=s,this.key=n===void 0?null:n,this.props=o===void 0?null:o,this.ref=r===void 0?null:r,this.type=a}function te(i,e,t,s,n,o,r,a){var l=n===void 0?1:n,d=new Ws(l,s,t,i,r,o,a,e);return l===0&&rr(d,d.children),d}function sd(i,e,t){if(i&4)return t;var s=(i&32768?e.render:e).defaultHooks;return A(s)?t:A(t)?s:nr(t,s)}function id(i,e,t){var s=(i&32768?e.render:e).defaultProps;return A(s)?t:A(t)?Xe(s,null):nr(t,s)}function nd(i,e){return i&12?i:e.prototype&&e.prototype.render?4:e.render?32776:8}function ve(i,e,t,s,n){i=nd(i,e);var o=new Ws(1,null,null,i,s,id(i,e,t),sd(i,e,n),e);return o}function ts(i,e){return new Ws(1,A(i)||i===!0||i===!1?"":i,null,16,e,null,null,null)}function Tt(i,e,t){var s=te(8192,8192,null,i,e,null,t,null);switch(s.childFlags){case 1:s.children=zs(),s.childFlags=2;break;case 16:s.children=[ts(i)],s.childFlags=4;break}return s}function Ge(i){var e=i.props;if(e){var t=i.flags;t&481&&(e.children!==void 0&&A(i.children)&&rr(i,e.children),e.className!==void 0&&(A(i.className)&&(i.className=e.className||null),e.className=void 0)),e.key!==void 0&&(i.key=e.key,e.key=void 0),e.ref!==void 0&&(t&8?i.ref=Xe(i.ref,e.ref):i.ref=e.ref,e.ref=void 0)}return i}function od(i){var e=i.children,t=i.childFlags;return Tt(t===2?U(e):e.map(U),t,i.key)}function U(i){var e=i.flags&-16385,t=i.props;if(e&14&&!ne(t)){var s=t;t={};for(var n in s)t[n]=s[n]}return(e&8192)===0?new Ws(i.childFlags,i.children,i.className,e,i.key,t,i.ref,i.type):od(i)}function zs(){return ts("",null)}function or(i,e,t,s){for(var n=i.length;t<n;t++){var o=i[t];if(!Gt(o)){var r=s+Lt+t;if(Ut(o))or(o,e,0,r);else{if(Is(o))o=ts(o,r);else{var a=o.key,l=jt(a)&&a[0]===Lt;(o.flags&81920||l)&&(o=U(o)),o.flags|=65536,l?a.substring(0,s.length)!==s&&(o.key=s+a):ne(a)?o.key=r:o.key=s+a}e.push(o)}}}}function rd(i){switch(i){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case Yl:return 8192;default:return 1}}function rr(i,e){var t,s=1;if(Gt(e))t=e;else if(Is(e))s=16,t=e;else if(Ut(e)){for(var n=e.length,o=0;o<n;++o){var r=e[o];if(Gt(r)||Ut(r)){t=t||e.slice(0,o),or(e,t,o,"");break}else if(Is(r))t=t||e.slice(0,o),t.push(ts(r,Lt+o));else{var a=r.key,l=(r.flags&81920)>0,d=ne(a),c=jt(a)&&a[0]===Lt;l||d||c?(t=t||e.slice(0,o),(l||c)&&(r=U(r)),(d||c)&&(r.key=Lt+o),t.push(r)):t&&t.push(r),r.flags|=65536}}t=t||e,t.length===0?s=1:s=8}else t=e,t.flags|=65536,e.flags&81920&&(t=U(e)),s=2;return i.children=t,i.childFlags=s,i}function Ns(i){return Gt(i)||Is(i)?ts(i,null):Ut(i)?Tt(i,0,null):i.flags&16384?U(i):i}var Je="http://www.w3.org/1999/xlink",ni="http://www.w3.org/XML/1998/namespace",Hn={"xlink:actuate":Je,"xlink:arcrole":Je,"xlink:href":Je,"xlink:role":Je,"xlink:show":Je,"xlink:title":Je,"xlink:type":Je,"xml:base":ni,"xml:lang":ni,"xml:space":ni};function Us(i){return{onClick:i,onDblClick:i,onFocusIn:i,onFocusOut:i,onKeyDown:i,onKeyPress:i,onKeyUp:i,onMouseDown:i,onMouseMove:i,onMouseUp:i,onTouchEnd:i,onTouchMove:i,onTouchStart:i}}var ar=Us(0),gi=Us(null),lr=Us(!0);function Fn(i,e){var t=e.$EV;return t||(t=e.$EV=Us(null)),t[i]||++ar[i]===1&&(gi[i]=_d(i)),t}function dr(i,e){var t=e.$EV;t&&t[i]&&(--ar[i]===0&&(document.removeEventListener(Hi(i),gi[i]),gi[i]=null),t[i]=null)}function ad(i,e,t,s){if(k(t))Fn(i,s)[i]=t;else if(Li(t)){if(ir(e,t))return;Fn(i,s)[i]=t}else dr(i,s)}function ld(i){return k(i.composedPath)?i.composedPath()[0]:i.target}function cr(i,e,t,s){var n=ld(i);do{if(e&&n.disabled)return;var o=n.$EV;if(o){var r=o[t];if(r&&(s.dom=n,r.event?r.event(r.data,i):r(i),i.cancelBubble))return}n=n.parentNode}while(!ne(n))}function dd(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function cd(){return this.defaultPrevented}function hd(){return this.cancelBubble}function hr(i){var e={dom:document};return i.isDefaultPrevented=cd,i.isPropagationStopped=hd,i.stopPropagation=dd,Object.defineProperty(i,"currentTarget",{configurable:!0,get:function(){return e.dom}}),e}function ud(i){return function(e){if(e.button!==0){e.stopPropagation();return}cr(e,!0,i,hr(e))}}function pd(i){return function(e){cr(e,!1,i,hr(e))}}function _d(i){var e=i==="onClick"||i==="onDblClick"?ud(i):pd(i);return document.addEventListener(Hi(i),e),e}function fd(i,e){var t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function Vn(i,e,t){if(i[e]){var s=i[e];s.event?s.event(s.data,t):s(t)}else{var n=e.toLowerCase();i[n]&&i[n](t)}}function ss(i,e){var t=function(n){var o=this.$V;if(o){var r=o.props||N,a=o.dom;if(jt(i))Vn(r,i,n);else for(var l=0;l<i.length;++l)Vn(r,i[l],n);if(k(e)){var d=this.$V,c=d.props||N;e(c,a,!1,d)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function nt(i,e,t){var s="$"+e,n=i[s];if(n){if(n[1].wrapped)return;i.removeEventListener(n[0],n[1]),i[s]=null}k(t)&&(i.addEventListener(e,t),i[s]=[e,t])}function Vi(i){return i==="checkbox"||i==="radio"}var md=ss("onInput",Ki),gd=ss(["onClick","onChange"],Ki);function ur(i){i.stopPropagation()}ur.wrapped=!0;function vd(i,e){Vi(e.type)?(nt(i,"change",gd),nt(i,"click",ur)):nt(i,"input",md)}function Ki(i,e){var t=i.type,s=i.value,n=i.checked,o=i.multiple,r=i.defaultValue,a=!A(s);t&&t!==e.type&&e.setAttribute("type",t),!A(o)&&o!==e.multiple&&(e.multiple=o),!A(r)&&!a&&(e.defaultValue=r+""),Vi(t)?(a&&(e.value=s),A(n)||(e.checked=n)):a&&e.value!==s?(e.defaultValue=s,e.value=s):A(n)||(e.checked=n)}function Bt(i,e){if(i.type==="option")bd(i,e);else{var t=i.children,s=i.flags;if(s&4)Bt(t.$LI,e);else if(s&8)Bt(t,e);else if(i.childFlags===2)Bt(t,e);else if(i.childFlags&12)for(var n=0,o=t.length;n<o;++n)Bt(t[n],e)}}function bd(i,e){var t=i.props||N,s=i.dom;s.value=t.value,t.value===e||Ut(e)&&e.indexOf(t.value)!==-1?s.selected=!0:(!A(e)||!A(t.selected))&&(s.selected=t.selected||!1)}var Cd=ss("onChange",pr);function yd(i){nt(i,"change",Cd)}function pr(i,e,t,s){var n=!!i.multiple;!A(i.multiple)&&n!==e.multiple&&(e.multiple=n);var o=i.selectedIndex;o===-1&&(e.selectedIndex=-1);var r=s.childFlags;if(r!==1){var a=i.value;jl(o)&&o>-1&&e.options[o]&&(a=e.options[o].value),t&&A(a)&&(a=i.defaultValue),Bt(s,a)}}var Sd=ss("onInput",_r),Id=ss("onChange");function Ed(i,e){nt(i,"input",Sd),e.onChange&&nt(i,"change",Id)}function _r(i,e,t){var s=i.value,n=e.value;if(A(s)){if(t){var o=i.defaultValue;!A(o)&&o!==n&&(e.defaultValue=o,e.value=o)}}else n!==s&&(e.defaultValue=s,e.value=s)}function fr(i,e,t,s,n,o){i&64?Ki(s,t):i&256?pr(s,t,n,e):i&128&&_r(s,t,n),o&&(t.$V=e)}function xd(i,e,t){i&64?vd(e,t):i&256?yd(e):i&128&&Ed(e,t)}function mr(i){return i.type&&Vi(i.type)?!A(i.checked):!A(i.value)}function pe(){return{current:null}}function Es(i){i&&!Fi(i,null)&&i.current&&(i.current=null)}function is(i,e,t){i&&(k(i)||i.current!==void 0)&&t.push(function(){!Fi(i,e)&&i.current!==void 0&&(i.current=e)})}function fe(i,e,t){Oe(i,t),Ks(i,e,t)}function Oe(i,e){var t=i.flags,s=i.children,n;if(t&481){n=i.ref;var o=i.props;Es(n);var r=i.childFlags;if(!ne(o))for(var a=Object.keys(o),l=0,d=a.length;l<d;l++){var c=a[l];lr[c]&&dr(c,i.dom)}r&12?Yt(s,e):r===2&&Oe(s,e)}else if(s)if(t&4){k(s.componentWillUnmount)&&s.componentWillUnmount();var u=e;k(s.componentWillDisappear)&&(u=new ct,Kn(e,s,s.$LI.dom,t,void 0)),Es(i.ref),s.$UN=!0,Oe(s.$LI,u)}else if(t&8){var h=e;if(n=i.ref,!A(n)){var p=null;k(n.onComponentWillUnmount)&&(p=ae(i,!0),n.onComponentWillUnmount(p,i.props||N)),k(n.onComponentWillDisappear)&&(h=new ct,p=p||ae(i,!0),Kn(e,n,p,t,i.props))}Oe(s,h)}else t&1024?fe(s,i.ref,e):t&8192&&i.childFlags&12&&Yt(s,e)}function Yt(i,e){for(var t=0,s=i.length;t<s;++t)Oe(i[t],e)}function wd(i,e){return function(){if(e)for(var t=0;t<i.length;t++){var s=i[t];Vs(s,e,!1)}}}function _s(i,e,t){t.componentWillDisappear.length>0?Fs(t.componentWillDisappear,wd(e,i)):i.textContent=""}function fs(i,e,t,s){Yt(t,s),e.flags&8192?Ks(e,i,s):_s(i,t,s)}function Kn(i,e,t,s,n){i.componentWillDisappear.push(function(o){s&4?e.componentWillDisappear(t,o):s&8&&e.onComponentWillDisappear(t,n,o)})}function Td(i){var e=i.event;return function(t){e(i.data,t)}}function Dd(i,e,t,s){if(Li(t)){if(ir(e,t))return;t=Td(t)}nt(s,Hi(i),t)}function Ad(i,e,t){if(A(e)){t.removeAttribute("style");return}var s=t.style,n,o;if(jt(e)){s.cssText=e;return}if(!A(i)&&!jt(i)){for(n in e)o=e[n],o!==i[n]&&s.setProperty(n,o);for(n in i)A(e[n])&&s.removeProperty(n)}else for(n in e)o=e[n],s.setProperty(n,o)}function kd(i,e,t,s,n){var o=i&&i.__html||"",r=e&&e.__html||"";o!==r&&!A(r)&&!fd(s,r)&&(ne(t)||(t.childFlags&12?Yt(t.children,n):t.childFlags===2&&Oe(t.children,n),t.children=null,t.childFlags=1),s.innerHTML=r)}function vi(i,e,t,s,n,o,r,a){switch(i){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":s.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":s[i]=!!t;break;case"defaultChecked":case"value":case"volume":if(o&&i==="value")break;var l=A(t)?"":t;s[i]!==l&&(s[i]=l);break;case"style":Ad(e,t,s);break;case"dangerouslySetInnerHTML":kd(e,t,r,s,a);break;default:lr[i]?ad(i,e,t,s):i.charCodeAt(0)===111&&i.charCodeAt(1)===110?Dd(i,e,t,s):A(t)?s.removeAttribute(i):n&&Hn[i]?s.setAttributeNS(Hn[i],i,t):s.setAttribute(i,t);break}}function gr(i,e,t,s,n,o){var r=!1,a=(e&448)>0;a&&(r=mr(t),r&&xd(e,s,t));for(var l in t)vi(l,null,t[l],s,n,r,null,o);a&&fr(e,i,s,t,!0,r)}function vr(i,e,t){var s=Ns(i.render(e,i.state,t)),n=t;return k(i.getChildContext)&&(n=Xe(t,i.getChildContext())),i.$CX=n,s}function br(i,e,t,s,n,o){var r=new e(t,s),a=r.$N=!!(e.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(r.$SVG=n,r.$L=o,i.children=r,r.$BS=!1,r.context=s,r.props===N&&(r.props=t),a)r.state=sr(r,t,r.state);else if(k(r.componentWillMount)){r.$BR=!0,r.componentWillMount();var l=r.$PS;if(!ne(l)){var d=r.state;if(ne(d))r.state=l;else for(var c in l)d[c]=l[c];r.$PS=null}r.$BR=!1}return r.$LI=vr(r,t,s),r}function Wi(i,e){var t=i.props||N;return i.flags&32768?i.type.render(t,i.ref,e):i.type(t,e)}function G(i,e,t,s,n,o,r){var a=i.flags|=16384;a&481?yr(i,e,t,s,n,o,r):a&4?Rd(i,e,t,s,n,o,r):a&8?Bd(i,e,t,s,n,o,r):a&16?Cr(i,e,n):a&8192?Od(i,t,e,s,n,o,r):a&1024&&$d(i,t,e,n,o,r)}function $d(i,e,t,s,n,o){G(i.children,i.ref,e,!1,null,n,o);var r=zs();Cr(r,t,s),i.dom=r.dom}function Od(i,e,t,s,n,o,r){var a=i.children,l=i.childFlags;l&12&&a.length===0&&(l=i.childFlags=2,a=i.children=zs()),l===2?G(a,t,e,s,n,o,r):ot(a,t,e,s,n,o,r)}function Cr(i,e,t){var s=i.dom=document.createTextNode(i.children);ne(e)||Hs(e,s,t)}function yr(i,e,t,s,n,o,r){var a=i.flags,l=i.props,d=i.className,c=i.childFlags,u=i.dom=Xl(i.type,s=s||(a&32)>0),h=i.children;if(!A(d)&&d!==""&&(s?u.setAttribute("class",d):u.className=d),c===16)Mt(u,h);else if(c!==1){var p=s&&i.type!=="foreignObject";c===2?(h.flags&16384&&(i.children=h=U(h)),G(h,u,t,p,null,o,r)):(c===8||c===4)&&ot(h,u,t,p,null,o,r)}ne(e)||Hs(e,u,n),ne(l)||gr(i,a,l,u,s,r),is(i.ref,u,o)}function ot(i,e,t,s,n,o,r){for(var a=0;a<i.length;++a){var l=i[a];l.flags&16384&&(i[a]=l=U(l)),G(l,e,t,s,n,o,r)}}function Rd(i,e,t,s,n,o,r){var a=br(i,i.type,i.props||N,t,s,o),l=r;k(a.componentDidAppear)&&(l=new ct),G(a.$LI,e,a.$CX,s,n,o,l),Ir(i.ref,a,o,r)}function Bd(i,e,t,s,n,o,r){var a=i.ref,l=r;!A(a)&&k(a.onComponentDidAppear)&&(l=new ct),G(i.children=Ns(Wi(i,t)),e,t,s,n,o,l),Er(i,o,r)}function Pd(i){return function(){i.componentDidMount()}}function Sr(i,e,t,s,n){i.componentDidAppear.push(function(){s&4?e.componentDidAppear(t):s&8&&e.onComponentDidAppear(t,n)})}function Ir(i,e,t,s){is(i,e,t),k(e.componentDidMount)&&t.push(Pd(e)),k(e.componentDidAppear)&&Sr(s,e,e.$LI.dom,4,void 0)}function Md(i,e){return function(){i.onComponentDidMount(ae(e,!0),e.props||N)}}function Er(i,e,t){var s=i.ref;A(s)||(Fi(s.onComponentWillMount,i.props||N),k(s.onComponentDidMount)&&e.push(Md(s,i)),k(s.onComponentDidAppear)&&Sr(t,s,ae(i,!0),8,i.props))}function Ld(i,e,t,s,n,o,r){Oe(i,r),(e.flags&i.flags&1521)!==0?(G(e,null,s,n,null,o,r),Ql(t,e.dom,i.dom)):(G(e,t,s,n,ae(i,!0),o,r),Ks(i,t,r))}function Re(i,e,t,s,n,o,r,a){var l=e.flags|=16384;i.flags!==l||i.type!==e.type||i.key!==e.key||l&2048?i.flags&16384?Ld(i,e,t,s,n,r,a):G(e,t,s,n,o,r,a):l&481?Wd(i,e,s,n,l,r,a):l&4?Ud(i,e,t,s,n,o,r,a):l&8?Gd(i,e,t,s,n,o,r,a):l&16?jd(i,e):l&8192?Vd(i,e,t,s,n,r,a):Kd(i,e,s,r,a)}function Hd(i,e,t){i!==e&&(i!==""?t.firstChild.nodeValue=e:Mt(t,e))}function Fd(i,e){i.textContent!==e&&(i.textContent=e)}function Vd(i,e,t,s,n,o,r){var a=i.children,l=e.children,d=i.childFlags,c=e.childFlags,u=null;c&12&&l.length===0&&(c=e.childFlags=2,l=e.children=zs());var h=(c&2)!==0;if(d&12){var p=a.length;(d&8&&c&8||h||!h&&l.length>p)&&(u=ae(a[p-1],!1).nextSibling)}zi(d,c,a,l,t,s,n,u,i,o,r)}function Kd(i,e,t,s,n){var o=i.ref,r=e.ref,a=e.children;if(zi(i.childFlags,e.childFlags,i.children,a,o,t,!1,null,i,s,n),e.dom=i.dom,o!==r&&!Gt(a)){var l=a.dom;Zo(o,l),Jo(r,l)}}function Wd(i,e,t,s,n,o,r){var a=e.dom=i.dom,l=i.props,d=e.props,c=!1,u=!1,h;if(s=s||(n&32)>0,l!==d){var p=l||N;if(h=d||N,h!==N){c=(n&448)>0,c&&(u=mr(h));for(var m in h){var f=p[m],y=h[m];f!==y&&vi(m,f,y,a,s,u,i,r)}}if(p!==N)for(var C in p)A(h[C])&&!A(p[C])&&vi(C,p[C],null,a,s,u,i,r)}var T=e.children,x=e.className;i.className!==x&&(A(x)?a.removeAttribute("class"):s?a.setAttribute("class",x):a.className=x),n&4096?Fd(a,T):zi(i.childFlags,e.childFlags,i.children,T,a,t,s&&e.type!=="foreignObject",null,i,o,r),c&&fr(n,e,a,h,!1,u);var re=e.ref,q=i.ref;q!==re&&(Es(q),is(re,a,o))}function zd(i,e,t,s,n,o,r){Oe(i,r),ot(e,t,s,n,ae(i,!0),o,r),Ks(i,t,r)}function zi(i,e,t,s,n,o,r,a,l,d,c){switch(i){case 2:switch(e){case 2:Re(t,s,n,o,r,a,d,c);break;case 1:fe(t,n,c);break;case 16:Oe(t,c),Mt(n,s);break;default:zd(t,s,n,o,r,d,c);break}break;case 1:switch(e){case 2:G(s,n,o,r,a,d,c);break;case 1:break;case 16:Mt(n,s);break;default:ot(s,n,o,r,a,d,c);break}break;case 16:switch(e){case 16:Hd(t,s,n);break;case 2:_s(n,t,c),G(s,n,o,r,a,d,c);break;case 1:_s(n,t,c);break;default:_s(n,t,c),ot(s,n,o,r,a,d,c);break}break;default:switch(e){case 16:Yt(t,c),Mt(n,s);break;case 2:fs(n,l,t,c),G(s,n,o,r,a,d,c);break;case 1:fs(n,l,t,c);break;default:var u=t.length|0,h=s.length|0;u===0?h>0&&ot(s,n,o,r,a,d,c):h===0?fs(n,l,t,c):e===8&&i===8?Yd(t,s,n,o,r,u,h,a,l,d,c):qd(t,s,n,o,r,u,h,a,d,c);break}break}}function Nd(i,e,t,s,n){n.push(function(){i.componentDidUpdate(e,t,s)})}function xr(i,e,t,s,n,o,r,a,l,d){var c=i.state,u=i.props,h=!!i.$N,p=k(i.shouldComponentUpdate);if(h&&(e=sr(i,t,e!==c?Xe(c,e):e)),r||!p||p&&i.shouldComponentUpdate(t,e,n)){!h&&k(i.componentWillUpdate)&&i.componentWillUpdate(t,e,n),i.props=t,i.state=e,i.context=n;var m=null,f=vr(i,t,n);h&&k(i.getSnapshotBeforeUpdate)&&(m=i.getSnapshotBeforeUpdate(u,c)),Re(i.$LI,f,s,i.$CX,o,a,l,d),i.$LI=f,k(i.componentDidUpdate)&&Nd(i,u,c,m,l)}else i.props=t,i.state=e,i.context=n}function Ud(i,e,t,s,n,o,r,a){var l=e.children=i.children;if(!ne(l)){l.$L=r;var d=e.props||N,c=e.ref,u=i.ref,h=l.state;if(!l.$N){if(k(l.componentWillReceiveProps)){if(l.$BR=!0,l.componentWillReceiveProps(d,s),l.$UN)return;l.$BR=!1}ne(l.$PS)||(h=Xe(h,l.$PS),l.$PS=null)}xr(l,h,d,t,s,n,!1,o,r,a),u!==c&&(Es(u),is(c,l,r))}}function Gd(i,e,t,s,n,o,r,a){var l=!0,d=e.props||N,c=e.ref,u=i.props,h=!A(c),p=i.children;if(h&&k(c.onComponentShouldUpdate)&&(l=c.onComponentShouldUpdate(u,d)),l!==!1){h&&k(c.onComponentWillUpdate)&&c.onComponentWillUpdate(u,d);var m=Ns(Wi(e,s));Re(p,m,t,s,n,o,r,a),e.children=m,h&&k(c.onComponentDidUpdate)&&c.onComponentDidUpdate(u,d)}else e.children=p}function jd(i,e){var t=e.children,s=e.dom=i.dom;t!==i.children&&(s.nodeValue=t)}function qd(i,e,t,s,n,o,r,a,l,d){for(var c=o>r?r:o,u=0,h,p;u<c;++u)h=e[u],p=i[u],h.flags&16384&&(h=e[u]=U(h)),Re(p,h,t,s,n,a,l,d),i[u]=h;if(o<r)for(u=c;u<r;++u)h=e[u],h.flags&16384&&(h=e[u]=U(h)),G(h,t,s,n,a,l,d);else if(o>r)for(u=c;u<o;++u)fe(i[u],t,d)}function Yd(i,e,t,s,n,o,r,a,l,d,c){var u=o-1,h=r-1,p=0,m=i[p],f=e[p],y,C;e:{for(;m.key===f.key;){if(f.flags&16384&&(e[p]=f=U(f)),Re(m,f,t,s,n,a,d,c),i[p]=f,++p,p>u||p>h)break e;m=i[p],f=e[p]}for(m=i[u],f=e[h];m.key===f.key;){if(f.flags&16384&&(e[h]=f=U(f)),Re(m,f,t,s,n,a,d,c),i[u]=f,u--,h--,p>u||p>h)break e;m=i[u],f=e[h]}}if(p>u){if(p<=h)for(y=h+1,C=y<r?ae(e[y],!0):a;p<=h;)f=e[p],f.flags&16384&&(e[p]=f=U(f)),++p,G(f,t,s,n,C,d,c)}else if(p>h)for(;p<=u;)fe(i[p++],t,c);else Xd(i,e,s,o,r,u,h,p,t,n,a,l,d,c)}function Xd(i,e,t,s,n,o,r,a,l,d,c,u,h,p){var m,f,y=0,C=0,T=a,x=a,re=o-a+1,q=r-a+1,Qe=new Int32Array(q+1),Te=re===s,ei=!1,se=0,At=0;if(n<4||(re|q)<32)for(C=T;C<=o;++C)if(m=i[C],At<q){for(a=x;a<=r;a++)if(f=e[a],m.key===f.key){if(Qe[a-x]=C+1,Te)for(Te=!1;T<C;)fe(i[T++],l,p);se>a?ei=!0:se=a,f.flags&16384&&(e[a]=f=U(f)),Re(m,f,l,t,d,c,h,p),++At;break}!Te&&a>r&&fe(m,l,p)}else Te||fe(m,l,p);else{var _n={};for(C=x;C<=r;++C)_n[e[C].key]=C;for(C=T;C<=o;++C)if(m=i[C],At<q)if(a=_n[m.key],a!==void 0){if(Te)for(Te=!1;C>T;)fe(i[T++],l,p);Qe[a-x]=C+1,se>a?ei=!0:se=a,f=e[a],f.flags&16384&&(e[a]=f=U(f)),Re(m,f,l,t,d,c,h,p),++At}else Te||fe(m,l,p);else Te||fe(m,l,p)}if(Te)fs(l,u,i,p),ot(e,l,t,d,c,h,p);else if(ei){var fn=Qd(Qe);for(a=fn.length-1,C=q-1;C>=0;C--)Qe[C]===0?(se=C+x,f=e[se],f.flags&16384&&(e[se]=f=U(f)),y=se+1,G(f,l,t,d,y<n?ae(e[y],!0):c,h,p)):a<0||C!==fn[a]?(se=C+x,f=e[se],y=se+1,tr(u,f,l,y<n?ae(e[y],!0):c,p)):a--;p.componentWillMove.length>0&&Zl(p.componentWillMove)}else if(At!==q)for(C=q-1;C>=0;C--)Qe[C]===0&&(se=C+x,f=e[se],f.flags&16384&&(e[se]=f=U(f)),y=se+1,G(f,l,t,d,y<n?ae(e[y],!0):c,h,p))}var De,rs,Wn=0;function Qd(i){var e=0,t=0,s=0,n=0,o=0,r=0,a=0,l=i.length;for(l>Wn&&(Wn=l,De=new Int32Array(l),rs=new Int32Array(l));t<l;++t)if(e=i[t],e!==0){if(s=De[n],i[s]<e){rs[t]=s,De[++n]=t;continue}for(o=0,r=n;o<r;)a=o+r>>1,i[De[a]]<e?o=a+1:r=a;e<i[De[o]]&&(o>0&&(rs[t]=De[o-1]),De[o]=t)}o=n+1;var d=new Int32Array(o);for(r=De[o-1];o-- >0;)d[o]=r,r=rs[r],De[o]=0;return d}var Jd=typeof document<"u";Jd&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);function Zd(i,e,t,s){var n=[],o=new ct,r=e.$V;qt.v=!0,A(r)?A(i)||(i.flags&16384&&(i=U(i)),G(i,e,s,!1,null,n,o),e.$V=i,r=i):A(i)?(fe(r,e,o),e.$V=null):(i.flags&16384&&(i=U(i)),Re(r,i,e,s,!1,null,n,o),r=e.$V=i),er(n),Fs(o.componentDidAppear),qt.v=!1,k(t)&&t(),k(Ln.renderComplete)&&Ln.renderComplete(r,e)}function Xt(i,e,t,s){t===void 0&&(t=null),s===void 0&&(s=N),Zd(i,e,t,s)}var ms=[],ec=typeof Promise<"u"?Promise.resolve().then.bind(Promise.resolve()):function(i){window.setTimeout(i,0)},bi=!1;function zn(i,e,t,s){var n=i.$PS;if(k(e)&&(e=e(n?Xe(i.state,n):i.state,i.props,i.context)),A(n))i.$PS=e;else for(var o in e)n[o]=e[o];if(i.$BR)k(t)&&i.$L.push(t.bind(i));else{if(!qt.v&&ms.length===0){Tr(i,s),k(t)&&t.call(i);return}if(ms.indexOf(i)===-1&&ms.push(i),s&&(i.$F=!0),bi||(bi=!0,ec(wr)),k(t)){var r=i.$QU;r||(r=i.$QU=[]),r.push(t)}}}function tc(i){for(var e=i.$QU,t=0;t<e.length;++t)e[t].call(i);i.$QU=null}function wr(){var i;for(bi=!1;i=ms.shift();)if(!i.$UN){var e=i.$F;i.$F=!1,Tr(i,e),i.$QU&&tc(i)}}function Tr(i,e){if(e||!i.$BR){var t=i.$PS;i.$PS=null;var s=[],n=new ct;qt.v=!0,xr(i,Xe(i.state,t),i.props,ae(i.$LI,!0).parentNode,i.context,i.$SVG,e,null,s,n),er(s),Fs(n.componentDidAppear),qt.v=!1}else i.state=i.$PS,i.$PS=null}var Ni=(function(){function i(t,s){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=t||N,this.context=s||N}var e=i.prototype;return e.forceUpdate=function(s){this.$UN||zn(this,{},s,!0)},e.setState=function(s,n){this.$UN||this.$BS||zn(this,s,n,!1)},e.render=function(s,n,o){return null},i})();Ni.defaultProps=null;const Fe={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(this.lockCount===0){const i=this.callbacks;this.callbacks=[],i.forEach((e=>e()))}}},oi=(i,e)=>{if(!(i instanceof Object&&e instanceof Object))return i===e;const s=Object.keys(i),n=Object.keys(e);return s.length!==n.length?!1:!s.some((r=>i[r]!==e[r]))};class Dt extends Ni{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(e,t){this._pendingContext=t??{}}shouldComponentUpdate(e,t){return!oi(this.props,e)||!oi(this.state,t)||!oi(this.context,this._pendingContext)}}class Ui extends Dt{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){Fe.lock()}componentWillUpdate(e,t,s){Fe.lock()}componentDidMount(){Fe.callbacks.push((()=>{this._effects=this.createEffects()})),Fe.callEffects()}componentDidUpdate(){Fe.callbacks.push((()=>this.updateEffects())),Fe.callEffects()}destroyEffects(){this._effects.forEach((e=>e.dispose()))}componentWillUnmount(){this.destroyEffects()}}class Gs extends Ui{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){var e;const t=this.vDomElement,s=(e=t.className)!==null&&e!==void 0&&e.length?t.className.split(" "):[],n=s.filter((r=>!t.dxClasses.previous.includes(r))),o=t.dxClasses.previous.filter((r=>!s.includes(r)));n.forEach((r=>{const a=t.dxClasses.removed.indexOf(r);a>-1?t.dxClasses.removed.splice(a,1):t.dxClasses.added.includes(r)||t.dxClasses.added.push(r)})),o.forEach((r=>{const a=t.dxClasses.added.indexOf(r);a>-1?t.dxClasses.added.splice(a,1):t.dxClasses.removed.includes(r)||t.dxClasses.removed.push(r)}))}componentDidMount(){var e;const t=ae(this.$LI,!0);this.vDomElement=t,super.componentDidMount(),t.dxClasses=t.dxClasses||{removed:[],added:[],previous:[]},t.dxClasses.previous=t!=null&&(e=t.className)!==null&&e!==void 0&&e.length?t.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const e=this.vDomElement;if(e!==null){var t;e.dxClasses.added.forEach((s=>e.classList.add(s))),e.dxClasses.removed.forEach((s=>e.classList.remove(s))),e.dxClasses.previous=(t=e.className)!==null&&t!==void 0&&t.length?e.className.split(" "):[]}}shouldComponentUpdate(e,t){const s=super.shouldComponentUpdate(e,t);return s&&this.vDomUpdateClasses(),s}}let sc=0;const ic=function(i){const e=sc++;return{id:e,defaultValue:i,Provider:class extends Ni{getChildContext(){return v({},this.context,{[e]:this.props.value||i})}render(){return this.props.children}}}};class V{constructor(e,t){this.dependency=t,this.effect=e,this.destroy=e()}update(e){const t=this.dependency;e&&(this.dependency=e),(!e||e.some(((s,n)=>t[n]!==s)))&&(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const nc="a runtime error occured! Use Inferno in development environment to find the error.";function oc(i){return i==null}function rc(i){return i===null||i===!1||i===!0||i===void 0}function bt(i){return i===null}function ac(i){throw i||(i=nc),new Error(`Inferno Error: ${i}`)}var Y;(function(i){i[i.HtmlElement=1]="HtmlElement",i[i.ComponentUnknown=2]="ComponentUnknown",i[i.ComponentClass=4]="ComponentClass",i[i.ComponentFunction=8]="ComponentFunction",i[i.Text=16]="Text",i[i.SvgElement=32]="SvgElement",i[i.InputElement=64]="InputElement",i[i.TextareaElement=128]="TextareaElement",i[i.SelectElement=256]="SelectElement",i[i.Void=512]="Void",i[i.Portal=1024]="Portal",i[i.ReCreate=2048]="ReCreate",i[i.ContentEditable=4096]="ContentEditable",i[i.Fragment=8192]="Fragment",i[i.InUse=16384]="InUse",i[i.ForwardRef=32768]="ForwardRef",i[i.Normalized=65536]="Normalized",i[i.ForwardRefComponent=32776]="ForwardRefComponent",i[i.FormElement=448]="FormElement",i[i.Element=481]="Element",i[i.Component=14]="Component",i[i.DOMRef=2033]="DOMRef",i[i.InUseOrNormalized=81920]="InUseOrNormalized",i[i.ClearInUse=-16385]="ClearInUse",i[i.ComponentKnown=12]="ComponentKnown"})(Y||(Y={}));var Ke;(function(i){i[i.UnknownChildren=0]="UnknownChildren",i[i.HasInvalidChildren=1]="HasInvalidChildren",i[i.HasVNodeChildren=2]="HasVNodeChildren",i[i.HasNonKeyedChildren=4]="HasNonKeyedChildren",i[i.HasKeyedChildren=8]="HasKeyedChildren",i[i.HasTextChildren=16]="HasTextChildren",i[i.MultipleChildren=12]="MultipleChildren"})(Ke||(Ke={}));function lc(i,e){const t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function dc(i){let e,t;for(;i;){if(e=i.flags,e&Y.DOMRef)return i.dom;t=i.children,e&Y.Fragment?i=i.childFlags===Ke.HasVNodeChildren?t:t[t.length-1]:e&Y.ComponentClass?i=t.$LI:i=t}return null}function cc(i,e){return!!(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&lc(i,e.dangerouslySetInnerHTML.__html))}function hc(i,e,t,s,n,o,r,a){const l=i.type,d=i.ref,c=i.props||N;let u;if(o){const h=br(i,l,c,s,n,r),p=h.$LI;u=Qt(p,e,t,h.$CX,n,r,a),Ir(d,h,r,a)}else{const h=Ns(Wi(i,s));u=Qt(h,e,t,s,n,r,a),i.children=h,Er(i,r,a)}return u}function Dr(i,e,t,s,n,o,r){const a=i.childFlags,l=i.children,d=i.props,c=i.flags;if(a!==Ke.HasInvalidChildren){if(a===Ke.HasVNodeChildren)bt(t)?G(l,e,s,n,null,o,r):(t=Qt(l,e,t,s,n,o,r),t=t?t.nextSibling:null);else if(a===Ke.HasTextChildren)bt(t)?e.appendChild(document.createTextNode(l)):e.childNodes.length!==1||t.nodeType!==3?e.textContent=l:t.nodeValue!==l&&(t.nodeValue=l),t=null;else if(a&Ke.MultipleChildren){let u=!1;for(let h=0,p=l.length;h<p;++h){const m=l[h];bt(t)||u&&(m.flags&Y.Text)>0?G(m,e,s,n,t,o,r):(t=Qt(m,e,t,s,n,o,r),t=t?t.nextSibling:null),u=(m.flags&Y.Text)>0}}if((c&Y.Fragment)===0){let u=null;for(;t;)u=t.nextSibling,e.removeChild(t),t=u}}else!bt(e.firstChild)&&!cc(e,d)&&(e.textContent="",c&Y.FormElement&&(e.defaultValue=""))}function uc(i,e,t,s,n,o,r){const a=i.props,l=i.className,d=i.flags,c=i.ref;return n=n||(d&Y.SvgElement)>0,t.nodeType!==1?(yr(i,null,s,n,null,o,r),e.replaceChild(i.dom,t)):(i.dom=t,Dr(i,t,t.firstChild,s,n,o,r),bt(a)||gr(i,d,a,t,n,r),oc(l)?t.className!==""&&t.removeAttribute("class"):n?t.setAttribute("class",l):t.className=l,is(c,t,o)),i.dom}function Ar(i,e,t){if(t.nodeType!==3)e.replaceChild(i.dom=document.createTextNode(i.children),t);else{const s=i.children;t.nodeValue!==s&&(t.nodeValue=s),i.dom=t}return i.dom}function pc(i,e,t,s,n,o,r){const a=i.children;return i.childFlags===Ke.HasVNodeChildren?(Ar(a,e,t),a.dom):(Dr(i,e,t,s,n,o,r),dc(a[a.length-1]))}function Qt(i,e,t,s,n,o,r){const a=i.flags|=Y.InUse;return a&Y.Component?hc(i,e,t,s,n,(a&Y.ComponentClass)>0,o,r):a&Y.Element?uc(i,e,t,s,n,o,r):a&Y.Text?Ar(i,e,t):a&Y.Void?i.dom=t:a&Y.Fragment?pc(i,e,t,s,n,o,r):(ac(),null)}function Nn(i,e,t){let s=e.firstChild;if(bt(s))Xt(i,e,t);else{const n=[],o=new ct;for(rc(i)||(s=Qt(i,e,s,{},!1,n,o));s&&(s=s.nextSibling);)e.removeChild(s);if(n.length>0){let r;for(;(r=n.shift())!==void 0;)r()}}e.$V=i}const _c=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),fc=i=>typeof i=="number"?!0:!Number.isNaN(Number(i)),mc=(i,e)=>_c.has(i)?e:`${e}px`,gc=/[A-Z]/g,vc=i=>i.replace(gc,"-$&").toLowerCase();function bc(i){if(i instanceof Object)return Object.entries(i).reduce(((e,t)=>{let[s,n]=t;return e[vc(s)]=fc(n)?mc(s,n):n,e}),{})}const js=()=>new V((()=>{wr()}),[]);function Un(i){return i==null}function Cc(i){return typeof i=="string"}function Gn(i){return i===void 0}var yc={onComponentDidAppear:1,onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillDisappear:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function gs(i,e,t){var s,n=null,o=null,r=null,a,l,d=arguments.length-2;if(d===1)s=t;else if(d>1)for(s=[];d-- >0;)s[d]=arguments[d+2];if(Cc(i)){if(a=rd(i),!Un(e)){l={};for(var c in e)c==="className"||c==="class"?r=e[c]:c==="key"?o=e.key:c==="children"&&Gn(s)?s=e.children:c==="ref"?n=e.ref:(c==="contenteditable"&&(a|=4096),l[c]=e[c])}}else{if(a=2,Gn(s)||(e||(e={}),e.children=s),!Un(e)){l={};for(var u in e)u==="key"?o=e.key:u==="ref"?n=e.ref:yc[u]===1?(n||(n={}),n[u]=e[u]):l[u]=e[u]}return ve(a,i,l,o,n)}return a&8192?Tt(d===1?[s]:s,0,o):te(a,i,r,s,0,l,o,n)}const Sc=i=>{var e,t;return((e=i.container)===null||e===void 0?void 0:e.get(0))||((t=i.item)===null||t===void 0?void 0:t.get(0))};function Ic(i,e,t){setTimeout((()=>{Xt(gs(i,e),Sc(e))}),0)}const Ec=(i,e,t)=>{const s=e[i];return!!s&&typeof s!="string"},jn=i=>{const{parentNode:e}=i;if(e){const{nextSibling:t}=i;Cl(i),e.$V=i.$V,Xt(null,e),e.insertBefore(i,t),i.innerHTML="",delete e.$V}delete i.$V},ft=il({createElement:(i,e)=>gs(i,e),remove:jn,onAfterRender:()=>{Fe.callEffects()},onPreRender:()=>{Fe.lock()},render:(i,e,t,s)=>{if(s)Xt(gs(i,e),t);else{const{parentNode:n}=t,o=t==null?void 0:t.nextSibling,r=F.createElement("div");r.appendChild(t);const a=F.createDocumentFragment().appendChild(r);!!t.$V&&jn(t),Nn(gs(i,e),a),t.$V=a.$V,n&&n.insertBefore(t,o)}},renderIntoContainer:(i,e,t)=>{t?Xt(i,e):Nn(i,e)}}),xc=(i,e)=>Object.keys(i).length!==Object.keys(e).length?!1:Object.entries(i).every((t=>{let[s,n]=t;const o=e[s];return n instanceof Date&&o instanceof Date?n.getTime()===o.getTime():n===o})),wc=["isEqual"],Tc=i=>!!i.toArray,Dc=(i,e)=>{const t={template:e,model:v({},i)},s=i.data??{},{isEqual:n}=s,o=Ye(s,wc);return n&&(t.model.data=o,t.isEqual=n),t},Ac=(i,e)=>{const{data:t,index:s}=i.model??{data:{}};t&&Object.keys(t).forEach((o=>{t[o]&&F.isNode(t[o])&&(t[o]=B(_(t[o])))}));const n=i.template.render(v({container:e,transclude:i.transclude},{renovated:i.renovated},i.transclude?{}:{model:t},!i.transclude&&Number.isFinite(s)?{index:s}:{}));return n===void 0?[]:Tc(n)?n.toArray():[_(n).get(0)]},kc=(i,e)=>{e.forEach((t=>{!!!i.find((n=>t===n))&&t.parentNode&&_(t).remove()}))};class qn extends Ui{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=ae(this.$LI,!0);if(!(e!=null&&e.parentNode))return()=>{};const t=e.parentNode,s=_(t),n=s.contents().toArray(),o=Ac(this.props,B(s));return yl(_(e),_(o)),()=>{const r=_(t).contents().toArray();kc(n,r),t.appendChild(e)}}shouldComponentUpdate(e){const{template:t,model:s}=this.props,{template:n,model:o,isEqual:r}=e,a=r??xc;if(t!==n)return!0;if(!E(s)||!E(o))return s!==o;const{data:l,index:d}=s,{data:c,index:u}=o;return d!==u?!0:!E(l)||!E(c)?s!==o:!a(l,c)}createEffects(){return[new V(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}const Ci=i=>i&&(i.defaultProps?e=>Ge(ve(2,i,v({},e))):i),ri=i=>Array.isArray(i)?[...i]:v({},i),kr=(i,e,t)=>{const s=t.length>0&&e&&i!==e?ri(e):ri(i),n=t[0];return t.length>1?s[n]=kr(i[n],e==null?void 0:e[n],t.slice(1)):n&&(z(i[n])?s[n]=ri(i[n]):s[n]=i[n]),s},$c=(i,e,t,s)=>{const n=e[t],o=i[t],r=i;z(n)||t!==s&&Array.isArray(n)?r[t]=kr(n,o,nl(s).slice(1)):r[t]=n},ai=(i,e)=>t=>{Object.prototype.hasOwnProperty.call(i,t)&&i[t]===void 0&&(i[t]=e(t))};class qs extends Pi{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,t){super(e,t),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const t=this.getSupportedKeyNames().length>0,s=typeof this._viewComponent.prototype.keyDown=="function";if(t&&!s)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return(e=this._viewRef)===null||e===void 0?void 0:e.current}_checkContentReadyOption(e){const t=this._getContentReadyOptions().reduce(((s,n)=>(s[n]=!0,s)),{});return this._checkContentReadyOption=s=>!!t[s],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return D(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce(((t,s)=>{let[n,o,r]=s;return v({},t,{[n]:e[o],[r]:a=>this.option(n,a)})}),{}),this._propsInfo.templates.reduce(((t,s)=>v({},t,{[s]:null})),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach((t=>{e[t]=this.option(t)})),e}_initializeComponent(){var e;super._initializeComponent(),(e=this._templateManager)===null||e===void 0||e.addDefaultTemplates(this.getDefaultTemplates());const t=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(t),this._propsInfo.templates.forEach((s=>{this._componentTemplates[s]=this._createTemplateComponent(this._props[s])})),Object.keys(this._getActionConfigsFull()).forEach((s=>this._addAction(s))),this._viewRef=pe(),this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const t=this.$element()[0];this._isNodeReplaced||ft.onPreRender(),ft.render(this._viewComponent,e,t,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,ft.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,t){this._options.silent(e,t)}_render(){}_removeWidget(){ft.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:n}=e,o=Array.from(n).filter((r=>{var a;return!this._propsInfo.templates.includes(r.name)&&((a=n[r.name])===null||a===void 0?void 0:a.specified)})).reduce(((r,a)=>{let{name:l,value:d}=a;const c=r,u=l in e;return c[l]=d===""&&u?e[l]:d,c}),{});this._elementAttr=o,this._storedClasses=e.getAttribute("class")||""}const t=e.style,s={};for(let n=0;n<t.length;n+=1)s[t[n]]=t.getPropertyValue(t[n]);return this._elementAttr.style=s,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:t,twoWay:s,elements:n,props:o}=this._propsInfo,r=this._getViewComponentDefaultProps(),a=Object.keys(r),l=this._getDefaultOptions(),{ref:d,children:c,onKeyboardHandled:u}=e,p={ref:d,children:c,onKeyDown:u?(m,f)=>{u(f)}:void 0};return[...o,...this._getAdditionalProps()].forEach((m=>{Object.prototype.hasOwnProperty.call(e,m)&&(p[m]=e[m])})),t.forEach(ai(p,(()=>null))),a.forEach(ai(p,(m=>l[m]))),s.forEach((m=>{let[f,y]=m;ai(p,(()=>l[y]))(f)})),n.forEach((m=>{if(m in p){const f=p[m];Ho(f)&&(p[m]=this._patchElementParam(f))}})),p}getSupportedKeyNames(){return[]}prepareStyleProp(e){return typeof e.style=="string"?v({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),t=this._patchOptionValues(v({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach((s=>{t[s]=this._componentTemplates[s]})),this.prepareStyleProp(v({},t,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((e==null?void 0:e.class)??"").split(" ")].filter(((s,n,o)=>s&&o.indexOf(s)===n)).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return v({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),t={};return e.forEach((s=>{t[s]="dx-renovation-template-mock"})),t}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const t=Object.entries(this._templatesInfo).reduce(((s,n)=>{let[o,r]=n;return v({},s,{[o]:e[o]??r})}),{});return v({},e,t)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach((s=>{e[s]=n=>this.viewRef.keyDown(Sl.createKeyDownOptions(n))})),e}_addAction(e,t){let s=t;if(!s){const n=this._createActionByOption(e,this._getActionConfigsFull()[e]);s=o=>(Object.keys(o).forEach((r=>{E(o[r])&&F.isNode(o[r])&&(o[r]=B(_(o[r])))})),n(o))}this._actionsMap[e]=s}_optionChanged(e){const{name:t,fullName:s,value:n,previousValue:o}=e;$c(this._props,this.option(),t,s),this._propsInfo.templates.includes(t)&&n!==o&&(this._componentTemplates[t]=this._createTemplateComponent(n)),t&&this._getActionConfigsFull()[t]&&this._addAction(t),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(s),super._optionChanged(e),this._invalidate()}_validateOptions(e){return super._validateOptions(e)}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?ft.createElement(qn,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const t=this._getTemplate(e);if(!($e(t)&&t==="dx-renovation-template-mock"))return s=>ft.createElement(qn,Dc(s,t))}_wrapKeyDownHandler(e){return t=>{const{originalEvent:s,keyName:n,which:o}=t,r=this.customKeyHandlers,a=r[n]||r[o];return a!==void 0&&!a.bind(this)(s,t)?(s.cancel=!0,s):e==null?void 0:e(s,t)}}_toPublicElement(e){return B(_(e))}_patchElementParam(e){try{const t=_(e),s=t==null?void 0:t.get(0);return s!=null&&s.nodeType?s:e}catch{return e}}focus(){const e=this.$element();if(!(e.is(":focus")||e.find(":focus").length>0))if(this.option("focusStateEnabled"))e.focus();else{var s;(s=e.find("[tabindex]")[0])===null||s===void 0||s.focus()}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return v({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,t){this.customKeyHandlers[e]=t}setAria(e,t){this._aria[e]=t,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}qs.IS_RENOVATED_WIDGET=!1;qs.IS_RENOVATED_WIDGET=!0;const Gi={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},rt=ic(void 0),Oc={};class $r extends Dt{constructor(){super(...arguments),this.__getterCache={}}get config(){return this.__getterCache.config!==void 0?this.__getterCache.config:this.__getterCache.config={rtlEnabled:this.props.rtlEnabled}}componentWillUpdate(e){this.props.rtlEnabled!==e.rtlEnabled&&(this.__getterCache.config=void 0)}getChildContext(){return v({},this.context,{[rt.id]:this.config||rt.defaultValue})}render(){return this.props.children}}$r.defaultProps=Oc;const Rc=i=>Object.keys(i).filter((e=>!!e&&i[e])).join(" ").split(" ").filter(((e,t,s)=>s.indexOf(e)===t)).join(" ");function Bc(i,e){return i!==void 0?i:(e==null?void 0:e.rtlEnabled)!==void 0?e.rtlEnabled:be().rtlEnabled}function Pc(i,e){const t=E(i),s=E(be().rtlEnabled)&&!t&&!E(e==null?void 0:e.rtlEnabled);return t&&i!==(e==null?void 0:e.rtlEnabled)||s}const{abstract:Mc}=P,Lc=O.real(),Or=P.inherit((function(){const i=I("scroll","dxScrollEmitter");return{ctor(e){this._element=e,this._locked=!1,this._proxiedScroll=t=>{this._disposed||this._scroll(t)},g.on(this._element,i,this._proxiedScroll)},_scroll:Mc,check(e,t){this._locked&&t()},dispose(){this._disposed=!0,g.off(this._element,i,this._proxiedScroll)}}})()),Rr=Or.inherit({ctor(i,e){this.callBase(i),this._timeout=e},_scroll(){this._prepare(),this._forget()},_prepare(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget(){const i=this;this._timer=setTimeout((()=>{i._clearTimer()}),this._timeout)},dispose(){this.callBase(),this._clearTimer()}}),Yn=Rr.inherit({ctor(i){this.callBase(i,400),this._lastWheelDirection=null},check(i,e){this._checkDirectionChanged(i),this.callBase(i,e)},_checkDirectionChanged(i){if(!me(i)){this._lastWheelDirection=null;return}const e=i.shiftKey||!1,t=this._lastWheelDirection!==null&&e!==this._lastWheelDirection;this._lastWheelDirection=e,this._locked=this._locked&&!t}});let yi=Rr.inherit({ctor(i){this.callBase(i,400)}});(function(){const{ios:i,android:e}=Lc;(i||e)&&(yi=Or.inherit({_scroll(){this._locked=!0;const t=this;vt(this._scrollFrame),this._scrollFrame=fi((()=>{t._locked=!1}))},check(t,s){vt(this._scrollFrame),vt(this._checkFrame);const n=this,{callBase:o}=this;this._checkFrame=fi((()=>{o.call(n,t,s),n._locked=!1}))},dispose(){this.callBase(),vt(this._scrollFrame),vt(this._checkFrame)}}))})();const Hc=Wo.inherit((function(){const i=Math.round(16.666666666666668);return{ctor(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new yi(e),this._wheelLocker=new Yn(e)},validate:()=>!0,configure(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new yi(e.scrollTarget),this._wheelLocker=new Yn(e.scrollTarget)),this.callBase(e)},_init(e){this._wheelLocker.check(e,(()=>{me(e)&&this._accept(e)})),this._pointerLocker.check(e,(()=>{const t=this.isNative&&jo(e);!me(e)&&!t&&this._accept(e)})),this._fireEvent("dxscrollinit",e),this._prevEventData=X(e)},move(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start(e){this._savedEventData=X(e),this._fireEvent("dxscrollstart",e),this._prevEventData=X(e)},_move(e){const t=X(e);this._fireEvent("dxscroll",e,{delta:Rt(this._prevEventData,t)}),Rt(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=X(e)},_end(e){const t=Rt(this._prevEventData,X(e));let s={x:0,y:0};if(!me(e)&&t.time<100){const n=Rt(this._savedEventData,this._prevEventData),o=i/n.time;s={x:n.x*o,y:n.y*o}}this._fireEvent("dxscrollend",e,{velocity:s})},_stop(e){this._fireEvent("dxscrollstop",e)},cancel(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover(){if(!this.isNative)return this.callBase.apply(this,arguments)}}})());Bi({emitter:Hc,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const mt={init:"dxscrollinit",start:"dxscrollstart",move:"dxscroll",end:"dxscrollend",stop:"dxscrollstop",cancel:"dxscrollcancel"};function pt(i){return(e,t,s,n)=>{const o=n?I(i,n):i;if(t)return g.on(e,o,s,t),()=>{g.off(e,o,t)}}}const of=pt(xe),Fc=pt("dxactive"),Vc=pt("dxinactive"),Kc=pt("dxhoverstart"),Wc=pt("dxhoverend"),zc=pt("focusin"),Nc=pt("focusout"),Uc="dx-widget",Gc=i=>Object.keys(i).reduce(((e,t)=>i[t]?v({},e,{[t==="role"||t==="id"?t:`aria-${t}`]:String(i[t])}):e),{}),Br=v({},Gi,{_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:{},classes:"",name:"",addWidgetClass:!0});class ji extends Gs{constructor(e){super(e),this.state={active:!1,focused:!1,hovered:!1},this.refs=null,this.rootElementRef=pe(),this.widgetElementRef=pe(),this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}componentWillUpdate(e,t,s){super.componentWillUpdate(e,t,s)}getConfig(){return this.context[rt.id]?this.context[rt.id]:rt.defaultValue}createEffects(){return[new V(this.setRootElementRef,[]),new V(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new V(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new V(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new V(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new V(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new V(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new V(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new V(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new V(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new V(this.windowResizeEffect,[this.props.onDimensionChanged]),new V(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new V(this.checkDeprecation,[this.props.height,this.props.width]),new V(this.applyCssTextEffect,[this.props.cssText]),js()]}updateEffects(){var e,t,s,n,o,r,a,l,d,c,u,h,p;(e=this._effects[1])===null||e===void 0||e.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),(t=this._effects[2])===null||t===void 0||t.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),(s=this._effects[3])===null||s===void 0||s.update([this.props.disabled,this.props.name,this.props.onClick]),(n=this._effects[4])===null||n===void 0||n.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),(o=this._effects[5])===null||o===void 0||o.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),(r=this._effects[6])===null||r===void 0||r.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),(a=this._effects[7])===null||a===void 0||a.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),(l=this._effects[8])===null||l===void 0||l.update([this.props.focusStateEnabled,this.props.onKeyDown]),(d=this._effects[9])===null||d===void 0||d.update([this.props.name,this.props.onDimensionChanged]),(c=this._effects[10])===null||c===void 0||c.update([this.props.onDimensionChanged]),(u=this._effects[11])===null||u===void 0||u.update([this.props.name,this.props.onVisibilityChange]),(h=this._effects[12])===null||h===void 0||h.update([this.props.height,this.props.width]),(p=this._effects[13])===null||p===void 0||p.update([this.props.cssText])}setRootElementRef(){var e;const{rootElementRef:t,onRootElementRendered:s}=this.props;t&&this.widgetElementRef&&(t.current=this.widgetElementRef.current),this!==null&&this!==void 0&&(e=this.widgetElementRef)!==null&&e!==void 0&&e.current&&(s==null||s(this.widgetElementRef.current))}activeEffect(){const{activeStateEnabled:e,activeStateUnit:t,disabled:s,_feedbackShowTimeout:n,onActive:o}=this.props,r=t;if(e&&!s){var a;return Fc((a=this.widgetElementRef)===null||a===void 0?void 0:a.current,(l=>{this.setState({active:!0}),o==null||o(l)}),{timeout:n,selector:r},"UIFeedback")}}inactiveEffect(){const{activeStateEnabled:e,activeStateUnit:t,_feedbackHideTimeout:s,onInactive:n}=this.props,o=t;if(e){var r;return Vc((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{this.state.active&&(this.setState({active:!1}),n==null||n(a))}),{timeout:s,selector:o},"UIFeedback")}}clickEffect(){const{name:e,onClick:t,disabled:s}=this.props,n=e;if(t&&!s){var o;return Sn.on((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,t,{namespace:n}),()=>{var r;return Sn.off((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,{namespace:n})}}}focusInEffect(){const{disabled:e,focusStateEnabled:t,name:s,onFocusIn:n}=this.props,o=`${s}Focus`;if(t&&!e){var r;return zc((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{a.isDefaultPrevented()||(this.setState({focused:!0}),n==null||n(a))}),null,o)}}focusOutEffect(){const{focusStateEnabled:e,name:t,onFocusOut:s}=this.props,n=`${t}Focus`;if(e){var o;return Nc((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,(r=>{!r.isDefaultPrevented()&&this.state.focused&&(this.setState({focused:!1}),s==null||s(r))}),null,n)}}hoverStartEffect(){const{activeStateUnit:e,hoverStateEnabled:t,disabled:s,onHoverStart:n}=this.props,o=e;if(t&&!s){var r;return Kc((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{this.state.active||this.setState({hovered:!0}),n==null||n(a)}),{selector:o},"UIFeedback")}}hoverEndEffect(){const{activeStateUnit:e,hoverStateEnabled:t,onHoverEnd:s}=this.props,n=e;if(t){var o;return Wc((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,(r=>{this.state.hovered&&(this.setState({hovered:!1}),s==null||s(r))}),{selector:n},"UIFeedback")}}keyboardEffect(){const{onKeyDown:e,focusStateEnabled:t}=this.props;if(t&&e){var s,n;const o=In.on((s=this.widgetElementRef)===null||s===void 0?void 0:s.current,(n=this.widgetElementRef)===null||n===void 0?void 0:n.current,(r=>e(r)));return()=>In.off(o)}}resizeEffect(){const e=`${this.props.name}VisibilityChange`,{onDimensionChanged:t}=this.props;if(t){var s;return En.on((s=this.widgetElementRef)===null||s===void 0?void 0:s.current,t,{namespace:e}),()=>{var n;return En.off((n=this.widgetElementRef)===null||n===void 0?void 0:n.current,{namespace:e})}}}windowResizeEffect(){const{onDimensionChanged:e}=this.props;if(e)return xn.add(e),()=>{xn.remove(e)}}visibilityEffect(){const{name:e,onVisibilityChange:t}=this.props,s=`${e}VisibilityChange`;if(t){var n;return wn.on((n=this.widgetElementRef)===null||n===void 0?void 0:n.current,(()=>t(!0)),(()=>t(!1)),{namespace:s}),()=>{var o;return wn.off((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,{namespace:s})}}}checkDeprecation(){const{width:e,height:t}=this.props;M(e)&&Et.log("W0017","width"),M(t)&&Et.log("W0017","height")}applyCssTextEffect(){var e;const{cssText:t}=this.props;t!==void 0&&t!==""&&(e=this.widgetElementRef)!==null&&e!==void 0&&e.current&&(this.widgetElementRef.current.style.cssText=t)}getShouldRenderConfigProvider(){const{rtlEnabled:e}=this.props;return Pc(e,this.config)}getRtlEnabled(){const{rtlEnabled:e}=this.props;return Bc(e,this.config)}getAttributes(){const{aria:e,disabled:t,focusStateEnabled:s,visible:n}=this.props,o=s&&!t&&this.props.accessKey;return v({},D({},o&&{accessKey:o}),Gc(v({},e,{disabled:t,hidden:!n})),D({},this.getRestAttributes(this.props)))}getRestAttributes(e){const t=v({},e);return["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"].forEach((s=>{delete t[s]})),t}getStyles(){const{width:e,height:t}=this.props,s=this.props.style||{},n=mi("width",M(e)?e():e),o=mi("height",M(t)?t():t);return v({},s,{height:o??s.height,width:n??s.width})}getCssClasses(){const{classes:e,addWidgetClass:t,className:s,disabled:n,activeStateEnabled:o,focusStateEnabled:r,hoverStateEnabled:a,onVisibilityChange:l,visible:d}=this.props,c=!!r&&!n,u=!!a&&!n,h=!!o&&!n,p={[Uc]:!!t,[String(e)]:!!e,[String(s)]:!!s,"dx-state-disabled":!!n,"dx-state-invisible":!d,"dx-state-focused":!!this.state.focused&&c,"dx-state-active":!!this.state.active&&h,"dx-state-hover":!!this.state.hovered&&u&&!this.state.active,"dx-rtl":!!this.props.rtlEnabled,"dx-visibility-change-handler":!!l};return Rc(p)}getTabIndex(){const{focusStateEnabled:e,disabled:t,tabIndex:s}=this.props;return e&&!t?s:void 0}focus(){var e;Il.trigger((e=this.widgetElementRef)===null||e===void 0?void 0:e.current)}blur(){var e,t;const s=F.getActiveElement((e=this.widgetElementRef)===null||e===void 0?void 0:e.current);((t=this.widgetElementRef)===null||t===void 0?void 0:t.current)===s&&s.blur()}activate(){this.setState({active:!0})}deactivate(){this.setState({active:!1})}render(){const{hint:e,children:t}=this.props,s=Ge(te(1,"div",this.getCssClasses(),t,0,v({},this.getAttributes(),{tabindex:this.getTabIndex(),title:e,style:this.getStyles()}),null,this.widgetElementRef));return this.getShouldRenderConfigProvider()?ve(2,$r,{rtlEnabled:this.getRtlEnabled(),children:s}):s}}ji.defaultProps=Br;function tt(i){return Object.keys(i).filter((e=>i[e])).join(" ")}const jc={position:"left",source:""};class Pr extends Dt{constructor(e){super(e),this.state={}}get sourceType(){return Ls(this.props.source)}get cssClass(){return this.props.position!=="left"?"dx-icon-right":""}get iconClassName(){const e={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:t}=this.props;return this.sourceType==="dxIcon"?tt(v({},e,{[`dx-icon-${t}`]:!0})):this.sourceType==="fontIcon"?tt(v({},e,{[String(t)]:!!t})):this.sourceType==="image"?tt(e):this.sourceType==="svg"?tt(v({},e,{"dx-svg-icon":!0})):""}render(){const{iconClassName:e,props:t,sourceType:s}=this,n=Ci(t.iconTemplate);return Tt([s==="dxIcon"&&te(1,"i",e),s==="fontIcon"&&te(1,"i",e),s==="image"&&te(1,"img",e,null,1,{alt:"",src:t.source}),n&&te(1,"i",e,n({}),0)],0)}}Pr.defaultProps=jc;const Mr=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{useHoldAnimation:e,waveSizeCoefficient:t,isCentered:s,wavesNumber:n}=i;return{waveSizeCoefficient:t||2,isCentered:s||!1,wavesNumber:n||1,durations:Jc(e??!0)}},qc=function(i){const e=Mr(i);return{showWave:Hr.bind(this,e),hideWave:Vr.bind(this,e)}},Yc=function(i){let e=i.children(".dx-inkripple");return e.length===0&&(e=_("<div>").addClass("dx-inkripple").appendTo(i)),e},Lr=function(i,e){const t=Yc(_(i)),s=t.children(".dx-inkripple-wave").toArray();for(let n=s.length;n<e;n++){const o=_("<div>").appendTo(t).addClass("dx-inkripple-wave");s.push(o[0])}return _(s)},Xc=function(i,e){const t=_(e.element),s=ee(t),n=j(t),o=parseInt(Math.sqrt(s*s+n*n)),r=Math.min(4e3,parseInt(o*i.waveSizeCoefficient));let a,l;if(i.isCentered)a=(s-r)/2,l=(n-r)/2;else{const{event:d}=e,c=t.offset(),u=d.pageX-c.left,h=d.pageY-c.top;a=u-r/2,l=h-r/2}return{left:a,top:l,height:r,width:r}};function Hr(i,e){const t=Lr(e.element,i.wavesNumber).eq(e.wave||0);i.hidingTimeout&&clearTimeout(i.hidingTimeout),Fr(t),t.css(Xc(i,e)),i.showingTimeout=setTimeout(Qc.bind(this,i,t),0)}function Qc(i,e){const t=`${i.durations.showingScale}ms`;e.addClass("dx-inkripple-showing").css("transitionDuration",t)}function Jc(i){return{showingScale:i?1e3:300,hidingScale:300,hidingOpacity:300}}function Fr(i){i.removeClass("dx-inkripple-hiding").css("transitionDuration","")}function Vr(i,e){i.showingTimeout&&clearTimeout(i.showingTimeout);const t=Lr(e.element,e.wavesNumber).eq(e.wave||0),{durations:s}=i,n=`${s.hidingScale}ms, ${s.hidingOpacity}ms`;t.addClass("dx-inkripple-hiding").removeClass("dx-inkripple-showing").css("transitionDuration",n);const o=Math.max(s.hidingScale,s.hidingOpacity);i.hidingTimeout=setTimeout(Fr.bind(this,t),o)}const Zc=["config"],eh={config:{}};class Kr extends Dt{constructor(e){super(e),this.__getterCache={},this.state={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return this.__getterCache.getConfig===void 0&&(this.__getterCache.getConfig=Mr(this.props.config)),this.__getterCache.getConfig}get restAttributes(){const e=this.props;return Ye(e,Zc)}hideWave(e){Vr(this.getConfig,e)}showWave(e){Hr(this.getConfig,e)}componentWillUpdate(e){this.props.config!==e.config&&(this.__getterCache.getConfig=void 0)}render(){return Ge(te(1,"div","dx-inkripple",null,1,v({},this.restAttributes)))}}Kr.defaultProps=eh;const th="dx-button",sh=["outlined","text","contained"],Wr=["accessKey","activeStateEnabled","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],ih=i=>{const{icon:e,iconPosition:t,stylingMode:s,text:n,type:o}=i,r=s&&sh.includes(s),a={[th]:!0,[`dx-button-mode-${r?s:"contained"}`]:!0,[`dx-button-${o??"normal"}`]:!0,"dx-button-has-text":!!n,"dx-button-has-icon":!!e,"dx-button-icon-right":t!=="left"};return tt(a)},nh=(i,e)=>{const t=new Set(e);return Object.keys(i).reduce(((s,n)=>(t.has(n)||(s[n]=i[n]),s)),{})},oh=v({},Gi,{activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:{}}),zr=El([{device:()=>O.real().deviceType==="desktop"&&!O.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ze(Q()),options:{useInkRipple:!0}}]);let xs=class extends Gs{constructor(e){super(e),this.contentRef=pe(),this.inkRippleRef=pe(),this.submitInputRef=pe(),this.widgetRef=pe(),this.__getterCache={},this.state={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[new V(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),js()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:e,useSubmitBehavior:t}=this.props,s=this.submitInputRef.current;if(t&&e)return Tn.on(s,(n=>e({event:n,submitInput:s})),{namespace:"UIFeedback"}),()=>Tn.off(s,{namespace:"UIFeedback"})}onActive(e){if(this.props.useInkRipple){var t;(t=this.inkRippleRef.current)===null||t===void 0||t.showWave({element:this.contentRef.current,event:e})}}onInactive(e){if(this.props.useInkRipple){var t;(t=this.inkRippleRef.current)===null||t===void 0||t.hideWave({element:this.contentRef.current,event:e})}}onWidgetClick(e){const{onClick:t,useSubmitBehavior:s}=this.props;if(t==null||t({event:e}),s){var n;(n=this.submitInputRef.current)===null||n===void 0||n.click()}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:s,originalEvent:n,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(s==="space"||o==="space"||s==="enter"||o==="enter")&&(n.preventDefault(),this.onWidgetClick(n))}get aria(){const{icon:e,text:t}=this.props;let s=t??"";if(!t&&e)switch(Ls(e)){case"image":{const r=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;s=!e.includes("base64")&&r.test(e)?e.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":s=$.format(Fo(e,!0))||e;break;case"fontIcon":s=e;break;case"svg":{var n;s=((n=/<title>(.*?)<\/title>/.exec(e))===null||n===void 0?void 0:n[1])??"";break}}return v({role:"button"},s?{label:s}:{})}get cssClasses(){return ih(this.props)}get iconSource(){return this.props.icon??""}get inkRippleConfig(){if(this.__getterCache.inkRippleConfig===void 0){const{icon:e,text:t}=this.props;this.__getterCache.inkRippleConfig=!t&&e?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}}return this.__getterCache.inkRippleConfig}get buttonTemplateData(){const{icon:e,text:t,templateData:s}=this.props;return v({icon:e,text:t},s)}get restAttributes(){const e=[...Wr,"children"];return nh(this.props,e)}focus(){var e;(e=this.widgetRef.current)===null||e===void 0||e.focus()}activate(){var e;(e=this.widgetRef.current)===null||e===void 0||e.activate()}deactivate(){var e;(e=this.widgetRef.current)===null||e===void 0||e.deactivate()}componentWillUpdate(e){super.componentWillUpdate(),(this.props.icon!==e.icon||this.props.text!==e.text)&&(this.__getterCache.inkRippleConfig=void 0)}render(){const{children:e,iconPosition:t,text:s}=this.props,n=Ci(this.props.template),o=Ci(this.props.iconTemplate),r=!this.props.template&&!e&&s!=="",a=t==="left",l=!n&&!e&&(this.iconSource||o)&&ve(2,Pr,{source:this.iconSource,position:t,iconTemplate:o});return Ge(ve(2,ji,v({accessKey:this.props.accessKey,activeStateEnabled:this.props.activeStateEnabled,aria:this.aria,className:this.props.className,classes:this.cssClasses,disabled:this.props.disabled,focusStateEnabled:this.props.focusStateEnabled,height:this.props.height,hint:this.props.hint,hoverStateEnabled:this.props.hoverStateEnabled,onActive:this.onActive,onClick:this.onWidgetClick,onInactive:this.onInactive,onKeyDown:this.keyDown,rtlEnabled:this.props.rtlEnabled,tabIndex:this.props.tabIndex,visible:this.props.visible,width:this.props.width},this.restAttributes,{children:te(1,"div","dx-button-content",[n?n({data:this.buttonTemplateData}):e,a&&l,r&&te(1,"span","dx-button-text",s,0),!a&&l,this.props.useSubmitBehavior&&te(64,"input","dx-button-submit-input",null,1,{type:"submit",tabindex:-1},null,this.submitInputRef),this.props.useInkRipple&&ve(2,Kr,{config:this.inkRippleConfig},null,this.inkRippleRef)],0,null,null,this.contentRef)}),null,this.widgetRef))}};xs.defaultProps=v({},oh,bs(zr));const Xn=[];function rh(i){Xn.push(i),xs.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(xs.defaultProps),Object.getOwnPropertyDescriptors(bs(zr)),Object.getOwnPropertyDescriptors(bs(Xn))))}class ht extends qs{get _validationGroupConfig(){return ys.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const e=super.getProps();return e.onClick=s=>{let{event:n}=s;this._clickAction({event:n,validationGroup:this._validationGroupConfig})},e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),Ls(e.icon)==="svg"&&(e.iconTemplate=this._createTemplateComponent((()=>e.icon))),e}get viewRef(){return super.viewRef}get _templatesInfo(){return{template:"content"}}_toggleActiveState(e,t){if(t){var s;(s=this.viewRef)===null||s===void 0||s.activate()}else{var n;(n=this.viewRef)===null||n===void 0||n.deactivate()}}_getSubmitAction(){let e=!0,t="valid";return this._createAction((s=>{let{event:n,submitInput:o}=s;if(e){const r=this._validationGroupConfig;if(r!==void 0&&r!==""){const a=r.validate();t=a.status,a.status==="pending"&&(e=!1,this.option("disabled",!0),a.complete.then((l=>{let{status:d}=l;this.option("disabled",!1),t=d,t==="valid"&&o.click(),e=!0})))}}t!=="valid"&&n.preventDefault(),n.stopPropagation()}))}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const e=this.$element().find(".dx-button-content").first(),t=e.children().filter(".dx-template-wrapper"),s=e.children().filter(".dx-button-submit-input");t.length&&(t.addClass("dx-button-content"),t.append(s),e.replaceWith(t))}_patchOptionValues(e){return super._patchOptionValues(v({},e,{templateData:e._templateData}))}_findGroup(){const e=this.$element(),t=this.option("validationGroup");return t!==void 0&&t!==""?t:ys.findGroup(e,this._modelByElement(e))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(e){e.name==="onClick"&&(this._clickAction=this._createClickAction()),super._optionChanged(e)}focus(){var e;(e=this.viewRef)===null||e===void 0||e.focus()}activate(){var e;(e=this.viewRef)===null||e===void 0||e.activate()}deactivate(){var e;(e=this.viewRef)===null||e===void 0||e.deactivate()}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:Wr}}get _viewComponent(){return xs}}oe("dxButton",ht);ht.defaultOptions=rh;const R=ol(Et.ERROR_MESSAGES,{E4000:"[DevExpress.data]: {0}",E4001:"Unknown aggregating function is detected: '{0}'",E4002:"Unsupported OData protocol version is used",E4003:"Unknown filter operation is used: {0}",E4004:"The thenby() method is called before the sortby() method",E4005:"Store requires a key expression for this operation",E4006:"ArrayStore 'data' option must be an array",E4007:"Compound keys cannot be auto-generated",E4008:"Attempt to insert an item with a duplicated key",E4009:"Data item cannot be found",E4010:"CustomStore does not support creating queries",E4011:"Custom Store method is not implemented or is not a function: {0}",E4012:"Custom Store method returns an invalid value: {0}",E4013:"Local Store requires the 'name' configuration option is specified",E4014:"Unknown data type is specified for ODataStore: {0}",E4015:"Unknown entity name or alias is used: {0}",E4016:"The compileSetter(expr) method is called with 'self' passed as a parameter",E4017:"Keys cannot be modified",E4018:"The server has returned a non-numeric value in a response to an item count request",E4019:"Mixing of group operators inside a single group of filter expression is not allowed",E4020:"Unknown store type is detected: {0}",E4021:"The server response does not provide the totalCount value",E4022:"The server response does not provide the groupCount value",E4023:"Could not parse the following XML: {0}",E4024:"String function {0} cannot be used with the data field {1} of type {2}.",W4000:"Data returned from the server has an incorrect structure",W4001:'The {0} field is listed in both "keyType" and "fieldTypes". The value of "fieldTypes" is used.',W4002:"Data loading has failed for some cells due to the following error: {0}"});let ah=null;const Ys=function(i){var e;(e=ah)===null||e===void 0||e(i)},lh=qo.add,qi="DEVEXTREME_XHR_ERROR_UNLOAD",Nr=function(i){return[i[0],i.length<3?"=":String(i[1]).toLowerCase(),i.length<2?!0:i[i.length-1]]},Si=function(i){return Array.isArray(i)||(i=[i]),Ee(i,(e=>{const t={selector:M(e)||typeof e=="string"?e:e.getter||e.field||e.selector,desc:!!(e.desc||String(e.dir).charAt(0).toLowerCase()==="d")};return e.compare&&(t.compare=e.compare),t}))},Ur=(function(){const i={timeout:"Network connection timeout",error:"Unspecified network error",parsererror:"Unexpected server response"};let e;return lh((()=>{const t=Ne();F.listen(t,"beforeunload",(()=>{e=!0}))})),function(t,s){return e?qi:t.status<400?(function(n){let o=i[n];return o||n})(s):t.statusText}})(),dh={count:{seed:0,step:i=>1+i},sum:{seed:0,step:(i,e)=>i+e},min:{step:(i,e)=>e<i?e:i},max:{step:(i,e)=>e>i?e:i},avg:{seed:[0,0],step:(i,e)=>[i[0]+e,i[1]+1],finalize:i=>i[1]?i[0]/i[1]:NaN}},ch=(function(){let i=0,e;return{obtain:function(){i===0&&(e=new b),i++},release:function(){i--,i<1&&e.resolve()},promise:function(){return(i===0?new b().resolve():e).promise()},reset:function(){i=0,e&&e.resolve()}}})();function Gr(i){return/^(and|&&|&)$/i.test(i)}const Xs=function(i,e,t){if(Array.isArray(i)){const s=Ee(e,((o,r)=>r));let n;for(let o=0;o<s.length;o++)if(n=s[o],!Vt(e[n],t[n],{strict:!1}))return!1;return!0}return Vt(e,t,{strict:!1})},jr=function(i){return i[0]==="!"&&Array.isArray(i[1])},hh=function(i){return i==="and"||i==="or"},uh=function(i){if(i.length>2&&Array.isArray(i[0])&&i[1]==="or"&&typeof i[0][0]=="string"&&i[0][1]==="="){const[e]=i[0];return!i.find(((t,s)=>s%2!==0?t!=="or":!Array.isArray(t)||t.length!==3||t[0]!==e||t[1]!=="="))}return!1},ph=function(i){const e=i[0],t=i[1];return!!(Array.isArray(e)||M(e)&&(Array.isArray(t)||M(t)||hh(t)))},St=function(){const i=new b;return i.resolve.apply(i,arguments).promise()},qr=function(){const i=new b;return i.reject.apply(i,arguments).promise()};function _h(i,e){let t;return function(){return t||(t=setTimeout((()=>{t=void 0,i.call(this)}),M(e)?e():e)),t}}function fh(i,e){let t=[];const s=_h((function(){i.call(this,t),t=[]}),e);return function(n){return Array.isArray(n)&&t.push(...n),s.call(this,t)}}function mh(i,e){let t;const s=typeof e=="string"?e.split():e.slice();for(;s.length;)if(t=s.shift(),t in i)return!0;return!1}function Yr(i,e,t,s){let n,o;if(s){for(let r=0;r<e.length;r++)if(n=e[r].items||e[r].collapsedItems||[],o=Yr(i,n||[],t,s-1),o)return o}else if(ut(i,e,t)>=0)return e}function gh(i,e,t,s){return s?Yr(i,e,t,s)||[]:e}function vh(i,e){if(i.key()&&(!e._dataByKeyMap||e._dataByKeyMapLength!==e.length)){const t={},s=e.length;for(let n=0;n<s;n++)t[JSON.stringify(i.keyOf(e[n]))]=e[n];e._dataByKeyMap=t,e._dataByKeyMapLength=s}}function bh(i,e){if(i._dataByKeyMap)return i._dataByKeyMap[JSON.stringify(e)]}function Ch(i,e){return i._dataByKeyMap?i._dataByKeyMap[JSON.stringify(e)]:!0}function Xr(i,e,t){i._dataByKeyMap&&(i._dataByKeyMap[JSON.stringify(e)]=t,i._dataByKeyMapLength+=t?1:-1)}function Qr(i,e,t){t=t||new WeakMap;const s=i?Object.create(Object.getPrototypeOf(i)):{};i&&t.set(i,s);const n=v({},i);Oi(s,n,!0,!0,!0);for(const o in n){const r=n[o],a=e==null?void 0:e[o];H(r)&&!z(r)&&H(a)&&!t.has(r)&&(s[o]=Qr(r,a,t))}for(const o in s){const r=s[o];H(r)&&t.has(r)&&(s[o]=t.get(r))}return s}function yh(i,e){const t=Qr(i,e);return Oi(t,e,!0,!0,!0)}function Yi(i){let{keyInfo:e,data:t,changes:s,groupCount:n,useInsertIndex:o,immutable:r,disableCache:a,logError:l,skipCopying:d}=i;const c=r===!0?[...t]:t;return s.forEach((u=>{const h=u.type==="insert"?c:gh(e,c,u.key,n);switch(!a&&vh(e,h),u.type){case"update":Xi(e,h,u.key,u.data,!0,r,l);break;case"insert":Qi(e,h,u.data,o&&E(u.index)?u.index:-1,!0,l,d);break;case"remove":Jr(e,h,u.key,!0,l)}})),c}function ws(i,e,t){return i?e&&R.log(t):qr(R.Error(t))}function Xi(i,e,t,s,n,o,r){let a;const l=i.key();if(l){if(mh(s,l)&&!Xs(l,t,i.keyOf(s)))return ws(n,r,"E4017");if(a=bh(e,t),!a){const d=ut(i,e,t);if(d<0)return ws(n,r,"E4009");if(a=e[d],o===!0&&E(a)){const c=yh(a,s);return e[d]=c,!n&&St(c,t)}}}else a=t;if(Oi(a,s,!0,!1,!0,!0),!n)return be().useLegacyStoreResult?St(t,s):St(a,t)}function Qi(i,e,t,s,n,o,r){let a;const l=i.key(),d=z(t)&&!r?D({},t):t;if(l){if(a=i.keyOf(d),a===void 0||typeof a=="object"&&Ri(a)){if(Array.isArray(l))throw R.Error("E4007");a=d[l]=String(new J)}else if(e[ut(i,e,a)]!==void 0)return ws(n,o,"E4008")}else a=d;if(s>=0?e.splice(s,0,d):e.push(d),Xr(e,a,d),!n)return St(be().useLegacyStoreResult?t:d,a)}function Jr(i,e,t,s,n){const o=ut(i,e,t);if(o>-1&&(e.splice(o,1),Xr(e,t,null)),!s)return St(t);if(o<0)return ws(s,n,"E4009")}function ut(i,e,t){const s=i.key();if(!Ch(e,t))return-1;for(let n=0,o=e.length;n<o;n++)if(Xs(s,i.keyOf(e[n]),t))return n;return-1}const ns=P.inherit({toArray(){const i=[];for(this.reset();this.next();)i.push(this.current());return i},countable:()=>!1}),Ji=ns.inherit({ctor(i){this.array=i,this.index=-1},next(){return this.index+1<this.array.length?(this.index++,!0):!1},current(){return this.array[this.index]},reset(){this.index=-1},toArray(){return this.array.slice(0)},countable:()=>!0,count(){return this.array.length}}),Qs=ns.inherit({ctor(i){this.iter=i},next(){return this.iter.next()},current(){return this.iter.current()},reset(){return this.iter.reset()}}),li=Qs.inherit({ctor(i,e){this.callBase(i),this.index=-1,this.mapper=e},current(){return this.mapper(this.callBase(),this.index)},next(){const i=this.callBase();return i&&this.index++,i}}),Sh=function(i,e,t){return $e(i)&&$e(e)&&(t!=null&&t.locale||t!=null&&t.collatorOptions)?new Intl.Collator((t==null?void 0:t.locale)||void 0,(t==null?void 0:t.collatorOptions)||void 0).compare(i,e):(i=Kt(i,!1,t),e=Kt(e,!1,t),i===null&&e!==null?-1:i!==null&&e===null||i===void 0&&e!==void 0?1:i!==void 0&&e===void 0||i<e?-1:i>e?1:0)},Ii=ns.inherit({ctor(i,e,t,s){this.langParams=i.langParams,i instanceof li||(i=new li(i,this._wrap),i.langParams=this.langParams),this.iter=i,this.rules=[{getter:e,desc:t,compare:s,langParams:this.langParams}]},thenBy(i,e,t){const s=new Ii(this.sortedIter||this.iter,i,e,t);return this.sortedIter||(s.rules=this.rules.concat(s.rules)),s},next(){return this._ensureSorted(),this.sortedIter.next()},current(){return this._ensureSorted(),this.sortedIter.current()},reset(){delete this.sortedIter},countable(){return this.sortedIter||this.iter.countable()},count(){return this.sortedIter?this.sortedIter.count():this.iter.count()},_ensureSorted(){const i=this;i.sortedIter||(S(i.rules,(function(){this.getter=le(this.getter)})),i.sortedIter=new li(new Ji(this.iter.toArray().sort(((e,t)=>i._compare(e,t)))),i._unwrap))},_wrap:(i,e)=>({index:e,value:i}),_unwrap:i=>i.value,_getDefaultCompare:i=>(e,t)=>Sh(e,t,i),_compare(i,e){const t=i.index,s=e.index;if(i=i.value,e=e.value,i===e)return t-s;for(let n=0,o=this.rules.length;n<o;n++){const r=this.rules[n],a=r.getter(i),l=r.getter(e),c=(r.compare||this._getDefaultCompare(r.langParams))(a,l);if(c)return r.desc?-c:c}return t-s}}),Ei=(function(){let i={};const e=r=>Kt(r,!1,i),t=function(r){if(uh(r))return(c=>{const u=le(c[0][0]),h=c.reduce(((p,m,f)=>(f%2===0&&p.push(e(m[2])),p)),[]);return p=>{const m=e(u(p));return h.some((f=>o(f)?m===f:m==f))}})(r);const a=[];let l=!1,d=!1;return S(r,(function(){if(Array.isArray(this)||M(this)){if(a.length>1&&l!==d)throw R.Error("E4019");a.push(Ei(this,i)),l=d,d=!0}else d=Gr(this)})),function(c){let u=l;for(let h=0;h<a.length;h++)if(a[h](c)!==l){u=!l;break}return u}},s=function(r){var a;return E(r)?(a=i)!==null&&a!==void 0&&a.locale?r.toLocaleString(i.locale):r.toString():""};function n(r,a,l){return function(d){d=e(r(d));let c=o(a)?d===a:d==a;return l&&(c=!c),c}}function o(r){return r===""||r===0||r===!1}return function(r,a){return i=a||{},M(r)?r:ph(r)?t(r):jr(r)?(function(l){const d=l[0],c=Ei(l[1],i);if(d==="!")return function(u){return!c(u)};throw R.Error("E4003",d)})(r):(function(l){l=Nr(l);const d=le(l[0]),c=l[1];let u=l[2];u=e(u);const h=(p,m)=>(p=e(d(p)),(u==null||p==null)&&u!==p?!1:m(p,u));switch(c.toLowerCase()){case"=":return n(d,u);case"<>":return n(d,u,!0);case">":return p=>h(p,((m,f)=>m>f));case"<":return p=>h(p,((m,f)=>m<f));case">=":return p=>h(p,((m,f)=>m>=f));case"<=":return p=>h(p,((m,f)=>m<=f));case"startswith":return p=>e(s(d(p))).startsWith(u);case"endswith":return p=>e(s(d(p))).endsWith(u);case"contains":return p=>e(s(d(p))).includes(u);case"notcontains":return p=>!e(s(d(p))).includes(u)}throw R.Error("E4003",c)})(r)}})(),Ih=Qs.inherit({ctor(i,e){this.callBase(i),this.langParams=i.langParams,this.criteria=Ei(e,this.langParams)},next(){for(;this.iter.next();)if(this.criteria(this.current()))return!0;return!1}}),Eh=ns.inherit({ctor(i,e){this.iter=i,this.getter=e},next(){return this._ensureGrouped(),this.groupedIter.next()},current(){return this._ensureGrouped(),this.groupedIter.current()},reset(){delete this.groupedIter},countable(){return!!this.groupedIter},count(){return this.groupedIter.count()},_ensureGrouped(){if(this.groupedIter)return;const i={},e=[],{iter:t}=this,s=le(this.getter);for(t.reset();t.next();){const n=t.current(),o=s(n);o in i?i[o].push(n):(i[o]=[n],e.push(o))}this.groupedIter=new Ji(Ee(e,(n=>({key:n,items:i[n]}))))}}),xh=Qs.inherit({ctor(i,e){this.callBase(i),this.getter=le(e)},current(){return this.getter(this.callBase())},countable(){return this.iter.countable()},count(){return this.iter.count()}}),wh=Qs.inherit({ctor(i,e,t){this.callBase(i),this.skip=Math.max(0,e),this.take=Math.max(0,t),this.pos=0},next(){if(this.pos>=this.skip+this.take)return!1;for(;this.pos<this.skip&&this.iter.next();)this.pos++;return this.pos++,this.iter.next()},reset(){this.callBase(),this.pos=0},countable(){return this.iter.countable()},count(){return Math.min(this.iter.count()-this.skip,this.take)}}),os=function(i,e){e=e||{},i instanceof ns||(i=new Ji(i)),e.langParams&&(i.langParams=e.langParams);const t=function(l){const d=e.errorHandler;d&&d(l),Ys(l)},s=function(l){const d=new b().fail(t);let c;const{step:u}=l,{finalize:h}=l;try{i.reset(),"seed"in l?c=l.seed:c=i.next()?i.current():NaN;let p=c;for(;i.next();)p=u(p,i.current());d.resolve(h?h(p):p)}catch(p){d.reject(p)}return d.promise()},n=function(l){return s(dh[l])},o=function(l){return!M(l)&&!Array.isArray(l)&&(l=[].slice.call(arguments)),a(new xh(i,l))},r=function(l){return o(le(l))};function a(l){return os(l,e)}return{toArray:()=>i.toArray(),enumerate(){const l=new b().fail(t);try{l.resolve(i.toArray())}catch(d){l.reject(d)}return l.promise()},setLangParams(l){i.langParams=l},sortBy:(l,d,c)=>a(new Ii(i,l,d,c)),thenBy(l,d,c){if(i instanceof Ii)return a(i.thenBy(l,d,c));throw R.Error("E4004")},filter(l){return Array.isArray(l)||(l=[].slice.call(arguments)),a(new Ih(i,l))},slice(l,d){return d===void 0&&(d=Number.MAX_VALUE),a(new wh(i,l,d))},select:o,groupBy:l=>a(new Eh(i,l)),aggregate:function(l,d,c){return arguments.length<2?s({step:arguments[0]}):s({seed:l,step:d,finalize:c})},count(){if(i.countable()){const l=new b().fail(t);try{l.resolve(i.count())}catch(d){l.reject(d)}return l.promise()}return n("count")},sum(l){return l?r(l).sum():n("sum")},min(l){return l?r(l).min():n("min")},max(l){return l?r(l).max():n("max")},avg(l){return l?r(l).avg():n("avg")}}};function Zi(i,e){return i=i.groupBy(e[0].selector),e.length>1&&(i=i.select((t=>D({},t,{items:Zi(os(t.items),e.slice(1)).toArray()})))),i}function Zr(i,e){const t=[];return S(i,((s,n)=>{Bs(e,(r=>n.selector===r.selector)).length<1&&t.push(n)})),t.concat(e)}function Th(i,e,t){var s;e=e||{};const{filter:n}=e;if((s=e)!==null&&s!==void 0&&s.langParams){var o,r;(o=(r=i).setLangParams)===null||o===void 0||o.call(r,e.langParams)}if(n&&(i=i.filter(n)),t)return i;let{sort:a}=e;const{select:l}=e;let{group:d}=e;const{skip:c}=e,{take:u}=e;return d&&(d=Si(d),d.keepInitialKeyOrder=!!e.group.keepInitialKeyOrder),(a||d)&&(a=Si(a||[]),d&&!d.keepInitialKeyOrder&&(a=Zr(d,a)),S(a,(function(h){i=i[h?"thenBy":"sortBy"](this.selector,this.desc,this.compare)}))),l&&(i=i.select(l)),d&&(i=Zi(i,d)),(u||c)&&(i=i.slice(c||0,u)),i}const Ts={multiLevelGroup:Zi,arrangeSortingInfo:Zr,queryByOptions:Th},{abstract:kt}=P,{queryByOptions:Qn}=Ts,xi={},Ie=P.inherit({_langParams:{},ctor(i){const e=this;i=i||{},this._eventsStrategy=new Yo(this),S(["onLoaded","onLoading","onInserted","onInserting","onUpdated","onUpdating","onPush","onRemoved","onRemoving","onModified","onModifying"],((t,s)=>{s in i&&e.on(s.slice(2).toLowerCase(),i[s])})),this._key=i.key,this._errorHandler=i.errorHandler,this._useDefaultSearch=!0},_clearCache:w,_customLoadOptions:()=>null,key(){return this._key},keyOf(i){return this._keyGetter||(this._keyGetter=le(this.key())),this._keyGetter(i)},_requireKey(){if(!this.key())throw R.Error("E4005")},load(i){const e=this;return i=i||{},this._eventsStrategy.fireEvent("loading",[i]),this._withLock(this._loadImpl(i)).done((t=>{e._eventsStrategy.fireEvent("loaded",[t,i])}))},_loadImpl(i){return Ri(this._langParams)||(i=i||{},i._langParams=v({},this._langParams,i._langParams)),Qn(this.createQuery(i),i).enumerate()},_withLock(i){const e=new b;return i.done((function(){const t=this,s=arguments;ch.promise().done((()=>{e.resolveWith(t,s)}))})).fail((function(){e.rejectWith(this,arguments)})),e},createQuery:kt,totalCount(i){return this._totalCountImpl(i)},_totalCountImpl(i){return Qn(this.createQuery(i),i,!0).count()},byKey(i,e){return this._addFailHandlers(this._withLock(this._byKeyImpl(i,e)))},_byKeyImpl:kt,insert(i){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("inserting",[i]),e._addFailHandlers(e._insertImpl(i).done(((t,s)=>{e._eventsStrategy.fireEvent("inserted",[t,s]),e._eventsStrategy.fireEvent("modified")})))},_insertImpl:kt,update(i,e){const t=this;return t._eventsStrategy.fireEvent("modifying"),t._eventsStrategy.fireEvent("updating",[i,e]),t._addFailHandlers(t._updateImpl(i,e).done((()=>{t._eventsStrategy.fireEvent("updated",[i,e]),t._eventsStrategy.fireEvent("modified")})))},_updateImpl:kt,push(i){const e={changes:i,waitFor:[]};this._eventsStrategy.fireEvent("beforePushAggregation",[e]),W(...e.waitFor).done((()=>{this._pushImpl(i),this._eventsStrategy.fireEvent("beforePush",[{changes:i}]),this._eventsStrategy.fireEvent("push",[i])}))},_pushImpl:w,remove(i){const e=this;return e._eventsStrategy.fireEvent("modifying"),e._eventsStrategy.fireEvent("removing",[i]),e._addFailHandlers(e._removeImpl(i).done((t=>{e._eventsStrategy.fireEvent("removed",[t]),e._eventsStrategy.fireEvent("modified")})))},_removeImpl:kt,_addFailHandlers(i){return i.fail(this._errorHandler).fail(Ys)},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this}});Ie.create=function(i,e){if(!(i in xi))throw R.Error("E4020",i);return new xi[i](e)};Ie.registerClass=function(i,e){return e&&(xi[e]=i),i};Ie.inherit=(function(i){return function(e,t){const s=i.apply(this,[e]);return Ie.registerClass(s,t),s}})(Ie.inherit);const ea="totalCount",wi="load",ta="byKey",Jn="insert",Zn="update",eo="remove";function It(i){return i&&M(i.then)}function at(i){return new b().resolve(i).promise()}function Ht(i,e){if(!M(e))throw R.Error("E4011",i)}function sa(i){throw R.Error("E4012",i)}function Ze(i){return function(e){let t;e instanceof Error?t=e:t=new Error((function(s){const n=s[0],o=s[1];return!n||!n.getResponseHeader?null:Ur(n,o)})(arguments)||e&&String(e)||"Unknown error"),t.message!==qi&&i.reject(t)}}function ia(i,e){const t=i._loadFunc;let s;return Ht(wi,t),s=t.apply(i,[e]),Array.isArray(s)?s=at(s):s==null?s=at([]):It(s)||sa(wi),We(s)}function Dh(i,e){const t=i._totalCountFunc;let s;if(!M(t))throw R.Error("E4021");return s=t.apply(i,[e]),It(s)||(s=Number(s),isFinite(s)||sa(ea),s=at(s)),We(s)}function Ah(i,e,t){const s=i._byKeyFunc;let n;return Ht(ta,s),n=s.apply(i,[e,t]),It(n)||(n=at(n)),We(n)}function na(i,e,t,s){if(e.__rawData)s(e.__rawData);else{const n=e.__rawDataPromise||ia(e,t);e._cacheRawData&&(e.__rawDataPromise=n),n.always((()=>{delete e.__rawDataPromise})).done((o=>{e._cacheRawData&&(e.__rawData=o),s(o)})).fail((o=>{var r;const a=Ze(i);(r=e._errorHandler)===null||r===void 0||r.call(e,o),a(o)}))}}function to(i,e,t,s){t=t||{};const n={};"userData"in t&&(n.userData=t.userData),na(i,e,n,(o=>{const r=os(o,{errorHandler:e._errorHandler});let a,l;const d=[];let c,u;s||(a=Ts.queryByOptions(r,t),a===r?c=o.slice(0):d.push(a.enumerate().done((h=>{c=h})))),(t.requireTotalCount||s)&&(l=Ts.queryByOptions(r,t,!0),l===r?u=o.length:d.push(l.count().done((h=>{u=h})))),W.apply(_,d).done((()=>{s?i.resolve(u):t.requireTotalCount?i.resolve(c,{totalCount:u}):i.resolve(c)})).fail((h=>{i.reject(h)}))}))}function kh(i,e,t){na(i,e,{},(s=>{const n=e.key();let o;for(let r=0,a=s.length;r<a;r++)if(o=s[r],Xs(n,e.keyOf(s[r]),t)){i.resolve(o);return}i.reject(R.Error("E4009"))}))}const en=Ie.inherit({ctor(i){i=i||{},this.callBase(i),this._useDefaultSearch=!!i.useDefaultSearch||i.loadMode==="raw",this._loadMode=i.loadMode,this._cacheRawData=i.cacheRawData!==!1,this._loadFunc=i[wi],this._totalCountFunc=i[ea],this._byKeyFunc=i[ta],this._insertFunc=i[Jn],this._updateFunc=i[Zn],this._removeFunc=i[eo]},_clearCache(){delete this.__rawData},createQuery(){throw R.Error("E4010")},clearRawDataCache(){this._clearCache()},_totalCountImpl(i){let e=new b;return this._loadMode==="raw"&&!this._totalCountFunc?to(e,this,i,!0):(Dh(this,i).done((t=>{e.resolve(Number(t))})).fail(Ze(e)),e=this._addFailHandlers(e)),e.promise()},_pushImpl(i){this.__rawData&&Yi({keyInfo:this,data:this.__rawData,changes:i})},_loadImpl(i){let e=new b;return this._loadMode==="raw"?to(e,this,i,!1):(ia(this,i).done(((t,s)=>{e.resolve(t,s)})).fail(Ze(e)),e=this._addFailHandlers(e)),e.promise()},_byKeyImpl(i,e){const t=new b;return this._byKeyViaLoad()?(this._requireKey(),kh(t,this,i)):Ah(this,i,e).done((s=>{t.resolve(s)})).fail(Ze(t)),t.promise()},_byKeyViaLoad(){return this._loadMode==="raw"&&!this._byKeyFunc},_insertImpl(i){const e=this,t=e._insertFunc;let s;const n=new b;return Ht(Jn,t),s=t.apply(e,[i]),It(s)||(s=at(s)),We(s).done((o=>{be().useLegacyStoreResult?n.resolve(i,o):n.resolve(o||i,e.keyOf(o))})).fail(Ze(n)),n.promise()},_updateImpl(i,e){const t=this._updateFunc;let s;const n=new b;return Ht(Zn,t),s=t.apply(this,[i,e]),It(s)||(s=at(s)),We(s).done((o=>{be().useLegacyStoreResult?n.resolve(i,e):n.resolve(o||e,i)})).fail(Ze(n)),n.promise()},_removeImpl(i){const e=this._removeFunc;let t;const s=new b;return Ht(eo,e),t=e.apply(this,[i]),It(t)||(t=at()),We(t).done((()=>{s.resolve(i)})).fail(Ze(s)),s.promise()}});function $h(i){return i==null||typeof i!="object"?!1:"key"in i&&"items"in i}function Oh(i){return Array.isArray(i)&&!!i.length&&$h(i[0])}const oa={},ra=function(i,e,t){t=t||[],e=e||{};const s=function(r,a){return{name:r,args:a}},n=function(r){const a=new b;let l,d,c,u,h;const p=function(f){const y=e.errorHandler;y&&y(f),Ys(f),a.reject(f)};function m(f){switch(f.name){case"sortBy":return h=[f.args],!0;case"thenBy":if(!h)throw R.Error("E4004");return h.push(f.args),!0}return!1}try{l=e.adapter,M(l)||(l=oa[l]),d=l(e),c=[].concat(t).concat(r);const{optimize:f}=d;for(f&&f(c);c.length;){if(u=c[0],!m(u)){if(h){c.unshift(s("multiSort",[h])),h=null;continue}if(String(u.name)!=="enumerate"&&(!d[u.name]||d[u.name].apply(d,u.args)===!1))break}c.shift()}(function(){const y=c[0],C=[];y&&y.name==="multiSort"&&(c.shift(),S(y.args[0],(function(){C.push(s(C.length?"thenBy":"sortBy",this))}))),c=C.concat(c)})(),d.exec(i).done(((y,C)=>{if(!c.length)a.resolve(y,C);else{let T=os(y,{errorHandler:e.errorHandler});S(c,(function(){T=T[this.name].apply(T,this.args)})),T.done(a.resolve).fail(a.reject)}})).fail(p)}catch(f){p(f)}return a.promise()},o={};return S(["sortBy","thenBy","filter","slice","select","groupBy"],(function(){const r=String(this);o[r]=function(){return ra(i,e,t.concat(s(r,arguments)))}})),S(["count","min","max","sum","avg","aggregate","enumerate"],(function(){const r=String(this);o[r]=function(){return n.call(this,s(r,arguments))}})),o},Rh={array:os,remote:ra},je=function(){const i=Array.isArray(arguments[0])?"array":"remote";return Rh[i].apply(this,arguments)},tn=Ie.inherit({ctor(i){Array.isArray(i)?i={data:i}:i=i||{},this.callBase(i);const e=i.data;if(e&&!Array.isArray(e))throw R.Error("E4006");this._array=e||[]},createQuery(){return je(this._array,{errorHandler:this._errorHandler})},_byKeyImpl(i){const e=ut(this,this._array,i);return e===-1?qr(R.Error("E4009")):St(this._array[e])},_insertImpl(i){return Qi(this,this._array,i)},_pushImpl(i){Yi({keyInfo:this,data:this._array,changes:i})},_updateImpl(i,e){return Xi(this,this._array,i,e)},_removeImpl(i){return Jr(this,this._array,i)},clear(){this._eventsStrategy.fireEvent("modifying"),this._array=[],this._eventsStrategy.fireEvent("modified")}},"array"),Bh=["items"],aa="canceled",so=i=>i.state()==="pending",io=i=>{switch(i.length){case 0:return;case 1:return i[0]}return[].slice.call(i)},Ph=(i,e,t)=>Ee(i,(s=>{const n=Ye(s,Bh);return v({},n,{items:la(s.items,e-1,t)})})),la=(i,e,t)=>Array.isArray(i)?e?Ph(i,e,t):Ee(i,t):i,Mh=(i,e,t)=>{const s=t?Si(t).length:0;return la(i,s,e)},da=(i,e)=>{var t;return(t=i)!==null&&t!==void 0&&t.data&&(e=i,i=i.data),Array.isArray(i)||(i=[i]),{data:i,extra:e}},Lh=i=>{const e={};return S(["useDefaultSearch","key","load","loadMode","cacheRawData","byKey","lookup","totalCount","insert","update","remove"],(function(){e[this]=i[this],delete i[this]})),new en(e)},Hh=i=>{const e=i.type;return delete i.type,Ie.create(e,i)},Fh=(i,e)=>new en({load:()=>Qo.sendRequest({url:i,dataType:"json"}),loadMode:e==null?void 0:e.fromUrlLoadMode}),ca=(i,e)=>{let t;return typeof i=="string"&&(i={paginate:!1,store:Fh(i,e)}),i===void 0&&(i=[]),Array.isArray(i)||i instanceof Ie?i={store:i}:i=D({},i),i.store===void 0&&(i.store=[]),t=i.store,"load"in i?t=Lh(i):Array.isArray(t)?t=new tn(t):z(t)&&(t=Hh(D({},t))),i.store=t,i};class Vh{constructor(){this._counter=-1,this._deferreds={}}add(e){return this._counter++,this._deferreds[this._counter]=e,this._counter}remove(e){return delete this._deferreds[e]}cancel(e){return e in this._deferreds?(this._deferreds[e].reject(aa),!0):!1}cancelAll(){for(;this._counter>-1;)this.cancel(this._counter),this._counter--}}function ha(i){let e=[],t=!1;function s(){for(;e.length;){t=!0;const o=e.shift()();if(o!==void 0){if(o.then){W(o).always(s);return}throw Et.Error("E0015")}}t=!1}return{add:function(n,o){e.push(n),t||s()},busy:function(){return t}}}ha().add;const Ds=P.inherit({ctor(i){if(i=ca(i),this._eventsStrategy=new Yo(this,{syncStrategy:!0}),this._store=i.store,this._changedTime=0,i.pushAggregationTimeout!==0){const t=i.pushAggregationTimeout===void 0?()=>5*this._changedTime:i.pushAggregationTimeout;let s,n;const o=fh((r=>{s.resolve(),W(...n).done((()=>this._onPush(r))),n=void 0,s=void 0}),t);this._onPushHandler=r=>{this._aggregationTimeoutId=o(r.changes),s||(s=new b),n=r.waitFor,r.waitFor.push(s.promise())},this._store.on("beforePushAggregation",this._onPushHandler)}else this._onPushHandler=t=>this._onPush(t),this._store.on("push",this._onPushHandler);this._storeLoadOptions=this._extractLoadOptions(i),this._mapFunc=i.map,this._postProcessFunc=i.postProcess,this._pageIndex=i.pageIndex!==void 0?i.pageIndex:0,this._pageSize=i.pageSize!==void 0?i.pageSize:20,this._loadingCount=0,this._loadQueue=this._createLoadQueue(),this._searchValue="searchValue"in i?i.searchValue:null,this._searchOperation=i.searchOperation||"contains",this._searchExpr=i.searchExpr,this._paginate=i.paginate,this._reshapeOnPush=i.reshapeOnPush??!1,S(["onChanged","onLoadError","onLoadingChanged","onCustomizeLoadResult","onCustomizeStoreLoadOptions"],((t,s)=>{s in i&&this.on(s.substr(2,1).toLowerCase()+s.substr(3),i[s])})),this._operationManager=new Vh,this._init()},_init(){this._items=[],this._userData={},this._totalCount=-1,this._isLoaded=!1,E(this._paginate)||(this._paginate=!this.group()),this._isLastPage=!this._paginate},dispose(){var i;this._store.off("beforePushAggregation",this._onPushHandler),this._store.off("push",this._onPushHandler),this._eventsStrategy.dispose(),clearTimeout(this._aggregationTimeoutId),(i=this._delayedLoadTask)===null||i===void 0||i.abort(),this._operationManager.cancelAll(),delete this._store,delete this._items,delete this._delayedLoadTask,this._disposed=!0},_extractLoadOptions(i){const e={};let t=["sort","filter","langParams","select","group","requireTotalCount"];const s=this._store._customLoadOptions();return s&&(t=t.concat(s)),S(t,(function(){e[this]=i[this]})),e},loadOptions(){return this._storeLoadOptions},items(){return this._items},pageIndex(i){if(!st(i))return this._pageIndex;this._pageIndex=i,this._isLastPage=!this._paginate},paginate(i){if(!mn(i))return this._paginate;this._paginate!==i&&(this._paginate=i,this.pageIndex(0))},pageSize(i){if(!st(i))return this._pageSize;this._pageSize=i},isLastPage(){return this._isLastPage},generateStoreLoadOptionAccessor(i){return e=>{const t=io(e);if(t===void 0)return this._storeLoadOptions[i];this._storeLoadOptions[i]=t}},sort(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("sort")(e)},filter(){const i=io(arguments);if(i===void 0)return this._storeLoadOptions.filter;this._storeLoadOptions.filter=i,this.pageIndex(0)},group(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("group")(e)},select(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return this.generateStoreLoadOptionAccessor("select")(e)},requireTotalCount(i){if(!mn(i))return this._storeLoadOptions.requireTotalCount;this._storeLoadOptions.requireTotalCount=i},searchValue(i){if(arguments.length<1)return this._searchValue;this._searchValue=i,this.pageIndex(0)},searchOperation(i){if(!$e(i))return this._searchOperation;this._searchOperation=i,this.pageIndex(0)},searchExpr(i){const e=arguments.length;if(e===0)return this._searchExpr;e>1&&(i=[].slice.call(arguments)),this._searchExpr=i,this.pageIndex(0)},store(){return this._store},key(){var i;return(i=this._store)===null||i===void 0?void 0:i.key()},totalCount(){return this._totalCount},isLoaded(){return this._isLoaded},isLoading(){return this._loadingCount>0},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_createLoadQueue:()=>ha(),_changeLoadingCount(i){const e=this.isLoading();this._loadingCount+=i;const t=this.isLoading();e^t&&this._eventsStrategy.fireEvent("loadingChanged",[t])},_scheduleLoadCallbacks(i){this.beginLoading(),i.always((()=>{this.endLoading()}))},_scheduleFailCallbacks(i){var e=this;i.fail((function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];s[0]!==aa&&e._eventsStrategy.fireEvent("loadError",s)}))},_fireChanged(i){const e=new Date;this._eventsStrategy.fireEvent("changed",i),this._changedTime=new Date-e},_scheduleChangedCallbacks(i){i.done((()=>this._fireChanged()))},loadSingle(i,e){const t=new b,s=this.key(),n=this._store,o=this._createStoreLoadOptions();return this._scheduleFailCallbacks(t),arguments.length<2&&(e=i,i=s),delete o.skip,delete o.group,delete o.refresh,delete o.pageIndex,delete o.searchString,(i===s||n instanceof en&&!n._byKeyViaLoad()?n.byKey(e,o):(o.take=1,o.filter=o.filter?[o.filter,[i,e]]:[i,e],n.load(o))).fail(t.reject).done((r=>{const a=Array.isArray(r)&&!r.length;!E(r)||a?t.reject(R.Error("E4009")):(Array.isArray(r)||(r=[r]),t.resolve(this._applyMapFunction(r)[0]))})),t.promise()},load(){const i=new b,e=()=>{if(!this._disposed&&so(i))return this._loadFromStore(t,i)};this._scheduleLoadCallbacks(i),this._scheduleFailCallbacks(i),this._scheduleChangedCallbacks(i);const t=this._createLoadOperation(i);return this._eventsStrategy.fireEvent("customizeStoreLoadOptions",[t]),this._loadQueue.add((()=>(typeof t.delay=="number"?this._delayedLoadTask=rl.executeAsync(e,t.delay):e(),i.promise()))),i.promise({operationId:t.operationId})},_onPush(i){if(this._reshapeOnPush)this.load();else{const e={changes:i};this._eventsStrategy.fireEvent("changing",[e]);const t=this.group(),s=this.items();let n=0,o=this.paginate()||t?i.filter((r=>r.type==="update")):i;t&&(n=Array.isArray(t)?t.length:1),this._mapFunc&&o.forEach((r=>{r.type==="insert"&&(r.data=this._mapFunc(r.data))})),e.postProcessChanges&&(o=e.postProcessChanges(o)),Yi({keyInfo:this.store(),data:s,changes:o,groupCount:n,useInsertIndex:!0}),this._fireChanged([{changes:i}])}},_createLoadOperation(i){const e=this._operationManager.add(i),t=this._createStoreLoadOptions();return this._store&&!Ri(t==null?void 0:t.langParams)&&(this._store._langParams=v({},this._store._langParams,t.langParams)),i.always((()=>this._operationManager.remove(e))),{operationId:e,storeLoadOptions:t}},reload(){return this.store()._clearCache(),this._init(),this.load()},cancel(i){return this._operationManager.cancel(i)},cancelAll(){return this._operationManager.cancelAll()},_addSearchOptions(i){this._disposed||(this.store()._useDefaultSearch?this._addSearchFilter(i):(i.searchOperation=this._searchOperation,i.searchValue=this._searchValue,i.searchExpr=this._searchExpr))},_createStoreLoadOptions(){const i=D({},this._storeLoadOptions);return this._addSearchOptions(i),this._paginate&&this._pageSize&&(i.skip=this._pageIndex*this._pageSize,i.take=this._pageSize),i.userData=this._userData,i},_addSearchFilter(i){const e=this._searchValue,t=this._searchOperation;let s=this._searchExpr;const n=[];e&&(s||(s="this"),Array.isArray(s)||(s=[s]),S(s,((o,r)=>{n.length&&n.push("or"),n.push([r,t,e])})),i.filter?i.filter=[n,i.filter]:i.filter=n)},_loadFromStore(i,e){const t=(s,n)=>{if(this._disposed||!so(e))return;const o=D(da(s,n),i);this._eventsStrategy.fireEvent("customizeLoadResult",[o]),W(o.data).done((r=>{o.data=r,this._processStoreLoadResult(o,e)})).fail(e.reject)};return i.data?new b().resolve(i.data).done(t):this.store().load(i.storeLoadOptions).done(t).fail(e.reject)},_processStoreLoadResult(i,e){let{data:t}=i,{extra:s}=i;const{storeLoadOptions:n}=i,o=()=>(this._isLoaded=!0,this._totalCount=isFinite(s.totalCount)?s.totalCount:-1,e.resolve(t,s)),r=()=>{this.store().totalCount(n).done((a=>{s.totalCount=a,o()})).fail(e.reject)};this._disposed||(t=this._applyPostProcessFunction(this._applyMapFunction(t)),H(s)||(s={}),this._items=t,(!t.length||!this._paginate||this._pageSize&&t.length<this._pageSize)&&(this._isLastPage=!0),n.requireTotalCount&&!isFinite(s.totalCount)?r():o())},_applyMapFunction(i){return this._mapFunc?Mh(i,this._mapFunc,this.group()):i},_applyPostProcessFunction(i){return this._postProcessFunc?this._postProcessFunc(i):i},on(i,e){return this._eventsStrategy.on(i,e),this},off(i,e){return this._eventsStrategy.off(i,e),this}}),Kh={load:()=>b().reject(),loadSingle:()=>b().reject(),loadFromStore:()=>b().reject(),loadNextPage:()=>b().reject(),loadOptions:w,userData:w,cancel:w,cancelAll:w,filter:w,addSearchFilter:w,group:w,paginate:w,pageSize:w,pageIndex:w,resetDataSourcePageIndex:w,totalCount:w,isLastPage:w,isLoading:w,isLoaded:w,searchValue:w,searchOperation:w,searchExpr:w,select:w,key:w,keyOf:w,store:w,items:w,applyMapFunction:w,getDataSource:w,reload:w,on:w,off:w};class Wh{constructor(e){if(!e)return Kh;this._dataSource=e}load(){return this._dataSource.load()}loadSingle(e,t){return arguments.length<2&&(t=e,e=this.key()),this._dataSource.loadSingle(e,t)}loadFromStore(e){return this.store().load(e)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(e){this._dataSource.cancel(e)}cancelAll(){this._dataSource.cancelAll()}filter(e){return this._dataSource.filter(e)}addSearchFilter(e){this._dataSource._addSearchFilter(e)}group(e){return this._dataSource.group(e)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(e){return this._dataSource.pageIndex(e)}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(e){return arguments.length?this._dataSource.searchValue(e):this._dataSource.searchValue()}searchOperation(e){return this._dataSource.searchOperation(e)}searchExpr(e){return arguments.length?this._dataSource.searchExpr(e):this._dataSource.searchExpr()}select(){return this._dataSource.select(...arguments)}key(){return this._dataSource.key()}keyOf(e){return this.store().keyOf(e)}store(){return this._dataSource.store()}items(){return this._dataSource.items()}applyMapFunction(e){return this._dataSource._applyMapFunction(e)}getDataSource(){return this._dataSource||null}reload(){return this._dataSource.reload()}on(e,t){this._dataSource.on(e,t)}off(e,t){this._dataSource.off(e,t)}}const no="_dataSourceChangedHandler",oo="_getSpecificDataSourceOption",ro="_normalizeDataSource",ua={postCtor(){this.on("disposing",(()=>{this._disposeDataSource()}))},_refreshDataSource(){this._initDataSource(),this._loadDataSource()},_initDataSource(){let i=oo in this?this[oo]():this.option("dataSource"),e,t;this._disposeDataSource(),i&&(i instanceof Ds?(this._isSharedDataSource=!0,this._dataSource=i):(e="_dataSourceOptions"in this?this._dataSourceOptions():{},t=this._dataSourceType?this._dataSourceType():Ds,i=ca(i,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new t(D(!0,{},e,i))),ro in this&&(this._dataSource=this[ro](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())},_initDataController(){var i;const e=(i=this.option)===null||i===void 0?void 0:i.call(this,"_dataController"),t=this._dataSource;e?this._dataController=e:this._dataController=new Wh(t)},_addDataSourceHandlers(){no in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher(){this.readyWatcher=(function(i){this._ready&&this._ready(!i)}).bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)},_addDataSourceChangeHandler(){const i=this._dataSource;this._proxiedDataSourceChangedHandler=(function(e){this[no](i.items(),e)}).bind(this),i.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource(){const i=this._dataSource;i&&(i.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():i.load())},_loadSingle(i,e){return i=i==="this"?this._dataSource.key()||"this":i,this._dataSource.loadSingle(i,e)},_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource(){return this._dataSource||null}},{abs:ao}=Math,zh=ul.inherit({start(i){this._startEventData=X(i),this._startTimer(i)},_startTimer(i){const e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout((()=>{this._requestAccept(i),this._fireEvent("dxhold",i,{target:i.target}),this._forgetAccept()}),e)},move(i){this._touchWasMoved(i)&&this._cancel(i)},_touchWasMoved(i){const e=Rt(this._startEventData,X(i));return ao(e.x)>5||ao(e.y)>5},end(){this._stopTimer()},_stopTimer(){clearTimeout(this._holdTimer)},cancel(){this._stopTimer()},dispose(){this._stopTimer()}});Bi({emitter:zh,bubble:!0,events:["dxhold"]});const pa={name:"dxhold"},Nh=I("contextmenu","dxContexMenu"),Uh=I(pa.name,"dxContexMenu"),Gh=P.inherit({setup(i){const e=_(i);g.on(e,Nh,this._contextMenuHandler.bind(this)),(dt.touch||O.isSimulator())&&g.on(e,Uh,this._holdHandler.bind(this))},_holdHandler(i){jo(i)&&!O.isSimulator()||this._fireContextMenu(i)},_contextMenuHandler(i){this._fireContextMenu(i)},_fireContextMenu:i=>xl({type:"dxcontextmenu",originalEvent:i}),teardown(i){g.off(i,".dxContexMenu")}});wl("dxcontextmenu",new Gh);const jh="dxcontextmenu",qh=(i,e,t)=>{const s=(()=>{let n;return o=>{n!==o&&(t(o,n),n=o)}})();return{dispose:i(e,s),force(){s(e())}}};class As{constructor(e,t,s){this._$element=e,this._options=t,this._rawData=s,Tl(e,this,this._dispose),this._render()}_render(){const e=_("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()}_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))}_startWatcher(e,t){const s=this._rawData,n=this._options.fieldGetter(e),o=qh(this._options.watchMethod(),(()=>n(s)),((r,a)=>{this._dirty=!0,t(r,a)}));this._watchers.push(o)}setDataField(){return this._dirty=!1,S(this._watchers,((e,t)=>{t.force()})),this._dirty}_renderDisabled(e,t){this._$element.toggleClass("dx-state-disabled",!!e),this._$element.attr("aria-disabled",!!e),this._updateOwnerFocus(e)}_updateOwnerFocus(e){const t=this._options.owner;t&&e&&t._resetItemFocus(this._$element)}_renderVisible(e,t){this._$element.toggleClass("dx-state-invisible",e!==void 0&&!e)}_dispose(){S(this._watchers,((e,t)=>{t.dispose()}))}static getInstance(e){return Dl(e,this)}static isClickableItem(e){return H(e)&&"onClick"in e}}class Yh{constructor(e){this._collectionWidget=e}_getItems(){const{items:e=[]}=this._collectionWidget.option();return e}getIndexByItemData(e){return P.abstract()}getItemDataByIndex(e){return P.abstract()}getKeysByItems(e){return P.abstract()}getItemsByKeys(e,t){return P.abstract()}itemsGetter(){return P.abstract()}getKeyByIndex(e){const t=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(t)])[0]}_equalKeys(e,t){return this._collectionWidget._isKeySpecified()?Vt(e,t):e===t}beginCache(){this._cache={}}endCache(){this._cache=null}getIndexByKey(e){return P.abstract()}getNormalizedIndex(e){return this._isNode(e)?this._getNormalizedItemIndex(e):this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))}getIndex(e){return this._isNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this.getIndexByItemData(e)}getItemElement(e){if(this._isNode(e))return _(e);if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));const t=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(t)}_isNode(e){return F.isNode(e&&Ho(e)?e.get(0):e)}deleteItemAtIndex(e){return P.abstract()}itemPlacementFunc(e,t){return this._itemsFromSameParent(e,t)&&e<t?"after":"before"}moveItemAtIndexToIndex(e,t){return P.abstract()}_isNormalizedItemIndex(e){return typeof e=="number"&&Math.round(e)===e}_isItemIndex(e){return P.abstract()}_getNormalizedItemIndex(e){return P.abstract()}_normalizeItemIndex(e){return P.abstract()}_denormalizeItemIndex(e){return P.abstract()}_getItemByNormalizedIndex(e){return P.abstract()}_itemsFromSameParent(e,t){return P.abstract()}}class _a extends Yh{_getPlainItems(){return this._getItems()??[]}getIndexByItemData(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);return t?this.getIndexByKey(t(e)):this._getPlainItems().indexOf(e)}getItemDataByIndex(e){return this._getPlainItems()[e]}deleteItemAtIndex(e){this._getPlainItems().splice(e,1)}itemsGetter(){return this._getPlainItems()}getKeysByItems(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);let s=e;return t&&(s=e.map((n=>t(n)))),s}getIndexByKey(e){const t=this._cache,s=(t==null?void 0:t.keys)??this.getKeysByItems(this._getPlainItems());if(t&&!t.keys&&(t.keys=s),typeof e=="object"){for(let n=0;n<s.length;n+=1)if(this._equalKeys(e,s[n]))return n}else return s.indexOf(e);return-1}getItemsByKeys(e,t){return(t??e).slice()}moveItemAtIndexToIndex(e,t){const s=this._getPlainItems(),n=s[e];s.splice(e,1),s.splice(t,0,n)}_isItemIndex(e){return this._isNormalizedItemIndex(e)}_getNormalizedItemIndex(e){return this._collectionWidget._itemElements().index(e)}_normalizeItemIndex(e){return e}_denormalizeItemIndex(e){return e}_getItemByNormalizedIndex(e){return e>-1?this._collectionWidget._itemElements().eq(e):null}_itemsFromSameParent(e,t){return!0}}const Xh=function(i,e,t,s,n){let o;const r=((a,l,d)=>l((()=>a),d))(i,e,(a=>{if(o&&o(),al(a)){n(a);return}o=(function(l,d,c,u,h){const p={},m=c.slice(),f=c.map((y=>{const C=u[y];return d(C?()=>C(l):()=>l[y],(T=>{if(p[y]=T,m.length){const x=m.indexOf(y);x>=0&&m.splice(x,1)}m.length||h(p)}))}));return function(){f.forEach((y=>y()))}})(a,e,t,s,n)}));return function(){o&&o(),r&&r()}};class sn extends Al{constructor(e,t,s,n){super(),this._render=e,this._fields=t,this._fieldsMap=n||{},this._watchMethod=s}_renderCore(e){const t=_(e.container),s=Xh(e.model,this._watchMethod,this._fields,this._fieldsMap,(n=>{t.empty(),this._render(t,n,e.model)}));return g.on(t,kl,s),t.contents()}}const as="dx-item",Qh="dx-empty-collection",Jh=/^([^.]+\[\d+\]\.)+([\w.]+)$/;let nn=class extends Ps{_supportedKeys(){const e=(t,s)=>{xt(s)||(s.preventDefault(),s.stopPropagation(),this._moveFocus(t,s))};return v({},super._supportedKeys(),{space:t=>{t.preventDefault(),this._enterKeyHandler(t)},enter:this._enterKeyHandler,leftArrow:e.bind(this,"left"),rightArrow:e.bind(this,"right"),upArrow:e.bind(this,"up"),downArrow:e.bind(this,"down"),pageUp:e.bind(this,"up"),pageDown:e.bind(this,"down"),home:e.bind(this,"first"),end:e.bind(this,"last")})}_getHandlerExtendedParams(e,t){return D({},e,{target:t.get(0),currentTarget:t.get(0)})}_enterKeyHandler(e){const{focusedElement:t}=this.option(),s=_(t);if(!s.length)return;const n=this._getItemData(s);if(As.isClickableItem(n)){const o={event:e};this._itemEventHandlerByHandler(s,n.onClick,o)}this._itemClickHandler(this._getHandlerExtendedParams(e,s))}_getDefaultOptions(){return v({},super._getDefaultOptions(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:$.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusedElement:null,displayExpr:void 0,disabledExpr:e=>e?e.disabled:void 0,visibleExpr:e=>e?e.visible:void 0})}_init(){this._compileDisplayGetter(),this._initDataController(),super._init(),this._activeStateUnit=`.${as}`,this._cleanRenderedItems(),this._refreshDataSource()}_compileDisplayGetter(){const{displayExpr:e}=this.option();this._displayGetter=e?le(e):void 0}_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),super._initTemplates()}_getAnonymousTemplateName(){return"item"}_initDefaultItemTemplate(){const e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new sn(((t,s)=>{z(s)?this._prepareDefaultItemTemplate(s,t):(e&&M(e.text)&&(s=e.text(s)),t.text(String(ge(s,""))))}),this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})}_getBindableFields(){return["text","html"]}_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}}_prepareDefaultItemTemplate(e,t){const{text:s,html:n}=e;E(s)&&t.text(s),E(n)&&t.html(n)}_initItemsFromMarkup(){const e=$l(this.$element(),"dxItem"),{items:t=[]}=this.option();if(!e.length||t.length)return;const s=e.map((n=>{let{element:o,options:r}=n;return/\S/.test(o.innerHTML)&&!r.template?r.template=this._prepareItemTemplate(o):_(o).remove(),r}));this.option("items",s)}_prepareItemTemplate(e){const t=`tmpl-${new J}`,s=_(e).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(t,s),t}_dataSourceOptions(){return{paginate:!1}}_cleanRenderedItems(){this._renderedItemsCount=0}_focusTarget(){return this.$element()}_focusInHandler(e){if(super._focusInHandler(e),!this._isFocusTarget(e.target))return;const{focusedElement:t}=this.option(),s=_(t);if(s.length)this._shouldSkipSelectOnFocus=!0,this._setFocusedItem(s),this._shouldSkipSelectOnFocus=!1;else{const n=this._getActiveItem();n.length&&this.option("focusedElement",B(n))}}_focusOutHandler(e){super._focusOutHandler(e);const{focusedElement:t}=this.option(),s=_(t);this._updateFocusedItemState(s,!1)}_findActiveTarget(e){return e.find(this._activeStateUnit)}_getActiveItem(e){const{focusedElement:t}=this.option(),s=_(t);return s.length?s:this._determineFocusedElement(e)}_determineFocusedElement(e){let t=this._getFocusedElementIndex();const s=this._getActiveElement(),n=s.length-1;return t<0&&(t=e?n:0),s.eq(t)}_getFocusedElementIndex(){return 0}_moveFocus(e,t){const s=this._getAvailableItems();let n=_();switch(e){case"pageup":case"up":n=this._prevItem(s);break;case"pagedown":case"down":n=this._nextItem(s);break;case"right":{const{rtlEnabled:o}=this.option();n=o?this._prevItem(s):this._nextItem(s);break}case"left":{const{rtlEnabled:o}=this.option();n=o?this._nextItem(s):this._prevItem(s);break}case"first":n=s.first();break;case"last":n=s.last();break;default:return!1}n.length!==0&&this.option("focusedElement",B(n))}_getVisibleItems(e){return(e??this._itemElements()).filter(":visible")}_getAvailableItems(e){return this._getVisibleItems(e)}_prevItem(e){const t=this._getActiveItem(),s=e.index(t),n=e.last();let o=_(e[s-1]);const{loopItemFocus:r}=this.option();return o.length===0&&r&&(o=n),o}_nextItem(e){const t=this._getActiveItem(!0),s=e.index(t),n=e.first();let o=_(e[s+1]);const{loopItemFocus:r}=this.option();return o.length===0&&r&&(o=n),o}_selectFocusedItem(e){this.selectItem(e)}_updateFocusedItemState(e,t,s){const n=_(e);n.length&&(this._refreshActiveDescendant(),this._refreshItemId(n,s),this._toggleFocusClass(t,n)),this._updateParentActiveDescendant()}_getElementClassToSkipRefreshId(){return""}_shouldSkipRefreshId(e){const t=this._getElementClassToSkipRefreshId();return _(e).hasClass(t)}_refreshActiveDescendant(e){const{focusedElement:t}=this.option();if(E(t)){const n=this._shouldSkipRefreshId(t)?_(t).attr("id"):this.getFocusedItemId();this.setAria("activedescendant",n,e);return}this.setAria("activedescendant",null,e)}_refreshItemId(e,t){const{focusedElement:s}=this.option();this._shouldSkipRefreshId(e)||(!t&&s?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e))}_isDisabled(e){return e&&_(e).attr("aria-disabled")==="true"}_setFocusedItem(e){if(!(e!=null&&e.length))return;this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:t}=this.option(),s=this._isDisabled(e);t&&!s&&!this._shouldSkipSelectOnFocus&&this._selectFocusedItem(e)}_findItemElementByItem(e){let t=_();const s=this._itemDataKey();return this.itemElements().each(((n,o)=>{const r=_(o);return r.data(s)===e?(t=r,!1):!0})),t}_getIndexByItem(e){const{items:t}=this.option();return t.indexOf(e)}_itemOptionChanged(e,t,s,n){const o=this._findItemElementByItem(e);if(!o.length)return;this.constructor.ItemClass.getInstance(o).setDataField(t,s)||this._refreshItem(o,e),t==="disabled"&&s&&this._resetItemFocus(o)}_resetItemFocus(e){const{focusedElement:t}=this.option();e.is(t)&&this._resetFocusedElement()}_resetFocusedElement(){this.option("focusedElement",null)}_refreshItem(e,t){const s=this._getItemData(e),n=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+n,s,null,e)}_updateParentActiveDescendant(){}_optionChanged(e){const{name:t,value:s,previousValue:n,fullName:o}=e;if(t==="items"){const r=o.match(Jh);if(r!=null&&r.length){const a=r[r.length-1],l=o.replace(`.${a}`,""),d=this.option(l);this._itemOptionChanged(d,a,s,n);return}}switch(t){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(n,!1,!0),this._setFocusedItem(_(s));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:super._optionChanged(e)}}_invalidate(){this._resetFocusedElement(),super._invalidate()}_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()}_expectNextPageLoading(){this._startIndexForAppendedItems=0}_expectLastItemLoading(){this._startIndexForAppendedItems=-1}_forgetNextPageLoading(){this._startIndexForAppendedItems=null}_dataSourceChangedHandler(e,t){const{items:s}=this.option();this._initialized&&s&&this._shouldAppendItems()?(this._renderedItemsCount=s.length,(!this._isLastPage()||this._startIndexForAppendedItems!==-1)&&(this.option().items=s.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())}_refreshContent(){this._prepareContent(),this._renderContent()}_dataSourceLoadErrorHandler(){this._forgetNextPageLoading();const{items:e}=this.option();this.option("items",e)}_shouldAppendItems(){return this._startIndexForAppendedItems!=null&&this._allowDynamicItemsAppend()}_allowDynamicItemsAppend(){return!1}_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()}_cleanItemContainer(){_(this._itemContainer()).empty()}_dispose(){super._dispose(),clearTimeout(this._itemFocusTimeout)}_refresh(){this._cleanRenderedItems(),super._refresh()}_itemContainer(e,t){return this.$element()}_itemClass(){return as}_itemContentClass(){return`${this._itemClass()}-content`}_itemResponseWaitClass(){return"dx-item-response-wait"}_itemSelector(){return`.${this._itemClass()}`}_itemDataKey(){return"dxItemData"}_itemIndexKey(){return"dxItemIndex"}_itemElements(){return this._itemContainer().find(this._itemSelector())}_initMarkup(){super._initMarkup(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()}_prepareContent(){Pt((()=>{this._renderContentImpl()}))()}_renderContent(){this._fireContentReadyAction()}_render(){super._render(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()}_getPointerEvent(){return ce.down}_attachClickEvent(){const e=this._itemSelector(),t=ce.down,s=ce.up,n=I(xe,this.NAME),o=I(t,this.NAME),r=I(s,this.NAME),a=new Dn((d=>{const{event:c}=d;this._itemPointerHandler(c)})),l=new Dn((d=>{const{event:c}=d;this._itemPointerUpHandler(c)}));g.off(this._itemContainer(),n,e),g.off(this._itemContainer(),o,e),g.off(this._itemContainer(),r,e),g.on(this._itemContainer(),n,e,(d=>this._itemClickHandler(d))),g.on(this._itemContainer(),o,e,(d=>{a.execute({element:_(d.target),event:d})})),g.on(this._itemContainer(),r,e,(d=>{l.execute({element:_(d.target),event:d})}))}_itemClickHandler(e,t,s){this._itemDXEventHandler(e,"onItemClick",t,s)}_handleItemFocus(e){if(e.isDefaultPrevented())return;const t=_(e.target),s=t.closest(this._itemElements()),n=this._closestFocusable(t);s.length&&this._isFocusTarget(n==null?void 0:n.get(0))&&(this._shouldSkipSelectOnFocus=!0,this.option("focusedElement",B(s)),this._shouldSkipSelectOnFocus=!1)}_itemPointerHandler(e){const{focusStateEnabled:t}=this.option();t&&(this._itemFocusHandler=()=>{clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=void 0,this._handleItemFocus(e)},this._itemFocusTimeout=setTimeout((()=>{this._forcePointerDownFocus()})))}_itemPointerUpHandler(e){}_closestFocusable(e){if(e.is(An))return e;let t=e.parent();for(;t.length&&!F.isDocument(t.get(0))&&!F.isDocumentFragment(t.get(0));){if(t.is(An))return t;t=t.parent()}}_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()}_updateFocusState(e,t){super._updateFocusState(e,t),this._forcePointerDownFocus()}_attachHoldEvent(){const e=this._itemContainer(),t=this._itemSelector(),s=I(pa.name,this.NAME);g.off(e,s,t),g.on(e,s,t,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))}_getHoldTimeout(){const{itemHoldTimeout:e}=this.option();return e}_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")}_itemHoldHandler(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0}_attachContextMenuEvent(){const e=this._itemContainer(),t=this._itemSelector(),s=I(jh,this.NAME);g.off(e,s,t),g.on(e,s,t,this._itemContextMenuHandler.bind(this))}_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")}_itemContextMenuHandler(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0}_renderContentImpl(){const{items:e}=this.option(),t=e??[];this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t)}_renderItems(e){e.length&&S(e,((t,s)=>{this._renderItem(this._renderedItemsCount+t,s)})),this._renderEmptyMessage()}_getItemsContainer(){return this._itemContainer()}_setAttributes(e){const{_itemAttributes:t}=this.option(),s=v({},t),{class:n}=s;if(n){const o=e.get(0).className;s.class=[o,n].join(" ")}e.attr(s)}_renderItem(e,t,s,n){const o=(e==null?void 0:e.item)??e,r=s??this._getItemsContainer(),a=this._renderItemFrame(o,t,r,n);this._setElementData(a,t,o),this._setAttributes(a),this._attachItemClickEvent(t,a);const l=this._getItemContent(a),{itemTemplate:d}=this.option(),c=this._renderItemContent({index:o,itemData:t,container:B(l),contentClass:this._itemContentClass(),defaultTemplateName:d});return W(c).done((u=>{this._postprocessRenderItem({itemElement:a,itemContent:u,itemData:t,itemIndex:o}),this._executeItemRenderAction(e,t,B(a))})),a}_getItemContent(e){const t=e.find(".dx-item-content-placeholder");return t.removeClass("dx-item-content-placeholder"),t}_attachItemClickEvent(e,t){!e||!As.isClickableItem(e)||g.on(t,xe,(s=>{const n={event:s};this._itemEventHandlerByHandler(t,e.onClick,n)}))}_renderItemContent(e){const t=this._getItemTemplateName(e),s=this._getTemplate(t);this._addItemContentClasses(e);const n=_(this._createItemByTemplate(s,e));return n.hasClass("dx-template-wrapper")?this._renderItemContentByNode(e,n):e.container}_renderItemContentByNode(e,t){return _(e.container).replaceWith(t),e.container=B(t),this._addItemContentClasses(e),t}_addItemContentClasses(e){const t=[as+"-content",e.contentClass];_(e.container).addClass(t.join(" "))}_appendItemToContainer(e,t,s){t.appendTo(e)}_renderItemFrame(e,t,s,n){const o=_("<div>");new this.constructor.ItemClass(o,this._itemOptions(),t||{}),n!=null&&n.length?n.replaceWith(o):this._appendItemToContainer.call(this,s,o,e);const{useItemTextAsTitle:r}=this.option();if(r){const a=this._displayGetter?this._displayGetter(t):t;o.attr("title",a)}return o}_itemOptions(){return{watchMethod:()=>this.option("integrationOptions.watchMethod"),owner:this,fieldGetter:e=>{const t=this.option(`${e}Expr`);return le(t)}}}_postprocessRenderItem(e){}_executeItemRenderAction(e,t,s){this._getItemRenderAction()({itemElement:s,itemIndex:e,itemData:t})}_setElementData(e,t,s){e.addClass([as,this._itemClass()].join(" ")).data(this._itemDataKey(),t).data(this._itemIndexKey(),s)}_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"}),this._itemRenderAction}_getItemRenderAction(){return this._itemRenderAction??this._createItemRenderAction()}_getItemTemplateName(e){const t=e.itemData,{itemTemplateProperty:s}=this.option(),n=e.templateProperty??s;return(t&&n?t[n]:void 0)||e.defaultTemplateName}_createItemByTemplate(e,t){const{itemData:s,container:n,index:o}=t;return e.render({model:s,container:n,index:o,onRendered:this._onItemTemplateRendered(e,t)})}_onItemTemplateRendered(e,t){return()=>{}}_emptyMessageContainer(){return this._itemContainer()}_renderEmptyMessage(e){const{items:t=[],noDataText:s}=this.option(),n=e??t,o=!s||(n==null?void 0:n.length)||this._dataController.isLoading();if(o&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),!o){this._$noData=this._$noData??_("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer());const{encodeNoDataText:r}=this.option();r?this._$noData.text(s):this._$noData.html(s)}this.$element().toggleClass(Qh,!o)}_itemDXEventHandler(e,t,s,n){this._itemEventHandler(e.target,t,D(s,{event:e}),n)}_itemEventHandler(e,t,s,n){const o=this._createActionByOption(t,v({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,s)}_itemEventHandlerByHandler(e,t,s,n){const o=this._createAction(t,D({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,s)}_itemEventHandlerImpl(e,t,s){const n=this._closestItemElement(_(e)),o=D({},s);return t(D(s,this._extendActionArgs(n),o))}_extendActionArgs(e){return{itemElement:B(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}}_closestItemElement(e){return _(e).closest(this._itemSelector())}_getItemData(e){return _(e).data(this._itemDataKey())}_getSummaryItemsSize(e,t,s){let n=0;return t&&S(t,((o,r)=>{e==="width"?n+=ee(r,s??!1):e==="height"&&(n+=j(r,s??!1))})),n}getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new J}`),this._focusedItemId}itemElements(){return this._itemElements()}itemsContainer(){return this._itemContainer()}};nn.ItemClass=As;nn.include(ua);class fa{constructor(e){this._lastSelectAllPageDeferred=b().reject(),this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,t){this.options[e]=t}onSelectionChanging(){const{selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,onSelectionChanging:a=w}=this.options,l={selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,cancel:!1};return a(l),l.cancel}_callCallbackIfNotCanceled(e,t){const s=this.onSelectionChanging();Vo(s)?s.then((n=>{n?t():e()})).catch((()=>{e()})):s?t():e()}onSelectionChanged(){const{selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,onSelectionChanged:a=w}=this.options;this._clearItemKeys(),a({selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r})}equalKeys(e,t){return this.options.equalByReference&&H(e)&&H(t)?e===t:Vt(e,t)}getSelectableItems(e){return e.filter((t=>!(t!=null&&t.disabled)))}_clearSelection(e,t,s,n){let o=e||[];return o=Array.isArray(o)?o:[o],this.validate(),this.selectedItemKeys(o,t,s,n)}_removeTemplateProperty(e){return Array.isArray(e)?e.map((t=>this._removeTemplateProperty(t))):(H(e)&&delete e.template,e)}_getQueryParams(){const{sensitivity:e}=this.options;if(e)return{langParams:{collatorOptions:{sensitivity:e}}}}_loadFilteredData(e,t,s,n){const o=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,r=this.options.maxFilterLengthInRequest&&o>this.options.maxFilterLengthInRequest,a=b(),l=this._getQueryParams(),d=v({filter:r?void 0:e,select:r?this.options.dataFields():s||this.options.dataFields()},l);return e&&Array.isArray(e)&&e.length===0?a.resolve([]):this.options.load(d).done((c=>{let u=!Array.isArray(c)&&z(c)?c.data:c;t&&!n?u=u.filter(t):r&&(u=je(u).filter(e).toArray()),a.resolve(u)})).fail((c=>{a.reject(c)})),a}updateSelectedItemKeyHash(e){for(let t=0;t<e.length;t+=1){const s=Wt(e[t]);H(s)||(this.options.keyHashIndices[s]=this.options.keyHashIndices[s]||[],this.options.keyHashIndices[s].push(t))}}_isAnyItemSelected(e){if(!e.find((t=>this.options.isItemSelected(t))))return!1}_getFullSelectAllState(){const e=this.options.plainItems(),{filter:t}=this.options,s=t();let n=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter((a=>!(a!=null&&a.disabled)));s&&(n=je(n).filter(s).toArray());const o=n.length,r=e.length-this.getSelectableItems(e).length;if(!o)return this._isAnyItemSelected(e);if(o>=this.options.totalCount()-r)return!0}_getVisibleSelectAllState(){const e=this.getSelectableItems(this.options.plainItems());let t=!1,s=!1;return e.forEach((n=>{const o=this.options.getItemData(n),r=this.options.keyOf(o);this.options.isSelectableItem(n)&&(this.isItemKeySelected(r)?t=!0:s=!0)})),t?s?void 0:!0:!1}selectedItemKeys(e,t,s,n,o,r){throw new Error("selectedItemKeys method should be overriden")}isItemKeySelected(e){throw new Error("isItemKeySelected method should be overriden")}isItemDataSelected(e){throw new Error("isItemKeySelected method should be overriden")}addSelectedItem(e,t,s){throw new Error("addSelectedItem method should be overriden")}removeSelectedItem(e){throw new Error("removeSelectedItem method should be overriden")}_selectAllPlainItems(e){this.getSelectableItems(this.options.plainItems()).forEach((s=>{if(this.options.isSelectableItem(s)){const n=this.options.getItemData(s),o=this.options.keyOf(n),r=this.isItemKeySelected(o);!r&&!e&&this.addSelectedItem(o,n),r&&e&&this.removeSelectedItem(o)}}))}}class Zh extends fa{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const e=b(),t=this.options.key(),s=$e(t)?[t]:t,n=o=>this.options.keyOf(o);return this._loadFilteredData(this.options.selectionFilter,null,s).done((o=>{const r=(Array.isArray(o)?o:[]).map(n);e.resolve(r)})).fail((o=>{e.reject(o)})),e.promise()}selectedItemKeys(e,t,s,n){if(n){const o=this.options.filter();!o||JSON.stringify(o)===JSON.stringify(this.options.selectionFilter)&&s?this._setOption("selectionFilter",s?[]:null):this._addSelectionFilter(s,o,n)}else t||this._setOption("selectionFilter",[]),e.forEach((o=>{s?this.removeSelectedItem(o):this.addSelectedItem(o,n,!t)}));return this.onSelectionChanged(),b().resolve()}setSelectedItems(e){this._setOption("selectionFilter",null),e.forEach((t=>{this.addSelectedItem(t)}))}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){const{selectionFilter:t}=this.options;if(!t)return!0;const s=this._getQueryParams();return!!je([e],s).filter(t).toArray().length}_getKeyExpr(){const e=this.options.key();return Array.isArray(e)&&e.length===1?e[0]:e}_normalizeKey(e){const t=this.options.key();return Array.isArray(t)&&t.length===1?e[t[0]]:e}_getFilterByKey(e){const t=this._getKeyExpr();let s=[t,"=",this._normalizeKey(e)];if(Array.isArray(t)){s=[];for(let n=0;n<t.length;n+=1)s.push([t[n],"=",e[t[n]]]),n!==t.length-1&&s.push("and")}return s}addSelectedItem(e,t,s){const n=this._getFilterByKey(e);this._addSelectionFilter(!1,n,t,s)}removeSelectedItem(e){const t=this._getFilterByKey(e);this._addSelectionFilter(!0,t)}validate(){const{key:e}=this.options;if(e&&e()===void 0)throw ie.Error("E1042","Deferred selection")}_findSubFilter(e,t){if(!e)return-1;const s=JSON.stringify(t);for(let n=0;n<e.length;n+=1){const o=e[n];if(o&&JSON.stringify(o)===s)return n}return-1}_isLastSubFilter(e,t){return e&&t?this._findSubFilter(e,t)===e.length-1||this._findSubFilter([e],t)===0:!1}_addFilterOperator(e,t){let s=e;return s.length>1&&$e(s[1])&&s[1]!==t&&(s=[s]),Array.isArray(s)&&s.length&&s.push(t),s}_denormalizeFilter(e){let t=e;return t&&$e(t[0])&&(t=[t]),t}_isOnlyNegativeFiltersLeft(e){return e.every(((t,s)=>s%2===0?Array.isArray(t)&&t[0]==="!":t==="and"))}_addSelectionFilter(e,t,s,n){var o;const r=e?"and":"or";let a=!0,l=this.options.selectionFilter||[];if(l=this._denormalizeFilter(l),(o=l)!==null&&o!==void 0&&o.length&&!n){const d=this._removeSameFilter(l,t,e,s),c=this._removeSameFilter(l,t,!e);e&&(d!==-1||c!==-1)&&this._isOnlyNegativeFiltersLeft(l)&&(l=[]);const h=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(l,c);a=!!(t!=null&&t.length)&&!h}if(a&&(l=this._addFilterOperator(l,r),Array.isArray(l)&&t)){const d=e?["!",t]:t;l.push(d)}l=this._normalizeFilter(l),this._setOption("selectionFilter",!e&&!l.length?null:l)}_normalizeFilter(e){let t=e;return t&&t.length===1&&([t]=t),t}_removeFilterByIndex(e,t,s){const n=e[1];t>0?e.splice(t-1,2):e.splice(t,2),s&&n==="and"&&e.splice(0,e.length)}_isSimpleKeyFilter(e,t){return(e==null?void 0:e.length)===3&&e[0]===t&&e[1]==="="}_isKeyFilter(e){if((e==null?void 0:e.length)===2&&(e==null?void 0:e[0])==="!")return this._isKeyFilter(e[1]);const t=this._getKeyExpr();if(Array.isArray(t)){if((e==null?void 0:e.length)!==2*t.length-1)return!1;for(let s=0;s<t.length;s+=1)if(s>0&&(e==null?void 0:e[2*s-1])!=="and"||!this._isSimpleKeyFilter(e==null?void 0:e[2*s],t[s]))return!1;return!0}return this._isSimpleKeyFilter(e,t)}_hasKeyFiltersOnlyStartingFromIndex(e,t){if(t>=0){for(let s=t;s<e.length;s+=1)if(typeof e[s]!="string"&&!this._isKeyFilter(e[s]))return!1;return!0}return!1}_removeSameFilter(e,t,s,n){const o=s?["!",t]:t;if(JSON.stringify(o)===JSON.stringify(e))return e.splice(0,e.length),0;const r=this._findSubFilter(e,o);if(r>=0)return this._removeFilterByIndex(e,r,n),r;for(let a=0;a<e.length;a+=1)if(Array.isArray(e[a])&&e[a].length>2){const l=this._removeSameFilter(e[a],o,!1,n);if(l>=0){if(!e[a].length)this._removeFilterByIndex(e,a,n);else if(e[a].length===1){const[d]=e[a];e[a]=d}return l}}return-1}getSelectAllState(){const e=this.options.filter();let{selectionFilter:t}=this.options;if(!t)return!0;if(!t.length)return!1;if(e!=null&&e.length){if(t=this._denormalizeFilter(t),this._isLastSubFilter(t,e))return!0;if(this._isLastSubFilter(t,["!",e]))return!1}}loadSelectedItemsWithFilter(){const e=this.options.filter(),{selectionFilter:t}=this.options,s=e?[e,"and",t]:t;return this._loadFilteredData(s)}_onePageSelectAll(e){return this._selectAllPlainItems(e),this.onSelectionChanged(),b().resolve()}}const on=function(i,e){const t=e(i);if(H(t))try{return JSON.stringify(t)}catch{return t}return t},eu=function(i,e,t,s){const n=on(i,s);return e[t[n]]},tu=function(i,e){if(i.length!==e.length)return!1;for(let t=0;t<e.length;t++)if(i[t]!==e[t])return!1;return!0},lo=function(i,e){const t={};return i.forEach(((s,n)=>{const o=on(s,e);if(E(t[String(o)]))throw ie.Error("E1040",o);t[o]=n})),t},su=function(i){let{oldItems:e,newItems:t,getKey:s,isItemEquals:n,detectReorders:o=!1}=i;try{const r=lo(e,s),a=lo(t,s);let l=0,d=0;const c=[],u=Math.max(e.length,t.length);for(let h=0;h<u+l;h+=1){const p=t[h],m=h-l+d,f=e[m];if(!p||f&&!eu(f,t,a,s))f&&(c.push({type:"remove",key:s(f),index:h,oldItem:f}),d++,h--);else{const C=on(p,s),T=r[C],x=e[T];if(!x)l++,c.push({type:"insert",data:p,index:h});else if(T===m)n(x,p)||c.push({type:"update",data:p,key:s(p),index:h,oldItem:x});else{if(!o)return;c.push({type:"remove",key:s(x),index:T,oldItem:x}),c.push({type:"insert",data:p,index:h}),l++,d++}}}if(o){const h=c.filter((f=>f.type==="remove")).sort(((f,y)=>y.index-f.index)),p=c.filter((f=>f.type==="insert")).sort(((f,y)=>f.index-y.index)),m=c.filter((f=>f.type==="update"));return[...h,...p,...m]}return c}catch(r){ll.error(r);return}},co=function(i,e){this.getLocalFilter=function(a,l,d,c){return l=l===void 0?Vt:l,o.bind(this,l,a,d,c)},this.getExpr=function(a){if(!a)return;let l;return i.forEach((function(d,c){l=l||[];let u;c>0&&l.push(e?"and":"or"),$e(a)||M(a)?u=r(a,d):u=(function(h,p){const m=[];for(let f=0,{length:y}=h;f<y;f++){const C=h[f],T=le(C),x=p&&T(p),re=r(C,x);if(!re)break;f>0&&m.push(e?"or":"and"),m.push(re)}return m})(a,d),l.push(u)})),l&&l.length===1&&(l=l[0]),l},this.getCombinedFilter=function(a,l){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const c=this.getExpr(a);let u=c;return(d||e)&&l&&(c?(u=[],u.push(c),u.push(l)):u=l),u};let t;const s=function(a,l){if(!t){t={};const d=n(i,a,l);for(let c=0;c<d.length;c++)t[Wt(d[c])]=!0}return t},n=function(a,l,d){return Array.isArray(d)?a.map((c=>l(c))):a};function o(a,l,d,c,u){const h=l(u);let p,m;if(!d&&(p=Wt(h),!H(p)))return s(l,c)[p]?!e:!!e;for(m=0;m<i.length;m++)if(a(i[m],h))return!e;return!!e}function r(a,l){if(l!==void 0)return[a,e?"<>":"=",l]}};class iu extends fa{constructor(e){super(e),this._lastSelectAllPageDeferred=b().reject(),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,t){const{keyOf:s}=this.options;let n;if(!s)return;const o=t&&e.length>1&&!this.options.equalByReference;o&&(n={}),e.forEach((r=>{const a=s(r);if(t){const l=this.removeSelectedItem(a,n,r&&typeof r=="object"&&"disabled"in r?!!r.disabled:!1);n&&st(l)&&l>=0&&(n[l]=!0)}else this.addSelectedItem(a,r)})),o&&this._batchRemoveSelectedItems(n)}_batchRemoveSelectedItems(e){const t=this.options.selectedItemKeys.slice(0),s=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let n=0;n<t.length;n+=1)e[n]||(this.options.selectedItemKeys.push(t[n]),this.options.selectedItems.push(s[n]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,t,s,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r=b();const a=this.options.key();if(!e.length&&!s)return r.resolve([]),r;if(s&&t&&!n)return r.resolve(this.getSelectedItems()),r;const l=new co(e,s),d=l.getCombinedFilter(a,n,o);let c=[];if(t){const{selectedItems:p}=this.options;c=d&&e.length!==p.length?je(p).filter(d).toArray():p.slice(0)}let u=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const h=l.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,a);return u=u.filter(h),c.length||!s&&u.length===e.length?r.resolve(u):r=this._loadFilteredData(d,h,null,s),r}_replaceSelectionUpdate(e){const{keyOf:t}=this.options;if(!t)return;const s=e.map((n=>t(n)));this.setSelectedItems(s,e)}_warnOnIncorrectKeys(e){const{allowNullValue:t}=this.options;e.forEach((s=>{(!t||s!==null)&&!this.isItemKeySelected(s)&&ie.log("W1002",s)}))}_isMultiSelectEnabled(){const{mode:e}=this.options;return e==="all"||e==="multiple"}_requestInProgress(){var e;return((e=this._lastLoadDeferred)===null||e===void 0?void 0:e.state())==="pending"}_concatRequestsItems(e,t,s,n){let o=[];const r=s?e:[];return n?o=n:o=kn(e,this.options.selectedItemKeys),{addedItems:t.added.concat(o),removedItems:t.removed.concat(r),keys:e}}_collectLastRequestData(e,t,s,n){const o=t&&s,r={added:[],removed:[]},a=this._isMultiSelectEnabled(),l={addedItems:[],removedItems:[],keys:[]};if(!a)return l;let d=this._lastRequestData??l;if(this._shouldMergeWithLastRequest){if(o){var c;(c=this._lastLoadDeferred)===null||c===void 0||c.reject(),d={}}else if(!tu(e,this.options.selectedItemKeys)){var u,h;if(r.added=(u=d)===null||u===void 0?void 0:u.addedItems,r.removed=(h=d)===null||h===void 0?void 0:h.removedItems,!t){var p;(p=this._lastLoadDeferred)===null||p===void 0||p.reject()}}}return d=this._concatRequestsItems(e,r,t,this._shouldMergeWithLastRequest?void 0:n),d}_updateKeysByLastRequestData(e,t,s){let n=e;if(this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&this._lastRequestData&&!t&&!s){var o;n=kn([...e,...this._lastRequestData.addedItems],(o=this._lastRequestData)===null||o===void 0?void 0:o.removedItems),n=Ol(n)}return n}_loadSelectedItems(e,t,s,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const r=b(),a=this.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,t,s,n),W(this._lastLoadDeferred).always((()=>{const l=this._updateKeysByLastRequestData(e,t,s);this._shouldMergeWithLastRequest=!1,this._loadSelectedItemsCore(l,t,s,a,o).done((d=>{r.resolve(d)})).fail((d=>{r.reject(d)}))})),this._lastLoadDeferred=r,r}selectedItemKeys(e,t,s,n,o,r){if(this._isCancelingInProgress)return b().reject();const a=this._loadSelectedItems(e,s,n,o,r),l=b();return a.done((d=>{this._storeSelectionState(),t?this._preserveSelectionUpdate(d,s):this._replaceSelectionUpdate(d),this._isCancelingInProgress=!0,this._callCallbackIfNotCanceled((()=>{this._isCancelingInProgress=!1,this.onSelectionChanged(),l.resolve(d)}),(()=>{this._isCancelingInProgress=!1,this._restoreSelectionState(),l.reject()}))})),l}addSelectedItem(e,t){if(E(t)&&!this.options.ignoreDisabledItems&&t.disabled){this.options.disabledItemKeys.includes(e)||this.options.disabledItemKeys.push(e);return}const s=this._getKeyHash(e);this._indexOfSelectedItemKey(s)===-1&&(!H(s)&&this.options.keyHashIndices&&(this.options.keyHashIndices[s]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(t),this.options.selectedItems.push(t))}_getSelectedIndexByKey(e,t){const{selectedItemKeys:s}=this.options;return s.findIndex(((n,o)=>!(t!=null&&t[o])&&this.equalKeys(s[o],e)))}_getSelectedIndexByHash(e,t){let s=this.options.keyHashIndices[e];return s&&s.length>1&&t&&(s=s.filter((n=>!t[n]))),s&&s[0]>=0?s[0]:-1}_indexOfSelectedItemKey(e,t){let s=-1;return this.options.equalByReference?s=this.options.selectedItemKeys.indexOf(e):H(e)?s=this._getSelectedIndexByKey(e,t):s=this._getSelectedIndexByHash(e,t),s}_shiftSelectedKeyIndices(e){for(let t=e;t<this.options.selectedItemKeys.length;t+=1){const s=this.options.selectedItemKeys[t],n=Wt(s),o=this.options.keyHashIndices[n];if(o)for(let r=0;r<o.length;r+=1)o[r]>e&&(o[r]-=1)}}removeSelectedItem(e,t,s){if(!this.options.ignoreDisabledItems&&s)return;const n=this._getKeyHash(e),o=!!t,r=this._indexOfSelectedItemKey(n,t);if(r<0||(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[r]),o)||(this.options.selectedItemKeys.splice(r,1),this.options.selectedItems.splice(r,1),H(n)||!this.options.keyHashIndices))return r;const a=this.options.keyHashIndices[n];return a&&(a.shift(),a.length||delete this.options.keyHashIndices[n],this._shiftSelectedKeyIndices(r)),r}_updateAddedItemKeys(e,t){for(let s=0;s<e.length;s+=1)this.isItemKeySelected(e[s])||(this.options.addedItemKeys.push(e[s]),this.options.addedItems.push(t[s]))}_updateRemovedItemKeys(e,t,s){for(let n=0;n<t.length;n+=1)this.isItemKeySelected(t[n])||(this.options.removedItemKeys.push(t[n]),this.options.removedItems.push(s[n]))}_isItemSelectionInProgress(e,t){if(t&&this._lastRequestData&&this._requestInProgress()){var n;return(((n=this._lastRequestData)===null||n===void 0?void 0:n.addedItems)??[]).includes(e)}return!1}_getKeyHash(e){return this.options.equalByReference?e:Wt(e)}setSelectedItems(e,t){this._updateAddedItemKeys(e,t);const s=this.options.selectedItemKeys,n=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._updateRemovedItemKeys(e,s,n)}isItemDataSelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.options.keyOf(e);return this.isItemKeySelected(s,t)}isItemKeySelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this._isItemSelectionInProgress(e,t.checkPending);if(!s){const n=this._getKeyHash(e);s=this._indexOfSelectedItemKey(n)!==-1}return s}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const e=this.options.key(),t=this.getSelectedItemKeys(),s=this.options.filter();if(!t.length)return b().resolve([]);const o=new co(t).getCombinedFilter(e,s,!0);return this._loadFilteredData(o)}_storeSelectionState(){const{selectedItems:e,selectedItemKeys:t,keyHashIndices:s}=this.options;this._storedSelectionState={keyHashIndices:JSON.stringify(s),selectedItems:[...e],selectedItemKeys:[...t]}}_restoreSelectionState(){if(this._clearItemKeys(),!this._storedSelectionState)return;const{selectedItemKeys:e,selectedItems:t,keyHashIndices:s}=this._storedSelectionState;this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._setOption("keyHashIndices",JSON.parse(s))}_onePageSelectAll(e){return this._lastSelectAllPageDeferred.state()==="pending"?b().reject():(this._storeSelectionState(),this._selectAllPlainItems(e),this._lastSelectAllPageDeferred=b(),this._callCallbackIfNotCanceled((()=>{this.onSelectionChanged(),this._lastSelectAllPageDeferred.resolve()}),(()=>{this._restoreSelectionState(),this._lastSelectAllPageDeferred.reject()})),this._lastSelectAllPageDeferred)}}class nu{constructor(e){this.options=D(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys??[]}),this._selectionStrategy=this.options.deferred?new Zh(this.options):new iu(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:w,key(){},keyOf:t=>t,load:()=>b().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:t=>t,dataFields(){},filter(){}}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}_isStandardStrategy(e){return this.options.deferred}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(e===void 0)return this.options.selectionFilter;const t=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,t&&this.onSelectionChanged()}setSelection(e,t){return this.selectedItemKeys(e,!1,!1,!1,t)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,t,s,n,o){let r=e??[];return r=Array.isArray(r)?r:[r],this.validate(),this._selectionStrategy.selectedItemKeys(r,t,s,n,o)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,t){this._selectionStrategy.addSelectedItem(t,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,t){this._selectionStrategy.setSelectedItems(e,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e){var t,s;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=!1;const a=this.options.plainItems(),l=a[e];let d=e,c;const{isVirtualPaging:u}=this.options,h=(t=(s=this.options).allowLoadByRange)===null||t===void 0?void 0:t.call(s),{alwaysSelectByShift:p}=this.options;let m,f=!1,y=!1;const C=q=>q>=0&&!a.filter((Qe=>Qe.loadIndex===q)).length;if(u&&E(l)&&(h&&(m=l.loadIndex-d,d=l.loadIndex),f=C(this._focusedItemIndex),E(this._shiftFocusedItemIndex)&&(y=C(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;const T=this.options.getItemData(l),x=this.options.keyOf(T);let re=n.shift;if(p===!1&&re&&(re=h!==!1||!f&&!y),re&&this.options.mode==="multiple"&&this._focusedItemIndex>=0)h&&(f||y)?(r=d!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,r&&(c=this.changeItemSelectionWhenShiftKeyInVirtualPaging(d))):r=this.changeItemSelectionWhenShiftKeyPressed(d,a,m);else if(n.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!o){const q=this._selectionStrategy.isItemDataSelected(T);this.options.mode==="single"&&this.clearSelectedItems(),q?this._removeSelectedItem(x):this._addSelectedItem(T,x)}r=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const q=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],x);(this.options.selectedItemKeys.length!==1||!q)&&(this._setSelectedItems([x],[T]),r=!0)}if(r)return W(c).done((()=>{this._focusedItemIndex=d,o||this.onSelectionChanged()})),!0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return this.options.mode==="single"||this.options.mode==="multiple"}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._selectionStrategy.isItemKeySelected(e,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){var t,s;const n=((t=(s=this.options).getLoadOptions)===null||t===void 0?void 0:t.call(s,e,this._focusedItemIndex,this._shiftFocusedItemIndex))??{},o=b(),r=n.skip;return this.options.load(n).done((a=>{const l=!Array.isArray(a)&&z(a)?a.data:a;this.changeItemSelectionWhenShiftKeyPressed(e,l,r),o.resolve()})),o.promise()}changeItemSelectionWhenShiftKeyPressed(e,t,s){let n=!1;const o=E(s);let r=o?this._focusedItemIndex-s:this._focusedItemIndex;const{keyOf:a}=this.options,l=t[r],d=this.options.getItemData(l),c=a(d),u=l&&this.isItemDataSelected(d);E(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex);let h=0,p,m=0,f=0;if(this._shiftFocusedItemIndex!==this._focusedItemIndex)for(h=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,m=o?this._focusedItemIndex-s:this._focusedItemIndex,f=o?this._shiftFocusedItemIndex-s:this._shiftFocusedItemIndex,r=m;r!==f;r+=h)(o||this.isDataItem(t[r]))&&(p=a(this.options.getItemData(t[r])),this._removeSelectedItem(p),n=!0);if(e!==this._shiftFocusedItemIndex){for(h=e<this._shiftFocusedItemIndex?1:-1,m=o?e-s:e,f=o?this._shiftFocusedItemIndex-s:this._shiftFocusedItemIndex,r=m;r!==f;r+=h)if(o||this.isDataItem(t[r])){const y=this.options.getItemData(t[r]);p=a(y),this._addSelectedItem(y,p),n=!0}}return(o||this.isDataItem(l))&&!u&&(this._addSelectedItem(d,c),n=!0),n}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._selectionStrategy._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._selectionStrategy._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}const ke=-1,ue=i=>i!==ke;class Jt extends nn{constructor(e,t){Jt._userOptions=t??{},super(e,t)}_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference.selectedItem=!0}_getDefaultOptions(){return v({},super._getDefaultOptions(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:ke,focusOnSelectedItem:!0,selectedItem:null,onSelectionChanging:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})}_init(){this._initEditStrategy(),super._init(),this._initKeyGetter(),this._initActions(),this._initSelectionModule()}_initKeyGetter(){const{keyExpr:e}=this.option();this._keyGetter=le(e)}_selectedItemClass(){return"dx-item-selected"}_getActionsList(){return["onSelectionChanging","onSelectionChanged"]}_initActions(){this._actions={},this._getActionsList().forEach((t=>{this._actions[t]=this._createActionByOption(t,{excludeValidators:["disabled","readOnly"]})??w}))}_getKeysByItems(e){return this._editStrategy.getKeysByItems(e)}_getItemsByKeys(e,t){return this._editStrategy.getItemsByKeys(e,t)}_getKeyByIndex(e){return this._editStrategy.getKeyByIndex(e)}_getIndexByKey(e){return this._editStrategy.getIndexByKey(e)}_getIndexByItemData(e){return this._editStrategy.getIndexByItemData(e)}_isKeySpecified(){return!!this._dataController.key()}_getCombinedFilter(){return this._dataController.filter()}key(){const{keyExpr:e}=this.option();return e||this._dataController.key()}keyOf(e){const{keyExpr:t}=this.option();return t?this._keyGetter(e):this._dataController.store()?this._dataController.keyOf(e):e}_nullValueSelectionSupported(){return!1}_initSelectionModule(){const e=this,{itemsGetter:t}=this._editStrategy,{selectionMode:s,maxFilterLengthInRequest:n}=this.option();this._selection=new nu({allowNullValue:this._nullValueSelectionSupported(),mode:s,maxFilterLengthInRequest:n,equalByReference:!this._isKeySpecified(),onSelectionChanging:o=>{var r,a;const l=o.addedItemKeys.length||o.removedItemKeys.length;if(!this._rendered||!l)return;const d={removedItems:o.removedItems,addedItems:o.addedItems,cancel:!1};(r=(a=this._actions).onSelectionChanging)===null||r===void 0||r.call(a,d),o.cancel=d.cancel},onSelectionChanged:o=>{(o.addedItemKeys.length||o.removedItemKeys.length)&&(this.option("selectedItems",this._getItemsByKeys(o.selectedItemKeys,o.selectedItems)),this._updateSelectedItems(o))},filter:this._getCombinedFilter.bind(this),totalCount:()=>{const{items:o=[]}=this.option(),r=this._dataController.totalCount();return r>=0?r:this._getItemsCount(o)},key:this.key.bind(this),keyOf:this.keyOf.bind(this),load(o){var r;const a=e._dataController;return o.customQueryParams=(r=a.loadOptions())===null||r===void 0?void 0:r.customQueryParams,o.userData=a.userData(),a.store()?a.loadFromStore(o).done((l=>{if(e._disposed)return;const d=da(l).data;a.applyMapFunction(d)})):b().resolve(this.plainItems())},dataFields:()=>this._dataController.select(),plainItems:t.bind(this._editStrategy)})}_getItemsCount(e){return e.reduce(((t,s)=>{const n=s.items?this._getItemsCount(s.items):1;return t+n}),0)}_initEditStrategy(){this._editStrategy=new _a(this)}_getSelectedItemIndices(e){const t=[],s=e??this._selection.getSelectedItemKeys();return this._editStrategy.beginCache(),S(s,((n,o)=>{const r=this._getIndexByKey(o);ue(r)&&t.push(r)})),this._editStrategy.endCache(),t}_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done((()=>{this._normalizeSelectedItems()})),super._initMarkup()}_render(){super._render(),this._rendering=!1}_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,super._fireContentReadyAction()}_syncSelectionOptions(e){switch(e??this._chooseSelectOption()){case"selectedIndex":{const{selectedIndex:s}=this.option(),n=this._editStrategy.getItemDataByIndex(s??ke);E(n)?(this._setOptionWithoutOptionChange("selectedItems",[n]),this._setOptionWithoutOptionChange("selectedItem",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([n]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break}case"selectedItems":{const{selectedItems:s=[],selectionRequired:n}=this.option(),o=s.length?this._editStrategy.getIndexByItemData(s[0]):ke;if(n&&!ue(o))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",s[0]),this._setOptionWithoutOptionChange("selectedIndex",o),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(s));break}case"selectedItem":{const{selectedItem:s,selectionRequired:n}=this.option(),o=this._editStrategy.getIndexByItemData(s);if(n&&!ue(o))return this._syncSelectionOptions("selectedIndex");E(s)?(this._setOptionWithoutOptionChange("selectedItems",[s]),this._setOptionWithoutOptionChange("selectedIndex",o),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([s]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",ke));break}case"selectedItemKeys":{const{selectedItemKeys:s=[],selectionRequired:n}=this.option();if(n){const o=this._getIndexByKey(s[0]);if(!ue(o))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(s)}}return b().resolve()}_chooseSelectOption(){let e="selectedIndex";const t=s=>{const{[s]:n}=this.option();return!!(E(n)&&Array.isArray(n)&&n.length)||s in Jt._userOptions};return t("selectedItems")?e="selectedItems":t("selectedItem")?e="selectedItem":t("selectedItemKeys")&&(e="selectedItemKeys"),e}_compareKeys(e,t){if(e.length!==t.length)return!1;for(let s=0;s<t.length;s+=1)if(e[s]!==t[s])return!1;return!0}_normalizeSelectedItems(){const{selectionMode:e,selectedItems:t=[],items:s}=this.option();if(e==="none")this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if(e==="single"){const n=t??[],{selectionRequired:o}=this.option();if(n.length>1||!n.length&&o&&s!==null&&s!==void 0&&s.length){const r=this._selection.getSelectedItems();let a=n[0]??r[0];a===void 0&&(a=this._editStrategy.itemsGetter()[0]);const{grouped:l}=this.option();return l&&(c=>H(c)&&"items"in c&&Array.isArray(c.items))(a)&&(a.items=[a.items[0]]),this._selection.setSelection(this._getKeysByItems([a])),this._setOptionWithoutOptionChange("selectedItems",[a]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(n))}else{const n=this._getKeysByItems(t),o=this._selection.getSelectedItemKeys();this._compareKeys(o,n)||this._selection.setSelection(n)}return b().resolve()}_itemClickHandler(e,t,s){let n=b().resolve();this._createAction((o=>{n=this._itemSelectHandler(o.event)??n}),{validatingTargetName:"itemElement"})({itemElement:_(e.currentTarget),event:e}),n.always((()=>{super._itemClickHandler(e,t,s)}))}_itemSelectHandler(e,t){const{selectByClick:s}=this.option();if(!t&&!s)return;const n=e.currentTarget;if(this.isItemSelected(n))this.unselectItem(e.currentTarget);else{const o=this.selectItem(e.currentTarget);return o==null?void 0:o.promise()}}_selectedItemElement(e){return this._itemElements().eq(e)}_postprocessRenderItem(e){const{selectionMode:t}=this.option();if(t!=="none"){const s=_(e.itemElement),n=this._editStrategy.getNormalizedIndex(s.get(0)),o=this._isItemSelected(n);this._processSelectableItem(s,o)}}_processSelectableItem(e,t){e.toggleClass(this._selectedItemClass(),t),this._setAriaSelectionAttribute(e,String(t))}_updateSelectedItems(e){const{addedItemKeys:t,removedItemKeys:s}=e;if(this._rendered&&(t.length||s.length)){if(!this._rendering){const n=[],o=[];this._editStrategy.beginCache();for(let r=0;r<t.length;r+=1){const a=this._getIndexByKey(t[r]);n.push(a),this._addSelection(a)}for(let r=0;r<s.length;r+=1){const a=this._getIndexByKey(s[r]);o.push(a),this._removeSelection(a)}this._editStrategy.endCache(),this._updateSelection(n,o)}this._actions.onSelectionChanged({addedItems:e.addedItems,removedItems:e.removedItems})}}_updateSelection(e,t){}_setAriaSelectionAttribute(e,t){this.setAria("selected",t,e)}_getFocusedElementIndex(){const{focusOnSelectedItem:e}=this.option();return e?this._getFlatIndex():super._getFocusedElementIndex()}_getFlatIndex(){const{selectedIndex:e=ke}=this.option();return e}_removeSelection(e){const t=this._editStrategy.getItemElement(e);ue(e)&&(this._processSelectableItem(t,!1),g.triggerHandler(t,"stateChanged",!1))}_addSelection(e){const t=this._editStrategy.getItemElement(e);ue(e)&&(this._processSelectableItem(t,!0),g.triggerHandler(t,"stateChanged",!0))}_isItemSelected(e){const t=this._getKeyByIndex(e);return this._selection.isItemSelected(t,{checkPending:!0})}_optionChanged(e){switch(e.name){case"selectionMode":this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),super._optionChanged(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done((()=>{this._normalizeSelectedItems()}));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"onSelectionChanging":case"onSelectionChanged":this._initActions();break;case"selectByClick":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":case"focusOnSelectedItem":break;default:super._optionChanged(e)}}_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")}_waitDeletingPrepare(e){if(e.data("dxItemDeleting"))return b().resolve().promise();e.data("dxItemDeleting",!0);const t=b(),s={cancel:!1},n=this._itemEventHandler(e,"onItemDeleting",s,{excludeValidators:["disabled","readOnly"]});return W(n).always((function(o){const r=!n,a=!r&&n.state()==="resolved",l=!!arguments.length,h=r||a&&!l||a&&o;W(We(s.cancel)).always((()=>{e.data("dxItemDeleting",!1)})).done((p=>{h&&!p?t.resolve():t.reject()})).fail(t.reject)})),t.promise()}_deleteItemFromDS(e){const t=this._dataController,s=b(),{disabled:n}=this.option(),o=t.store();if(!o)return b().resolve().promise();if(!o.remove)throw ie.Error("E1011");return this.option("disabled",!0),o.remove(t.keyOf(this._getItemData(e))).done((r=>{r!==void 0?s.resolve():s.reject()})).fail((()=>{s.reject()})),s.always((()=>{this.option("disabled",n)})),s}_tryRefreshLastPage(){const e=b(),{grouped:t}=this.option();return this._isLastPage()||t?e.resolve():this._refreshLastPage().done((()=>{e.resolve()})),e.promise()}_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()}_updateSelectionAfterDelete(e){const t=this._getKeyByIndex(e);this._selection.deselect([t])}_updateIndicesAfterIndex(e){const t=this._itemElements();for(let s=e+1;s<t.length;s+=1)_(t[s]).data(this._itemIndexKey(),s-1)}_simulateOptionChange(e){var t;const s=this.option(e);s instanceof Ds||(t=this._optionChangedAction)===null||t===void 0||t.call(this,{name:e,fullName:e,value:s})}isItemSelected(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))}selectItem(e){const{selectionMode:t}=this.option();if(t==="none")return b().resolve();const s=this._editStrategy.getNormalizedIndex(e);if(!ue(s))return b().resolve();const n=this._getKeyByIndex(s);if(this._selection.isItemSelected(n))return b().resolve();if(t==="single")return this._selection.setSelection([n]);const{selectedItemKeys:o}=this.option();return this._selection.setSelection([...o??[],n],[n])}unselectItem(e){const t=this._editStrategy.getNormalizedIndex(e);if(!ue(t))return;const s=this._selection.getSelectedItemKeys(),{selectionRequired:n}=this.option();if(n&&s.length<=1)return;const o=this._getKeyByIndex(t);this._selection.isItemSelected(o,{checkPending:!0})&&this._selection.deselect([o])}_deleteItemElementByIndex(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)}_afterItemElementDeleted(e,t){const s=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(s),this._itemEventHandler(e,"onItemDeleted",t,{beforeExecute(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()}deleteItem(e){const t=b(),s=this._editStrategy.getItemElement(e),n=this._editStrategy.getNormalizedIndex(e),o=this._itemResponseWaitClass();return ue(n)?this._waitDeletingPrepare(s).done((()=>{s.addClass(o);const r=this._extendActionArgs(s);this._deleteItemFromDS(s).done((()=>{this._deleteItemElementByIndex(n),this._afterItemElementDeleted(s,r),this._tryRefreshLastPage().done((()=>{t.resolveWith(this)}))})).fail((()=>{s.removeClass(o),t.rejectWith(this)}))})).fail((()=>{t.rejectWith(this)})):t.rejectWith(this),t.promise()}reorderItem(e,t){const s=b(),n=this._editStrategy,o=n.getItemElement(e),r=n.getItemElement(t),a=n.getNormalizedIndex(e),l=n.getNormalizedIndex(t),d=this._dataController.getDataSource()?"dataSource":"items";return ue(a)&&ue(l)&&a!==l?s.resolveWith(this):s.rejectWith(this),s.promise().done((()=>{r[n.itemPlacementFunc(a,l)](o),n.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),this.option("selectedItems",this._getItemsByKeys(this._selection.getSelectedItemKeys(),this._selection.getSelectedItems())),d==="items"&&this._simulateOptionChange(d),this._itemEventHandler(o,"onItemReordered",{fromIndex:n.getIndex(a),toIndex:n.getIndex(l)},{excludeValidators:["disabled","readOnly"]})}))}}Jt._userOptions={};class ma extends Jt{_initMarkup(){this._asyncTemplateItemsMap={},super._initMarkup()}_render(){super._render(),this._planPostRenderActions()}_renderItemContent(e){const t=b(),s=b(),n=`dx${new J}`;this._asyncTemplateItemsMap[n]=s;const o=super._renderItemContent(v({},e,{uniqueKey:n}));return s.done((()=>{t.resolve(o)})),t.promise()}_onItemTemplateRendered(e,t){return()=>{const{uniqueKey:s}=t;if(s){var n;(n=this._asyncTemplateItemsMap[s])===null||n===void 0||n.resolve()}}}_postProcessRenderItems(){}_planPostRenderActions(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=b(),o=Object.values(this._asyncTemplateItemsMap);return W.apply(this,o).done((()=>{this._postProcessRenderItems(...t),n.resolve().done((()=>{this._asyncTemplateItemsMap={}}))})),n.promise()}_clean(){super._clean(),Object.values(this._asyncTemplateItemsMap).forEach((t=>{t.reject()})),this._asyncTemplateItemsMap={}}}function ou(i){return class{constructor(){throw new Error(`Module '${i}' not found`)}static getInstance(){}}}const ho=i=>i==="equals"?"=":i;class Zt{static setEditorClass(e){Zt.EditorClass=e}render(e,t,s,n){const o=`${e}-with-search`,r=`${e}-search`,{searchEnabled:a,onValueChanged:l}=s;if(this._onSearchBoxValueChanged=l,!a){t.removeClass(o),this.remove();return}if(this._editor)this.updateEditorOptions(s);else{const d=this._getEditorOptions(s);t.addClass(o);const c=_("<div>").addClass(r).prependTo(t);this._editor=n(c,Zt.EditorClass,d)}}updateEditorOptions(e){var t;const s=this._getEditorOptions(e);(t=this._editor)===null||t===void 0||t.option(s)}_getEditorOptions(e){const{tabIndex:t,searchValue:s,searchEditorOptions:n,searchTimeout:o}=e,r=$.format("Search");return v({mode:"search",placeholder:r,tabIndex:t,value:s,valueChangeEvent:"input",inputAttr:{"aria-label":r},onValueChanged:a=>{this._onValueChanged(a,o)}},n)}_onValueChanged(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._valueChangeDeferred=b(),clearTimeout(this._valueChangeTimeout),this._valueChangeDeferred.done((()=>{var o;(o=this._onSearchBoxValueChanged)===null||o===void 0||o.call(this,e.value)})),((t=e.event)===null||t===void 0?void 0:t.type)==="input"&&s)this._valueChangeTimeout=setTimeout((()=>{var o;(o=this._valueChangeDeferred)===null||o===void 0||o.resolve()}),s);else{var n;(n=this._valueChangeDeferred)===null||n===void 0||n.resolve()}}resolveValueChange(){var e;(e=this._valueChangeDeferred)===null||e===void 0||e.resolve()}remove(){var e;(e=this._editor)===null||e===void 0||e.$element().remove(),this._editor=null}focus(){var e;(e=this._editor)===null||e===void 0||e.focus()}dispose(){this.remove()}}Zt.EditorClass=ou("TextBox");const ru="dx-loadindicator-content";var lt;(function(i){i.Circle="circle",i.Sparkle="sparkle"})(lt||(lt={}));const au={[lt.Circle]:"dx-loadindicator-content-circle",[lt.Sparkle]:"dx-loadindicator-content-sparkle"};class _t extends Ps{_getDefaultOptions(){return v({},super._getDefaultOptions(),{_animatingSegmentCount:1,_animatingSegmentInner:!1,_animationType:lt.Circle,activeStateEnabled:!1,hoverStateEnabled:!1,indicatorSrc:""})}_defaultOptionsRules(){const e=Q();return super._defaultOptionsRules().concat([{device:()=>wt(e),options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:()=>zl(e),options:{_animatingSegmentCount:7}}])}_useTemplates(){return!1}_init(){super._init(),this.$element().addClass("dx-loadindicator");const t={role:"alert",label:$.format("Loading")};this.setAria(t)}_initMarkup(){super._initMarkup(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()}_renderWrapper(){this._$wrapper=_("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)}_getAnimationTypeContentClass(){const{_animationType:e}=this.option();return au[e]}_renderIndicatorContent(){const e=this._getAnimationTypeContentClass()??"",t=[ru,e].join(" ");this._$content=_("<div>").addClass(t),this._$wrapper.append(this._$content)}_renderMarkup(){const{indicatorSrc:e}=this.option(),t=dt.animation();e?this._renderImageMarkup():t&&this._renderAnimationMarkup()}_getSegmentParams(){const{_animationType:e,_animatingSegmentCount:t,_animatingSegmentInner:s}=this.option();switch(e){case lt.Sparkle:return{segmentCount:2,segmentInner:!1};case lt.Circle:default:return{segmentCount:t??0,segmentInner:!!s}}}_renderAnimationMarkup(){this._$indicator=_("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);const e=this._getSegmentParams();this._renderSegments(e)}_renderSegments(e){const{segmentCount:t,segmentInner:s}=e;for(let o=t;o>=0;o-=1){var n;const r=_("<div>").addClass("dx-loadindicator-segment").addClass(`dx-loadindicator-segment${o}`);if(s){const a=_("<div>").addClass("dx-loadindicator-segment-inner");r.append(a)}(n=this._$indicator)===null||n===void 0||n.append(r)}}_renderImageMarkup(){const{indicatorSrc:e}=this.option();this._$wrapper.addClass("dx-loadindicator-image"),this._$wrapper.css("backgroundImage",`url(${e})`)}_renderDimensions(){super._renderDimensions(),this._updateContentSizeForAnimation()}_updateContentSizeForAnimation(){if(!this._$indicator)return;let{width:e,height:t}=this.option();if(e||t){e=L(this.$element()),t=K(this.$element());const s=Math.min(t,e);this._$wrapper.css({height:s,width:s,fontSize:s})}}_clean(){super._clean(),this._removeMarkupForAnimation(),this._removeMarkupForImage()}_removeMarkupForAnimation(){this._$indicator&&(this._$indicator.remove(),delete this._$indicator)}_removeMarkupForImage(){this._$wrapper.css("backgroundImage","none")}_optionChanged(e){switch(e.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"_animationType":case"indicatorSrc":this._invalidate();break;default:super._optionChanged(e)}}}oe("dxLoadIndicator",_t);class rn{constructor(e,t,s){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=t,this.name=e,this.options=s||{}}_addPlaceMarker(e){this.$placeMarker=_("<div>").appendTo(e)}_addToContainer(e){const{$placeMarker:t,$container:s}=this;t?t.replaceWith(e):e.appendTo(s)}_attachEvents(e,t){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:e,options:t}=this;return t.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:e,$placeMarker:t}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),t==null||t.remove()}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){const{instance:t,$element:s}=this._create();this.instance=t,this._attachEvents(t,s)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const lu=ce.down;class du extends rn{_create(){const e=_("<span>").addClass("dx-clear-button-area").append(_("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){const{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,t){const{editor:s}=this,n=s.NAME;g.on(t,I(lu,n),(o=>{o.preventDefault(),o.pointerType!=="mouse"&&s._clearValueHandler(o)})),g.on(t,I(xe,n),(o=>s._clearValueHandler(o)))}_legacyRender(e,t){e.toggleClass("dx-show-clear-button",t)}update(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||super.update();const{editor:t,instance:s}=this,n=t.$element(),o=this._isVisible();s&&s.toggleClass("dx-state-invisible",!o),this._legacyRender(n,o)}}class cu{constructor(e){this.NAME="dxLabel",this._props=e,this._id=`dx-texteditor-label-${new J}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=_("<div>").addClass("dx-label-before"),this._$labelSpan=_("<span>"),this._$label=_("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=_("<div>").addClass("dx-label-after"),this._$root=_("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const e=I(xe,this.NAME),t=I(Xo,this.NAME),s=I(pl,this.NAME);g.off(this._$labelSpan,e),g.off(this._$labelSpan,t),g.off(this._$labelSpan,s),this._isVisible()&&this._isOutsideMode()&&(g.on(this._$labelSpan,e,(n=>{Ne().getSelection().toString()===""&&(this._props.onClickHandler(),n.preventDefault())})),g.on(this._$labelSpan,t,(n=>{this._props.onHoverHandler(n)})),g.on(this._$labelSpan,s,(n=>{this._props.onActiveHandler(n)})))}_updateEditorLabelClass(e){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),e){const t=this._props.mode==="floating"?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(t),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return this._props.mode==="outside"}_updateEditorBeforeButtonsClass(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),e){const t=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(t)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const e=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:e}),this._updateLabelTransform()}}_updateLabelTransform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const s=(this._props.rtlEnabled?1:-1)*(L(this._$before)+e);this._$labelSpan.css("transform",`translateX(${s}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const e=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:e})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}class hu extends rn{_attachEvents(e,t){const{editor:s}=this;g.on(t,Xo,(()=>{s.$element().addClass("dx-custom-button-hovered")})),g.on(t,Rl,(()=>{s.$element().removeClass("dx-custom-button-hovered")})),g.on(t,xe,(n=>{n.stopPropagation()}))}_create(){const{editor:e}=this,t=_("<div>");this._addToContainer(t);const s=e._createComponent(t,ht,v({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:t,instance:s}}_prepareIntegrationOptions(e){return v({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){const e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){const{visible:e}=this.editor.option();return!!e}_isDisabled(){if(this.options.disabled!==void 0)return this.instance?this.instance.option("disabled"):this.options.disabled;const{readOnly:t}=this.editor.option();return t}}function uu(i){(()=>{if(!i||typeof i!="object"||Array.isArray(i))throw ie.Error("E1053")})(),(()=>{if(!("name"in i))throw ie.Error("E1054")})(),(()=>{const{name:e}=i;if(typeof e!="string")throw ie.Error("E1055")})(),(()=>{const{location:e}=i;"location"in i&&e!=="after"&&e!=="before"&&(i.location="after")})()}function uo(i,e){if(i.includes(e))throw ie.Error("E1055",e);i.push(e)}function pu(i,e){return!!e.find((t=>t.name===i))}class _u{constructor(e,t){this.buttons=[],this.defaultButtonsInfo=t,this.editor=e}_compileButtonInfo(e){const t=[];return e.map((s=>{const n=typeof s=="string";if(n||uu(s),n||pu(s.name,this.defaultButtonsInfo)){const a=this.defaultButtonsInfo.find((l=>{let{name:d}=l;return d===s||d===s.name}));if(!a)throw ie.Error("E1056",this.editor.NAME,s);return uo(t,s),a}const{name:r}=s;return uo(t,r),v({},s,{Ctor:hu})}))}_createButton(e){const{Ctor:t,options:s,name:n}=e,o=new t(n,this.editor,s);return this.buttons.push(o),o}_renderButtons(e,t,s){let n=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach((r=>{const{location:a="after"}=r;a===s&&this._createButton(r).render((n=n??_("<div>").addClass("dx-texteditor-buttons-container"),s==="before"?t.prepend(n):t.append(n),n))})),n}clean(){this.buttons.forEach((e=>e.dispose())),this.buttons=[]}getButton(e){const t=this.buttons.find((s=>{let{name:n}=s;return n===e}));return t==null?void 0:t.instance}renderAfterButtons(e,t){return this._renderButtons(e,t,"after")}renderBeforeButtons(e,t){return this._renderButtons(e,t,"before")}updateButtons(e){this.buttons.forEach((t=>{(!e||e.includes(t.name))&&t.update()}))}}const lf="dx-texteditor",df="dx-texteditor-input",ls=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],fu=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let mu=cu;function po(i){if(E(i)&&!Array.isArray(i))throw ie.Error("E1053")}class gu extends Ms{ctor(e,t){t&&po(t.buttons),this._buttonCollection=new _u(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,super.ctor(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:e=>E(e)&&e!==!1?e:"",stylingMode:be().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(){const e=Q();return ze(e)},options:{labelMode:"floating",stylingMode:be().editorStylingMode||"filled"}},{device(){const e=Q();return Cs(e)},options:{labelMode:"outside"}}])}_getDefaultButtons(){return[{name:"clear",Ctor:du}]}_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")}_input(){return this.$element().find(".dx-texteditor-input").first()}_isFocused(){return Nt(this._input())||super._isFocused()}_inputWrapper(){return this.$element()}_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)}_isControlKey(e){return fu.includes(e)}_renderStylingMode(){super._renderStylingMode();const{stylingMode:e}=this.option();this._updateButtonsStyling(e)}_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),super._initMarkup(),this._renderValue(),this._renderLabel()}_render(){super._render(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()}_renderInput(){this._$textEditorContainer=_("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=_("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())}_getInputContainer(){return this._$textEditorInputContainer}_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const e=this._getInputContainer(),t=_("<div>").addClass("dx-pending-indicator").appendTo(e);this._pendingIndicator=this._createComponent(t,_t,{})}_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))}_renderValidationState(){super._renderValidationState(),this.option("validationStatus")==="pending"?(this._pendingIndicator||this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()}_getButtonsContainer(){return this._$textEditorContainer}_renderButtonContainers(){const{buttons:e}=this.option(),t=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(e,t),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(e,t)}_cleanButtonContainers(){var e,t;(e=this._$beforeButtonsContainer)===null||e===void 0||e.remove(),(t=this._$afterButtonsContainer)===null||t===void 0||t.remove(),this._buttonCollection.clean()}_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,super._clean()}_createInput(){const e=_("<input>");return this._applyInputAttributes(e,this.option("inputAttr")),e}_setSubmitElementName(e){const{inputAttr:t}=this.option();super._setSubmitElementName(e||(t==null?void 0:t.name)||"")}_applyInputAttributes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=D(this._getDefaultAttributes(),t);e.attr(s).addClass("dx-texteditor-input"),this._setInputMinHeight(e)}_setInputMinHeight(e){e.css("minHeight",this.option("height")?"0":"")}_getPlaceholderAttr(){const{ios:e,mac:t}=O.real(),{placeholder:s}=this.option();return s||(e||t?" ":null)}_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}}_updateButtons(e){this._buttonCollection.updateButtons(e)}_updateButtonsStyling(e){S(this.option("buttons"),((t,s)=>{let{options:n,name:o}=s;if(n&&!n.stylingMode&&this.option("visible")){const r=this.getButton(o);r!=null&&r.option&&r.option("stylingMode",e==="underlined"?"text":"contained")}}))}_renderValue(){return this._renderInputValue().promise()}_renderInputValue(e){e=e??this.option("value");const{text:t,displayValue:s,displayValueFormatter:n}=this.option();let o=t;return s!==void 0&&e!==null?o=n==null?void 0:n(s):E(o)||(o=n==null?void 0:n(e)),this.option("text",o),this._input().val()!==(E(o)?o:"")?this._renderDisplayText(o):this._toggleEmptinessEventHandler(),b().resolve()}_renderDisplayText(e){this._input().val(e),this._toggleEmptinessEventHandler()}_isValueValid(){if(this._input().length){const{validity:e}=this._input().get(0);if(e)return e.valid}return!0}_toggleEmptiness(e){this.$element().toggleClass("dx-texteditor-empty",e),this._togglePlaceholder(e)}_togglePlaceholder(e){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!e)}_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()}_toggleDisabledState(e){super._toggleDisabledState(e),this._input().prop("disabled",e)}_toggleTabIndex(){const e=this._input(),t=this.option("disabled"),s=this.option("focusStateEnabled");t||!s?e.attr("tabIndex",-1):e.removeAttr("tabIndex")}_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),super._toggleReadOnlyState()}_readOnlyPropValue(){const{readOnly:e}=this.option();return!!e}_toggleSpellcheckState(){const{spellcheck:e}=this.option();this._input().prop("spellcheck",e)}_unobserveLabelContainerResize(){this._labelContainerElement&&(Ss.unobserve(this._labelContainerElement),this._labelContainerElement=null)}_getLabelContainer(){return this._input()}_getLabelContainerWidth(){return L(this._getLabelContainer())}_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&L(this._$beforeButtonsContainer))??0}_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())}_getFieldElement(){return this._getLabelContainer()}_setFieldAria(e){var t;const s=this.option("inputAttr"),n=s==null?void 0:s["aria-label"],o=(t=this._label)===null||t===void 0?void 0:t.getId(),r=n?void 0:o;if(r||e){const a={labelledby:r,label:n};this.setAria(a,this._getFieldElement())}}_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=_(this._getLabelContainer()).get(0);const{label:e,labelMode:t,labelMark:s,rtlEnabled:n}=this.option(),o={onClickHandler:()=>{this.focus()},onHoverHandler:r=>{r.stopPropagation()},onActiveHandler:r=>{r.stopPropagation()},$editor:this.$element(),text:e,mark:s,mode:t,rtlEnabled:n,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new mu(o),this._setFieldAria(),this._labelContainerElement&&Ss.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))}_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()}_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const e=this._input(),t=this.option("placeholder"),s={id:t?`dx-${new J}`:void 0,"data-dx_placeholder":t},n=this._$placeholder=_("<div>").attr(s);n.insertAfter(e),n.addClass("dx-placeholder")}_attachPlaceholderEvents(){const e=I(ce.up,this.NAME);g.on(this._$placeholder,e,(()=>{g.trigger(this._input(),"focus")})),this._toggleEmptinessEventHandler()}_placeholder(){return this._$placeholder??_()}_clearValueHandler(e){const t=this._input();e.stopPropagation(),this._saveValueChangeEvent(e),this._clearValue(),this._isFocused()||g.trigger(t,"focus"),g.trigger(t,"input")}_clearValue(){this.clear()}_renderEvents(){const e=this._input();S(ls,((t,s)=>{if(this.hasActionSubscription(`on${s}`)){const n=this._createActionByOption(`on${s}`,{excludeValidators:["readOnly"]});g.on(e,I(s.toLowerCase(),this.NAME),(o=>{this._disposed||n({event:o})}))}}))}_refreshEvents(){const e=this._input();S(ls,((t,s)=>{g.off(e,I(s.toLowerCase(),this.NAME))})),this._renderEvents()}_keyPressHandler(e){this.option("text",this._input().val())}_keyDownHandler(e){const t=this._input(),s=e.ctrlKey&&Ue(e)==="enter",{value:n}=this.option(),o=t.val()!==n;s&&o&&g.trigger(t,"change")}_getValueChangeEventOptionName(){return"valueChangeEvent"}_renderValueChangeEvent(){const e=I(this._renderValueEventName(),`${this.NAME}TextChange`),t=I(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),s=I("keydown",`${this.NAME}TextChange`),n=this._input();g.on(n,e,this._keyPressHandler.bind(this)),g.on(n,t,this._valueChangeEventHandler.bind(this)),g.on(n,s,this._keyDownHandler.bind(this))}_cleanValueChangeEvent(){const e=`.${this.NAME}ValueChange`,t=`.${this.NAME}TextChange`;g.off(this._input(),e),g.off(this._input(),t)}_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()}_renderValueEventName(){return"input change keypress"}_focusTarget(){return this._input()}_focusEventTarget(){return this.element()}_isInput(e){return e===this._input().get(0)}_preventNestedFocusEvent(e){if(e.isDefaultPrevented())return!0;let t=this._isNestedTarget(e.relatedTarget);return e.type==="focusin"?t=t&&this._isNestedTarget(e.target)&&!this._isInput(e.target):t||this._toggleFocusClass(!1,this.$element()),t&&e.preventDefault(),t}_isNestedTarget(e){return!!this.$element().find(e).length}_focusClassTarget(e){return this.$element()}_focusInHandler(e){this._preventNestedFocusEvent(e),super._focusInHandler(e)}_focusOutHandler(e){this._preventNestedFocusEvent(e),super._focusOutHandler(e)}_toggleFocusClass(e,t){super._toggleFocusClass(e,this._focusClassTarget(t))}_hasFocusClass(e){return super._hasFocusClass(_(e||this.$element()))}_renderEmptinessEvent(){const e=this._input();g.on(e,"input blur",this._toggleEmptinessEventHandler.bind(this))}_toggleEmptinessEventHandler(){const e=this._input().val(),t=(e===""||e===null)&&this._isValueValid();this._toggleEmptiness(t)}_valueChangeEventHandler(e,t){this.option("readOnly")||(this._saveValueChangeEvent(e),this.option("value",arguments.length>1?t:this._input().val()),this._saveValueChangeEvent(void 0))}_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),g.off(this._input(),"keyup.onEnterKey.dxTextEditor"),g.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))}_enterKeyHandlerUp(e){if(!this._disposed&&Ue(e)==="enter"){var t;(t=this._enterKeyAction)===null||t===void 0||t.call(this,{event:e})}}_updateValue(){this._options.silent("text",null),this._renderValue()}_dispose(){this._enterKeyAction=void 0,super._dispose()}_getSubmitElement(){return this._input()}_hasActiveElement(){return this._input().is(F.getActiveElement(this._input()[0]))}_optionChanged(e){const{name:t,fullName:s,value:n}=e,o=t.replace("on","");if(ls.includes(o)){this._refreshEvents();return}switch(t){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":super._optionChanged(e),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(n),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setFieldAria();break;case"width":super._optionChanged(e),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),super._optionChanged(e);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),super._optionChanged(e);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(t));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":{s===t&&po(n),this._cleanButtonContainers(),this._renderButtonContainers();const{stylingMode:r}=this.option();this._updateButtonsStyling(r),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break}case"visible":if(super._optionChanged(e),n&&this.option("buttons")){this._cleanButtonContainers(),this._renderButtonContainers();const{stylingMode:r}=this.option();this._updateButtonsStyling(r)}break;case"displayValueFormatter":this._invalidate();break;default:super._optionChanged(e)}}_renderInputType(){this._setInputType(this.option("mode"))}_setInputType(e){const t=this._input();e==="search"&&(e="text");try{t.prop("type",e)}catch{t.prop("type","text")}}getButton(e){return this._buttonCollection.getButton(e)}focus(){g.trigger(this._input(),"focus")}clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const e=this._getDefaultOptions();this.option("value")===e.value?(this._options.silent("text",""),this._renderValue()):this.option("value",e.value)}_resetInputText(){this._options.silent("text",this._initialValue),this._renderValue()}_isValueEqualToInitial(){const{value:e}=this.option(),t=this._initialValue;return e===t}_resetToInitialValue(){this._isValueEqualToInitial()?this._resetInputText():super._resetToInitialValue(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()}_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length?super.reset(e):super.reset()}on(e,t){const s=super.on(e,t),n=e.charAt(0).toUpperCase()+e.substr(1);return ls.includes(n)&&this._refreshEvents(),s}}class ga{constructor(e){this._value=" ",D(this,e)}next(e){if(!arguments.length)return this._next;this._next=e}_prepareHandlingArgs(e,t){t=t||{};const s=Object.prototype.hasOwnProperty.call(e,"value")?"value":"text";return e[s]=t.str??e[s],e.start=t.start??e.start,e.length=t.length??e.length,e.index+=1,e}first(e){return e=e||0,this.next().first(e+1)}isAccepted(e){return!1}adjustedCaret(e,t,s){return t?this._adjustedForward(e,0,s):this._adjustedBackward(e,0,s)}_adjustedForward(e,t,s){}_adjustedBackward(e,t,s){}isValid(e){}reset(){}clear(e){}text(){}value(){}rawValue(){}handle(e){}}class vu extends ga{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class va extends ga{text(){return(this._value!==" "?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value")?e.value:e.text;if(!t||!t.length||!e.length)return 0;if(e.start)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start-1}));const s=t[0],n=t.substring(1);return this._tryAcceptChar(s,e),this._accepted()?this.next().handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))+1:this.handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))}clear(e){this._tryAcceptChar(" ",e),this.next().clear(this._prepareHandlingArgs(e))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(e,t){if(this._accepted(!1),!this._isAllowed(e,t))return;const s=e===" "?this.maskChar:e;t.fullText=t.fullText.substring(0,t.index)+s+t.fullText.substring(t.index+1),this._accepted(!0),this._value=e}_accepted(e){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!e}first(e){return this._value===" "?e||0:super.first(e)}_isAllowed(e,t){return e===" "?!0:this._isValid(e,t)}_isValid(e,t){const{allowedChars:s}=this;return s instanceof RegExp?s.test(e):M(s)?s(e,t.index,t.fullText):Array.isArray(s)?s.includes(e):s===e}isAccepted(e){return e===0?this._accepted():this.next().isAccepted(e-1)}_adjustedForward(e,t,s){return t>=e?t:this.next()._adjustedForward(e,t+1,s)||t+1}_adjustedBackward(e,t){return t>=e-1?e:this.next()._adjustedBackward(e,t+1)||t+1}isValid(e){return this._isValid(this._value,e)&&this.next().isValid(this._prepareHandlingArgs(e))}}class _o extends va{value(){return this.next().value()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value"),s=t?e.value:e.text;if(!s.length||!e.length)return 0;if(e.start||t)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start&&e.start-1}));const n=s[0],o=s.substring(1);this._tryAcceptChar(n);const r=this._isAllowed(n)?this._prepareHandlingArgs(e,{str:o,length:e.length-1}):e;return this.next().handle(r)+1}clear(e){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(e))}_tryAcceptChar(e){this._accepted(this._isValid(e))}_isValid(e){return e===this.maskChar}first(e){return e=e||0,this.next().first(e+1)}_adjustedForward(e,t,s){return t>=e&&s===this.maskChar?t:e===t+1&&this._accepted()?e:this.next()._adjustedForward(e,t+1,s)}_adjustedBackward(e,t){return t>=e-1?0:this.next()._adjustedBackward(e,t+1)}isValid(e){return this.next().isValid(this._prepareHandlingArgs(e))}}const bu="blur beforedeactivate",Cu=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],yu=["historyUndo","historyRedo"],Su=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function Iu(i){return" ".repeat(i)}class Eu{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const e=this._editorInput(),t=I(bu,"dxMask");g.on(e,t,(s=>{this.editor._changeHandler(s)}))}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){const{originalEvent:t}=e;if(!t)return;const{inputType:s}=t;if(yu.includes(s))this._handleHistoryInputEvent();else if(Cu.includes(s))this._handleBackwardDeleteInputEvent();else{const n=this._editorCaret();if(!n.end)return;this._clearSelectedText(),this._autoFillHandler(t),this._editorCaret(n),this._handleInsertTextInputEvent(t.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}_handleHistoryInputEvent(){const e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText(!0);const e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(e){const s=this._prevCaret&&this._prevCaret.end-this._prevCaret.start||Number(e),n=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:n.start,length:s,text:Iu(s)}))}_handleInsertTextInputEvent(e){var t;const s=e??"";this.editor.setForwardDirection(),this._updateEditorMask({start:((t=this._prevCaret)===null||t===void 0?void 0:t.start)??0,length:s.length||1,text:s})||this._editorCaret(this._prevCaret)}_updateEditorMask(e){const t=e.text.length,s=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:n,end:o}=this._editorCaret(),r=s-t;s>1&&t===1&&this._editorCaret({start:n+r,end:o+r}),this.editor._adjustCaret()}return!!s}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout((()=>{this._editorCaret({start:e,end:e})}),0)}}_focusOutHandler(e){this.editor._changeHandler(e),this._editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){const{editor:t}=this;t._maskKeyHandler(e,(()=>{t._hasSelection()||t._handleKey(" ")}))}_cutHandler(e){const t=this._editorCaret(),s=this._editorInput().val().substring(t.start,t.end);this.editor._maskKeyHandler(e,(()=>$n(e,s)))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout((()=>{const e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)}))}_pasteHandler(e){const{editor:t}=this;if(this._editorOption("disabled"))return;const s=this._editorCaret();t._maskKeyHandler(e,(()=>{const n=$n(e),o=t._maskRulesChain.text().substring(s.end),r=t._handleChain({text:n,start:s.start,length:n.length}),a=s.start+r;t._handleChain({text:o,start:a,length:o.length}),t._caret({start:a,end:a})}))}_autoFillHandler(e){const{editor:t}=this,s=this._editorInput().val();this._inputHandlerTimer=setTimeout((()=>{this._isAutoFill()&&(t._maskKeyHandler(e,(()=>{t._handleChain({text:s,start:0,length:s.length})})),t._validateMask())}))}_isAutoFill(){const e=this._editorInput();if(Mi.webkit){const t=e.get(0);return(t==null?void 0:t.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(e){return t=>{var s;(s=this[`_${e}Handler`])===null||s===void 0||s.call(this,t)}}attachEvents(){const e=this._editorInput();Su.forEach((t=>{const s=I(t.toLowerCase(),"dxMask");g.on(e,s,this.getHandler(t))})),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),g.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:xu,mac:wu}=O.real(),Tu=xu||wu,Du=i=>{let e;try{e={start:i.selectionStart,end:i.selectionEnd}}catch{e={start:0,end:0}}return e},Au=(i,e)=>{const t=F.getBody();if(!(!t.contains(i)&&!t.contains(i.getRootNode().host)))try{i.selectionStart=e.start,i.selectionEnd=e.end}catch{}},ku=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i=_(i).get(0),!E(e))return Du(i);!t&&Tu&&F.getActiveElement(i)!==i||Au(i,e)},fo=ku,$u={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:i=>ds(i),l:i=>ds(i)||go(i),C:/\S/,c:/./,A:i=>ds(i)||mo(i),a:i=>ds(i)||mo(i)||go(i)};function mo(i){return/[0-9]/.test(i)}function ds(i){const e=i.charCodeAt();return e>64&&e<91||e>96&&e<123||e>127}function go(i){return i===" "}class Ou extends gu{_getDefaultOptions(){return v({},super._getDefaultOptions(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:$.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})}_supportedKeys(){const e=this,t={del:e._maskStrategy.getHandler("del"),enter:e._changeHandler},s=super._supportedKeys();return S(t,((n,o)=>{const r=s[n];s[n]=function(a){e.option("mask")&&o.call(e,a),r&&r(a)}})),s}_getSubmitElement(){return this.option("mask")?this._$hiddenElement:super._getSubmitElement()}_init(){super._init(),this._initMaskStrategy()}_initMaskStrategy(){this._maskStrategy=new Eu(this)}_initMarkup(){this._renderHiddenElement(),super._initMarkup()}_attachMouseWheelEventHandlers(){if(!this._hasMouseWheelHandler())return;const e=this._input(),t=I(Bl,this.NAME),s=this._createAction((n=>{const{event:o}=n;Nt(e)&&!xt(o)&&(this._onMouseWheel(o),o.preventDefault(),o.stopPropagation())}));g.off(e,t),g.on(e,t,(n=>{s({event:n})}))}_hasMouseWheelHandler(){return!1}_onMouseWheel(e){}_useMaskBehavior(){return!!this.option("mask")}_attachDropEventHandler(){if(!this._useMaskBehavior())return;const t=I("drop",this.NAME),s=this._input();g.off(s,t),g.on(s,t,(n=>n.preventDefault()))}_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),super._render(),this._attachDropEventHandler()}_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=_("<input>").attr("type","hidden").appendTo(this._inputWrapper()))}_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()}_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())}_changeHandler(e){const t=this._input(),s=t.val();if(s===this._changedValue)return;this._changedValue=s;const n=Pl(e,{type:"change"});g.trigger(t,n)}_parseMask(){this._maskRules=D({},$u,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)}_parseMaskRule(e){const{mask:t}=this.option();if(e>=t.length)return new vu;const s=t[e],n=s==="\\",o=n?new _o({maskChar:t[e+1]}):this._getMaskRule(s);return o.next(this._parseMaskRule(e+1+n)),o}_getMaskRule(e){let t;return S(this._maskRules,((s,n)=>{if(s===e)return t={pattern:s,allowedChars:n},!1})),E(t)?new va(D({maskChar:this.option("maskChar")||" "},t)):new _o({maskChar:e})}_renderMaskedValue(){if(!this._maskRulesChain)return;const e=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const t={length:e.length};t[this._isMaskedValueMode()?"text":"value"]=e,this._handleChain(t),this._displayMask()}_replaceSelectedText(e,t,s){if(s===void 0)return e;const n=e.slice(0,t.start),o=e.slice(t.end);return n+s+o}_isMaskedValueMode(){return this.option("useMaskedValue")}_displayMask(e){e=e||this._caret(),this._renderValue(),this._caret(e)}_isValueEmpty(){return ti(this._value)}_shouldShowMask(){const{showMaskMode:e}=this.option();return e==="onFocus"?Nt(this._input())||!this._isValueEmpty():!0}_showMaskPlaceholder(){if(this._shouldShowMask()){const e=this._maskRulesChain.text();this.option("text",e);const{showMaskMode:t}=this.option();t==="onFocus"&&this._renderDisplayText(e)}}_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const e=this._maskRulesChain.value(),t=ti(e)?"":this._getPreparedValue();this._$hiddenElement.val(t)}return super._renderValue()}_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")}_valueChangeEventHandler(e,t){if(!this._maskRulesChain){super._valueChangeEventHandler.apply(this,arguments);return}this._saveValueChangeEvent(e),this.option("value",this._getPreparedValue())}_isControlKeyFired(e){return this._isControlKey(Ue(e))||xt(e)}_handleChain(e){const t=this._maskRulesChain.handle(this._normalizeChainArguments(e));return this._updateMaskInfo(),t}_normalizeChainArguments(e){return e=e||{},e.index=0,e.fullText=this._maskRulesChain.text(),e}_convertToValue(e){return this._isMaskedValueMode()?e=this._replaceMaskCharWithEmpty(e||this._textValue||""):e=e||this._value||"",e}_replaceMaskCharWithEmpty(e){const{maskChar:t}=this.option();return e.replace(new RegExp(t,"g")," ")}_maskKeyHandler(e,t){if(this.option("readOnly"))return;this.setForwardDirection(),e.preventDefault(),this._handleSelection();const s=this._input().val(),n=()=>{s!==this._input().val()&&g.trigger(this._input(),"input")},o=t();o?o.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())}_handleKey(e,t){this._direction(t||"forward"),this._adjustCaret(e),this._handleKeyChain(e),this._moveCaret()}_handleSelection(){if(!this._hasSelection())return;const e=this._caret(),t=new Array(e.end-e.start+1).join(" ");this._handleKeyChain(t)}_handleKeyChain(e){const t=this._caret(),s=this.isForwardDirection()?t.start:t.start-1,n=this.isForwardDirection()?t.end:t.end-1,o=s===n?1:n-s;this._handleChain({text:e,start:s,length:o})}_tryMoveCaretBackward(){this.setBackwardDirection();const e=this._caret().start;return this._adjustCaret(),!e||e!==this._caret().start}_adjustCaret(e){const t=this._caret().start,s=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(t,s,e);this._caret({start:n,end:n})}_moveCaret(){const e=this._caret().start,t=e+(this.isForwardDirection()?0:-1),s=this._maskRulesChain.isAccepted(t)?e+(this.isForwardDirection()?1:-1):e;this._caret({start:s,end:s})}_caret(e,t){const s=this._input();if(s.length){if(!arguments.length)return fo(s);fo(s,e,t)}}_hasSelection(){const e=this._caret();return e.start!==e.end}_direction(e){if(!arguments.length)return this._typingDirection;this._typingDirection=e}setForwardDirection(){this._direction("forward")}setBackwardDirection(){this._direction("backward")}isForwardDirection(){return this._direction()==="forward"}_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()}_clean(){this._maskStrategy&&this._maskStrategy.clean(),super._clean()}_validateMask(){if(!this._maskRulesChain)return;const e=ti(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement());const{name:e}=this.option();this._setSubmitElementName(e)}_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()}_processEmptyMask(e){if(e)return;const t=this.option("value");this.option({text:t,isValid:!0,validationError:null}),this.validationRequest.fire({value:t,editor:this}),this._renderValue()}_optionChanged(e){switch(e.name){case"mask":this._updateMaskOption(),this._processEmptyMask(e.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),super._optionChanged(e),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:super._optionChanged(e)}}clear(){const{value:e}=this._getDefaultOptions();this.option("value")===e&&this._renderMaskedValue(),super.clear()}}const Ru=Ne(),Bu=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"];class ba extends Ou{ctor(e,t){t&&(this._showClearButton=t.showClearButton),super.ctor(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{value:"",mode:"text",maxLength:null})}_initMarkup(){this.$element().addClass("dx-textbox"),super._initMarkup(),this.setAria("role","textbox")}_renderInputType(){super._renderInputType(),this._renderSearchMode()}_useTemplates(){return!1}_renderProps(){super._renderProps(),this._toggleMaxLengthProp()}_toggleMaxLengthProp(){const e=this._getMaxLength();e&&e>0?this._input().attr("maxLength",e):this._input().removeAttr("maxLength")}_renderSearchMode(){const{mode:e}=this.option();if(e==="search"){if(this.$element().addClass("dx-searchbox"),this._renderSearchIcon(),this._showClearButton===void 0){const{showClearButton:t}=this.option();this._showClearButton=t,this.option("showClearButton",!0)}}else this.$element().removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton}_renderSearchIcon(){const e=_("<div>").addClass("dx-icon").addClass("dx-icon-search");e.prependTo(this._input().parent()),this._$searchIcon=e}_getLabelContainerWidth(){if(this._$searchIcon){const e=this._input().parent();return L(e)-this._getLabelBeforeWidth()}return super._getLabelContainerWidth()}_getLabelBeforeWidth(){let e=super._getLabelBeforeWidth();return this._$searchIcon&&(e+=ee(this._$searchIcon)),e}_optionChanged(e){switch(e.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":super._optionChanged(e),this._updateLabelWidth();break;case"mask":super._optionChanged(e),this._toggleMaxLengthProp();break;default:super._optionChanged(e)}}_onKeyDownCutOffHandler(e){const t=this._getMaxLength();if(t&&!e.ctrlKey&&!this._hasSelection()){const s=_(e.target),n=Ue(e);return this._cutOffExtraChar(s),s.val().length<t||Bu.includes(n)||Ru.getSelection().toString()!==""}return!0}_onChangeCutOffHandler(e){const t=_(e.target);this.option("maxLength")&&this._cutOffExtraChar(t)}_cutOffExtraChar(e){const t=this._getMaxLength(),s=e.val();t&&s.length>t&&e.val(s.substr(0,t))}_getMaxLength(){const{mask:e,maxLength:t}=this.option();return!!e?null:t}}oe("dxTextBox",ba);const Ca=function(){return[{device:()=>!dt.nativeScrolling,options:{useNative:!1}},{device:i=>!O.isSimulator()&&O.real().deviceType==="desktop"&&i.platform==="generic",options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:dt.touch,showScrollbar:"onHover"}}]},Ti="dxScrollbar",Pu="dx-scrollbar-hoverable",vo="horizontal";let Ct=null;class ya extends Ps{_getDefaultOptions(){return v({},super._getDefaultOptions(),{visible:!1,activeStateEnabled:!1,visibilityMode:"onScroll",containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})}_init(){super._init(),this._isHovered=!1}_initMarkup(){this._renderThumb(),super._initMarkup()}_render(){super._render(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode());const{hoverStateEnabled:e}=this.option();this.$element().toggleClass(Pu,e)}_renderThumb(){this._$thumb=_("<div>").addClass("dx-scrollable-scroll"),_("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)}isThumb(e){return!!this.$element().find(e).length}_isHoverMode(){const{visibilityMode:e,expandable:t}=this.option();return(e==="onHover"||e==="always")&&t}_renderDirection(){const{direction:e}=this.option();this.$element().addClass(`dx-scrollbar-${e}`),this._dimension=e===vo?"width":"height",this._prop=e===vo?"left":"top"}_attachPointerDownHandler(){g.on(this._$thumb,I(ce.down,Ti),this.feedbackOn.bind(this))}feedbackOn(e){e==null||e.preventDefault(),this.$element().addClass("dx-scrollable-scrollbar-active"),Ct=this}feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),Ct=null}cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)}cursorLeave(){this._isHovered=!1,this.option("visible",!1)}_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})}_toggleVisibility(e){const{visibilityMode:t}=this.option();t==="onScroll"&&this._$thumb.css("opacity");const s=this._adjustVisibility(e);this.option().visible=s,this._$thumb.toggleClass("dx-state-invisible",!s)}_adjustVisibility(e){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;const{visibilityMode:t}=this.option();let s=e;switch(t){case"onScroll":default:break;case"onHover":s=s||!!this._isHovered;break;case"never":s=!1;break;case"always":s=!0}return s}moveTo(e){if(this._isAlwaysHidden())return;let t=e;z(e)&&(t=e[this._prop]||0);const s={};s[this._prop]=this._calculateScrollBarPosition(t),we(this._$thumb,s)}_calculateScrollBarPosition(e){return-e*this._thumbRatio}_getSizes(){const{containerSize:e,contentSize:t,baseContainerSize:s,baseContentSize:n}=this.option();return{containerSize:Math.round(e),contentSize:Math.round(t),baseContainerSize:Math.round(s),baseContentSize:Math.round(n)}}_update(){const{containerSize:e,contentSize:t}=this._getSizes();let{baseContainerSize:s,baseContentSize:n}=this._getSizes();isNaN(s)&&(s=e,n=t);const{scaleRatio:o}=this.option();this._baseContainerToContentRatio=n?s/n:s,this._realContainerToContentRatio=t?e/t:e;const r=Math.round(Math.max(Math.round(e*this._realContainerToContentRatio),15));this._thumbRatio=(e-r)/(o*(t-e)),this.option(this._dimension,r/o),this.$element().css("display",this._needScrollbar()?"":"none")}_isAlwaysHidden(){const{visibilityMode:e}=this.option();return e==="never"}_needScrollbar(){return!this._isAlwaysHidden()&&this._baseContainerToContentRatio<1}containerToContentRatio(){return this._realContainerToContentRatio}_normalizeSize(e){return z(e)?e[this._dimension]||0:e}_clean(){super._clean(),this===Ct&&(Ct=null),g.off(this._$thumb,`.${Ti}`)}_optionChanged(e){if(this._isAlwaysHidden())return;const{name:t,value:s}=e;switch(t){case"containerSize":case"contentSize":this.option()[t]=this._normalizeSize(s),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:super._optionChanged(e)}}update(){Pt((()=>{this._adjustVisibility()&&this.option("visible",!0)}))()}}qo.add((()=>{g.subscribeGlobal(F.getDocument(),I(ce.up,Ti),(()=>{Ct&&Ct.feedbackOff()}))}));const bo="dxNativeScrollable",Mu="dx-scrollable-scrollbar-simulated",Lu="dx-scrollable-scrollbars-hidden",$t="vertical",cs="horizontal";class an{constructor(e){this._init(e)}_init(e){this._component=e,this._$element=e.$element(),this._$container=_(e.container()),this._$content=e.$content();const{direction:t,useSimulatedScrollbar:s}=e.option();this._direction=t,this._useSimulatedScrollbar=s,this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e),this._isRtlNativeStrategy=e._isRtlNativeStrategy.bind(e)}render(){const t=O.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${t}`).toggleClass(Lu,!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()}updateRtlPosition(e){const{rtlEnabled:t}=this.option();e&&t&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()}_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(Mu),this._renderScrollbar($t),this._renderScrollbar(cs)}_renderScrollbar(e){if(!this._isDirection(e))return;const{scrollByThumb:t}=this.option();this._scrollbars[e]=new ya(_("<div>").appendTo(this._$element),{direction:e,expandable:t})}handleInit(e){}handleStart(){}handleMove(e){if(this._isLocked()){e.cancel=!0;return}this._allowedDirection()&&(e.originalEvent.isScrollingEvent=!0)}handleEnd(){}handleCancel(){}handleStop(){}_eachScrollbar(e){S(this._scrollbars||{},((t,s)=>{e(s,t)}))}createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")}_createActionArgs(){const{left:e,top:t}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-e):this._isReachedLeft(e),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(e)):this._isReachedRight(e),reachedTop:this._isDirection($t)?Math.round(t)>=0:void 0,reachedBottom:this._isDirection($t)?Math.round(Math.abs(t)-this._getMaxOffset().top)>=0:void 0}}_getScrollOffset(){const{top:e,left:t}=this.location();return{top:-e,left:this._normalizeOffsetLeft(-t)}}_normalizeOffsetLeft(e){return this._isRtlNativeStrategy()?this._getMaxOffset().left+e:e}_isReachedLeft(e){return this._isDirection(cs)?Math.round(e)>=0:void 0}_isReachedRight(e){return this._isDirection(cs)?Math.round(Math.abs(e)-this._getMaxOffset().left)>=0:void 0}_isScrollbarVisible(){const e=this.option("showScrollbar");return e!=="never"&&e!==!1}handleScroll(e){var t;this._eventForUserAction=e,this._moveScrollbars(),(t=this._scrollAction)===null||t===void 0||t.call(this,this._createActionArgs())}_moveScrollbars(){const{top:e,left:t}=this._getScrollOffset();this._eachScrollbar((s=>{s.moveTo({top:-e,left:-t}),s.option("visible",!0)})),this._hideScrollbars()}_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout((()=>{this._eachScrollbar((e=>{e.option("visible",!1)}))}),500)}location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}}disabledChanged(){}update(){this._update(),this._updateAction(this._createActionArgs())}_update(){this._updateDimensions(),this._updateScrollbars()}_updateDimensions(){this._containerSize={height:K(this._$container),width:L(this._$container)},this._componentContentSize={height:K(this._component.$content()),width:L(this._component.$content())},this._contentSize={height:K(this._$content),width:L(this._$content)}}_updateScrollbars(){this._eachScrollbar(((e,t)=>{const s=t===$t?"height":"width";e.option({containerSize:this._containerSize[s],contentSize:this._componentContentSize[s]}),e.update()}))}_prepareDirections(){}_allowedDirections(){return{vertical:this._isDirection($t)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(cs)&&this._contentSize.width>this._containerSize.width}}dispose(){const{className:e}=this._$element.get(0),t=new RegExp("dx-scrollable-native\\S*","g");if(t.test(e)){const s=e.match(t);s&&this._$element.removeClass(s.join(" "))}g.off(this._$element,`.${bo}`),g.off(this._$container,`.${bo}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)}_removeScrollbars(){this._eachScrollbar((e=>{e.$element().remove()}))}scrollBy(e){const t=this.location();this._$container.scrollTop(Math.round(-t.top-e.top)),this._$container.scrollLeft(Math.round(-t.left-e.left))}validate(e){const{disabled:t}=this.option();return t||me(e)&&this._isScrolledInMaxDirection(e)?!1:!!this._allowedDirection()}_isScrolledInMaxDirection(e){const t=this._$container.get(0);let s=!1;return e.delta>0?s=e.shiftKey?!t.scrollLeft:!t.scrollTop:e.shiftKey?s=t.scrollLeft>=this._getMaxOffset().left:s=t.scrollTop>=this._getMaxOffset().top,s}getDirection(){return this._allowedDirection()}}class Hu{constructor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)}start(){this._stopped=!1,this._finished=!1,this._stepCore()}stop(){this._stopped=!0,vt(this._stepAnimationFrame)}_stepCore(){if(this._isStopped()){this._stop();return}if(this._isFinished()){this._finished=!0,this._complete();return}this._step(),this._stepAnimationFrame=fi(this._proxiedStepCore)}_step(){P.abstract()}_isFinished(){return this._finished}_stop(){}_complete(){}_isStopped(){return this._stopped}inProgress(){return!(this._stopped||this._finished)}}const Sa="dxSimulatedScrollable",Fu="dxScrollableStrategy",hs=`${Sa}Cursor`,di=`${Sa}Keyboard`,Vu="dx-scrollable-scrollbars-alwaysvisible",Ce="vertical",Z="horizontal",Ku=Math.round(1e3/60),Wu=400/Ku,zu=(1-.92**Wu)/(1-.92),Ae={PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home",LEFT:"leftArrow",UP:"upArrow",RIGHT:"rightArrow",DOWN:"downArrow",TAB:"tab"};class Ia extends Hu{constructor(e){super(),this.VELOCITY_LIMIT=1,this.scroller=e}_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT}_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()}_acceleration(){return this.scroller._inBounds()?.92:.5}_complete(){this.scroller._scrollComplete()}}class Nu extends Ia{constructor(){super(...arguments),this.VELOCITY_LIMIT=.2}_isFinished(){return this.scroller._crossBoundOnNextStep()||super._isFinished()}_acceleration(){return .92}_complete(){this.scroller._move(this.scroller._bounceLocation),super._complete()}}class Ea{constructor(e){this._initOptions(e),this._initAnimators(),this._initScrollbar()}_initOptions(e){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=e.direction===Z?"x":"y",this._prop=e.direction===Z?"left":"top",this._dimension=e.direction===Z?"width":"height",this._scrollProp=e.direction===Z?"scrollLeft":"scrollTop",S(e,((t,s)=>{this[`_${t}`]=s}))}_initAnimators(){this._inertiaAnimator=new Ia(this),this._bounceAnimator=new Nu(this)}_initScrollbar(){this._scrollbar=new ya(_("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()}_visibilityModeNormalize(e){return e===!0?"onScroll":e===!1?"never":e??"never"}_scrollStep(e){const t=this._location;this._location+=e,this._suppressBounce(),this._move(),!(Math.abs(t-this._location)<1)&&g.triggerHandler(this._$container,{type:"scroll"})}_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())}_boundLocation(e){const t=e??this._location;return Math.max(Math.min(t,this._maxOffset),this._minOffset)}_move(e){this._location=e!==void 0?e*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()}_moveContent(){const e=this._location;this._$container[this._scrollProp](-e/this._getScaleRatio()),this._moveContentByTranslator(e)}_getScaleRatio(){if(de()&&!this._scaleRatio){const e=this._$element[0],t=this._dimension,s=this._getRealDimension(e,t),n=this._getBaseDimension(e,t);this._scaleRatio=Math.round(s/n*100)/100}return this._scaleRatio||1}_getRealDimension(e,t){return Math.round(et(e)[t])}_getBaseDimension(e,t){const s=`offset${zt(t)}`;return e[s]}_moveContentByTranslator(e){let t;const s=-this._maxScrollPropValue;if(e>0&&(t=e),e<=s&&(t=e-s),this._translateOffset===t)return;const n={};if(n[this._prop]=t,this._translateOffset=t,!t){_l(this._$content);return}we(this._$content,n)}_moveScrollbar(){this._scrollbar.moveTo(this._location)}_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()}_scrollToBounds(){var e;this._inBounds()||((e=this._bounceAction)===null||e===void 0||e.call(this),this._setupBounce(),this._bounceAnimator.start())}_setupBounce(){this._bounceLocation=this._boundLocation();const e=this._bounceLocation-this._location;this._velocity=e/zu}_inBounds(e){const t=e??this._location;return this._boundLocation(t)===t}_crossBoundOnNextStep(){const e=this._location,t=e+this._velocity;return e<this._minOffset&&t>=this._minOffset||e>this._maxOffset&&t<=this._maxOffset}_initHandler(e){this._stopScrolling(),this._prepareThumbScrolling(e)}_stopScrolling(){Pt((()=>{this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}))()}_prepareThumbScrolling(e){if(me(e.originalEvent))return;const t=_(e.originalEvent.target),s=this._isScrollbar(t);s&&this._moveToMouseLocation(e),this._thumbScrolling=s||this._isThumb(t),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(t),this._thumbScrolling&&this._scrollbar.feedbackOn()}_isThumbScrollingHandler(e){return this._isThumb(e)}_moveToMouseLocation(e){const t=e[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],s=this._location+t/this._containerToContentRatio()-K(this._$container)/2;this._scrollStep(-Math.round(s))}_startHandler(){this._showScrollbar()}_moveHandler(e){this._crossThumbScrolling||(this._thumbScrolling&&(e[this._axis]=-Math.round(e[this._axis]/this._containerToContentRatio())),this._scrollBy(e))}_scrollBy(e){let t=e[this._axis];this._inBounds()||(t*=.5),this._scrollStep(t)}_scrollByHandler(e){!e.x&&!e.y||(this._scrollBy(e),this._scrollComplete())}_containerToContentRatio(){return this._scrollbar.containerToContentRatio()}_endHandler(e){return this._completeDeferred=b(),this._velocity=e[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()}_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()}_suppressInertia(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)}_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1}_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()}_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()}_updateHandler(){this._update(),this._moveToBounds()}_update(){return this._stopScrolling(),Ko((()=>(this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),pi((()=>{this._moveScrollbar(),this._scrollbar.update()})))))}_resetScaleRatio(){this._scaleRatio=null}_updateLocation(){this._location=(es(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()}_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()}_getMaxOffset(){return 0}_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue}_updateScrollbar(){gn((()=>{const e=this._containerSize(),t=this._contentSize(),s=this._dimension,n=this._getBaseDimension(this._$container[0],s),o=this._getBaseDimension(this._$content[0],s);pi((()=>{this._scrollbar.option({containerSize:e,contentSize:t,baseContainerSize:n,baseContentSize:o,scaleRatio:this._getScaleRatio()})}))}))()}_moveToBounds(){Pt(gn(Pt((()=>{const e=this._boundLocation(),t=e!==this._location;if(this._location=e,this._move(),t){var s;(s=this._scrollAction)===null||s===void 0||s.call(this)}}))))()}_createActionsHandler(e){this._scrollAction=e.scroll,this._bounceAction=e.bounce}_showScrollbar(){this._scrollbar.option("visible",!0)}_hideScrollbar(){this._scrollbar.option("visible",!1)}_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)}_contentSize(){const e=this._$content.css(`overflow${this._axis.toUpperCase()}`)==="hidden";let t=this._getRealDimension(this._$content.get(0),this._dimension);if(!e){const s=this._$content[0][`scroll${zt(this._dimension)}`]*this._getScaleRatio();t=Math.max(s,t)}return t}_validateEvent(e){const t=_(e.originalEvent.target);return this._isThumb(t)||this._isScrollbar(t)}_isThumb(e){return this._scrollByThumb&&this._scrollbar.isThumb(e)}_isScrollbar(e){return!!(this._scrollByThumb&&(e!=null&&e.is(this._$scrollbar)))}_reachedMin(){return Math.round(this._location-this._minOffset)<=0}_reachedMax(){return Math.round(this._location-this._maxOffset)>=0}_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()}_cursorLeaveHandler(){this._scrollbar.cursorLeave()}isBottomReached(){return!1}dispose(){}}let _e=null,gt=null;class xa{constructor(e){this._init(e)}_init(e){this._component=e,this._$element=e.$element(),this._$container=_(e.container()),this._$wrapper=e._$wrapper,this._$content=e.$content(),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e)}render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers();const{useKeyboard:e}=this.option();e&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()}_createScrollers(){this._scrollers={},this._isDirection(Z)&&this._createScroller(Z),this._isDirection(Ce)&&this._createScroller(Ce),this._$element.toggleClass(Vu,this.option("showScrollbar")==="always")}_createScroller(e){this._scrollers[e]=new Ea(this._scrollerOptions(e))}_scrollerOptions(e){return{direction:e,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}}_applyScaleRatio(e){for(const t in this._scrollers){const s=this._getPropByDirection(t);if(E(e[s])){const n=this._scrollers[t],o=e[s];o!==void 0&&(e[s]=o*n._getScaleRatio())}}return e}_isAnyThumbScrolling(e){let t=!1;return this._eventHandler("isThumbScrolling",e).done(((s,n)=>{t=s||n})),t}handleInit(e){this._suppressDirections(e),this._eventForUserAction=e,this._eventHandler("init",e)}_suppressDirections(e){if(me(e.originalEvent)){this._prepareDirections(!0);return}this._prepareDirections(),this._eachScroller((function(t,s){const n=_(e.originalEvent.target),o=t._validateEvent(e)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[s]=o}))}_isContent(e){return!!e.closest(this._$element).length}_prepareDirections(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._validDirections={},this._validDirections[Z]=e,this._validDirections[Ce]=e}_eachScroller(e){const t=e.bind(this);S(this._scrollers,((s,n)=>{t(n,s)}))}handleStart(e){this._eventForUserAction=e,this._eventHandler("start").done(this._startAction)}_saveActive(){gt=this}_resetActive(){gt===this&&(gt=null)}handleMove(e){var t;if(this._isLocked()){e.cancel=!0,this._resetActive();return}this._saveActive(),(t=e.preventDefault)===null||t===void 0||t.call(e),this._adjustDistance(e,e.delta),this._eventForUserAction=e,this._eventHandler("move",e.delta)}_adjustDistance(e,t){t.x*=this._validDirections[Z],t.y*=this._validDirections[Ce];const s=this._tryGetDevicePixelRatio();s&&me(e.originalEvent)&&(t.x=Math.round(t.x/s*100)/100,t.y=Math.round(t.y/s*100)/100)}_tryGetDevicePixelRatio(){if(de())return Ne().devicePixelRatio}handleEnd(e){var t;return this._resetActive(),this._refreshCursorState(((t=e.originalEvent)===null||t===void 0?void 0:t.target)??void 0),this._adjustDistance(e,e.velocity),this._eventForUserAction=e,this._eventHandler("end",e.velocity).done(this._endAction)}handleCancel(e){return this._resetActive(),this._eventForUserAction=e,this._eventHandler("end",{x:0,y:0})}handleStop(){this._resetActive(),this._eventHandler("stop")}handleScroll(){var e;this._updateRtlConfig(),(e=this._scrollAction)===null||e===void 0||e.call(this)}_attachKeyboardHandler(){g.off(this._$element,`.${di}`),!this.option("disabled")&&this.option("useKeyboard")&&g.on(this._$element,I("keydown",di),this._keyDownHandler.bind(this))}_keyDownHandler(e){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout((()=>{Ue(e)===Ae.TAB&&this._eachScroller((s=>{s._updateHandler()}))})),!this._$container.is(F.getActiveElement(this._$container.get(0))))return;let t=!0;switch(Ue(e)){case Ae.DOWN:this._scrollByLine({y:1});break;case Ae.UP:this._scrollByLine({y:-1});break;case Ae.RIGHT:this._scrollByLine({x:1});break;case Ae.LEFT:this._scrollByLine({x:-1});break;case Ae.PAGE_DOWN:this._scrollByPage(1);break;case Ae.PAGE_UP:this._scrollByPage(-1);break;case Ae.HOME:this._scrollToHome();break;case Ae.END:this._scrollToEnd();break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault())}_scrollByLine(e){const t=this._tryGetDevicePixelRatio();let s=40;t&&(s=Math.abs(s/t*100)/100),this.scrollBy({top:(e.y??0)*-s,left:(e.x??0)*-s})}_scrollByPage(e){const t=this._wheelProp(),s=this._dimensionByProp(t),n={},o=s==="width"?L:K;n[t]=e*-o(this._$container),this.scrollBy(n)}_dimensionByProp(e){return e==="left"?"width":"height"}_getPropByDirection(e){return e===Z?"left":"top"}_scrollToHome(){const e=this._wheelProp(),t={};t[e]=0,this._component.scrollTo(t)}_scrollToEnd(){const e=this._wheelProp(),t=this._dimensionByProp(e),s={},n=t==="width"?L:K;s[e]=n(this._$content)-n(this._$container),this._component.scrollTo(s)}createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()}_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})}_createActionHandler(e){var t=this;const s=this._createActionByOption(e);return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];s(D(t._createActionArgs(),o))}}_createActionArgs(){const{horizontal:e,vertical:t}=this._scrollers,s=this._getScrollOffset();return this._scrollOffset={top:t&&s.top,left:e&&s.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:e==null?void 0:e._reachedMax(),reachedRight:e==null?void 0:e._reachedMin(),reachedTop:t==null?void 0:t._reachedMax(),reachedBottom:t==null?void 0:t._reachedMin()}}_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}}_eventHandler(e,t){const s=[].slice.call(arguments).slice(1),n=Ee(this._scrollers,(o=>o[`_${e}Handler`].apply(o,s)));return W.apply(_,n).promise()}location(){const e=es(this._$content);return e.top-=this._$container.scrollTop(),e.left-=this._$container.scrollLeft(),e}disabledChanged(){this._attachCursorHandlers()}_attachCursorHandlers(){g.off(this._$element,`.${hs}`);const{disabled:e}=this.option();!e&&this._isHoverMode()&&(g.on(this._$element,I("mouseenter",hs),this._cursorEnterHandler.bind(this)),g.on(this._$element,I("mouseleave",hs),this._cursorLeaveHandler.bind(this)))}_isHoverMode(){return this.option("showScrollbar")==="onHover"}_cursorEnterHandler(e){const t=e||{};t.originalEvent=t.originalEvent||{},!(gt||t.originalEvent._hoverHandled)&&(_e&&_e._cursorLeaveHandler(),_e=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)}_cursorLeaveHandler(e){_e!==this||gt===_e||(this._eventHandler("cursorLeave"),_e=null,this._refreshCursorState(e==null?void 0:e.relatedTarget))}_refreshCursorState(e){if(!this._isHoverMode()&&(!e||gt))return;const s=_(e).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),n=s.length&&s.data(Fu);_e&&_e!==n&&_e._cursorLeaveHandler(),n&&n._cursorEnterHandler()}update(){const e=this._eventHandler("update").done(this._updateAction);return W(e,Ko((()=>{const t=this._allowedDirections();return pi((()=>{let s=t.vertical?"pan-x":"";s=t.horizontal?"pan-y":s,s=t.vertical&&t.horizontal?"none":s,this._$container.css("touchAction",s)})),W().promise()})))}_allowedDirections(){const{bounceEnabled:e}=this.option(),t=this._scrollers[Ce],s=this._scrollers[Z];return{vertical:!!(t&&(t._minOffset<0||e)),horizontal:!!(s&&(s._minOffset<0||e))}}_updateBounds(){var e;(e=this._scrollers[Z])===null||e===void 0||e._updateBounds()}_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==Ce}updateRtlPosition(e){if(e&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let t=this._getMaxOffset().left-this._rtlConfig.scrollRight;t<=0&&(t=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==t&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:t}),this._rtlConfig.skipUpdating=!1)}}_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:e,scrollLeft:t}=this._$container.get(0),s=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===s&&this._rtlConfig.clientWidth===e&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-t),this._rtlConfig.clientWidth=e,this._rtlConfig.windowPixelRatio=s}}_getWindowDevicePixelRatio(){return de()?Ne().devicePixelRatio:1}scrollBy(e){var t,s;const n=this._scrollers[Ce],o=this._scrollers[Z];n&&(e.top=n._boundLocation(e.top+n._location)-n._location),o&&(e.left=o._boundLocation(e.left+o._location)-o._location),this._prepareDirections(!0),(t=this._startAction)===null||t===void 0||t.call(this),this._eventHandler("scrollBy",{x:e.left,y:e.top}),(s=this._endAction)===null||s===void 0||s.call(this),this._updateRtlConfig()}validate(e){return me(e)&&xt(e)||this.option("disabled")?!1:this.option("bounceEnabled")?!0:me(e)?this._validateWheel(e):this._validateMove(e)}_validateWheel(e){const t=this._scrollers[this._wheelDirection(e)],s=t._reachedMin(),n=t._reachedMax(),o=!s||!n,r=!s&&!n,a=s&&e.delta>0,l=n&&e.delta<0;let d=o&&(r||a||l);return d=d||this._validateWheelTimer!==void 0,d&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout((()=>{this._validateWheelTimer=void 0}),500)),d}_validateMove(e){const{scrollByContent:t}=this.option();return!t&&!_(e.target).closest(".dx-scrollable-scrollbar").length?!1:this._allowedDirection()}getDirection(e){return me(e)?this._wheelDirection(e):this._allowedDirection()}_wheelProp(){return this._wheelDirection()===Z?"left":"top"}_wheelDirection(e){const{direction:t}=this.option();switch(t){case Z:return Z;case Ce:return Ce;default:return e!=null&&e.shiftKey?Z:Ce}}dispose(){this._resetActive(),_e===this&&(_e=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=void 0,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)}_detachEventHandlers(){g.off(this._$element,`.${hs}`),g.off(this._$container,`.${di}`)}}const Uu="vertical",cf="horizontal",hf="both",Gu="dx-scrollable-content";function ju(i,e){const t={left:0,top:0};let s=e;for(;(n=s)!==null&&n!==void 0&&n.offsetParent&&!s.classList.contains(i);){var n;const o=s.offsetParent,r=s.getBoundingClientRect(),a=o.getBoundingClientRect();t.left+=r.left-a.left,t.top+=r.top-a.top,s=s.offsetParent}return t}function qu(i,e,t,s,n){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Gu;const r=v({top:0,left:0,right:0,bottom:0},n),a=e===Uu,l=a?"top":"left",d=a?"bottom":"right",c=a?"height":"width",u=t[`offset${zt(c)}`],h=t[`client${zt(c)}`],p=t.getBoundingClientRect()[c],m=i.getBoundingClientRect()[c];let f=1;Math.abs(p-u)>1&&(f=p/u);const y=ju(o,i)[l]/f,C=s[l],T=C-y+r[l],x=C-y-m/f+h-r[d];return T<=0&&x>=0?C:C-(Math.abs(T)>Math.abs(x)?x:T)}const Se="dxScrollable",Yu="dxScrollableStrategy",ye="vertical",Be="horizontal",ci="both";class ln extends Pi{_getDefaultOptions(){return v({},super._getDefaultOptions(),{disabled:!1,onScroll:null,direction:ye,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:w})}_defaultOptionsRules(){return super._defaultOptionsRules().concat(Ca(),[{device:()=>!!(dt.nativeScrolling&&O.real().platform==="android"&&!Mi.mozilla),options:{useSimulatedScrollbar:!0}}])}_initOptions(e){super._initOptions(e),"useSimulatedScrollbar"in e||this._setUseSimulatedScrollbar()}_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))}_init(){super._init(),this._initScrollableMarkup(),this._locked=!1}_visibilityChanged(e){if(e){this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset;const{_onVisibilityChanged:t}=this.option();t==null||t(this)}else this._savedScrollOffset=this.scrollOffset()}_initScrollableMarkup(){const e=this.$element().addClass("dx-scrollable"),t=_("<div>").addClass("dx-scrollable-container"),s=_("<div>").addClass("dx-scrollable-wrapper"),n=_("<div>").addClass("dx-scrollable-content");this._$container=t,this._$wrapper=s,this._$content=n,n.append(e.contents()).appendTo(t),t.appendTo(s),s.appendTo(e)}_dimensionChanged(){this.update(),this._updateRtlPosition()}_initMarkup(){super._initMarkup(),this._renderDirection()}_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),super._render(),this._updateRtlPosition(!0)}_updateRtlPosition(e){this._strategy.updateRtlPosition(e)}_getMaxOffset(){const{scrollWidth:e,clientWidth:t,scrollHeight:s,clientHeight:n}=_(this.container()).get(0);return{left:e-t,top:s-n}}_attachEventHandlers(){const e=this._strategy,t={getDirection:e.getDirection.bind(e),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};g.off(this._$wrapper,`.${Se}`),g.on(this._$wrapper,I(mt.init,Se),t,this._initHandler.bind(this)),g.on(this._$wrapper,I(mt.start,Se),e.handleStart.bind(e)),g.on(this._$wrapper,I(mt.move,Se),e.handleMove.bind(e)),g.on(this._$wrapper,I(mt.end,Se),e.handleEnd.bind(e)),g.on(this._$wrapper,I(mt.cancel,Se),e.handleCancel.bind(e)),g.on(this._$wrapper,I(mt.stop,Se),e.handleStop.bind(e)),g.off(this._$container,`.${Se}`),g.on(this._$container,I("scroll",Se),e.handleScroll.bind(e))}_validate(e){return this._isLocked()?!1:(this._updateIfNeed(),this._moveIsAllowed(e))}_moveIsAllowed(e){return!!this._strategy.validate(e)}handleMove(e){this._strategy.handleMove(e)}_prepareDirections(e){this._strategy._prepareDirections(e)}_initHandler(e){this._strategy.handleInit(e)}_renderDisabledState(){const{disabled:e}=this.option();this.$element().toggleClass("dx-scrollable-disabled",e),this.option("disabled")?this._lock():this._unlock()}_renderDirection(){const{direction:e}=this.option();this.$element().removeClass(`dx-scrollable-${Be}`).removeClass(`dx-scrollable-${ye}`).removeClass(`dx-scrollable-${ci}`).addClass(`dx-scrollable-${e}`)}_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data(Yu,this._strategy)}_createStrategy(){const{useNative:e}=this.option();this._strategy=e?new an(this):new xa(this)}_createActions(){var e;(e=this._strategy)===null||e===void 0||e.createActions()}_clean(){var e;(e=this._strategy)===null||e===void 0||e.dispose()}_optionChanged(e){var t;switch(e.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),(t=this._strategy)===null||t===void 0||t.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":super._optionChanged(e),this._updateRtlPosition();break;default:super._optionChanged(e)}}_resetInactiveDirection(){const e=this._getInactiveProp();if(!e||!de())return;const t=this.scrollOffset();t[e]=0,this.scrollTo(t)}_getInactiveProp(){const{direction:e}=this.option();return e===ye?"left":"top"}_location(){return this._strategy.location()}_normalizeLocation(e){if(z(e)){const s=ge(e.left,e.x),n=ge(e.top,e.y);return{left:E(s)?-s:void 0,top:E(n)?-n:void 0}}const{direction:t}=this.option();return{left:t!==ye?-e:void 0,top:t!==Be?-e:void 0}}_isLocked(){return this._locked}_lock(){this._locked=!0}_unlock(){this.option("disabled")||(this._locked=!1)}_isDirection(e){const{direction:t}=this.option();return e===ye?t!==Be:e===Be?t!==ye:t===e}_updateAllowedDirection(){const e=this._strategy._allowedDirections();this._isDirection(ci)&&e.vertical&&e.horizontal?this._allowedDirectionValue=ci:this._isDirection(Be)&&e.horizontal?this._allowedDirectionValue=Be:this._isDirection(ye)&&e.vertical?this._allowedDirectionValue=ye:this._allowedDirectionValue=null}_allowedDirection(){return this._allowedDirectionValue}$content(){return this._$content}content(){return B(this._$content)}container(){return B(this._$container)}scrollOffset(){return this._strategy._getScrollOffset()}_isRtlNativeStrategy(){const{useNative:e,rtlEnabled:t}=this.option();return e&&t}scrollTop(){return this.scrollOffset().top}scrollLeft(){return this.scrollOffset().left}clientHeight(){return K(this._$container)}scrollHeight(){return j(this.$content())}clientWidth(){return L(this._$container)}scrollWidth(){return ee(this.$content())}update(){return this._strategy?W(this._strategy.update()).done((()=>{this._updateAllowedDirection()})):b().resolve()}scrollBy(e){const t=this._normalizeLocation(e);!t.top&&!t.left||(this._updateIfNeed(),this._strategy.scrollBy(t))}scrollTo(e){if(!de())return;let t=this._normalizeLocation(e);this._updateIfNeed();let s=this._location();const{useNative:n}=this.option();if(!n){const r=this._strategy;t=r._applyScaleRatio(t),s=r._applyScaleRatio(s)}this._isRtlNativeStrategy()&&(s.left-=this._getMaxOffset().left);const o=this._normalizeLocation({left:s.left-ge(t.left,s.left),top:s.top-ge(t.top,s.top)});!o.top&&!o.left||this._strategy.scrollBy(o)}scrollToElement(e,t){const s=_(e),n=this.$content().find(e).length,o=s.parents(".dx-scrollable").length-s.parents(".dx-scrollable-content").length===0;if(!n||!o)return;const r={top:0,left:0},{direction:a}=this.option();a!==ye&&(r.left=this.getScrollElementPosition(s,Be,t)),a!==Be&&(r.top=this.getScrollElementPosition(s,ye,t)),this.scrollTo(r)}getScrollElementPosition(e,t,s){const n=this.scrollOffset();return qu(e[0],t,_(this.container())[0],n,s)}_updateIfNeed(){this.option("updateManually")||this.update()}_useTemplates(){return!1}}oe(Se,ln);class wa extends zo{_supportedKeys(){return v({},super._supportedKeys(),{escape:w})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{message:$.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>ze(Q()),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>Cs(Q()),options:{width:"auto",height:"auto"}}])}_init(){super._init()}_render(){super._render(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._updateWrapperAria()}_updateWrapperAria(){if(this.$wrapper().removeAttr("aria-label").removeAttr("role"),!this.option("showIndicator")){const t=this._getAriaAttributes();this.$wrapper().attr(t)}}_getAriaAttributes(){const{message:e}=this.option();return{role:"alert","aria-label":e||$.format("Loading")}}_renderContentImpl(){const e=super._renderContentImpl();return this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=_("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),e}_show(){const{delay:e}=this.option();if(!e)return super._show();const t=b(),s=super._show.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout((()=>{s().done((()=>{t.resolve()}))}),e),t.promise()}_hide(){return this._clearShowTimeout(),super._hide()}_clearShowTimeout(){clearTimeout(this._showTimeout)}_renderMessage(){if(!this._$loadPanelContentWrapper)return;const{message:e}=this.option();if(!e)return;const t=_("<div>").addClass("dx-loadpanel-message").text(e);this._$loadPanelContentWrapper.append(t)}_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=_("<div>").addClass("dx-loadpanel-indicator").appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,_t,{elementAttr:this._getAriaAttributes(),indicatorSrc:this.option("indicatorSrc")}))}_cleanPreviousContent(){this.$content().find(".dx-loadpanel-message").remove(),this.$content().find(".dx-loadpanel-indicator").remove(),this._$indicator=void 0}_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))}_optionChanged(e){switch(e.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._updateWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:super._optionChanged(e)}}_dispose(){this._clearShowTimeout(),super._dispose()}}oe("dxLoadPanel",wa);const Di="dx-toolbar",Xu="dxToolbarItemDataKey";class Qu extends ma{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter((e=>e!=="disabled"))}_initTemplates(){super._initTemplates();const e=new sn(((t,s,n)=>{if(z(s)){const{text:o,html:r,widget:a}=s;o&&t.text(o).wrapInner("<div>"),r&&t.html(r),a==="dxDropDownButton"&&(s.options=s.options??{},E(s.options.stylingMode)||(s.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),a==="dxButton"&&(this.option("useFlatButtons")&&(s.options=s.options??{},s.options.stylingMode=s.options.stylingMode??"text"),this.option("useDefaultButtons")&&(s.options=s.options??{},s.options.type=s.options.type??"default"))}else t.text(String(s));this._getTemplate("dx-polymorph-widget").render({container:t,model:n,parent:this})}),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>wt(Q()),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return Xu}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(Di),this._$toolbarItemsContainer=_("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const e=this._$toolbarItemsContainer;S(["before","center","after"],((t,s)=>{const n=`dx-toolbar-${s}`;e.find(`.${n}`).length||(this[`_$${s}Section`]=_("<div>").addClass(n).attr("role","presentation").appendTo(e))}))}_arrangeItems(e){var t,s,n,o;const r=e??L(this.$element());(t=this._$centerSection)===null||t===void 0||t.css({margin:"0 auto",float:"none"});const a=et((s=this._$beforeSection)===null||s===void 0?void 0:s.get(0)),l=et((n=this._$afterSection)===null||n===void 0?void 0:n.get(0));this._alignCenterSection(a,l,r);const d=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),c=d.parent();if(!d.length)return;const u=a.width?a.width:(o=d.position())===null||o===void 0?void 0:o.left,h=c.hasClass("dx-toolbar-before")?0:u,p=c.hasClass("dx-toolbar-after")?0:l.width;let m=0;c.children().not(".dx-toolbar-label").each(((C,T)=>{m+=ee(T)}));const f=r-m,y=Math.max(f-h-p,0);if(c.hasClass("dx-toolbar-before"))this._$beforeSection&&this._alignSection(this._$beforeSection,y);else{const C=ee(d)-L(d);d.css("maxWidth",y-C)}}_alignCenterSection(e,t,s){if(!this._$centerSection)return;this._alignSection(this._$centerSection,s-e.width-t.width);const n=this.option("rtlEnabled"),o=n?t:e,r=n?e:t,a=et(this._$centerSection.get(0));(o.right>a.left||a.right>r.left)&&this._$centerSection.css({marginLeft:o.width,marginRight:r.width,float:o.width>r.width?"none":"right"})}_alignSection(e,t){const n=e.find(".dx-toolbar-label").toArray(),o=t-this._getCurrentLabelsPaddings(n),r=this._getCurrentLabelsWidth(n),a=Math.abs(r-o);if(o<r){const l=n.reverse();this._alignSectionLabels(l,a,!1)}else this._alignSectionLabels(n,a,!0)}_alignSectionLabels(e,t,s){const n=o=>et(o).width;for(let o=0;o<e.length;o++){const r=_(e[o]),a=Math.ceil(n(e[o]));let l=0;s&&r.css("maxWidth","inherit");const d=s?n(e[o]):a,c=Math.ceil(d);if(c<t)l=s?c:0,t-=c;else{l=s?a+t:a-t,r.css("maxWidth",l);break}r.css("maxWidth",l)}}_applyCompactMode(){const e=_(this.element());e.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>L(e)&&e.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(e){let t=0;return e.forEach((s=>{t+=ee(s)})),t}_getCurrentLabelsPaddings(e){let t=0;return e.forEach((s=>{t+=ee(s)-L(s)})),t}_renderItem(e,t,s,n){const o=t.location??"center",r=s??this[`_$${o}Section`],a=!!(t.text??t.html),l=super._renderItem(e,t,r,n);return l.toggleClass("dx-toolbar-button",!a).toggleClass("dx-toolbar-label",a).addClass(t.cssClass??""),l}_renderGroupedItems(){S(this.option("items"),((e,t)=>{const s=t.items,n=_("<div>").addClass("dx-toolbar-group"),o=t.location??"center";s!=null&&s.length&&(S(s,((r,a)=>{this._renderItem(r,a,n)})),this._$toolbarItemsContainer.find(`.dx-toolbar-${o}`).append(n))}))}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){const{items:e=[]}=this.option();return e}_renderContentImpl(){const e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return L(this.$element())>0&&K(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,t,s,n){super._itemOptionChanged(e,t,s,n),this._arrangeItems()}_optionChanged(e){const{name:t}=e;switch(t){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if(ze(Q())){const e=()=>new Promise((s=>{const n=()=>{let r=!0;return this.$element().parents().each(((a,l)=>ps.isAnimating(_(l).get(0))?(r=!1,!1):!0)),r&&s(),r},o=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout((()=>n()||o()),15)};o()})),t=()=>{const s=this.$element().find(".dx-toolbar-label"),n=[];return s.each(((o,r)=>{const a=_(r).text(),l=_(r).css("fontWeight");return n.push(Nl(a,l)),!0})),Promise.all(n)};Promise.all([e(),t()]).then((()=>{this._dimensionChanged()}))}}}oe("dxToolbarBase",Qu);const Js="dxResizable",Ju=I(No,Js),Zu=I(Uo,Js),ep=I(Go,Js),tp={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"};class Ta extends Pi{_getDefaultOptions(){return v({},super._getDefaultOptions(),{handles:"all",step:"1",stepPrecision:"simple",minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,roundStepValue:!0,keepAspectRatio:!0})}_init(){super._init(),this.$element().addClass("dx-resizable")}_initMarkup(){super._initMarkup(),this._renderHandles()}_render(){super._render(),this._renderActions()}_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")}_renderHandles(){this._handles=[];const{handles:e}=this.option();if(e==="none"||!e)return;const t=e==="all"?["top","bottom","left","right"]:e.split(" "),s={};S(t,((n,o)=>{s[o]=!0,this._renderHandle(o)})),s.bottom&&s.right&&this._renderHandle("corner-bottom-right"),s.bottom&&s.left&&this._renderHandle("corner-bottom-left"),s.top&&s.right&&this._renderHandle("corner-top-right"),s.top&&s.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}_renderHandle(e){const t=_("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${e}`).appendTo(this.$element());this._handles.push(t)}_attachEventHandlers(){if(this.option("disabled"))return;const e={};e[Ju]=this._dragStartHandler.bind(this),e[Zu]=this._dragHandler.bind(this),e[ep]=this._dragEndHandler.bind(this),this._handles.forEach((t=>{g.on(t,e,{direction:"both",immediate:!0})}))}_detachEventHandlers(){this._handles.forEach((e=>{g.off(e)}))}_toggleEventHandlers(e){e?this._attachEventHandlers():this._detachEventHandlers()}_getElementSize(){const e=this.$element();return e.css("boxSizing")==="border-box"?{width:ee(e),height:j(e)}:{width:L(e),height:K(e)}}_dragStartHandler(e){var t;const s=this.$element();if(s.is(".dx-state-disabled, .dx-state-disabled *")){e.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(e),this._elementLocation=es(s),this._elementSize=this._getElementSize(),this._renderDragOffsets(e),(t=this._resizeStartAction)===null||t===void 0||t.call(this,{event:e,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),e.targetElements=null}_toggleResizingClass(e){this.$element().toggleClass("dx-resizable-resizing",e)}_renderDragOffsets(e){const t=this._getArea();if(!t)return;const s=_(e.target).closest(".dx-resizable-handle"),n=ee(s),o=j(s),r=s.offset()??{left:0,top:0},a=t.offset,l=this._getAreaScrollOffset();this._leftMaxOffset=r.left-a.left-l.scrollX,e.maxLeftOffset=this._leftMaxOffset,this._rightMaxOffset=a.left+t.width-r.left-n+l.scrollX,e.maxRightOffset=this._rightMaxOffset,this._topMaxOffset=r.top-a.top-l.scrollY,e.maxTopOffset=this._topMaxOffset,this._bottomMaxOffset=a.top+t.height-r.top-o+l.scrollY,e.maxBottomOffset=this._bottomMaxOffset}_getBorderWidth(e,t){if(yt(e.get(0)))return 0;const s=e.css(tp[t]);return parseInt(s,10)||0}_proportionate(e,t){const s=this._elementSize,n=e==="x"?s.width/s.height:s.height/s.width;return t*n}_getProportionalDelta(e){const{x:t,y:s}=e,n=this._proportionate("y",t);if(n>=s)return{x:t,y:n};const o=this._proportionate("x",s);return o>=t?{x:o,y:s}:{x:0,y:0}}_getDirectionName(e){const t=this._movingSides;return e==="x"?t.left?"left":"right":t.top?"top":"bottom"}_fitIntoArea(e,t){const s=this._getDirectionName(e);return Math.min(t,this[`_${s}MaxOffset`]??1/0)}_fitDeltaProportionally(e){let t=v({},e);const s=this._elementSize,{minWidth:n,minHeight:o,maxWidth:r,maxHeight:a}=this.option(),l=()=>s.width+t.x,d=()=>s.height+t.y,c=p=>t[p]===this._fitIntoArea(p,t[p]),u=()=>vn(l(),n,r)&&c("x"),h=()=>vn(d(),o,a)&&c("y");if(!u()){const p=this._fitIntoArea("x",He(l(),n,r)-s.width);t={x:p,y:this._proportionate("y",p)}}if(!h()){const p=this._fitIntoArea("y",He(d(),o,a)-s.height);t={x:this._proportionate("x",p),y:p}}return u()&&h()?t:{x:0,y:0}}_fitDelta(e){const{x:t,y:s}=e,n=this._elementSize,{minWidth:o,minHeight:r,maxWidth:a,maxHeight:l}=this.option();return{x:He(n.width+t,o,a)-n.width,y:He(n.height+s,r,l)-n.height}}_getDeltaByOffset(e){const t=this._movingSides,s=this._isCornerHandler(t)&&this.option("keepAspectRatio");let n={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)};if(s){const o=this._getProportionalDelta(n);n=this._fitDeltaProportionally(o)}else{const o=this._fitDelta(n);n=this._roundByStep(o)}return n}_updatePosition(e,t){const{width:s,height:n}=t,o=this._elementLocation,r=this._movingSides,a=this.$element(),l=this._getElementSize(),d=e.y*(r.top?-1:1)-((l.height||n)-n),c=e.x*(r.left?-1:1)-((l.width||s)-s);we(a,{top:o.top+(r.top?d:0),left:o.left+(r.left?c:0)})}_dragHandler(e){const t=this._getOffset(e),s=this._getDeltaByOffset(t),n=this._updateDimensions(s);this._updatePosition(s,n),this._triggerResizeAction(e,n)}_updateDimensions(e){const t=u=>u.substring(u.length-2)==="px",{stepPrecision:s}=this.option(),n=s==="strict",o=this._elementSize,r=o.width+e.x,a=o.height+e.y,l=this.$element()[0].style,d=e.x||n||t(l.width),c=e.y||n||t(l.height);return d&&this.option({width:r}),c&&this.option({height:a}),{width:d?r:o.width,height:c?a:o.height}}_triggerResizeAction(e,t){var s;const{width:n,height:o}=t;(s=this._resizeAction)===null||s===void 0||s.call(this,{event:e,width:this.option("width")||n,height:this.option("height")||o,handles:this._movingSides}),Me(this.$element())}_isCornerHandler(e){return Object.values(e).reduce(((t,s)=>t^s),0)===0}_getOffset(e){const{offset:t}=e,s=this._movingSides;return!s.left&&!s.right&&(t.x=0),!s.top&&!s.bottom&&(t.y=0),t}_roundByStep(e){const{stepPrecision:t}=this.option();return t==="strict"?this._roundStrict(e):this._roundNotStrict(e)}_getSteps(){const{step:e,roundStepValue:t}=this.option();return dl(e,!t)}_roundNotStrict(e){const{h:t,v:s}=this._getSteps();return{x:e.x-e.x%t,y:e.y-e.y%s}}_roundStrict(e){const t=this._movingSides,s={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)},n=this._getSteps(),o=this._elementLocation,r=this._elementSize,a=t.left?o.left:o.left+r.width,l=t.top?o.top:o.top+r.height,d=(a+s.x)%n.h,c=(l+s.y)%n.v,u=Math.sign||(T=>{const x=+T;return x===0||isNaN(x)?x:x>0?1:-1}),h=(T,x)=>(1+.2*u(x))%1*T,p=(T,x)=>Math.abs(T)<.2*x;let m=s.x-d,f=s.y-c;d>h(n.h,s.x)&&(m+=n.h),c>h(n.v,s.y)&&(f+=n.v);const y=(t.left||t.right)&&!p(s.x,n.h)?m:0,C=(t.top||t.bottom)&&!p(s.y,n.v)?f:0;return{x:y*(t.left?-1:1),y:C*(t.top?-1:1)}}_getMovingSides(e){const t=_(e.target),s=t.hasClass("dx-resizable-handle-corner-top-left"),n=t.hasClass("dx-resizable-handle-corner-top-right"),o=t.hasClass("dx-resizable-handle-corner-bottom-left"),r=t.hasClass("dx-resizable-handle-corner-bottom-right");return{top:t.hasClass("dx-resizable-handle-top")||s||n,left:t.hasClass("dx-resizable-handle-left")||s||o,bottom:t.hasClass("dx-resizable-handle-bottom")||o||r,right:t.hasClass("dx-resizable-handle-right")||n||r}}_getArea(){let{area:e}=this.option();return M(e)&&(e=e.call(this)),z(e)?this._getAreaFromObject(e):this._getAreaFromElement(e)}_getAreaScrollOffset(){const{area:e}=this.option(),t=!M(e)&&!z(e),s={scrollY:0,scrollX:0};if(t){const n=_(e)[0];yt(n)&&(s.scrollX=n.pageXOffset,s.scrollY=n.pageYOffset)}return s}_getAreaFromObject(e){const t={width:e.right-e.left,height:e.bottom-e.top,offset:{left:e.left,top:e.top}};return this._correctAreaGeometry(t),t}_getAreaFromElement(e){const t=_(e);if(!t.length)return;const s={width:Rn(t),height:On(t),offset:D({top:0,left:0},yt(t[0])?{}:t.offset())};return this._correctAreaGeometry(s,t),s}_correctAreaGeometry(e,t){const s=t?this._getBorderWidth(t,"left"):0,n=t?this._getBorderWidth(t,"top"):0;e.offset.left+=s+this._getBorderWidth(this.$element(),"left"),e.offset.top+=n+this._getBorderWidth(this.$element(),"top"),e.width-=ee(this.$element())-Rn(this.$element()),e.height-=j(this.$element())-On(this.$element())}_dragEndHandler(e){var t;const s=this.$element();(t=this._resizeEndAction)===null||t===void 0||t.call(this,{event:e,width:ee(s),height:j(s),handles:this._movingSides}),this._toggleResizingClass(!1)}_renderWidth(e){const{minWidth:t,maxWidth:s}=this.option();this.option("width",He(e,t,s))}_renderHeight(e){const{minHeight:t,maxHeight:s}=this.option();this.option("height",He(e,t,s))}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"disabled":this._toggleEventHandlers(!s),super._optionChanged(e);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":de()&&this._renderWidth(ee(this.$element()));break;case"minHeight":case"maxHeight":de()&&this._renderHeight(j(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:super._optionChanged(e)}}_clean(){this.$element().find(".dx-resizable-handle").remove()}_useTemplates(){return!1}}oe(Js,Ta);class sp{constructor(e){this.init(e)}init(e){let{dragEnabled:t,handle:s,draggableElement:n,positionController:o}=e;this._positionController=o,this._draggableElement=n,this._handle=s,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){const e=this._getEventNames();g.on(this._handle,e.startEventName,(t=>{this._dragStartHandler(t)})),g.on(this._handle,e.updateEventName,(t=>{this._dragUpdateHandler(t)})),g.on(this._handle,e.endEventName,(t=>{this._dragEndHandler(t)}))}unsubscribe(){const e=this._getEventNames();g.off(this._handle,e.startEventName),g.off(this._handle,e.updateEventName),g.off(this._handle,e.endEventName)}_getEventNames(){const e=I(No,"overlayDrag"),t=I(Uo,"overlayDrag"),s=I(Go,"overlayDrag");return{startEventName:e,updateEventName:t,endEventName:s}}_dragStartHandler(e){const t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=t.top,e.maxBottomOffset=t.bottom,e.maxLeftOffset=t.left,e.maxRightOffset=t.right}_dragUpdateHandler(e){const t={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(t),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,t,s){if(!this._dragEnabled)return;s.preventDefault(),s.stopPropagation();const n=this._fitOffsetIntoAllowedRange(e,t);this._moveByOffset(n),this._dragEndHandler(s)}_fitOffsetIntoAllowedRange(e,t){const s=this._getAllowedOffsets();return{top:He(e,-s.top,s.bottom),left:He(t,-s.left,s.right)}}_getContainerDimensions(){const e=F.getDocument(),t=this._positionController.$dragResizeContainer.get(0);let s=ee(t),n=j(t);return yt(t)&&(n=Math.max(e.body.clientHeight,n),s=Math.max(e.body.clientWidth,s)),{width:s,height:n}}_getContainerPosition(){const e=this._positionController.$dragResizeContainer.get(0);return yt(e)?{top:0,left:0}:Bn(e)}_getElementPosition(){return Bn(this._draggableElement)}_getInnerDelta(){const e=this._getContainerDimensions(),t=this._getElementDimensions();return{x:e.width-t.width,y:e.height-t.height}}_getOuterDelta(){const{width:e,height:t}=this._getElementDimensions(),{outsideDragFactor:s}=this._positionController;return{x:e*s,y:t*s}}_getFullDelta(){const e=this._getInnerDelta(),t=this._getOuterDelta();return{x:e.x+t.x,y:e.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};const s=this._getElementPosition(),n=this._getContainerPosition(),o=this._getOuterDelta();return{top:s.top-n.top+o.y,bottom:-s.top+n.top+e.y,left:s.left-n.left+o.x,right:-s.left+n.left+e.x}}_moveByOffset(e){const t=es(this._draggableElement),s={left:t.left+e.left,top:t.top+e.top};we(this._draggableElement,s)}}const ip={setOverflow:w,restoreOverflow:w},np=()=>{if(!it.hasWindow())return ip;const i=it.getWindow(),{documentElement:e}=F.getDocument(),t=F.getBody(),s=O.real().platform==="ios",n={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:s?()=>{if(E(n.position)||t.style.position==="fixed")return;const{scrollY:o,scrollX:r}=i;n.position=t.style.position,n.top=t.style.top,n.left=t.style.left,t.style.setProperty("position","fixed"),t.style.setProperty("top",-o+"px"),t.style.setProperty("left",-r+"px")}:()=>{(()=>{const o=i.innerWidth-e.clientWidth;if(n.paddingRight||o<=0)return;const r=i.getComputedStyle(t).getPropertyValue("padding-right"),a=parseInt(r,10);n.paddingRight=a,t.style.setProperty("padding-right",`${a+o}px`)})(),!(n.overflow||t.style.overflow==="hidden")&&(n.overflow=t.style.overflow,n.overflowX=t.style.overflowX,n.overflowY=t.style.overflowY,t.style.setProperty("overflow","hidden"))},restoreOverflow:s?()=>{if(!E(n.position))return;const o=-parseInt(t.style.top,10),r=-parseInt(t.style.left,10);["position","top","left"].forEach((a=>{n[a]?t.style.setProperty(a,n[a]):t.style.removeProperty(a)})),i.scrollTo(r,o),n.position=null}:()=>{E(n.paddingRight)&&(n.paddingRight?t.style.setProperty("padding-right",`${n.paddingRight}px`):t.style.removeProperty("padding-right"),n.paddingRight=null),["overflow","overflowX","overflowY"].forEach((o=>{if(!E(n[o]))return;const r=o.replace(/(X)|(Y)/,(a=>`-${a.toLowerCase()}`));n[o]?t.style.setProperty(r,n[o]):t.style.removeProperty(r),n[o]=null}))}}},hi=it.getWindow();class op extends fl{constructor(e){super(e);const t=this._properties,{properties:s}=e,{fullScreen:n,forceApplyBindings:o,dragOutsideBoundary:r,dragAndResizeArea:a,outsideDragFactor:l}=s;this._properties=v({},t,{fullScreen:n,forceApplyBindings:o,dragOutsideBoundary:r,dragAndResizeArea:a,outsideDragFactor:l}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._properties.dragOutsideBoundary?1:this._properties.outsideDragFactor}set outsideDragFactor(e){this._properties.outsideDragFactor=e}set fullScreen(e){this._properties.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}set dragAndResizeArea(e){this._properties.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._properties.dragOutsideBoundary=e,this._updateDragResizeContainer()}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._properties.fullScreen)we(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,t;(e=(t=this._properties).forceApplyBindings)===null||e===void 0||e.call(t),super.positionContent()}}_normalizePosition(e){const t=super._normalizePosition(e);return this._properties.fullScreen&&(t.of="window"),t}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._properties.dragOutsideBoundary?_(hi):this._properties.dragAndResizeArea?_(this._properties.dragAndResizeArea):Ml().get(0)||this._properties.container?this._$markupContainer:_(hi)}_getVisualContainer(){return this._properties.fullScreen?_(hi):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const rp=it.getWindow(),Co=["cancel","clear","done"],Le={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},ap=i=>{const e=O.current(),{platform:t}=e;let s="bottom",n="before";if(t==="ios")switch(i){case"cancel":s="top";break;case"clear":s="top",n="after";break;case"done":n="after"}else if(t==="android")switch(i){case"cancel":case"done":n="after"}return{toolbar:s,location:n}},lp=i=>i.toLowerCase()==="done"?"OK":Fo(i,!0),dp=(i,e)=>i===Le.flex?-e:0;class Da extends zo{_supportedKeys(){return v({},super._supportedKeys(),{upArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveUp(e)},downArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveDown(e)},leftArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveLeft(e)},rightArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveRight(e)}})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:e=>O.real().deviceType==="desktop"&&e.platform==="generic",options:{dragEnabled:!0}},{device:()=>O.real().deviceType==="desktop"&&!O.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>wt(Q()),options:{useFlatToolbarButtons:!0}},{device:()=>ze(Q()),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])}_iosAnimation(){return{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}}}_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}}_init(){const{_wrapperClassExternal:e}=this.option(),t=e?`dx-popup-wrapper ${e}`:"dx-popup-wrapper";super._init(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(t),this._$popupContent=this._$content.wrapInner(_("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")}_render(){const e=!!this.option("fullScreen");this._toggleFullScreenClass(e),super._render()}_createBodyOverflowManager(){this._bodyOverflowManager=np()}_toggleFullScreenClass(e){this.$overlayContent().toggleClass("dx-popup-fullscreen",e).toggleClass("dx-popup-normal",!e)}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({title:new si,bottom:new si})}_getActionsList(){return super._getActionsList().concat(["onResizeStart","onResize","onResizeEnd"])}_contentResizeHandler(e){this._shouldSkipContentResize(e)||this._renderGeometry({shouldOnlyReposition:!0})}_isShowAnimationResizing(){const e=this.option("animation");return["to","from"].some((t=>{var s;const n=e==null||(s=e.show)===null||s===void 0?void 0:s[t];return H(n)&&("width"in n||"height"in n)}))}_updateResizeCallbackSkipCondition(){const e=this._isShowAnimationResizing();this._shouldSkipContentResize=t=>e&&this._showAnimationProcessing||this._areContentDimensionsRendered(t)}_observeContentResize(e){if(!this.option("useResizeObserver"))return;const t=this._$content.get(0);e?Ss.observe(t,(s=>{this._contentResizeHandler(s)})):Ss.unobserve(t)}_areContentDimensionsRendered(e){var t,s,n;const o=(t=e.contentBoxSize)===null||t===void 0?void 0:t[0];if(o){var r,a;return parseInt(o.inlineSize,10)===((r=this._renderedDimensions)===null||r===void 0?void 0:r.width)&&parseInt(o.blockSize,10)===((a=this._renderedDimensions)===null||a===void 0?void 0:a.height)}const{contentRect:l}=e;return parseInt(l.width,10)===((s=this._renderedDimensions)===null||s===void 0?void 0:s.width)&&parseInt(l.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)}_renderContent(){super._renderContent(),this._observeContentResize(!0)}_processContentRendering(){this._renderTopToolbar(),this._renderBottomToolbar(),this._renderResize(),super._processContentRendering()}_getTopToolbarItems(){const{showTitle:e,title:t}=this.option(),{ios:s}=O.current(),n=this._getToolbarItems("top");return e&&t&&n.unshift({location:s?"center":"before",text:t}),n}_renderTopToolbar(){const{showTitle:e}=this.option(),t=this._getTopToolbarItems();if(e||t.length>0){var n;this._$topToolbar?this._updateToolbarOptions("top",{items:t}):this._renderTopToolbarImpl(),(n=this._$topToolbar)===null||n===void 0||n.toggleClass("dx-has-close-button",this._hasCloseButton())}else{var o;(o=this._$topToolbar)===null||o===void 0||o.detach()}this._toggleAriaLabel()}_renderTopToolbarImpl(){var e;(e=this._$topToolbar)===null||e===void 0||e.remove();const t=this._getTopToolbarItems(),s=_("<div>").addClass("dx-popup-title").addClass(Di).insertBefore(this.$content());this._$topToolbar=this._renderToolbar("titleTemplate",t,s,{onInitialized:n=>{this._topToolbar=n.component}}),this._$topToolbar.addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$topToolbar)}_renderBottomToolbar(){const e=this._getToolbarItems("bottom");if(!e.length){var t;(t=this._$bottomToolbar)===null||t===void 0||t.detach();return}this._$bottomToolbar?this._updateToolbarOptions("bottom",{items:e}):this._renderBottomToolbarImpl(),this._toggleClasses()}_renderBottomToolbarImpl(){var e;(e=this._$bottomToolbar)===null||e===void 0||e.remove();const t=this._getToolbarItems("bottom"),s=_("<div>").addClass("dx-popup-bottom").addClass(Di).insertAfter(this.$content());this._$bottomToolbar=this._renderToolbar("bottomTemplate",t,s,{compactMode:!0,onInitialized:n=>{this._bottomToolbar=n.component}}),this._$bottomToolbar.addClass("dx-popup-bottom")}_triggerToolbarResizeEvent(){[this._$topToolbar,this._$bottomToolbar].forEach((e=>{e&&(Me(e),Me(e))}))}_renderToolbar(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=this._getTemplateByOption(e);return o instanceof si?this._renderByPolymorphicTemplate(t,s,n):this._renderByTemplate(o,s)}_renderByPolymorphicTemplate(e,t,s){const{disabled:n,rtlEnabled:o,useDefaultToolbarButtons:r,useFlatToolbarButtons:a}=this.option(),l=D({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),d=D(s,{disabled:n,rtlEnabled:o,items:e,useDefaultButtons:r,useFlatButtons:a,integrationOptions:l});this._getTemplate("dx-polymorph-widget").render({container:t,model:{widget:this._getToolbarName(),options:d}});const u=t.children("div");return t.replaceWith(u),u}_renderByTemplate(e,t){const s=_(e.render({container:B(t)}));return s.hasClass("dx-template-wrapper")&&(t.replaceWith(s),t=s),t}_updateToolbarOptions(e,t){const s=e==="top"?this._topToolbar:this._bottomToolbar;s==null||s.option(t)}_toggleAriaLabel(){var e;const{title:t,showTitle:s}=this.option(),o=s&&!!t?new J().toString():null;(e=this._$topToolbar)===null||e===void 0||e.find(".dx-toolbar-label").eq(0).attr("id",o),this.$overlayContent().attr("aria-labelledby",o)}_animateShowing(){this._triggerToolbarResizeEvent(),super._animateShowing()}_renderVisibilityAnimate(e){return super._renderVisibilityAnimate(e)}_hide(){return this._observeContentResize(!1),super._hide()}_executeTitleRenderAction(e){this._getTitleRenderAction()({titleElement:B(e)})}_getTitleRenderAction(){return this._titleRenderAction??this._createTitleRenderAction()}_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]}),this._titleRenderAction}_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}}_getCloseButtonRenderer(){return(e,t,s)=>{const n=_("<div>").addClass("dx-closebutton");this._createComponent(n,ht,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),_(s).append(n)}}_getToolbarItems(e){const{platform:t}=O.current(),{toolbarItems:s}=this.option(),n=[];this._toolbarItemClasses=[];let o=0;return S(s,((r,a)=>{const l=E(a.shortcut),d=l?ap(a.shortcut):a;if(l&&t==="ios"&&o<2&&(d.toolbar="top",o++),d.toolbar=a.toolbar||d.toolbar||"top",d&&d.toolbar===e){l&&D(d,{location:a.location},this._getToolbarItemByAlias(a));const c=t==="generic";a.shortcut==="done"&&c||a.shortcut==="cancel"&&!c?n.unshift(d):n.push(d)}})),e==="top"&&this._hasCloseButton()&&n.push(this._getCloseButton()),n}_hasCloseButton(){const{showCloseButton:e,showTitle:t}=this.option();return e&&t}_getToolbarButtonStylingMode(e){return Cs(Q())?e==="done"?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"}_getToolbarButtonType(e){return Cs(Q())&&e==="done"||this.option("useDefaultToolbarButtons")?"default":"normal"}_getToolbarItemByAlias(e){const t=e.shortcut;if(!Co.includes(t))return!1;const s=D({text:$.format(lp(t)),onClick:this._createToolbarItemAction(e.onClick),integrationOptions:{},type:this._getToolbarButtonType(t),stylingMode:this._getToolbarButtonStylingMode(t)},e.options||{}),n=`dx-popup-${t}`;return this._toolbarItemClasses.push(n),{template:(o,r,a)=>{const l=_("<div>").addClass(n).appendTo(a);this._createComponent(l,ht,s)}}}_createToolbarItemAction(e){return this._createAction(e,{afterExecute(t){t.component.hide()}})}_getToolbarName(){return"dxToolbarBase"}_toggleDisabledState(e){super._toggleDisabledState(...arguments),this.$content().toggleClass("dx-state-disabled",!!e)}_toggleClasses(){S(Co,((t,s)=>{var n;const o=`dx-popup-${s}`,r=this._toolbarItemClasses.includes(o);this.$wrapper().toggleClass(`${o}-visible`,r),(n=this._$bottomToolbar)===null||n===void 0||n.toggleClass(o,r)}))}_toggleFocusClass(e,t){if(super._toggleFocusClass(e,t),e&&!ml(this._zIndex)){const s=gl(this._zIndexInitValue());vl(this._zIndex),this._zIndex=s,this._$wrapper.css("zIndex",s),this._$content.css("zIndex",s)}}_toggleContentScrollClass(){const e=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",e)}_getPositionControllerConfig(){const e=super._getPositionControllerConfig(),{fullScreen:t,forceApplyBindings:s,dragOutsideBoundary:n,dragAndResizeArea:o,outsideDragFactor:r}=this.option(),a=v({},e.properties,{fullScreen:t,forceApplyBindings:s,dragOutsideBoundary:n,dragAndResizeArea:o,outsideDragFactor:r}),l=v({},e.elements);return{properties:a,elements:l}}_initPositionController(){this._positionController||(this._positionController=new op(this._getPositionControllerConfig()))}_getDragTarget(){return this.topToolbar()}_renderGeometry(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{visible:t,useResizeObserver:s}=this.option(),{forceStopAnimation:n,shouldOnlyReposition:o,isDimensionChange:r}=e;if(t&&it.hasWindow()){const l=this._showAnimationProcessing&&!n&&s;this._isAnimationPaused=l||void 0,this._stopAnimation(),o?this._renderPosition(!1):this._renderGeometryImpl(r),l&&(this._animateShowing(),this._isAnimationPaused=void 0)}}_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(L(this._$content),10),height:parseInt(K(this._$content),10)})}_renderGeometryImpl(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||this._resetContentHeight(),super._renderGeometryImpl(),this._cacheDimensions(),this._setContentHeight()}_resetContentHeight(){this._getOptionValue("height")==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})}_renderDrag(){const e=this._getDragTarget(),{dragEnabled:t}=this.option();if(!e)return;const s={dragEnabled:t,handle:e.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(s):this._drag=new sp(s),this.$overlayContent().toggleClass("dx-popup-draggable",t)}_renderResize(){this._resizable=this._createComponent(this._$content,Ta,{handles:this.option("resizeEnabled")?"all":"none",onResizeStart:e=>{var t,s;this._observeContentResize(!1),(t=this._actions)===null||t===void 0||(s=t.onResizeStart)===null||s===void 0||s.call(t,e)},onResize:e=>{var t,s;this._setContentHeight(),(t=this._actions)===null||t===void 0||(s=t.onResize)===null||s===void 0||s.call(t,e)},onResizeEnd:e=>{this._resizeEndHandler(e),this._observeContentResize(!0)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})}_resizeEndHandler(e){var t,s;const n=this._resizable.option("width"),o=this._resizable.option("height");n&&this._setOptionWithoutOptionChange("width",n),o&&this._setOptionWithoutOptionChange("height",o),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(e.event),(t=this._actions)===null||t===void 0||(s=t.onResizeEnd)===null||s===void 0||s.call(t,e)}_setContentHeight(){const{forceApplyBindings:e}=this.option();(e??w)();const t=this.$overlayContent().get(0),s=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(s,t)),this._setHeightClasses(this.$overlayContent(),s)}_chooseHeightStrategy(e){const t=e.style.width==="auto"||e.style.width==="";let s=Le.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(t?s=Le.inherit:s=Le.flex),s}_getHeightCssStyles(e,t){let s={};const n=this._getOptionValue("maxHeight",t),o=this._getOptionValue("minHeight",t),r=this._splitPopupHeight(),a=dp(e,r.popupVerticalPaddings),l=r.header+r.footer+r.contentVerticalOffsets+r.popupVerticalOffsets+a;if(e===Le.static){if(!this._isAutoHeight()||n||o){const c=(this.option("fullScreen")?Math.min(et(t).height,it.getWindow().innerHeight):et(t).height)-l;s={height:Math.max(0,c),minHeight:"auto",maxHeight:"auto"}}}else{const d=_(this._positionController.$visualContainer).get(0),c=Ll(n,-l,d);s={height:"auto",minHeight:Hl(o,-l,d),maxHeight:c}}return s}_setHeightClasses(e,t){let s="";for(const n in Le)Le[n]!==t&&(s+=` ${Le[n]}`);e.removeClass(s).addClass(t)}_isAutoHeight(){return this.$overlayContent().get(0).style.height==="auto"}_splitPopupHeight(){const e=this.topToolbar(),t=this.bottomToolbar();return{header:Pn(e==null?void 0:e.get(0)),footer:Pn(t==null?void 0:t.get(0)),contentVerticalOffsets:ii(this.$overlayContent().get(0),!0),popupVerticalOffsets:ii(this.$content().get(0),!0),popupVerticalPaddings:ii(this.$content().get(0),!1)}}_isAllWindowCovered(){const{fullScreen:e}=this.option();return super._isAllWindowCovered()||!!e}_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):super._renderDimensions(),it.hasWindow()&&this._renderFullscreenWidthClass()}_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})}_clean(){super._clean(),this._observeContentResize(!1)}_dispose(){super._dispose(),this._toggleBodyScroll(!0)}_renderFullscreenWidthClass(){const e=ee(this.$overlayContent())===L(rp);this.$overlayContent().toggleClass("dx-popup-fullscreen-width",e)}_toggleSafariScrolling(){this.option("enableBodyScroll")&&super._toggleSafariScrolling()}_toggleBodyScroll(e){if(!this._bodyOverflowManager)return;const{setOverflow:t,restoreOverflow:s}=this._bodyOverflowManager;e?s():t()}refreshPosition(){this._renderPosition()}_optionChanged(e){var t;const{value:s,name:n}=e;switch(n){case"rtlEnabled":case"disabled":{super._optionChanged(e);const r={[n]:!!s};this._updateToolbarOptions("top",r),this._updateToolbarOptions("bottom",r);break}case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(s);break;case"showTitle":case"title":this._renderTopToolbar(),this._renderGeometry(),Me(this.$overlayContent());break;case"titleTemplate":this._renderTopToolbarImpl(),this._renderGeometry(),Me(this.$overlayContent());break;case"bottomTemplate":this._renderBottomToolbarImpl(),this._renderGeometry(),Me(this.$overlayContent());break;case"container":if(super._optionChanged(e),this.option("resizeEnabled")){var o;(o=this._resizable)===null||o===void 0||o.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":super._optionChanged(e),(t=this._resizable)===null||t===void 0||t.option(n,s);break;case"onTitleRendered":this._createTitleRenderAction();break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":this._renderTopToolbar(),this._renderBottomToolbar(),this._renderGeometry(),this._triggerToolbarResizeEvent();break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=s,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=s,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=s;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),Me(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=s,this._toggleFullScreenClass(!!s),this._toggleSafariScrolling(),this._renderGeometry(),Me(this.$overlayContent());break;case"showCloseButton":this._renderTopToolbar();break;case"preventScrollEvents":super._optionChanged(e),this._toggleContentScrollClass();break;default:super._optionChanged(e)}}bottomToolbar(){return this._$bottomToolbar}topToolbar(){return this._$topToolbar}$content(){return this._$popupContent}content(){return B(this.$content())}$overlayContent(){return this._$content}getFocusableElements(){return this.$wrapper().find("[tabindex]").filter(((e,t)=>t.getAttribute("tabindex")>=0))}}oe("dxPopup",Da);const cp="dxswipestart",hp="dxswipe",Aa="dxswipeend",up={defaultItemSizeFunc(){return L(this.getElement())},getBounds(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio(i){return(X(i).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,i)},isFastSwipe(i){const e=X(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},pp={defaultItemSizeFunc(){return K(this.getElement())},getBounds(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio(i){return(X(i).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,i)},isFastSwipe(i){const e=X(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},_p={horizontal:up,vertical:pp},fp=Wo.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor(i){this.callBase(i),this.direction="horizontal",this.elastic=!0},_getStrategy(){return _p[this.direction]},_defaultItemSizeFunc(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init(i){this._tickData=X(i)},_start(i){this._savedEventData=X(i),i=this._fireEvent("dxswipestart",i),i.cancel||(this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset)},_move(i){const e=this._getStrategy(),t=X(i);let s=e.calcOffsetRatio.call(this,i);s=this._fitOffset(s,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent("dxswipe",i,{offset:s}),i.cancelable!==!1&&i.preventDefault()},_end(i){const e=this._getStrategy(),t=e.calcOffsetRatio.call(this,i),s=e.isFastSwipe.call(this,i);let n=t,o=this._calcTargetOffset(t,s);n=this._fitOffset(n,this.elastic),o=this._fitOffset(o,!1),this._fireEvent("dxswipeend",i,{offset:n,targetOffset:o})},_fitOffset(i,e){const s=this._getStrategy().getBounds.call(this);return i<-s[0]?e?(-2*s[0]+i)/3:-s[0]:i>s[1]?e?(2*s[1]+i)/3:s[1]:i},_calcTargetOffset(i,e){let t;return e?(t=Math.ceil(Math.abs(i)),i<0&&(t=-t)):t=Math.round(i),t}});Bi({emitter:fp,events:["dxswipestart","dxswipe","dxswipeend"]});const Ft=Ne(),{abstract:yo}=P,mp=P.inherit({ctor(i,e){this._store=i,this._dirty=!!e.data,this.save();const t=this._immediate=e.immediate,s=Math.max(100,e.flushInterval||1e4);if(!t){const n=this.save.bind(this);setInterval(n,s),g.on(Ft,"beforeunload",n),Ft.cordova&&F.listen(F.getDocument(),"pause",n,!1)}},notifyChanged(){this._dirty=!0,this._immediate&&this.save()},load(){this._store._array=this._loadImpl(),this._dirty=!1},save(){this._dirty&&(this._saveImpl(this._store._array),this._dirty=!1)},_loadImpl:yo,_saveImpl:yo}),gp=mp.inherit({ctor(i,e){const{name:t}=e;if(!t)throw R.Error("E4013");this._key=`dx-data-localStore-${t}`,this.callBase(i,e)},_loadImpl(){const i=Ft.localStorage.getItem(this._key);return i?JSON.parse(i):[]},_saveImpl(i){i.length?Ft.localStorage.setItem(this._key,JSON.stringify(i)):Ft.localStorage.removeItem(this._key)}}),vp={dom:gp};tn.inherit({ctor(i){typeof i=="string"?i={name:i}:i=i||{},this.callBase(i),this._backend=new vp[i.backend||"dom"](this,i),this._backend.load()},_clearCache(){this._backend.load()},clear(){this.callBase(),this._backend.notifyChanged()},_insertImpl(i){const e=this._backend;return this.callBase(i).done(e.notifyChanged.bind(e))},_updateImpl(i,e){const t=this._backend;return this.callBase(i,e).done(t.notifyChanged.bind(t))},_removeImpl(i){const e=this._backend;return this.callBase(i).done(e.notifyChanged.bind(e))}},"local");const bp=/^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$/,Cp=/^\/Date\((-?\d+)((\+|-)?(\d+)?)\)\/$/,yp=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[-+]{1}\d{2}(:?)(\d{2})?)?$/,So="application/json;odata=verbose",ks=i=>_i(i)==="string"?i.split():i,ka=i=>/\./.test(i),Ai=(i,e,t)=>{for(i=String(i);i.length<e;)i=t?`${i}0`:`0${i}`;return i},dn=(i,e,t)=>{const s=[],n=o=>Ai(o,2);return s.push(i.getFullYear()),s.push("-"),s.push(n(i.getMonth()+1)),s.push("-"),s.push(n(i.getDate())),e&&i.getHours()+i.getMinutes()+i.getSeconds()+i.getMilliseconds()<1||(s.push("T"),s.push(n(i.getHours())),s.push(":"),s.push(n(i.getMinutes())),s.push(":"),s.push(n(i.getSeconds())),i.getMilliseconds()&&(s.push("."),s.push(Ai(i.getMilliseconds(),3))),t||s.push("Z")),s.join("")},Sp=i=>{const e=new Date(60*new Date(0).getTimezoneOffset()*1e3),t=i.replace("Z","").split("T"),s=/(\d{4})-(\d{2})-(\d{2})/.exec(t[0]),n=/(\d{2}):(\d{2}):(\d{2})\.?(\d{0,7})?/.exec(t[1]);if(e.setFullYear(Number(s[1])),e.setMonth(Number(s[2])-1),e.setDate(Number(s[3])),Array.isArray(n)&&n.length){e.setHours(Number(n[1])),e.setMinutes(Number(n[2])),e.setSeconds(Number(n[3]));let o=(n[4]||"").slice(0,3);o=Ai(o,3,!0),e.setMilliseconds(Number(o))}return e},Ip=i=>/^(?:[a-z]+:)?\/{2,2}/i.test(i),Ep=i=>{const e=i.indexOf("?");return e>-1?i.substr(0,e):i},xp=(i,e)=>{let t;const s=Ep(i).split("/"),n=e.split("/");for(s.pop();n.length;)t=n.shift(),t===".."?s.pop():s.push(t);return s.join("/")},wp=i=>{const e=[];for(const t in i)e.push(`${t}=${i[t]}`);return e.join("&")},Tp=function(i,e){var t;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e=D({async:!0,method:"get",url:"",params:{},payload:null,headers:{},timeout:3e4},e),(t=s.beforeSend)===null||t===void 0||t.call(s,e);const{async:n,timeout:o,headers:r}=e;let{url:a,method:l}=e;const{jsonp:d,withCredentials:c}=s;l=(l||"get").toLowerCase();const u=l==="get",h=u&&d,p=D({},e.params),m=u?p:(f=e.payload,JSON.stringify(f,(function(T,x){if(!(this[T]instanceof Date))return x;switch(x=dn(this[T]),i){case 2:return x.substr(0,x.length-1);case 3:case 4:return x;default:throw R.Error("E4002")}})));var f;const y=!u&&wp(p),C=!u&&So;return y&&(a+=(a.indexOf("?")>-1?"&":"?")+y),h&&(m.$format="json"),{url:a,data:m,dataType:h?"jsonp":"json",jsonp:h&&"$callback",method:l,async:n,timeout:o,headers:r,contentType:C,accepts:{json:[So,"text/plain"].join()},xhrFields:{withCredentials:c}}},cn=(i,e,t)=>{const{deserializeDates:s,fieldTypes:n,countOnly:o,isPaged:r}=t,a=new b,l=Tp(i,e,t);return Qo.sendRequest(l).always(((d,c)=>{const h=kp(d,c,{deserializeDates:s,fieldTypes:n},l),{error:p,data:m,count:f}=h;let{nextUrl:y}=h;if(p)p.message!==qi&&a.reject(p);else if(o)isFinite(f)?a.resolve(f):a.reject(R.Error("E4018"));else if(y&&!r)Ip(y)||(y=xp(l.url,y)),cn(i,{url:y},t).fail(a.reject).done((C=>a.resolve(m.concat(C))));else{const C=isFinite(f)?{totalCount:f}:void 0;a.resolve(m,C)}})),a.promise()},Dp=i=>{let e,t,s=i;if("message"in i){var n;e=((n=i.message)===null||n===void 0?void 0:n.value)||i.message}for(;(s=s.innererror||s.internalexception)&&(t=s.message,e=t??e,!(s.internalexception&&e.indexOf("inner exception")===-1)););return e},Ap=(i,e,t)=>{var s,n,o,r;if(e==="nocontent")return null;let a="Unknown error",l=i,d=200;const c={requestOptions:t};if(e!=="success"){const{status:h,responseText:p}=i;d=h,a=Ur(i,e);try{l=JSON.parse(p)}catch{}}const u=((s=l)===null||s===void 0?void 0:s.then)||((n=l)===null||n===void 0?void 0:n.error)||((o=l)===null||o===void 0?void 0:o["odata.error"])||((r=l)===null||r===void 0?void 0:r["@odata.error"]);if(u){a=Dp(u)||a,c.errorDetails=u,d===200&&(d=500);const h=Number(u.code);isFinite(h)&&h>=400&&(d=h)}return d>=400||d===0?(c.httpStatus=d,D(Error(a),c)):null},kp=(i,e,t,s)=>{const n=Ap(i,e,s);if(n)return{error:n};if(!z(i))return{data:i};const o="d"in i&&(Array.isArray(i.d)||H(i.d))?$p(i):Op(i);return $a(o,t),o},$p=i=>{let{d:e}=i;return E(e)?{data:e.results??e,nextUrl:e.__next,count:parseInt(e.__count,10)}:{error:Error("Malformed or unsupported JSON response received")}},Op=i=>({data:i.value??i,nextUrl:i["@odata.nextLink"],count:parseInt(i["@odata.count"],10)}),Ve=P.inherit({ctor(i){this._value=i},valueOf(){return this._value}}),$a=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S(i,((t,s)=>{if(s!==null&&typeof s=="object")"results"in s&&(i[t]=s.results),$a(i[t],e);else if(typeof s=="string"){const{fieldTypes:n,deserializeDates:o}=e;if((!n||n[t]!=="String")&&bp.test(s)&&(i[t]=new J(s)),o!==!1)if(Cp.exec(s)){const a=new Date(Number(RegExp.$1)+60*RegExp.$2*1e3);i[t]=new Date(a.valueOf()+60*a.getTimezoneOffset()*1e3)}else yp.test(s)&&(i[t]=new Date(Sp(i[t]).valueOf()))}}))},Rp=i=>`datetime'${dn(i,!0,!0)}'`,Bp=i=>`'${i.replace(/'/g,"''")}'`,qe=i=>i instanceof Ve?i.valueOf():i.replace(/\./g,"/"),Oa=i=>i instanceof Date?dn(i,!1,!1):i instanceof J?i.valueOf():Array.isArray(i)?`[${i.map((e=>Oa(e))).join(",")}]`:Ra(i),Ra=i=>i instanceof Date?Rp(i):i instanceof J?`guid'${i}'`:i instanceof Ve?i.valueOf():typeof i=="string"?Bp(i):String(i),$s=(i,e)=>{switch(e){case 2:case 3:return Ra(i);case 4:return Oa(i);default:throw R.Error("E4002")}},Pp=(i,e)=>{if(z(i)){const t=[];return S(i,((s,n)=>t.push(`${qe(s)}=${$s(n,e)}`))),t.join()}return $s(i,e)},Mp={String:i=>`${i}`,Int32:i=>Math.floor(i),Int64:i=>i instanceof Ve?i:new Ve(`${i}L`),Guid:i=>i instanceof J?i:new J(i),Boolean:i=>!!i,Single:i=>i instanceof Ve?i:new Ve(`${i}f`),Decimal:i=>i instanceof Ve?i:new Ve(`${i}m`)},ki=(i,e)=>{if(e===null)return null;const t=Mp[i];if(!t)throw R.Error("E4014",i);return t(e)},Ba=(i,e)=>{if(e)return i<4?qe(e.join()):Bs(e,ka,!0).join()},Pa=i=>{let e="";const t=[],s=[];return S(i,((n,o)=>{Array.isArray(o)&&[].push.apply(t,o),z(o)&&s.push(`${n}${Pa(o)}`)})),(t.length||s.length)&&(e+="(",t.length&&(e+=`$select=${Ee(t,qe).join()}`),s.length&&(t.length&&(e+=";"),e+=`$expand=${Ee(s,qe).join()}`),e+=")"),e},Lp=i=>{const e=[];return S(i,((t,s)=>e.push(`${t}${Pa(s)}`))),e.join()},Ma=(i,e,t)=>{const s=t(e,i.shift(),i);s!==!1&&Ma(i,s,t)},Io=(i,e,t)=>S(i,((s,n)=>Ma(n.split("."),e,t))),Hp=(i,e)=>{const t={};return i&&S(ks(i),(function(){t[qe(this)]=1})),e&&S(ks(e),(function(){const s=this.split(".");s.length<2||(s.pop(),t[qe(s.join("."))]=1)})),Ee(t,((s,n)=>n)).join()},Fp=(i,e)=>{const t={};if(i||e)return i&&Io(ks(i),t,((s,n,o)=>(s[n]=s[n]||{},o.length?s[n]:!1))),e&&Io(Bs(ks(e),ka),t,((s,n,o)=>o.length?s[n]=s[n]||{}:(s[n]=s[n]||[],s[n].push(n),!1))),Lp(t)},La=(i,e,t)=>i<4?Hp(e,t):Fp(e,t),Ha=(i,e)=>bn("{0}({1})",i,Ee(e||{},((t,s)=>bn("{0}={1}",s,t))).join(",")),$i=(i,e)=>{if(!i)return i;const t={};return S(i,((s,n)=>{t[s]=$s(n,e)})),t},Vp=["contains","notcontains","startswith","endswith"],Kp=(()=>{let i,e,t;const s=u=>(h,p)=>`${h} ${u} ${p}`,n=(u,h)=>(p,m)=>{const f=[u,"("];return e&&(p=p.indexOf("tolower(")===-1?`tolower(${p})`:p,m=m.toLowerCase()),h?f.push(m,",",p):f.push(p,",",m),f.push(")"),f.join("")},o={"=":s("eq"),"<>":s("ne"),">":s("gt"),">=":s("ge"),"<":s("lt"),"<=":s("le"),startswith:n("startswith"),endswith:n("endswith")},r=D({},o,{contains:n("substringof",!0),notcontains:n("not substringof",!0)}),a=D({},o,{contains:n("contains"),notcontains:n("not contains")}),l=u=>{var h;u=Nr(u);const p=u[1],m=u[0],f=t&&t[m];if(f&&(y=p,Vp.some((re=>re===y)))&&f!=="String")throw new R.Error("E4024",p,m,f);var y;const T=(i===4?a:r)[p.toLowerCase()];if(!T)throw R.Error("E4003",p);let x=u[2];return(h=t)!==null&&h!==void 0&&h[m]&&(x=ki(t[m],x)),T(qe(m),$s(x,i))},d=u=>{const h=[];let p,m;return S(u,(function(f,y){if(Array.isArray(y)){if(h.length>1&&p!==m)throw new R.Error("E4019");h.push(`(${c(y)})`),p=m,m="and"}else m=Gr(this)?"and":"or"})),h.join(` ${p} `)},c=u=>Array.isArray(u[0])?d(u):jr(u)?(h=>{const p=h[0],m=c(h[1]);if(p==="!")return`not (${m})`;throw R.Error("E4003",p)})(u):l(u);return(u,h,p,m)=>(t=p,e=m??be().oDataFilterToLower,i=h,c(u))})(),Wp=i=>{let e=[];const t=[],s=i.expand;let n,o,r,a;const l=i.version||4,d=()=>o||r!==void 0,c=h=>{for(let p=0;p<h.length;p++)if(M(h[p])||Array.isArray(h[p])&&c(h[p]))return!0;return!1},u=()=>{const h={};if(a||(e.length&&(h.$orderby=e.join(",")),o&&(h.$skip=o),r!==void 0&&(h.$top=r),h.$select=Ba(l,n)||void 0,h.$expand=La(l,s,n)||void 0),t.length){const p=t.length<2?t[0]:t,m=i==null?void 0:i.fieldTypes,f=i==null?void 0:i.filterToLower;h.$filter=Kp(p,l,m,f)}return a&&(h.$top=0),(i.requireTotalCount||a)&&(l!==4?h.$inlinecount="allpages":h.$count="true"),h};return{optimize:h=>{let p=-1;for(let f=0;f<h.length;f++)if(h[f].name==="select"){p=f;break}if(p<0||!M(h[p].args[0]))return;const m=h[1+p];!m||m.name!=="slice"||(h[1+p]=h[p],h[p]=m)},exec:h=>cn(l,{url:h,params:D(u(),i==null?void 0:i.params)},{beforeSend:i.beforeSend,jsonp:i.jsonp,withCredentials:i.withCredentials,countOnly:a,deserializeDates:i.deserializeDates,fieldTypes:i.fieldTypes,isPaged:isFinite(r)}),multiSort(h){let p;if(d())return!1;for(let m=0;m<h.length;m++){const f=h[m][0],y=!!h[m][1];let C;if(typeof f!="string")return!1;C=qe(f),y&&(C+=" desc"),p=p||[],p.push(C)}e=p},slice(h,p){if(d())return!1;o=h,r=p},filter(h){if(d()||(Array.isArray(h)||(h=[].slice.call(arguments)),c(h)))return!1;t.length&&t.push("and"),t.push(h)},select(h){if(n||M(h))return!1;Array.isArray(h)||(h=[].slice.call(arguments)),n=h},count:()=>a=!0}};oa.odata=Wp;class Fa{constructor(e){e=e||{},this._url=String(e.url).replace(/\/+$/,""),this._beforeSend=e.beforeSend,this._jsonp=e.jsonp,this._version=e.version||4,this._withCredentials=e.withCredentials,this._deserializeDates=e.deserializeDates,this._filterToLower=e.filterToLower}sendRequest(e,t,s,n){return cn(this.version,{url:e,method:t,params:s||{},payload:n},{beforeSend:this._beforeSend,jsonp:this._jsonp,withCredentials:this._withCredentials,deserializeDates:this._deserializeDates})}get version(){return this._version}get beforeSend(){return this._beforeSend}get url(){return this._url}get jsonp(){return this._jsonp}get filterToLower(){return this._filterToLower}}const zp="5d46402c-7899-4ea9-bd81-8b73c47c7683",Np=(i,e)=>({[i]:e}),Up=(i,e)=>{const t={};for(const s in i)t[s]=i[s];for(const s in e)s in t?t[s]!==e[s]&&R.log("W4001",s):t[s]=e[s];return t},Gp=Ie.inherit({ctor(i){this.callBase(i),this._requestDispatcher=new Fa(i);let e=this.key(),{fieldTypes:t}=i,{keyType:s}=i;if(s){const n=typeof s=="string";e||(e=n?zp:Object.keys(s),this._legacyAnonymousKey=e),n&&(s=Np(e,s)),t=Up(t,s)}this._fieldTypes=t||{},this.version()===2?this._updateMethod="MERGE":this._updateMethod="PATCH"},_customLoadOptions:()=>["expand","customQueryParams"],_byKeyImpl(i,e){const t={};return e&&(t.$expand=La(this.version(),e.expand,e.select)||void 0,t.$select=Ba(this.version(),e.select)||void 0),this._requestDispatcher.sendRequest(this._byKeyUrl(i),"GET",t)},createQuery(i){let e;const t={adapter:"odata",beforeSend:this._requestDispatcher.beforeSend,errorHandler:this._errorHandler,jsonp:this._requestDispatcher.jsonp,version:this._requestDispatcher.version,withCredentials:this._requestDispatcher._withCredentials,expand:i==null?void 0:i.expand,requireTotalCount:i==null?void 0:i.requireTotalCount,deserializeDates:this._requestDispatcher._deserializeDates,fieldTypes:this._fieldTypes};if(e=(i==null?void 0:i.urlOverride)??this._requestDispatcher.url,E(this._requestDispatcher.filterToLower)&&(t.filterToLower=this._requestDispatcher.filterToLower),i!=null&&i.customQueryParams){const s=$i(i==null?void 0:i.customQueryParams,this.version());this.version()===4?e=Ha(e,s):t.params=s}return je(e,t)},_insertImpl(i){this._requireKey();const e=new b;return W(this._requestDispatcher.sendRequest(this._requestDispatcher.url,"POST",null,i)).done((t=>e.resolve(t&&!be().useLegacyStoreResult?t:i,this.keyOf(t)))).fail(e.reject),e.promise()},_updateImpl(i,e){const t=new b;return W(this._requestDispatcher.sendRequest(this._byKeyUrl(i),this._updateMethod,null,e)).done((s=>be().useLegacyStoreResult?t.resolve(i,e):t.resolve(s||e,i))).fail(t.reject),t.promise()},_removeImpl(i){const e=new b;return W(this._requestDispatcher.sendRequest(this._byKeyUrl(i),"DELETE")).done((()=>e.resolve(i))).fail(e.reject),e.promise()},_convertKey(i){let e=i;const t=this._fieldTypes,s=this.key()||this._legacyAnonymousKey;if(Array.isArray(s)){e={};for(let n=0;n<s.length;n++){const o=s[n];e[o]=ki(t[o],i[o])}}else t[s]&&(e=ki(t[s],i));return e},_byKeyUrl(i){const e=this._requestDispatcher.url,t=this._convertKey(i);return`${e}(${encodeURIComponent(Pp(t,this.version()))})`},version(){return this._requestDispatcher.version}},"odata");P.inherit({ctor(i){this._requestDispatcher=new Fa(i),this._errorHandler=i.errorHandler,S(i.entities||[],((e,t)=>{this[e]=new Gp(D({},i,{url:`${this._requestDispatcher.url}/${encodeURIComponent(t.name||e)}`},t))}))},get(i,e){return this.invoke(i,e,"GET")},invoke(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"POST";t=t.toLowerCase();const s=new b;let n=`${this._requestDispatcher.url}/${encodeURIComponent(i)}`,o;return this.version()===4&&(t==="get"?(n=Ha(n,$i(e,this.version())),e=null):t==="post"&&(o=e,e=null)),W(this._requestDispatcher.sendRequest(n,t,$i(e,this.version()),o)).done((r=>{z(r)&&i in r&&(r=r[i]),s.resolve(r)})).fail(this._errorHandler).fail(Ys).fail(s.reject),s.promise()},objectLink(i,e){const t=this[i];if(!t)throw R.Error("E4015",i);return E(e)?{__metadata:{uri:t._byKeyUrl(e)}}:null},version(){return this._requestDispatcher.version}});function Va(i){if(!Oh(i))return i;let e=!1;return{store:{type:"array",data:i.reduce(((s,n)=>{var o;const r=((o=n.items)===null||o===void 0?void 0:o.map((a=>{let l=a;H(l)||(l={text:l},e=!0);const d=l;return"key"in d||(d.key=n.key),d})))??[];return s.concat(r)}),[])},group:{selector:"key",keepInitialKeyOrder:!0},searchExpr:e?"text":void 0}}const Ka="__dx_key__";class jp extends ma{_getDefaultOptions(){return v({},super._getDefaultOptions(),{repaintChangesOnly:!1})}reload(){}_init(){super._init(),this._refreshItemsCache()}_findItemElementByKey(e){let t=_();const s=this.key();return this.itemElements().each(((n,o)=>{const r=_(o),a=this._getItemData(r);return(s?Xs(s,this.keyOf(a),e):this._isItemEquals(a,e))?(t=r,!1):!0})),t}_dataSourceChangedHandler(e,t){t!=null&&t.changes?this._modifyByChanges(t.changes):(super._dataSourceChangedHandler(e,t),this._refreshItemsCache())}_isItemEquals(e,t){let s=e;e&&typeof e=="object"&&e.__dx_key__&&(s=e.data);try{return JSON.stringify(s)===JSON.stringify(t)}catch{return s===t}}_isItemStrictEquals(e,t){return this._isItemEquals(e,t)}_shouldAddNewGroup(e,t){let s=!1;const{grouped:n}=this.option();return n&&(e.length||(s=!0),S(e,((o,r)=>{r.type==="insert"&&(s=!0,S(t,((a,l)=>r.data.key!==void 0&&r.data.key===l.key?(s=!1,!1):!0)))}))),s}_partialRefresh(){const{repaintChangesOnly:e}=this.option();if(e){const t=n=>n&&n.__dx_key__!==void 0?n.__dx_key__:this.keyOf(n),s=su({oldItems:this._itemsCache,newItems:this._editStrategy.itemsGetter(),getKey:t,isItemEquals:this._isItemStrictEquals.bind(this),detectReorders:!0});if(s&&this._itemsCache.length&&!this._shouldAddNewGroup(s,this._itemsCache))return this._modifyByChanges(s,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1}_refreshItemsCache(){const{repaintChangesOnly:e}=this.option();if(e){const t=this._editStrategy.itemsGetter();try{this._itemsCache=D(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map(((s,n)=>({[Ka]:t[n],data:s}))))}catch{this._itemsCache=D([],t)}}}_updateByChange(e,t,s,n){if(n)this._renderItem(s.index,s.data,null,this._findItemElementByKey(s.key));else{const o=t[ut(e,t,s.key)];o&&Xi(e,t,s.key,s.data).done((()=>{this._renderItem(t.indexOf(o),o,null,this._findItemElementByKey(s.key))}))}}_insertByChange(e,t,s,n){W(n??Qi(e,t,s.data,s.index)).done((()=>{this._beforeItemElementInserted(s),this._renderItem(s.index??t.length,s.data),this._afterItemElementInserted()}))}_updateSelectionAfterRemoveByChange(e){const{selectedIndex:t,selectedItems:s=[]}=this.option(),n=t;n>e?this.option("selectedIndex",n-1):n===e&&s.length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()}_beforeItemElementInserted(e){const{selectedIndex:t}=this.option(),s=t;e.index<=s&&this.option("selectedIndex",s+1)}_afterItemElementInserted(){this._renderEmptyMessage()}_removeByChange(e,t,s,n){const o=n?s.index:ut(e,t,s.key);if(n?s.oldItem:t[o]){const a=this._findItemElementByKey(s.key),l=this._extendActionArgs(a);this._waitDeletingPrepare(a).done((()=>{n?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(a,l),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(a,l))}))}}_modifyByChanges(e,t){const s=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,r=o.paginate(),a=o.group();let l=e;(r||a)&&(l=e.filter((d=>d.type!=="insert"||d.index!==void 0))),l.forEach((d=>this[`_${d.type}ByChange`](n,s,d,t))),this._renderedItemsCount=s.length,this._refreshItemsCache(),this._fireContentReadyAction()}_appendItemToContainer(e,t,s){const n=e.children(this._itemSelector())[s];F.insertElement(e[0],t[0],n)}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"items":{this._partialRefresh()||super._optionChanged(e);break}case"dataSource":{const{repaintChangesOnly:n}=this.option();(!n||!s)&&this.option("items",[]),super._optionChanged(e);break}case"repaintChangesOnly":break;default:super._optionChanged(e)}}}class qp extends As{_renderWatchers(){super._renderWatchers(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))}_renderBadge(e){if(this._$element.children(".dx-list-item-badge-container").remove(),!e)return;const t=_("<div>").addClass("dx-list-item-badge-container").append(_("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(e)),s=this._$element.children(".dx-list-item-chevron-container").first();s.length>0?t.insertBefore(s):t.appendTo(this._$element)}_renderShowChevron(e){if(this._$element.children(".dx-list-item-chevron-container").remove(),!e)return;const t=_("<div>").addClass("dx-list-item-chevron-container"),s=_("<div>").addClass("dx-list-item-chevron");t.append(s).appendTo(this._$element)}}class Yp extends an{_init(e){super._init(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$refreshingText=e._$refreshingText,this._$scrollViewContent=_(e.content()),this._$container=_(e.container()),this._initCallbacks()}_initCallbacks(){this.pullDownCallbacks=he(),this.releaseCallbacks=he(),this.reachBottomCallbacks=he()}render(){super.render(),this._renderPullDown(),this._releaseState()}_renderPullDown(){const e=_("<div>").addClass("dx-scrollview-pull-down-image"),t=_("<div>").addClass("dx-scrollview-pull-down-indicator"),s=_("<div>")[0],n=new _t(s).$element();this._$pullDownText=_("<div>").addClass("dx-scrollview-pull-down-text");const{pullingDownText:o="",pulledDownText:r="",refreshingText:a=""}=this.option();this._$pullingDownText=_("<div>").text(o).appendTo(this._$pullDownText),this._$pulledDownText=_("<div>").text(r).appendTo(this._$pullDownText),this._$refreshingText=_("<div>").text(a).appendTo(this._$pullDownText),this._$pullDown.empty().append(e).append(t.append(n)).append(this._$pullDownText)}_releaseState(){this._state=0,this._refreshPullDownText()}_refreshPullDownText(){const e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];S(e,((t,s)=>{const n=this._state===s.visibleState?"addClass":"removeClass";s.element[n]("dx-scrollview-pull-down-text-visible")}))}update(){super.update(),this._setTopPocketOffset()}_updateDimensions(){super._updateDimensions(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)}_allowedDirections(){const e=super._allowedDirections();return e.vertical=e.vertical||this._pullDownEnabled,e}_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})}handleEnd(){super.handleEnd(),this._complete()}handleStop(){super.handleStop(),this._complete()}_complete(){this._state===1&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout((()=>{this._pullDownRefreshing()}),400))}_setPullDownOffset(e){we(this._$topPocket,{top:e}),we(this._$scrollViewContent,{top:e})}handleScroll(e){if(super.handleScroll(e),this._state===2)return;const t=this.location().top,s=(this._location||0)-t;this._location=t,this._isPullDown()?this._pullDownReady():s>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){return Math.round(this._bottomBoundary+Math.floor(this._location))<=1}_reachBottom(){this._state!==3&&(this._state=3,this.reachBottomCallbacks.fire())}_pullDownReady(){this._state!==1&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())}_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())}_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())}pullDownEnable(e){e&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=e}reachBottomEnable(e){this._reachBottomEnabled=e}pendingRelease(){this._state=1}release(){const e=b();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===3&&(this._state=0),this._releaseTimeout=setTimeout((()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),400),e.promise()}dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),super.dispose()}}class Xp extends an{_init(e){super._init(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$scrollViewContent=_(e.content()),this._$container=_(e.container()),this._initCallbacks(),this._location=0}_initCallbacks(){this.pullDownCallbacks=he(),this.releaseCallbacks=he(),this.reachBottomCallbacks=he()}render(){super.render(),this._renderPullDown(),this._releaseState()}_renderPullDown(){const e=_("<div>").addClass("dx-scrollview-pull-down-indicator"),t=_("<div>")[0],s=new _t(t).$element();this._$icon=_("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(e.append(s))}_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()}_releasePullDown(){this._$pullDown.css({opacity:0})}_updateDimensions(){super._updateDimensions(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)}_allowedDirections(){const e=super._allowedDirections();return e.vertical=e.vertical||this._pullDownEnabled,e}handleInit(e){super.handleInit(e),this._state===0&&this._location===0&&(this._startClientY=X(e.originalEvent).y,this._state=4)}handleMove(e){super.handleMove(e),this._deltaY=X(e.originalEvent).y-this._startClientY,this._state===4&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),this._state===5&&(e.preventDefault(),this._movePullDown())}_movePullDown(){const e=this._getPullDownHeight(),t=Math.min(3*e,this._deltaY+this._getPullDownStartPosition()),s=180*t/(3*e);this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",t<e),we(this._$pullDown,{top:t}),this._$icon.css({transform:`rotate(${s}deg)`})}_isPullDown(){return this._pullDownEnabled&&this._state===5&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()}_getPullDownHeight(){return Math.round(.05*j(this._$element))}_getPullDownStartPosition(){return-Math.round(1.5*j(this._$pullDown))}handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()}handleStop(){this._complete()}_complete(){(this._state===4||this._state===5)&&this._releaseState()}handleScroll(e){if(super.handleScroll(e),this._state===2)return;const t=this.location().top,s=this._location-t;this._location=t,s>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){return Math.round(this._bottomBoundary+Math.floor(this._location))<=1}_reachBottom(){this.reachBottomCallbacks.fire()}_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())}_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()}_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()}_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),we(this._$pullDown,{top:this._getPullDownHeight()})}pullDownEnable(e){this._$topPocket.toggle(e),this._pullDownEnabled=e}reachBottomEnable(e){this._reachBottomEnabled=e}pendingRelease(){this._state=1}release(){const e=b();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout((()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),800),e.promise()}dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),super.dispose()}}class Qp extends Ea{constructor(e){super(e),this._topPocketSize=0,this._bottomPocketSize=0,this._initCallbacks(),this._releaseState()}_releaseState(){this._state=0,this._refreshPullDownText()}_refreshPullDownText(){const e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];S(e,((t,s)=>{const n=this._state===s.visibleState?"addClass":"removeClass";s.element[n]("dx-scrollview-pull-down-text-visible")}))}_initCallbacks(){this.pullDownCallbacks=he(),this.releaseCallbacks=he(),this.reachBottomCallbacks=he()}_updateBounds(){if(this._direction!=="horizontal"){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const t=this._$container.get(0),s=this._$content.get(0);this._bottomBoundary=Math.max(s.clientHeight-this._bottomPocketSize-t.clientHeight,0)}super._updateBounds()}_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})}_moveContent(){super._moveContent(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==0&&this._stateReleased()}_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)}_isPullDown(){return this._pullDownEnabled&&this._location>=0}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){const e=this._$container.get(0);return Math.round(this._bottomBoundary-Math.ceil(e.scrollTop))<=1}_scrollComplete(){this._inBounds()&&this._state===1?this._pullDownRefreshing():this._inBounds()&&this._state===3?this._reachBottomLoading():super._scrollComplete()}_reachBottomReady(){this._state!==3&&(this._state=3,this._minOffset=this._getMinOffset())}_getMaxOffset(){return-this._topPocketSize}_getMinOffset(){return Math.min(super._getMinOffset(),-this._topPocketSize)}_reachBottomLoading(){this.reachBottomCallbacks.fire()}_pullDownReady(){this._state!==1&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())}_stateReleased(){this._state!==0&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())}_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())}_releaseHandler(){var e;return this._state===0&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=cl(this._release.bind(this)),(e=this._releaseTask)===null||e===void 0?void 0:e.promise}_release(){this._stateReleased(),this._scrollComplete()}_reachBottomEnablingHandler(e){this._reachBottomEnabled!==e&&(this._reachBottomEnabled=e,this._updateBounds())}_pullDownEnablingHandler(e){this._pullDownEnabled!==e&&(this._pullDownEnabled=e,this._considerTopPocketChange(),this._updateHandler())}_considerTopPocketChange(){this._location-=K(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()}_pendingReleaseHandler(){this._state=1}dispose(){this._releaseTask&&this._releaseTask.abort(),super.dispose()}}class Jp extends xa{_init(e){super._init(e),this._$pullDown=e._$pullDown,this._$topPocket=e._$topPocket,this._$bottomPocket=e._$bottomPocket,this._initCallbacks()}_initCallbacks(){this.pullDownCallbacks=he(),this.releaseCallbacks=he(),this.reachBottomCallbacks=he()}render(){this._renderPullDown(),super.render()}_renderPullDown(){const e=_("<div>").addClass("dx-scrollview-pull-down-image"),t=_("<div>").addClass("dx-scrollview-pull-down-indicator"),s=_("<div>")[0],n=new _t(s).$element();this._$pullDownText=_("<div>").addClass("dx-scrollview-pull-down-text");const{pullingDownText:o="",pulledDownText:r="",refreshingText:a=""}=this.option();this._$pullingDownText=_("<div>").text(o).appendTo(this._$pullDownText),this._$pulledDownText=_("<div>").text(r).appendTo(this._$pullDownText),this._$refreshingText=_("<div>").text(a).appendTo(this._$pullDownText),this._$pullDown.empty().append(e).append(t.append(n)).append(this._$pullDownText)}pullDownEnable(e){this._eventHandler("pullDownEnabling",e)}reachBottomEnable(e){this._eventHandler("reachBottomEnabling",e)}_createScroller(e){const t=new Qp(this._scrollerOptions(e));this._scrollers[e]=t,t.pullDownCallbacks.add((()=>{this.pullDownCallbacks.fire()})),t.releaseCallbacks.add((()=>{this.releaseCallbacks.fire()})),t.reachBottomCallbacks.add((()=>{this.reachBottomCallbacks.fire()}))}_scrollerOptions(e){return v({},super._scrollerOptions(e),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})}pendingRelease(){this._eventHandler("pendingRelease")}release(){return this._eventHandler("release").done(this._updateAction)}location(){const e=super.location();return e.top+=K(this._$topPocket),e}isBottomReached(){return this._scrollers.vertical.isBottomReached()}dispose(){S(this._scrollers,(function(){this.dispose()})),super.dispose()}}const Zp="dx-scrollview-loadpanel",e_={pullDown:Yp,swipeDown:Xp,simulated:Jp},Wa=!de();class za extends ln{finishLoading(){}release(){}refresh(){}scrollOffset(){return{top:0,left:0}}isBottomReached(){return!1}_optionChanged(e){const{name:t}=e;if(t!=="onUpdated")return super._optionChanged(e)}}class Na extends ln{_getDefaultOptions(){return v({},super._getDefaultOptions(),{pullingDownText:$.format("dxScrollView-pullingDownText"),pulledDownText:$.format("dxScrollView-pulledDownText"),refreshingText:$.format("dxScrollView-refreshingText"),reachBottomText:$.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(){return O.real().platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:()=>wt(Q()),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])}_init(){super._init(),this._loadingIndicatorEnabled=!0}_initScrollableMarkup(){super._initScrollableMarkup(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()}_initContent(){const e=_("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(e)}_initTopPocket(){this._$topPocket=_("<div>").addClass("dx-scrollview-top-pocket"),this._$pullDown=_("<div>").addClass("dx-scrollview-pull-down"),this._$topPocket.append(this._$pullDown),this._$content.prepend(this._$topPocket)}_initBottomPocket(){this._$bottomPocket=_("<div>").addClass("dx-scrollview-bottom-pocket"),this._$reachBottom=_("<div>").addClass("dx-scrollview-scrollbottom");const e=_("<div>").addClass("dx-scrollview-scrollbottom-indicator"),t=_("<div>")[0],s=new _t(t).$element();this._$reachBottomText=_("<div>").addClass("dx-scrollview-scrollbottom-text"),this._updateReachBottomText(),this._$reachBottom.append(e.append(s)).append(this._$reachBottomText),this._$bottomPocket.append(this._$reachBottom),this._$content.append(this._$bottomPocket)}_initLoadPanel(){const e=_("<div>").addClass(Zp).appendTo(this.$element()),{refreshingText:t}=this.option();this._loadPanel=this._createComponent(e,wa,{shading:!1,delay:400,message:t,position:{of:this.$element()}})}_updateReachBottomText(){const{reachBottomText:e}=this.option();this._$reachBottomText.text(e)}_createStrategy(){const{useNative:e,refreshStrategy:t}=this.option(),n=e_[(e?t:"simulated")??"pullDown"];this._strategy=new n(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))}_createActions(){super._createActions(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()}_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))}on(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const o=super.on.apply(this,[e,...s]);return(e==="pullDown"||e==="reachBottom")&&this._tryRefreshPocketState(),o}_pullDownEnable(e){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(e),this._strategy.pullDownEnable(e),this._pullDownEnabled=e)}_reachBottomEnable(e){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(e),this._strategy.reachBottomEnable(e),this._reachBottomEnabled=e)}_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()}_loadingIndicator(e){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=e}_pullDownLoading(){var e;this.startLoading(),(e=this._pullDownAction)===null||e===void 0||e.call(this)}_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()}_reachBottomLoading(){var e;this.startLoading(),(e=this._reachBottomAction)===null||e===void 0||e.call(this)}_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)}_optionChanged(e){switch(e.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:super._optionChanged(e)}}content(){return B(this._$content.children().eq(1))}release(e){return e!==void 0&&this.toggleLoading(!e),this._strategy.release()}toggleLoading(e){this._reachBottomEnable(e)}refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())}startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()}finishLoading(){this._loadPanel.hide(),this._unlock()}isBottomReached(){return this._strategy.isBottomReached()}_dispose(){this._strategy.dispose(),super._dispose(),this._loadPanel&&this._loadPanel.$element().remove()}}oe("dxScrollView",Wa?za:Na);const t_=Wa?za:Na;function s_(i){return i?Number(i.replace("px","")):0}function i_(i){var e,t;return i&&de()?(e=(t=Ne()).getComputedStyle)===null||e===void 0?void 0:e.call(t,i):null}function n_(i,e){const t=i_(i);return t?s_(t[`margin${zt(e)}`]):0}const o_="dx-list-select-checkbox",r_="dx-list-select-radiobutton";function a_(){return t_}class Ua extends jp{_supportedKeys(){return v({},super._supportedKeys(),{leftArrow:w,rightArrow:w,pageUp(e){this._moveFocusPerPage(e,"prev")},pageDown(e){this._moveFocusPerPage(e,"next")}})}_moveFocusPerPage(e,t){if(this._isLastItemFocused(t))return;e.preventDefault(),e.stopPropagation();let s=this._getEdgeVisibleItem(t);const{focusedElement:n}=this.option();s.is(_(n))&&(this.scrollTo(this._getItemLocation(s,t)),s=this._getEdgeVisibleItem(t)),this.option("focusedElement",B(s)),this.scrollToItem(s)}_isLastItemFocused(e){const t=e==="prev"?this._itemElements().first():this._itemElements().last(),{focusedElement:s}=this.option();return t.is(_(s))}_getNextItem(e,t){const s=this._getAvailableItems(),n=s.index(e);return t==="prev"?_(s[n-1]):_(s[n+1])}_getEdgeVisibleItem(e){const t=this.scrollTop(),s=K(this.$element()),{focusedElement:n}=this.option();let o=_(n),r=!0;if(!o.length)return _();for(;r;){var a;const l=this._getNextItem(o,e);if(!l.length)break;const d=(((a=l.position())===null||a===void 0?void 0:a.top)??0)+j(l)/2;r=d<s+t&&d>t,r&&(o=l)}return o}_getItemLocation(e,t){return t==="prev"?e.position().top-K(this.$element())+j(e):e.position().top}_getDefaultOptions(){return v({},super._getDefaultOptions(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:$.format("dxList-pullingDownText"),pulledDownText:$.format("dxList-pulledDownText"),refreshingText:$.format("dxList-refreshingText"),pageLoadingText:$.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:$.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:e=>e==null?void 0:e.showChevron,badgeExpr:e=>e==null?void 0:e.badge,_onItemsRendered:()=>{}})}_defaultOptionsRules(){const e=Q();return super._defaultOptionsRules().concat(Ca(),[{device:()=>!dt.nativeScrolling,options:{useNativeScrolling:!1}},{device:t=>!dt.nativeScrolling&&!O.isSimulator()&&O.real().deviceType==="desktop"&&t.platform==="generic",options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>O.real().deviceType==="desktop"&&!O.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ze(e),options:{useInkRipple:!0}},{device:()=>wt(e),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])}_visibilityChanged(e){e&&this._updateLoadingState(!0)}_itemClass(){return"dx-list-item"}_itemDataKey(){return"dxListItemData"}_itemContainer(){return this._$container}_getItemsContainer(){return this._$listContainer}_cleanItemContainer(){super._cleanItemContainer();const e=this._getItemsContainer();_(e).empty(),e.appendTo(this._$container)}_saveSelectionChangeEvent(e){this._selectionChangeEventInstance=e}_getSelectionChangeEvent(){return this._selectionChangeEventInstance}_refreshItemElements(){const{grouped:e}=this.option(),t=this._getItemsContainer();e?this._itemElementsCache=t.children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=t.children(this._itemSelector())}_getItemAndHeaderElements(){const t=`${`> .dx-list-group-body > ${this._itemSelector()}`}, > .dx-list-group-header`;return this._getItemsContainer().children(".dx-list-group").find(t)}_getAvailableItems(e){const{collapsibleGroups:t}=this.option();return t?this._getItemAndHeaderElements().filter(((n,o)=>_(o).hasClass("dx-list-group-header")?!0:!_(o).closest(".dx-list-group").hasClass("dx-list-group-collapsed"))):super._getAvailableItems(e)}_modifyByChanges(e,t){super._modifyByChanges(e,t),this._refreshItemElements(),this._updateLoadingState(!0)}reorderItem(e,t){return super.reorderItem(e,t).done((()=>{this._refreshItemElements()}))}deleteItem(e){return super.deleteItem(e).done((()=>{this._refreshItemElements()}))}_itemElements(){return this._itemElementsCache}_itemSelectHandler(e){const{selectionMode:t}=this.option();if(t==="single"&&this.isItemSelected(e.currentTarget))return;const n=_(e.target).closest(`.${o_}`).length||_(e.target).closest(`.${r_}`).length;return n&&this.option("focusedElement",B(_(e.currentTarget))),super._itemSelectHandler(e,n)}_allowDynamicItemsAppend(){return!0}_updateActiveStateUnit(){const{collapsibleGroups:e}=this.option(),t=[".dx-list-item",".dx-list-select-all"];e&&t.push(".dx-list-group-header"),this._activeStateUnit=t.join(",")}_init(){super._init(),this._updateActiveStateUnit(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=_("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()}_scrollBottomMode(){const{pageLoadMode:e}=this.option();return e==="scrollBottom"}_nextButtonMode(){const{pageLoadMode:e}=this.option();return e==="nextButton"}_dataSourceOptions(){const e=this._scrollBottomMode(),t=this._nextButtonMode();return v({},super._dataSourceOptions(),{paginate:ge(e||t,!0)})}_getSpecificDataSourceOption(){const{grouped:e}=this.option(),t=this.option("dataSource");return t&&e?Va(t):t}_getGroupContainerByIndex(e){return this._getItemsContainer().find(".dx-list-group").eq(e).find(".dx-list-group-body")}_dataSourceFromUrlLoadMode(){return"raw"}_initScrollView(){const{height:e,width:t,disabled:s,showScrollbar:n,useNativeScrolling:o,bounceEnabled:r,scrollByContent:a,scrollByThumb:l,pullingDownText:d,pulledDownText:c,refreshingText:u,pageLoadingText:h,scrollingEnabled:p,pullRefreshEnabled:m}=this.option(),f=p&&m,y=p&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),a_(),{height:e,width:t,disabled:s||!p,onScroll:T=>{this._scrollHandler(T)},onPullDown:f?this._pullDownHandler.bind(this):null,onReachBottom:y?this._scrollBottomHandler.bind(this):null,showScrollbar:n,useNative:o,bounceEnabled:r,scrollByContent:a,scrollByThumb:l,pullingDownText:d,pulledDownText:c,refreshingText:u,reachBottomText:h,useKeyboard:!1}),this._$container=_(this._scrollView.content()),this._$listContainer.appendTo(this._$container);const{wrapItemText:C}=this.option();this._toggleWrapItemText(C),this._createScrollViewActions()}_toggleWrapItemText(e){this._$listContainer.toggleClass("dx-wrap-item-text",e)}_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")}_scrollHandler(e){var t;(t=this._scrollAction)===null||t===void 0||t.call(this,e)}_initTemplates(){this._templateManager.addDefaultTemplates({group:new sn(((e,t)=>{z(t)?t.key&&e.text(t.key):e.text(String(t))}),["key"],this.option("integrationOptions.watchMethod"))}),super._initTemplates()}_prepareDefaultItemTemplate(e,t){if(super._prepareDefaultItemTemplate(e,t),e.icon){const s=Gl(e.icon);if(!s)return;const n=s.addClass("dx-list-item-icon"),o=_("<div>").addClass("dx-list-item-icon-container");o.append(n),t.prepend(o)}}_getBindableFields(){return["text","html","icon"]}_updateLoadingState(e){const t=this._dataController,s=this._scrollBottomMode(),n=t.isLoading(),o=this._isLastPage(),r=s&&!!e&&!n&&!o;this._shouldContinueLoading(r)?this._infiniteDataLoading():(this._scrollView.release(!r&&!t.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))}_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()}_isDataSourceFirstLoadCompleted(e){return E(e)&&(this._isFirstLoadCompleted=e),this._isFirstLoadCompleted}_dataSourceLoadingChangedHandler(e){if(this._loadIndicationSuppressed())return;const{indicateLoading:t}=this.option();if(e&&t)this._showLoadingIndicatorTimer=setTimeout((()=>{if(!!this._itemElements().length||this._isDataSourceFirstLoadCompleted()){var r;(r=this._scrollView)===null||r===void 0||r.startLoading()}}));else{var s;clearTimeout(this._showLoadingIndicatorTimer),(s=this._scrollView)===null||s===void 0||s.finishLoading()}e||this._isDataSourceFirstLoadCompleted(!1)}_dataSourceChangedHandler(e,t){if(!this._shouldAppendItems()&&de()){var s;(s=this._scrollView)===null||s===void 0||s.scrollTo(0)}super._dataSourceChangedHandler(e,t),this._isDataSourceFirstLoadCompleted(!0)}_refreshContent(){this._prepareContent(),this._fireContentReadyAction()}_hideLoadingIfLoadIndicationOff(){const{indicateLoading:e}=this.option();e||this._dataSourceLoadingChangedHandler(!1)}_loadIndicationSuppressed(e){return arguments.length&&(this._isLoadIndicationSuppressed=e),this._isLoadIndicationSuppressed}_scrollViewIsFull(){const e=this._scrollView;return!e||K(e.content())>K(e.container())}_pullDownHandler(){var e;const t={component:this,element:this.element()};(e=this._pullRefreshAction)===null||e===void 0||e.call(this,t);const s=this._dataController;s.getDataSource()&&!s.isLoading()?(this._clearSelectedItems(),s.pageIndex(0),s.reload()):this._updateLoadingState()}_shouldContinueLoading(e){var t;if(!e)return!1;const s=this._scrollView.content(),n=this._scrollView.container(),o=K(s),r=K(n),a=((t=this._scrollView.scrollOffset())===null||t===void 0?void 0:t.top)??0,l=o-r<a,d=this._scrollViewIsFull();return e&&!d||l}_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout((()=>{this._loadNextPage()})))}_scrollBottomHandler(e){var t;(t=this._pageLoadingAction)===null||t===void 0||t.call(this,e),!this._dataController.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()}_renderItems(e){const{grouped:t}=this.option();t?(S(e,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),ze(Q())&&this.attachGroupHeaderInkRippleEvents()):super._renderItems(e),this._refreshItemElements(),this._updateLoadingState(!0)}_postProcessRenderItems(){const{_onItemsRendered:e}=this.option();e==null||e()}_attachGroupCollapseEvent(){const{collapsibleGroups:e}=this.option(),t=I(xe,this.NAME),s=this.$element();s.toggleClass("dx-list-collapsible-groups",e),g.off(s,t,".dx-list-group-header"),e&&g.on(s,t,".dx-list-group-header",(n=>{this._processGroupCollapse(n)}))}_processGroupCollapse(e){this._createAction((s=>{var n;const{focusStateEnabled:o}=this.option(),r=_((n=s.event)===null||n===void 0?void 0:n.currentTarget).parent();if(this._collapseGroupHandler(r),o){const a=B(r.find(".dx-list-group-header"));this.option({focusedElement:a})}}),{validatingTargetName:"element"})({event:e})}_enterKeyHandler(e){const{collapsibleGroups:t,focusedElement:s}=this.option(),n=_(s).hasClass("dx-list-group-header");if(t&&n){const o=this._getHandlerExtendedParams(e,_(s));this._processGroupCollapse(o);return}super._enterKeyHandler(e)}_collapseGroupHandler(e,t){const s=b(),n=e.children(".dx-list-group-header"),o=e.hasClass("dx-list-group-collapsed");if(this._updateGroupHeaderAriaExpanded(n,o),o===t)return s.resolve();const r=e.children(".dx-list-group-body"),a=j(r);let l=0;o&&(Fl(r,"auto"),l=j(r)),e.toggleClass("dx-list-group-collapsed",t);const d=r.get(0);return ps.isAnimating(d)&&ps.stop(d,!1),ps.animate(d,{type:"custom",from:{height:a},to:{height:l},duration:200,complete:()=>{this.updateDimensions(),this._updateLoadingState(!0),s.resolve()}}),s.promise()}_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())}_initMarkup(){this._itemElementsCache=_(),this.$element().addClass("dx-list"),super._initMarkup();const{useInkRipple:e}=this.option();e&&this._renderInkRipple();const t={role:"group",roledescription:$.format("dxList-ariaRoleDescription")};this.setAria(t,this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()}_setListAria(){const{items:e,allowItemDeleting:t,collapsibleGroups:s}=this.option(),n=t?$.format("dxList-listAriaLabel-deletable"):$.format("dxList-listAriaLabel"),o=(e==null?void 0:e.length)&&!s,r={role:o?"listbox":void 0,label:o?n:void 0};this.setAria(r,this._$listContainer)}_focusTarget(){return this._itemContainer()}_renderInkRipple(){this._inkRipple=qc()}_toggleActiveState(e,t,s){if(super._toggleActiveState(e,t),!this._inkRipple)return;const n={element:e,event:s};t?ze(Q())?this._inkRippleTimer=setTimeout((()=>{var o;(o=this._inkRipple)===null||o===void 0||o.showWave(n)}),35):this._inkRipple.showWave(n):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(n))}_postprocessRenderItem(e){this._refreshItemElements(),super._postprocessRenderItem(e);const{_swipeEnabled:t}=this.option();t&&this._attachSwipeEvent(_(e.itemElement))}_getElementClassToSkipRefreshId(){return"dx-list-group-header"}_attachSwipeEvent(e){const t=I(Aa,this.NAME);g.on(e,t,(s=>{this._itemSwipeEndHandler(s)}))}_itemSwipeEndHandler(e){this._itemDXEventHandler(e,"onItemSwipe",{direction:e.offset<0?"left":"right"})}_nextButtonHandler(){var e;const t={component:this,element:this.element()};(e=this._pageLoadingAction)===null||e===void 0||e.call(this,t);const s=this._dataController;if(s.getDataSource()&&!s.isLoading()){var n;this._scrollView.toggleLoading(!0),(n=this._$nextButton)===null||n===void 0||n.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage()}}_setGroupAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?void 0:"group",labelledby:s?void 0:t};this.setAria(n,e)}_updateGroupHeaderAriaExpanded(e,t){this.setAria({expanded:t},e)}_setGroupHeaderAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?"button":void 0,expanded:s?!0:void 0,controls:s?t:void 0};this.setAria(n,e)}_setGroupBodyAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?"listbox":void 0,labelledby:s?t:void 0};this.setAria(n,e)}_renderGroup(e,t){var s;const n=_("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),o=`dx-${new J().toString()}`,r=_("<div>").addClass("dx-list-group-header").attr("id",o).appendTo(n),{groupTemplate:a}=this.option(),l=this._getTemplate(t.template??a,t,e,r),d={index:e,itemData:t,container:B(r)};this._createItemByTemplate(l,d),_("<div>").addClass("dx-list-group-header-indicator").prependTo(r);const c=`dx-${new J().toString()}`,u=_("<div>").addClass("dx-list-group-body").attr("id",c).appendTo(n),h=le("items");S(h(t)||[],((p,m)=>{this._renderItem({group:e,item:p},m,u)})),(s=this._groupRenderAction)===null||s===void 0||s.call(this,{groupElement:B(n),groupIndex:e,groupData:t}),this._setGroupAria(n,o),this._setGroupHeaderAria(r,c),this._setGroupBodyAria(u,o)}downInkRippleHandler(e){this._toggleActiveState(_(e.currentTarget),!0,e)}upInkRippleHandler(e){this._toggleActiveState(_(e.currentTarget),!1,e)}attachGroupHeaderInkRippleEvents(){const e=".dx-list-group-header",t=this.$element();this._downInkRippleHandler=this._downInkRippleHandler??this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler??this.upInkRippleHandler.bind(this),g.off(t,ce.down,e,this._downInkRippleHandler),g.on(t,ce.down,e,this._downInkRippleHandler),g.off(t,[ce.up,ce.out].join(" "),e,this._upInkRippleHandler),g.on(t,[ce.up,ce.out].join(" "),e,this._upInkRippleHandler)}_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")}_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),super._clean()}_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),super._dispose()}_toggleDisabledState(e){super._toggleDisabledState(e);const{scrollingEnabled:t}=this.option();this._scrollView.option("disabled",e||!t)}_toggleNextButton(e){const t=this._dataController,s=this._getNextButton();this.$element().toggleClass("dx-has-next",e),e&&t.isLoaded()&&s.appendTo(this._itemContainer()),e||s.detach()}_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton}_createNextButton(){const e=_("<div>").addClass("dx-list-next-button"),t=_("<div>").appendTo(e),{nextButtonText:s}=this.option();return this._createComponent(t,ht,{text:s,onClick:()=>{this._nextButtonHandler()},type:wt(Q())?"default":void 0,integrationOptions:{}}),e}_moveFocus(e){super._moveFocus(e);const{focusedElement:t}=this.option();t&&this.scrollToItem(t)}_refresh(){if(!de())super._refresh();else{const e=this._scrollView.scrollTop();super._refresh(),e&&this._scrollView.scrollTo(e)}}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"pageLoadMode":this._toggleNextButton(!!s),this._initScrollView();break;case"dataSource":super._optionChanged(e),this._initScrollView(),this._updateLoadingState(!0),this._isDataSourceFirstLoadCompleted(!1);break;case"items":super._optionChanged(e),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"collapsibleGroups":this._updateActiveStateUnit(),this._invalidate();break;case"wrapItemText":this._toggleWrapItemText(s);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":super._optionChanged(e),this._scrollView.option(t,s),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":super._optionChanged(e),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),super._optionChanged(e);break;case"_swipeEnabled":case"_onItemsRendered":case"selectByClick":break;default:super._optionChanged(e)}}_extendActionArgs(e){const{grouped:t}=this.option();if(!t)return super._extendActionArgs(e);const s=e.closest(".dx-list-group"),n=s.find(".dx-list-item");return v({},super._extendActionArgs(e),{itemIndex:{group:s.index(),item:n.index(e)}})}expandGroup(e){const t=b(),s=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(s,!1).done((()=>{t.resolveWith(this)})),t.promise()}collapseGroup(e){const t=b(),s=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(s,!0).done((()=>{t.resolveWith(this)})),t}updateDimensions(){const e=b();return this._scrollView?this._scrollView.update().done((()=>{this._scrollViewIsFull()||this._updateLoadingState(!0),e.resolveWith(this)})):e.resolveWith(this),e.promise()}reload(){super.reload(),this.scrollTo(0),this._pullDownHandler()}repaint(){this.scrollTo(0),super.repaint()}scrollTop(){return this._scrollView.scrollOffset().top??0}clientHeight(){return this._scrollView.clientHeight()}scrollHeight(){return this._scrollView.scrollHeight()}scrollBy(e){this._scrollView.scrollBy(e)}scrollTo(e){this._scrollView.scrollTo(e)}scrollToItem(e){if(!E(e))return;const t=this._editStrategy.getItemElement(e);this._scrollView.scrollToElement(t,{bottom:n_(t==null?void 0:t.get(0),"bottom")})}_dimensionChanged(){this.updateDimensions()}}Ua.ItemClass=qp;const l_=["size"],d_={};class Ga extends Dt{constructor(e){super(e),this.state={},this.elementRef=pe(),this.__getterCache={}}get cssStyles(){return this.__getterCache.cssStyles!==void 0?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:e}=this.props;return{fontSize:mi("fontSize",e)}})()}get restAttributes(){const e=this.props;return Ye(e,l_)}componentWillUpdate(e){this.props.size!==e.size&&(this.__getterCache.cssStyles=void 0)}render(){const{elementRef:e,cssStyles:t}=this;return te(1,"span","dx-checkbox-icon",null,1,{style:bc(t)},null,e)}}Ga.defaultProps=d_;const c_=["dataSource","selectedRowKeys"],h_={integrationOptions:!0};function Ot(i,e,t){return{path:i,value:e,previousValue:t}}function Eo(i,e,t,s,n,o){if(h_[s])return;const r=_i(e),a=_i(t);if(e!==t)if(r!==a)i.push(Ot(s,t,e));else if(r==="object")if(!z(t))i.push(Ot(s,t,e));else{const l=xo(e,t,n,o);i.push(...l.map((d=>v({},d,{path:`${s}.${d.path}`}))))}else if(r==="array")if(o.some((d=>n.includes(d)))&&e!==t)i.push(Ot(s,t,e));else if(e.length!==t.length)i.push(Ot(s,t,e));else{const d=xo(e,t,n,o);[].push.apply(i,d.map((c=>v({},c,{path:`${s}${c.path}`}))))}else i.push(Ot(s,t,e))}const ja=i=>(e,t,s,n)=>{const o=[],r=Array.isArray(e)?a=>{Eo(o,e[a],t[a],`[${a}]`,`${s}.${a}`,n)}:a=>{Eo(o,e[a],t[a],a,`${s}.${a}`,n)};return i(e).forEach(r),Object.keys(t).filter((a=>!Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==t[a])).forEach((a=>{o.push({path:a,value:t[a],previousValue:e[a]})})),o},xo=ja((i=>Object.keys(i))),u_={key:!0,ref:!0,children:!0,style:!0},p_=ja((i=>Object.keys(i).filter((e=>!u_[e]))));function __(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c_;return p_(i,e,"",t)}const f_=["componentProps","componentType","templateNames"],wo=i=>Object.keys(i).reduce(((e,t)=>(i[t]!==void 0&&(e[t]=i[t]),e)),{});class m_ extends Ui{constructor(e){super(e),this.state={},this.refs=null,this.widgetRef=pe(),this.instance=null,this.prevProps=null,this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}getConfig(){const{id:e}=rt;return this.context[e]?this.context[e]:rt.defaultValue}render(){return wo(te(1,"div",this.props.componentProps.className,null,1,v({},this.getRestAttributes()),null,this.widgetRef))}componentWillUpdate(e,t,s){super.componentWillUpdate(e,t,s)}createEffects(){return[new V(this.setupWidget,[]),new V(this.updateWidget,[this.props.componentProps,this.getConfig(),this.props.templateNames])]}updateEffects(){var e;const t=[this.props.componentProps,this.getConfig(),this.props.templateNames];(e=this._effects[1])===null||e===void 0||e.update(t)}setupWidget(){const e=this.widgetRef.current,t=new this.props.componentType(e,this.getProperties());return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){if(!this.instance)return;const e=__(this.prevProps??{},this.getProperties());e.length&&(this.instance.beginUpdate(),e.forEach((t=>{var s;const{path:n,value:o}=t;(s=this.instance)===null||s===void 0||s.option(n,o)})),this.instance.endUpdate()),this.prevProps=this.getProperties()}getRestAttributes(){const e=this.props;return Ye(e,f_)}getProperties(){var e;const t=wo(this.props.componentProps),{valueChange:s}=t,n=D({rtlEnabled:(e=this.getConfig())===null||e===void 0?void 0:e.rtlEnabled,isRenovated:!0},t);return s&&(n.onValueChanged=r=>{const{value:a}=r;return s(a)}),this.props.templateNames.forEach((r=>{Ec(r,n)&&(n[r]=(a,l,d)=>{Ic(this.props.componentProps[r],{item:a,index:l,container:d})})})),n}getInstance(){return this.instance}}const g_=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],v_=v({},Gi,{mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0});class qa extends Dt{constructor(e){super(e),this.state={}}get restAttributes(){const e=this.props;return Ye(e,g_)}render(){return Ge(ve(2,m_,v({componentType:Ul,componentProps:this.props,templateNames:[]},this.restAttributes)))}}qa.defaultProps=v_;const b_=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],C_=i=>{const{classes:e,isValid:t,readOnly:s}=i,n={"dx-state-readonly":!!s,"dx-invalid":!t,[String(e)]:!!e};return tt(n)},Ya=v({},Br,{readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:{},defaultValue:null,valueChange:()=>{}});let Xa=class extends Gs{constructor(e){super(e),this.state={},this.widgetRef=pe(),this.rootElementRef=pe(),this.__getterCache={},this.state={validationMessageGuid:`dx-${new J}`,isValidationMessageVisible:!1,value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new V(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),js()]}updateEffects(){var e;(e=this._effects)===null||e===void 0||(e=e[0])===null||e===void 0||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState((()=>({isValidationMessageVisible:this.shouldShowValidationMessage})))}onFocusIn(e){const{onFocusIn:t}=this.props;t==null||t(e)}get cssClasses(){return`${C_(v({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:e,validationStatus:t}=this.props,s=this.validationErrors??[];return!(e&&t!=="invalid")&&s.length>0}get aria(){const{isValid:e,readOnly:t}=this.props,s={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(s.describedBy=this.state.validationMessageGuid),v({},s,this.props.aria)}get validationErrors(){return this.__getterCache.validationErrors!==void 0?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:e,validationErrors:t}=this.props;let s=t&&[...t];return!s&&e&&(s=[v({},e)]),s})()}get validationMessageTarget(){var e;return(e=this.rootElementRef)===null||e===void 0?void 0:e.current}get restAttributes(){const e=this.props;return Ye(e,b_)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return Ge(ve(2,ji,v({rootElementRef:this.rootElementRef,aria:this.aria,classes:this.cssClasses,activeStateEnabled:this.props.activeStateEnabled,focusStateEnabled:this.props.focusStateEnabled,hoverStateEnabled:this.props.hoverStateEnabled,accessKey:this.props.accessKey,className:this.props.className,rtlEnabled:this.props.rtlEnabled,hint:this.props.hint,disabled:this.props.disabled,height:this.props.height,width:this.props.width,onFocusIn:this.props.onFocusIn,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:this.props.tabIndex,visible:this.props.visible},this.restAttributes,{children:Tt([this.props.children,this.state.isValidationMessageVisible&&ve(2,qa,{validationErrors:this.validationErrors,mode:this.props.validationMessageMode,positionSide:this.props.validationMessagePosition,rtlEnabled:this.props.rtlEnabled,target:this.validationMessageTarget,boundary:this.validationMessageTarget,visualContainer:this.validationMessageTarget,contentId:this.state.validationMessageGuid})],0)}),null,this.widgetRef))}};Xa.defaultProps=Ya;const y_=["accessKey","activeStateEnabled","aria","className","classes","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],S_=i=>{const{text:e,value:t}=i,s=t;return tt({"dx-checkbox":!0,"dx-checkbox-checked":s===!0,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":s===null})},I_=v({},Ya,{text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return O.real().deviceType==="desktop"&&!O.isSimulator()},defaultValue:!1,valueChange:()=>{}});let Os=class extends Gs{constructor(e){super(e),this.editorRef=pe(),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[js()]}onWidgetClick(e){const{enableThreeStateBehavior:t,readOnly:s,saveValueChangeEvent:n}=this.props;if(!s)if(n==null||n(e),t){var o,r;let d;this.setState((c=>(d=(this.props.value!==void 0?this.props.value:c.value)===null||((this.props.value!==void 0?this.props.value:c.value)?!1:null),{value:d}))),(o=(r=this.props).valueChange)===null||o===void 0||o.call(r,d)}else{var a,l;let d;this.setState((c=>(d=!((this.props.value!==void 0?this.props.value:c.value)??!1),{value:d}))),(a=(l=this.props).valueChange)===null||a===void 0||a.call(l,d)}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:s,originalEvent:n,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(s==="space"||o==="space")&&(n.preventDefault(),this.onWidgetClick(n))}get cssClasses(){return S_(v({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}get aria(){const e=(this.props.value!==void 0?this.props.value:this.state.value)===!0,s={role:"checkbox",checked:(this.props.value!==void 0?this.props.value:this.state.value)===null?"mixed":`${e}`};return v({},s,this.props.aria)}get restAttributes(){const e=this.props;return Ye(e,y_)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const e=this.props.value!==void 0?this.props.value:this.state.value;return Ge(ve(2,Xa,v({aria:this.aria,classes:this.cssClasses,onClick:this.onWidgetClick,onKeyDown:this.keyDown,accessKey:this.props.accessKey,activeStateEnabled:this.props.activeStateEnabled,focusStateEnabled:this.props.focusStateEnabled,hoverStateEnabled:this.props.hoverStateEnabled,className:this.props.className,disabled:this.props.disabled,readOnly:this.props.readOnly,hint:this.props.hint,height:this.props.height,width:this.props.width,rtlEnabled:this.props.rtlEnabled,tabIndex:this.props.tabIndex,visible:this.props.visible,validationError:this.props.validationError,validationErrors:this.props.validationErrors,validationMessageMode:this.props.validationMessageMode,validationMessagePosition:this.props.validationMessagePosition,validationStatus:this.props.validationStatus,isValid:this.props.isValid,onFocusIn:this.props.onFocusIn},this.restAttributes,{children:Tt([Ge(te(64,"input",null,null,1,v({type:"hidden",value:`${e}`},this.props.name&&{name:this.props.name}))),te(1,"div","dx-checkbox-container",[ve(2,Ga,{size:this.props.iconSize,isChecked:e===!0}),this.props.text&&te(1,"span","dx-checkbox-text",this.props.text,0)],0)],4)}),null,this.editorRef))}};function E_(i){const e=["value"];return Object.keys(i).reduce(((t,s)=>{const n=i[s],o=e.some((r=>r===s))?`default${s.charAt(0).toUpperCase()}${s.slice(1)}`:s;return t[o]=n,t}),{})}Os.defaultProps=I_;const To=[];function x_(i){To.push(i),Os.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Os.defaultProps),Object.getOwnPropertyDescriptors(E_(bs(To)))))}function w_(i,e){var t;return(((t=i.getRootNode)===null||t===void 0?void 0:t.call(i))??document).querySelector(e)}const Do="dx-invalid-message-auto",Ao="dx-validation-target";class hn extends qs{getProps(){const e=super.getProps();return e.onFocusIn=()=>{if(this.option("validationMessageMode")==="auto"){const s=_(w_(this.element(),".dx-invalid-message.dx-overlay-wrapper"));s==null||s.removeClass(Do);const n=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>{s==null||s.addClass(Do)}),n)}},e.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=he(),Mn(this.$element()[0],Ao,this)}_render(){var e;(e=this.option("_onMarkupRendered"))===null||e===void 0||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(ys.initValidationOptions(e))}_getDefaultOptions(){return D(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){const s=D({},e.option()),n=()=>this._silent(t,s);n(),e.on("optionChanged",n)}_raiseValidation(e,t){const s=!E(e)&&!E(t);e!==t&&!s&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var s;(s=this._valueChangeAction)===null||s===void 0||s.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){const{name:t,previousValue:s,value:n}=e;switch(t&&this._getActionConfigs()[t]!==void 0&&this._addAction(t),t){case"value":this._raiseValidation(n,s),this.option("isDirty",this._initialValue!==n),this._raiseValueChangeAction(n,s);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(ys.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){const{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),Mn(this.element(),Ao,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}const T_=Ms.isEditor,Qa=i=>T_(i)||i instanceof hn;hn.isEditor=Qa;Ms.isEditor=Qa;let D_=class extends hn{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const e=super.getProps();return e.value!==null&&(e.value=!!e.value),e}};class Rs extends D_{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}blur(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Os}}oe("dxCheckBox",Rs);Rs.defaultOptions=x_;const un="dxListEditDecorator",A_=I(cp,un),k_=I(hp,un),$_=I(Aa,un);class O_{constructor(e){this._itemWidthCache=0,this._list=e,this._init()}_shouldHandleSwipe(){return!1}_init(){}_attachSwipeEvent(e){const t={itemSizeFunc:()=>(this._clearSwipeCache&&(this._itemWidthCache=L(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache)};g.on(e.$itemElement,A_,t,(s=>{this._itemSwipeStartHandler(s)})),g.on(e.$itemElement,k_,(s=>{this._itemSwipeUpdateHandler(s)})),g.on(e.$itemElement,$_,(s=>{this._itemSwipeEndHandler(s)}))}_itemSwipeStartHandler(e){const t=_(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *")){e.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(t)}_itemSwipeUpdateHandler(e){const t=e.currentTarget;if(t instanceof Element){const s=_(t);this._swipeUpdateHandler(s,e)}}_itemSwipeEndHandler(e){const t=e.currentTarget;if(t instanceof Element){const s=_(t);this._swipeEndHandler(s,e)}}beforeBag(e){}afterBag(e){}_commonOptions(){const{activeStateEnabled:e,hoverStateEnabled:t,focusStateEnabled:s}=this._list.option();return{activeStateEnabled:e,hoverStateEnabled:t,focusStateEnabled:s}}modifyElement(e){this._shouldHandleSwipe()&&(this._attachSwipeEvent(e),this._clearSwipeCache=!0)}afterRender(){}handleClick(e,t){}handleKeyboardEvents(e,t){}handleEnterPressing(e){}handleContextMenu(e){}_swipeStartHandler(e){}_swipeUpdateHandler(e,t){}_swipeEndHandler(e,t){}visibilityChange(){}getExcludedSelectors(){}dispose(){}}const vs={};function R_(i,e,t){vs[i]||(vs[i]={}),vs[i][e]=t}class Ja extends Ms{_supportedKeys(){return v({},super._supportedKeys(),{space:function(e){e.preventDefault(),this._clickAction({event:e})}})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})}_canValueBeChangedByClick(){return!0}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>O.real().deviceType==="desktop"&&!O.isSimulator(),options:{focusStateEnabled:!0}}])}_init(){super._init(),this.$element().addClass("dx-radiobutton")}_initMarkup(){super._initMarkup(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")}_renderIcon(){this._$icon=_("<div>").addClass("dx-radiobutton-icon"),_("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)}_renderCheckedState(e){this.$element().toggleClass("dx-radiobutton-checked",e).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",e),this.setAria("checked",e)}_renderClick(){const e=I(xe,this.NAME);this._clickAction=this._createAction((t=>{this._clickHandler(t.event)})),g.off(this.$element(),e),g.on(this.$element(),e,(t=>{var s;(s=this._clickAction)===null||s===void 0||s.call(this,{event:t})}))}_clickHandler(e){this._saveValueChangeEvent(e),this.option("value",!0),this._saveValueChangeEvent(void 0)}_optionChanged(e){const{name:t,value:s}=e;t==="value"?(this._renderCheckedState(s),super._optionChanged(e)):super._optionChanged(e)}}oe("dxRadioButton",Ja);const ko="dx-list-select-decorator-enabled",B_="dx-list-select-checkbox-container",P_="dx-list-select-checkbox",M_="dx-list-select-radiobutton-container",L_="dx-list-select-radiobutton",$o=I(xe,"dxListEditDecorator");class H_ extends O_{_init(){super._init();const{selectionMode:e}=this._list.option();this._singleStrategy=e==="single",this._containerClass=this._singleStrategy?M_:B_,this._controlClass=this._singleStrategy?L_:P_,this._controlWidget=this._singleStrategy?Ja:Rs,this._list.$element().addClass(ko)}beforeBag(e){const{$itemElement:t}=e,s=e.$container.addClass(this._containerClass),n=_("<div>").addClass(this._controlClass).appendTo(s);new this._controlWidget(n.get(0),v({},this._commonOptions(),{value:this._isSelected(t.get(0)),elementAttr:{"aria-label":$.format("CheckState")},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:o=>{const{value:r,component:a,event:l}=o;!!l&&(a._valueChangeEventInstance=void 0,a.option("value",!r))}}))}modifyElement(e){super.modifyElement(e);const{$itemElement:t}=e,s=this._controlWidget.getInstance(t.find(`.${this._controlClass}`).get(0));g.on(t,"stateChanged",((n,o)=>{s.option("value",o)}))}_updateSelectAllState(){var e;this._$selectAll&&((e=this._selectAllCheckBox)===null||e===void 0||e.option("value",this._list.isSelectAll()))}afterRender(){const{selectionMode:e}=this._list.option();e==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())}handleKeyboardEvents(e,t){const s=!t,n=this._list,o=this._$selectAll,r=n._getLastItemIndex();if(!!o&&(t&&e===0||s&&e===r)){n.option("focusedElement",B(o));const{focusedElement:d}=n.option();return d&&n.scrollToItem(d),!0}return!1}handleEnterPressing(e){var t;return(t=this._$selectAll)!==null&&t!==void 0&&t.hasClass("dx-state-focused")?(e.target=this._$selectAll.get(0),this._selectAllHandler(e),!0):!1}_renderSelectAll(){this._$selectAll=_("<div>").addClass("dx-list-select-all");const e=this._list._supportedKeys().downArrow.bind(this._list),t=_("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(t,Rs,{elementAttr:{"aria-label":$.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",e);const{selectAllText:s=""}=this._list.option();_("<div>").addClass("dx-list-select-all-label").text(s).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()}_attachSelectAllHandler(){var e;(e=this._selectAllCheckBox)===null||e===void 0||e.option("onValueChanged",(t=>{const{value:s,component:n,event:o}=t;if(!!o){n._setOptionWithoutOptionChange("value",!s);return}this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:s})})),g.off(this._$selectAll,$o),g.on(this._$selectAll,$o,(t=>{this._selectAllHandler(t)}))}_updateSelectAllAriaLabel(){var e;if(!this._$selectAll)return;const{value:t}=((e=this._selectAllCheckBox)===null||e===void 0?void 0:e.option())??{},o=t===void 0?"indeterminate":t?"checked":"notChecked",r=`${$.format("dxList-selectAll")}, ${$.format(`dxList-selectAll-${o}`)}`;this._$selectAll.attr({"aria-label":r})}_selectAllHandler(e){var t;e.stopPropagation(),this._list._saveSelectionChangeEvent(e);const{value:s}=((t=this._selectAllCheckBox)===null||t===void 0?void 0:t.option())??{},n=s?this._unselectAllItems():this._selectAllItems();return this._list.option("focusedElement",B(_(this._$selectAll))),n}_checkSelectAllCapability(){const e=this._list,t=e._dataController,{selectAllMode:s,grouped:n}=e.option();return s==="allPages"&&n&&!t.group()?(ie.log("W1010"),!1):!0}_selectAllItems(){if(!this._checkSelectAllCapability())return b().resolve();const{selectAllMode:e}=this._list.option();return this._list._selection.selectAll(e==="page")}_unselectAllItems(){if(!this._checkSelectAllCapability())return b().resolve();const{selectAllMode:e}=this._list.option();return this._list._selection.deselectAll(e==="page")}_isSelected(e){return this._list.isItemSelected(e)}dispose(){this._disposeSelectAll(),this._list.$element().removeClass(ko),super.dispose()}_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}R_("selection","default",H_);const Za=D({},ua,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new Ds({store:new tn(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=le(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=le(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(i){const e=b();return i=this._unwrappedValue(i),E(i)?(this._loadSingle(this._valueGetterExpr(),i).done((t=>{this._isValueEquals(this._valueGetter(t),i)?e.resolve(t):e.reject()})).fail((()=>{e.reject()})),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading(){var i;(i=this._loadValueDeferred)===null||i===void 0||i.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(i){return i=i??this._getCurrentValue(),i&&this._dataSource&&this._valueGetterExpr()==="this"&&(i=this._getItemKey(i)),Cn.unwrap(i)},_getItemKey(i){const e=this._dataSource.key();if(Array.isArray(e)){const t={};for(let s=0,n=e.length;s<n;s++)t[e[s]]=i[e[s]];return t}return e&&typeof i=="object"&&(i=i[e]),i},_isValueEquals(i,e){const t=this._dataSource&&this._dataSource.key();let s=this._compareValues(i,e);return!s&&t&&E(i)&&E(e)&&(Array.isArray(t)?s=this._compareByCompositeKey(i,e,t):s=this._compareByKey(i,e,t)),s},_compareByCompositeKey(i,e,t){const s=H;if(!s(i)||!s(e))return!1;for(let n=0,o=t.length;n<o;n++)if(i[t[n]]!==e[t[n]])return!1;return!0},_compareByKey(i,e,t){const s=Cn.unwrap,n=ge(s(i[t]),i),o=ge(s(e[t]),e);return this._compareValues(n,o)},_compareValues:(i,e)=>Kt(i,!0)===Kt(e,!0),_initDynamicTemplates:w,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const i=this.option("valueExpr");return $e(i)&&i!=="this"||M(i)?i:null},_dataExpressionOptionChanged(i){switch(i.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),F_="dx-dropdowneditor-button-visible",V_="dxDropDownEditor-selectLabel";class K_ extends rn{constructor(e,t,s){super(e,t,s),this.currentTemplate=null}_attachEvents(e){const{editor:t}=this;e.option("onClick",(s=>{var n;if((n=t._shouldCallOpenHandler)!==null&&n!==void 0&&n.call(t)){t._openHandler(s);return}!t.option("openOnFieldClick")&&t._openHandler(s)})),g.on(e.$element(),"mousedown",(s=>{t.$element().is(".dx-state-focused")&&s.preventDefault()}))}_create(){const{editor:e}=this,t=_("<div>"),s=this._getOptions();this._addToContainer(t);const n=e._createComponent(t,ht,D({},s,{elementAttr:{"aria-label":$.format(V_)}}));return this._legacyRender(e.$element(),t,s.visible),{$element:t,instance:n}}_getOptions(){const{editor:e}=this,t=this._isVisible(),n={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(n),n}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,s){e.toggleClass(F_,s),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:t,instance:s}=this,n=t.$element(),o=this._getOptions();s==null||s.option(o),this._legacyRender(n,s==null?void 0:s.$element(),o.visible)}}}const Oo=function(i){if(de())return ee(i)},W_=function(i){return i===null&&(i=void 0),typeof i=="function"&&(i=i()),i},ff="dx-dropdowneditor",Ro="dx-dropdowneditor-input-wrapper",us="dx-dropdowneditor-overlay",z_="dx-dropdowneditor-overlay-flipped",N_="dx-dropdowneditor-active",U_="dx-dropdowneditor-field-clickable",G_="dx-dropdowneditor-field-template-wrapper",Bo=O.current().platform==="ios";function Po(){return _("<div>").addClass(G_)}class el extends ba{_supportedKeys(){return v({},super._supportedKeys(),{tab:e=>{if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length){this.close();return}const t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(g.trigger(t,"focus"),t.select()),e.preventDefault()},escape:e=>(this.option("opened")&&e.preventDefault(),this.close(),!0),upArrow:e=>!xt(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this.close(),!1):!0,downArrow:e=>!xt(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this._validatedOpening(),!1):!0,enter:e=>(this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0)})}_getDefaultButtons(){return super._getDefaultButtons().concat([{name:"dropDown",Ctor:K_}])}_getDefaultOptions(){return v({},super._getDefaultOptions(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:$.format("OK"),cancelButtonText:$.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto",_userDropDownOptions:{}})}_useTemplates(){return!0}_getDefaultPopupPosition(e){const t=bl(e);return{offset:{h:0,v:-1},my:`${t} top`,at:`${t} bottom`,collision:"flip flip"}}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(e){return e.platform==="generic"},options:{popupPosition:{offset:{v:0}}}}])}_inputWrapper(){return this.$element().find(`.${Ro}`).first()}_init(){super._init(),this._initVisibilityActions(),this._initPopupInitializedAction();const{rtlEnabled:e,dropDownOptions:t}=this.option();this._updatePopupPosition(e),this._cacheUserDropDownOptions(t)}_updatePopupPosition(e){const{my:t,at:s}=this._getDefaultPopupPosition(e),n=this.option("popupPosition");this.option("popupPosition",D({},n,{my:t,at:s}))}_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})}_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})}_initMarkup(){this._renderSubmitElement(),super._initMarkup(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())}_render(){this._detachFocusEvents(),super._render(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()}_renderContentImpl(){this.option("deferRendering")||this._createPopup()}_renderInput(){super._renderInput(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()}_wrapInput(){this._$container=this.$element().wrapInner(_("<div>").addClass(Ro)).children().eq(0)}_getAriaHasPopup(){return"true"}_getAriaAutocomplete(){return"none"}_getAriaRole(){return"combobox"}_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})}_readOnlyPropValue(){return!this._isEditable()||super._readOnlyPropValue()}_cleanFocusState(){super._cleanFocusState(),this.option("fieldTemplate")&&this._detachFocusEvents()}_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")}_renderMask(){this.option("fieldTemplate")||super._renderMask()}_renderField(){const e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())}_renderPlaceholder(){!!this._getFieldTemplate()||super._renderPlaceholder()}_renderValue(){return this.option("useHiddenSubmitElement")&&this._setSubmitValue(),super._renderValue().always(this._renderField.bind(this))}_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer}_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=Po().prependTo(this.$element())))}_renderTemplatedField(e,t){const s=Nt(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove();const n=Po();this._$templateWrapper.replaceWith(n),this._$templateWrapper=n;const o=Symbol("renderContext");this._activeRenderContext=o,e.render({model:t,container:B(this._$templateWrapper),onRendered:()=>{if(this._activeRenderContext!==o)return;const r=this._input();if(!r.length)throw ie.Error("E1010");this._integrateInput(),s&&(Mi.mozilla?r.get(0).focus({preventScroll:!0}):g.trigger(r,"focus"))}})}_integrateInput(){const{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e);const{_onMarkupRendered:t}=this.option();t==null||t()}_refreshEmptinessEvent(){g.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()}_fieldRenderData(){return this.option("value")}_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new Vl((e=>{const t=_("<div>").addClass("dx-dropdowneditor-icon");_(e.container).append(t)}))}),super._initTemplates()}_renderOpenHandler(){const e=this._inputWrapper(),t=I(xe,this.NAME),{openOnFieldClick:s}=this.option();g.off(e,t),g.on(e,t,this._getInputClickHandler(s)),this.$element().toggleClass(U_,s),s&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))}_attachFocusOutHandler(){Bo&&(this._detachFocusOutEvents(),g.on(this._inputWrapper(),I("focusout",this.NAME),(e=>{const t=e.relatedTarget;t&&this.option("opened")&&this._isTargetOutOfComponent(t)&&this.close()})))}_isTargetOutOfComponent(e){const t=this.content?_(this.content()).closest(`.${us}`):this._$popup;return _(e).closest(`.${us}`,t).length===0}_detachFocusOutEvents(){Bo&&g.off(this._inputWrapper(),I("focusout",this.NAME))}_getInputClickHandler(e){return e?t=>{this._executeOpenAction(t)}:()=>{this._focusInput()}}_openHandler(){this._toggleOpenState()}_executeOpenAction(e){var t;(t=this._openOnFieldClickAction)===null||t===void 0||t.call(this,{event:e})}_keyboardEventBindingTarget(){return this._input()}_focusInput(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Nt(this._input())&&(this._resetCaretPosition(),g.trigger(this._input(),"focus")),!0)}_resetCaretPosition(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this._input().get(0);if(t){const{value:s}=t,n=E(s)&&(e||this._isEditable())?s.length:0;this._caret({start:n,end:n},!0)}}_isEditable(){const{acceptCustomValue:e}=this.option();return e}_toggleOpenState(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))}_getControlsAria(){return this._popup&&this._popupContentId}_renderOpenedState(){const e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass(N_,e),this._setPopupOption("visible",e);const t={expanded:e,controls:this._getControlsAria()};this.setAria(t),this.setAria("owns",e?this._popupContentId:void 0,this.$element())}_createPopup(){this._$popup||(this._$popup=_("<div>").addClass(us).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())}_setPopupAriaLabel(){const e=this._popup.$overlayContent();this.setAria("label","Dropdown",e)}_renderPopupContent(){}_renderPopup(){const e=D(this._popupConfig(),this.option("_userDropDownOptions"));this._popup=this._createComponent(this._$popup,Da,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")}_attachPopupKeyHandler(){g.on(this._popup.$overlayContent(),I("keydown",this.NAME),(e=>this._popupKeyHandler(e)))}_popupKeyHandler(e){switch(Ue(e)){case"tab":this._popupTabHandler(e);break;case"escape":this._popupEscHandler()}}_popupTabHandler(e){const t=_(e.target),s=e.shiftKey&&t.is(this._getFirstPopupElement());(!e.shiftKey&&t.is(this._getLastPopupElement())||s)&&(g.trigger(this.field(),"focus"),e.preventDefault())}_popupEscHandler(){g.trigger(this._input(),"focus"),this.close()}_setPopupContentId(e){this._popupContentId=`dx-${new J}`,this.setAria("id",this._popupContentId,e)}_contentReadyHandler(){}_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:D(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Oo(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:us,_ignorePreventScrollEventsDeprecation:!0}}_popupInitializedHandler(){}_getPopupInitializedHandler(){const{onPopupInitialized:e}=this.option();return t=>{this._popupInitializedHandler(),e&&this._popupInitializedAction({popup:t.component})}}_dimensionChanged(){if(de()&&!this.$element().is(":visible")){this.close();return}this._updatePopupWidth()}_updatePopupWidth(){W_(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",(()=>Oo(this.$element())))}_popupPositionedHandler(e){var t;const{labelMode:s,stylingMode:n}=this.option();if(!this._popup)return;const o=this._popup.$overlayContent(),r=(t=e.position)===null||t===void 0||(t=t.v)===null||t===void 0?void 0:t.flip,a=s!=="hidden"&&s!=="outside"&&n==="outlined";if(e.position&&o.toggleClass(z_,r),r&&a&&this._label.isVisible()){const l=this._label.$element();we(o,{top:es(o).top-parseInt(l.css("fontSize"))})}}_popupShowingHandler(){}_popupHidingHandler(){this.option("opened",!1)}_popupShownHandler(){var e;this._openAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())}_popupHiddenHandler(){var e;this._closeAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())}_getValidationMessagePositionSide(){var e;const{validationMessagePosition:t}=this.option();if(t!=="auto")return t;let s="bottom";if((e=this._popup)!==null&&e!==void 0&&e.option("visible")){const{top:n}=yn.setup(this.$element()),{top:o}=yn.setup(this._popup.$content());s=n+this.option("popupPosition").offset.v>o?"bottom":"top"}return s}_closeOutsideDropDownHandler(e){const{target:t}=e,s=_(t),n=this.getButton("dropDown"),o=n==null?void 0:n.$element(),r=!!s.closest(this.$element()).length,a=!!s.closest(o).length;return!r&&!a}_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),super._clean()}_setPopupOption(e,t){this._setWidgetOption("_popup",arguments)}_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)}_getPopupToolbarItems(){const{applyValueMode:e}=this.option();return e==="useButtons"?this._popupToolbarItemsConfig():[]}_getFirstPopupElement(){return _(this._popup.getFocusableElements()).first()}_getLastPopupElement(){return _(this._popup.getFocusableElements()).last()}_popupToolbarItemsConfig(){const e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(e)}_applyButtonsLocation(e){const{buttonsLocation:t}=this.option(),s=e;if(t!=="default"){const n=hl(t);S(s,((o,r)=>{D(r,{toolbar:n[0],location:n[1]})}))}return s}_applyButtonHandler(e){this.close(),this.option("focusStateEnabled")&&this.focus()}_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()}_popupOptionChanged(e){const t=Ps.getOptionsFromContainer(e);this._setPopupOption(t);const s=Object.keys(t);(s.includes("width")||s.includes("height"))&&this._dimensionChanged()}_cacheUserDropDownOptions(e){const s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"dropDownOptions").replace("dropDownOptions","_userDropDownOptions");this.option(s,e)}_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=_("<input>").attr("type","hidden").appendTo(this.$element()))}_setSubmitValue(){const{value:e}=this.option();this._getSubmitElement().val(e)}_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:super._getSubmitElement()}_dispose(){this._detachFocusOutEvents(),super._dispose()}_optionChanged(e){var t;const{name:s,fullName:n,value:o}=e;switch(s){case"width":case"height":super._optionChanged(e),(t=this._popup)===null||t===void 0||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._cacheUserDropDownOptions(o,n);break;case"_userDropDownOptions":case"popupPosition":break;case"deferRendering":de()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(o),super._optionChanged(e);break;default:super._optionChanged(e)}}open(){this.option("opened",!0)}close(){this.option("opened",!1)}field(){return B(this._input())}content(){return this._popup?this._popup.content():null}}oe("dxDropDownEditor",el);const tl=[],Zs=i=>{let{enabled:e,decoratorType:t,decoratorSubType:s}=i;tl.push({enabled:e,decoratorType:t,decoratorSubType:s})};Zs({enabled(){const{menuItems:i}=this.option();return!!i.length},decoratorType:()=>"menu",decoratorSubType(){const{menuMode:i}=this.option();return i}});Zs({enabled(){const{menuItems:i,allowItemDeleting:e}=this.option();return!!(!i.length&&e)},decoratorType(){const{itemDeleteMode:i}=this.option();return["toggle","slideButton","swipe","static"].includes(i)?"delete":"menu"},decoratorSubType(){let{itemDeleteMode:i}=this.option();return i==="slideItem"&&(i="slide"),i}});Zs({enabled(){const{selectionMode:i,showSelectionControls:e}=this.option();return!!(i!=="none"&&e)},decoratorType:()=>"selection",decoratorSubType:()=>"default"});Zs({enabled(){const{itemDragging:i}=this.option();return!!(i.allowReordering||i.allowDropInsideItem||i.group)},decoratorType:()=>"reorder",decoratorSubType:()=>"default"});class j_{constructor(e){this._list=e,this._decorators=[],this._fetchRequiredDecorators()}dispose(){var e;(e=this._decorators)!==null&&e!==void 0&&e.length&&S(this._decorators,((t,s)=>{s.dispose()}))}_fetchRequiredDecorators(){S(tl,((e,t)=>{if(t.enabled.call(this._list)){const n=t.decoratorType.call(this._list),o=t.decoratorSubType.call(this._list),r=this._createDecorator(n,o);this._decorators.push(r)}}))}_createDecorator(e,t){const s=this._findDecorator(e,t);return new s(this._list)}_findDecorator(e,t){var s;const n=(s=vs[e])===null||s===void 0?void 0:s[t];if(!n)throw ie.Error("E1012",e,t);return n}modifyItemElement(e){const t=_(e.itemElement),s={$itemElement:t,$container:_()};this._prependBeforeBags(t,s),this._appendAfterBags(t,s),this._applyDecorators("modifyElement",s)}afterItemsRendered(){this._applyDecorators("afterRender")}_prependBeforeBags(e,t){const s=this._collectDecoratorsMarkup("beforeBag",t,"dx-list-item-before-bag");e.prepend(s)}_appendAfterBags(e,t){const s=this._collectDecoratorsMarkup("afterBag",t,"dx-list-item-after-bag");e.append(s)}_collectDecoratorsMarkup(e,t,s){var n;const o=_("<div>");return(n=this._decorators)===null||n===void 0||n.forEach((r=>{if(M(r[e])){const a=_("<div>").addClass(s);r[e](v({},t,{$container:a})),a.children().length&&o.append(a)}})),o.children()}_applyDecorators(e,t){var s;(s=this._decorators)===null||s===void 0||s.forEach((n=>{n[e](t)}))}_handlerExists(e){if(!this._decorators)return!1;const t=this._decorators,{length:s}=t;for(let n=0;n<s;n+=1)if(t[n][e]!==w)return!0;return!1}_eventHandler(e){if(!this._decorators)return!1;let t=!1;const s=this._decorators,{length:n}=s;for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];for(let l=0;l<n&&(t=s[l][e](...r),!t);l+=1);return t}handleClick(e,t){return this._eventHandler("handleClick",e,t)}handleKeyboardEvents(e,t){return this._eventHandler("handleKeyboardEvents",e,t)}handleEnterPressing(e){return this._eventHandler("handleEnterPressing",e)}contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")}handleContextMenu(e,t){return this._eventHandler("handleContextMenu",e,t)}getExcludedItemSelectors(){const e=[];return this._applyDecorators("getExcludedSelectors",e),e.join(",")}}const ui=i=>(i.group<<20)+i.item,Pe=i=>({group:i>>20,item:1048575&i});class q_ extends _a{_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")}_groupItemElements(e){return e.find(".dx-list-item")}getIndexByItemData(e){const t=this._getItems();let s=ke;if(!e)return ke;const{items:n=[]}=e;return n.length&&(e=n[0]),S(t,((o,r)=>r.items?(S(r.items,((a,l)=>l!==e?!0:(s={group:o,item:a},!1))),!ue(s)):!1)),s}_isIndexNumeric(e){return st(e)}getItemDataByIndex(e){const t=this._getItems();if(this._isIndexNumeric(e))return this.itemsGetter()[e];const s=e.group,n=t[s],{items:o=[]}=n;return e&&o[e.item]||null}itemsGetter(){let e=[];return this._getItems().forEach((s=>{s.items?e=e.concat(s.items):e.push(s)})),e}deleteItemAtIndex(e){const t=Pe(e),{items:s=[]}=this._collectionWidget.option(),n=s[t.group].items;n==null||n.splice(t.item,1)}getKeysByItems(e){return e.reduce(((s,n)=>n!=null&&n.items?s.concat(n.items):(s.push(n),s)),[]).map((s=>this._collectionWidget.keyOf(s)))}getIndexByKey(e,t){const{items:s}=this._collectionWidget.option(),n=t??s;let o=-1;return S(n,((r,a)=>{if(a.items&&(S(a.items,((l,d)=>{const c=this._collectionWidget.keyOf(d);if(this._equalKeys(c,e))return o={group:r,item:l},!1})),o!==-1))return!1})),typeof o=="object"?ui(o):o}_getGroups(e){const s=this._collectionWidget._dataController.group();if(s)return Ts.queryByOptions(je(e),{group:s}).toArray();const{items:n=[]}=this._collectionWidget.option();return n}getItemsByKeys(e,t){const s=[],n=this._getGroups(t),o={},r=a=>{const l=this.getIndexByKey(a,n),d=Pe(l),c=d&&n[d.group];if(c)return{groupKey:String(c.key),item:c.items[d.item]}};return S(e,((a,l)=>{var d;const c=r(l);if(!c)return;const{groupKey:u,item:h}=c;let p=o[u];p||(p={key:u,items:[]},o[u]=p,s.push(p)),(d=p.items)===null||d===void 0||d.push(h)})),s}moveItemAtIndexToIndex(e,t){const{items:s=[]}=this._collectionWidget.option(),n=Pe(e),o=Pe(t),r=s[n.group].items,a=s[o.group].items;if(r){const l=r==null?void 0:r[n.item];r==null||r.splice(n.item,1),a==null||a.splice(o.item,0,l)}}_isItemIndex(e){return!!(e&&st(e.group)&&st(e.item))}_getNormalizedItemIndex(e){const t=_(e),s=t.closest(".dx-list-group");return s.length?ui({group:this._groupElements().index(s),item:this._groupItemElements(s).index(t)}):-1}_normalizeItemIndex(e){return ui(e)}_denormalizeItemIndex(e){return Pe(e)}_getItemByNormalizedIndex(e){const t=Pe(e),s=this._groupElements().eq(t.group);return this._groupItemElements(s).eq(t.item)}_itemsFromSameParent(e,t){return Pe(e).group===Pe(t).group}}class Y_ extends Ua{_supportedKeys(){const e=super._supportedKeys(),t=(s,n)=>{const{focusedElement:o,itemDragging:r,grouped:a}=this.option(),l=this._editStrategy,d=l.getNormalizedIndex(o);if(!(d===this._getLastItemIndex()&&this._dataController.isLoading()))if(s.shiftKey&&r!==null&&r!==void 0&&r.allowReordering){const u=d+(n?-1:1),h=l.getItemElement(u);a&&_(o).parent().get(0)!==h.parent().get(0)||(this.reorderItem(_(o).get(0),h.get(0)),this.scrollToItem(_(o))),s.preventDefault()}else this._editProvider.handleKeyboardEvents(d,n)||(n?e.upArrow(s):e.downArrow(s))};return v({},e,{del:s=>{const{allowItemDeleting:n,focusedElement:o}=this.option();n&&o&&(s.preventDefault(),this.deleteItem(o))},upArrow:s=>t(s,!0),downArrow:s=>t(s),enter:s=>{this._editProvider.handleEnterPressing(s)||e.enter.apply(this,[s])},space:s=>{this._editProvider.handleEnterPressing(s)||e.space.apply(this,[s])}})}_updateSelection(){this._editProvider.afterItemsRendered(),super._updateSelection()}_getLastItemIndex(){return this._itemElements().length-1}_refreshItemElements(){super._refreshItemElements();const e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))}_isItemStrictEquals(e,t){const s=e==null?void 0:e[Ka];return s&&!this.key()&&this._selection.isItemSelected(s)?!1:super._isItemStrictEquals(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:$.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:e=>e.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])}_init(){super._init(),this._initEditProvider()}_initDataSource(){if(super._initDataSource(),!this._isPageSelectAll()){var e;(e=this._dataSource)===null||e===void 0||e.requireTotalCount(!0)}}_isPageSelectAll(){const{selectAllMode:e}=this.option();return e==="page"}_initEditProvider(){this._editProvider=new j_(this)}_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()}_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()}_initEditStrategy(){const{grouped:e}=this.option();e?this._editStrategy=new q_(this):super._initEditStrategy()}_initMarkup(){this._refreshEditProvider(),super._initMarkup()}_renderItems(e){super._renderItems(e),this._editProvider.afterItemsRendered()}_renderItem(e,t,s,n){const{showSelectionControls:o,selectionMode:r}=this.option(),a=super._renderItem(e,t,s,n);return o&&r!=="none"&&this._updateItemAriaLabel(a,t),a}_updateItemAriaLabel(e,t){var s;const n=((s=this._displayGetter)===null||s===void 0?void 0:s.call(this,t))??(t==null?void 0:t.text)??t;this.setAria("label",H(n)?$.format("dxList-listAriaLabel-itemContent"):n,e)}_selectedItemClass(){return"dx-list-item-selected"}_itemResponseWaitClass(){return"dx-list-item-response-wait"}_itemClickHandler(e,t,s){const n=_(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(n,e)||(this._saveSelectionChangeEvent(e),super._itemClickHandler(e,t,s))}_shouldFireContextMenuEvent(){return super._shouldFireContextMenuEvent()||this._editProvider.contextMenuHandlerExists()}_itemHoldHandler(e){const t=_(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *"))return;if(Kl(e)&&this._editProvider.handleContextMenu(t,e)){e.handledByEditProvider=!0;return}super._itemHoldHandler(e)}_itemContextMenuHandler(e){const t=_(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *"))return;if(!e.handledByEditProvider&&this._editProvider.handleContextMenu(t,e)){e.preventDefault();return}super._itemContextMenuHandler(e)}_postprocessRenderItem(e){super._postprocessRenderItem(e),this._editProvider.modifyItemElement(e)}_clean(){this._disposeEditProvider(),super._clean()}focusListItem(e){const t=this._editStrategy.getItemElement(e);this.option("focusedElement",B(t)),this.focus(),this.scrollToItem(t)}_getFlatIndex(){const{selectedIndex:e=ke}=this.option();if(st(e)||!e)return e;const t=this._editStrategy.getItemElement(e);return this.getFlatIndexByItemElement(t)}_optionChanged(e){const{name:t}=e;switch(t){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),this._initEditStrategy(),super._optionChanged(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:super._optionChanged(e)}}selectAll(){return this._selection.selectAll(this._isPageSelectAll())}unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())}isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())}getFlatIndexByItemElement(e){return this._itemElements().index(e)}getItemElementByFlatIndex(e){const t=this._itemElements();return e<0||e>=t.length?_():t.eq(e)}getItemByIndex(e){return this._editStrategy.getItemDataByIndex(e)}deleteItem(e){const t=this._editStrategy,s=t.getNormalizedIndex(e),{focusedElement:n,focusStateEnabled:o}=this.option(),r=n?t.getNormalizedIndex(n):s,l=r===this._getLastItemIndex()||s<r?r-1:r;return super.deleteItem(e).done((()=>{o&&this.focusListItem(l)}))}}class sl extends Y_{_getCombinedFilter(){const e=this._dataController,t={filter:e.filter()};e.addSearchFilter(t);const{filter:s}=t;return s}_getDefaultOptions(){return v({},super._getDefaultOptions(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})}_getSearchBoxControllerOptions(){const{tabIndex:e,searchEnabled:t,searchValue:s,searchTimeout:n,searchEditorOptions:o}=this.option();return{tabIndex:e,searchEnabled:t,searchValue:s,searchTimeout:n,searchEditorOptions:o,onValueChanged:r=>{this.option("searchValue",r)}}}_initDataSource(){const{searchValue:e,searchExpr:t,searchMode:s}=this.option();super._initDataSource();const n=this._dataController;e!=null&&e.length&&n.searchValue(e),s!=null&&s.length&&n.searchOperation(ho(s)),t&&n.searchExpr(t)}_init(){this._searchBoxController=new Zt,super._init()}_initMarkup(){this._searchBoxController.render("dx-list",this.$element(),this._getSearchBoxControllerOptions(),this._createComponent.bind(this)),super._initMarkup()}_getAriaTarget(){const{searchEnabled:e}=this.option();return e?this._itemContainer():super._getAriaTarget()}focus(){const{focusedElement:e,searchEnabled:t}=this.option();if(!e&&t){var s;(s=this._searchBoxController)===null||s===void 0||s.focus();return}super.focus()}_focusTarget(){const{searchEnabled:e}=this.option();return e?this._itemContainer():super._focusTarget()}_updateFocusState(e,t){const{searchEnabled:s}=this.option();s&&this._toggleFocusClass(t,this.$element()),super._updateFocusState(e,t)}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){ie.log("W1009");return}t==="searchMode"?this._dataSource.searchOperation(ho(s)):this._dataSource[t](s),this._dataSource.load();break;case"searchTimeout":break;default:super._optionChanged(e)}}_refresh(){var e;(e=this._searchBoxController)===null||e===void 0||e.resolveValueChange(),super._refresh()}_cleanAria(){const e=this.$element();this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)}_clean(){this._cleanAria(),super._clean()}_dispose(){var e;(e=this._searchBoxController)===null||e===void 0||e.dispose(),super._dispose()}}oe("dxList",sl);const Mo=Ne(),X_=["startswith","contains","endwith","notcontains"],Lo=O.real().platform!=="android";class pn extends el{_supportedKeys(){const e=super._supportedKeys();return v({},e,{tab(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);const{focusedElement:s}=this._list.option(),n=_(s);n.length&&this._setSelectedElement(n)}e.tab(t)},space:w,home:w,end:w})}_allowSelectItemByTab(){const{opened:e,applyValueMode:t}=this.option();return e&&t==="instantly"}_setSelectedElement(e){const t=this._valueGetter(this._list._getItemData(e));this._setValue(t)}_setValue(e){this.option("value",e)}_getDefaultOptions(){return v({},super._getDefaultOptions(),Za._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:$.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:w,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])}_setOptionsByReference(){super._setOptionsByReference(),D(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})}_init(){super._init(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()}_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)}_initItems(){const{items:e}=this.option();e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())}_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()}_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})}_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({item:new Wl("item")})}_isEditable(){const{searchEnabled:e}=this.option();return super._isEditable()||e}_saveFocusOnWidget(){var e;(e=this._list)!==null&&e!==void 0&&e.initialOption("focusStateEnabled")&&this._focusInput()}_fitIntoRange(e,t,s){return e>s?t:e<t?s:e}_items(){const e=this._getPlainItems(!this._list&&this._dataSource.items());return new je(e).filter("disabled","<>",!0).toArray()}_calcNextItem(e){const t=this._items(),s=this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1);return t[s]}_getSelectedIndex(){const e=this._items(),t=this.option("selectedItem");let s=-1;return S(e,((n,o)=>{if(this._isValueEquals(o,t))return s=n,!1})),s}_createPopup(){super._createPopup(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const e=this._popup.$content();g.off(e,"mouseup"),g.on(e,"mouseup",this._saveFocusOnWidget.bind(this))}_updateCustomBoundaryContainer(){const e=this.option("dropDownOptions.container"),t=e&&_(e);if(t&&t.length&&!yt(t.get(0))){const s=[].slice.call(t.parents());s.unshift(t.get(0)),S(s,((n,o)=>{if(o===_("body").get(0))return!1;if(Mo.getComputedStyle(o).overflowY==="hidden")return this._$customBoundaryContainer=_(o),!1}))}}_popupWrapperClass(){return"dx-dropdownlist-popup-wrapper"}_renderInputValue(){var e=this;let{value:t,renderOnly:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=t??this._getCurrentValue();return this._rejectValueLoading(),s?super._renderInputValue(n):this._loadInputValue(n,(function(){e._setSelectedItem(...arguments)})).always(super._renderInputValue.bind(this,n))}_loadInputValue(e,t){return this._loadItem(e).always(t)}_getItemFromPlain(e,t){let s,n;return t&&typeof e!="object"&&(t.itemByValue||(t.itemByValue={},s=this._getPlainItems(),s.forEach((function(o){t.itemByValue[this._valueGetter(o)]=o}),this)),n=t.itemByValue[e]),n||(s=this._getPlainItems(),n=Bs(s,(o=>this._isValueEquals(this._valueGetter(o),e)))[0]),n}_resetInputText(){this._renderInputValue({renderOnly:!0})}_loadItem(e,t){const s=this._getItemFromPlain(e,t);return s!==void 0?b().resolve(s).promise():this._loadValue(e)}_getPlainItems(e){let t=[];const{grouped:s}=this.option();e=e||this.option("items")||this._dataSource.items()||[];for(let o=0;o<e.length;o++){var n;s&&(n=e[o])!==null&&n!==void 0&&n.items?t=t.concat(e[o].items):t.push(e[o])}return t}_updateActiveDescendant(e){var t;const s=this.option("opened"),n=(t=this._list)===null||t===void 0?void 0:t.getFocusedItemId(),o=_(`#${n}`).length>0,r=s&&o&&n;this.setAria({activedescendant:r||null},e)}_setSelectedItem(e){const t=this._displayValue(e);this.option("selectedItem",ge(e,null)),this.option("displayValue",t)}_displayValue(e){return this._displayGetter(e)}_refreshSelected(){const e={};this._listItemElements().each(((t,s)=>{const n=_(s),o=this._valueGetter(n.data("dxListItemData"));this._isSelectedValue(o,e)?this._list.selectItem(n):this._list.unselectItem(n)}))}_popupShownHandler(){super._popupShownHandler(),this._setFocusPolicy()}_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_validateSearchMode(){const e=this.option("searchMode"),t=e.toLowerCase();if(!X_.includes(t))throw ie.Error("E1019",e)}_clearSelectedItem(){this.option("selectedItem",null)}_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail((()=>{this._isCustomValueAllowed()||this._clearSelectedItem()}))}_isCustomValueAllowed(){return this.option("displayCustomValue")}clear(){super.clear(),this._clearFilter(),this._clearSelectedItem()}_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):_()}_popupConfig(){return v({},super._popupConfig(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})}_renderPopupContent(){super._renderPopupContent(),this._renderList()}_getKeyboardListeners(){return this._canListHaveFocus()?super._getKeyboardListeners():super._getKeyboardListeners().concat([this._list])}_renderList(){this._listId=`dx-${new J()._value}`;const e=_("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,sl,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()}_renderPreventBlurOnListClick(){const e=I("mousedown","dxDropDownList");g.off(this._$list,e),g.on(this._$list,e,(t=>t.preventDefault()))}_getControlsAria(){return this._list&&this._listId}_renderOpenedState(){super._renderOpenedState(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)}_getAriaHasPopup(){return"listbox"}_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()}_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()}_isDesktopDevice(){return O.real().deviceType==="desktop"}_listConfig(){const{noDataText:e,grouped:t,wrapItemText:s,itemTemplate:n,groupTemplate:o,hoverStateEnabled:r,focusStateEnabled:a,encodeNoDataText:l,useItemTextAsTitle:d}=this.option(),c={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:e,encodeNoDataText:l,grouped:t,wrapItemText:s,useItemTextAsTitle:d,onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:n,indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:o,onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?r:!1,focusStateEnabled:this._isDesktopDevice()?a:!1,_onItemsRendered:()=>{this._popup.repaint()}};return this._canListHaveFocus()||(c.tabIndex=null),c}_canListHaveFocus(){return!1}_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null}_dataSourceOptions(){return{paginate:!1}}_getSpecificDataSourceOption(){const{grouped:e}=this.option(),t=this.option("dataSource");return t&&e?Va(t):t}_dataSourceFromUrlLoadMode(){return"raw"}_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()}_setListOption(e,t){this._setWidgetOption("_list",arguments)}_listItemClickAction(e){this._listItemClickHandler(e),this._itemClickAction(e)}_listItemClickHandler(e){}_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))}_needPassDataSourceToList(){const{showDataBeforeSearch:e}=this.option();return e||this._isMinSearchLengthExceeded()}_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")}_needClearFilter(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()}_canKeepDataSource(){const e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded}_searchValue(){return this._input().val()||""}_getSearchEvent(){return I("input",`${this.NAME}Search`)}_getCompositionStartEvent(){return I("compositionstart",`${this.NAME}CompositionStart`)}_getCompositionEndEvent(){return I("compositionend",`${this.NAME}CompositionEnd`)}_getSetFocusPolicyEvent(){return I("input",`${this.NAME}FocusPolicy`)}_renderEvents(){super._renderEvents(),g.on(this._input(),this._getSetFocusPolicyEvent(),(()=>{this._setFocusPolicy()})),this._shouldRenderSearchEvent()&&(g.on(this._input(),this._getSearchEvent(),(e=>{this._searchHandler(e)})),Lo&&(g.on(this._input(),this._getCompositionStartEvent(),(()=>{this._isTextCompositionInProgress(!0)})),g.on(this._input(),this._getCompositionEndEvent(),(e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())}))))}_shouldRenderSearchEvent(){return this.option("searchEnabled")}_refreshEvents(){g.off(this._input(),this._getSearchEvent()),g.off(this._input(),this._getSetFocusPolicyEvent()),Lo&&(g.off(this._input(),this._getCompositionStartEvent()),g.off(this._input(),this._getCompositionEndEvent())),super._refreshEvents()}_isTextCompositionInProgress(e){if(arguments.length)this._isTextComposition=e;else return this._isTextComposition}_searchHandler(e,t){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}const{searchTimeout:s}=this.option();s?(this._clearSearchTimer(),this._searchTimer=setTimeout((()=>{this._searchDataSource(t)}),s)):this._searchDataSource(t)}_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()}_searchDataSource(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(e)}_filterDataSource(e){this._clearSearchTimer();const t=this._dataController;t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e))}_clearFilter(){const e=this._dataController;e.searchValue()&&e.searchValue(null)}_dataSourceFiltered(e){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()}_shouldOpenPopup(){return this._hasItemsToShow()}_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))}_dataSourceChangedHandler(e){this._dataController.pageIndex()===0?this.option().items=e:this.option().items=this.option().items.concat(e)}_hasItemsToShow(){const s=(this._dataController.items()||[]).length;return!!(this._needPassDataSourceToList()&&s)}_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer}_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()}_dimensionChanged(){super._dimensionChanged(),this._updateListDimensions()}_needPopupRepaint(){const e=this._dataController,t=e.pageIndex(),s=E(this._pageIndex)&&t<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=t,s}_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())}_getMaxHeight(){const e=this.$element(),t=this._$customBoundaryContainer,s=e.offset().top-(t?t.offset().top:0),n=j(Mo),o=t?Math.min(j(t),n):n,r=Math.max(s,o-s-j(e));return Math.min(.5*o,r)}_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,super._clean()}_dispose(){this._clearSearchTimer(),super._dispose()}_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)}_setSubmitValue(){const e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)}_shouldUseDisplayValue(e){return this.option("valueExpr")==="this"&&H(e)}_optionChanged(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),super._optionChanged(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:super._optionChanged(e)}}}pn.include(Za);oe("dxDropDownList",pn);let Q_=class extends pn{_supportedKeys(){const e=this,t=super._supportedKeys(),s=function(o){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(o.preventDefault(),this.clear()),this._savedTextRemoveEvent=o,this._preventSubstitution=!0},n=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return v({},t,{tab(){const{opened:o}=this.option(),r=o&&!!this._popup.getFocusableElements().length;r||this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),r||this._cancelSearchIfNeed()},upArrow(o){if(t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},downArrow(o){if(t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},leftArrow(){var o;n(),(o=t.leftArrow)===null||o===void 0||o.apply(this,arguments)},rightArrow(){var o;n(),(o=t.rightArrow)===null||o===void 0||o.apply(this,arguments)},home(){var o;n(),(o=t.home)===null||o===void 0||o.apply(this,arguments)},end(){var o;n(),(o=t.end)===null||o===void 0||o.apply(this,arguments)},escape(){var o;const r=(o=t.escape)===null||o===void 0?void 0:o.apply(this,arguments);return this._cancelEditing(),r??!0},enter(o){const r=this.option("opened"),a=this._input().val().trim(),l=a&&this._list&&!this._list.option("focusedElement");if(!a&&E(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(o),this.option({selectedItem:null,value:null}),this.close();else{var d;if(this.option("acceptCustomValue"))return o.preventDefault(),l&&(r&&this._toggleOpenState(),this._valueChangeEventHandler(o)),r;if((d=t.enter)!==null&&d!==void 0&&d.apply(this,arguments))return r}},space(o){const r=this.option("opened"),a=this.option("searchEnabled"),l=this.option("acceptCustomValue");if(!(!r||a||l))return o.preventDefault(),this._valueChangeEventHandler(o),!0},backspace:s,del:s})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{placeholder:$.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",acceptCustomValue:!1,onCustomItemCreating(e){E(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})}_init(){super._init(),this._initCustomItemCreatingAction()}_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),super._initMarkup(),this._$container.addClass("dx-selectbox-container")}_createPopup(){super._createPopup(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)}_popupWrapperClass(){return`${super._popupWrapperClass()} dx-selectbox-popup-wrapper`}_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))}_renderOpenedState(){super._renderOpenedState(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())}_focusSelectedElement(){if(!this._searchValue()){this._focusListElement(null);return}const{items:t,selectedItem:s}=this.option(),n=this._list._itemElements(),o=(t==null?void 0:t.indexOf(s))??-1,r=o!==-1&&!this._isCustomItemSelected()?n.eq(o):null;this._focusListElement(r)}_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue")){this._focusListElement(null);return}const s=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(s)}_focusListElement(e){this._preventInputValueRender=!0,this._list.option("focusedElement",B(e)),delete this._preventInputValueRender}_scrollToSelectedItem(){if(!this._list)return;const{selectedItem:e}=this._list.option();this._list.scrollToItem(e)}_listContentReadyHandler(){super._listContentReadyHandler(),!(this._dataController.paginate()&&this._needPopupRepaint())&&this._scrollToSelectedItem()}_renderValue(){return this._renderInputValue(),this._setSubmitValue(),b().resolve()}_renderInputValue(){return super._renderInputValue(...arguments).always((()=>{this._renderInputValueAsync()}))}_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always((()=>{this._refreshSelected()}))}_renderInputValueImpl(){return this._renderField(),b().resolve()}_setNextItem(e){const t=this._calcNextItem(e),s=this._valueGetter(t);this._setValue(s)}_setNextValue(e){(this._dataController.isLoaded()?b().resolve():this._dataController.load()).done((()=>{const s=this._getSelectedIndex(),n=this._dataController.pageSize(),o=this._dataController.isLastPage(),r=s===this._items().length-1;this._saveValueChangeEvent(e);const a=Ue(e)==="downArrow"?1:-1;n&&!o&&r&&a>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,a))):this._setNextItem(a)}))}_setSelectedItem(e){const t=!this._isCustomValueAllowed()&&e===void 0;super._setSelectedItem(t?null:e),!t&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))}_isCustomValueAllowed(){return this.option("acceptCustomValue")||super._isCustomValueAllowed()}_displayValue(e){return e=!E(e)&&this._isCustomValueAllowed()?this.option("value"):e,super._displayValue(e)}_listConfig(){const e=D(super._listConfig(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this),_onItemsRendered:()=>{this._popup.repaint(),this.option("opened")&&this._scrollToSelectedItem()}});return this.option("showSelectionControls")&&D(e,{showSelectionControls:!0,selectByClick:!0}),e}_listFocusedItemChangeHandler(e){if(this._preventInputValueRender)return;const t=e.component,s=_(t.option("focusedElement")),n=t._getItemData(s);this._updateField(n)}_updateField(e){if(!(this._getTemplateByOption("fieldTemplate")&&this.option("fieldTemplate"))){const s=this._displayGetter(e);this.option("text",s),this._renderDisplayText(s);return}this._renderField()}_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):w}_selectionChangeHandler(e){S(e.addedItems||[],((t,s)=>{this._setValue(this._valueGetter(s))}))}_getActualSearchValue(){return this._dataController.searchValue()}_isInlineAutocompleteEnabled(){const{searchEnabled:e,acceptCustomValue:t,searchMode:s}=this.option();return e&&!t&&s==="startswith"}_getAriaAutocomplete(){const{disabled:e,readOnly:t,searchEnabled:s}=this.option();return s&&!(t||e)?this._isInlineAutocompleteEnabled()?"both":"list":"none"}_toggleOpenState(e){if(!this.option("disabled")){if(e=arguments.length?e:!this.option("opened"),!e&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&e)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const s=this._getActualSearchValue();s&&this._wasSearch(!0),this._filterDataSource(s||null)}else this._setListOption("items",[]);e&&this._scrollToSelectedItem(),super._toggleOpenState(e)}}_renderTooltip(){const{tooltipEnabled:e,displayValue:t}=this.option();e&&this.$element().attr("title",t)}_renderDimensions(){super._renderDimensions(),this._updatePopupWidth(),this._updateListDimensions()}_isValueEqualInputText(){const e=this.option("selectedItem");if(e===null)return!1;const t=this._displayGetter(e),s=t?String(t):"",n=this._searchValue();return s===n}_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),super._popupHidingHandler()}_popupHiddenHandler(){super._popupHiddenHandler(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))}_restoreInputText(e){var t;this.option("readOnly")||(t=this._loadItemDeferred)===null||t===void 0||t.always((()=>{const{acceptCustomValue:s,text:n,selectedItem:o,customItemCreateEvent:r}=this.option();if(s){if(!e&&!this._isValueChanging){let a=null;E(o)?a=o:r!==""&&(a=this._createCustomItem(n)),this._updateField(a),this._clearFilter()}return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always((a=>{const l=ge(a,o);this._setSelectedItem(l),this._updateField(l),this._clearFilter()}))}))}_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")}_isPreventedFocusOutEvent(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()}_focusOutHandler(e){this._isPreventedFocusOutEvent(e)||(this._isOverlayNestedTarget(e.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)),e.target=this._input().get(0),super._focusOutHandler(e)}_cancelSearchIfNeed(e){const{searchEnabled:t}=this.option(),s=this._isOverlayNestedTarget(e==null?void 0:e.relatedTarget);if(this._wasSearch()&&t&&!s){var o;const r=(o=this._popup)===null||o===void 0?void 0:o._hideAnimationProcessing;this._clearSearchTimer(),r?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}}_shouldCancelSearch(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e}_isOverlayNestedTarget(e){return!!_(e).closest(".dx-selectbox-popup-wrapper").length}_clearTextValue(){const e=this.option("selectedItem"),t=this._displayGetter(e);e&&t!==""&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent}_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()}_isFocused(){const e=F.getActiveElement(this.element());return super._isFocused()&&_(e).closest(this._input()).length>0}_getValueChangeEventOptionName(){return"customItemCreateEvent"}_renderValueChangeEvent(){this._isEditable()&&super._renderValueChangeEvent()}_fieldRenderData(){const{focusedElement:e}=this.option(),t=this._list&&this.option("opened")&&_(e);return t!=null&&t.length?this._list._getItemData(t):this.option("selectedItem")}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_shouldCloseOnItemClick(){const{selectionMode:e}=this.option();return!(this.option("showSelectionControls")&&e!=="single")}_listItemClickHandler(e){const t=this._getCurrentValue();this._focusListElement(_(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()}_shouldClearFilter(){return this._wasSearch()}_completeSelection(e){this._setValue(e)}_loadItem(e,t){const s=this,n=b();return super._loadItem(e,t).done((o=>{n.resolve(o)})).fail((o=>{if(o!=null&&o.shouldSkipCallback)return;const r=s.option("selectedItem");s.option("acceptCustomValue")&&e===s._valueGetter(r)?n.resolve(r):n.reject()})),n.promise()}_loadInputValue(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred}_isCustomItemSelected(){const e=this.option("selectedItem"),t=this._searchValue(),s=this._displayGetter(e);return!s||t!==s.toString()}_valueChangeEventHandler(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))}_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")}_createCustomItem(e){const t={text:e},s=this._customItemCreatingAction(t),n=ge(s,t.customItem);return E(s)&&Et.log("W0015","onCustomItemCreating","customItem"),n}_customItemAddedHandler(e){const t=this._searchValue(),s=this._createCustomItem(t);if(this._saveValueChangeEvent(e),s===void 0)throw this._renderValue(),Et.Error("E0121");Vo(s)?We(s).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(s)}_setCustomItem(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)}_clearValueHandler(e){return this._preventFiltering=!0,super._clearValueHandler(e),this._searchCanceled(),!1}_wasSearch(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e}_searchHandler(e){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),super._searchHandler(arguments)}_dataSourceFiltered(e){super._dataSourceFiltered(),e!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())}_valueSubstituted(){const e=this._input().get(0),t=this._searchValue().length,s=e.selectionStart===0&&e.selectionEnd===t,n=e.selectionStart!==e.selectionEnd,o=t===e.selectionEnd;return this._wasSearch()&&n&&!s&&o&&this._shouldSubstitutionBeRendered()}_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()}_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}const e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!e)return;const t=this._input(),s=t.val().length;if(s===0)return;const n=t.get(0),o=this._displayGetter(e).toString();n.value=o,this._caret({start:s,end:o.length})}_dispose(){this._renderInputValueAsync=w,delete this._loadItemDeferred,super._dispose()}_optionChanged(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":super._optionChanged(e),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:super._optionChanged(e)}}};oe("dxSelectBox",Q_);export{jp as $,tn as A,ht as B,Jt as C,ua as D,Yi as E,Ua as F,Qu as G,nu as H,_t as I,Rs as J,ju as K,sl as L,Gu as M,Uu as N,cf as O,Da as P,Ou as Q,rn as R,Q_ as S,ba as T,Aa as U,hp as V,cp as W,hf as X,el as Y,yh as Z,Ls as _,dh as a,Di as a0,lf as a1,ff as a2,df as a3,t_ as a4,Gi as a5,ic as a6,Dt as a7,pe as a8,te as a9,Ui as aa,V as ab,of as ac,Rc as ad,Tt as ae,ve as af,m_ as ag,rt as ah,Ge as ai,ji as aj,Gs as ak,js as al,qs as am,qu as an,Hu as ao,ku as ap,co as aq,da as ar,Za as as,R_ as at,O_ as au,mt as av,Ds as b,ca as c,sn as d,R as e,Oo as f,Gl as g,W_ as h,wa as i,_a as j,Xs as k,ho as l,Zt as m,Si as n,ma as o,As as p,je as q,qc as r,Ts as s,ln as t,jh as u,pa as v,Ie as w,Wh as x,su as y,en as z};
