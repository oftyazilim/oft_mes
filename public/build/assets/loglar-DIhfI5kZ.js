import{u as k}from"./pageTitle-DZ3lwo_g.js";import{d as T,r as d,G as _,a$ as x,b4 as C,g as E,o as I,f as i,b as e,m as t,e as u}from"./main-V5EO4bnM.js";import{D as S}from"./button-B8GD-RhG.js";import{D as P,r as R,t as A,s as F,a,g as G,h as L,i as V,j as Y,k as B,l as K,e as N,n as M,o as O,w as U,q as W,c as j,d as n}from"./data-grid-tCINHJKl.js";import{D as H}from"./load-panel-DfmTyKMG.js";import{e as q}from"./export_data_grid-BN3fYInl.js";import"./overlay-CcHqXnwZ.js";import"./m_select_box-vuYCiFke.js";import"./m_row_dragging-Cw4NaJwP.js";import{n as z}from"./notify-DTXj7FBj.js";import{e as Z}from"./exceljs.min-CwrSRV-E.js";import{s as $}from"./FileSaver-CQu8bA20.js";import{V as J}from"./VCol-BOvDuIU5.js";import{V as Q}from"./VRow-C6KOjiEi.js";import"./editor-D5QZv2de.js";import"./themes-BLijVOeX.js";import"./_commonjsHelpers-D6-XlEtG.js";/* empty css              */const X="/api/loglar",ge=T({__name:"loglar",setup(ee){const m=k();m.setTitle("Kullanıcı Logları"),m.setToplam(""),document.title="OFT - Kullanıcı Logları";const h=d(!0),c=d([]),s=d(!1),b=d(null),D=o=>{o.rowType==="data"&&o.column.dataField==="eylem"&&(o.cellElement.style.fontWeight="bold")},g=o=>{},y=()=>{p()},p=async()=>{s.value=!0;try{const o=await x.get(X);c.value=o.data.data}catch(o){console.error("Error fetching data:",o),z("Veri alınamadı","error",1500)}finally{s.value=!1}};_(()=>{p(),x.post("/api/log-kayit",{userId:w.value.id,sayfa:"Kullanıcı Logları",eylem:"Yükleme"})});const w=C("userData"),v=o=>{const l=new Z.Workbook,r=l.addWorksheet("KullaniciLoglari");q({component:o.component,worksheet:r,autoFilterEnabled:!0}).then(()=>{l.xlsx.writeBuffer().then(f=>{$(new Blob([f],{type:"application/octet-stream"}),"KullaniciLoglari.xlsx")})}),o.cancel=!0};return(o,l)=>(I(),E(Q,null,{default:i(()=>[e(J,{cols:"12"},{default:i(()=>[e(t(P),{id:"grid-satis",ref_key:"dataGridRef",ref:b,"data-source":c.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,onExporting:v,onFocusedRowChanged:g,onCellPrepared:D},{yenileTemplate:i(()=>[e(t(S),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:i(()=>l[1]||(l[1]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-refresh"}),u("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),default:i(()=>[e(t(R),null,{default:i(()=>[e(t(A),{column:"komut","summary-type":"count","display-format":"Toplam: {0} kayıt"}),e(t(F),{column:"komut","summary-type":"count","display-format":"Grup: {0} kayıt"})]),_:1}),e(t(a),{"data-field":"id",caption:"ID",visible:!0,width:"90"}),e(t(a),{"data-field":"user_id",caption:"USER ID",visible:!0,width:"80"}),e(t(a),{"data-field":"name",caption:"KULLANICI",visible:!0,width:"130"}),e(t(a),{"data-field":"tarih",caption:"TARİH","data-type":"date",width:150,visible:!0,alignment:"center",format:{formatter:r=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(r)).replace(/\//g,".")}},null,8,["format"]),e(t(a),{"data-field":"sayfa",caption:"SAYFA",visible:!0,width:"150"}),e(t(a),{"data-field":"eylem",caption:"EYLEM",visible:!0,width:"150"}),e(t(a),{"data-field":"ip",caption:"IP",visible:!0,width:"120"}),e(t(a),{"data-field":"unvan",caption:"ÜNVAN",visible:!0,width:"200"}),e(t(a),{"data-field":"proses",caption:"PROSES",visible:!0,width:"190"}),e(t(a),{"data-field":"ismerkezi_id",caption:"İŞ MERKEZİ ID",visible:!0,width:"90"}),e(t(a),{"data-field":"istasyon_id",caption:"İSTASYON ID",visible:!0,width:"90"}),e(t(a),{"data-field":"method",caption:"METOD",visible:!0,width:"90"}),e(t(a),{"data-field":"komut",caption:"KOMUT",visible:!0,width:"auto"}),e(t(G),{"auto-expand-all":h.value},null,8,["auto-expand-all"]),e(t(L),{visible:!0}),e(t(V),{visible:!0}),e(t(Y),{visible:!0}),e(t(B),{visible:!0}),e(t(K),{visible:!0,width:240,placeholder:"Ara..."}),e(t(N),{mode:"virtual"}),e(t(M),{enabled:!0,"allow-export-selected-data":!1}),e(t(O),{height:"540px",enabled:!0,mode:"select"},{default:i(()=>[e(t(U),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),e(t(W),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(t(j),null,{default:i(()=>[e(t(n),{location:"before",name:"groupPanel"}),e(t(n),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:y}),e(t(n),{name:"exportButton"}),e(t(n),{name:"columnChooserButton"}),e(t(n),{name:"searchPanel"})]),_:1}),e(t(H),{visible:s.value,"onUpdate:visible":l[0]||(l[0]=r=>s.value=r),"show-indicator":!0},null,8,["visible"])]),_:1},8,["data-source"])]),_:1})]),_:1}))}});export{ge as default};
