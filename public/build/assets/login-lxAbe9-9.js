const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-DGv30Ta5.js","assets/main-Cw89STZt.css"])))=>i.map(i=>d[i]);
import{d as se,r as d,aO as T,v as N,t as $,aV as re,aK as le,aN as ie,A as ne,a as ue,c as y,o as u,j as v,b as r,u as t,av as de,e as i,k as I,F as j,au as me,aw as ce,f as l,g as B,V as pe,aB as w,aJ as fe,aA as ye,L as _e,eA as ge,aM as D,aG as he}from"./main-DGv30Ta5.js";import{r as U,e as Ve}from"./validators-BwBNGiur.js";import{_ as be}from"./AppTextField.vue_vue_type_script_setup_true_lang-CoPCRaS4.js";import{p as ve}from"./cookies-BKoq7nke.js";import{u as K}from"./useGenerateImageVariant-C6g1wSef.js";import{a as we,b as ke,c as Le,d as Ce}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as Re,b as xe}from"./misc-mask-light-Ha4lQOdV.js";import{$ as Te}from"./api-FvnFZH5j.js";import{V as A}from"./VCol-C5dbBZ-O.js";import{V as Ie}from"./VImg-C6cvRfev.js";import{V as Ae}from"./VCard-orANWs1D.js";import{V as Y}from"./VCardText-ClFZhJ3f.js";import{V as H}from"./VAlert-BHu5pCas.js";import{V as Ee}from"./VForm-BeU5O4Km.js";import{V as J}from"./VRow-DQsiNNcM.js";import{V as Se}from"./VCheckbox-Cky29BIH.js";import"./helpers-BGv4x_9E.js";import"./focus--rcEl2oJ.js";import"./VTextField-wU6IweTd.js";/* empty css                   */import"./VCounter-CFDGw_KZ.js";import"./VField-YhFWwVwh.js";import"./easing-Bybner-F.js";import"./VInput-CuyGGHo4.js";import"./form-D9QKOJ2S.js";import"./forwardRefs-C-GTDzx5.js";import"./index-BNUiLowW.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-_vbx8eRm.js";import"./VCheckboxBtn-BCj0WkSO.js";import"./VSelectionControl-DAtTjQ4r.js";const ze={class:"intro-content"},Me={class:"intro-title-wrapper"},Ne={key:0,class:"intro-title"},Be=["aria-label"],Ge={key:0,class:"intro-sub"},Oe={class:"auth-logo d-flex align-center gap-x-3"},Pe={class:"auth-title"},qe={class:"position-relative bg-background w-100 me-0"},Fe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},$e=["src"],je={class:"d-flex align-center flex-wrap justify-space-between my-6"},Q="loginIntroShownV1",kt=se({__name:"login",setup(De){const W=K(Ce,Le,ke,we,!0),X=K(xe,Re),k=d(!1),E=T("userData"),L=N(()=>{var s;const a=E==null?void 0:E.value,e=(a==null?void 0:a.co_name)??(a==null?void 0:a.firma_adi)??(a==null?void 0:a.companyName)??((s=a==null?void 0:a.user)==null?void 0:s.co_name)??null;return((e?String(e).trim():"")||"kurum adı").toLowerCase()}),G=N(()=>{var a,e;return((e=(a=$)==null?void 0:a.app)==null?void 0:e.logo)??null}),O=re(),Z=le(),ee=ie(),C=d({email:void 0,password:void 0}),P=d(),c=d({email:"",password:""}),R=d(!1),h=d(!1),_=d(null),te=async()=>{var a;h.value=!0,_.value=null,C.value={email:void 0,password:void 0};try{try{ve()}catch{}const e=await Te("/auth/login",{method:"POST",body:{email:c.value.email,password:c.value.password},onResponseError({response:n}){var x,g;console.error("Login error:",n._data);const f=((x=n._data)==null?void 0:x.errors)||null;C.value=f||{email:"Giriş başarısız",password:"Giriş başarısız"},_.value=((g=n._data)==null?void 0:g.message)||(typeof n._data=="string"?n._data:null)||"Giriş işlemi başarısız oldu. Lütfen bilgilerinizi kontrol edin."}}),{accessToken:p,userData:o,userAbilityRules:s}=e,m=ge(s),F={path:"/",sameSite:"Lax",secure:typeof location<"u"?location.protocol==="https:":!1},z=R.value?{...F,maxAge:3600*24*30}:{...F,session:!0};T("userAbilityRules",z).value=s,ee.update(m);const oe=T("userData",z);oe.value=o;try{const n=window;n.__appTitleRef&&(n.__appTitleRef.value=o)}catch{}T("accessToken",z).value=p;try{const n=(o==null?void 0:o.co_name)??(o==null?void 0:o.firma_adi)??(o==null?void 0:o.companyName)??((a=o==null?void 0:o.user)==null?void 0:a.co_name),f=(n?String(n).trim():"kurum adı").toLowerCase();$.app.title=f;const{layoutConfig:x}=await D(async()=>{const{layoutConfig:g}=await import("./main-DGv30Ta5.js").then(M=>M.e_);return{layoutConfig:g}},__vite__mapDeps([0,1]));x.app.title=f;try{const g=await D(()=>import("./main-DGv30Ta5.js").then(M=>M.e$),__vite__mapDeps([0,1]));g.layoutConfig.app.title=f}catch{}}catch{}await he(()=>{const f=c.value.password==="pass1234"?"/force-password":O.query.to?String(O.query.to):"/home-page";Z.push(f)})}catch(e){console.error(e),_.value||(_.value="Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin.")}finally{h.value=!1}},ae=()=>{var a;(a=P.value)==null||a.validate().then(({valid:e})=>{e&&te()})},V=d(!1),b=d(!1),q=N(()=>(L.value||"").split(""));function S(){V.value=!1;try{localStorage.setItem(Q,"1")}catch{}}return ne(()=>{var s;try{b.value=(s=window.matchMedia("(prefers-reduced-motion: reduce)"))==null?void 0:s.matches}catch{}if((()=>{try{return localStorage.getItem(Q)==="1"}catch{return!1}})()||b.value){V.value=!1;return}V.value=!0;const e=1800+q.value.length*35,p=Math.min(3500,e);setTimeout(()=>{V.value&&S()},p);const o=m=>{m.key==="Escape"&&(S(),window.removeEventListener("keydown",o))};window.addEventListener("keydown",o)}),(a,e)=>{const p=ue("RouterLink"),o=be;return u(),y(j,null,[t(V)?(u(),y("div",{key:0,class:de(["login-intro",{"reduced-motion":t(b)}]),"aria-live":"polite"},[e[4]||(e[4]=i("div",{class:"intro-bg"},null,-1)),e[5]||(e[5]=i("div",{class:"intro-noise"},null,-1)),i("div",ze,[i("div",Me,[t(b)?(u(),y("h1",Ne,I(t(L)),1)):(u(),y("h1",{key:1,class:"intro-title-chars","aria-label":t(L)},[(u(!0),y(j,null,me(t(q),(s,m)=>(u(),y("span",{key:m,class:"char",style:ce({animationDelay:m*35+"ms"})},I(s===" "?" ":s),5))),128))],8,Be))]),t(b)?v("",!0):(u(),y("p",Ge,"Üretimde yeni bir gün başlıyor...")),i("button",{type:"button",class:"intro-skip",onClick:S,"aria-label":"Animasyonu Geç"},"Geç")])],2)):v("",!0),r(p,{to:"/"},{default:l(()=>[i("div",Oe,[t(G)?(u(),B(t(pe),{key:0,nodes:t(G)},null,8,["nodes"])):v("",!0),i("h1",Pe,I(t(L)),1)])]),_:1}),r(J,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[r(A,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[i("div",qe,[i("div",Fe,[r(Ie,{"max-width":"613",src:t(W),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),i("img",{class:"auth-footer-mask",src:t(X),alt:"auth-footer-mask",height:"280",width:"100"},null,8,$e)])]),_:1}),r(A,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[r(Ae,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:l(()=>[r(Y,null,{default:l(()=>e[6]||(e[6]=[i("h4",{class:"text-h4 mb-1"},[i("span",{class:"text-capitalize"}," OFT MES'e hoşgeldiniz' "),w("! 👋🏻 ")],-1),i("p",{class:"mb-0"}," Lütfen hesabınıza giriş yapın ve maceraya başlayın... ",-1)])),_:1,__:[6]}),r(Y,null,{default:l(()=>[t(h)?(u(),B(H,{key:0,type:"info",class:"mb-4"},{default:l(()=>e[7]||(e[7]=[w(" Giriş yapılıyor, lütfen bekleyin... ")])),_:1,__:[7]})):v("",!0),t(_)?(u(),B(H,{key:1,type:"error",class:"mb-4"},{default:l(()=>[w(I(t(_)),1)]),_:1})):v("",!0),r(t(Ee),{ref_key:"refVForm",ref:P,onSubmit:fe(ae,["prevent"])},{default:l(()=>[r(J,null,{default:l(()=>[r(A,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).email,"onUpdate:modelValue":e[0]||(e[0]=s=>t(c).email=s),label:"E-posta",placeholder:"oft@oft.com",type:"email",autofocus:"",rules:["requiredValidator"in a?a.requiredValidator:t(U),"emailValidator"in a?a.emailValidator:t(Ve)],"error-messages":t(C).email},null,8,["modelValue","rules","error-messages"])]),_:1}),r(A,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).password,"onUpdate:modelValue":e[1]||(e[1]=s=>t(c).password=s),label:"Şifre",placeholder:"············",rules:["requiredValidator"in a?a.requiredValidator:t(U)],type:t(k)?"text":"password",autocomplete:"password","error-messages":t(C).password,"append-inner-icon":t(k)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=s=>k.value=!t(k))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),i("div",je,[r(Se,{modelValue:t(R),"onUpdate:modelValue":e[3]||(e[3]=s=>ye(R)?R.value=s:null),label:"Beni Hatırla"},null,8,["modelValue"]),r(p,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:l(()=>e[8]||(e[8]=[w(" Şifremi Unuttum? ")])),_:1,__:[8]})]),r(_e,{block:"",type:"submit",loading:t(h),disabled:t(h)},{default:l(()=>e[9]||(e[9]=[w(" Giriş Yap ")])),_:1,__:[9]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{kt as default};
