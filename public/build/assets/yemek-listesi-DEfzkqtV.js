import{d as _,b5 as u,r as d,g as k,f as s,b as i,t as m,e as a,J as b,K as v,m as h,b1 as C,af as V,b0 as g,o as w}from"./main-PIO7dkvE.js";import{V as x,a as D}from"./VCard-Dd-LZgmu.js";import{V as T}from"./VCardText-XQayp_gG.js";import"./VAvatar-DefvcMrz.js";import"./VImg-DRuoOn4X.js";const B={class:"mt-6"},Y=["src"],S=_({__name:"yemek-listesi",setup(F){const p=u("userAbilityRules").value||[];let o=!1;p.forEach((e,t)=>{(e.action==="all"&&e.subject==="Planlama"||e.action==="read"&&e.subject==="Planlama")&&(o=!0)});const l=d(null),r=d("/storage/yemeklistesi/yemeklistesi.pdf"),f=u("userData");function c(e){var n;const t=(n=e.target.files)==null?void 0:n[0];t&&(l.value=t)}async function y(){if(!l.value)return;const e=new FormData;e.append("pdf",l.value),e.append("user_id",f.value.id);try{await g.post("/api/upload-yemek-listesi",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Yemek listesi yüklendi!"),r.value="/storage/yemeklistesi/yemeklistesi.pdf?"+new Date().getTime()}catch(t){alert("Yükleme başarısız oldu."),console.error(t)}}return(e,t)=>(w(),k(x,null,{default:s(()=>[i(D,null,{default:s(()=>t[0]||(t[0]=[m("Yemek Listesi")])),_:1,__:[0]}),i(T,null,{default:s(()=>[a("div",null,[b(a("form",{onSubmit:C(y,["prevent"])},[a("input",{type:"file",accept:"application/pdf",onChange:c},null,32),i(V,{type:"submit",color:"primary",class:"mt-2"},{default:s(()=>t[1]||(t[1]=[m("Yükle")])),_:1,__:[1]})],544),[[v,h(o)]])]),a("div",B,[a("iframe",{src:r.value+"#toolbar=0&navpanes=0&scrollbar=0",width:"100%",height:"800px",style:{border:"none"}},null,8,Y)])]),_:1})]),_:1}))}});export{S as default};
