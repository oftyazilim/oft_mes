import{d as g,r as n,i as c,s as d,g as k,f as o,b as i,e as x,aF as m,T as b,o as T}from"./main-BLbM4nB1.js";import{n as s}from"./notify-DDAsMVZP.js";import{V as C}from"./VDialog-xpY-bS8n.js";import{a as w,b as U,V as B}from"./VCard-DY6RUzkO.js";import{V as N}from"./VCardText-DtqUR7OM.js";import{V as p}from"./VTextField-DFuap3hX.js";import{V as f}from"./VSelect-C-hgfZBw.js";import{V as A}from"./VTextarea-C0ZF9fCE.js";const q=g({__name:"HataBildirimiDialog",setup(D,{expose:y}){const u=n(!1),V=n([]),v=n([]),a=n({hata_sebebi_id:null,not:"",alicilar:[],gonderen_id:13,is_emri_no:"",urun_kodu:"",urun_adi:""}),r=n(!1);c(async()=>{const[t,e]=await Promise.all([d.get("/api/hata-sebepleri"),d.get("/api/mail-alicilari")]);V.value=t.data,v.value=e.data});const _=async()=>{if(!a.value.hata_sebebi_id){s({message:"Lütfen bir hata sebebi seçin.",type:"warning",displayTime:3e3});return}if(!a.value.alicilar.length){s({message:"Lütfen en az bir alıcı seçin.",type:"warning",displayTime:3e3});return}r.value=!0;try{await d.post("/api/hata-bildir",a.value),s({message:"Mail başarıyla gönderildi",type:"success",displayTime:3e3}),u.value=!1}catch(t){s({message:"Gönderim sırasında hata oluştu",type:"error",displayTime:3e3}),console.error(t)}finally{r.value=!1}};return y({dialog:u,acDialog:t=>{a.value.is_emri_no=t.isEmriNo,a.value.urun_kodu=t.urunKodu,a.value.urun_adi=t.urunAdi,u.value=!0}}),(t,e)=>(T(),k(C,{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=l=>u.value=l),"max-width":"400",persistent:""},{default:o(()=>[i(B,null,{default:o(()=>[i(w,{class:"text-h6 pb-1"},{default:o(()=>e[8]||(e[8]=[m("Hata Bildirimi Gönder")])),_:1,__:[8]}),e[11]||(e[11]=x("hr",null,null,-1)),i(N,null,{default:o(()=>[i(p,{class:"pb-4",modelValue:a.value.is_emri_no,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.is_emri_no=l),label:"İş Emri No",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"]),i(p,{class:"pb-4",modelValue:a.value.urun_kodu,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.urun_kodu=l),label:"Ürün Kodu",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"]),i(p,{class:"pb-4",modelValue:a.value.urun_adi,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.urun_adi=l),label:"Ürün Adı",variant:"outlined",density:"compact",readonly:""},null,8,["modelValue"]),i(f,{class:"pb-2 pt-0",modelValue:a.value.hata_sebebi_id,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.hata_sebebi_id=l),items:V.value,"item-title":"tanim","item-value":"id",label:"Hata Sebebi",density:"compact",outlined:"",required:""},null,8,["modelValue","items"]),i(A,{class:"py-2",modelValue:a.value.not,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.not=l),label:"Açıklama / Not",density:"compact",outlined:"",rows:"4"},null,8,["modelValue"]),i(f,{class:"pa-0 pt-2",modelValue:a.value.alicilar,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.alicilar=l),items:v.value,"item-title":"email","item-value":"email",label:"Gönderilecek Kişiler",multiple:"",chips:"",density:"compact",outlined:""},null,8,["modelValue","items"])]),_:1}),i(U,{class:"justify-end"},{default:o(()=>[i(b,{onClick:e[6]||(e[6]=l=>u.value=!1),variant:"text"},{default:o(()=>e[9]||(e[9]=[m("İptal")])),_:1,__:[9]}),i(b,{color:"primary",onClick:_,loading:r.value},{default:o(()=>e[10]||(e[10]=[m("Gönder")])),_:1,__:[10]},8,["loading"])]),_:1})]),_:1,__:[11]})]),_:1},8,["modelValue"]))}});export{q as _};
