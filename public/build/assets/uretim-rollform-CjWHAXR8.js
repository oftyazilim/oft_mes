import{_ as ti}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CUzgbLg5.js";import{_ as ni}from"./AppSelect.vue_vue_type_script_setup_true_lang-ClU7H881.js";import{db as ii,eh as oi,d5 as ai,d0 as Lt,d as w,r as h,v as I,A as li,aG as Fe,eZ as si,w as Ne,M as ri,aO as ui,aI as P,c as K,o as H,j as Ft,e as a,ai as di,b as l,k as g,f as c,aw as ci,aB as _,u as x,aS as Ve,av as Xe,cT as Y,aJ as X,L as O,m as Re,F as de,aX as Je,l as pi}from"./main-DCTzRXlG.js";import{u as mi}from"./pageTitle-Co54Rrwp.js";import{p as fi,a as k}from"./editor-DkJcNtan.js";import{a as vi}from"./overlay-X70S9XjV.js";import{B as hi,a as gi,b as _i,c as bi,d as yi,e as xi,f as wi}from"./base_range_container-DTNlGChj.js";import{p as ki,s as jt,Y as Ci,v as Kt,n as Si}from"./m_base_widget-BjthlGcH.js";import{D as R,k as Ni,s as Ti}from"./data-grid-Dqqm95w8.js";import{D as Ii,a as Di}from"./popup-C01i0IPO.js";import{n as T}from"./notify-DTFqLzdw.js";import{V as M}from"./VCol-CS0Q7KB3.js";import{V as ce,a as pe,b as Ze}from"./VCard-BncKXtyi.js";import{V as J}from"./VRow-BBRMM--Q.js";import{V as Ai}from"./VSwitch-DEUU9ZAj.js";import{V as Qe}from"./VCardText-DhiBZ5aK.js";import{V as Vt}from"./VTextField-DQvP3y-U.js";import{V as et}from"./VSpacer-DXsVkPe3.js";import{V as tt}from"./VDialog-DOFosEoa.js";import"./focus-BNHhFyVA.js";import"./VTextarea-Caq9qbbD.js";/* empty css                   */import"./VCounter-CRp2IXCY.js";import"./index-CIXxXFLS.js";import"./VField-Y2uOYs8f.js";import"./easing-Bybner-F.js";import"./VInput-CZ0p8pgH.js";import"./form-BY3jqAhR.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-Bxh-y3rO.js";import"./VList-XytivpMy.js";import"./ssrBoot-DsHIbpzm.js";import"./createSimpleFunctional-vPO4U9sU.js";import"./VAvatar-CI5fi2vF.js";import"./VImg-57XdJR07.js";import"./VDivider-BDU-JRTi.js";import"./dialog-transition-Ro2ngC1Q.js";import"./VMenu-Bb07_KWd.js";import"./VOverlay-CPNSiNfW.js";import"./delay-CJl1CYkv.js";import"./lazy-xfGsQO4z.js";import"./scopeId-CwLlTXlU.js";import"./VCheckboxBtn-Bz5F9lRr.js";import"./VSelectionControl-NPRrrcty.js";import"./VChip-B0zZsxuY.js";import"./VSlideGroup-Nh0ii8DB.js";import"./m_row_dragging-CItcxfU4.js";import"./m_select_box-CZua4170.js";import"./themes-CExbEes8.js";/* empty css              */const nt={dispose:function(){this._centerTemplateGroup.linkOff().dispose()},members:{_renderCenterTemplate(){const t=this.option("centerTemplate"),i=this._centerTemplateGroup.clear();if(!t)return;i.attr({visibility:"hidden"});const o=this._getCenter();this._getTemplate(t).render({model:this,container:i.element,onRendered:()=>{const s=i,r=s.getBBox(),p=r.x+r.width/2,d=r.y+r.height/2;s.move(o.x-p,o.y-d),s.attr({visibility:"visible"})}})}},customize(t){t.addChange({code:"CENTER_TEMPLATE",handler:function(){this._renderCenterTemplate()},option:"centerTemplate"})}},Ei={name:"center_template_gauge",init:ii,dispose:nt.dispose,extenders:{_initCore(){this._createCenterTemplateGroup()},_renderContent(){const t=ki(this._themeManager._font);this._centerTemplateGroup.css(t),this._requestChange(["CENTER_TEMPLATE"])},_updateExtraElements(){this._requestChange(["CENTER_TEMPLATE"])}},members:{_renderCenterTemplate:nt.members._renderCenterTemplate,_createCenterTemplateGroup(){this._centerTemplateGroup=this._renderer.g().attr({class:"dxg-hole-template"}).linkOn(this._renderer.root,"center-template").linkAppend()}},customize:nt.customize},Oi={gauge:Ei},z=Number,Ie=jt,Ht=Ci;function ot(t,i){return t&&t.radius-i<=0&&(t.radius=i+1),t}const Gt=hi.inherit({_move:function(){const t=this._options,i=Ht(this._actualPosition);this._rootElement.rotate(i,t.x,t.y),this._trackerElement&&this._trackerElement.rotate(i,t.x,t.y)},_isEnabled:function(){return this._options.width>0},_isVisible:function(t){return t.radius-z(this._options.indentFromCenter)>0},_getTrackerSettings:function(){const t=this._options,i=this._getRadius(),o=this._getIndentFromCenter(),s=t.x,r=t.y-(i+o)/2;let p=t.width/2,d=(i-o)/2;return p>10||(p=10),d>10||(d=10),{points:[s-p,r-d,s-p,r+d,s+p,r+d,s+p,r-d]}},_render:function(){this._renderPointer()},_clearPointer:function(){delete this._element},_clear:function(){this._clearPointer()},_getIndentFromCenter:function(t){return Number(this._options.indentFromCenter)||0},_getRadius:function(){return 0},measure:function(t){const i={max:t.radius};return this._options.indentFromCenter<0&&(i.inverseHorizontalOffset=i.inverseVerticalOffset=-z(this._options.indentFromCenter)),i},getTooltipParameters:function(){const t=this._options,i=Ie(this._actualPosition),o=(this._getRadius()+this._getIndentFromCenter())/2;return{x:t.x+i.cos*o,y:t.y-i.sin*o,value:this._currentValue,color:t.color,offset:t.width/2}}}),at=Gt.inherit({_isVisible:function(t){const i=this._adjustOffset(Number(this._options.indentFromCenter),t.radius),o=this._adjustOffset(Number(this._options.offset),t.radius);return t.radius-i-o>0},getOffset:function(){return 0},_adjustOffset:function(t,i){const o=Number(this._options.beginAdaptingAtRadius),s=i/o;return s<1&&(t=Math.floor(t*s)),t||0},_getIndentFromCenter:function(t){return this._adjustOffset(Number(this._options.indentFromCenter),this._options.radius)},_getRadius:function(){const t=this._options;return t.radius-this._adjustOffset(Number(t.offset),t.radius)},_renderSpindle:function(){const t=this,i=t._options,o=i.radius,s=2*this._adjustOffset(z(i.spindleSize)/2,o);let r=2*this._adjustOffset(z(i.spindleGapSize)/2,o)||0;r>0&&(r=r<=s?r:s),s>0&&(t._spindleOuter=t._spindleOuter||t._renderer.circle().append(t._rootElement),t._spindleInner=t._spindleInner||t._renderer.circle().append(t._rootElement),t._spindleOuter.attr({class:"dxg-spindle-border",cx:i.x,cy:i.y,r:s/2}),t._spindleInner.attr({class:"dxg-spindle-hole",cx:i.x,cy:i.y,r:r/2,fill:i.containerBackgroundColor}))},_render:function(){this.callBase(),this._renderSpindle()},_clear:function(){this.callBase(),delete this._spindleOuter,delete this._spindleInner}}),qt=at.inherit({_renderPointer:function(){const t=this._options,i=t.y-this._getRadius(),o=t.y-this._getIndentFromCenter(),s=t.x-t.width/2,r=s+z(t.width);this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[s,o,s,i,r,i,r,o]})}}),Mi=at.inherit({_renderPointer:function(){const t=this._options,i=t.y-this._getRadius(),o=t.y-this._getIndentFromCenter(),s=t.x-t.width/2,r=t.x+t.width/2;this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[s,o,t.x,i,r,o]})}}),zi=at.inherit({_renderPointer:function(){const t=this._options,i=t.x-t.width/2,o=t.x+t.width/2,s=t.y-this._getRadius(),r=t.y-this._getIndentFromCenter(),p=z(t.secondFraction)||0;let d,b;p>=1?d=b=r:p<=0?d=b=s:(b=s+(r-s)*p,d=b+z(t.space)),this._firstElement=this._firstElement||this._renderer.path([],"area").append(this._rootElement),this._spaceElement=this._spaceElement||this._renderer.path([],"area").append(this._rootElement),this._secondElement=this._secondElement||this._renderer.path([],"area").append(this._rootElement),this._firstElement.attr({points:[i,r,i,d,o,d,o,r]}),this._spaceElement.attr({points:[i,d,i,b,o,b,o,d],class:"dxg-hole",fill:t.containerBackgroundColor}),this._secondElement.attr({points:[i,b,i,s,o,s,o,b],class:"dxg-part",fill:t.secondColor})},_clearPointer:function(){delete this._firstElement,delete this._secondElement,delete this._spaceElement}}),Fi=Gt.inherit({_isEnabled:function(){return this._options.length>0&&this._options.width>0},_isVisible:t=>!0,resize(t){return this.callBase(ot(t,0))},_render:function(){const t=this._options,i=t.x,o=t.y-t.radius,s=t.width/2||0,r=o-z(t.length);this._element=this._element||this._renderer.path([],"area").append(this._rootElement);const p={points:[i,o,i-s,r,i+s,r],stroke:"none","stroke-width":0,"stroke-linecap":"square"};t.space>0&&(p["stroke-width"]=Math.min(t.space,t.width/4)||0,p.stroke=p["stroke-width"]>0&&t.containerBackgroundColor||"none"),this._element.attr(p).sharp()},_clear:function(){delete this._element},_getTrackerSettings:function(){const t=this._options,i=t.x,o=t.y-t.radius-t.length/2;let s=t.width/2,r=t.length/2;return s>10||(s=10),r>10||(r=10),{points:[i-s,o-r,i-s,o+r,i+s,o+r,i+s,o-r]}},measure:function(t){return{min:t.radius,max:t.radius+z(this._options.length)}},getTooltipParameters:function(){const t=this._options,i=Ie(this._actualPosition),o=t.radius+t.length/2,s=this.callBase();return s.x=t.x+i.cos*o,s.y=t.y-i.sin*o,s.offset=t.length/2,s}}),Vi=gi.inherit({_isEnabled:function(){return!0},_isVisible:t=>!0,resize(t){return this.callBase(ot(t,0))},_getTextCloudOptions:function(){const t=Ie(this._actualPosition),i=Kt(this._actualPosition);return{x:this._options.x+t.cos*this._options.radius,y:this._options.y-t.sin*this._options.radius,type:i>270?"left-top":i>180?"top-right":i>90?"right-bottom":"bottom-left"}},measure:function(t){const i=z(this._options.arrowLength)||0;this._measureText();const o=this._textFullHeight+i,s=this._textFullWidth+i;return{min:t.radius,max:t.radius,horizontalOffset:s,verticalOffset:o,inverseHorizontalOffset:s,inverseVerticalOffset:o}}}),Ri=_i.inherit({_isEnabled:function(){return this._options.size>0},_isVisible:t=>!0,resize(t){return this.callBase(ot(t,z(this._options.size)))},_createBarItem:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"}).append(this._rootElement)},_createTracker:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"})},_setBarSides:function(){this._maxSide=this._options.radius,this._minSide=this._maxSide-z(this._options.size)},_getSpace:function(){const t=this._options;return t.space>0?180*t.space/t.radius/Math.PI:0},_isTextVisible:function(){return(this._options.text||{}).indent>0},_setTextItemsSides:function(){const t=this._options,i=z(t.text.indent);this._lineFrom=t.y-t.radius,this._lineTo=this._lineFrom-i,this._textRadius=t.radius+i},_getPositions:function(){const t=this._basePosition,i=this._actualPosition;let o,s;return t>=i?(o=t,s=i):(o=i,s=t),{start:this._startPosition,end:this._endPosition,main1:o,main2:s,back1:Math.min(o+this._space,this._startPosition),back2:Math.max(s-this._space,this._endPosition)}},_buildItemSettings:function(t,i){return{x:this._options.x,y:this._options.y,innerRadius:this._minSide,outerRadius:this._maxSide,startAngle:i,endAngle:t}},_updateTextPosition:function(){const t=Ie(this._actualPosition);let i=this._options.x+this._textRadius*t.cos,o=this._options.y-this._textRadius*t.sin;i+=t.cos*this._textWidth*.6,o-=t.sin*this._textHeight*.6,this._text.attr({x:i,y:o+this._textVerticalOffset})},_updateLinePosition:function(){const t=this._options.x;let i,o;this._basePosition>this._actualPosition?(i=t-2,o=t):this._basePosition<this._actualPosition?(i=t,o=t+2):(i=t-1,o=t+1),this._line.attr({points:[i,this._lineFrom,i,this._lineTo,o,this._lineTo,o,this._lineFrom]}).rotate(Ht(this._actualPosition),t,this._options.y).sharp()},_getTooltipPosition:function(){const t=Ie((this._basePosition+this._actualPosition)/2),i=(this._minSide+this._maxSide)/2;return{x:this._options.x+t.cos*i,y:this._options.y-t.sin*i}},measure:function(t){const i=this,o={min:t.radius-z(i._options.size),max:t.radius};return i._measureText(),i._hasText&&(o.max+=z(i._options.text.indent),o.horizontalOffset=i._textWidth,o.verticalOffset=i._textHeight),o}}),me=Number,Rt=Math.max,$i=bi.inherit({_processOptions:function(){const t=this;switch(t._inner=t._outer=0,Si(t._options.orientation)){case"inside":t._inner=1;break;case"center":t._inner=t._outer=.5;break;default:t._outer=1}},_isVisible:function(t){let i=this._options.width;return i=me(i)||Rt(me(i.start),me(i.end)),t.radius-this._inner*i>0},_createRange:function(t,i){const o=(t.startWidth+t.endWidth)/2;return this._renderer.arc(i.x,i.y,i.radius-this._inner*o,i.radius+this._outer*o,this._translator.translate(t.end),this._translator.translate(t.start)).attr({"stroke-linejoin":"round"})},measure:function(t){let i=this._options.width;return i=me(i)||Rt(me(i.start),me(i.end)),{min:t.radius-this._inner*i,max:t.radius+this._outer*i}}}),$t=isFinite,Pt=Kt,Bt=jt,Pi=Math.abs,B=Math.max,Te=Math.min,it=Math.round,Bi=ai,Li=Math.PI;function ji(t,i){const o=Bt(t),s=Bt(i),r=o.cos,p=o.sin,d=s.cos,b=s.sin;return{left:p<=0&&b>=0||p<=0&&b<=0&&r<=d||p>=0&&b>=0&&r>=d?-1:Te(r,d,0),right:p>=0&&b<=0||p>=0&&b>=0&&r>=d||p<=0&&b<=0&&r<=d?1:B(r,d,0),up:r<=0&&d>=0||r<=0&&d<=0&&p>=b||r>=0&&d>=0&&p<=b?-1:-B(p,b,0),down:r>=0&&d<=0||r>=0&&d>=0&&p<=b||r<=0&&d<=0&&p>=b?1:-Te(p,b,0)}}const ve=yi.inherit({_rootClass:"dxg-circular-gauge",_factoryMethods:{rangeContainer:"createCircularRangeContainer",indicator:"createCircularIndicator"},_gridSpacingFactor:17,_scaleTypes:{type:"polarAxes",drawingType:"circular"},_getThemeManagerOptions(){const t=this.callBase.apply(this,arguments);return t.subTheme="_circular",t},_updateScaleTickIndent:function(t){const i=t.label.indentFromTick,o=t.tick.visible?t.tick.length:0,s=this._scale.measureLabels(Lt({},this._canvas)),r=t.orientation,p=o;let d=i;if(i>=0)r==="outside"?d+=p:r==="center"&&(d+=p/2);else{const b=B(s.width,s.height);d-=b,r==="inside"?d-=p:r==="center"&&(d-=p/2)}t.label.indentFromAxis=d,this._scale.updateOptions(t)},_setupCodomain:function(){const t=this.option("geometry")||{};let i=t.startAngle,o=t.endAngle,s;i=$t(i)?Pt(i):225,o=$t(o)?Pt(o):-45,Pi(i-o)<1?(o-=360,s={left:-1,up:-1,right:1,down:1}):(i<o&&(o-=360),s=ji(i,o)),this._area={x:0,y:0,radius:100,startCoord:i,endCoord:o,sides:s},this._translator.setCodomain(i,o)},_getCenter:function(){return this._getElementLayout()},_shiftScale:function(t){const i=this._scale,o=i.getCanvas();o.width=o.height=2*t.radius,i.draw(o);const s=i.getCenter();i.shift({right:t.x-s.x,bottom:t.y-s.y})},_getScaleLayoutValue:function(){return this._area.radius},_getTicksOrientation:function(t){return t.orientation},_getTicksCoefficients:function(t){const i={inner:0,outer:1};return t.orientation==="inside"?(i.inner=1,i.outer=0):t.orientation==="center"&&(i.inner=i.outer=.5),i},_correctScaleIndents:function(t,i,o){i>=0?(t.horizontalOffset=i+o.width,t.verticalOffset=i+o.height):(t.horizontalOffset=t.verticalOffset=0,t.min-=-i+B(o.width,o.height)),t.inverseHorizontalOffset=o.width/2,t.inverseVerticalOffset=o.height/2},_measureMainElements:function(t,i){const o=this._area.radius;let s=0,r=1/0,p=0,d=0,b=0,f=0;const G=this._scale;return Bi(t.concat(G),(function(he,Q){const N=Q.measure?Q.measure({radius:o-Q.getOffset()}):i;N.min>0&&(r=Te(r,N.min)),N.max>0&&(s=B(s,N.max)),N.horizontalOffset>0&&(p=B(p,N.max+N.horizontalOffset)),N.verticalOffset>0&&(d=B(d,N.max+N.verticalOffset)),N.inverseHorizontalOffset>0&&(b=B(b,N.inverseHorizontalOffset)),N.inverseVerticalOffset>0&&(f=B(f,N.inverseVerticalOffset))})),p=B(p-s,0),d=B(d-s,0),{minRadius:r,maxRadius:s,horizontalMargin:p,verticalMargin:d,inverseHorizontalMargin:b,inverseVerticalMargin:f}},_applyMainLayout:function(t,i){const o=this._measureMainElements(t,i),s=this._area,r=s.sides,p={left:(r.left<-.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,right:(r.right>.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,top:(r.up<-.1?o.verticalMargin:o.inverseVerticalMargin)||0,bottom:(r.down>.1?o.verticalMargin:o.inverseVerticalMargin)||0},d=Ki(this._innerRect,(r.down-r.up)/(r.right-r.left),p);let b=Te(ne(d)/(r.right-r.left),ie(d)/(r.down-r.up));b=b-o.maxRadius+s.radius;const f=d.left-ne(d)*r.left/(r.right-r.left),G=d.top-ie(d)*r.up/(r.down-r.up);s.x=it(f),s.y=it(G),s.radius=b,d.left-=p.left,d.right+=p.right,d.top-=p.top,d.bottom+=p.bottom,this._innerRect=d},_getElementLayout:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{x:this._area.x,y:this._area.y,radius:it(this._area.radius-t)}},_getApproximateScreenRange:function(){const t=this._area;let i=Te(this._canvas.width/(t.sides.right-t.sides.left),this._canvas.height/(t.sides.down-t.sides.up));return i>t.totalRadius&&(i=t.totalRadius),i*=.8,-this._translator.getCodomainRange()*i*Li/180},_getDefaultSize:function(){return{width:300,height:300}},_factory:oi(xi.prototype._factory)});function ne(t){return t.right-t.left}function ie(t){return t.bottom-t.top}function Ki(t,i,o){const s=Lt({},t);let r,p=0,d=0;return o=o||{},i>0&&(s.left+=o.left||0,s.right-=o.right||0,s.top+=o.top||0,s.bottom-=o.bottom||0,ne(s)>0&&ie(s)>0?(r=ie(s)/ne(s),r>1?i<r?p=ne(s):d=ie(s):i>r?d=ie(s):p=ne(s),p>0||(p=d/i),d>0||(d=p*i),p=(ne(s)-p)/2,d=(ie(s)-d)/2,s.left+=p,s.right-=p,s.top+=d,s.bottom-=d):(s.left=s.right=(s.left+s.right)/2,s.top=s.bottom=(s.top+s.bottom)/2)),s}const Z=ve.prototype._factory.indicators={};ve.prototype._factory.createIndicator=wi(Z);Z._default=qt;Z.rectangleneedle=qt;Z.triangleneedle=Mi;Z.twocolorneedle=zi;Z.trianglemarker=Fi;Z.textcloud=Vi;Z.rangebar=Ri;ve.prototype._factory.RangeContainer=$i;vi("dxCircularGauge",ve);ve.addPlugin(Oi.gauge);/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Ut={props:{animation:Object,centerTemplate:{},containerBackgroundColor:String,disabled:Boolean,elementAttr:Object,export:Object,geometry:Object,loadingIndicator:Object,margin:Object,onDisposing:Function,onDrawn:Function,onExported:Function,onExporting:Function,onFileSaving:Function,onIncidentOccurred:Function,onInitialized:Function,onOptionChanged:Function,onTooltipHidden:Function,onTooltipShown:Function,pathModified:Boolean,rangeContainer:Object,redrawOnResize:Boolean,rtlEnabled:Boolean,scale:Object,size:Object,subvalueIndicator:Object,subvalues:Array,theme:String,title:[Object,String],tooltip:Object,value:Number,valueIndicator:Object},emits:{"update:isActive":null,"update:hoveredElement":null,"update:animation":null,"update:centerTemplate":null,"update:containerBackgroundColor":null,"update:disabled":null,"update:elementAttr":null,"update:export":null,"update:geometry":null,"update:loadingIndicator":null,"update:margin":null,"update:onDisposing":null,"update:onDrawn":null,"update:onExported":null,"update:onExporting":null,"update:onFileSaving":null,"update:onIncidentOccurred":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onTooltipHidden":null,"update:onTooltipShown":null,"update:pathModified":null,"update:rangeContainer":null,"update:redrawOnResize":null,"update:rtlEnabled":null,"update:scale":null,"update:size":null,"update:subvalueIndicator":null,"update:subvalues":null,"update:theme":null,"update:title":null,"update:tooltip":null,"update:value":null,"update:valueIndicator":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=ve,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},export:{isCollectionItem:!1,optionName:"export"},geometry:{isCollectionItem:!1,optionName:"geometry"},loadingIndicator:{isCollectionItem:!1,optionName:"loadingIndicator"},margin:{isCollectionItem:!1,optionName:"margin"},rangeContainer:{isCollectionItem:!1,optionName:"rangeContainer"},scale:{isCollectionItem:!1,optionName:"scale"},size:{isCollectionItem:!1,optionName:"size"},subvalueIndicator:{isCollectionItem:!1,optionName:"subvalueIndicator"},title:{isCollectionItem:!1,optionName:"title"},tooltip:{isCollectionItem:!1,optionName:"tooltip"},valueIndicator:{isCollectionItem:!1,optionName:"valueIndicator"}}}};fi(Ut);const Hi=w(Ut),Wt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:duration":null,"update:easing":null,"update:enabled":null},props:{duration:Number,easing:String,enabled:Boolean}};k(Wt);const Gi=w(Wt);Gi.$_optionName="animation";const Yt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};k(Yt);const qi=w(Yt);qi.$_optionName="backgroundColor";const Xt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,dashStyle:String,opacity:Number,visible:Boolean,width:Number}};k(Xt);const Ui=w(Xt);Ui.$_optionName="border";const Jt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};k(Jt);const Wi=w(Jt);Wi.$_optionName="color";const Zt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:enabled":null,"update:fileName":null,"update:formats":null,"update:margin":null,"update:printingEnabled":null,"update:svgToCanvas":null},props:{backgroundColor:String,enabled:Boolean,fileName:String,formats:Array,margin:Number,printingEnabled:Boolean,svgToCanvas:Function}};k(Zt);const Qt=w(Zt);Qt.$_optionName="export";const en={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:family":null,"update:opacity":null,"update:size":null,"update:weight":null},props:{color:String,family:String,opacity:Number,size:[Number,String],weight:Number}};k(en);const Yi=w(en);Yi.$_optionName="font";const tn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null,"update:useCurrencyAccountingStyle":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String,useCurrencyAccountingStyle:Boolean}};k(tn);const Xi=w(tn);Xi.$_optionName="format";const nn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:endAngle":null,"update:startAngle":null},props:{endAngle:Number,startAngle:Number}};k(nn);const on=w(nn);on.$_optionName="geometry";const an={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:hideFirstOrLast":null,"update:indentFromTick":null,"update:overlappingBehavior":null,"update:useRangeColors":null,"update:visible":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],hideFirstOrLast:String,indentFromTick:Number,overlappingBehavior:String,useRangeColors:Boolean,visible:Boolean}};k(an);const lt=w(an);lt.$_optionName="label";lt.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const ln={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:font":null,"update:show":null,"update:text":null},props:{backgroundColor:String,font:Object,show:Boolean,text:String}};k(ln);const sn=w(ln);sn.$_optionName="loadingIndicator";sn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const rn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:bottom":null,"update:left":null,"update:right":null,"update:top":null},props:{bottom:Number,left:Number,right:Number,top:Number}};k(rn);const Ji=w(rn);Ji.$_optionName="margin";const un={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};k(un);const dn=w(un);dn.$_optionName="minorTick";const cn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:endValue":null,"update:startValue":null},props:{color:[Object,String],endValue:Number,startValue:Number}};k(cn);const fe=w(cn);fe.$_optionName="ranges";fe.$_isCollectionItem=!0;fe.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"}};const pn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:offset":null,"update:orientation":null,"update:palette":null,"update:paletteExtensionMode":null,"update:ranges":null,"update:width":null},props:{backgroundColor:[Object,String],offset:Number,orientation:String,palette:[Array,String],paletteExtensionMode:String,ranges:Array,width:Number}};k(pn);const st=w(pn);st.$_optionName="rangeContainer";st.$_expectedChildren={backgroundColor:{isCollectionItem:!1,optionName:"backgroundColor"},range:{isCollectionItem:!0,optionName:"ranges"}};const mn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDecimals":null,"update:customMinorTicks":null,"update:customTicks":null,"update:endValue":null,"update:label":null,"update:minorTick":null,"update:minorTickInterval":null,"update:orientation":null,"update:scaleDivisionFactor":null,"update:startValue":null,"update:tick":null,"update:tickInterval":null},props:{allowDecimals:Boolean,customMinorTicks:Array,customTicks:Array,endValue:Number,label:Object,minorTick:Object,minorTickInterval:Number,orientation:String,scaleDivisionFactor:Number,startValue:Number,tick:Object,tickInterval:Number}};k(mn);const rt=w(mn);rt.$_optionName="scale";rt.$_expectedChildren={label:{isCollectionItem:!1,optionName:"label"},minorTick:{isCollectionItem:!1,optionName:"minorTick"},tick:{isCollectionItem:!1,optionName:"tick"}};const fn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:blur":null,"update:color":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null},props:{blur:Number,color:String,offsetX:Number,offsetY:Number,opacity:Number}};k(fn);const Zi=w(fn);Zi.$_optionName="shadow";const vn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:width":null},props:{height:Number,width:Number}};k(vn);const Qi=w(vn);Qi.$_optionName="size";const hn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null,"update:textOverflow":null,"update:wordWrap":null},props:{font:Object,offset:Number,text:String,textOverflow:String,wordWrap:String}};k(hn);const gn=w(hn);gn.$_optionName="subtitle";gn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const _n={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};k(_n);const bn=w(_n);bn.$_optionName="subvalueIndicator";bn.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const yn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:indent":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],indent:Number}};k(yn);const xn=w(yn);xn.$_optionName="text";xn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const wn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};k(wn);const kn=w(wn);kn.$_optionName="tick";const Cn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:textOverflow":null,"update:verticalAlignment":null,"update:wordWrap":null},props:{font:Object,horizontalAlignment:String,margin:[Number,Object],placeholderSize:Number,subtitle:[Object,String],text:String,textOverflow:String,verticalAlignment:String,wordWrap:String}};k(Cn);const Sn=w(Cn);Sn.$_optionName="title";Sn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},margin:{isCollectionItem:!1,optionName:"margin"},subtitle:{isCollectionItem:!1,optionName:"subtitle"}};const Nn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:border":null,"update:color":null,"update:container":null,"update:contentTemplate":null,"update:cornerRadius":null,"update:customizeTooltip":null,"update:enabled":null,"update:font":null,"update:format":null,"update:interactive":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:shadow":null,"update:zIndex":null},props:{arrowLength:Number,border:Object,color:String,container:{},contentTemplate:{},cornerRadius:Number,customizeTooltip:Function,enabled:Boolean,font:Object,format:[Object,String,Function],interactive:Boolean,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,shadow:Object,zIndex:Number}};k(Nn);const Tn=w(Nn);Tn.$_optionName="tooltip";Tn.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"},shadow:{isCollectionItem:!1,optionName:"shadow"}};const In={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};k(In);const ut=w(In);ut.$_optionName="valueIndicator";ut.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const eo={class:"page-rollform pa-0"},to={key:0,class:"rf-loading-overlay"},no={class:"rf-loader-box"},io={key:0,class:"hint-line"},oo={key:1,class:"warn-line"},ao={class:"rollform-header"},lo={class:"gauge-wrap"},so={class:"badge-left"},ro={class:"gauge-center-value text-center"},uo={style:{color:"goldenrod"}},co={class:"clock-wrap"},po={class:"digital-clock"},mo={class:"digital-date"},fo={class:"kpi-row"},vo={class:"kpi"},ho={class:"kpi-value"},go={class:"pb-1 ms-1 me-1"},_o={class:"kpi"},bo={class:"kpi-value"},yo={class:"pb-1 ms-1 me-1"},xo={class:"kpi"},wo={class:"kpi-value"},ko={class:"pb-1 ms-1 me-1"},Co={class:"oee-title"},So={class:"panel status-panel"},No={class:"form-row mt-2"},To={style:{display:"flex","align-items":"center",gap:"8px"}},Io={class:"status-actions justify-between"},Do={class:"status-actions justify-between"},Ao={class:"status-metrics mt-4 text-center"},Eo={class:"metric-time"},Oo={class:"metric-time"},Mo={class:"uclu text-center mt-4"},zo={class:"metric-time ok"},Fo={class:"metric-time warn"},Vo={class:"metric-time"},Ro={class:"panel status-panel"},$o={width:"60%"},Po={class:"sayac siparis digit"},Bo={width:"60%"},Lo={class:"sayac siparis digit"},jo={width:"60%"},Ko={class:"sayac net digit"},Ho={width:"60%"},Go={class:"sayac net digit"},qo={width:"60%"},Uo={class:"sayac kalan digit"},Wo={class:"sayac hurda digit"},Yo={class:"sayac net digit"},Xo={width:"60%"},Jo={class:"bilgi"},Zo={width:"60%"},Qo={class:"bilgi"},ea={width:"60%"},ta={class:"bilgi"},na={class:"panel grid-panel"},ia={class:"rf-activate-summary"},oa={class:"mb-2"},aa={class:"mb-2"},la={class:"mb-2"},sa={class:"d-flex flex-wrap mb-1",style:{"font-size":"0.8rem",gap:"12px"}},ra={class:"bilgi"},ua={class:"bilgi"},da={class:"bilgi"},ca=w({__name:"uretim-rollform",setup(t){const i=mi(),o=h(null);function s(){var n;try{return`rollform:lastDurusReason:${((n=U==null?void 0:U.value)==null?void 0:n.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function r(){try{const n=localStorage.getItem(s());if(!n)return!1;const e=JSON.parse(n);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return o.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const p=h([]),d=h(""),b=h(!1),f=h(null),G=I(()=>{var n;return((n=f.value)==null?void 0:n.wstation_code)??"..."}),he=I(()=>{var n;return((n=f.value)==null?void 0:n.wstation_name)??"..."});function Q(n,e){const m=Number(n??0),v=Number(e??0);return!Number.isFinite(m)||!Number.isFinite(v)||v<=0?0:m*6e4/v}const N=I(()=>{var n,e;return Q((n=f.value)==null?void 0:n.speed,(e=f.value)==null?void 0:e.item_length)}),ee=I(()=>{var n,e;return Q((n=f.value)==null?void 0:n.speed_max,(e=f.value)==null?void 0:e.item_length)}),Dn=I(()=>{var n,e;return Q((n=f.value)==null?void 0:n.speed_target,(e=f.value)==null?void 0:e.item_length)}),dt=I(()=>{var v,u,y;const n=Number(((v=f.value)==null?void 0:v.order_qty)??0);if(!Number.isFinite(n)||n<=0)return 0;const m=(Number(((u=f.value)==null?void 0:u.net_qty)??0)+Number(((y=f.value)==null?void 0:y.counter)??0))/n*100;return Number.isFinite(m)?Math.max(0,Math.min(100,m)):0}),An=I(()=>Math.round(dt.value)),En={enabled:!1},On={width:260,height:260},Mn={size:12,color:"#cfd8dc"},ct=I(()=>{const n=Number(ee.value||0);if(n<=0)return 10;const e=Math.max(1,Math.round(n/6));return e>=5?Math.round(e/5)*5:e}),zn=I(()=>{const n=Number(ct.value||5);return Math.max(1,Math.round(n/2))}),Fn=I(()=>{var e;const n=(e=f.value)==null?void 0:e.statu_id;return n===0?"rgba(192, 167, 167, 0.30)":n===1?"rgba(180, 50, 50, 1.00)":n===2?"green":"#4b7027"}),q=I(()=>{var n;return((n=f.value)==null?void 0:n.statu_id)===1});i.setTitle(`${G.value} (${he.value})`),document.title=`OFT - ${G.value} | ${he.value}`;const pt=I(()=>`${G.value} (${he.value})`),Vn=I(()=>{const n=Number(W.value.oee||0);return n<50?"oee-low":n<70?"oee-mid":n<85?"oee-high":"oee-top"}),De=()=>{i.setTitle(pt.value),document.title=`OFT - ${G.value} | ${he.value}`};li(async()=>{if(await Fe(),De(),await ei(),!C.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}Ee(),ye(),setInterval(ye,1e4),setInterval(()=>{const n=new Date,e=String(n.getHours()).padStart(2,"0"),m=String(n.getMinutes()).padStart(2,"0"),v=String(n.getSeconds()).padStart(2,"0");vt.value=`${e}:${m}:${v}`;const u=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],y=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];ht.value=`${n.getDate()} ${y[n.getMonth()]} ${n.getFullYear()} ${u[n.getDay()]}`,Ee(),gt()},1e3),setInterval(te,2e3),Ot(),Zn(),setTimeout(()=>{be.value||(be.value=!0)},15e3),window.addEventListener("keydown",_t),window.addEventListener("keydown",kt)}),si(()=>{De()});const Rn=Ne(()=>i.title,n=>{n!==pt.value&&De()},{flush:"post"});ri(()=>{Rn(),window.removeEventListener("keydown",_t),window.removeEventListener("keydown",kt)}),Ne(()=>f.value,()=>{De(),Ee()});const U=ui("userData");function D(n){const e=Number(n??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const $e=h("00:00:00"),Pe=h("00:00"),Be=h("00:00"),Le=h("00:00"),je=h("00:00"),mt=h(0),ft=h(0),Ke=h(null),vt=h("00:00:00"),ht=h("...");function $n(n){const e=Math.max(0,Math.floor(n||0)),m=Math.floor(e/3600),v=Math.floor(e%3600/60),u=e%60,y=F=>String(F).padStart(2,"0");return`${y(m)}:${y(v)}:${y(u)}`}function Ae(n){const e=Math.max(0,Math.floor(n||0)),m=Math.floor(e/3600),v=Math.floor(e%3600/60),u=y=>String(y).padStart(2,"0");return`${u(m)}:${u(v)}`}function Ee(){var m;const n=(m=f.value)==null?void 0:m.statu_time;if(n==null){$e.value="00:00:00";return}let e=0;if(typeof n=="number")n>1e12?e=Math.max(0,Math.floor((Date.now()-n)/1e3)):n>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-n)):e=Math.max(0,Math.floor(n));else if(typeof n=="string"){const v=Date.parse(n);Number.isNaN(v)||(e=Math.max(0,Math.floor((Date.now()-v)/1e3)))}else n instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-n.getTime())/1e3)));$e.value=$n(e)}function gt(){if(Ke.value!=null){const n=Math.max(0,Math.floor((Date.now()-Ke.value)/1e3));Pe.value=Ae(n);const e=Math.max(0,Math.floor(mt.value||0)),m=Math.max(0,Math.floor(ft.value||0));Be.value=Ae(e),Le.value=Ae(m);const v=Math.max(0,n-e-m);je.value=Ae(v)}else Pe.value="00:00",Be.value="00:00",Le.value="00:00",je.value="00:00"}function $(n){const e=n.toLowerCase();return p.value.find(m=>String(m.description||"").toLowerCase().includes(e))}function _t(n){if(q.value){if(n.key==="F9"){const e=$("çay ve yemek")||$("cay ve yemek")||$("çay & yemek");e&&(o.value={break_reason_code:e.break_reason_code,description:e.description},n.preventDefault())}else if(n.key==="F8")n.preventDefault(),bt();else if(n.key==="F10"){const e=$("yemek")||$("öğle")||$("ogle");e&&(o.value={break_reason_code:e.break_reason_code,description:e.description},n.preventDefault())}}}async function bt(){if(q.value&&C.value)try{await P.post("/api/uretim-rollform/close-and-open-down",{station_id:C.value}),T({message:"Yeni duruş başlatıldı (F8)",type:"success",displayTime:1500}),Promise.allSettled([te(),ye()])}catch(n){console.error("F8 yeni duruş hata",n),T({message:"Yeni duruş başlatılamadı",type:"error",displayTime:2e3})}}async function Pn(){if(!q.value||A.value)return;const n=$("çay")||$("cay");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await re()):T({message:"Çay molası sebebi bulunamadı",type:"warning",displayTime:1500})}async function Bn(){if(!q.value||A.value)return;const n=$("yemek")||$("öğle")||$("ogle");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await re()):T({message:"Yemek molası sebebi bulunamadı",type:"warning",displayTime:1500})}const ge=h(!1),_e=h(""),He=h(null),oe=h(!1);let Ge=null;function yt(){var n,e;if(!Ge){Ge=setTimeout(()=>{Ge=null},300);try{(e=(n=He.value)==null?void 0:n.blur)==null||e.call(n)}catch{}wt()}}function xt(){_e.value="",ge.value=!0,Fe(()=>{var n;return(n=He.value)==null?void 0:n.focus()})}async function wt(){var y;const n=Number(_e.value);if(!Number.isFinite(n)||n<=0){qe();return}let e=f.value?{...f.value}:null,m=((y=f.value)==null?void 0:y.worder_id)??null,v=-1,u=null;try{if(oe.value)return;if(!C.value)throw new Error("İstasyon yok");oe.value=!0;const F=typeof performance<"u"&&performance.now?performance.now():Date.now();if(e){const E=Number(e.scrap_qty||0);f.value={...e,scrap_qty:E+n}}if(m&&(v=L.value.findIndex(E=>E.isEmriID===m),v>=0)){u=Number(L.value[v].hurda||0);const E={...L.value[v],hurda:u+n};L.value.splice(v,1,E)}await P.post("/api/uretim-rollform/hurda-gir",{station_id:C.value,qty:n});const V=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Hurda] POST tamam: ${(V-F).toFixed(0)}ms (qty=${n})`)}catch{}T({message:"Hurda kaydedildi",type:"success",displayTime:1200}),ge.value=!1,Promise.allSettled([te(),Ot(),ye()])}catch(F){console.error("hurda kayıt hata",F);try{if(m!=null){const V=L.value.findIndex(E=>E.isEmriID===m);if(V>=0&&u!=null){const E={...L.value[V],hurda:u};L.value.splice(V,1,E)}}}catch{}try{e!==null&&(f.value=e)}catch{}T({message:"Hurda kaydedilemedi",type:"error",displayTime:2e3})}finally{oe.value=!1}}function qe(){_e.value="",ge.value=!1}function kt(n){n.key==="F7"&&(xt(),n.preventDefault())}const Oe=h(0);async function Ct(n){if(!C.value)return;const e=Date.now();if(e-Oe.value<5e3){const v=Math.ceil((5e3-(e-Oe.value))/1e3);T({message:`Sayaç işlemi için ${v}s bekleyin`,type:"warning",displayTime:1200});return}Oe.value=e;const m=f.value?{...f.value}:null;if(f.value){const v=Math.max(0,Number(f.value.counter||0)+n);f.value={...f.value,counter:v}}try{await P.post("/api/uretim-rollform/adjust-counter",{station_id:C.value,delta:n}),te()}catch(v){console.error("Sayaç ayarlanamadı",v),m&&(f.value=m),T({message:"Sayaç güncellenemedi",type:"error",displayTime:1800}),Oe.value=0}}window.addEventListener("keydown",n=>{n.key==="F4"?(n.preventDefault(),Ct(-1)):n.key==="F5"&&(n.preventDefault(),Ct(1))}),h("uretim-disi");const Ln=h(!1),be=h(!1),St=h(!1),Nt=h(!1),Tt=h(!1),It=h(!1),Dt=h(!1),jn=I(()=>St.value&&Nt.value&&Tt.value&&It.value&&Dt.value);Ne(jn,n=>{n&&!be.value&&(be.value=!0)});const Kn=I(()=>!be.value),W=h({availability:0,performance:0,quality:0,oee:0}),Hn=h(null);async function ye(){try{if(!C.value)return;const{data:n}=await P.get("/api/uretim-rollform/kpi",{params:{station_id:C.value}});if(n!=null&&n.kpi){const e=m=>Math.round(Number(m||0)*100);if(W.value={availability:e(n.kpi.availability),performance:e(n.kpi.performance),quality:e(n.kpi.quality),oee:e(n.kpi.oee)},n.shift){Hn.value={id:n.shift.id,start:String(n.shift.start||"").substring(11,16),end:String(n.shift.end||"").substring(11,16)};const m=Date.parse(n.shift.start);Number.isNaN(m)||(Ke.value=m)}n.raw&&(mt.value=Math.max(0,Math.floor(Number(n.raw.upSeconds||0))),ft.value=Math.max(0,Math.floor(Number(n.raw.downSeconds||0)))),gt(),Ln.value=!0,Tt.value=!0}}catch(n){console.error("fetchKpiDirect error",n)}}const L=h([]),Gn=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:n=>{var e;return qn((e=n==null?void 0:n.row)==null?void 0:e.data)}}],ae=h(!1);h(null);const S=h(null),le=h(!1);function qn(n){S.value=n,ae.value=!0}const xe=h(!1),we=h(null),At=h(null),se=h(!1);function Un(){we.value=null,xe.value=!0,Fe(()=>{var n,e;return(e=(n=At.value)==null?void 0:n.focus)==null?void 0:e.call(n)})}function Ue(){xe.value=!1}async function Et(){if(!se.value&&we.value!=null)try{se.value=!0,await new Promise(n=>setTimeout(n,800)),T({message:"Üretim girişi kaydedildi (örnek).",type:"success",displayTime:1500}),xe.value=!1}catch(n){console.error("Üretim girişi hata",n),T({message:"Üretim girişi kaydedilemedi",type:"error",displayTime:1800})}finally{se.value=!1}}async function Wn(){if(!S.value)return;const n=C.value;if(!n)return;const e={wstation_id:n,worder_id:Number(S.value.isEmriID??0),worder_no:S.value.isEmriNo,item_id:0,item_code:S.value.stokKodu,item_name:S.value.stokAdi,order_qty:Number(S.value.plnAd??0),net_qty:Number(S.value.urtAd??0),scrap_qty:Number(S.value.hurda??0)};try{if(le.value)return;le.value=!0,await P.post("/api/uretim-rollform/activate-workorder",e),T({message:"İş emri aktifleştirildi",type:"success",displayTime:1600}),ae.value=!1,te()}catch(m){console.error("Aktivasyon hatası",m),T({message:"İş emri aktifleştirilemedi",type:"error",displayTime:1800})}finally{le.value=!1}}async function te(){try{if(!C.value){f.value=null;return}const n=await P.get("/api/kapasite-works-info",{params:{station_id:C.value}}),e=Array.isArray(n.data)?n.data:[];f.value=e.length>0?e[0]:null,Ee()}catch(n){console.error("WorksInfo alınamadı",n),f.value=null}finally{Nt.value=!0}}function Yn(){var m,v;const n=((m=S.value)==null?void 0:m.stokKodu)||((v=f.value)==null?void 0:v.item_code)||null;if(!n){alert("Önce bir iş emri/ürün seçiniz (stok kodu yok).");return}const e=`/teknik-resim?code=${encodeURIComponent(n)}`;window.open(e,"_blank")}async function Ot(){try{if(!C.value){L.value=[];return}const{data:n}=await P.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:C.value}}),e=(n||[]).map(m=>({grp:0,isEmriID:m.isemri_id,isEmriNo:m.isemri_no,stokKodu:m.stok_kodu,stokAdi:m.stok_adi,plnAd:Number(m.isemri_miktari??0),ilvAd:0,klnAd:Number(m.kalan_miktar??0),urtAd:Number(m.uretilen_net_miktar??0),hurda:Number(m.toplam_hurda_miktari??0),plnSure:Number(m.operasyon_suresi??0),grcSure:0}));L.value=e}catch(n){console.error("İş emirleri alınamadı",n)}finally{It.value=!0}}const j=h(!1),A=h(!1),Me=h(!0),We=h(null);function ze(n=0){var e,m,v;try{const u=((e=We.value)==null?void 0:e.$el)||((v=(m=We.value)==null?void 0:m.$refs)==null?void 0:v.root)||null;if(u){const y=u.querySelector("input")||u.querySelector('[role="combobox"]');if(y){y.focus(),document.activeElement!==y&&n<3&&setTimeout(()=>ze(n+1),40);return}}n<5&&setTimeout(()=>ze(n+1),50)}catch{}}function Xn(){setTimeout(()=>ze(),10)}const Ye=h(!0),Jn=I(()=>({width:110,marginBottom:30,type:"success",text:A.value?"Kaydediliyor...":"Kaydet",stylingMode:"contained",elementAttr:{class:A.value?"btn-loading":""},disabled:A.value,onClick:()=>{A.value||re()}}));function Zn(){C.value&&P.get("/api/durus-sebepleri-al",{params:{istasyon:C.value}}).then(n=>{var e;p.value=((e=n.data)==null?void 0:e.durusSebepleri)||[]}).catch(n=>{console.error("Duruş sebepleri alınamadı",n)}).finally(()=>{Dt.value=!0})}function Mt(){o.value={break_reason_code:"000",description:"GİRİLMEDİ"},j.value=!0,Fe(()=>ze())}async function re(){var n;if(!A.value){if(!o.value){T({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((n=f.value)!=null&&n.worder_id)){T({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),j.value=!1;return}if(!C.value){T({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{A.value=!0,Me.value=!1;const e=typeof performance<"u"&&performance.now?performance.now():Date.now();await P.post("/api/duruskaydet-mekanik",{istasyonID:C.value,selectedDurus:o.value});const m=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Duruş] POST tamam: ${(m-e).toFixed(0)}ms (code=${o.value.break_reason_code})`)}catch{}T({message:"Duruş kaydedildi.",type:"success",displayTime:1600});try{localStorage.setItem(s(),JSON.stringify(o.value))}catch{}j.value=!1,Promise.allSettled([te(),ye()])}catch(e){console.error("Duruş kaydedilemedi",e),T({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{A.value=!1,Me.value=!0}}}function Qn(n){Me.value||(n.cancel=!0)}Ne(j,(n,e)=>{e&&!n&&te()});const zt=h(null);Ne(()=>{var n;return(n=f.value)==null?void 0:n.statu_id},async(n,e)=>{n===1&&zt.value!==1?Ye.value?!r()&&!j.value&&Mt():j.value||Mt():n!==1&&(j.value&&(A.value=!1,Me.value=!0,j.value=!1),o.value=null),zt.value=n??null,Ye.value&&(Ye.value=!1)});const C=h(null),ue=h(null);async function ei(){var n,e,m;try{ue.value=null;const{data:v}=await P.get("/api/uretim-rollform/detect-station");if(v&&v.station_id){C.value=Number(v.station_id),St.value=!0;try{const u=Number(((n=U==null?void 0:U.value)==null?void 0:n.id)||((m=(e=U==null?void 0:U.value)==null?void 0:e.user)==null?void 0:m.id));Number.isFinite(u)&&u>0&&await P.post("/api/uretim-rollform/set-operator",{station_id:C.value,operator_id:u})}catch{}}else{C.value=null;const u=v!=null&&v.ip?` – tespit edilen IP: ${v.ip}`:"";ue.value="İstasyon bulunamadı (IP eşleşmedi)"+u}}catch(v){ue.value="İstasyon tespiti hata: "+((v==null?void 0:v.message)||"bilinmiyor")}}return(n,e)=>{const m=ni,v=ti;return H(),K("div",eo,[Kn.value?(H(),K("div",to,[a("div",no,[e[12]||(e[12]=a("div",{class:"rf-spinner","aria-hidden":"true"},null,-1)),e[13]||(e[13]=a("h2",null,"Veriler yükleniyor",-1)),e[14]||(e[14]=a("p",null,"İstasyon, aktif iş emri, sayaç ve KPI verileri hazırlanıyor. Lütfen bekleyin…",-1)),!C.value&&!ue.value?(H(),K("small",io,"İstasyon tespiti yapılıyor...")):ue.value?(H(),K("small",oo,g(ue.value)+" – yeniden deniyor...",1)):Ft("",!0)])])):Ft("",!0),a("div",ao,[l(J,{class:"match-height"},{default:c(()=>[l(M,{cols:"12",md:"3",sm:"6"},{default:c(()=>[l(ce,{class:"pa-3"},{default:c(()=>[a("section",null,[l(pe,{class:"durum-title",style:ci({backgroundColor:Fn.value})},{default:c(()=>{var u,y;return[_(g(((u=f.value)==null?void 0:u.statu_id)===0?"KAPALI":((y=f.value)==null?void 0:y.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[20]||(e[20]=a("hr",null,null,-1)),a("div",lo,[a("div",so,g(G.value),1),l(x(Hi),{class:"oee-gauge",value:N.value,subvalues:[Dn.value],tooltip:En,size:On},{default:c(()=>[l(x(on),{"start-angle":225,"end-angle":-45}),l(x(rt),{"start-value":0,"end-value":ee.value,"tick-interval":ct.value,"minor-tick-interval":zn.value},{default:c(()=>[l(x(kn),{length:8,color:"#666"}),l(x(dn),{length:4,color:"#444"}),l(x(lt),{"use-range-colors":!0,font:Mn})]),_:1},8,["end-value","tick-interval","minor-tick-interval"]),l(x(st),{"background-color":"#20252b",offset:10,width:10},{default:c(()=>[l(x(fe),{"start-value":0,"end-value":.4*ee.value,color:"#ce6978"},null,8,["end-value"]),l(x(fe),{"start-value":.4*ee.value,"end-value":.7*ee.value,color:"#caa93b"},null,8,["start-value","end-value"]),l(x(fe),{"start-value":.7*ee.value,"end-value":ee.value,color:"#1e8e3e"},null,8,["start-value","end-value"])]),_:1}),l(x(ut),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(x(Qt),{enabled:!1})]),_:1},8,["value","subvalues"]),a("div",ro,[e[15]||(e[15]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız (ad/saat)",-1)),a("div",uo,g(D(N.value)),1)])]),a("div",co,[a("div",po,g(vt.value),1),a("div",mo,g(ht.value),1)]),a("div",fo,[a("div",vo,[e[16]||(e[16]=a("div",null,"Meço %",-1)),a("div",ho,[_(g(W.value.availability)+" ",1),a("div",go,[l(Ve,{"model-value":W.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",_o,[e[17]||(e[17]=a("div",null,"Performans %",-1)),a("div",bo,[_(g(W.value.performance)+" ",1),a("div",yo,[l(Ve,{"model-value":W.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",xo,[e[18]||(e[18]=a("div",null,"Kalite %",-1)),a("div",wo,[_(g(W.value.quality)+" ",1),a("div",ko,[l(Ve,{"model-value":W.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(J,null,{default:c(()=>[l(M,{cols:"12",class:"text-center"},{default:c(()=>[a("div",Co,[e[19]||(e[19]=_("OEE % ")),a("span",{class:Xe(["kpi-oee",Vn.value])},g(W.value.oee),3)])]),_:1})]),_:1})])]),_:1})]),_:1}),l(M,{cols:"12",md:"4",sm:"6"},{default:c(()=>[l(ce,{class:"pa-3"},{default:c(()=>[l(pe,{class:"panel-title pa-0"},{default:c(()=>e[21]||(e[21]=[_("DURUM BİLGİLERİ")])),_:1,__:[21]}),e[33]||(e[33]=a("hr",null,null,-1)),a("section",So,[a("div",No,[e[23]||(e[23]=a("label",null,"Duruş Sebebi (F8 – Yeni Duruş)",-1)),a("div",To,[l(m,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value=u),items:p.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!q.value||A.value,class:Xe({"app-select--force-disabled":!q.value||A.value}),onKeydown:Y(X(re,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"]),l(O,{color:"success",variant:"tonal",size:"small",disabled:!q.value||A.value||!o.value,onClick:re},{default:c(()=>[e[22]||(e[22]=_(" Kaydet ")),l(Re,{end:"",icon:"tabler-check"})]),_:1,__:[22]},8,["disabled"])]),l(v,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=u=>d.value=u),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",Io,[l(O,{variant:"tonal",color:"error",size:"small"},{default:c(()=>e[24]||(e[24]=[_("Açıklama Gir")])),_:1,__:[24]}),l(Ai,{color:"error",modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=u=>b.value=u),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",Do,[l(O,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:bt},{default:c(()=>[e[25]||(e[25]=_(" F8 - Yeni Duruş ")),l(Re,{end:"",icon:"tabler-player-skip-forward"})]),_:1,__:[25]}),l(O,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:Pn},{default:c(()=>[e[26]||(e[26]=_(" F9 - Çay Molası ")),l(Re,{end:"",icon:"tabler-mug"})]),_:1,__:[26]}),l(O,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:Bn},{default:c(()=>[e[27]||(e[27]=_(" F10 - Yemek Molası ")),l(Re,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[27]})]),a("div",Ao,[a("div",null,[e[28]||(e[28]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",Eo,g($e.value),1)]),a("div",null,[e[29]||(e[29]=a("div",{class:"label"},"Vardiya",-1)),a("div",Oo,g(Pe.value),1)])]),a("div",Mo,[a("div",null,[e[30]||(e[30]=a("div",{class:"label"},"Çalışma",-1)),a("div",zo,g(Be.value),1)]),a("div",null,[e[31]||(e[31]=a("div",{class:"label"},"Duruş",-1)),a("div",Fo,g(Le.value),1)]),a("div",null,[e[32]||(e[32]=a("div",{class:"label"},"Boşta",-1)),a("div",Vo,g(je.value),1)])])])]),_:1,__:[33]})]),_:1}),l(M,{cols:"12",md:"5",sm:"6"},{default:c(()=>[l(ce,{class:"pa-3"},{default:c(()=>[l(pe,{class:"panel-title pa-0"},{default:c(()=>e[34]||(e[34]=[_("ÜRETİM RAKAMLARI")])),_:1,__:[34]}),e[49]||(e[49]=a("hr",null,null,-1)),a("section",Ro,[l(Ve,{"model-value":dt.value,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(J,null,{default:c(()=>[l(M,{cols:"5"},{default:c(()=>{var u,y,F,V,E,ke,Ce,Se;return[a("div",null,[a("div",$o,[e[35]||(e[35]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",Po,g(D((u=f.value)==null?void 0:u.order_qty)),1)]),a("div",Bo,[e[36]||(e[36]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",Lo,g(D((y=f.value)==null?void 0:y.net_qty)),1)]),a("div",jo,[e[37]||(e[37]=a("div",{class:"label"},"Sayaç",-1)),a("div",Ko,g(D((F=f.value)==null?void 0:F.counter)),1)]),a("div",Ho,[e[38]||(e[38]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",Go,g(D(((V=f.value)==null?void 0:V.net_qty)+((E=f.value)==null?void 0:E.counter))),1)]),a("div",qo,[e[39]||(e[39]=a("div",{class:"label"},"Kalan",-1)),a("div",Uo,g(D((((ke=f.value)==null?void 0:ke.order_qty)??0)-((Ce=f.value)==null?void 0:Ce.counter)-(((Se=f.value)==null?void 0:Se.net_qty)??0))),1)])])]}),_:1}),l(M,{cols:"7"},{default:c(()=>{var u,y,F;return[a("div",null,[l(J,null,{default:c(()=>[l(M,{cols:"6"},{default:c(()=>{var V;return[e[40]||(e[40]=a("div",{class:"label"},"Hurda",-1)),a("div",Wo,g(D((V=f.value)==null?void 0:V.scrap_qty)),1)]}),_:1,__:[40]}),l(M,{cols:"6"},{default:c(()=>[e[41]||(e[41]=a("div",{class:"label"},"O.A.%",-1)),a("div",Yo,g(An.value),1)]),_:1,__:[41]})]),_:1}),a("div",Xo,[e[42]||(e[42]=a("div",{class:"label"},"İş Emri No",-1)),a("div",Jo,g((u=f.value)==null?void 0:u.worder_no),1)]),a("div",Zo,[e[43]||(e[43]=a("div",{class:"label"},"Ürün Kodu",-1)),a("div",Qo,g((y=f.value)==null?void 0:y.item_code),1)]),a("div",ea,[e[44]||(e[44]=a("div",{class:"label"},"Kalan",-1)),a("div",ta,g((F=f.value)==null?void 0:F.item_name),1)])]),l(J,{class:"mt-1"},{default:c(()=>[l(M,{cols:"6",class:"mt-0 py-2 pe-1"},{default:c(()=>[l(O,{id:"hurdaGir",block:"",variant:"outlined",color:"error",onClick:xt},{default:c(()=>e[45]||(e[45]=[_(" F7 - Hurda Girişi ")])),_:1,__:[45]})]),_:1}),l(M,{cols:"6",class:"mt-0 py-2 ps-1"},{default:c(()=>[l(O,{variant:"outlined",block:"",onClick:Un},{default:c(()=>e[46]||(e[46]=[_("İş Emrini Kapat")])),_:1,__:[46]})]),_:1})]),_:1}),l(J,{class:"mt-1"},{default:c(()=>[l(M,{cols:"6",class:"mt-0 py-2 pe-1"},{default:c(()=>[l(O,{variant:"outlined",block:"",onClick:Yn},{default:c(()=>e[47]||(e[47]=[_("Teknik Resim")])),_:1,__:[47]})]),_:1}),l(M,{cols:"6",class:"mt-0 py-2 ps-1"},{default:c(()=>[l(O,{variant:"outlined",block:""},{default:c(()=>e[48]||(e[48]=[_("Ürün Etiketi Bas")])),_:1,__:[48]})]),_:1})]),_:1})]}),_:1})]),_:1})])]),_:1,__:[49]})]),_:1})]),_:1})]),a("section",na,[l(x(Ti),{class:"orders-grid","data-source":L.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:c(()=>[l(x(R),{type:"buttons",width:"30",buttons:Gn}),l(x(R),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(x(R),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(x(R),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(x(R),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(x(R),{"data-field":"stokAdi",caption:"STOK ADI"}),l(x(R),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(R),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(x(Ni),{visible:!0,width:240})]),_:1},8,["data-source"])]),e[74]||(e[74]=di('<div class="bottom-tabs" data-v-e0c69cad><button class="tab active" data-v-e0c69cad>İş Emirleri</button><button class="tab" data-v-e0c69cad>Duruşlar</button><button class="tab" data-v-e0c69cad>Hurdalar</button><button class="tab" data-v-e0c69cad>Ölçümler</button><button class="tab" data-v-e0c69cad>Kısayollar</button></div>',1)),l(tt,{modelValue:ge.value,"onUpdate:modelValue":e[4]||(e[4]=u=>ge.value=u),"max-width":"400"},{default:c(()=>[l(ce,null,{default:c(()=>[l(pe,null,{default:c(()=>e[50]||(e[50]=[_("Hurda Girişi")])),_:1,__:[50]}),l(Qe,null,{default:c(()=>[l(Vt,{ref_key:"hurdaInputRef",ref:He,modelValue:_e.value,"onUpdate:modelValue":e[3]||(e[3]=u=>_e.value=u),label:"Hurda Miktarı",type:"number","hide-details":"",min:1,step:"1",autofocus:"",onKeydown:[Y(X(yt,["prevent"]),["enter"]),Y(X(qe,["prevent"]),["esc"])],onKeyup:Y(X(yt,["prevent"]),["enter"])},null,8,["modelValue","onKeydown","onKeyup"]),e[51]||(e[51]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[51]}),l(Ze,null,{default:c(()=>[l(et),l(O,{variant:"text",color:"grey",onClick:qe},{default:c(()=>e[52]||(e[52]=[_("İptal (Esc)")])),_:1,__:[52]}),l(O,{variant:"elevated",color:"error",onClick:wt,loading:oe.value,disabled:oe.value},{default:c(()=>[oe.value?(H(),K(de,{key:0},[l(Je,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[53]||(e[53]=_(" Kaydediliyor... "))],64)):(H(),K(de,{key:1},[_("Kaydet (Enter)")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(tt,{modelValue:ae.value,"onUpdate:modelValue":e[6]||(e[6]=u=>ae.value=u),"max-width":"480",onKeydown:e[7]||(e[7]=Y(X(u=>ae.value=!1,["prevent","stop"]),["esc"]))},{default:c(()=>[l(ce,null,{default:c(()=>[l(pe,null,{default:c(()=>e[54]||(e[54]=[_("İş Emrini Aktif Et")])),_:1,__:[54]}),l(Qe,null,{default:c(()=>{var u,y,F,V,E,ke,Ce,Se;return[a("div",ia,[a("div",oa,[e[55]||(e[55]=a("strong",null,"İş Emri No:",-1)),_(" "+g((u=S.value)==null?void 0:u.isEmriNo),1)]),a("div",aa,[e[56]||(e[56]=a("strong",null,"Stok Kodu:",-1)),_(" "+g((y=S.value)==null?void 0:y.stokKodu),1)]),a("div",la,[e[57]||(e[57]=a("strong",null,"Stok Adı:",-1)),_(" "+g((F=S.value)==null?void 0:F.stokAdi),1)]),a("div",sa,[a("div",null,[e[58]||(e[58]=a("strong",null,"Plan:",-1)),_(" "+g(D((V=S.value)==null?void 0:V.plnAd)),1)]),a("div",null,[e[59]||(e[59]=a("strong",null,"İlave:",-1)),_(" "+g(D((E=S.value)==null?void 0:E.ilvAd)),1)]),a("div",null,[e[60]||(e[60]=a("strong",null,"Kalan:",-1)),_(" "+g(D((ke=S.value)==null?void 0:ke.klnAd)),1)]),a("div",null,[e[61]||(e[61]=a("strong",null,"Üretilen:",-1)),_(" "+g(D((Ce=S.value)==null?void 0:Ce.urtAd)),1)]),a("div",null,[e[62]||(e[62]=a("strong",null,"Hurda:",-1)),_(" "+g(D((Se=S.value)==null?void 0:Se.hurda)),1)])]),e[63]||(e[63]=a("div",{class:"text-caption",style:{opacity:"0.7"}},"Bu iş emrini istasyonda aktif etmek istediğinize emin misiniz?",-1))])]}),_:1}),l(Ze,null,{default:c(()=>[l(et),l(O,{variant:"text",onClick:e[5]||(e[5]=u=>ae.value=!1)},{default:c(()=>e[64]||(e[64]=[_("Vazgeç")])),_:1,__:[64]}),l(O,{color:"primary",variant:"flat",onClick:Wn,loading:le.value,disabled:le.value},{default:c(()=>[le.value?(H(),K(de,{key:0},[l(Je,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[65]||(e[65]=_(" Aktarılıyor... "))],64)):(H(),K(de,{key:1},[_("Onayla")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(tt,{modelValue:xe.value,"onUpdate:modelValue":e[9]||(e[9]=u=>xe.value=u),"max-width":"520",onKeydown:Y(X(Ue,["prevent","stop"]),["esc"])},{default:c(()=>[l(ce,null,{default:c(()=>[l(pe,{class:"text-h5",style:{"background-color":"green",color:"black"}},{default:c(()=>e[66]||(e[66]=[_("Üretim Girişi")])),_:1,__:[66]}),l(Qe,null,{default:c(()=>[l(J,{class:"mb-2"},{default:c(()=>[l(M,{cols:"12",sm:"4"},{default:c(()=>{var u;return[e[67]||(e[67]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",ra,g(D((u=f.value)==null?void 0:u.order_qty)),1)]}),_:1,__:[67]}),l(M,{cols:"12",sm:"4"},{default:c(()=>{var u;return[e[68]||(e[68]=a("div",{class:"label"},"Üretilen (uyum)",-1)),a("div",ua,g(D((u=f.value)==null?void 0:u.net_qty)),1)]}),_:1,__:[68]}),l(M,{cols:"12",sm:"4"},{default:c(()=>{var u;return[e[69]||(e[69]=a("div",{class:"label"},"Sayaç",-1)),a("div",da,g(D((u=f.value)==null?void 0:u.counter)),1)]}),_:1,__:[69]})]),_:1}),l(Vt,{ref_key:"uretimInputRef",ref:At,modelValue:we.value,"onUpdate:modelValue":e[8]||(e[8]=u=>we.value=u),modelModifiers:{number:!0},type:"number",label:"Elle Üretim Miktarı",variant:"outlined",density:"comfortable",min:0,step:1,"hide-details":"",autofocus:"",onKeydown:[Y(X(Et,["prevent"]),["enter"]),Y(X(Ue,["prevent"]),["esc"])]},null,8,["modelValue","onKeydown"]),e[70]||(e[70]=a("div",{class:"text-caption mt-2"},"Sayaç değeri yanlış olabilir. Gerçek sayıyı giriniz...",-1))]),_:1,__:[70]}),l(Ze,null,{default:c(()=>[l(et),l(O,{variant:"outlined",color:"grey",onClick:Ue},{default:c(()=>e[71]||(e[71]=[_("Vazgeç")])),_:1,__:[71]}),l(O,{color:"primary",variant:"outlined",onClick:Et,disabled:we.value==null||se.value,loading:se.value},{default:c(()=>[se.value?(H(),K(de,{key:0},[l(Je,{indeterminate:"",size:"18",color:"primary",class:"mr-2"}),e[72]||(e[72]=_(" Kaydediliyor... "))],64)):(H(),K(de,{key:1},[_("Kaydet (Enter)")],64))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]),l(x(Di),{visible:j.value,"onUpdate:visible":e[11]||(e[11]=u=>j.value=u),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":Qn,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}},"on-shown":Xn},{content:c(()=>[l(J,{class:"pa-4"},{default:c(()=>[l(m,{ref_key:"durusSelectRef",ref:We,modelValue:o.value,"onUpdate:modelValue":e[10]||(e[10]=u=>o.value=u),items:p.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!q.value||A.value,class:Xe({"app-select--force-disabled":!q.value||A.value}),onKeydown:Y(X(re,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"])]),_:1})]),title:c(()=>e[73]||(e[73]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:c(()=>[l(x(Ii),{widget:"dxButton",toolbar:"bottom",location:"center",options:Jn.value},null,8,["options"])]),_:1},8,["visible"])])}}}),rl=pi(ca,[["__scopeId","data-v-e0c69cad"]]);export{rl as default};
