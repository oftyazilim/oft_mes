import{d as Xa,r as u,aO as Za,w as E,A as Ja,aI as _,c as h,b as e,f as i,u as o,F as re,L as y,aB as p,av as C,e as m,j as Qa,g as Se,k as T,cT as el,aJ as al,au as Ce,aw as ll,aG as Ke,o as k,l as tl}from"./main-Z2bCo_SY.js";import{s as ue,D as n,d as de,l as ce,e as Me,g as oa,h as ol,i as il,j as sl,k as nl,q as ia,t as sa}from"./data-grid-COTBUV6G.js";import{D as rl}from"./load-panel-DmvhZdoG.js";import{D as X,a as Ue}from"./popup-DfDPCoBv.js";import{D as R}from"./select-box-ocQPwuq_.js";import{A as ul}from"./m_select_box-CUuhHspy.js";import{n as b}from"./notify-DI9DDHrT.js";import{S as na}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{_ as dl}from"./HataBildirimiDialog.vue_vue_type_script_setup_true_lang-B4EYfIR2.js";import{V as w}from"./VRow-BWgUjVnf.js";import{V as c}from"./VCol-DlTh-hEz.js";import{V as Oe}from"./VDialog-BKRJ-ugR.js";import{V as cl}from"./VAlert-Dj3IK-ov.js";import{V as z,c as me,a as M,b as ml}from"./VCard-DZz6s3gu.js";import{V as U}from"./VCardText-DiKn-Sxx.js";import{V as S}from"./VTextField-DM_4OmHz.js";import{V as ra}from"./VCheckbox-BZKa8kW-.js";import{V as O}from"./VTextarea-CDGM0CSa.js";import{V as pl}from"./VCombobox-DXQQ6Hk8.js";import{V as vl}from"./VContainer-D1CvAQQK.js";import{V as fl}from"./VFileInput-Dfqapfeq.js";import{V as Ve}from"./VImg-DNkLCn7F.js";import{V as ua}from"./VSpacer-pbjKaRl3.js";import"./editor-COtmFKCi.js";import"./overlay-CZPbzO_l.js";import"./m_row_dragging-CNR76fst.js";import"./themes-SlMNtXOK.js";import"./VSelect-CZqgrQjA.js";import"./form-D_fVMas1.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BKXiGX5D.js";import"./ssrBoot-9tsuM1OA.js";import"./index-COtPnnZQ.js";import"./VAvatar-DQnMERNO.js";import"./VDivider-bME6_KsO.js";import"./dialog-transition-B2DVOUTt.js";import"./easing-Bybner-F.js";import"./VMenu-048WtKnW.js";import"./VOverlay-e1-dBb4N.js";import"./delay-D4B4K4FC.js";import"./lazy-DppAwYtJ.js";import"./scopeId-C6Vm4C3W.js";import"./VCheckboxBtn-C2TeTkQX.js";import"./VSelectionControl-CmR1rNNa.js";import"./focus-Cz7qgAt6.js";import"./VChip-Ct7sFLQ8.js";import"./VSlideGroup-Ctu-bJO8.js";/* empty css              *//* empty css                   */import"./VCounter-UlzDYoNk.js";import"./VField-C6QKK3EL.js";import"./VInput-BHjw0v-2.js";import"./filter-E_ZNy5C0.js";const kl={key:0},yl={key:1},gl={key:2},hl={key:3,class:C(["dx-icon","dx-icon-isblank"]),style:{fontSize:"16px",color:"yellow"}},bl={class:"pa-2 d-flex justify-center gap-8"},wl={key:0,class:C(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"green"}},xl={key:1,class:C(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"gold"}},_l={key:2,class:C(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"red"}},Tl={key:3,class:C(["dx-icon","dx-icon-isblank"]),style:{fontSize:"20px",color:"yellow"}},Sl={key:0,class:C(["dx-icon",""]),style:{fontSize:"16px",color:"green"}},Cl={key:1,class:C(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"orange"}},Kl=["onClick"],Vl={class:"text-center"},Hl={key:0,class:C(["dx-icon","dx-icon-check"]),style:{fontSize:"20px",color:"green"}},Dl={key:1},Il={class:"text-center"},El={style:{"font-size":"20px"}},zl={class:"d-flex align-center gap-4",style:{flex:"1"}},Al={class:"d-flex justify-space-between"},Bl={class:"pa-2 d-flex justify-center gap-2"},Nl=Xa({__name:"uretim-kontrol",setup(Rl){const Fe=u(),F=u(!1),$=u(!1),Z=u(!1),K=Za("userData"),pe=u(!1),$e=u([]),ve=u([]),da=u(0),fe=u(null),V=u(0),P=u([]),ca=u(null),G=u(null),L=u(null),ke=u(0),g=u(""),Pe=u(0),ma=u(!1),J=u(!1),x=u(""),Q=u("");u("");const ye=u(""),j=u(!1),ee=u({}),He=u(),ge=u([]),De=u(!1),Ie=u(0),Ee=u(0),Ge=u(),he=u(!1),Le=u(""),pa=u(null),H=u([]);let je=1;const A=u([]),ae=u(1),be=u("..."),ze=u("..."),D=u([]),B=u([]),le=u(""),te=u(!1),Ye=u(""),oe=u(!1),va=u(null),N=u([]),Ae=u(0),Be=u(""),qe=u([]),we=[{title:"✔️ Onaylandı",value:"Onaylandı",color:"#d4edda"},{title:"❌ Red",value:"Red",color:"#f8d7da"},{title:"⚠️ Şartlı Onay",value:"Şartlı Onay",color:"#fff3cd"}],Y=new ul({data:we,key:"value"}),fa=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),xe={width:100,type:"success",text:"Tamam",stylingMode:"contained"},Ne={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{F.value=!1,$.value=!1,J.value=!1}},r=u({istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:0,personelID:0,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0}),s=u({masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""}),Re=async()=>{if(V.value===0){b({message:"Lütfen bir iş emri seçiniz.",type:"error",displayTime:3e3});return}P.value=[],ge.value=[];try{const t=await _.get("/api/isEmri",{params:{deger:V.value}});r.value.isEmriId=t.data.data[0].isemri_id,r.value.istasyonID=t.data.data[0].IS_ISTASYONU_ID,r.value.personelID=K.value.id,r.value.istasyon=t.data.data[0].IS_ISTASYONU,r.value.isEmriNo=t.data.data[0].isemri_no,r.value.urunAdi=t.data.data[0].stok_adi,r.value.urunKodu=t.data.data[0].stok_kodu,r.value.musteri=t.data.data[0].cari_ad,r.value.siparisNo=t.data.data[0].siparis_belge_no,r.value.isEmriMiktari=t.data.data[0].isemri_miktari,r.value.planTarih=t.data.data[0].plan_tarih_araligi,r.value.aksesuar=t.data.data[0].aksesuar==="Aksesuarlı",Pe.value=t.data.data[0].isemri_miktari,q(),We("aktif")}catch(t){console.error("Master verileri alınırken hata oluştu:",t)}s.value.isEmriId=r.value.isEmriId,s.value.istasyonID=r.value.istasyonID,s.value.personelID=r.value.personelID,F.value=!1,D.value=Array.from({length:r.value.isEmriMiktari},(t,a)=>{const l=a+1,d=`${r.value.isEmriNo}-${String(l).padStart(5,"0")}`;return{id:l,serino:d}})};E(F,(t,a)=>{a===!1&&t===!0&&ka()}),E($,(t,a)=>{a===!1&&t===!0&&(ve.value=[],ya(),ba()),a===!0&&t===!1&&(ze.value="...",be.value="...")}),E(ma,(t,a)=>{a===!0&&t===!1&&q()}),E(te,(t,a)=>{a===!0&&t===!1&&la()}),E(J,(t,a)=>{a===!1&&t===!0&&(j.value=!1,Je()),a===!0&&t===!1&&(Ze(),q())}),E(oe,(t,a)=>{a===!0&&t===!1&&(N.value=[""])}),E(pa,t=>{if(t){const a=new FileReader;a.onload=()=>{typeof a.result=="string"&&H.value.push({id:je++,url:a.result})},a.readAsDataURL(t)}}),E([g,Pe],([t,a])=>{if(!t||!a)return;const l=[];for(let d=1;d<=Number(a);d++){const f=`${t}-${String(d).padStart(5,"0")}`;l.push({id:d,serino:f})}D.value=l});const ka=async()=>{try{pe.value=!0;const t=await _.get("/api/aktiflerial",{params:{istasyonId:K.value.istasyon_id}});$e.value=t.data}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{pe.value=!1}},q=async()=>{if(!r.value.isEmriId||!r.value.istasyonID){console.warn("İş Emri veya İstasyon ID eksik");return}try{const t=await _.get("/api/kontrolleri-al",{params:{istasyon:r.value.istasyonID,isEmriId:r.value.isEmriId,isEmriNo:r.value.isEmriNo}}),a=t.data.kontroller;if(ge.value=t.data.revizyonlar||[],P.value=t.data.kontrollerd||[],!a){console.warn("Kontrol kaydı bulunamadı"),s.value={masterId:0,isEmriId:r.value.isEmriId,istasyonID:r.value.istasyonID,personelID:r.value.personelID,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""};return}s.value.masterId=a.id,s.value.urunAgaciText=a.urun_agaci_not,s.value.urunAgaciCheck=a.urun_agaci_ok,s.value.gorunumText=a.gorunum_not,s.value.gorunumCheck=a.gorunum_ok,s.value.olcuselText=a.olcusel_not,s.value.olcuselCheck=a.olcusel_ok,s.value.paketlemeText=a.paketleme_not,s.value.paketlemeCheck=a.paketleme_ok,s.value.etiketText=a.etiket_not,s.value.etiketCheck=a.etiket_ok,s.value.dokumanText=a.dokuman_not,s.value.dokumanCheck=a.dokuman_ok,Na()}catch(t){console.error("Kayıt çekilirken hata oluştu:",t)}},ya=async()=>{try{const t=await _.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:0,isemri_id:V.value}});console.log("Malzemeler alındı:",t.data.malzemeler),ve.value=t.data.malzemeler,Ee.value=t.data.toplamMalzeme,console.log("Malzemeler alındı:",ve.value)}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}},ga=async()=>{if(s.value.urunAgaciText===""&&s.value.gorunumText===""&&s.value.olcuselText===""&&s.value.paketlemeText===""&&s.value.etiketText===""&&s.value.dokumanText===""&&s.value.gorunumCheck===""&&s.value.olcuselCheck===""&&s.value.paketlemeCheck===""&&s.value.etiketCheck===""&&s.value.dokumanCheck===""&&s.value.urunAgaciCheck===""){b({message:"Lütfen en az bir kontrol alanını doldurun.",type:"error",displayTime:2e3});return}try{const a=(await _.post("/api/kontrol-kaydet",{...s.value,user_id:K.value.id})).data.mID;s.value.masterId=a,b({message:"Kayıt başarılı...",type:"success",displayTime:2e3}),q()}catch(t){console.error(t),alert("Hata oluştu.")}},ha=async()=>{var t;if(!Z.value)try{Z.value=!0;const a=(t=G.value)!=null&&t.instance?G.value.instance.getSelectedRowKeys():[];await _.post("/api/urun-agaci-secim/kaydet",{urunKodu:r.value.urunKodu,selected_ids:a,userId:K.value.id}),b({message:"Ürün ağacı seçimleri kaydedildi.",type:"success",displayTime:1500}),$.value=!1}catch(a){console.error("AgacKaydet hata",a),b({message:"Kayıt başarısız. Lütfen tekrar deneyin.",type:"error",displayTime:2e3})}finally{Z.value=!1}},ba=async()=>{console.log(r.value.urunKodu);const t=await _.get("/api/urun-agaci-secim/yukle",{params:{urunKodu:r.value.urunKodu}}),a=t.data.selected_ids,l=t.data.data||{};if(l.created_at){const d=new Date(l.created_at),f=String(d.getDate()).padStart(2,"0"),I=String(d.getMonth()+1).padStart(2,"0"),ne=d.getFullYear(),Te=String(d.getHours()).padStart(2,"0"),W=String(d.getMinutes()).padStart(2,"0");be.value=`${f}.${I}.${ne} ${Te}:${W}`}else be.value="...";ze.value=l.personel_adi||"...",G.value&&G.value.instance&&G.value.instance.selectRows(a,!0)},wa=async()=>{var a,l,d;const t=await _.get("/api/kontrolAktifAl",{params:{userID:K.value.id}});V.value=((a=t.data.aktif)==null?void 0:a.isemri_id)??0,g.value=((l=t.data.aktif)==null?void 0:l.isemri_no)??"",ke.value=((d=t.data.aktif)==null?void 0:d.isemri_id)??0,Re()},We=async t=>{await _.post("/api/kontrolAktifKaydet",{durum:t||"aktif",isEmriID:r.value.isEmriId,istasyonID:r.value.istasyonID,userId:K.value.id})},xa=async()=>{if(!le.value||B.value.length===0){b({message:"Lütfen açıklama giriniz ve en az bir seri no seçiniz.",type:"error",displayTime:2e3});return}const t=B.value.map(l=>({serino:l.serino,sonuc:"Kontrol Edilmedi",aciklama:le.value,urun_kontrol_m_id:s.value.masterId,isemri_no:g.value,user_id:K.value.id}));await _.post("/api/kontroller/toplu-kaydet",t);const a=new Set(B.value.map(l=>l.serino));D.value=D.value.filter(l=>!a.has(l.serino)),B.value=[],le.value="",q()},_a=t=>{var a,l,d,f;Ae.value=((l=(a=t.row)==null?void 0:a.data)==null?void 0:l.id)||0,Be.value=((f=(d=t.row)==null?void 0:d.data)==null?void 0:f.seri_no)||""},Ta=t=>{t.selectedRowsData.length>0?(V.value=t.selectedRowsData[0].isemri_id,ke.value=t.selectedRowsData[0].id,g.value=t.selectedRowsData[0].isemri_no):V.value=0};Ja(async()=>{document.title="OFT - Kalite Kontrol",wa();const[t]=await Promise.all([_.get("/api/gerekceler")]);qe.value=t.data});const Sa=t=>{Re()};function Ca(t){Ie.value=t.selectedRowKeys.length,De.value=Ie.value===Ee.value,s.value.urunAgaciCheck=De.value?"Onaylandı":"Red"}const Ka=t=>{B.value=t.selectedRowsData},Xe=()=>{var t,a,l;(l=(a=(t=Ge.value)==null?void 0:t.$el)==null?void 0:a.querySelector("input[type=file]"))==null||l.click()},Va=[{baslik:"İş Emri Hataları",hatalar:[{kod:"IEH",aciklama:"İş Emri Hatası"},{kod:"SPH",aciklama:"Sipariş Hatası"},{kod:"TH",aciklama:"Taşeron Hatası"},{kod:"EH",aciklama:"Etiket Hatası"}]},{baslik:"Malzeme Hataları",hatalar:[{kod:"CM",aciklama:"Çapaklı Malzeme"},{kod:"SMH",aciklama:"Saç Malzeme Hatası"},{kod:"KH",aciklama:"Kilit Hatası"},{kod:"FB",aciklama:"Formda Bozukluk"},{kod:"CC",aciklama:"Camda Çizik"},{kod:"OH",aciklama:"Ölçüsel Hata"},{kod:"19''H",aciklama:"19'' Ölçü Hatası"},{kod:"AH",aciklama:"Aksesuar Hatası"},{kod:"KPL",aciklama:"Kaplama Hatası"}]},{baslik:"Montaj Hataları",hatalar:[{kod:"MH",aciklama:"Montaj Hatası"},{kod:"TKH",aciklama:"Topraklama Hatası"},{kod:"KAH",aciklama:"Kaynak Hatası"},{kod:"BKE",aciklama:"Bağlantı Kalemi Eksik"},{kod:"BKS",aciklama:"Bağlantı Kalemi Sıkılmamış"},{kod:"ELK",aciklama:"Elektrik Hatası"},{kod:"STH",aciklama:"Su Testi Hatası"}]},{baslik:"Yüzey / Boya Hataları",hatalar:[{kod:"BC",aciklama:"Boyada Çizik"},{kod:"BH",aciklama:"Boya Hatası"},{kod:"SH",aciklama:"Serigrafi Hatası"}]}],v=(t,a)=>{const l=document.createElement("span");l.textContent=a.column.caption;const d=a.column.tooltip||a.column.caption;l.setAttribute("title",d),t.appendChild(l)},Ha=()=>{Ke(()=>{const t=document.querySelector('input[type="checkbox"]');t==null||t.focus()})},Ze=()=>{x.value="",Q.value="",ye.value="",ee.value={},H.value=[],A.value=[]},Da=()=>{V.value=0,g.value="",ke.value=0,r.value={istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:r.value.istasyonID,personelID:r.value.personelID,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0},s.value={masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""},P.value=[],ge.value=[],D.value=[]},Je=()=>{Ke(()=>{var t;(t=He.value)==null||t.focus()})},Ia=async()=>{if(j.value){b({message:"Kayıt işlemi devam ediyor...",type:"warning",displayTime:1500});return}j.value=!0;const t=[];for(const l of H.value)if(l.file){const d=await Ea(l.file),f=l.file.name.split(".").pop()||"jpg";t.push({base64:d.replace(/^data:image\/\w+;base64,/,""),extension:f})}const a={urun_kontrol_m_id:s.value.masterId,isemri_no:g.value,serino:x.value,hatalar:Object.keys(ee.value).filter(l=>ee.value[l]),sonuc:Q.value,resimler:t,hataOzet:ye.value,user_id:K.value.id,isPhoto:H.value.length>0?1:0};try{(await _.post("/api/hata-kaydet",a)).data.success?(b({message:"Kayıt başarılı!",type:"success",displayTime:2e3}),J.value=!1):alert("Kayıt başarısız!")}catch(l){console.error("Hata:",l),alert("Kayıt sırasında bir hata oluştu.")}finally{j.value=!1}},Ea=t=>new Promise((a,l)=>{const d=new FileReader;d.readAsDataURL(t),d.onload=()=>a(d.result),d.onerror=f=>l(f)}),za=t=>{H.value=H.value.filter(a=>a.id!==t)},Aa=t=>{Le.value=t,he.value=!0},Ba=()=>{if(!(!A.value||A.value.length===0)){for(const t of A.value){const a=new FileReader;a.onload=l=>{var f;typeof((f=l.target)==null?void 0:f.result)=="string"&&H.value.push({id:je++,url:URL.createObjectURL(t),file:t})},a.readAsDataURL(t)}A.value=[]}},Na=()=>{const t=new Set(P.value.map(l=>l.seri_no)),a=D.value.filter(l=>!t.has(l.serino));D.value=a},Ra=()=>{x.value||Ke(()=>{He.value.focus()})},Ma=()=>{if(x.value.length===18)return;const t=x.value.replace(/\D/g,"");if(parseInt(t)>0&&parseInt(t)<=r.value.isEmriMiktari){const a=t.padStart(5,"0");x.value=`${g.value}-${a}`}else x.value="",b({message:"Seri no formatı hatalı. Lütfen 5 haneyi geçmeyen ve sipariş miktarından büyük olmayan bir seri no giriniz.",type:"error",displayTime:5e3})},Ua=()=>{if(V.value===0){b({message:"Seçili iş emri yok.",type:"error",displayTime:3e3});return}na.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0}).fire({title:"Emin misiniz?",text:"Kontrol sonlandırılacak!!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, sonlandıralım!",cancelButtonText:"Hayır, vazcgeçtim!"}).then(async a=>{a.isConfirmed?(await Ke(),Ze(),We("pasif"),Da()):(a.dismiss,na.DismissReason.cancel)})},Qe=t=>{const a=(t==null?void 0:t.seri_no)||Be.value;if(!a){b({message:"Seri no bulunamadı.",type:"error",displayTime:2e3});return}console.log("Fotoğraflar için seri no:",a),Be.value=a,oe.value=!0,_.get("/api/hata-goster-resim",{params:{isEmriNo:r.value.isEmriNo,serino:a}}).then(l=>{N.value=Array.isArray(l.data)?l.data.map(d=>d.url):[],N.value.length===0&&b({message:"Fotoğraf bulunamadı.",type:"warning",displayTime:2e3})}).catch(()=>{N.value=[],b({message:"Fotoğraflar alınamadı.",type:"error",displayTime:2e3})})},Oa=async()=>{if(Ae.value===0){b({message:"Lütfen bir kontrol seçiniz.",type:"error",displayTime:3e3});return}if(window.confirm("Bu kaydı silmek istediğinize emin misiniz?"))try{const a=Ae.value||0,l=await _.delete(`/api/kontrol-sil/${a}`);q()}catch(a){alert("Silme işlemi başarısız."),console.error(a)}},Fa=async t=>{var l,d,f;if(confirm("Bu fotoğrafı silmek istediğinizden emin misiniz?"))try{const I=await _.delete("/api/hata-sil-resim",{params:{url:t,isEmriNo:r.value.isEmriNo}});N.value=N.value.filter(W=>W!==t);const ne=(l=I.data)==null?void 0:l.remaining,Te=(d=I.data)==null?void 0:d.seri_no;if(ne===0&&Te){const W=P.value.find(Wa=>Wa.seri_no.startsWith(Te));W&&(W.is_photo=0,(f=L==null?void 0:L.value)!=null&&f.instance&&L.value.instance.refresh())}}catch(I){console.error("Silme hatası:",I),alert("Silinirken hata oluştu.")}},$a=t=>{Ye.value=t,te.value=!0},ea=()=>ae.value+=.1,aa=()=>ae.value=Math.max(.2,ae.value-.1),la=()=>{ae.value=1,se.value={x:0,y:0}},ie=u(!1),_e=u({x:0,y:0}),se=u({x:0,y:0}),Pa=t=>{ie.value=!0,_e.value={x:t.clientX,y:t.clientY}},Ga=t=>{if(!ie.value)return;const a=t.clientX-_e.value.x,l=t.clientY-_e.value.y;se.value.x+=a,se.value.y+=l,_e.value={x:t.clientX,y:t.clientY}},ta=()=>{ie.value=!1},La=t=>{t.preventDefault(),t.deltaY<0?ea():aa()},ja=()=>{window.open("/api/pdf-goster","_blank")},Ya=t=>{const a=document.createElement("div"),l=document.createElement("i");l.className="dx-icon dx-icon-image",l.style.fontSize="16px",l.style.color="green",a.appendChild(l),t.appendChild(a)},qa=()=>{b({message:r.value.isEmriNo,type:"error",displayTime:3e3}),b({message:r.value.urunKodu,type:"error",displayTime:3e3}),Fe.value.acDialog({isEmriNo:r.value.isEmriNo,urunKodu:r.value.urunKodu,urunAdi:r.value.urunAdi})};return(t,a)=>(k(),h(re,null,[e(w,{class:"match-height pa-0"},{default:i(()=>[e(c,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(y),{variant:"outlined",class:"text-center mb-2",block:"",onClick:a[0]||(a[0]=l=>F.value=!0)},{default:i(()=>a[41]||(a[41]=[p(" İş Emri Seç ")])),_:1,__:[41]})]),_:1}),e(c,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(y),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:ja},{default:i(()=>a[42]||(a[42]=[p(" Teknik Resim ")])),_:1,__:[42]},8,["disabled"])]),_:1}),e(c,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(y),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:Ua},{default:i(()=>a[43]||(a[43]=[p(" Kontrol Sonu ")])),_:1,__:[43]},8,["disabled"])]),_:1}),e(c,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(y),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:qa},{default:i(()=>a[44]||(a[44]=[p(" Mail Gönder ")])),_:1,__:[44]},8,["disabled"])]),_:1})]),_:1}),e(w,{class:"match-height mt-0 gap-0"},{default:i(()=>[e(c,{md:"4",cols:"12"},{default:i(()=>[e(z,null,{default:i(()=>[e(me,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(M,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[45]||(a[45]=[p("Genel Bilgiler")])),_:1,__:[45]})]),_:1}),e(U,{class:"gap-2 pa-2"},{default:i(()=>[e(S,{modelValue:r.value.istasyon,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.istasyon=l),class:"mt-5",label:"İstasyon",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{modelValue:r.value.siparisNo,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.siparisNo=l),class:"mt-4",label:"Sipariş No",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{value:fa(r.value.isEmriMiktari),modelValue:r.value.isEmriMiktari,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value.isEmriMiktari=l),class:"mt-4",label:"İş Emri Miktarı",variant:"outlined",readonly:""},null,8,["value","modelValue"]),e(S,{modelValue:r.value.isEmriNo,"onUpdate:modelValue":a[4]||(a[4]=l=>r.value.isEmriNo=l),class:"mt-4",label:"İşemri No",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{modelValue:r.value.urunKodu,"onUpdate:modelValue":a[5]||(a[5]=l=>r.value.urunKodu=l),class:"mt-4",label:"Ürün Kodu",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{modelValue:r.value.urunAdi,"onUpdate:modelValue":a[6]||(a[6]=l=>r.value.urunAdi=l),class:"mt-4",label:"Ürün Adı",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{modelValue:r.value.musteri,"onUpdate:modelValue":a[7]||(a[7]=l=>r.value.musteri=l),class:"mt-4",label:"Müşteri",variant:"outlined",readonly:""},null,8,["modelValue"]),e(S,{modelValue:r.value.planTarih,"onUpdate:modelValue":a[8]||(a[8]=l=>r.value.planTarih=l),class:"mt-4",label:"Planlanan Üretim Tarihi",variant:"outlined",readonly:""},null,8,["modelValue"]),e(ra,{modelValue:r.value.aksesuar,"onUpdate:modelValue":a[9]||(a[9]=l=>r.value.aksesuar=l),class:"mt-4",label:"Aksesuar",variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{md:"8",cols:"12"},{default:i(()=>[e(c,{cols:"12",class:"pa-0"},{default:i(()=>[e(z,{disabled:g.value.length===0},{default:i(()=>[e(me,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(M,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[46]||(a[46]=[p("Seri Başlangiç Onayı")])),_:1,__:[46]})]),_:1}),e(U,{class:"gap-2 pa-3"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"12",md:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(O,{modelValue:s.value.urunAgaciText,"onUpdate:modelValue":a[10]||(a[10]=l=>s.value.urunAgaciText=l),label:"Ürün Ağacı Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",md:"3",class:"d-flex pa-1"},{default:i(()=>[e(o(y),{modelValue:s.value.urunAgaciCheck,"onUpdate:modelValue":a[11]||(a[11]=l=>s.value.urunAgaciCheck=l),icon:"tabler-binary-tree-2",variant:"tonal",block:"",color:"success",rounded:"",onClick:a[12]||(a[12]=l=>$.value=!0)},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",md:"3",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.urunAgaciCheck,"onUpdate:value":a[13]||(a[13]=l=>s.value.urunAgaciCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(O,{modelValue:s.value.gorunumText,"onUpdate:modelValue":a[14]||(a[14]=l=>s.value.gorunumText=l),label:"Görünüm Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.gorunumCheck,"onUpdate:value":a[15]||(a[15]=l=>s.value.gorunumCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(O,{modelValue:s.value.olcuselText,"onUpdate:modelValue":a[16]||(a[16]=l=>s.value.olcuselText=l),label:"Ölçüsel Kontrol",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.olcuselCheck,"onUpdate:value":a[17]||(a[17]=l=>s.value.olcuselCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(O,{modelValue:s.value.paketlemeText,"onUpdate:modelValue":a[18]||(a[18]=l=>s.value.paketlemeText=l),label:"Paketleme Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.paketlemeCheck,"onUpdate:value":a[19]||(a[19]=l=>s.value.paketlemeCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(O,{modelValue:s.value.etiketText,"onUpdate:modelValue":a[20]||(a[20]=l=>s.value.etiketText=l),label:"Etiket Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.etiketCheck,"onUpdate:value":a[21]||(a[21]=l=>s.value.etiketCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(O,{modelValue:s.value.dokumanText,"onUpdate:modelValue":a[22]||(a[22]=l=>s.value.dokumanText=l),label:"Doküman Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o(R),{"data-source":o(Y),value:s.value.dokumanCheck,"onUpdate:value":a[23]||(a[23]=l=>s.value.dokumanCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(o(y),{variant:"outlined",class:"d-flex justify-center mt-4",block:"",color:"warning",onClick:ga},{default:i(()=>a[47]||(a[47]=[p(" Kaydet / Güncelle ")])),_:1,__:[47]})]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}),e(c,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(z,{disabled:g.value.length===0},{default:i(()=>[e(me,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(M,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[48]||(a[48]=[p("Onay Süreci")])),_:1,__:[48]})]),_:1}),e(U,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ue),{id:"gridSurec","data-source":ge.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,width:"100%","column-auto-width":!0,"word-wrap-enabled":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget","focused-row-key":fe.value,"onUpdate:focusedRowKey":a[24]||(a[24]=l=>fe.value=l),height:"242"},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(k(),h("i",kl,"✔️")):l.value==="Şartlı Onay"?(k(),h("i",yl,"⚠️")):l.value==="Red"?(k(),h("i",gl,"❌")):(k(),h("i",hl))]),default:i(()=>[e(o(n),{"data-field":"id",caption:"ID",width:"50",visible:!1}),e(o(n),{"data-field":"revizyon",caption:"Rvz",width:"50"}),e(o(n),{"data-field":"kontrol_tarihi",caption:"Tarih","data-type":"date",width:"130",format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(o(n),{"data-field":"urun_agaci_ok",caption:"ÜA","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"urun_agaci_not",caption:"Ürün Ağacı Not"}),e(o(n),{"data-field":"gorunum_ok",caption:"GR","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"gorunum_not",caption:"Görünüm Not"}),e(o(n),{"data-field":"olcusel_ok",caption:"ÖL","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"olcusel_not",caption:"Ölçüsel Not"}),e(o(n),{"data-field":"paketleme_ok",caption:"PK","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"paketleme_not",caption:"Paketleme Not"}),e(o(n),{"data-field":"etiket_ok",caption:"ET","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"etiket_not",caption:"Etiket Not"}),e(o(n),{"data-field":"dokuman_ok",caption:"DK","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"dokuman_not",caption:"Doküman Not"}),e(o(de),{mode:"virtual"}),e(o(ce),{mode:"none"})]),_:1},8,["data-source","focused-row-key"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(w,{class:"match-height pa-0"},{default:i(()=>[e(c,{cols:"12",class:"py-2"},{default:i(()=>[e(o(y),{variant:"outlined",disabled:s.value.masterId===0,class:"text-center me-2 mb-2",color:"info",block:"",onClick:a[25]||(a[25]=l=>J.value=!0)},{default:i(()=>a[49]||(a[49]=[p(" Kontrol Gir ")])),_:1,__:[49]},8,["disabled"])]),_:1})]),_:1}),e(c,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(z,{disabled:g.value.length===0},{default:i(()=>[e(me,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(M,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[50]||(a[50]=[p("Seri Kontroller")])),_:1,__:[50]})]),_:1}),m("div",bl,[e(o(y),{variant:"tonal",icon:"tabler-trash",rounded:"",onClick:Oa}),e(o(y),{variant:"tonal",icon:"tabler-photo",rounded:"",onClick:Qe})]),e(U,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ue),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:L,"data-source":P.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onFocusedRowChanged:_a},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(k(),h("i",wl)):l.value==="Şartlı Onay"?(k(),h("i",xl)):l.value==="Red"?(k(),h("i",_l)):(k(),h("i",Tl))]),hataTemplate:i(({data:l})=>[l.value==="f"||l.value===!1?(k(),h("i",Sl)):(k(),h("i",Cl))]),fotoTemplate:i(({data:l})=>[l.value==="t"||l.value===!0?(k(),h("i",{key:0,onClick:d=>Qe(l==null?void 0:l.data),class:C(["dx-icon","dx-icon-image"]),style:{fontSize:"16px",color:"green",cursor:"pointer"},title:"Fotoğrafları Göster"},null,8,Kl)):Qa("",!0)]),default:i(()=>[e(o(n),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(o(n),{"data-field":"urun_kontrol_m_id",caption:"Master ID",width:"70",visible:!1}),e(o(n),{"data-field":"kontrol_tarihi",caption:"Kontrol Tarihi","data-type":"date",width:130,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(l)).replace(/\//g,".")},"allow-sorting":!1},null,8,["format"]),e(o(n),{"data-field":"seri_no",caption:"Seri No",width:"170"}),e(o(n),{"data-field":"is_photo","header-cell-template":Ya,width:"30","cell-template":"fotoTemplate"}),e(o(n),{"data-field":"sonuc",caption:"Sonuç",width:"70","cell-template":"sonucTemplate"}),e(o(n),{"data-field":"not",caption:"Not",width:"100"}),e(o(n),{"data-field":"cc",caption:"CC",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Camda Çizik"}),e(o(n),{"data-field":"bke",caption:"BKE",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Bağlantı Kalemi Eksik"}),e(o(n),{"data-field":"cm",caption:"CM",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Çapaklı Malzeme"}),e(o(n),{"data-field":"kh",caption:"KH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Kilit Hatası"}),e(o(n),{"data-field":"fb",caption:"FB",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Formda Bozukluk"}),e(o(n),{"data-field":"sh",caption:"SH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Serigrafi Hatası"}),e(o(n),{"data-field":"kah",caption:"KAH",width:"47","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Kaynak Hatası"}),e(o(n),{"data-field":"bc",caption:"BC",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Boyada Çizik"}),e(o(n),{"data-field":"kpl",caption:"KPL",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Kaplama Hatası"}),e(o(n),{"data-field":"tkh",caption:"TKH",width:"47","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Topraklama Hatası"}),e(o(n),{"data-field":"bh",caption:"BH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Boya Hatası"}),e(o(n),{"data-field":"ieh",caption:"IEH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"İş Emri Hatası"}),e(o(n),{"data-field":"oh",caption:"OH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Ölçüsel Hata"}),e(o(n),{"data-field":"h19",caption:"H19",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"19'' Ölçü Hatası"}),e(o(n),{"data-field":"smh",caption:"SMH",width:"47","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Saç Malzeme Hatası"}),e(o(n),{"data-field":"th",caption:"TH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Taşeron Hatası"}),e(o(n),{"data-field":"ah",caption:"AH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Aksesuar Hatası"}),e(o(n),{"data-field":"mh",caption:"MH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Montaj Hatası"}),e(o(n),{"data-field":"sth",caption:"STH",width:"47","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Su Testi Hatası"}),e(o(n),{"data-field":"bks",caption:"BKS",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Bağlantı Kalemi Sıkılmamış"}),e(o(n),{"data-field":"eh",caption:"EH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Etiket Hatası"}),e(o(n),{"data-field":"elk",caption:"ELK",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Elektrik Hatası"}),e(o(n),{"data-field":"sph",caption:"SPH",width:"40","cell-template":"hataTemplate","header-cell-template":v,tooltip:"Sipariş Hatası"}),e(o(n),{"data-field":"olusturan_id",caption:"Prs ID",width:"40"}),e(o(ce),{mode:"none"}),e(o(de),{mode:"virtual"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1}),e(w,{class:"match-height mt-0"},{default:i(()=>[e(c,{cols:"12",class:"d-flex py-4 gap-4"},{default:i(()=>[e(pl,{modelValue:le.value,"onUpdate:modelValue":a[26]||(a[26]=l=>le.value=l),items:qe.value,label:"Gerekçe",variant:"outlined","item-title":"tanim","item-value":"id",disabled:g.value.length===0||B.value.length===0,"auto-grow":"",clearable:"",rows:"1"},null,8,["modelValue","items","disabled"]),e(o(y),{variant:"outlined",disabled:g.value.length===0||B.value.length===0,color:"warning",height:37,onClick:xa},{default:i(()=>a[51]||(a[51]=[p(" Gerekçe Gir ")])),_:1,__:[51]},8,["disabled"])]),_:1})]),_:1}),e(c,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(z,{disabled:g.value.length===0},{default:i(()=>[e(me,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(M,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[52]||(a[52]=[p("Kontrol Edilmeyenler")])),_:1,__:[52]})]),_:1}),e(U,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ue),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:L,"data-source":D.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onSelectionChanged:Ka},{default:i(()=>[e(o(n),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(o(n),{"data-field":"serino",caption:"Seri No",width:"150"}),e(o(ce),{mode:"none"}),e(o(de),{mode:"virtual"}),e(o(Me),{mode:"multiple","show-check-boxes-mode":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1}),e(o(Ue),{visible:F.value,"onUpdate:visible":a[29]||(a[29]=l=>F.value=l),width:"90%",height:"90%","hide-on-outside-click":!1,"show-close-button":!0,title:"İşemri Seçiniz..."},{default:i(()=>[m("div",Vl,[m("h3",null,"seçilen iş emri: "+T(g.value),1)]),(k(),Se(o(ue),{id:"gridEmirler",ref_key:"emirlerRef",ref:ca,key:da.value,"data-source":$e.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,height:"95%","allow-column-resizing":!0,"column-resizing-mode":"widget","column-auto-width":!0,"focused-row-key":fe.value,"onUpdate:focusedRowKey":a[28]||(a[28]=l=>fe.value=l),onRowDblClick:Sa,onSelectionChanged:Ta},{secimTemplate:i(({data:l})=>[l.value===ke.value?(k(),h("i",Hl)):(k(),h("i",Dl))]),default:i(()=>[e(o(n),{"data-field":"id",caption:"ID",visible:!1,width:"40","cell-template":"secimTemplate"}),e(o(n),{"data-field":"isemri_id",caption:" ","data-type":"number",width:30,visible:!1}),e(o(n),{"data-field":"tanim",caption:"İSTASYON","min-width":130}),e(o(n),{"data-field":"belge_no",caption:"BELGE NO","min-width":130}),e(o(n),{"data-field":"cari_ad",caption:"CARİ AD","min-width":130}),e(o(n),{"data-field":"isemri_no",caption:"İŞ EMRİ NO","min-width":120,"allow-sorting":!1}),e(o(n),{"data-field":"item_name",caption:"STOK ADI","allow-sorting":!1}),e(o(n),{"data-field":"item_code",caption:"STOK KODU",visible:!0,"min-width":120,"allow-sorting":!1}),e(o(n),{"data-field":"istasyon_id",caption:"İSTASYON ID","data-type":"number",width:60,visible:!1}),e(o(rl),{visible:pe.value,"onUpdate:visible":a[27]||(a[27]=l=>pe.value=l),"show-indicator":!0,"show-pane":!0,shading:!0},null,8,["visible"]),e(o(oa),{visible:!1}),e(o(ol),{visible:!1}),e(o(il),{visible:!1}),e(o(sl),{visible:!1}),e(o(nl),{visible:!0,width:240}),e(o(de),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(o(ce),{mode:"multiple"}),e(o(Me),{"select-all-mode":"page",mode:"single","show-check-boxes-mode":"always"}),e(o(ia),null,{default:i(()=>[e(o(sa),{"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source","focused-row-key"])),e(o(X),{widget:"dxButton",toolbar:"bottom",location:"center",options:xe,onClick:Re}),e(o(X),{widget:"dxButton",toolbar:"bottom",location:"center",options:Ne})]),_:1},8,["visible"]),e(o(Ue),{visible:$.value,"onUpdate:visible":a[30]||(a[30]=l=>$.value=l),width:"90%",height:"90%","hide-on-outside-click":!1,"show-close-button":!0,title:"Ürün Ağacı: "+r.value.urunKodu},{default:i(()=>[m("div",Il,[m("h2",null,T(g.value),1),m("h3",null,"Onay Tarihi: "+T(be.value),1),m("h3",null,"Onaylayan: "+T(ze.value),1)]),e(w,{class:"d-flex justify-center align-center pt-1 pb-2"},{default:i(()=>[e(c,{cols:"6",class:"d-flex justify-stasrt ps-5"},{default:i(()=>[m("h4",null,[a[53]||(a[53]=p("Onay:   ")),m("span",El,T(Ie.value||0)+" / "+T(Ee.value),1)])]),_:1}),e(c,{cols:"6",class:"d-flex justify-end pe-5"},{default:i(()=>[p(T(De.value===!0?we[0].title:we[1].title),1)]),_:1})]),_:1}),e(o(ue),{id:"gridAgac",ref_key:"agacRef",ref:G,"data-source":ve.value,"key-expr":"user_line_no","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,"column-auto-width":!0,height:"96%","allow-column-resizing":!0,"column-resizing-mode":"widget",onSelectionChanged:Ca},{default:i(()=>[e(o(n),{"data-field":"qty_base_bom",caption:"ADET",width:50,"data-type":"number",format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(o(n),{"data-field":"item_id",caption:"ID",width:90,visible:!1}),e(o(n),{"data-field":"user_line_no",caption:"NO",width:50,visible:!1}),e(o(n),{"data-field":"stok_kodu",caption:"STOK KODU",width:120}),e(o(n),{"data-field":"stok_adi",caption:"STOK ADI"}),e(o(oa),{visible:!1}),e(o(ce),{mode:"none"}),e(o(Me),{"select-all-mode":"page",mode:"multiple","show-check-boxes-mode":"always","allow-select-all":!1}),e(o(de),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(o(ia),null,{default:i(()=>[e(o(sa),{"align-by-column":!0,column:"stok_kodu","summary-type":"count","display-format":"Satır sayısı: {0}"})]),_:1})]),_:1},8,["data-source"]),e(o(X),{disabled:Z.value,widget:"dxButton",toolbar:"bottom",location:"center",options:{...xe,text:Z.value?"Kaydediliyor...":"Kaydet"},onClick:ha},null,8,["disabled","options"]),e(o(X),{widget:"dxButton",toolbar:"bottom",location:"center",options:Ne})]),_:1},8,["visible","title"]),e(o(Ue),{visible:J.value,"show-title":!0,title:"Hata Girişi",width:"90%",height:"90%","drag-enabled":!0,"close-on-outside-click":!1,"show-close-button":!1,onShown:Je},{default:i(()=>[e(w,{dense:""},{default:i(()=>[e(c,{cols:"12",class:"d-flex pa-1 pb-0"},{default:i(()=>[e(S,{ref_key:"serinoRef",ref:He,modelValue:x.value,"onUpdate:modelValue":a[31]||(a[31]=l=>x.value=l),label:"Seri No",variant:"outlined",rules:[l=>!!l||"Seri no zorunlu"],onKeydown:el(al(Ha,["prevent"]),["enter"]),onBlur:Ra,onChange:Ma},null,8,["modelValue","rules","onKeydown"])]),_:1}),e(c,{cols:"12",class:"d-flex pa-1 pb-3 justify-end"},{default:i(()=>[e(O,{disabled:x.value.length===0,label:"Not",modelValue:ye.value,"onUpdate:modelValue":a[32]||(a[32]=l=>ye.value=l),"auto-grow":"",class:"mt-4",variant:"outlined",rows:"1"},null,8,["disabled","modelValue"])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pe-2 pb-4"},{default:i(()=>[m("div",null,[e(o(R),{disabled:x.value.length===0,"data-source":we,value:Q.value,"display-expr":"title","value-expr":"value",onValueChanged:a[33]||(a[33]=l=>Q.value=l.value),height:37},null,8,["disabled","value"])])]),_:1}),e(c,{cols:"6",class:"d-flex pa-1 pb-3 justify-end"},{default:i(()=>[e(o(y),{disabled:x.value.length===0,block:"",icon:"tabler-camera-plus",variant:"outlined",rounded:"",onClick:Xe},null,8,["disabled"])]),_:1})]),_:1}),a[54]||(a[54]=m("hr",null,null,-1)),e(vl,null,{default:i(()=>[(k(),h(re,null,Ce(Va,(l,d)=>e(w,{key:d},{default:i(()=>[e(c,{cols:"12"},{default:i(()=>[m("strong",null,T(l.baslik),1)]),_:2},1024),(k(!0),h(re,null,Ce(l.hatalar,(f,I)=>(k(),Se(c,{key:I,cols:"12",sm:"6",md:"4",class:"py-0 my-0"},{default:i(()=>[e(ra,{disabled:x.value.length===0,modelValue:ee.value[f.kod],"onUpdate:modelValue":ne=>ee.value[f.kod]=ne,label:`${f.kod}: ${f.aciklama}`,density:"compact","hide-details":"",class:"py-0 my-0"},null,8,["disabled","modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128))]),_:2},1024)),64))]),_:1}),m("div",zl,[e(fl,{ref_key:"fileInput",ref:Ge,modelValue:A.value,"onUpdate:modelValue":a[34]||(a[34]=l=>A.value=l),accept:"image/*",label:"Fotoğraf Seç",multiple:"",style:{display:"none"},onChange:Ba},null,8,["modelValue"])]),e(c,{cols:"12",class:"d-flex pa-0 pt-2 pb-2 justify-end gap-2"},{default:i(()=>[e(o(y),{disabled:x.value.length===0,icon:"tabler-camera-plus",variant:"outlined",block:"",rounded:"",onClick:Xe},null,8,["disabled"])]),_:1}),e(w,null,{default:i(()=>[(k(!0),h(re,null,Ce(H.value,l=>(k(),Se(c,{key:l.id,cols:"12",sm:"4",md:"3"},{default:i(()=>[e(Ve,{src:l.url,"max-height":"200",class:"rounded-lg",onClick:d=>Aa(l.url)},null,8,["src","onClick"]),e(o(y),{icon:"tabler-trash",color:"error",rounded:"",onClick:d=>za(l.id),class:"mt-1"},null,8,["onClick"])]),_:2},1024))),128))]),_:1}),e(o(X),{disabled:x.value.length===0||Q.value.length===0||j.value,widget:"dxButton",toolbar:"bottom",location:"center",options:{...xe,text:j.value?"Kaydediliyor...":xe.text},onClick:Ia},null,8,["disabled","options"]),e(o(X),{widget:"dxButton",toolbar:"bottom",location:"center",options:Ne})]),_:1,__:[54]},8,["visible"]),e(Oe,{modelValue:he.value,"onUpdate:modelValue":a[36]||(a[36]=l=>he.value=l),"max-width":"1200"},{default:i(()=>[e(z,null,{default:i(()=>[e(Ve,{src:Le.value,class:"ma-4","aspect-ratio":"1.5"},null,8,["src"]),e(ml,null,{default:i(()=>[e(ua),e(o(y),{text:"",onClick:a[35]||(a[35]=l=>he.value=!1)},{default:i(()=>a[55]||(a[55]=[p("Kapat")])),_:1,__:[55]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(cl,{type:"error",class:"mt-2",border:"start","colored-border":"",elevation:"2",variant:"tonal"},{default:i(()=>a[56]||(a[56]=[m("strong",null,"CC:",-1),p(" Camda Çizik   "),m("strong",null,"BKE:",-1),p(" Bağlantı Kalemi Eksik   "),m("strong",null,"CM:",-1),p(" Çapaklı Malzeme   "),m("strong",null,"KH:",-1),p(" Kilit Hatası   "),m("strong",null,"FB:",-1),p(" Formda Bozukluk   "),m("strong",null,"SH:",-1),p(" Serigrafi Hatası   "),m("strong",null,"KAH:",-1),p(" Kaynak Hatası   "),m("strong",null,"BC:",-1),p(" Boyada Çizik   "),m("strong",null,"KPL:",-1),p(" Kaplama Hatası   "),m("strong",null,"TKH:",-1),p(" Topraklama Hatası   "),m("strong",null,"BH:",-1),p(" Boya Hatası   "),m("strong",null,"IEH:",-1),p(" İş Emri Hatası   "),m("strong",null,"OH:",-1),p(" Ölçüsel Hata   "),m("strong",null,"H19:",-1),p(" 19'' Ölçü Hatası   "),m("strong",null,"SMH:",-1),p(" Saç Malzeme Hatası   "),m("strong",null,"TH:",-1),p(" Taşeron Hatası   "),m("strong",null,"AH:",-1),p(" Aksesuar Hatası   "),m("strong",null,"MH:",-1),p(" Montaj Hatası   "),m("strong",null,"STH:",-1),p(" Su Testi Hatası   "),m("strong",null,"BKS:",-1),p(" Bağlantı Kalemi Sıkılmamış   "),m("strong",null,"EH:",-1),p(" Etiket Hatası   "),m("strong",null,"ELK:",-1),p(" Elektrik Hatası   "),m("strong",null,"SPH:",-1),p(" Sipariş Hatası   ")])),_:1,__:[56]}),e(Oe,{modelValue:oe.value,"onUpdate:modelValue":a[38]||(a[38]=l=>oe.value=l),"max-width":"800"},{default:i(()=>[e(z,null,{default:i(()=>[e(M,{class:"d-flex justify-space-between align-center"},{default:i(()=>{var l;return[m("span",null,"Seri No: "+T(((l=va.value)==null?void 0:l.seri_no)||""),1),e(o(y),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[37]||(a[37]=d=>oe.value=!1)})]}),_:1}),e(U,null,{default:i(()=>[e(w,null,{default:i(()=>[(k(!0),h(re,null,Ce(N.value,(l,d)=>(k(),Se(c,{key:d,cols:"12",md:"4"},{default:i(()=>[e(Ve,{src:l,"aspect-ratio":"4/3",cover:"",class:"mb-2"},null,8,["src"]),m("div",Al,[e(o(y),{variant:"tonal",icon:"tabler-trash",rounded:"",onClick:f=>Fa(l)},null,8,["onClick"]),e(o(y),{variant:"tonal",icon:"tabler-eye",rounded:"",onClick:f=>$a(l)},null,8,["onClick"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Oe,{modelValue:te.value,"onUpdate:modelValue":a[40]||(a[40]=l=>te.value=l),fullscreen:""},{default:i(()=>[e(z,null,{default:i(()=>[e(M,{class:"d-flex justify-space-between align-center"},{default:i(()=>[e(ua),e(o(y),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[39]||(a[39]=l=>te.value=!1)})]),_:1}),m("div",Bl,[e(o(y),{variant:"tonal",icon:"tabler-zoom-in",rounded:"",onClick:ea}),e(o(y),{variant:"tonal",icon:"tabler-zoom-out",rounded:"",onClick:aa}),e(o(y),{variant:"tonal",icon:"tabler-zoom-reset",rounded:"",onClick:la})]),e(U,null,{default:i(()=>[m("div",{style:{overflow:"auto","max-block-size":"80vh"},onWheel:La,onMousedown:Pa,onMousemove:Ga,onMouseup:ta,onMouseleave:ta},[e(Ve,{src:Ye.value,class:"w-100 h-auto",style:ll({transform:`scale(${ae.value}) translate(${se.value.x}px, ${se.value.y}px)`,cursor:ie.value?"grabbing":"grab",transition:ie.value?"none":"transform 0.2s ease","max-width":"unset","max-height":"unset","user-select":"none","pointer-events":"none"}),alt:"Zoomable",draggable:"false"},null,8,["src","style"])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(dl,{ref_key:"hataDialogRef",ref:Fe},null,512)],64))}}),Rt=tl(Nl,[["__scopeId","data-v-223a64d8"]]);export{Rt as default};
