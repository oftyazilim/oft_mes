import{bd as Ze,de as te,d as C,r as f,G as Qe,w as et,X as tt,b2 as nt,c as at,o as K,b as a,e as v,f as p,m as l,v as V,g as ne,Z as ae,t as lt,ba as ot,F as it,b3 as D}from"./main-D-SiMLc-.js";import{D as rt}from"./context-menu-qNiDoCD4.js";import{D as L,a as b,g as ut,h as st,v as dt,i as pt,l as ct,e as G,n as mt,o as gt,w as ft,p as ht,q as bt,c as vt,r as yt,s as xt,x as le,u as oe}from"./data-grid-DHvdGYFh.js";import{D as St}from"./load-panel-CdISIlcP.js";import{D as B}from"./tabs-DmZ13Mud.js";import{e as Ct}from"./export_data_grid-BFRbRuvi.js";import{o as H,aL as wt,a4 as Dt,e as ie,p as Et,B as Bt}from"./ui.errors-DA9dmEOa.js";import{at as _t,au as It,v as kt,L as Rt}from"./m_select_box-Ces87H0S.js";import"./m_resize_observer-By7pJJgF.js";import"./format_helper-C0BNlQNB.js";import{n as re}from"./notify-Y78Cne3X.js";import{e as Ft}from"./exceljs.min-DIuQqeZy.js";import{s as Tt}from"./FileSaver-CQu8bA20.js";import{_ as Ot}from"./kullanici-ekle.vue_vue_type_script_setup_true_lang-C6yvfYpn.js";import{D as ue}from"./button-B2nfU7Zr.js";import{p as At,a as _}from"./index-BdFbhXmR.js";import"./list.edit.decorator.swipe-BTl3-GCq.js";import{ad as Mt}from"./m_row_dragging-idfaEyVW.js";import{S as O}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{V as Nt}from"./VCardText-TLedgTXA.js";import{V as I,b as $t}from"./VCard-CrTJSgVK.js";import{a as Pt}from"./VOverlay-HRxhGnpa.js";import{_ as zt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./themes-Dksif5Ny.js";import"./overlay-1elVe3rM.js";import"./editor-B-sci-AC.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./validators-BwBNGiur.js";import"./helpers-BGv4x_9E.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-DdbOQlYA.js";import"./focus-BfIBbilw.js";import"./VSelect-CyBnlFFw.js";import"./VTextField-1bo5W7Aw.js";/* empty css                   */import"./VCounter-DkMTHhv-.js";import"./VImg-Cc13YmMm.js";import"./VField-D6T2QOoR.js";import"./easing-Bybner-F.js";import"./VInput-D07CPYP3.js";import"./form-M-D7j6ft.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-BVvELrf5.js";import"./ssrBoot-BBw5Gamk.js";import"./VAvatar-eX3ssqTG.js";import"./VDivider-BHmZFuOT.js";import"./dialog-transition-BlXdzUKE.js";import"./VMenu-DzUkUFOH.js";import"./scopeId-DNf-v3va.js";import"./VCheckboxBtn-BpjsWrzn.js";import"./VSelectionControl-_JMgLbVH.js";import"./VChip-DbN4mugn.js";import"./VSlideGroup-DKtJMzRR.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-BVE2k1Lh.js";import"./VDialog-CZA9JvUd.js";import"./VForm-tdVxuQKW.js";import"./VRow-Bvzmq6zu.js";/* empty css              */import"./VCol-CUagATwZ.js";import"./m_popover-CC6Zz0sy.js";import"./delay-CD9o_e6I.js";import"./lazy-BKoCDCTC.js";const Kt="dx-list-reorder-handle-container",se="dx-list-reorder-handle",Vt="dx-list-item-ghost-reordering";class Lt extends It{_init(){const r=this._list,{grouped:h,itemDragging:g}=this._list.option();this._groupedEnabled=h,this._lockedDrag=!1;const E=this._groupedEnabled?"> .dx-list-items > .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-items > .dx-list-item";this._sortable=r._createComponent(r._scrollView.content(),Mt,Ze({component:r,contentTemplate:null,allowReordering:!1,filter:E,container:r.$element().get(0),dragDirection:g!=null&&g.group?"both":"vertical",handle:`.${se}`,dragTemplate:this._dragTemplate,onDragStart:d=>{this._dragStartHandler(d)},onDragChange:d=>{this._dragChangeHandler(d)},onReorder:d=>{this._reorderHandler(d)}},g))}afterRender(){this._sortable.update()}_dragTemplate(r){const h=H(r.itemElement).clone().addClass(Vt).addClass("dx-state-hover");return wt(h,Dt(r.itemElement)),h}_dragStartHandler(r){this._lockedDrag&&(r.cancel=!0)}_dragChangeHandler(r){this._groupedEnabled&&te(r.fromIndex)&&te(r.toIndex)&&!this._sameParent(r.fromIndex,r.toIndex)&&(r.cancel=!0)}_sameParent(r,h){const g=this._list.getItemElementByFlatIndex(r);return this._list.getItemElementByFlatIndex(h).parent().get(0)===g.parent().get(0)}_reorderHandler(r){const h=this._list.getItemElementByFlatIndex(r.toIndex);this._list.reorderItem(H(r.itemElement),h)}afterBag(r){const h=H("<div>").addClass(se);ie.on(h,Et.down,(g=>{this._lockedDrag=!Bt(g)})),ie.on(h,kt.name,{timeout:30},(g=>{g.cancel=!0,this._lockedDrag=!1})),r.$container.addClass(Kt).append(h)}}_t("reorder","default",Lt);/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const pe={props:{accessKey:String,activeStateEnabled:Boolean,allowItemDeleting:Boolean,bounceEnabled:Boolean,collapsibleGroups:Boolean,dataSource:[Array,Object,String],disabled:Boolean,displayExpr:[Function,String],elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Number,String],hint:String,hoverStateEnabled:Boolean,indicateLoading:Boolean,itemDeleteMode:String,itemDragging:Object,itemHoldTimeout:Number,items:Array,itemTemplate:{},keyExpr:[Function,String],menuItems:Array,menuMode:String,nextButtonText:String,noDataText:String,onContentReady:Function,onDisposing:Function,onGroupRendered:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemDeleted:Function,onItemDeleting:Function,onItemHold:Function,onItemRendered:Function,onItemReordered:Function,onItemSwipe:Function,onOptionChanged:Function,onPageLoading:Function,onPullRefresh:Function,onScroll:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,onSelectionChanging:Function,pageLoadingText:String,pageLoadMode:String,pulledDownText:String,pullingDownText:String,pullRefreshEnabled:Boolean,refreshingText:String,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollByThumb:Boolean,scrollingEnabled:Boolean,searchEditorOptions:Object,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,searchValue:String,selectAllMode:String,selectAllText:String,selectByClick:Boolean,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,showScrollbar:String,showSelectionControls:Boolean,tabIndex:Number,useNativeScrolling:Boolean,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowItemDeleting":null,"update:bounceEnabled":null,"update:collapsibleGroups":null,"update:dataSource":null,"update:disabled":null,"update:displayExpr":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:indicateLoading":null,"update:itemDeleteMode":null,"update:itemDragging":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:keyExpr":null,"update:menuItems":null,"update:menuMode":null,"update:nextButtonText":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onGroupRendered":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemReordered":null,"update:onItemSwipe":null,"update:onOptionChanged":null,"update:onPageLoading":null,"update:onPullRefresh":null,"update:onScroll":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:onSelectionChanging":null,"update:pageLoadingText":null,"update:pageLoadMode":null,"update:pulledDownText":null,"update:pullingDownText":null,"update:pullRefreshEnabled":null,"update:refreshingText":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:scrollingEnabled":null,"update:searchEditorOptions":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:searchValue":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectByClick":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:showScrollbar":null,"update:showSelectionControls":null,"update:tabIndex":null,"update:useNativeScrolling":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=Rt,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},itemDragging:{isCollectionItem:!1,optionName:"itemDragging"},menuItem:{isCollectionItem:!0,optionName:"menuItems"},searchEditorOptions:{isCollectionItem:!1,optionName:"searchEditorOptions"}}}};At(pe);const Gt=C(pe),ce={emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}};_(ce);const Y=C(ce);Y.$_optionName="buttons";Y.$_isCollectionItem=!0;Y.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const me={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};_(me);const Ht=C(me);Ht.$_optionName="cursorOffset";const ge={emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:showChevron":null,"update:template":null,"update:text":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,showChevron:Boolean,template:{},text:String,visible:Boolean}};_(ge);const fe=C(ge);fe.$_optionName="items";fe.$_isCollectionItem=!0;const he={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:boundary":null,"update:container":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:elementAttr":null,"update:filter":null,"update:group":null,"update:handle":null,"update:height":null,"update:itemOrientation":null,"update:moveItemOnDrop":null,"update:onAdd":null,"update:onDisposing":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onRemove":null,"update:onReorder":null,"update:rtlEnabled":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:width":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,boundary:{},container:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,elementAttr:Object,filter:String,group:String,handle:String,height:[Number,String],itemOrientation:String,moveItemOnDrop:Boolean,onAdd:Function,onDisposing:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onInitialized:Function,onOptionChanged:Function,onRemove:Function,onReorder:Function,rtlEnabled:Boolean,scrollSensitivity:Number,scrollSpeed:Number,width:[Number,String]}};_(he);const be=C(he);be.$_optionName="itemDragging";be.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};const ve={emits:{"update:isActive":null,"update:hoveredElement":null,"update:action":null,"update:text":null},props:{action:Function,text:String}};_(ve);const ye=C(ve);ye.$_optionName="menuItems";ye.$_isCollectionItem=!0;const xe={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Number,String]}};_(xe);const jt=C(xe);jt.$_optionName="options";const Se={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttons":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isDirty":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:mask":null,"update:maskChar":null,"update:maskInvalidMessage":null,"update:maskRules":null,"update:maxLength":null,"update:mode":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showClearButton":null,"update:showMaskMode":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useMaskedValue":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,buttons:Array,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isDirty:Boolean,isValid:Boolean,label:String,labelMode:String,mask:String,maskChar:String,maskInvalidMessage:String,maskRules:{},maxLength:[Number,String],mode:String,name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,showClearButton:Boolean,showMaskMode:String,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useMaskedValue:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Number,String]}};_(Se);const Ce=C(Se);Ce.$_optionName="searchEditorOptions";Ce.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"}};const Yt={class:"informer"},Ut={class:"count"},qt={class:"grids mt-4"},Wt={class:"list-container"},j="/api/users",de="roleColorsV4",Jt=C({__name:"kullanicilar",setup(we){document.title="OFT - Kullanıcılar";const r=f([]),h=f([]),g=f(null),E=f(!1),d=f(null);f([]);const k=f([]),x=f([]),S=f([]),A=f(null),M=f(null),R=f(!0),U=f(0),N=f(!1),$=f(""),q=e=>{$.value=e,N.value=!0},W=()=>{N.value=!1,$.value=""},De=e=>{if(e.rowType==="group")return;const t=e.row.data;d.value=t;let n=[];(d.value.roles||"").split(",").forEach(u=>{n.push({name:u.trim()})}),k.value=n,P()},P=async()=>{if(d.value)try{q("İzinler yükleniyor...");const{data:e}=await D.get(`/api/users/${d.value.id}/permissions`);S.value=e.assigned,x.value=e.available}finally{W()}},Ee=async e=>{var t,n,o,u;try{const s=e.itemData;if(!d.value||!s)return;S.value.push(s),x.value=x.value.filter(i=>i.id!==s.id),S.value=[...S.value],x.value=[...x.value],(n=(t=M.value)==null?void 0:t.instance)==null||n.refresh(),(u=(o=A.value)==null?void 0:o.instance)==null||u.refresh(),D.post(`/api/users/${d.value.id}/permissions/${s.id}`)}catch(s){console.error("İzin atama işlemi başarısız oldu:",s)}},Be=async e=>{var n,o,u,s;const t=e.itemData;!d.value||!t||(x.value.push(t),S.value=S.value.filter(i=>i.id!==t.id),S.value=[...S.value],x.value=[...x.value],(o=(n=M.value)==null?void 0:n.instance)==null||o.refresh(),(s=(u=A.value)==null?void 0:u.instance)==null||s.refresh(),await D.delete(`/api/users/${d.value.id}/permissions/${t.id}`))},J=async()=>{E.value=!0,await y()},_e=async e=>{$e(e),await y()},Ie=async e=>{Pe(e),await y()},ke=async e=>{var n,o;const t=(n=g.value)==null?void 0:n.instance;U.value=((o=t==null?void 0:t.getDataSource())==null?void 0:o.totalCount())??0},Re={placeholder:"Sütun ara"},y=async()=>{try{q("Veri yükleniyor...");const e=await D.get(j);r.value=e.data.data,h.value=e.data.kademeler,re("Veri başarıyla alındı","success",1500)}catch(e){console.error("Error fetching data:",e),re("Kullanıcılar verisi alınamadı","error",1500)}finally{W()}},Fe=(e,t)=>{const n=(t.data.roles||"").split(",");e.className="d-flex gap-2",n.forEach(o=>{const u=o.trim(),s=Ne(u),i=document.createElement("span");i.textContent=s.label,i.style.display="inline-block",i.style.padding="2px 8px",i.style.borderRadius="8px",i.style.backgroundColor=s.bg,i.style.color=s.fg,i.style.fontSize="12px",e.appendChild(i)})},F=new Map,X=[10,28,45,60,80,100,120,140,160,180,200,220,240,260,280,300,320,340];function Te(){try{const e=localStorage.getItem(de);if(!e)return;const t=JSON.parse(e);Object.entries(t).forEach(([n,o])=>F.set(n,o))}catch{}}function Oe(){try{const e={};F.forEach((t,n)=>{e[n]=t}),localStorage.setItem(de,JSON.stringify(e))}catch{}}function Z(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function Ae(e,t,n){t/=100,n/=100;const o=(1-Math.abs(2*n-1))*t,u=o*(1-Math.abs(e/60%2-1)),s=n-o/2;let i=0,m=0,c=0;0<=e&&e<60?(i=o,m=u,c=0):60<=e&&e<120?(i=u,m=o,c=0):120<=e&&e<180?(i=0,m=o,c=u):180<=e&&e<240?(i=0,m=u,c=o):240<=e&&e<300?(i=u,m=0,c=o):(i=o,m=0,c=u);const w=Math.round((i+s)*255),T=Math.round((m+s)*255),z=Math.round((c+s)*255);return{r:w,g:T,b:z}}function Me(e,t,n){return(e*299+t*587+n*114)/1e3}function Ne(e){const t=e||"—",n=F.get(t);if(n)return{...n,label:e||t};const o=X[Z(t)%X.length],u=46,s=80,i=Z(t),m=i%11-5,c=Math.floor(i/7)%9-4,w=Q(u+m,40,56),T=Q(s+c,76,84),z=`hsl(${o}, ${w}%, ${T}%)`,{r:qe,g:We,b:Je}=Ae(o,w,T),Xe=Me(qe,We,Je)>=140?"#111":"#fff",ee={bg:z,fg:Xe};return F.set(t,ee),Oe(),{...ee,label:e||t}}Te();function Q(e,t,n){return Math.min(n,Math.max(t,e))}const $e=e=>{e.promise=new Promise(async(t,n)=>{try{const o={...e.oldData,...e.newData};await D.put(`${j}/${e.key}`,o),await y(),e.component.cancelEditData(),t()}catch(o){console.error("Error updating data:",o),n()}})},Pe=e=>{e.promise=new Promise(async(t,n)=>{try{await D.delete(`${j}/${e.key}`),await y(),e.component.cancelEditData(),t()}catch(o){console.error("Error deleting data:",o),n()}})};Qe(async()=>{await y();const e=async t=>{var s,i,m;const n=t.detail,o=(n==null?void 0:n.id)??((s=d.value)==null?void 0:s.id);if(!o)return;await y();const u=r.value.find(c=>c.id===o);if(u){d.value=u;const c=(u.roles||"").split(",");k.value=c.map(w=>({name:w.trim()})).filter(w=>w.name),await P(),(m=(i=g.value)==null?void 0:i.instance)==null||m.option("focusedRowKey",o)}};window.addEventListener("user-updated",e)}),et(E,(e,t)=>{!e&&t&&(async()=>{var o,u,s;await y();const n=(o=d.value)==null?void 0:o.id;if(n){const i=r.value.find(m=>m.id===n);if(i){d.value=i;const m=(i.roles||"").split(",");k.value=m.map(c=>({name:c.trim()})).filter(c=>c.name),await P(),(s=(u=g.value)==null?void 0:u.instance)==null||s.option("focusedRowKey",n)}}})()});function ze(e){d.value=e.row.data}const Ke=tt(()=>{const e=d.value||{};return{id:e.id||0,name:e.name||"",email:e.email||"",unvan:e.unvan||"",ismerkezi:e.ismerkezi_id||"",istasyon:e.istasyon_id||"",proses:e.proses||"",tip:e.tip||"",roles:e.roles||""}}),Ve=[{text:"Yenile"},{text:"Kullanıcı Ekle"},{text:"Kullanıcı Düzenle"},{text:"Aktif/Pasif Yap"},{text:"Şifreyi Sıfırla"}],Le=async e=>{try{const t=await D.put(`/api/sifresifirla/${e}`)}catch(t){console.error("Veri silinirken hata oluştu: ",t)}},Ge=()=>{R.value=!R.value};function He({itemData:e}){if(!(e!=null&&e.items))switch(e==null?void 0:e.text){case"Yenile":y();break;case"Kullanıcı Ekle":d.value=null,J();break;case"Kullanıcı Düzenle":J();break;case"Aktif/Pasif Yap":const t=O.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});t.fire({title:"Emin misiniz?",text:"İstersen sonra yine değiştirirsin :)",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(o=>{o.isConfirmed?(Ye(d.value.id,d.value.AKTIF),t.fire({confirmButtonColor:"#88efb3",title:"Durum değiştirildi!",text:"Yoksa pişman mı oldun :)",icon:"success"})):o.dismiss===O.DismissReason.cancel&&t.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})});break;case"Şifreyi Sıfırla":const n=O.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});n.fire({title:"Emin misiniz?",text:"Şifre sıfırlanacak!!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(o=>{o.isConfirmed?(Le(d.value.id),n.fire({confirmButtonColor:"#88efb3",title:"Şifre Sıfırlandı!",text:"pass1234",icon:"success"})):o.dismiss===O.DismissReason.cancel&&n.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})});break}}const je=nt("userData"),Ye=async(e,t)=>{try{const n=await D.put(`/api/users/durumdegistir/${e}`,{userID:je.value.id,aktif:parseInt(t)});await y()}catch(n){console.error("Durum değiştirilirken hata oluştu: ",n)}},Ue=e=>{const t=new Ft.Workbook,n=t.addWorksheet("Kullanicilar");Ct({component:e.component,worksheet:n,autoFilterEnabled:!0}).then(()=>{t.xlsx.writeBuffer().then(o=>{Tt(new Blob([o],{type:"application/octet-stream"}),"Kullanicilar.xlsx")})}),e.cancel=!0};return(e,t)=>(K(),at(it,null,[a(I,{class:"mt-0 pa-0 pt-0"},{default:p(()=>[a(Nt,{class:"pa-1 ma-2 mt-0"},{default:p(()=>[a(l(rt),{"data-source":Ve,width:200,target:"#gridusers",onItemClick:He}),a(l(L),{id:"gridusers","data-source":r.value,"key-expr":"id","show-borders":!0,ref_key:"dataGridRef",ref:g,onRowUpdating:_e,onRowRemoving:Ie,"focused-row-enabled":!0,"column-auto-width":!1,"row-alternation-enabled":!0,onExporting:Ue,"allow-column-reordering":!0,onContextMenuPreparing:ze,onFocusedRowChanged:De,"allow-column-resizing":!0,"column-resizing-mode":"widget",onContentReady:ke},{aktifTemplate:p(({data:n})=>[n.value==="0"||n.value===0||n.value===!1?(K(),ne(ae,{key:0,size:"20",icon:"tabler-x"})):(K(),ne(ae,{key:1,size:"20",icon:"tabler-check"}))]),totalRecordTemplate:p(()=>[v("div",Yt,[v("div",Ut,V(U.value),1),t[2]||(t[2]=v("span",null,"Toplam Kayıt",-1))])]),yenileTemplate:p(()=>[a(l(ue),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:p(()=>t[3]||(t[3]=[v("div",{style:{display:"flex","align-items":"center"}},[v("i",{class:"dx-icon dx-icon-refresh"}),v("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),collapseTemplate:p(()=>[a(l(ue),{icon:R.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:Ge},null,8,["icon"])]),default:p(()=>[a(l(b),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!0,width:70,"cell-template":"aktifTemplate"}),a(l(b),{"data-field":"id",caption:"ID","allow-editing":!1,visible:!0,width:"70"}),a(l(b),{"data-field":"name",caption:"İSİM","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}],width:"170"}),a(l(b),{"data-field":"unvan",caption:"ÜNVAN","validation-rules":[{type:"required"}],width:"150"}),a(l(b),{"data-field":"email",caption:"E-POSTA","allow-editing":!1,visible:!0,width:"150"}),a(l(b),{"data-field":"email_verified_at",caption:"ONAY TARİHİ","data-type":"date","allow-editing":!1,width:150,visible:!0,alignment:"center",format:{formatter:n=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(n)).replace(/\//g,".")}},null,8,["format"]),a(l(b),{"data-field":"roles",caption:"ROLLER","cell-template":Fe,width:"350"}),a(l(b),{"data-field":"proses",caption:"PROSES",width:"200"}),a(l(b),{"data-field":"tip",caption:"KADEME","validation-rules":[{type:"required"}],width:"150"}),a(l(b),{"data-field":"ismerkezi_id",caption:"İş Merkezi",width:"150"}),a(l(b),{"data-field":"istasyon_id",caption:"İş İstasyonu",width:"150"}),a(l(ut),{"auto-expand-all":R.value},null,8,["auto-expand-all"]),a(l(st),{visible:!0}),a(l(dt),{"allow-updating":!1,"allow-adding":!1,"allow-deleting":!1,mode:"row","use-icons":!0}),a(l(pt),{visible:!0}),a(l(ct),{visible:!0,width:240,placeholder:"Ara..."}),a(l(St),{enabled:!0}),a(l(G),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),a(l(mt),{enabled:!0,"allow-export-selected-data":!1}),a(l(gt),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:p(()=>[a(l(ft),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),a(l(ht),{enabled:!0,"editor-options":Re}),a(l(bt),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),a(l(vt),null,{default:p(()=>[a(l(B),{location:"before",name:"groupPanel"}),a(l(B),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),a(l(B),{location:"before",template:"totalRecordTemplate"}),a(l(B),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:t[0]||(t[0]=n=>y())}),a(l(B),{name:"exportButton"}),a(l(B),{name:"columnChooserButton"}),a(l(B),{name:"searchPanel"})]),_:1}),a(l(yt),null,{default:p(()=>[a(l(xt),{"align-by-column":!0,column:"id","summary-type":"count","display-format":"{0} adet",alignment:"right"})]),_:1})]),_:1},8,["data-source"])]),_:1})]),_:1}),v("div",qt,[v("div",Wt,[a(I,{class:"pa-2"},{default:p(()=>[a($t,null,{default:p(()=>t[4]||(t[4]=[lt("Atanmış Roller")])),_:1,__:[4]}),t[5]||(t[5]=v("hr",null,null,-1)),a(l(Gt),{"data-source":k.value},{item:p(({data:n})=>[v("div",null,[v("div",null,V(n.name),1)])]),_:1},8,["data-source"])]),_:1,__:[5]})]),a(I,{class:"perm-card"},{default:p(()=>[a(l(L),{class:"perm-grid","data-source":x.value,"show-borders":!0,"repaint-changes-only":!0,"key-expr":"id",height:"100%",ref_key:"availableGridRef",ref:A},{default:p(()=>[a(l(le),{enabled:!1}),a(l(G),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),a(l(oe),{group:"permissionsGroup","on-add":Be}),a(l(b),{"data-field":"name",caption:"Atanmamış İzinler"})]),_:1},8,["data-source"])]),_:1}),a(I,{class:"perm-card"},{default:p(()=>[a(l(L),{class:"perm-grid","data-source":S.value,"show-borders":!0,"repaint-changes-only":!0,"key-expr":"id",height:"100%",ref_key:"assignedGridRef",ref:M},{default:p(()=>[a(l(le),{enabled:!1}),a(l(G),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),a(l(oe),{group:"permissionsGroup","on-add":Ee}),a(l(b),{"data-field":"name",caption:"Atanmış İzinler"})]),_:1},8,["data-source"])]),_:1})]),a(Ot,{isDrawerOpen:E.value,"onUpdate:isDrawerOpen":t[1]||(t[1]=n=>E.value=n),userData:Ke.value},null,8,["isDrawerOpen","userData"]),a(Pt,{persistent:"",contained:"","model-value":N.value,class:"align-center justify-center"},{default:p(()=>[a(I,{class:"pa-4 d-flex align-center justify-center"},{default:p(()=>[a(ot,{indeterminate:"",color:"primary",class:"me-3"}),v("span",null,V($.value),1)]),_:1})]),_:1},8,["model-value"])],64))}}),ia=zt(Jt,[["__scopeId","data-v-f16d988c"]]);export{ia as default};
