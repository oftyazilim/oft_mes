import{r as q,e as W}from"./validators-BwBNGiur.js";import{d as ee,r as u,X as T,H as F,u as ae,j as te,b3 as oe,G as se,a as re,c as p,o as n,l as h,b as o,m as a,x as le,e as l,v as _,F as N,i as ie,I as ne,f as s,g as z,t as k,b0 as ue,aU as de,ae as me,eL as pe,b4 as D,aZ as ce}from"./main-CFQbhTG8.js";import{_ as fe}from"./AppTextField.vue_vue_type_script_setup_true_lang-CMm50LtV.js";import{u as P}from"./useGenerateImageVariant-C-P4pcik.js";import{a as ye,b as ge,c as be,d as ve}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as Ve,b as he}from"./misc-mask-light-Ha4lQOdV.js";import{V as _e}from"./VNodeRenderer-B2Iq3F0O.js";import{$ as ke}from"./api-DIxsFKnP.js";import{V as C}from"./VCol-aD6opYSB.js";import{V as we}from"./VImg-Ck3LfQkl.js";import{V as Le}from"./VCard-BFxhtjUT.js";import{V as U}from"./VCardText-SNH7Fwps.js";import{V as j}from"./VAlert-axPdjkwp.js";import{V as xe}from"./VForm-DQ6PVDID.js";import{V as $}from"./VRow-SM-jgvPl.js";import{V as Ce}from"./VCheckbox-BCxPMBCL.js";import"./helpers-BGv4x_9E.js";import"./focus-Du-ltaOn.js";import"./VTextField-Dez1kttF.js";/* empty css                   */import"./VCounter-DaLev4bu.js";import"./VField-CZnkqrtt.js";import"./easing-Bybner-F.js";import"./VInput-BM4yp3pR.js";import"./form-Dtrh3iFL.js";import"./forwardRefs-C-GTDzx5.js";import"./index-BwkzG0zY.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-BixcgV9I.js";import"./VCheckboxBtn-Cr3Ocx4p.js";import"./VSelectionControl-BOVrY5Yf.js";const Ie={class:"intro-content"},Re={class:"intro-title-wrapper"},Te={key:0,class:"intro-title"},ze=["aria-label"],De={key:0,class:"intro-sub"},Se={class:"auth-logo d-flex align-center gap-x-3"},Be={class:"auth-title"},Ee={class:"position-relative bg-background w-100 me-0"},Ge={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},Me=["src"],Ae={class:"text-h4 mb-1"},qe={class:"text-capitalize"},Fe={class:"d-flex align-center flex-wrap justify-space-between my-6"},O="loginIntroShownV1",Va=ee({__name:"login",setup(Ne){const H=P(ve,be,ge,ye,!0),K=P(he,Ve),w=u(!1),g=T(()=>{var t,e;return((e=(t=F)==null?void 0:t.app)==null?void 0:e.title)??"oft mes"}),S=T(()=>{var t,e;return((e=(t=F)==null?void 0:t.app)==null?void 0:e.logo)??null}),B=ae(),Y=te(),X=oe(),L=u({email:void 0,password:void 0}),E=u(),m=u({email:"",password:""}),x=u(!1),b=u(!1),c=u(null),Z=async()=>{b.value=!0,c.value=null,L.value={email:void 0,password:void 0};try{const t=await ke("/auth/login",{method:"POST",body:{email:m.value.email,password:m.value.password},onResponseError({response:y}){var M,A;console.error("Login error:",y._data);const R=((M=y._data)==null?void 0:M.errors)||null;L.value=R||{email:"Giri≈ü ba≈üarƒ±sƒ±z",password:"Giri≈ü ba≈üarƒ±sƒ±z"},c.value=((A=y._data)==null?void 0:A.message)||(typeof y._data=="string"?y._data:null)||"Giri≈ü i≈ülemi ba≈üarƒ±sƒ±z oldu. L√ºtfen bilgilerinizi kontrol edin."}}),{accessToken:e,userData:f,userAbilityRules:d}=t,r=pe(d),i=x.value?{maxAge:3600*24*30}:{session:!0};D("userAbilityRules",i).value=d,X.update(r);const Q=D("userData",i);Q.value=f,D("accessToken",i).value=e,await ce(()=>{const R=m.value.password==="pass1234"?"/force-password":B.query.to?String(B.query.to):"/home-page";Y.push(R)})}catch(t){console.error(t),c.value||(c.value="Beklenmeyen bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}finally{b.value=!1}},J=()=>{var t;(t=E.value)==null||t.validate().then(({valid:e})=>{e&&Z()})},v=u(!1),V=u(!1),G=T(()=>(g.value||"").split(""));function I(){v.value=!1;try{localStorage.setItem(O,"1")}catch{}}return se(()=>{var r;try{V.value=(r=window.matchMedia("(prefers-reduced-motion: reduce)"))==null?void 0:r.matches}catch{}if((()=>{try{return localStorage.getItem(O)==="1"}catch{return!1}})()||V.value){v.value=!1;return}v.value=!0;const e=1800+G.value.length*35,f=Math.min(3500,e);setTimeout(()=>{v.value&&I()},f);const d=i=>{i.key==="Escape"&&(I(),window.removeEventListener("keydown",d))};window.addEventListener("keydown",d)}),(t,e)=>{const f=re("RouterLink"),d=fe;return n(),p(N,null,[a(v)?(n(),p("div",{key:0,class:le(["login-intro",{"reduced-motion":a(V)}]),"aria-live":"polite"},[e[4]||(e[4]=l("div",{class:"intro-bg"},null,-1)),e[5]||(e[5]=l("div",{class:"intro-noise"},null,-1)),l("div",Ie,[l("div",Re,[a(V)?(n(),p("h1",Te,_(a(g)),1)):(n(),p("h1",{key:1,class:"intro-title-chars","aria-label":a(g)},[(n(!0),p(N,null,ie(a(G),(r,i)=>(n(),p("span",{key:i,class:"char",style:ne({animationDelay:i*35+"ms"})},_(r===" "?"¬†":r),5))),128))],8,ze))]),a(V)?h("",!0):(n(),p("p",De,"√úretimde yeni bir g√ºn ba≈ülƒ±yor...")),l("button",{type:"button",class:"intro-skip",onClick:I,"aria-label":"Animasyonu Ge√ß"},"Ge√ß")])],2)):h("",!0),o(f,{to:"/"},{default:s(()=>[l("div",Se,[a(S)?(n(),z(a(_e),{key:0,nodes:a(S)},null,8,["nodes"])):h("",!0),l("h1",Be,_(a(g)),1)])]),_:1}),o($,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[o(C,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[l("div",Ee,[l("div",Ge,[o(we,{"max-width":"613",src:a(H),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),l("img",{class:"auth-footer-mask",src:a(K),alt:"auth-footer-mask",height:"280",width:"100"},null,8,Me)])]),_:1}),o(C,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[o(Le,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[o(U,null,{default:s(()=>[l("h4",Ae,[l("span",qe,_(a(g))+"'e ho≈ügeldiniz' ",1),e[6]||(e[6]=k("! üëãüèª "))]),e[7]||(e[7]=l("p",{class:"mb-0"}," L√ºtfen hesabƒ±nƒ±za giri≈ü yapƒ±n ve maceraya ba≈ülayƒ±n... ",-1))]),_:1,__:[7]}),o(U,null,{default:s(()=>[a(b)?(n(),z(j,{key:0,type:"info",class:"mb-4"},{default:s(()=>e[8]||(e[8]=[k(" Giri≈ü yapƒ±lƒ±yor, l√ºtfen bekleyin... ")])),_:1,__:[8]})):h("",!0),a(c)?(n(),z(j,{key:1,type:"error",class:"mb-4"},{default:s(()=>[k(_(a(c)),1)]),_:1})):h("",!0),o(a(xe),{ref_key:"refVForm",ref:E,onSubmit:ue(J,["prevent"])},{default:s(()=>[o($,null,{default:s(()=>[o(C,{cols:"12"},{default:s(()=>[o(d,{modelValue:a(m).email,"onUpdate:modelValue":e[0]||(e[0]=r=>a(m).email=r),label:"E-posta",placeholder:"oft@oft.com",type:"email",autofocus:"",rules:["requiredValidator"in t?t.requiredValidator:a(q),"emailValidator"in t?t.emailValidator:a(W)],"error-messages":a(L).email},null,8,["modelValue","rules","error-messages"])]),_:1}),o(C,{cols:"12"},{default:s(()=>[o(d,{modelValue:a(m).password,"onUpdate:modelValue":e[1]||(e[1]=r=>a(m).password=r),label:"≈ûifre",placeholder:"¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑",rules:["requiredValidator"in t?t.requiredValidator:a(q)],type:a(w)?"text":"password",autocomplete:"password","error-messages":a(L).password,"append-inner-icon":a(w)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=r=>w.value=!a(w))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),l("div",Fe,[o(Ce,{modelValue:a(x),"onUpdate:modelValue":e[3]||(e[3]=r=>de(x)?x.value=r:null),label:"Beni Hatƒ±rla"},null,8,["modelValue"]),o(f,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>e[9]||(e[9]=[k(" ≈ûifremi Unuttum? ")])),_:1,__:[9]})]),o(me,{block:"",type:"submit",loading:a(b),disabled:a(b)},{default:s(()=>e[10]||(e[10]=[k(" Giri≈ü Yap ")])),_:1,__:[10]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Va as default};
