import{d as pl,r as u,q as vl,w as B,i as fl,s as _,c as h,b as e,f as i,l as o,F as me,T as k,aF as c,az as I,e as p,m as kl,g as De,p as V,cU as yl,aM as gl,ay as Ie,aA as hl,aK as pe,o as y,x as bl}from"./main-VlSo3El1.js";import{s as ve,D as s,d as fe,l as ke,e as Le,g as fa,h as wl,i as xl,j as _l,k as Tl,q as ka,t as ya}from"./data-grid-MJmDjKsT.js";import{D as Sl}from"./load-panel-_yxSKFIj.js";import{D as Q,a as Ge}from"./popup-DsZ0GXkc.js";import{D as $}from"./select-box-PepOlAwL.js";import{d as Cl}from"./m_resize_observer-DxT8-gYe.js";import{n as w}from"./notify--TuBmHI-.js";import{S as ga}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{_ as Kl}from"./HataBildirimiDialog.vue_vue_type_script_setup_true_lang-BMJFH3hq.js";import{V as x}from"./VRow-CWaEDPph.js";import{V as m}from"./VCol-C7T6nfoU.js";import{V as Ee}from"./VDialog-BIP7UMKA.js";import{V as Vl}from"./VAlert-DCK9qWUD.js";import{V as H,c as ye,a as N,b as ha}from"./VCard-D9QVIF3G.js";import{V as R}from"./VCardText-BAQZTSyv.js";import{V as D}from"./VTextField-abajf6wx.js";import{V as ba}from"./VCheckbox-DvPw0dTS.js";import{V as P}from"./VTextarea-BsyR7MrL.js";import{V as Hl}from"./VCombobox-B2TQ87Dx.js";import{V as Dl}from"./VContainer-fNqi52R_.js";import{V as Il}from"./VFileInput-DzRXk24W.js";import{V as ze}from"./VImg-CWNJpt4d.js";import{V as je}from"./VSpacer-C6_-5nDa.js";import"./index-hZ3mERNG.js";import"./dom_component-B-IEYTKO.js";import"./m_row_dragging-CwiDKij2.js";import"./m_select_box-MlkQI6r6.js";import"./themes-CuAcvoA6.js";import"./editor-rTySL0mL.js";import"./overlay-DYSuq8VD.js";import"./format_helper-agWhk6D-.js";import"./VSelect-DTSt7N8t.js";import"./form-61fYZlQj.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-D-uGHjUH.js";import"./ssrBoot-BllCiPE_.js";import"./index-DBNR50UL.js";import"./createSimpleFunctional-BuLWXa3K.js";import"./VAvatar-CYb7FX2U.js";import"./VDivider-CT-WKhrT.js";import"./dialog-transition-BYLU403p.js";import"./easing-Bybner-F.js";import"./VMenu-EzNUYxPT.js";import"./VOverlay-1o4Dqays.js";import"./delay-BEQXg-l7.js";import"./lazy-BAafN88u.js";import"./scopeId-DxdAUEzX.js";import"./VCheckboxBtn-BQDn4CHW.js";import"./VSelectionControl-C4kMjqyI.js";import"./VChip-pecgOyKM.js";import"./VSlideGroup-BvrVj4M-.js";/* empty css              *//* empty css                   */import"./VCounter-BvBWmAhM.js";import"./VField-CmXeDYFl.js";import"./VInput-4KzVjqVe.js";import"./filter-BGkAgMLC.js";const El={key:0},zl={key:1},Al={key:2},Bl={key:3,class:I(["dx-icon","dx-icon-isblank"]),style:{fontSize:"16px",color:"yellow"}},Nl={class:"pa-2 d-flex justify-center gap-8"},Rl={key:0,class:I(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"green"}},Ml={key:1,class:I(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"gold"}},Ul={key:2,class:I(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"red"}},Ol={key:3,class:I(["dx-icon","dx-icon-isblank"]),style:{fontSize:"20px",color:"yellow"}},Fl={key:0,class:I(["dx-icon",""]),style:{fontSize:"16px",color:"green"}},$l={key:1,class:I(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"orange"}},Pl=["onClick"],Ll={class:"text-center"},Gl={key:0,class:I(["dx-icon","dx-icon-check"]),style:{fontSize:"20px",color:"green"}},jl={key:1},Yl={class:"text-center"},ql={style:{"font-size":"20px"}},Wl={class:"d-flex align-center gap-4",style:{flex:"1"}},Xl={class:"d-flex justify-space-between"},Zl={class:"pa-2 d-flex justify-center gap-2"},Jl=pl({__name:"uretim-kontrol",setup(Ql){const Ye=u(),L=u(!1),G=u(!1),ee=u(!1),E=vl("userData"),Ae=u(!1),qe=u([]),ge=u([]),wa=u(0),he=u(null),z=u(0),j=u([]),xa=u(null),Y=u(null),q=u(null),be=u(0),g=u(""),We=u(0),_a=u(!1),W=u(!1),b=u(""),ae=u("");u("");const le=u(""),X=u(!1),te=u({}),we=u(),xe=u([]),Be=u(!1),Ne=u(0),Re=u(0),Xe=u(),_e=u(!1),Ze=u(""),Ta=u(null),C=u([]);let Je=1;const A=u([]),oe=u(!1),ie=u(1),Te=u("..."),Me=u("..."),K=u([]),M=u([]),ne=u(""),se=u(!1),Qe=u(""),re=u(!1),Sa=u(null),U=u([]),Ue=u(0),Oe=u(""),ea=u([]),Se=[{title:"✔️ Onaylandı",value:"Onaylandı",color:"#d4edda"},{title:"❌ Red",value:"Red",color:"#f8d7da"},{title:"⚠️ Şartlı Onay",value:"Şartlı Onay",color:"#fff3cd"}],Z=new Cl({data:Se,key:"value"}),Ca=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),Ce={width:100,type:"success",text:"Tamam",stylingMode:"contained"},Fe={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{L.value=!1,G.value=!1,W.value=!1}},r=u({istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:0,personelID:0,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0}),n=u({masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""}),$e=async()=>{if(z.value===0){w({message:"Lütfen bir iş emri seçiniz.",type:"error",displayTime:3e3});return}j.value=[],xe.value=[];try{const t=await _.get("/api/isEmri",{params:{deger:z.value}});r.value.isEmriId=t.data.data[0].isemri_id,r.value.istasyonID=t.data.data[0].IS_ISTASYONU_ID,r.value.personelID=E.value.id,r.value.istasyon=t.data.data[0].IS_ISTASYONU,r.value.isEmriNo=t.data.data[0].isemri_no,r.value.urunAdi=t.data.data[0].stok_adi,r.value.urunKodu=t.data.data[0].stok_kodu,r.value.musteri=t.data.data[0].cari_ad,r.value.siparisNo=t.data.data[0].siparis_belge_no,r.value.isEmriMiktari=t.data.data[0].isemri_miktari,r.value.planTarih=t.data.data[0].plan_tarih_araligi,r.value.aksesuar=t.data.data[0].aksesuar==="Aksesuarlı",We.value=t.data.data[0].isemri_miktari,O(),aa("aktif")}catch(t){console.error("Master verileri alınırken hata oluştu:",t)}n.value.isEmriId=r.value.isEmriId,n.value.istasyonID=r.value.istasyonID,n.value.personelID=r.value.personelID,L.value=!1,K.value=Array.from({length:r.value.isEmriMiktari},(t,a)=>{const l=a+1,d=`${r.value.isEmriNo}-${String(l).padStart(5,"0")}`;return{id:l,serino:d}})};B(L,(t,a)=>{a===!1&&t===!0&&Ka()}),B(G,(t,a)=>{a===!1&&t===!0&&(ge.value=[],Va(),Ia()),a===!0&&t===!1&&(Me.value="...",Te.value="...")}),B(_a,(t,a)=>{a===!0&&t===!1&&O()}),B(se,(t,a)=>{a===!0&&t===!1&&ua()}),B(W,(t,a)=>{a===!1&&t===!0&&(X.value=!1,oa()),a===!0&&t===!1&&(ta(),O())}),B(re,(t,a)=>{a===!0&&t===!1&&(U.value=[""])}),B(Ta,t=>{if(t){const a=new FileReader;a.onload=()=>{typeof a.result=="string"&&C.value.push({id:Je++,url:a.result,file:t})},a.readAsDataURL(t)}}),B([g,We],([t,a])=>{if(!t||!a)return;const l=[];for(let d=1;d<=Number(a);d++){const v=`${t}-${String(d).padStart(5,"0")}`;l.push({id:d,serino:v})}K.value=l});const Ka=async()=>{try{const t=await _.get("/api/aktiflerial",{params:{istasyonId:E.value.istasyon_id}});qe.value=t.data}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Ae.value=!1}},O=async()=>{if(!r.value.isEmriId||!r.value.istasyonID){console.warn("İş Emri veya İstasyon ID eksik");return}try{const t=await _.get("/api/kontrolleri-al",{params:{istasyon:r.value.istasyonID,isEmriId:r.value.isEmriId,isEmriNo:r.value.isEmriNo}}),a=t.data.kontroller;if(xe.value=t.data.revizyonlar||[],j.value=t.data.kontrollerd||[],!a){console.warn("Kontrol kaydı bulunamadı"),n.value={masterId:0,isEmriId:r.value.isEmriId,istasyonID:r.value.istasyonID,personelID:r.value.personelID,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""};return}n.value.masterId=a.id,n.value.urunAgaciText=a.urun_agaci_not,n.value.urunAgaciCheck=a.urun_agaci_ok,n.value.gorunumText=a.gorunum_not,n.value.gorunumCheck=a.gorunum_ok,n.value.olcuselText=a.olcusel_not,n.value.olcuselCheck=a.olcusel_ok,n.value.paketlemeText=a.paketleme_not,n.value.paketlemeCheck=a.paketleme_ok,n.value.etiketText=a.etiket_not,n.value.etiketCheck=a.etiket_ok,n.value.dokumanText=a.dokuman_not,n.value.dokumanCheck=a.dokuman_ok,ia()}catch(t){console.error("Kayıt çekilirken hata oluştu:",t)}},Va=async()=>{try{const t=await _.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:0,isemri_id:z.value}});console.log("Malzemeler alındı:",t.data.malzemeler),ge.value=t.data.malzemeler,Re.value=t.data.toplamMalzeme,console.log("Malzemeler alındı:",ge.value)}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}},Ha=async()=>{if(n.value.urunAgaciText===""&&n.value.gorunumText===""&&n.value.olcuselText===""&&n.value.paketlemeText===""&&n.value.etiketText===""&&n.value.dokumanText===""&&n.value.gorunumCheck===""&&n.value.olcuselCheck===""&&n.value.paketlemeCheck===""&&n.value.etiketCheck===""&&n.value.dokumanCheck===""&&n.value.urunAgaciCheck===""){w({message:"Lütfen en az bir kontrol alanını doldurun.",type:"error",displayTime:2e3});return}try{const a=(await _.post("/api/kontrol-kaydet",{...n.value,user_id:E.value.id})).data.mID;n.value.masterId=a,w({message:"Kayıt başarılı...",type:"success",displayTime:2e3}),O()}catch(t){console.error(t),alert("Hata oluştu.")}},Da=async()=>{var t;if(!ee.value)try{ee.value=!0;const a=(t=Y.value)!=null&&t.instance?Y.value.instance.getSelectedRowKeys():[];await _.post("/api/urun-agaci-secim/kaydet",{urunKodu:r.value.urunKodu,selected_ids:a,userId:E.value.id}),w({message:"Ürün ağacı seçimleri kaydedildi.",type:"success",displayTime:1500}),G.value=!1}catch(a){console.error("AgacKaydet hata",a),w({message:"Kayıt başarısız. Lütfen tekrar deneyin.",type:"error",displayTime:2e3})}finally{ee.value=!1}},Ia=async()=>{console.log(r.value.urunKodu);const t=await _.get("/api/urun-agaci-secim/yukle",{params:{urunKodu:r.value.urunKodu}}),a=t.data.selected_ids,l=t.data.data||{};if(l.created_at){const d=new Date(l.created_at),v=String(d.getDate()).padStart(2,"0"),T=String(d.getMonth()+1).padStart(2,"0"),F=d.getFullYear(),J=String(d.getHours()).padStart(2,"0"),S=String(d.getMinutes()).padStart(2,"0");Te.value=`${v}.${T}.${F} ${J}:${S}`}else Te.value="...";Me.value=l.personel_adi||"...",Y.value&&Y.value.instance&&Y.value.instance.selectRows(a,!0)},Ea=async()=>{var a,l,d;const t=await _.get("/api/kontrolAktifAl",{params:{userID:E.value.id}});z.value=((a=t.data.aktif)==null?void 0:a.isemri_id)??0,g.value=((l=t.data.aktif)==null?void 0:l.isemri_no)??"",be.value=((d=t.data.aktif)==null?void 0:d.isemri_id)??0,$e()},aa=async t=>{await _.post("/api/kontrolAktifKaydet",{durum:t||"aktif",isEmriID:r.value.isEmriId,istasyonID:r.value.istasyonID,userId:E.value.id})},za=async()=>{if(!ne.value||M.value.length===0){w({message:"Lütfen açıklama giriniz ve en az bir seri no seçiniz.",type:"error",displayTime:2e3});return}const t=M.value.map(l=>({serino:l.serino,sonuc:"Kontrol Edilmedi",aciklama:ne.value,urun_kontrol_m_id:n.value.masterId,isemri_no:g.value,user_id:E.value.id}));await _.post("/api/kontroller/toplu-kaydet",t);const a=new Set(M.value.map(l=>l.serino));K.value=K.value.filter(l=>!a.has(l.serino)),M.value=[],ne.value="",O()},Aa=t=>{var a,l,d,v;Ue.value=((l=(a=t.row)==null?void 0:a.data)==null?void 0:l.id)||0,Oe.value=((v=(d=t.row)==null?void 0:d.data)==null?void 0:v.seri_no)||""},Ba=t=>{t.selectedRowsData.length>0?(z.value=t.selectedRowsData[0].isemri_id,be.value=t.selectedRowsData[0].id,g.value=t.selectedRowsData[0].isemri_no):z.value=0};fl(async()=>{document.title="OFT - Kalite Kontrol",Ea();const[t]=await Promise.all([_.get("/api/gerekceler")]);ea.value=t.data});const Na=t=>{$e()};function Ra(t){Ne.value=t.selectedRowKeys.length,Be.value=Ne.value===Re.value,n.value.urunAgaciCheck=Be.value?"Onaylandı":"Red"}const Ma=t=>{M.value=t.selectedRowsData},la=()=>{var t,a,l;(l=(a=(t=Xe.value)==null?void 0:t.$el)==null?void 0:a.querySelector("input[type=file]"))==null||l.click()},Ua=[{baslik:"İş Emri Hataları",hatalar:[{kod:"IEH",aciklama:"İş Emri Hatası"},{kod:"SPH",aciklama:"Sipariş Hatası"},{kod:"TH",aciklama:"Taşeron Hatası"},{kod:"EH",aciklama:"Etiket Hatası"}]},{baslik:"Malzeme Hataları",hatalar:[{kod:"CM",aciklama:"Çapaklı Malzeme"},{kod:"SMH",aciklama:"Saç Malzeme Hatası"},{kod:"KH",aciklama:"Kilit Hatası"},{kod:"FB",aciklama:"Formda Bozukluk"},{kod:"CC",aciklama:"Camda Çizik"},{kod:"OH",aciklama:"Ölçüsel Hata"},{kod:"19''H",aciklama:"19'' Ölçü Hatası"},{kod:"AH",aciklama:"Aksesuar Hatası"},{kod:"KPL",aciklama:"Kaplama Hatası"}]},{baslik:"Montaj Hataları",hatalar:[{kod:"MH",aciklama:"Montaj Hatası"},{kod:"TKH",aciklama:"Topraklama Hatası"},{kod:"KAH",aciklama:"Kaynak Hatası"},{kod:"BKE",aciklama:"Bağlantı Kalemi Eksik"},{kod:"BKS",aciklama:"Bağlantı Kalemi Sıkılmamış"},{kod:"ELK",aciklama:"Elektrik Hatası"},{kod:"STH",aciklama:"Su Testi Hatası"}]},{baslik:"Yüzey / Boya Hataları",hatalar:[{kod:"BC",aciklama:"Boyada Çizik"},{kod:"BH",aciklama:"Boya Hatası"},{kod:"SH",aciklama:"Serigrafi Hatası"}]}],f=(t,a)=>{const l=document.createElement("span");l.textContent=a.column.caption;const d=a.column.tooltip||a.column.caption;l.setAttribute("title",d),t.appendChild(l)},Oa=()=>{pe(()=>{const t=document.querySelector('input[type="checkbox"]');t==null||t.focus()})},ta=()=>{b.value="",ae.value="",le.value="",te.value={},C.value=[],A.value=[]},Fa=()=>{z.value=0,g.value="",be.value=0,r.value={istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:r.value.istasyonID,personelID:r.value.personelID,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0},n.value={masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""},j.value=[],xe.value=[],K.value=[]},oa=()=>{pe(()=>{var t;(t=we.value)==null||t.focus()})},$a=async()=>{if(X.value){w({message:"Kayıt işlemi devam ediyor...",type:"warning",displayTime:1500});return}X.value=!0;const t=[];for(const l of C.value)if(l.file)try{const{base64:d,extension:v}=await Ga(l.file,{maxWidth:1600,maxHeight:1600,quality:.8,targetKB:700,mimeType:"image/jpeg"});t.push({base64:d,extension:v})}catch(d){console.error("Görsel sıkıştırma hatası:",d)}const a={urun_kontrol_m_id:n.value.masterId,isemri_no:g.value,serino:b.value,hatalar:Object.keys(te.value).filter(l=>te.value[l]),sonuc:ae.value,resimler:t,hataOzet:le.value,user_id:E.value.id,isPhoto:C.value.length>0?1:0};try{(await _.post("/api/hata-kaydet",a)).data.success?(w({message:"Kayıt başarılı!",type:"success",displayTime:2e3}),oe.value=!0):alert("Kayıt başarısız!")}catch(l){console.error("Hata:",l),alert("Kayıt sırasında bir hata oluştu.")}finally{X.value=!1}},Pa=async()=>{var a;oe.value=!1;try{await O()}catch{}try{ia()}catch{}C.value=[],A.value=[],le.value="";const t=(a=K.value[0])==null?void 0:a.serino;if(t)b.value=t;else{W.value=!1;return}pe(()=>{var l;return(l=we.value)==null?void 0:l.focus()})},La=()=>{oe.value=!1,W.value=!1};async function Ga(t,a){const{maxWidth:l=1600,maxHeight:d=1600,quality:v=.8,mimeType:T="image/jpeg",targetKB:F=700}=a||{},J=await Ya(t),S=await qa(J),{width:Ve,height:ca}=ja(S.naturalWidth,S.naturalHeight,l,d),ce=document.createElement("canvas"),dl=ce.getContext("2d");ce.width=Ve,ce.height=ca,dl.drawImage(S,0,0,Ve,ca);let He=v,Pe=ce.toDataURL(T,He);const cl=F*1024;let ma=0;const ml=pa=>{var va;return Math.floor((pa.length-(((va=pa.split(",")[0])==null?void 0:va.length)||0)-1)*3/4)};for(;ml(Pe)>cl&&He>.4&&ma<4;)He-=.1,Pe=ce.toDataURL(T,He),ma++;return{base64:Pe.replace(/^data:image\/\w+;base64,/,""),extension:"jpg"}}function ja(t,a,l,d){const v=Math.min(l/t,d/a,1);return{width:Math.round(t*v),height:Math.round(a*v)}}function Ya(t){return new Promise((a,l)=>{const d=new FileReader;d.onload=()=>a(String(d.result)),d.onerror=l,d.readAsDataURL(t)})}function qa(t){return new Promise((a,l)=>{const d=new Image;d.onload=()=>a(d),d.onerror=l,d.src=t})}const Wa=t=>{C.value=C.value.filter(a=>a.id!==t)},Xa=t=>{Ze.value=t,_e.value=!0},Za=()=>{if(!(!A.value||A.value.length===0)){for(const t of A.value){const a=new FileReader;a.onload=l=>{var v;typeof((v=l.target)==null?void 0:v.result)=="string"&&C.value.push({id:Je++,url:URL.createObjectURL(t),file:t})},a.readAsDataURL(t)}A.value=[]}},ia=()=>{const t=new Set(j.value.map(l=>l.seri_no)),a=K.value.filter(l=>!t.has(l.serino));K.value=a},Ja=()=>{b.value||pe(()=>{we.value.focus()})},Qa=()=>{if(b.value.length===18)return;const t=b.value.replace(/\D/g,"");if(parseInt(t)>0&&parseInt(t)<=r.value.isEmriMiktari){const a=t.padStart(5,"0");b.value=`${g.value}-${a}`}else b.value="",w({message:"Seri no formatı hatalı. Lütfen 5 haneyi geçmeyen ve sipariş miktarından büyük olmayan bir seri no giriniz.",type:"error",displayTime:5e3})},el=()=>{if(z.value===0){w({message:"Seçili iş emri yok.",type:"error",displayTime:3e3});return}ga.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0}).fire({title:"Emin misiniz?",text:"Kontrol sonlandırılacak!!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, sonlandıralım!",cancelButtonText:"Hayır, vazcgeçtim!"}).then(async a=>{a.isConfirmed?(await pe(),ta(),aa("pasif"),Fa()):(a.dismiss,ga.DismissReason.cancel)})},na=t=>{const a=(t==null?void 0:t.seri_no)||Oe.value;if(!a){w({message:"Seri no bulunamadı.",type:"error",displayTime:2e3});return}console.log("Fotoğraflar için seri no:",a),Oe.value=a,re.value=!0,_.get("/api/hata-goster-resim",{params:{isEmriNo:r.value.isEmriNo,serino:a}}).then(l=>{U.value=Array.isArray(l.data)?l.data.map(d=>d.url):[],U.value.length===0&&w({message:"Fotoğraf bulunamadı.",type:"warning",displayTime:2e3})}).catch(()=>{U.value=[],w({message:"Fotoğraflar alınamadı.",type:"error",displayTime:2e3})})},al=async()=>{if(Ue.value===0){w({message:"Lütfen bir kontrol seçiniz.",type:"error",displayTime:3e3});return}if(window.confirm("Bu kaydı silmek istediğinize emin misiniz?"))try{const a=Ue.value||0,l=await _.delete(`/api/kontrol-sil/${a}`);O()}catch(a){alert("Silme işlemi başarısız."),console.error(a)}},ll=async t=>{var l,d,v;if(confirm("Bu fotoğrafı silmek istediğinizden emin misiniz?"))try{const T=await _.delete("/api/hata-sil-resim",{params:{url:t,isEmriNo:r.value.isEmriNo}});U.value=U.value.filter(S=>S!==t);const F=(l=T.data)==null?void 0:l.remaining,J=(d=T.data)==null?void 0:d.seri_no;if(F===0&&J){const S=j.value.find(Ve=>Ve.seri_no.startsWith(J));S&&(S.is_photo=0,(v=q==null?void 0:q.value)!=null&&v.instance&&q.value.instance.refresh())}}catch(T){console.error("Silme hatası:",T),alert("Silinirken hata oluştu.")}},tl=t=>{Qe.value=t,se.value=!0},sa=()=>ie.value+=.1,ra=()=>ie.value=Math.max(.2,ie.value-.1),ua=()=>{ie.value=1,de.value={x:0,y:0}},ue=u(!1),Ke=u({x:0,y:0}),de=u({x:0,y:0}),ol=t=>{ue.value=!0,Ke.value={x:t.clientX,y:t.clientY}},il=t=>{if(!ue.value)return;const a=t.clientX-Ke.value.x,l=t.clientY-Ke.value.y;de.value.x+=a,de.value.y+=l,Ke.value={x:t.clientX,y:t.clientY}},da=()=>{ue.value=!1},nl=t=>{t.preventDefault(),t.deltaY<0?sa():ra()},sl=()=>{window.open("/api/pdf-goster","_blank")},rl=t=>{const a=document.createElement("div"),l=document.createElement("i");l.className="dx-icon dx-icon-image",l.style.fontSize="16px",l.style.color="green",a.appendChild(l),t.appendChild(a)},ul=()=>{w({message:r.value.isEmriNo,type:"error",displayTime:3e3}),w({message:r.value.urunKodu,type:"error",displayTime:3e3}),Ye.value.acDialog({isEmriNo:r.value.isEmriNo,urunKodu:r.value.urunKodu,urunAdi:r.value.urunAdi})};return(t,a)=>(y(),h(me,null,[e(x,{class:"match-height pa-0"},{default:i(()=>[e(m,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(k),{variant:"outlined",class:"text-center mb-2",block:"",onClick:a[0]||(a[0]=l=>L.value=!0)},{default:i(()=>a[42]||(a[42]=[c(" İş Emri Seç ")])),_:1,__:[42]})]),_:1}),e(m,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(k),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:sl},{default:i(()=>a[43]||(a[43]=[c(" Teknik Resim ")])),_:1,__:[43]},8,["disabled"])]),_:1}),e(m,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(k),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:el},{default:i(()=>a[44]||(a[44]=[c(" Kontrol Sonu ")])),_:1,__:[44]},8,["disabled"])]),_:1}),e(m,{cols:"6",md:"3",class:"pa-2"},{default:i(()=>[e(o(k),{variant:"outlined",disabled:g.value.length===0,class:"text-center mb-2",block:"",onClick:ul},{default:i(()=>a[45]||(a[45]=[c(" Mail Gönder ")])),_:1,__:[45]},8,["disabled"])]),_:1})]),_:1}),e(x,{class:"match-height mt-0 gap-0"},{default:i(()=>[e(m,{md:"4",cols:"12"},{default:i(()=>[e(H,null,{default:i(()=>[e(ye,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(N,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[46]||(a[46]=[c("Genel Bilgiler")])),_:1,__:[46]})]),_:1}),e(R,{class:"gap-2 pa-2"},{default:i(()=>[e(D,{modelValue:r.value.istasyon,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.istasyon=l),class:"mt-5",label:"İstasyon",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{modelValue:r.value.siparisNo,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.siparisNo=l),class:"mt-4",label:"Sipariş No",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{value:Ca(r.value.isEmriMiktari),modelValue:r.value.isEmriMiktari,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value.isEmriMiktari=l),class:"mt-4",label:"İş Emri Miktarı",variant:"outlined",readonly:""},null,8,["value","modelValue"]),e(D,{modelValue:r.value.isEmriNo,"onUpdate:modelValue":a[4]||(a[4]=l=>r.value.isEmriNo=l),class:"mt-4",label:"İşemri No",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{modelValue:r.value.urunKodu,"onUpdate:modelValue":a[5]||(a[5]=l=>r.value.urunKodu=l),class:"mt-4",label:"Ürün Kodu",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{modelValue:r.value.urunAdi,"onUpdate:modelValue":a[6]||(a[6]=l=>r.value.urunAdi=l),class:"mt-4",label:"Ürün Adı",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{modelValue:r.value.musteri,"onUpdate:modelValue":a[7]||(a[7]=l=>r.value.musteri=l),class:"mt-4",label:"Müşteri",variant:"outlined",readonly:""},null,8,["modelValue"]),e(D,{modelValue:r.value.planTarih,"onUpdate:modelValue":a[8]||(a[8]=l=>r.value.planTarih=l),class:"mt-4",label:"Planlanan Üretim Tarihi",variant:"outlined",readonly:""},null,8,["modelValue"]),e(ba,{modelValue:r.value.aksesuar,"onUpdate:modelValue":a[9]||(a[9]=l=>r.value.aksesuar=l),class:"mt-4",label:"Aksesuar",variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{md:"8",cols:"12"},{default:i(()=>[e(m,{cols:"12",class:"pa-0"},{default:i(()=>[e(H,{disabled:g.value.length===0},{default:i(()=>[e(ye,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(N,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[47]||(a[47]=[c("Seri Başlangiç Onayı")])),_:1,__:[47]})]),_:1}),e(R,{class:"gap-2 pa-3"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"12",md:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(P,{modelValue:n.value.urunAgaciText,"onUpdate:modelValue":a[10]||(a[10]=l=>n.value.urunAgaciText=l),label:"Ürün Ağacı Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",md:"3",class:"d-flex pa-1"},{default:i(()=>[e(o(k),{modelValue:n.value.urunAgaciCheck,"onUpdate:modelValue":a[11]||(a[11]=l=>n.value.urunAgaciCheck=l),icon:"tabler-binary-tree-2",variant:"tonal",block:"",color:"success",rounded:"",onClick:a[12]||(a[12]=l=>G.value=!0)},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",md:"3",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.urunAgaciCheck,"onUpdate:value":a[13]||(a[13]=l=>n.value.urunAgaciCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(P,{modelValue:n.value.gorunumText,"onUpdate:modelValue":a[14]||(a[14]=l=>n.value.gorunumText=l),label:"Görünüm Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.gorunumCheck,"onUpdate:value":a[15]||(a[15]=l=>n.value.gorunumCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(P,{modelValue:n.value.olcuselText,"onUpdate:modelValue":a[16]||(a[16]=l=>n.value.olcuselText=l),label:"Ölçüsel Kontrol",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.olcuselCheck,"onUpdate:value":a[17]||(a[17]=l=>n.value.olcuselCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(P,{modelValue:n.value.paketlemeText,"onUpdate:modelValue":a[18]||(a[18]=l=>n.value.paketlemeText=l),label:"Paketleme Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.paketlemeCheck,"onUpdate:value":a[19]||(a[19]=l=>n.value.paketlemeCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(P,{modelValue:n.value.etiketText,"onUpdate:modelValue":a[20]||(a[20]=l=>n.value.etiketText=l),label:"Etiket Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.etiketCheck,"onUpdate:value":a[21]||(a[21]=l=>n.value.etiketCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"6",class:"d-flex pa-1"},{default:i(()=>[e(P,{modelValue:n.value.dokumanText,"onUpdate:modelValue":a[22]||(a[22]=l=>n.value.dokumanText=l),label:"Doküman Kontrolü",variant:"outlined","auto-grow":"",rows:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(o($),{"data-source":o(Z),value:n.value.dokumanCheck,"onUpdate:value":a[23]||(a[23]=l=>n.value.dokumanCheck=l),"display-expr":"title","value-expr":"value",height:37},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(o(k),{variant:"outlined",class:"d-flex justify-center mt-4",block:"",color:"warning",onClick:Ha},{default:i(()=>a[48]||(a[48]=[c(" Kaydet / Güncelle ")])),_:1,__:[48]})]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}),e(m,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(H,{disabled:g.value.length===0},{default:i(()=>[e(ye,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(N,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[49]||(a[49]=[c("Onay Süreci")])),_:1,__:[49]})]),_:1}),e(R,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ve),{id:"gridSurec","data-source":xe.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,width:"100%","column-auto-width":!0,"word-wrap-enabled":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget","focused-row-key":he.value,"onUpdate:focusedRowKey":a[24]||(a[24]=l=>he.value=l),height:"242"},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(y(),h("i",El,"✔️")):l.value==="Şartlı Onay"?(y(),h("i",zl,"⚠️")):l.value==="Red"?(y(),h("i",Al,"❌")):(y(),h("i",Bl))]),default:i(()=>[e(o(s),{"data-field":"id",caption:"ID",width:"50",visible:!1}),e(o(s),{"data-field":"revizyon",caption:"Rvz",width:"50"}),e(o(s),{"data-field":"kontrol_tarihi",caption:"Tarih","data-type":"date",width:"130",format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(o(s),{"data-field":"urun_agaci_ok",caption:"ÜA","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"urun_agaci_not",caption:"Ürün Ağacı Not"}),e(o(s),{"data-field":"gorunum_ok",caption:"GR","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"gorunum_not",caption:"Görünüm Not"}),e(o(s),{"data-field":"olcusel_ok",caption:"ÖL","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"olcusel_not",caption:"Ölçüsel Not"}),e(o(s),{"data-field":"paketleme_ok",caption:"PK","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"paketleme_not",caption:"Paketleme Not"}),e(o(s),{"data-field":"etiket_ok",caption:"ET","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"etiket_not",caption:"Etiket Not"}),e(o(s),{"data-field":"dokuman_ok",caption:"DK","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"dokuman_not",caption:"Doküman Not"}),e(o(fe),{mode:"virtual"}),e(o(ke),{mode:"none"})]),_:1},8,["data-source","focused-row-key"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(x,{class:"match-height pa-0"},{default:i(()=>[e(m,{cols:"12",class:"py-2"},{default:i(()=>[e(o(k),{variant:"outlined",disabled:n.value.masterId===0,class:"text-center me-2 mb-2",color:"info",block:"",onClick:a[25]||(a[25]=l=>W.value=!0)},{default:i(()=>a[50]||(a[50]=[c(" Kontrol Gir ")])),_:1,__:[50]},8,["disabled"])]),_:1})]),_:1}),e(m,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(H,{disabled:g.value.length===0},{default:i(()=>[e(ye,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(N,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[51]||(a[51]=[c("Seri Kontroller")])),_:1,__:[51]})]),_:1}),p("div",Nl,[e(o(k),{variant:"tonal",icon:"tabler-trash",rounded:"",onClick:al}),e(o(k),{variant:"tonal",icon:"tabler-photo",rounded:"",onClick:na})]),e(R,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ve),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:q,"data-source":j.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onFocusedRowChanged:Aa},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(y(),h("i",Rl)):l.value==="Şartlı Onay"?(y(),h("i",Ml)):l.value==="Red"?(y(),h("i",Ul)):(y(),h("i",Ol))]),hataTemplate:i(({data:l})=>[l.value==="f"||l.value===!1?(y(),h("i",Fl)):(y(),h("i",$l))]),fotoTemplate:i(({data:l})=>[l.value==="t"||l.value===!0?(y(),h("i",{key:0,onClick:d=>na(l==null?void 0:l.data),class:I(["dx-icon","dx-icon-image"]),style:{fontSize:"16px",color:"green",cursor:"pointer"},title:"Fotoğrafları Göster"},null,8,Pl)):kl("",!0)]),default:i(()=>[e(o(s),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(o(s),{"data-field":"urun_kontrol_m_id",caption:"Master ID",width:"70",visible:!1}),e(o(s),{"data-field":"kontrol_tarihi",caption:"Kontrol Tarihi","data-type":"date",width:130,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(l)).replace(/\//g,".")},"allow-sorting":!1},null,8,["format"]),e(o(s),{"data-field":"seri_no",caption:"Seri No",width:"170"}),e(o(s),{"data-field":"is_photo","header-cell-template":rl,width:"30","cell-template":"fotoTemplate"}),e(o(s),{"data-field":"sonuc",caption:"Sonuç",width:"70","cell-template":"sonucTemplate"}),e(o(s),{"data-field":"not",caption:"Not",width:"100"}),e(o(s),{"data-field":"cc",caption:"CC",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Camda Çizik"}),e(o(s),{"data-field":"bke",caption:"BKE",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Bağlantı Kalemi Eksik"}),e(o(s),{"data-field":"cm",caption:"CM",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Çapaklı Malzeme"}),e(o(s),{"data-field":"kh",caption:"KH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kilit Hatası"}),e(o(s),{"data-field":"fb",caption:"FB",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Formda Bozukluk"}),e(o(s),{"data-field":"sh",caption:"SH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Serigrafi Hatası"}),e(o(s),{"data-field":"kah",caption:"KAH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kaynak Hatası"}),e(o(s),{"data-field":"bc",caption:"BC",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Boyada Çizik"}),e(o(s),{"data-field":"kpl",caption:"KPL",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kaplama Hatası"}),e(o(s),{"data-field":"tkh",caption:"TKH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Topraklama Hatası"}),e(o(s),{"data-field":"bh",caption:"BH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Boya Hatası"}),e(o(s),{"data-field":"ieh",caption:"IEH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"İş Emri Hatası"}),e(o(s),{"data-field":"oh",caption:"OH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Ölçüsel Hata"}),e(o(s),{"data-field":"h19",caption:"H19",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"19'' Ölçü Hatası"}),e(o(s),{"data-field":"smh",caption:"SMH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Saç Malzeme Hatası"}),e(o(s),{"data-field":"th",caption:"TH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Taşeron Hatası"}),e(o(s),{"data-field":"ah",caption:"AH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Aksesuar Hatası"}),e(o(s),{"data-field":"mh",caption:"MH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Montaj Hatası"}),e(o(s),{"data-field":"sth",caption:"STH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Su Testi Hatası"}),e(o(s),{"data-field":"bks",caption:"BKS",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Bağlantı Kalemi Sıkılmamış"}),e(o(s),{"data-field":"eh",caption:"EH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Etiket Hatası"}),e(o(s),{"data-field":"elk",caption:"ELK",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Elektrik Hatası"}),e(o(s),{"data-field":"sph",caption:"SPH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Sipariş Hatası"}),e(o(s),{"data-field":"olusturan_id",caption:"Prs ID",width:"40"}),e(o(ke),{mode:"none"}),e(o(fe),{mode:"virtual"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1}),e(x,{class:"match-height mt-0"},{default:i(()=>[e(m,{cols:"12",class:"d-flex py-4 gap-4"},{default:i(()=>[e(Hl,{modelValue:ne.value,"onUpdate:modelValue":a[26]||(a[26]=l=>ne.value=l),items:ea.value,label:"Gerekçe",variant:"outlined","item-title":"tanim","item-value":"id",disabled:g.value.length===0||M.value.length===0,"auto-grow":"",clearable:"",rows:"1"},null,8,["modelValue","items","disabled"]),e(o(k),{variant:"outlined",disabled:g.value.length===0||M.value.length===0,color:"warning",height:37,onClick:za},{default:i(()=>a[52]||(a[52]=[c(" Gerekçe Gir ")])),_:1,__:[52]},8,["disabled"])]),_:1})]),_:1}),e(m,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(H,{disabled:g.value.length===0},{default:i(()=>[e(ye,{style:{"background-color":"#20ad5d"},class:"d-flex align-center pa-1 ps-4"},{default:i(()=>[e(N,{style:{color:"black","font-size":"16px"}},{default:i(()=>a[53]||(a[53]=[c("Kontrol Edilmeyenler")])),_:1,__:[53]})]),_:1}),e(R,{class:"gap-2 pa-2"},{default:i(()=>[e(o(ve),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:q,"data-source":K.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onSelectionChanged:Ma},{default:i(()=>[e(o(s),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(o(s),{"data-field":"serino",caption:"Seri No",width:"150"}),e(o(ke),{mode:"none"}),e(o(fe),{mode:"virtual"}),e(o(Le),{mode:"multiple","show-check-boxes-mode":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1}),e(o(Ge),{visible:L.value,"onUpdate:visible":a[29]||(a[29]=l=>L.value=l),width:"90%",height:"90%","hide-on-outside-click":!1,"show-close-button":!0,title:"İşemri Seçiniz..."},{default:i(()=>[p("div",Ll,[p("h3",null,"seçilen iş emri: "+V(g.value),1)]),(y(),De(o(ve),{id:"gridEmirler",ref_key:"emirlerRef",ref:xa,key:wa.value,"data-source":qe.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,height:"95%","allow-column-resizing":!0,"column-resizing-mode":"widget","column-auto-width":!0,"focused-row-key":he.value,"onUpdate:focusedRowKey":a[28]||(a[28]=l=>he.value=l),onRowDblClick:Na,onSelectionChanged:Ba},{secimTemplate:i(({data:l})=>[l.value===be.value?(y(),h("i",Gl)):(y(),h("i",jl))]),default:i(()=>[e(o(s),{"data-field":"id",caption:"ID",visible:!1,width:"40","cell-template":"secimTemplate"}),e(o(s),{"data-field":"isemri_id",caption:" ","data-type":"number",width:30,visible:!1}),e(o(s),{"data-field":"tanim",caption:"İSTASYON","min-width":130}),e(o(s),{"data-field":"belge_no",caption:"BELGE NO","min-width":130}),e(o(s),{"data-field":"cari_ad",caption:"CARİ AD","min-width":130}),e(o(s),{"data-field":"isemri_no",caption:"İŞ EMRİ NO","min-width":120,"allow-sorting":!1}),e(o(s),{"data-field":"item_name",caption:"STOK ADI","allow-sorting":!1}),e(o(s),{"data-field":"item_code",caption:"STOK KODU",visible:!0,"min-width":120,"allow-sorting":!1}),e(o(s),{"data-field":"istasyon_id",caption:"İSTASYON ID","data-type":"number",width:60,visible:!1}),e(o(Sl),{visible:Ae.value,"onUpdate:visible":a[27]||(a[27]=l=>Ae.value=l),"show-indicator":!0,"show-pane":!0,shading:!0},null,8,["visible"]),e(o(fa),{visible:!1}),e(o(wl),{visible:!1}),e(o(xl),{visible:!1}),e(o(_l),{visible:!1}),e(o(Tl),{visible:!0,width:240}),e(o(fe),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(o(ke),{mode:"multiple"}),e(o(Le),{"select-all-mode":"page",mode:"single","show-check-boxes-mode":"always"}),e(o(ka),null,{default:i(()=>[e(o(ya),{"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet"})]),_:1})]),_:1},8,["data-source","focused-row-key"])),e(o(Q),{widget:"dxButton",toolbar:"bottom",location:"center",options:Ce,onClick:$e}),e(o(Q),{widget:"dxButton",toolbar:"bottom",location:"center",options:Fe})]),_:1},8,["visible"]),e(o(Ge),{visible:G.value,"onUpdate:visible":a[30]||(a[30]=l=>G.value=l),width:"90%",height:"90%","hide-on-outside-click":!1,"show-close-button":!0,title:"Ürün Ağacı: "+r.value.urunKodu},{default:i(()=>[p("div",Yl,[p("h2",null,V(g.value),1),p("h3",null,"Onay Tarihi: "+V(Te.value),1),p("h3",null,"Onaylayan: "+V(Me.value),1)]),e(x,{class:"d-flex justify-center align-center pt-1 pb-2"},{default:i(()=>[e(m,{cols:"6",class:"d-flex justify-stasrt ps-5"},{default:i(()=>[p("h4",null,[a[54]||(a[54]=c("Onay:   ")),p("span",ql,V(Ne.value||0)+" / "+V(Re.value),1)])]),_:1}),e(m,{cols:"6",class:"d-flex justify-end pe-5"},{default:i(()=>[c(V(Be.value===!0?Se[0].title:Se[1].title),1)]),_:1})]),_:1}),e(o(ve),{id:"gridAgac",ref_key:"agacRef",ref:Y,"data-source":ge.value,"key-expr":"user_line_no","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,"column-auto-width":!0,height:"96%","allow-column-resizing":!0,"column-resizing-mode":"widget",onSelectionChanged:Ra},{default:i(()=>[e(o(s),{"data-field":"qty_base_bom",caption:"ADET",width:50,"data-type":"number",format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(o(s),{"data-field":"item_id",caption:"ID",width:90,visible:!1}),e(o(s),{"data-field":"user_line_no",caption:"NO",width:50,visible:!1}),e(o(s),{"data-field":"stok_kodu",caption:"STOK KODU",width:120}),e(o(s),{"data-field":"stok_adi",caption:"STOK ADI"}),e(o(fa),{visible:!1}),e(o(ke),{mode:"none"}),e(o(Le),{"select-all-mode":"page",mode:"multiple","show-check-boxes-mode":"always","allow-select-all":!1}),e(o(fe),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(o(ka),null,{default:i(()=>[e(o(ya),{"align-by-column":!0,column:"stok_kodu","summary-type":"count","display-format":"Satır sayısı: {0}"})]),_:1})]),_:1},8,["data-source"]),e(o(Q),{disabled:ee.value,widget:"dxButton",toolbar:"bottom",location:"center",options:{...Ce,text:ee.value?"Kaydediliyor...":"Kaydet"},onClick:Da},null,8,["disabled","options"]),e(o(Q),{widget:"dxButton",toolbar:"bottom",location:"center",options:Fe})]),_:1},8,["visible","title"]),e(o(Ge),{visible:W.value,"show-title":!0,title:"Hata Girişi",width:"90%",height:"90%","drag-enabled":!0,"close-on-outside-click":!1,"show-close-button":!1,onShown:oa},{default:i(()=>[e(x,{dense:""},{default:i(()=>[e(m,{cols:"12",class:"d-flex pa-1 pb-0"},{default:i(()=>[e(D,{ref_key:"serinoRef",ref:we,modelValue:b.value,"onUpdate:modelValue":a[31]||(a[31]=l=>b.value=l),label:"Seri No",variant:"outlined",rules:[l=>!!l||"Seri no zorunlu"],onKeydown:yl(gl(Oa,["prevent"]),["enter"]),onBlur:Ja,onChange:Qa},null,8,["modelValue","rules","onKeydown"])]),_:1}),e(m,{cols:"12",class:"d-flex pa-1 pb-3 justify-end"},{default:i(()=>[e(P,{disabled:b.value.length===0,label:"Not",modelValue:le.value,"onUpdate:modelValue":a[32]||(a[32]=l=>le.value=l),"auto-grow":"",class:"mt-4",variant:"outlined",rows:"1"},null,8,["disabled","modelValue"])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pe-2 pb-4"},{default:i(()=>[p("div",null,[e(o($),{disabled:b.value.length===0,"data-source":Se,value:ae.value,"display-expr":"title","value-expr":"value",onValueChanged:a[33]||(a[33]=l=>ae.value=l.value),height:37},null,8,["disabled","value"])])]),_:1}),e(m,{cols:"6",class:"d-flex pa-1 pb-3 justify-end"},{default:i(()=>[e(o(k),{disabled:b.value.length===0,block:"",icon:"tabler-camera-plus",variant:"outlined",rounded:"",onClick:la},null,8,["disabled"])]),_:1})]),_:1}),a[55]||(a[55]=p("hr",null,null,-1)),e(Dl,null,{default:i(()=>[(y(),h(me,null,Ie(Ua,(l,d)=>e(x,{key:d},{default:i(()=>[e(m,{cols:"12"},{default:i(()=>[p("strong",null,V(l.baslik),1)]),_:2},1024),(y(!0),h(me,null,Ie(l.hatalar,(v,T)=>(y(),De(m,{key:T,cols:"12",sm:"6",md:"4",class:"py-0 my-0"},{default:i(()=>[e(ba,{disabled:b.value.length===0,modelValue:te.value[v.kod],"onUpdate:modelValue":F=>te.value[v.kod]=F,label:`${v.kod}: ${v.aciklama}`,density:"compact","hide-details":"",class:"py-0 my-0"},null,8,["disabled","modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128))]),_:2},1024)),64))]),_:1}),p("div",Wl,[e(Il,{ref_key:"fileInput",ref:Xe,modelValue:A.value,"onUpdate:modelValue":a[34]||(a[34]=l=>A.value=l),accept:"image/*",label:"Fotoğraf Seç",multiple:"",style:{display:"none"},onChange:Za},null,8,["modelValue"])]),e(m,{cols:"12",class:"d-flex pa-0 pt-2 pb-2 justify-end gap-2"},{default:i(()=>[e(o(k),{disabled:b.value.length===0,icon:"tabler-camera-plus",variant:"outlined",block:"",rounded:"",onClick:la},null,8,["disabled"])]),_:1}),e(x,null,{default:i(()=>[(y(!0),h(me,null,Ie(C.value,l=>(y(),De(m,{key:l.id,cols:"12",sm:"4",md:"3"},{default:i(()=>[e(ze,{src:l.url,"max-height":"200",class:"rounded-lg",onClick:d=>Xa(l.url)},null,8,["src","onClick"]),e(o(k),{icon:"tabler-trash",color:"error",rounded:"",onClick:d=>Wa(l.id),class:"mt-1"},null,8,["onClick"])]),_:2},1024))),128))]),_:1}),e(o(Q),{disabled:b.value.length===0||ae.value.length===0||X.value,widget:"dxButton",toolbar:"bottom",location:"center",options:{...Ce,text:X.value?"Kaydediliyor...":Ce.text},onClick:$a},null,8,["disabled","options"]),e(o(Q),{widget:"dxButton",toolbar:"bottom",location:"center",options:Fe})]),_:1,__:[55]},8,["visible"]),e(Ee,{modelValue:_e.value,"onUpdate:modelValue":a[36]||(a[36]=l=>_e.value=l),"max-width":"1200"},{default:i(()=>[e(H,null,{default:i(()=>[e(ze,{src:Ze.value,class:"ma-4","aspect-ratio":"1.5"},null,8,["src"]),e(ha,null,{default:i(()=>[e(je),e(o(k),{text:"",onClick:a[35]||(a[35]=l=>_e.value=!1)},{default:i(()=>a[56]||(a[56]=[c("Kapat")])),_:1,__:[56]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ee,{modelValue:oe.value,"onUpdate:modelValue":a[37]||(a[37]=l=>oe.value=l),"max-width":"520"},{default:i(()=>[e(H,null,{default:i(()=>[e(N,null,{default:i(()=>a[57]||(a[57]=[c("Onay")])),_:1,__:[57]}),e(R,null,{default:i(()=>a[58]||(a[58]=[c(" Yinele işlemine devam edilsin mi? ")])),_:1,__:[58]}),e(ha,null,{default:i(()=>[e(je),e(o(k),{variant:"text",onClick:La},{default:i(()=>a[59]||(a[59]=[c("Hayır")])),_:1,__:[59]}),e(o(k),{color:"primary",variant:"elevated",onClick:Pa},{default:i(()=>a[60]||(a[60]=[c("Evet")])),_:1,__:[60]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Vl,{type:"error",class:"mt-2",border:"start","colored-border":"",elevation:"2",variant:"tonal"},{default:i(()=>a[61]||(a[61]=[p("strong",null,"CC:",-1),c(" Camda Çizik   "),p("strong",null,"BKE:",-1),c(" Bağlantı Kalemi Eksik   "),p("strong",null,"CM:",-1),c(" Çapaklı Malzeme   "),p("strong",null,"KH:",-1),c(" Kilit Hatası   "),p("strong",null,"FB:",-1),c(" Formda Bozukluk   "),p("strong",null,"SH:",-1),c(" Serigrafi Hatası   "),p("strong",null,"KAH:",-1),c(" Kaynak Hatası   "),p("strong",null,"BC:",-1),c(" Boyada Çizik   "),p("strong",null,"KPL:",-1),c(" Kaplama Hatası   "),p("strong",null,"TKH:",-1),c(" Topraklama Hatası   "),p("strong",null,"BH:",-1),c(" Boya Hatası   "),p("strong",null,"IEH:",-1),c(" İş Emri Hatası   "),p("strong",null,"OH:",-1),c(" Ölçüsel Hata   "),p("strong",null,"H19:",-1),c(" 19'' Ölçü Hatası   "),p("strong",null,"SMH:",-1),c(" Saç Malzeme Hatası   "),p("strong",null,"TH:",-1),c(" Taşeron Hatası   "),p("strong",null,"AH:",-1),c(" Aksesuar Hatası   "),p("strong",null,"MH:",-1),c(" Montaj Hatası   "),p("strong",null,"STH:",-1),c(" Su Testi Hatası   "),p("strong",null,"BKS:",-1),c(" Bağlantı Kalemi Sıkılmamış   "),p("strong",null,"EH:",-1),c(" Etiket Hatası   "),p("strong",null,"ELK:",-1),c(" Elektrik Hatası   "),p("strong",null,"SPH:",-1),c(" Sipariş Hatası   ")])),_:1,__:[61]}),e(Ee,{modelValue:re.value,"onUpdate:modelValue":a[39]||(a[39]=l=>re.value=l),"max-width":"800"},{default:i(()=>[e(H,null,{default:i(()=>[e(N,{class:"d-flex justify-space-between align-center"},{default:i(()=>{var l;return[p("span",null,"Seri No: "+V(((l=Sa.value)==null?void 0:l.seri_no)||""),1),e(o(k),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[38]||(a[38]=d=>re.value=!1)})]}),_:1}),e(R,null,{default:i(()=>[e(x,null,{default:i(()=>[(y(!0),h(me,null,Ie(U.value,(l,d)=>(y(),De(m,{key:d,cols:"12",md:"4"},{default:i(()=>[e(ze,{src:l,"aspect-ratio":"4/3",cover:"",class:"mb-2"},null,8,["src"]),p("div",Xl,[e(o(k),{variant:"tonal",icon:"tabler-trash",rounded:"",onClick:v=>ll(l)},null,8,["onClick"]),e(o(k),{variant:"tonal",icon:"tabler-eye",rounded:"",onClick:v=>tl(l)},null,8,["onClick"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ee,{modelValue:se.value,"onUpdate:modelValue":a[41]||(a[41]=l=>se.value=l),fullscreen:""},{default:i(()=>[e(H,null,{default:i(()=>[e(N,{class:"d-flex justify-space-between align-center"},{default:i(()=>[e(je),e(o(k),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[40]||(a[40]=l=>se.value=!1)})]),_:1}),p("div",Zl,[e(o(k),{variant:"tonal",icon:"tabler-zoom-in",rounded:"",onClick:sa}),e(o(k),{variant:"tonal",icon:"tabler-zoom-out",rounded:"",onClick:ra}),e(o(k),{variant:"tonal",icon:"tabler-zoom-reset",rounded:"",onClick:ua})]),e(R,null,{default:i(()=>[p("div",{style:{overflow:"auto","max-block-size":"80vh"},onWheel:nl,onMousedown:ol,onMousemove:il,onMouseup:da,onMouseleave:da},[e(ze,{src:Qe.value,class:"w-100 h-auto",style:hl({transform:`scale(${ie.value}) translate(${de.value.x}px, ${de.value.y}px)`,cursor:ue.value?"grabbing":"grab",transition:ue.value?"none":"transform 0.2s ease","max-width":"unset","max-height":"unset","user-select":"none","pointer-events":"none"}),alt:"Zoomable",draggable:"false"},null,8,["src","style"])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Kl,{ref_key:"hataDialogRef",ref:Ye},null,512)],64))}}),to=bl(Jl,[["__scopeId","data-v-86492c5b"]]);export{to as default};
