import{_ as Ta}from"./AppStepper.vue_vue_type_style_index_0_lang-oR30N0eV.js";import{d as Ia,r as s,D as Le,w as ft,i as Aa,eY as vt,aK as Ye,q as Ra,eZ as Ca,a as yt,c as I,o as x,m as P,b as e,e as u,aF as A,p as R,f as n,g as gt,l,aA as De,az as J,V as za,T as E,y as Va,F as Ka,s as w}from"./main-Buc254Rl.js";import{u as Pa}from"./pageTitle-B1F1JWjV.js";import{D as G}from"./button-BD3XHxol.js";import{D as bt,a as je}from"./switch-DilwEjit.js";import{D as He}from"./select-box-DY_WER0w.js";import{D as Ea}from"./context-menu-DWUxrT1G.js";import{s as Se,D as o,e as Na,f as Oa,g as Te,h as Ma,i as Fa,j as Ga,k as Ua,d as Ie,l as Ba,m as $a,n as La,o as Ya,p as ja,b as Ha,c as D,q as qa,r as U,t as B}from"./data-grid-zY_7UUEw.js";import{D as Wa}from"./load-panel-BOKwE2id.js";import{D as Za}from"./number-box-BrMKOPR5.js";import{D as N,a as $}from"./popup-05e0EJxd.js";import{D as kt}from"./text-area-CjAzRMWv.js";import{D as C}from"./text-box-C9HiKLv6.js";import{D as Ja}from"./tooltip-CmVfA2QQ.js";import{q as Xa}from"./m_resize_observer-B9xXnUFQ.js";import"./dom_component-B8wT4Ms5.js";import"./m_select_box-DpsiAR-p.js";import{e as Qa}from"./export_data_grid-BJ_ostud.js";import"./format_helper-8FPqNnuq.js";import{n as b}from"./notify-DPd5e5au.js";import{e as el}from"./exceljs.min-Dm3_meIG.js";import{F as tl}from"./FileSaver.min-DTJoJ69M.js";import{_ as al}from"./SurecCell.vue_vue_type_style_index_0_lang-5Z2eOQ-9.js";import{V as de}from"./VCardText-Dj--lOYm.js";import{V as p}from"./VCol-hdI8oBcS.js";import{V as Ae,a as wt,b as ht}from"./VCard-DXv8uyHv.js";import{V as T}from"./VRow-4OLbnLhX.js";import{V as ll}from"./VDivider-JC5yA8Mf.js";import{V as il}from"./VForm-WUDMaTh7.js";import{V as nl,a as qe}from"./VWindowItem-Dhp8XrNt.js";import{V as ol}from"./VTextField-BoRaQcxg.js";import{V as sl}from"./VSwitch-DCH5ddV0.js";import{V as _t}from"./VSpacer-C94QYLKD.js";import{V as xt}from"./VDialog-DukK4N91.js";import{V as rl}from"./VSelect-CgJ4rIUD.js";import"./VSlideGroup-BaKPSHXz.js";import"./VSlideGroupItem-DruuPbAX.js";import"./VAvatar-Bz9IhJnE.js";import"./VImg-C5tfnJmP.js";import"./index-qFdlBbmw.js";import"./index-CEhlOack.js";import"./m_row_dragging-K1byIlde.js";import"./themes-Dacyhg8v.js";import"./overlay-R7xNNk8V.js";import"./editor-JDJfWeMw.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./m_utils.scroll-ByQWGtt7.js";import"./m_popover-96zHdDSx.js";import"./export_merged_ranges_manager-DXOVkNTk.js";import"./language_codes-BJ6-wmbR.js";import"./progress-bar-CmKWxmWz.js";/* empty css              */import"./createSimpleFunctional-DV8ZLWRk.js";import"./form-CEsAcc_D.js";import"./forwardRefs-C-GTDzx5.js";import"./lazy-BiMT4cFn.js";import"./ssrBoot-DrhuJYwB.js";/* empty css                   */import"./VCounter-TkhZs-mO.js";import"./VField-Sw-Kh4TV.js";import"./easing-Bybner-F.js";import"./VInput-CWSBksCP.js";import"./VSelectionControl-8ezaQ9U7.js";import"./VOverlay-C8c5rkVX.js";import"./delay-DByJ5hj2.js";import"./scopeId-4_0-YyRp.js";import"./dialog-transition-BChk8wp7.js";import"./VList-CfAAto1P.js";import"./VMenu-DUMIYltz.js";import"./VCheckboxBtn-hMvpQaUO.js";import"./VChip-B96QZeC9.js";const ul={key:0,class:"montaj-loading-overlay"},dl={class:"montaj-loading-content"},ml={class:"montaj-loading-hint"},cl={key:0,class:"montaj-loading-timeout"},pl={id:"liste",style:{"margin-block-end":"-10px"}},fl={class:"informer"},vl={class:"count"},yl={class:"informer"},gl={class:"count"},bl={key:0,class:J(["dx-icon","dx-icon-belloutline"]),style:{fontSize:"20px",color:"green"}},kl={key:0,class:J(["dx-icon","dx-icon-warning"]),style:{fontSize:"20px",color:"red"}},wl={class:"popup-center"},hl={class:"popup-center"},_l={class:"popup-center"},xl={class:"popup-center"},Dl={key:0},Sl={key:1},Tl={class:"popup-center"},Il={class:"caption"},Al={style:{"block-size":"613px"}},Dt="İş Emirleri",St="MONTAJ",Re="planlama:is-emirleri-montaj",Hi=Ia({__name:"is-emirleri-montaj",props:{tab:{},mesaj:{},tablo:{},istasyon:{type:Boolean},operasyon:{type:Boolean},grup:{type:Boolean},isMerkezi:{},indx:{}},setup(Tt){function S(t){return typeof t.value=="number"?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t.value):t.valueText}const X=s(!1),Q=s(!1),ee=s(!1),me=s(!1),ce=s(!1),te=s(!1),Ce=s(!1),y=s([]);s(null);const We=s(null);Pa().setTitle(`${Dt} (${St})`),document.title=`OFT - ${Dt} | ${St}`,s(null),s({});const pe=s(!1),O=s(!1),ae=s(!1),le=s(!0),Ze=s([]),L=s([]),It=s([]),Je=s([]),ie=s([]);s([]),s([]);const ze=s([]),h=s(null),At=s(null),Rt=s(null),Ve=s(!0),fe=s(!1),ve=s(""),Xe={of:"window"},ye=s(0),Qe=s(0),M=s(null),ge=s(!1),ne=s(!1),Ke=s(!1),Pe=s(!1),Ee=s(!1),et=s(!1),Ct=Le(()=>Ke.value&&Pe.value&&Ee.value);ft(Ct,t=>{t&&!ne.value&&(ne.value=!0)});const zt=Le(()=>{const t=[];return t.push(Ke.value?"Veri ✓":"Veri..."),t.push(Pe.value?"Düzen ✓":"Düzen..."),t.push(Ee.value?"Render ✓":"Render..."),t.join(" / ")});setTimeout(()=>{ne.value||(et.value=!0,ne.value=!0)},12e3);async function Ne(t){ve.value=t,await Ye(),await new Promise(a=>requestAnimationFrame(()=>a()))}function Oe(){fe.value=!1,ve.value=""}const g=s([]),_=s(new Date),tt=s(new Date),at=s(null),Y=s(""),Me=s("");s(null);const oe=s(null),z=s(""),Vt=s(Date.now()),Fe=s(0);s(0),s(0);const Ge=s(2),lt=s(0),it=s(""),Ue=s([]),se=s(0),Be=s([]),re=s(0);s([]),s([]);const Kt=()=>{const t=["ITEM ID","STOK KODU","BAKİYE"],a=ie.value.filter(i=>i.bakiye?i.bakiye<0:!1);if(a.length===0){const i=document.createElement("textarea");i.value=" ",i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),b("Eksik bulunamadı.","warning",1500);return}const r=a.map(i=>{const f=Number.parseFloat(i.bakiye.toString())||0;return`${i.item_id}	${i.stok_kodu}	${i.stok_adi}	${f}`}),m=[t.join("	"),...r].join(`
`),d=document.createElement("textarea");d.value=m,d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d),d.select();try{document.execCommand("copy"),b("Eksikler kopyalandı.","success",1500)}catch(i){console.error("Kopyalama sırasında bir hata oluştu:",i)}document.body.removeChild(d)},j=s(!1),H=s(""),ue=s(!0),q=s([]),W=s(!1),V=s(null);async function be(){try{const{data:t}=await w.get("/api/grid-layouts",{params:{page:Re}});q.value=Array.isArray(t)?t:[]}catch(t){console.error("Düzenler alınamadı:",t)}}function Pt(){var r;const t=(r=h.value)==null?void 0:r.instance;if(!t)return null;const a=t.state();return a&&!ue.value&&("filterValue"in a&&delete a.filterValue,"filterPanel"in a&&delete a.filterPanel,Array.isArray(a.columns)&&a.columns.forEach(m=>{!m||typeof m!="object"||(delete m.filterValue,delete m.filterType,delete m.filterValues,delete m.selectedFilterOperation)})),a}async function Et(){const t=Pt();if(t){if(!H.value.trim()){j.value=!0;return}try{await w.post("/api/grid-layouts",{page_key:Re,name:H.value.trim(),include_filters:ue.value,state:t,meta:{version:1,last_used:!0}}),b("Düzen kaydedildi","success",1200),j.value=!1,await be();const a=q.value.find(r=>r.name===H.value.trim());if(a!=null&&a.id)try{await w.put(`/api/grid-layouts/${a.id}/last-used`,{page_key:Re})}catch{}}catch(a){console.error("Düzen kayıt hatası:",a),b("Kayıt sırasında hata","error",1500)}}}async function Nt(){await be(),V.value=null,W.value=!0}function nt(t){var a;(a=h.value)!=null&&a.instance&&h.value.instance.state(t)}function Ot(){const t=q.value.find(a=>a.id===V.value);t&&(nt(t.state),W.value=!1,t.id&&w.put(`/api/grid-layouts/${t.id}/last-used`,{page_key:Re}).catch(()=>{}))}async function Mt(){if(V.value)try{await w.delete(`/api/grid-layouts/${V.value}`),b("Düzen silindi","success",1200),await be(),V.value=null,q.value.length===0&&(W.value=!1)}catch(t){console.error("Düzen silme hatası:",t),b("Silme sırasında hata","error",1500)}}const Ft=()=>{var t;(t=h.value)!=null&&t.instance&&h.value.instance.state(null)},Gt=t=>{g.value=t.selectedRowsData},Ut=(t,a)=>{const r=a.data.renk_kodu;t.innerText=a.text;const m=d=>{const i=document.createElement("span");return i.className="dx-icon dx-icon-square",i.style.marginLeft="8px",i.style.color=d,i.style.fontSize="20",i.style.display="inline-flex",i};if(r){let d="";switch(r){case"RAL7035":d="#D7D7D7";break;case"RAL7016":d="#293133";break;case"RAL7031":d="#474B4E";break;case"RAL7032":d="#721422";break;case"RAL5026":d="#102C54";break;case"RAL7037":d="#7D7F7D";break;case"RAL9003":d="#F4F4F4";break;case"RAL9005":d="#0A0A0A";break;case"RAL9006":d="#A5A5A5";break;case"RAL9007":d="#8F8F8F";break;case"RAL9010":d="#FFFFFF";break;case"RAL9016":d="#F6F6F6";break;default:d="white";break}const i=m(d);t.insertBefore(i,t.firstChild)}},Bt=(t,a)=>{const r=a.data.teknik_not1&&a.data.teknik_not1.trim()!=="",m=a.data.teknik_not2&&a.data.teknik_not2.trim()!=="";t.innerText=a.text;const d=(i,f)=>{const k=document.createElement("span");return f==="Planlamanın Notu"?k.className="dx-icon dx-icon-square":k.className="dx-icon dx-icon-message",k.style.marginLeft="8px",k.style.color=i,k.style.fontSize="16",k.style.display="inline-flex",k.addEventListener("click",()=>{at.value=f==="Planlamanın Notu"?a.data.teknik_not1:a.data.teknik_not2,Y.value=f,me.value=!me.value}),k};if(r){let i="";switch(a.data.teknik_not1){case"Mekanik eksik":i="orange";break;case"Satınalma eksik":i="red";break;case"Revizyon yapıldı. Müşteri / Arge":i="gray";break;case"Ürün ağacı yok":i="gray";break;case"Beklemede - Yönetim - Fiyat":i="#f79191";break;case"İptal - Müşteri":i="darkgray";break;default:i="#a29bef";break}const f=d(i,"Planlamanın Notu");t.appendChild(f)}if(m){const i=d("green","Üretimin Notu");t.appendChild(i)}},ot=t=>{if(!t||typeof t!="string")return null;const[a,r,m]=t.split(".");return`${m}-${r}-${a}`},$t=(t,a)=>{const r=ot(a.data.teslim_tarihi),m=ot(a.data.planlanan_bitis_tarihi),d=m?new Date(m):new Date,i=r?new Date(r):new Date;d.setHours(0,0,0,0),i.setHours(0,0,0,0);const f=Math.floor((i.getTime()-d.getTime())/(1e3*60*60*24));t.innerText=a.text;const k=(v,Sa)=>{const Z=document.createElement("span");return Z.className=Sa?"dx-icon dx-icon-isnotblank":"dx-icon dx-icon-isblank",Z.style.marginRight="8px",Z.style.color=v,Z.style.fontSize="16",Z.style.display="inline-flex",Z};if(f<0){const v=k("red",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else if(f===0){const v=k("blue",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else if(f<=3){const v=k("orange",!0);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}else{const v=k("white",!1);t.firstChild?t.insertBefore(v,t.firstChild):t.appendChild(v)}},c=s({hafta:"",isemri_no:"",teslim_tarihi:"",siparis_belge_no:"",isemri_id:"",sip_not1:"",sip_not2:"",sip_not3:"",sip_not4:"",teknik_not1:"",teknik_not2:"",cari_ad:"",eksikler:"",kaydi_giren_kullanici:"",planlanan_baslangic:"",planlanan_bitis_tarihi:"",aksesuar:"",sip_detay_id:0,istasyon:"",stok_kodu:"",stok_adi:"",CIKIS_DEPO:"",siparis_miktari:0}),$e=s([{title:"Sipariş Detayı",subtitle:"Seçilmedi"},{title:"Alt İş Emirleri",subtitle:"Seçilmedi"},{title:"Rota",subtitle:"Tasarım aşamasında"}]),ke=s(0),Lt=()=>{if(c.value===null||c.value.isemri_no===""){b("Önce iş emrini seçmelisiniz...","error",1500);return}oe.value&&(z.value===""?z.value=oe.value:z.value+=(z.value?`
`:"")+oe.value)},we={width:100,type:"success",text:"Kaydet",stylingMode:"contained"},he={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{X.value=!1,Q.value=!1,ee.value=!1,ce.value=!1,te.value=!1}},Yt=async()=>{const t=g.value.map(r=>({item_id:r.item_id,isemriID:r.isemri_id,operasyonID:r.OPERASYON_ID,istasyonID:r.IS_ISTASYONU_ID,isMerkeziID:r.IS_MERKEZI_ID,satir_id:r.satir_id,ismerkezi_kodu:re.value,istasyon_kodu:se.value,rotaGuncelle:le.value})),a=K.value.id;try{const r=await w.post("/api/istasyonKaydet",{updateData:t,userID:a});F(),g.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}te.value=!1},jt=()=>{Me.value==="planlanan_baslangic"&&Wt("t"),X.value=!1},Ht=()=>{Zt(),Q.value=!1},qt=async()=>{ee.value=!1;const t=g.value.map(r=>({isemriNo:r.isemri_no,aksesuar:O.value===!0?1:0,orderDId:r.sip_detay_id})),a=K.value.id;console.log("Aksesuar güncelleme verisi:",t);try{const r=await w.post("/api/aksesuarKaydet",{updateData:t,userID:a});F(),g.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},Wt=async t=>{y.value[1]===null&&(y.value[1]=y.value[0]),new Date(_.value),new Date(_.value);const a=g.value.map(m=>({tur:t,satir_id:m.satir_id,isEmriID:m.isemri_id,isemriNo:m.isemri_no,sure:0,aksesuar:O.value===!0?1:0,teslimTarih:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_baslangic:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_bitis:`${y.value[1].getFullYear()}-${(y.value[1].getMonth()+1).toString().padStart(2,"0")}-${y.value[1].getDate().toString().padStart(2,"0")} ${y.value[1].getHours().toString().padStart(2,"0")}:${y.value[1].getMinutes().toString().padStart(2,"0")}:${y.value[1].getSeconds().toString().padStart(2,"0")}`})),r=K.value.id;try{const m=await w.post("/api/updatePlanBaslangic",{updateData:a,userID:r});F(),g.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(m){console.error("Güncelleme sırasında hata oluştu:",m)}},Zt=async()=>{const t=g.value.map(r=>({tur:"s",birlesik:ae.value===!0?1:0,gun:Ge.value,satir_id:r.satir_id,isEmriID:r.isemri_id,isemriNo:r.isemri_no,sure:0,sip_detay_id:r.sip_detay_id,aksesuar:O.value===!0?1:0,teslimTarih:`${_.value.getFullYear()}-${(_.value.getMonth()+1).toString().padStart(2,"0")}-${_.value.getDate().toString().padStart(2,"0")} ${_.value.getHours().toString().padStart(2,"0")}:${_.value.getMinutes().toString().padStart(2,"0")}:${_.value.getSeconds().toString().padStart(2,"0")}`})),a=K.value.id;try{const r=await w.post("/api/updatePlanBaslangic",{updateData:t,userID:a});F(),g.value=[],_e(),b("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},_e=()=>{var a;const t=(a=h.value)==null?void 0:a.instance;t==null||t.clearSelection()},Jt=async()=>{try{const t=L.value.findIndex(r=>r.isemri_no===c.value.isemri_no);if(t===-1){b("Güncellenecek kayıt bulunamadı.","success",1500);return}if((await w.post("/api/planNotKaydet",{satir_id:c.value.isemri_no,not:z.value})).status===200){const r=[...L.value];r[t].teknik_not1=z.value,L.value=r,b("Notlar başarıyla güncellendi...","success",1500)}}catch(t){console.error("Kaydetme sırasında bir hata oluştu:",t)}},st=t=>{t.rowType==="data"&&(t.column.dataField==="isemri_miktari"||t.column.dataField==="uretilen_net_miktar"||t.column.dataField==="kalan_miktar")&&t.value>0&&(t.cellElement.style.fontWeight="bold"),t.rowType==="data"&&t.column.dataField==="toplam_hurda_miktari"&&t.value>0&&(t.cellElement.style.color="white",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#EC2407"),t.rowType==="data"&&t.column.dataField==="kalan_siparis_miktari"&&t.value>0&&(t.cellElement.style.color="black",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#b7d0e8"),t.rowType==="data"&&t.column.dataField==="hafta"&&(t.cellElement.style.fontWeight="bold")},Xt=t=>{var k;if(t.rowType!=="data")return;const a=new Date,r=new Date;r.setDate(a.getDate()-1);const m=v=>v.toISOString().split("T")[0],d=m(a),i=m(r),f=(k=t.data)==null?void 0:k.kayit_tarihi;if(f){const v=m(new Date(f));(v===d||v===i)&&(t.rowElement.style.backgroundColor="rgba(250,160,8,0.12)",t.rowElement.style.fontWeight="bold")}},Qt=t=>{t.rowType==="data"&&t.column.dataField==="qty_prm"&&(t.cellElement.style.fontWeight="bold")},ea=t=>{t.rowType==="data"&&t.column.dataField==="bakiye"&&t.value<0&&(t.cellElement.style.color="white",t.cellElement.style.fontWeight="bold",t.cellElement.style.backgroundColor="#EC2407"),t.rowType==="data"&&(t.column.dataField==="qty_net"||t.column.dataField==="qty_prm")&&(t.cellElement.style.fontWeight="bold")},ta=t=>{t.rowType==="data"&&(ze.value=[],lt.value=t.data.stok_kodu,it.value=t.data.stok_adi,va(t.data.item_id),Ce.value=!0)},rt=Tt,aa=()=>{var t,a;(a=(t=h.value)==null?void 0:t.instance)==null||a.clearFilter()},la=(t,a)=>{t.innerText=a.text;const r=a.data.tipi,m=(f,k)=>{const v=document.createElement("span");return v.className="dx-icon dx-icon-isnotblank",v.style.marginRight="8px",v.style.color=f,v.style.fontSize="16",v.style.display="inline-flex",v};let d="gray";switch(r){case"Hammadde":d="gold";break;case"YarıMamul":d="limegreen";break;case"Mamul":d="green";break;case"Ticari":d="gray";break}const i=m(d);t.insertBefore(i,t.firstChild)},ia=t=>{if(t.rowIndex===-1)return;const a=t.row.data;$e.value[0].subtitle=a.siparis_belge_no,c.value=a,Fe.value=a.satir_id,c.value.siparis_belge_no=a.siparis_belge_no!=null?a.siparis_belge_no:"",c.value.istasyon=a.IS_ISTASYONU,z.value=a.teknik_not1!=null?a.teknik_not1:"",rt.grup&&(ge.value=!0)},na=t=>{const a=t.row.data;O.value=a.aksesuar!==null},oa=t=>{var m,d,i,f;const a=(m=h.value)==null?void 0:m.instance;if(!a)return;Qe.value=((d=a.getDataSource())==null?void 0:d.totalCount())||0;const r=(i=a.getDataSource())==null?void 0:i.group();Array.isArray(r)&&r.length>0?(M.value=((f=r[0])==null?void 0:f.selector)||null,ye.value=M.value?ut(M.value):0):r!=null&&r.selector?(M.value=r.selector,ye.value=M.value?ut(M.value):0):(M.value=null,ye.value=0)},sa=t=>{},ut=t=>Xa(L.value).groupBy(t).toArray().length,ra=()=>{Ve.value=!Ve.value},dt=t=>{if(g.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}Me.value=t,_.value=new Date(t==="planlanan_baslangic"?g.value[0].planlanan_baslangic:g.value[0].teslim_tarihi),tt.value=new Date(t==="planlanan_baslangic"?g.value[0].planlanan_bitis_tarihi:g.value[0].teslim_tarihi),y.value=[_.value,tt.value],X.value=!0},ua=t=>{if(g.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}Me.value=t,ae.value=!1,_.value=new Date(g.value[0].teslim_tarihi),Q.value=!0},da=()=>{if(g.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}re.value=0,se.value=0,Be.value=[],Ue.value=[],pa(),le.value=!0,te.value=!0},ma=()=>{if(c.value===null){b("Önce iş emrini seçmelisiniz...","error",1500);return}ie.value=[],Y.value=`${c.value.isemri_no} nolu iş emri detayı ( ${c.value.stok_adi} )`,ca(),ce.value=!0},mt=()=>{if(g.value.length===0){b("Önce iş emrini seçmelisiniz...","error",1500);return}O.value=g.value[0].aksesuar!==""&&c.value.aksesuar!==null,ee.value=!0},F=async()=>{try{await Ne("Veriler yükleniyor...");const t=await w.get("/api/data",{params:{tablo:"DETAY",isMerkezi:["4001","800"],coID:K.value.co_id}});L.value=t.data.emirler,It.value=t.data.siparisler,Ze.value=t.data.notlar}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Oe(),Ke.value=!0}},ca=async()=>{try{const t=await w.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:c.value.CIKIS_DEPO||0,isemri_id:c.value.isemri_id,coID:K.value.co_id}});console.log("Detay response:",t),Je.value=t.data.data,$e.value[1].subtitle=`${t.data.toplamIsEmri} ad / ${t.data.toplamSure} dk`,ie.value=t.data.malzemeler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}},pa=async()=>{await Ne("İş merkezleri yükleniyor...");try{const t=await w.get("/api/merkezal",{params:{coID:K.value.co_id}});Be.value=t.data.merkezler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Oe()}},fa=async()=>{se.value=0,await Ne("İstasyonlar yükleniyor...");try{const t=await w.get("/api/istasyonal",{params:{ismerkezi:re.value}});Ue.value=t.data.istasyonlar}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}finally{Oe()}},va=async t=>{try{const a=await w.get("/api/digerdepobakiyeleri",{params:{item_id:t,depo:c.value.CIKIS_DEPO||0}});ze.value=a.data.bakiyeler}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}};Aa(async()=>{try{await vt()}catch{}await F();try{await be();const t=q.value.find(a=>{var r;return(r=a==null?void 0:a.meta)==null?void 0:r.last_used});t!=null&&t.state&&(await Ye(),nt(t.state))}catch{}Pe.value=!0,Ye(()=>{h.value&&h.value.instance&&h.value.instance.clearSelection(),requestAnimationFrame(()=>{Ee.value=!0})})});const ya=async()=>{await F()},ga=()=>{pe.value=!pe.value},ba=t=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(t),K=Ra("userData"),ka=t=>{const a=new el.Workbook,r=a.addWorksheet("MontajIsEmirleri");Qa({component:t.component,worksheet:r,autoFilterEnabled:!0}).then(()=>{a.xlsx.writeBuffer().then(m=>{tl.saveAs(new Blob([m],{type:"application/octet-stream"}),"MontajIsEmirleri.xlsx")})}),t.cancel=!0},ct=[{text:"Yenile"},{text:"Haftaya Göre Grupla"},{text:"Detay Göster"},{text:"İstasyona Gönder",policyKey:"button:planlama:isemri-rota"},{text:"Üretim Tarihini Değiştir",policyKey:"button:planlama:isemri-uretim-tarihi"},{text:"Teslim Tarihini Değiştir",policyKey:"button:planlama:isemri-teslim-tarihi"},{text:"Aksesuar",policyKey:"button:planlama:isemri-aksesuar"},{text:"Teknik Resim Göster"},{text:"Düzen Yükle"},{text:"Düzen Kaydet"},{text:"Düzen Sıfırla"}],xe=s(!1);(async()=>{try{await vt(),xe.value=!0}catch{xe.value=!0}})();const pt=s(0);ft(xe,t=>{t&&pt.value++});const wa=Le(()=>xe.value?ct.filter(t=>t.policyKey?Ca(t.policyKey):!0):ct.filter(t=>!t.policyKey));function ha({itemData:t}){if(!(t!=null&&t.items))switch(t==null?void 0:t.text){case"Yenile":F();break;case"Detay Göster":ma();break;case"Haftaya Göre Grupla":xa();break;case"İstasyona Gönder":da();break;case"Üretim Tarihini Değiştir":Y.value="Üretim tarihini seçiniz",dt("planlanan_baslangic");break;case"Teslim Tarihini Değiştir":Y.value="Teslim tarihini seçiniz",ua("teslim_tarihi");break;case"Aksesuar":mt();break;case"Düzen Yükle":Nt();break;case"Teknik Resim Göster":_a();break;case"Düzen Kaydet":H.value="",ue.value=!0,j.value=!0;break;case"Düzen Sıfırla":Ft();break;case"RAL Kodlarını Güncelle":Da();break}}const _a=()=>{const a=`undefined/api/get-pdf/${`${c.value.stok_kodu}.pdf`}`;window.open(a,"_blank")};function xa(){var t;(t=h.value)!=null&&t.instance&&(h.value.instance.clearGrouping(),h.value.instance.columnOption("haftax","groupIndex",0))}const Da=async()=>{const t=K.value.id;try{const a=await w.post("/api/ralguncelle",{userID:t});b("Renk Kodları başarıyla güncellendi...","success",2e3)}catch(a){console.error("Güncelleme sırasında hata oluştu:",a)}fe.value=!1};return(t,a)=>{const r=yt("DxGridLoadPanel"),m=yt("DxScrollView"),d=Ta;return x(),I(Ka,null,[ne.value?P("",!0):(x(),I("div",ul,[u("div",dl,[a[38]||(a[38]=u("div",{class:"montaj-spinner","aria-label":"Yükleniyor"},null,-1)),a[39]||(a[39]=u("h2",{class:"montaj-loading-title"},"Montaj İş Emirleri Yükleniyor",-1)),u("p",ml,[a[36]||(a[36]=A(" Kritik veriler alınıyor: ")),u("strong",null,R(zt.value),1)]),a[40]||(a[40]=u("p",{class:"montaj-loading-sub"}," İlk listeleme tamamlandığında ekran otomatik açılacak. ",-1)),et.value?(x(),I("p",cl,a[37]||(a[37]=[u("span",{class:"warn"},"Beklenen bazı veriler gecikti, yine de gösteriliyor...",-1)]))):P("",!0)])])),e(Ae,{class:"mt-0 pa-0 pt-2"},{default:n(()=>[e(de,{class:"mt-0 pa-0 ms-2 me-1"},{default:n(()=>[e(p,{cols:"12",class:"mt-0 pa-1 pe-2"},{default:n(()=>[u("div",pl,[(x(),gt(l(Ea),{key:pt.value,"data-source":wa.value,width:200,target:"#grid",onItemClick:ha},null,8,["data-source"])),(x(),gt(l(Se),{id:"grid",ref_key:"dataGridRef",ref:h,key:Vt.value,"data-source":L.value,"key-expr":"satir_id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,onExporting:ka,"allow-column-reordering":!0,"column-auto-width":!1,onContentReady:oa,onFocusedRowChanged:ia,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:st,onSelectionChanged:Gt,"auto-navigate-to-focused-row":!0,onRowPrepared:Xt,"on-option-changed":sa,onContextMenuPreparing:na,"focused-row-key":Fe.value,"onUpdate:focusedRowKey":a[0]||(a[0]=i=>Fe.value=i),"selected-rows-keys":g.value},{aksesuarliTemplate:n(()=>[e(l(G),{icon:"gift","styling-mode":"text",hint:"Aksesuar Ekle/Kaldır"})]),baslangicTarihiTemplate:n(()=>[e(l(G),{icon:"clock","styling-mode":"text",hint:"Başlangıç Tarihini Değiştir"})]),gruplaTemplate:n(()=>[e(l(G),{icon:"hierarchy","styling-mode":"text",hint:"Haftayı Grupla"})]),totalCountTemplate:n(()=>[u("div",fl,[u("div",vl,R(ye.value),1),a[41]||(a[41]=u("span",null,"Toplam Grup",-1))])]),totalRecordTemplate:n(()=>[u("div",yl,[u("div",gl,R(Qe.value),1),a[42]||(a[42]=u("span",null,"Toplam Kayıt",-1))])]),filtreTemizleTemplate:n(()=>[e(l(G),{icon:"notequal","styling-mode":"text",hint:"Filtre Temizle",id:"filtretemizle"})]),menuFiltreTemizleTemplate:n(()=>a[43]||(a[43]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-undo"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Temizle")],-1)])),yenileTemplate:n(()=>[e(l(G),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:n(()=>a[44]||(a[44]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-refresh"}),u("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),filtreGosterTemplate:n(()=>[e(l(G),{icon:"filter","styling-mode":"text",hint:"Filtre Goster"})]),menuFiltreGosterTemplate:n(()=>a[45]||(a[45]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-filter"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Göster")],-1)])),collapseTemplate:n(()=>[e(l(G),{icon:pe.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:ga},null,8,["icon"])]),surecCellTemplate:n(({data:i})=>[e(za,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,height:"20",color:"warning"},{default:n(()=>[u("span",null,R(Math.ceil(i.value))+"%",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),notlarPTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(x(),I("i",bl)):P("",!0)]),notlarOTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(x(),I("i",{key:0,class:J(["dx-icon","dx-icon-belloutline"]),style:De({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):P("",!0)]),eksiklerTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(x(),I("i",kl)):P("",!0)]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(x(),I("i",{key:0,class:J(["dx-icon","dx-icon-gift"]),style:De({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):P("",!0)]),aktifTemplate:n(({data:i})=>[i.value===1?(x(),I("i",{key:0,class:J(["dx-icon","dx-icon-runner"]),style:De({fontSize:"20px",color:t.staticPrimaryColor})},null,4)):P("",!0)]),default:n(()=>[e(l(o),{"data-field":"id",caption:"ID",visible:!1,"min-width":90}),e(l(o),{"data-field":"aktif",caption:"AKTIF",visible:!0,"min-width":40,"cell-template":"aktifTemplate"}),e(l(o),{"data-field":"hafta",caption:"HAFTA",fixed:!0,width:120,visible:!0,alignment:"left","cell-template":Bt}),e(l(o),{"data-field":"haftax",caption:"HFT","data-type":"string",visible:!1,width:20}),e(l(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:!0,width:60,"cell-template":"aksesuarTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"grup_id",caption:"GRUP ID","data-type":"string",visible:!1,width:40}),e(l(o),{"data-field":"IS_ISTASYONU",caption:"İST. ADI",visible:!0,width:130}),e(l(o),{"data-field":"IS_ISTASYONU_ID",caption:"İSTASYON ID",visible:!1,width:90}),e(l(o),{"data-field":"IS_MERKEZI_ID",caption:"İŞ MERKEZİ ID",visible:!1,width:90}),e(l(o),{"data-field":"IS_MERKEZI_ADI",caption:"İŞ MERKEZİ ADI",visible:!1,width:90}),e(l(o),{"data-field":"IS_ISTASYONU_KODU",caption:"İSTASYON KODU",visible:!1,width:150}),e(l(o),{"data-field":"IS_ISTASYONU_ADI",caption:"İSTASYON ADIx",visible:!1,width:150}),e(l(o),{"data-field":"OPERASYON_ID",caption:"OPRSYN ID",visible:!1,width:120}),e(l(o),{"data-field":"OPERASYON",caption:"OPRSYN",visible:!0,width:120}),e(l(o),{"data-field":"Operasyon_no",caption:"OPRSYN NO",visible:!1,width:120}),e(l(o),{"data-field":"siparis_belge_no",caption:"SİPARİŞ NO",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"siparis_miktari",caption:"SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"kalan_siparis_miktari",caption:"KALAN SİPARİŞ MİKTARI","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"cari_ad",caption:"MÜŞTERİ",visible:!0,"min-width":140,"allow-sorting":!1}),e(l(o),{"data-field":"renk_id",caption:"RENK ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"renk_kodu",caption:"RENK KODU",visible:!0,"min-width":110,"allow-sorting":!1,"cell-template":Ut}),e(l(o),{"data-field":"renk_adi",caption:"RENK ADI",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"item_id",caption:"ITEM ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"stok_kodu",caption:"STOK KODU",visible:!0,width:120,"allow-sorting":!1}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200,"allow-sorting":!1}),e(l(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:100,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"isemri_no",caption:"İŞ EMRİ NO",width:120,"allow-sorting":!1}),e(l(o),{"data-field":"teslim_tarihi",caption:"TESLİM TARİHİ","data-type":"date",width:140,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},"cell-template":$t,"allow-sorting":!1},null,8,["format"]),e(l(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:110,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},alignment:"left"},null,8,["format"]),e(l(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:80,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"isemri_miktari",caption:"İŞ EMRİ MİKTARI","data-type":"number",width:110,visible:!0}),e(l(o),{"data-field":"uretilen_toplam_miktar",caption:"TOPLAM URETİLEN","data-type":"number",width:60,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"uretilen_net_miktar",caption:"NET URETILEN","data-type":"number",width:60,visible:!0}),e(l(o),{"data-field":"toplam_hurda_miktari",caption:"HURDA MİKTARI","data-type":"number",width:60,visible:!0,"allow-sorting":!1}),e(l(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HAZIRLIK SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(l(o),{"data-field":"operasyon_suresi",caption:"OPERASYON SÜRESİ","data-type":"number",width:110,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","},"allow-sorting":!1}),e(l(o),{"data-field":"sip_detay_id","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"eksikler",caption:"EKSİKLER",visible:!0,width:60,"cell-template":"eksiklerTemplate",alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"teknik_not1",caption:"PLN NOTU",width:60,visible:!1,"allow-sorting":!1}),e(l(o),{"data-field":"teknik_not2",caption:"OPR NOTU",width:90,visible:!1,alignment:"center","allow-sorting":!1}),e(l(o),{"data-field":"kaydi_giren_kullanici",caption:"KAYIT YAPAN","min-width":120,width:140,"allow-sorting":!1}),e(l(o),{"data-field":"satir_id",caption:"SATIR ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not1",caption:"SİP NOT 1","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not2",caption:"SİP NOT 2","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not3",caption:"SİP NOT 3","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"sip_not4",caption:"SİP NOT 4","min-width":120,"allow-sorting":!1}),e(l(o),{"data-field":"CIKIS_DEPO",caption:"ÇIKIŞ DEPO","min-width":80,"allow-sorting":!1}),e(l(o),{"data-field":"kayit_tarihi",caption:"OLUŞTURMA TARİHİ","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(r,{enabled:!0,text:ve.value||"Yükleniyor...","show-indicator":!0,"show-pane":!0,shading:!0},null,8,["text"]),e(l(Na),{mode:"multiple","select-all-mode":"page","show-check-boxes-mode":"onClick"}),e(l(Oa),{"auto-expand-all":pe.value},null,8,["auto-expand-all"]),e(l(Te),{visible:!0}),e(l(Ma),{visible:!0}),e(l(Fa),{visible:!0}),e(l(Ga),{visible:Ve.value},null,8,["visible"]),e(l(Ua),{visible:!0,width:240}),e(l(Ie),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(l(Ba),{mode:"multiple"}),e(l($a),{enabled:!0,"allow-export-selected-data":!1}),e(l(La),{height:"540px",enabled:!0,mode:"select",position:Xe},{default:n(()=>[e(l(Ya),{enabled:!0}),e(l(ja),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(l(Ha),null,{default:n(()=>[e(l(D),{location:"before",name:"groupPanel"}),e(l(D),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(l(D),{location:"before",template:"totalCountTemplate"}),e(l(D),{location:"before",template:"totalRecordTemplate"}),e(l(D),{location:"before",template:"gruplaTemplate",visible:ge.value&&t.canManagePlanlama,onClick:t.grup},null,8,["visible","onClick"]),e(l(D),{location:"before",template:"baslangicTarihiTemplate",visible:ge.value&&t.canManagePlanlama,onClick:dt},null,8,["visible"]),e(l(D),{location:"before","locate-in-menu":"auto",template:"aksesuarliTemplate",visible:ge.value&&t.canManagePlanlama,onClick:mt},null,8,["visible"]),e(l(D),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:ya}),e(l(D),{location:"after","locate-in-menu":"auto",template:"filtreTemizleTemplate","menu-item-template":"menuFiltreTemizleTemplate",onClick:aa}),e(l(D),{location:"after","locate-in-menu":"auto",template:"filtreGosterTemplate","menu-item-template":"menuFiltreGosterTemplate",onClick:ra}),e(l(D),{name:"exportButton"}),e(l(D),{name:"columnChooserButton"}),e(l(D),{name:"searchPanel"})]),_:1}),e(l(qa),null,{default:n(()=>[e(l(U),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(U),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":S}),e(l(U),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(U),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(U),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(U),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":S}),e(l(U),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(B),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":S}),e(l(B),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":S})]),_:1})]),_:1},8,["data-source","focused-row-key","selected-rows-keys"])),e(l(Wa),{visible:fe.value,"onUpdate:visible":a[1]||(a[1]=i=>fe.value=i),"show-indicator":!0,"show-pane":!0,shading:!0,message:ve.value||"Yükleniyor...",position:Xe},null,8,["visible","message"])])]),_:1})]),_:1})]),_:1}),e(l($),{visible:Q.value,"onUpdate:visible":a[6]||(a[6]=i=>Q.value=i),width:500,height:560,"hide-on-outside-click":!0,"show-close-button":!0,title:"Teslim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[u("div",wl,[e(l(bt),{ref_key:"calendarRef",ref:We,value:_.value,"onUpdate:value":a[2]||(a[2]=i=>_.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"single","show-today-button":!0},null,8,["value"])])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",hl,[a[46]||(a[46]=u("h2",{class:"mr-4"},"Üretimi Etkileme",-1)),e(l(je),{value:ae.value,"onUpdate:value":a[3]||(a[3]=i=>ae.value=i)},null,8,["value"]),a[47]||(a[47]=u("h2",{class:"ml-4"},"Üretimi Etkile",-1))])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",_l,[a[48]||(a[48]=u("h2",null,"Geri çekilecek gün sayısı: ",-1)),e(l(Za),{min:0,"show-spin-buttons":!0,"read-only":!ae.value,value:Ge.value,"onUpdate:value":a[4]||(a[4]=i=>Ge.value=i),"input-attr":{"aria-label":"Gun"},style:{"inline-size":"100px","margin-inline-start":"10px"}},null,8,["read-only","value"])])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:we,onClick:a[5]||(a[5]=i=>Ht())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:he})]),_:1},8,["visible"]),e(l($),{visible:X.value,"onUpdate:visible":a[9]||(a[9]=i=>X.value=i),width:350,height:470,"hide-on-outside-click":!0,"show-close-button":!0,title:"Üretim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(bt),{ref_key:"calendarRef",ref:We,value:y.value,"onUpdate:value":a[7]||(a[7]=i=>y.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"range","show-today-button":!0},null,8,["value"])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:we,onClick:a[8]||(a[8]=i=>jt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:he})]),_:1},8,["visible"]),e(l($),{visible:te.value,"onUpdate:visible":a[15]||(a[15]=i=>te.value=i),width:400,height:330,"hide-on-outside-click":!1,"show-close-button":!0,title:"İş Merkezi / İstasyonu seçiniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(He),{"data-source":Be.value,value:re.value,"onUpdate:value":a[10]||(a[10]=i=>re.value=i),label:"İş Merkezi","label-mode":"floating","display-expr":"mrk_adi","value-expr":"is_merkezi_id",onValueChanged:a[11]||(a[11]=i=>fa()),style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[e(l(He),{"data-source":Ue.value,value:se.value,"onUpdate:value":a[12]||(a[12]=i=>se.value=i),label:"İstasyon","label-mode":"floating","display-expr":"ist_adi","value-expr":"istasyon_id",style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",xl,[e(l(je),{value:le.value,"onUpdate:value":a[13]||(a[13]=i=>le.value=i)},null,8,["value"]),le.value?(x(),I("div",Dl,a[49]||(a[49]=[u("h2",{class:"ms-2"}," Rota Güncellensin",-1)]))):(x(),I("div",Sl,a[50]||(a[50]=[u("h2",{class:"ms-2"}," Rota Güncellenmesin",-1)])))])]),_:1})]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:we,onClick:a[14]||(a[14]=i=>Yt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"center",options:he})]),_:1},8,["visible"]),e(l($),{visible:ee.value,"onUpdate:visible":a[18]||(a[18]=i=>ee.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:"Aksesuar olacak mı?"},{content:n(()=>[u("div",Tl,[a[51]||(a[51]=u("h2",{class:"mr-4"},"Aksesuarsız",-1)),e(l(je),{value:O.value,"onUpdate:value":a[16]||(a[16]=i=>O.value=i)},null,8,["value"]),a[52]||(a[52]=u("h2",{class:"ml-4"},"Aksesuarlı",-1))])]),default:n(()=>[e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:we,onClick:a[17]||(a[17]=i=>qt())}),e(l(N),{widget:"dxButton",toolbar:"bottom",location:"after",options:he})]),_:1},8,["visible"]),e(l($),{visible:me.value,"onUpdate:visible":a[19]||(a[19]=i=>me.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:Y.value},{content:n(()=>[e(m,{width:"100%",height:"100%"},{default:n(()=>[u("div",Il,R(c.value.isemri_no),1),A(" "+R(at.value),1)]),_:1})]),_:1},8,["visible","title"]),e(l($),{visible:Ce.value,"onUpdate:visible":a[20]||(a[20]=i=>Ce.value=i),"hide-on-outside-click":!0,title:"Diğer Depo Bakiyeleri","show-close-button":!1,"show-title":!0,width:600,height:500},{default:n(()=>[e(p,{class:"text-center"},{default:n(()=>[u("h2",null,R(lt.value),1),u("h2",null,R(it.value),1)]),_:1}),a[53]||(a[53]=u("br",null,null,-1)),e(T,null,{default:n(()=>[e(p,null,{default:n(()=>[e(l(Se),{id:"gridBakiyeler",ref:"dataGridRefB","data-source":ze.value,"show-borders":!0,"column-auto-width":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Qt,"row-alternation-enabled":!0},{default:n(()=>[e(l(o),{"data-field":"whouse_id",caption:"DEPO ID",width:80}),e(l(o),{"data-field":"whouse_code",caption:"DEPO KODU",width:100}),e(l(o),{"data-field":"description",caption:"DEPO ADI"}),e(l(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(Te),{visible:!1}),e(l(Ie),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1,__:[53]},8,["visible"]),e(l($),{visible:ce.value,"onUpdate:visible":a[28]||(a[28]=i=>ce.value=i),width:1320,height:800,"hide-on-outside-click":!0,"show-close-button":!0,title:Y.value},{content:n(()=>[e(Ae,null,{default:n(()=>[e(de,{class:"mb-0 pb-0"},{default:n(()=>[e(d,{"current-step":ke.value,"onUpdate:currentStep":a[21]||(a[21]=i=>ke.value=i),items:$e.value,class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),e(ll),e(de,null,{default:n(()=>[e(il,null,{default:n(()=>[e(nl,{modelValue:ke.value,"onUpdate:modelValue":a[27]||(a[27]=i=>ke.value=i),class:"disable-tab-transition",style:{"block-size":"170px"}},{default:n(()=>[e(qe,null,{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"4",class:"mt-0 pa-0"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.istasyon,label:"İş İstasyonu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.siparis_belge_no,label:"Sipariş Nosu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.kaydi_giren_kullanici,label:"Kayıt Yapan Personel","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.isemri_no,label:"İş Emri No","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.teslim_tarihi,label:"Teslim Tarihi","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:ba(c.value.siparis_miktari),label:"Sipariş Miktarı","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not1,label:"Sipariş Notu 1","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not2,label:"Sipariş Notu 2","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not3,label:"Sipariş Notu 3","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(C),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:c.value.sip_not4,label:"Sipariş Notu 4","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,null,{default:n(()=>[e(p,{cols:"7",class:"pa-0 ps-2 pe-3"},{default:n(()=>[e(l(He),{modelValue:oe.value,"onUpdate:modelValue":a[22]||(a[22]=i=>oe.value=i),items:Ze.value,"display-expr":"not","value-expr":"not",disabled:!t.canManagePlanlama,label:"Planlama Notu Eklemeleri",class:"kalin"},null,8,["modelValue","items","disabled"])]),_:1}),e(p,{cols:"5",class:"mt-4 pa-0 ps-0 pe-0"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"2",class:"pe-0 ps-1"},{default:n(()=>[e(E,{text:"",icon:"tabler-arrow-down",rounded:"",color:"warning",block:"",disabled:!t.canManagePlanlama,modelValue:c.value.teknik_not1,"onUpdate:modelValue":a[23]||(a[23]=i=>c.value.teknik_not1=i),onClick:Lt},null,8,["disabled","modelValue"])]),_:1}),e(p,{cols:"7",class:"pa-0 ps-1 pt-3 pe-1"},{default:n(()=>[e(E,{color:"error",block:"",onClick:Jt,disabled:!t.canManagePlanlama},{default:n(()=>[e(Va,{start:"",icon:"tabler-device-floppy"}),a[54]||(a[54]=A(" Kaydet "))]),_:1,__:[54]},8,["disabled"])]),_:1}),e(p,{cols:"3",class:"pe-6 ps-0"},{default:n(()=>[e(E,{text:"",icon:"tabler-copy",rounded:"",color:"success",block:"",modelValue:c.value.teknik_not1,"onUpdate:modelValue":a[24]||(a[24]=i=>c.value.teknik_not1=i),onClick:Kt,id:"kopyala"},null,8,["modelValue"])]),_:1}),e(l(Ja),{"hide-on-outside-click":!1,target:"#kopyala","show-event":"mouseenter","hide-event":"mouseleave",position:"right"},{default:n(()=>a[55]||(a[55]=[u("b",null,"Malzeme listesindeki 0'dan küçük satırları kopyalar",-1),u("br",null,null,-1),A(" * satırları seçmenize gerek yoktur ")])),_:1,__:[55]})]),_:1})]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(kt),{modelValue:z.value,"onUpdate:modelValue":a[25]||(a[25]=i=>z.value=i),'"':"",label:" Planlamanın Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98,"max-length":950},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(kt),{modelValue:c.value.teknik_not2,"onUpdate:modelValue":a[26]||(a[26]=i=>c.value.teknik_not2=i),label:"Üretimin Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{cols:"8",class:"mt-0 pa-0 ps-2"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"12",class:"mt-2 pa-0 ps-2 pe-3 text-center"},{default:n(()=>[u("h4",null,"Malzeme Listesi ("+R(ie.value.length)+" parça) (Depo ID: "+R(c.value.CIKIS_DEPO)+")",1),u("div",Al,[e(l(Se),{id:"gridMalzemeler",ref_key:"dataGridRefM",ref:Rt,"data-source":ie.value,"key-expr":"item_id","show-borders":!0,"min-width":400,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:ea,height:"100%","row-alternation-enabled":!0,onRowClick:ta},{default:n(()=>[e(l(o),{"data-field":"tipi",caption:"TİPİ","data-type":"string",visible:!0,width:65,"cell-template":la}),e(l(o),{"data-field":"user_line_no",caption:"LINE NO",width:60,visible:!1}),e(l(o),{"data-field":"item_id",caption:"ITEM ID",width:180,visible:!1}),e(l(o),{"data-field":"stok_kodu",caption:"STOK KODU","min-width":120}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":180}),e(l(o),{"data-field":"worder_m_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(o),{"data-field":"qty_base_bom",caption:"BOM",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"ihtiyac",caption:"İHTİYAÇ",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"bakiye",caption:"BAKİYE",width:100,"data-type":"number","sort-order":"asc",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_min_inv",visible:!1,caption:"MİN STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(o),{"data-field":"qty_max_inv",visible:!1,caption:"MAX STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(Te),{visible:!1}),e(l(Ie),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(qe,null,{default:n(()=>[e(T,null,{default:n(()=>[e(l(Se),{id:"gridDetay",ref_key:"dataGridRefD",ref:At,"data-source":Je.value,"key-expr":"satir_id","show-borders":!0,"min-width":200,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:st,height:"195"},{surecCellTemplate:n(({data:i})=>[e(al,{"cell-data":i,"max-deger":100},null,8,["cell-data"])]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(x(),I("i",{key:0,class:J(["dx-icon","dx-icon-gift"]),style:De({fontSize:"16px",color:t.staticPrimaryColor})},null,4)):P("",!0)]),default:n(()=>[e(l(o),{"data-field":"IS_ISTASYONU",caption:"İSTASYON ADI",width:180}),e(l(o),{"data-field":"OPERASYON",caption:"OPERASYON",width:180}),e(l(o),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200}),e(l(o),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(o),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(o),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:60,visible:!0}),e(l(o),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center"}),e(l(o),{"data-field":"aksesuar",caption:"AKSESUAR",visible:rt.operasyon,width:60,"cell-template":"aksesuarTemplate",alignment:"center"},null,8,["visible"]),e(l(o),{"data-field":"operasyon_hazirlik_suresi",caption:"HZRL DK","data-type":"number","min-width":90,width:90}),e(l(o),{"data-field":"operasyon_suresi",caption:"OPRS DK","data-type":"number","min-width":90,width:90}),e(l(o),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140}),e(l(Te),{visible:!1}),e(l(Ie),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1}),e(qe,null,{default:n(()=>[e(T)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"]),e(xt,{modelValue:j.value,"onUpdate:modelValue":a[32]||(a[32]=i=>j.value=i),"max-width":"520"},{default:n(()=>[e(Ae,null,{default:n(()=>[e(wt,null,{default:n(()=>a[56]||(a[56]=[A("Sayfa Düzenini Kaydet")])),_:1,__:[56]}),e(de,null,{default:n(()=>[e(ol,{modelValue:H.value,"onUpdate:modelValue":a[29]||(a[29]=i=>H.value=i),label:"Düzen adı",density:"comfortable",clearable:""},null,8,["modelValue"]),e(sl,{modelValue:ue.value,"onUpdate:modelValue":a[30]||(a[30]=i=>ue.value=i),label:"Filtreler dahil edilsin",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),e(ht,null,{default:n(()=>[e(_t),e(E,{variant:"text",onClick:a[31]||(a[31]=i=>j.value=!1)},{default:n(()=>a[57]||(a[57]=[A("İptal")])),_:1,__:[57]}),e(E,{color:"primary",onClick:Et},{default:n(()=>a[58]||(a[58]=[A("Kaydet")])),_:1,__:[58]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(xt,{modelValue:W.value,"onUpdate:modelValue":a[35]||(a[35]=i=>W.value=i),"max-width":"520"},{default:n(()=>[e(Ae,null,{default:n(()=>[e(wt,null,{default:n(()=>a[59]||(a[59]=[A("Kayıtlı Düzenler")])),_:1,__:[59]}),e(de,null,{default:n(()=>[e(rl,{items:q.value,"item-title":"name","item-value":"id",label:"Bir düzen seçin",modelValue:V.value,"onUpdate:modelValue":a[33]||(a[33]=i=>V.value=i)},null,8,["items","modelValue"])]),_:1}),e(ht,null,{default:n(()=>[e(_t),e(E,{variant:"text",onClick:a[34]||(a[34]=i=>W.value=!1)},{default:n(()=>a[60]||(a[60]=[A("Kapat")])),_:1,__:[60]}),e(E,{color:"error",variant:"tonal",disabled:!V.value,onClick:Mt},{default:n(()=>a[61]||(a[61]=[A("Sil")])),_:1,__:[61]},8,["disabled"]),e(E,{color:"primary",disabled:!V.value,onClick:Ot},{default:n(()=>a[62]||(a[62]=[A("Yükle")])),_:1,__:[62]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Hi as default};
