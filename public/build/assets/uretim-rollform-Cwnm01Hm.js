import{_ as Qe}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BnuZgQbr.js";import{_ as et}from"./AppSelect.vue_vue_type_script_setup_true_lang-D6u0Q2TA.js";import{d as tt,r as u,X as K,G as at,aZ as Te,f9 as lt,w as U,af as Ie,b2 as it,b3 as T,c as ot,o as st,e as a,b as l,aI as Ke,f as s,I as nt,t as m,v as d,m as r,b7 as ee,x as ce,ae as A,Z as pe,d3 as B,a_ as C}from"./main-nZPIp3zM.js";import{u as rt}from"./pageTitle-dZ8ObgT-.js";import{D as ut,a as dt,b as vt,c as mt,d as ct,e as pt,f as ft,g as fe,h as bt,i as _t}from"./circular-gauge--Oc8lwfe.js";import{a as b,D as yt}from"./data-grid-DeEQB-KM.js";import{D as gt,a as kt}from"./popup-BF5v71cQ.js";import{n as te}from"./notify-BzFwKmZu.js";import{V as E}from"./VCol-D2abnwsK.js";import{V as j,b as Y,c as Ce}from"./VCard-DUgU9KaA.js";import{V as W}from"./VRow-olSiMDTC.js";import{V as wt}from"./VSwitch-BVgCJ7Sd.js";import{V as Re}from"./VCardText-CM2of7En.js";import{V as Le}from"./VTextField-DxmJk7KO.js";import{V as $e}from"./VSpacer-Dc9eEI_n.js";import{V as ze}from"./VDialog-CG_LdRfI.js";import{_ as ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-BPh5M4gR.js";import"./VTextarea-MRc-iejR.js";/* empty css                   */import"./VCounter-D7q2bK8a.js";import"./VImg-CLhjQ_EV.js";import"./VField-DVCChhSL.js";import"./easing-Bybner-F.js";import"./VInput-LEFvBPzP.js";import"./form-BOjFMnna.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-1u8vgOnv.js";import"./VList-B1s16OL7.js";import"./ssrBoot-CbccKk0_.js";import"./VAvatar-D2P1Ci0o.js";import"./VDivider-jjHYTNHc.js";import"./dialog-transition-DIMdH05T.js";import"./VMenu-CirLoP7d.js";import"./VOverlay-B1KB-Dxd.js";import"./delay-DIWkNjrO.js";import"./lazy-CtcxASxK.js";import"./scopeId-boXcSujW.js";import"./VCheckboxBtn-ChdnI1c8.js";import"./VSelectionControl-DHye2oOJ.js";import"./VChip-DZz0YGLH.js";import"./VSlideGroup-BZqb2FuV.js";import"./index-DE6_SiVe.js";import"./ui.errors-CUwkTEy6.js";import"./m_base_widget-DKlWXs4H.js";import"./format_helper-DDmmiJJs.js";import"./m_resize_observer-C4WErg3h.js";import"./themes-CD3jmqiW.js";import"./m_row_dragging-DSGQ30mQ.js";import"./m_select_box-CSXARVKF.js";import"./overlay-N_2_cqQP.js";import"./editor-DXn6U2kj.js";/* empty css              */const Dt={class:"page-rollform pa-0"},St={class:"rollform-header"},xt={class:"gauge-wrap"},Vt={class:"badge-left"},At={class:"gauge-center-value"},Et={style:{color:"goldenrod"}},Mt={class:"clock-wrap"},Nt={class:"digital-clock"},Tt={class:"digital-date"},It={class:"kpi-row"},Kt={class:"kpi"},Ct={class:"kpi-value"},Rt={class:"pb-1 ms-1 me-1"},Lt={class:"kpi"},$t={class:"kpi-value"},zt={class:"pb-1 ms-1 me-1"},qt={class:"kpi"},Pt={class:"kpi-value"},Ft={class:"pb-1 ms-1 me-1"},Gt={class:"oee-title"},Ht={class:"panel status-panel"},Ot={class:"form-row mt-2"},Ut={class:"status-actions justify-between"},Bt={class:"status-actions justify-between"},jt={class:"status-metrics mt-4 text-center"},Yt={class:"metric-time"},Wt={class:"metric-time"},Jt={class:"panel status-panel"},Zt={width:"60%"},Xt={class:"sayac siparis digit"},Qt={width:"60%"},ea={class:"sayac siparis digit"},ta={width:"60%"},aa={class:"sayac net digit"},la={width:"60%"},ia={class:"sayac net digit"},oa={width:"60%"},sa={class:"sayac kalan digit"},na={class:"sayac hurda digit"},ra={class:"sayac net digit"},ua={class:"mt-10"},da={class:"info"},va={width:"60%"},ma={class:"info"},ca={width:"60%"},pa={class:"info"},fa={width:"60%"},ba={class:"info"},_a={class:"status-actions mt-11 mb-0"},ya={class:"panel grid-panel"},ga={class:"mb-2"},ka={class:"mb-2"},wa=tt({__name:"uretim-rollform",setup(ha){const ae=rt(),c=u(null);function be(){var t;try{return`rollform:lastDurusReason:${((t=_==null?void 0:_.value)==null?void 0:t.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function qe(){try{const t=localStorage.getItem(be());if(!t)return!1;const e=JSON.parse(t);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return c.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const J=u([]),_e=u(""),ye=u(!1),i=u(null),R=K(()=>{var t;return((t=i.value)==null?void 0:t.wstation_code)??"..."}),Z=K(()=>{var t;return((t=i.value)==null?void 0:t.wstation_name)??"..."}),Pe=K(()=>{var e;const t=(e=i.value)==null?void 0:e.statu_id;return t===0?"rgba(192, 167, 167, 0.30)":t===1?"rgba(180, 50, 50, 1.00)":t===2?"green":"#4b7027"}),L=K(()=>{var t;return((t=i.value)==null?void 0:t.statu_id)===1});ae.setTitle(`${R.value} (${Z.value})`),document.title=`OFT - ${R.value} | ${Z.value}`;const ge=K(()=>`${R.value} (${Z.value})`),Fe=K(()=>{const t=Number(D.value.oee||0);return t<50?"oee-low":t<70?"oee-mid":t<85?"oee-high":"oee-top"}),X=()=>{ae.setTitle(ge.value),document.title=`OFT - ${R.value} | ${Z.value}`};at(async()=>{await Te(),X(),Q(),oe(),ue=setInterval(oe,1e4),ne=setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),v=String(t.getSeconds()).padStart(2,"0");ke.value=`${e}:${n}:${v}`;const o=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],p=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];we.value=`${t.getDate()} ${p[t.getMonth()]} ${t.getFullYear()} ${o[t.getDay()]}`,Q()},1e3),re=setInterval(()=>{F()},1e3),We(),Ze(),window.addEventListener("keydown",he),window.addEventListener("keydown",Ve)}),lt(()=>{X()});const Ge=U(()=>ae.title,t=>{t!==ge.value&&X()},{flush:"post"});Ie(()=>{Ge(),window.removeEventListener("keydown",he),window.removeEventListener("keydown",Ve)}),U(()=>i.value,()=>{X(),Q()});const _=it("userData");function M(t){const e=Number(t??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const le=u("00:00:00"),He=u("00:00"),ke=u("00:00:00"),we=u("...");function Oe(t){const e=Math.max(0,Math.floor(t||0)),n=Math.floor(e/3600),v=Math.floor(e%3600/60),o=e%60,p=h=>String(h).padStart(2,"0");return`${p(n)}:${p(v)}:${p(o)}`}function Q(){var n;const t=(n=i.value)==null?void 0:n.statu_time;if(t==null){le.value="00:00:00";return}let e=0;if(typeof t=="number")t>1e12?e=Math.max(0,Math.floor((Date.now()-t)/1e3)):t>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-t)):e=Math.max(0,Math.floor(t));else if(typeof t=="string"){const v=Date.parse(t);Number.isNaN(v)||(e=Math.max(0,Math.floor((Date.now()-v)/1e3)))}else t instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-t.getTime())/1e3)));le.value=Oe(e)}function I(t){const e=t.toLowerCase();return J.value.find(n=>String(n.description||"").toLowerCase().includes(e))}function he(t){if(L.value){if(t.key==="F9"){const e=I("çay ve yemek")||I("cay ve yemek")||I("çay & yemek");e&&(c.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}else if(t.key==="F10"){const e=I("çay ve yemek")||I("cay ve yemek")||I("çay & yemek");e&&(c.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}}}const $=u(!1),z=u(""),De=u(null);function Se(){z.value="",$.value=!0,Te(()=>{var t;return(t=De.value)==null?void 0:t.focus()})}async function xe(){var e;const t=Number(z.value);if(!Number.isFinite(t)||t<=0){ie();return}try{await T.post("/api/uretim-rollform/hurda-gir",{station_id:(e=_.value)==null?void 0:e.istasyon_id,qty:t}),$.value=!1,F(),oe()}catch(n){console.error("hurda kayıt hata",n)}}function ie(){z.value="",$.value=!1}function Ve(t){t.key==="F8"&&(Se(),t.preventDefault())}u("uretim-disi");const Ue=u(!1),D=u({availability:0,performance:0,quality:0,oee:0}),Be=u(null);async function oe(){var t;try{const e=(t=_.value)==null?void 0:t.istasyon_id;if(!e)return;const{data:n}=await T.get("/api/uretim-rollform/kpi",{params:{station_id:e}});if(n!=null&&n.kpi){const v=o=>Math.round(Number(o||0)*100);D.value={availability:v(n.kpi.availability),performance:v(n.kpi.performance),quality:v(n.kpi.quality),oee:v(n.kpi.oee)},n.shift&&(Be.value={id:n.shift.id,start:n.shift.start.substring(11,16),end:n.shift.end.substring(11,16)}),Ue.value=!0}}catch(e){console.error("fetchKpiDirect error",e)}}const Ae=u([]),je=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:t=>{var e;return Ye((e=t==null?void 0:t.row)==null?void 0:e.data)}}],N=u(!1),q=u(null),y=u(null);function Ye(t){y.value=t,q.value=null,N.value=!0}async function se(){var v;if(!y.value)return;const t=Number(q.value??0),e=(v=_.value)==null?void 0:v.istasyon_id;if(!e)return;const n={wstation_id:e,worder_id:Number(y.value.isEmriID??0),worder_no:y.value.isEmriNo,item_id:0,item_code:y.value.stokKodu,item_name:y.value.stokAdi,item_length:t,order_qty:Number(y.value.plnAd??0),net_qty:Number(y.value.urtAd??0),scrap_qty:Number(y.value.hurda??0)};try{await T.post("/api/uretim-rollform/activate-workorder",n),N.value=!1,F()}catch(o){console.error("Aktivasyon hatası",o)}}let ne=null,re=null,ue=null,P=null;async function F(){try{if(!_.value.istasyon_id){i.value=null;return}const t=await T.get("/api/kapasite-works-info",{params:{station_id:_.value.istasyon_id}}),e=Array.isArray(t.data)?t.data:[];i.value=e.length>0?e[0]:null,Q()}catch(t){console.error("WorksInfo alınamadı",t),i.value=null}}Ie(()=>{ne&&clearInterval(ne),re&&clearInterval(re),ue&&clearInterval(ue),P&&clearTimeout(P)});async function We(){var t;try{const e=((t=_.value)==null?void 0:t.istasyon_kodu)??"1511",{data:n}=await T.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:e}}),v=(n||[]).map(o=>({grp:0,isEmriID:o.isemri_id,isEmriNo:o.isemri_no,stokKodu:o.stok_kodu,stokAdi:o.stok_adi,plnAd:Number(o.siparis_miktari??0),ilvAd:0,klnAd:Number(o.kalan_miktar??0),urtAd:Number(o.uretilen_net_miktar??0),hurda:Number(o.toplam_hurda_miktari??0),plnSure:Number(o.operasyon_suresi??0),grcSure:0}));Ae.value=v}catch(e){console.error("İş emirleri alınamadı",e)}}const g=u(!1),G=u(!1),de=u(!0),ve=u(!0),Je={width:100,marginBottom:30,type:"success",text:"Kaydet",stylingMode:"contained"};function Ze(){var t;(t=_.value)!=null&&t.istasyon_id&&T.get("/api/durus-sebepleri-al",{params:{istasyon:_.value.istasyon_id}}).then(e=>{var n;J.value=((n=e.data)==null?void 0:n.durusSebepleri)||[]}).catch(e=>{console.error("Duruş sebepleri alınamadı",e)})}function Ee(){c.value={break_reason_code:"000",description:"GİRİLMEDİ"},g.value=!0}async function me(){var t;if(!G.value){if(!c.value){te({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((t=i.value)!=null&&t.worder_id)){te({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),g.value=!1;return}try{G.value=!0,de.value=!1,await T.post("/api/duruskaydet-mekanik",{istasyonID:_.value.istasyon_id,selectedDurus:c.value}),te({message:"Duruş kaydedildi.",type:"success",displayTime:2e3});try{localStorage.setItem(be(),JSON.stringify(c.value))}catch{}}catch(e){console.error("Duruş kaydedilemedi",e),te({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{G.value=!1,de.value=!0,g.value=!1,F()}}}function Xe(t){de.value||(t.cancel=!0)}U(g,(t,e)=>{e&&!t&&F()});const Me=u(null);return U(()=>{var t;return(t=i.value)==null?void 0:t.statu_id},async(t,e)=>{if(t===1&&Me.value!==1)ve.value?!qe()&&!g.value&&Ee():g.value||Ee();else if(t!==1){if(g.value)if(c.value)try{await me()}catch{g.value=!1}else g.value=!1;c.value=null}Me.value=t??null,ve.value&&(ve.value=!1)}),U(c,(t,e)=>{P&&clearTimeout(P),t&&(P=setTimeout(async()=>{var n;if(c.value&&((n=i.value)==null?void 0:n.statu_id)===1&&!G.value&&c.value.break_reason_code!=="000")try{await me()}catch{}},250))}),(t,e)=>{const n=et,v=Qe;return st(),ot("div",Dt,[a("div",St,[l(W,{class:"match-height"},{default:s(()=>[l(E,{cols:"12",md:"3",sm:"6"},{default:s(()=>[l(j,{class:"pa-3"},{default:s(()=>{var o,p,h;return[a("section",null,[l(Y,{class:"durum-title",style:nt({backgroundColor:Pe.value})},{default:s(()=>{var f,k;return[m(d(((f=i.value)==null?void 0:f.statu_id)===0?"KAPALI":((k=i.value)==null?void 0:k.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[17]||(e[17]=a("hr",null,null,-1)),a("div",xt,[a("div",Vt,d(R.value),1),l(r(ut),{class:"oee-gauge",value:(o=i.value)==null?void 0:o.speed,subvalues:(p=i.value)==null?void 0:p.speed_target,tooltip:t.gaugeTooltip,size:t.gaugeSize},{default:s(()=>{var f;return[l(r(dt),{"start-angle":225,"end-angle":-45}),l(r(vt),{"start-value":0,"end-value":(f=i.value)==null?void 0:f.speed_max,"tick-interval":10,"minor-tick-interval":5},{default:s(()=>[l(r(mt),{length:8,color:"#666"}),l(r(ct),{length:4,color:"#444"}),l(r(pt),{"use-range-colors":!0,font:t.gaugeLabelFont},null,8,["font"])]),_:1},8,["end-value"]),l(r(ft),{"background-color":"#20252b",offset:10,width:10},{default:s(()=>{var k,S,x,w,V;return[l(r(fe),{"start-value":0,"end-value":.4*((k=i.value)==null?void 0:k.speed_max),color:"#ce6978"},null,8,["end-value"]),l(r(fe),{"start-value":.4*((S=i.value)==null?void 0:S.speed_max),"end-value":.7*((x=i.value)==null?void 0:x.speed_max),color:"#caa93b"},null,8,["start-value","end-value"]),l(r(fe),{"start-value":.7*((w=i.value)==null?void 0:w.speed_max),"end-value":(V=i.value)==null?void 0:V.speed_max,color:"#1e8e3e"},null,8,["start-value","end-value"])]}),_:1}),l(r(bt),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(r(_t),{enabled:!1})]}),_:1},8,["value","subvalues","tooltip","size"]),a("div",At,[e[12]||(e[12]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız",-1)),a("div",Et,d((h=i.value)==null?void 0:h.speed),1)])]),a("div",Mt,[a("div",Nt,d(ke.value),1),a("div",Tt,d(we.value),1)]),a("div",It,[a("div",Kt,[e[13]||(e[13]=a("div",null,"Meço %",-1)),a("div",Ct,[m(d(D.value.availability)+" ",1),a("div",Rt,[l(ee,{"model-value":D.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",Lt,[e[14]||(e[14]=a("div",null,"Performans %",-1)),a("div",$t,[m(d(D.value.performance)+" ",1),a("div",zt,[l(ee,{"model-value":D.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",qt,[e[15]||(e[15]=a("div",null,"Kalite %",-1)),a("div",Pt,[m(d(D.value.quality)+" ",1),a("div",Ft,[l(ee,{"model-value":D.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(W,null,{default:s(()=>[l(E,{cols:"12",class:"text-center"},{default:s(()=>[a("div",Gt,[e[16]||(e[16]=m("OEE % ")),a("span",{class:ce(["kpi-oee",Fe.value])},d(D.value.oee),3)])]),_:1})]),_:1})])]}),_:1})]),_:1}),l(E,{cols:"12",md:"4",sm:"6"},{default:s(()=>[l(j,{class:"pa-3"},{default:s(()=>[l(Y,{class:"panel-title pa-0"},{default:s(()=>e[18]||(e[18]=[m("DURUM BİLGİLERİ")])),_:1,__:[18]}),e[26]||(e[26]=a("hr",null,null,-1)),a("section",Ht,[a("div",Ot,[e[19]||(e[19]=a("label",null,"Duruş Sebebi (F10 – Yeni Duruş)",-1)),l(n,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),items:J.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!L.value,class:ce({"app-select--force-disabled":!L.value})},null,8,["modelValue","items","disabled","class"]),l(v,{modelValue:_e.value,"onUpdate:modelValue":e[1]||(e[1]=o=>_e.value=o),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",Ut,[l(A,{variant:"tonal",color:"error",size:"small"},{default:s(()=>e[20]||(e[20]=[m("Açıklama Gir")])),_:1,__:[20]}),l(wt,{color:"error",modelValue:ye.value,"onUpdate:modelValue":e[2]||(e[2]=o=>ye.value=o),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",Bt,[l(A,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:s(()=>[e[21]||(e[21]=m(" F9 - Çay Molası ")),l(pe,{end:"",icon:"tabler-mug"})]),_:1,__:[21]}),l(A,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:s(()=>[e[22]||(e[22]=m(" F10 - Yemek Molası ")),l(pe,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[22]})]),a("div",jt,[a("div",null,[e[23]||(e[23]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",Yt,d(le.value),1)]),a("div",null,[e[24]||(e[24]=a("div",{class:"label"},"Vardiya",-1)),a("div",Wt,d(He.value),1)])]),e[25]||(e[25]=a("div",{class:"uclu text-center mt-4"},[a("div",null,[a("div",{class:"label"},"Çalışma"),a("div",{class:"metric-time ok"},"00:00")]),a("div",null,[a("div",{class:"label"},"Duruş"),a("div",{class:"metric-time warn"},"00:00")]),a("div",null,[a("div",{class:"label"},"Boşta"),a("div",{class:"metric-time"},"02:00")])],-1))])]),_:1,__:[26]})]),_:1}),l(E,{cols:"12",md:"5",sm:"6"},{default:s(()=>[l(j,{class:"pa-3"},{default:s(()=>{var o,p,h;return[l(Y,{class:"panel-title pa-0"},{default:s(()=>e[27]||(e[27]=[m("ÜRETİM RAKAMLARI")])),_:1,__:[27]}),e[40]||(e[40]=a("hr",null,null,-1)),a("section",Jt,[l(ee,{"model-value":(((o=i.value)==null?void 0:o.net_qty)+((p=i.value)==null?void 0:p.counter))/((h=i.value)==null?void 0:h.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(W,null,{default:s(()=>[l(E,{cols:"5"},{default:s(()=>{var f,k,S,x,w,V,H,O;return[a("div",null,[a("div",Zt,[e[28]||(e[28]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",Xt,d(M((f=i.value)==null?void 0:f.order_qty)),1)]),a("div",Qt,[e[29]||(e[29]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",ea,d(M((k=i.value)==null?void 0:k.net_qty)),1)]),a("div",ta,[e[30]||(e[30]=a("div",{class:"label"},"Sayaç",-1)),a("div",aa,d(M((S=i.value)==null?void 0:S.counter)),1)]),a("div",la,[e[31]||(e[31]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",ia,d(M(((x=i.value)==null?void 0:x.net_qty)+((w=i.value)==null?void 0:w.counter))),1)]),a("div",oa,[e[32]||(e[32]=a("div",{class:"label"},"Kalan",-1)),a("div",sa,d(M((((V=i.value)==null?void 0:V.order_qty)??0)-((H=i.value)==null?void 0:H.counter)-(((O=i.value)==null?void 0:O.net_qty)??0))),1)])])]}),_:1}),l(E,{cols:"7"},{default:s(()=>{var f,k,S,x;return[a("div",null,[l(W,null,{default:s(()=>[l(E,{cols:"6"},{default:s(()=>{var w;return[e[33]||(e[33]=a("div",{class:"label"},"Hurda",-1)),a("div",na,d(M((w=i.value)==null?void 0:w.scrap_qty)),1)]}),_:1,__:[33]}),l(E,{cols:"6"},{default:s(()=>{var w,V,H,O,Ne;return[e[34]||(e[34]=a("div",{class:"label"},"O.A.%",-1)),a("div",ra,d(((w=i.value)==null?void 0:w.net_qty)===0||((V=i.value)==null?void 0:V.order_qty)===0?0:((((H=i.value)==null?void 0:H.net_qty)+((O=i.value)==null?void 0:O.counter))/((Ne=i.value)==null?void 0:Ne.order_qty)*100).toFixed(0)),1)]}),_:1,__:[34]})]),_:1}),a("div",ua,[e[35]||(e[35]=a("div",null,"İş Emri No:",-1)),a("div",da,d((f=i.value)==null?void 0:f.worder_no),1)]),a("div",va,[e[36]||(e[36]=a("div",null,"Ürün Kodu:",-1)),a("div",ma,d((k=i.value)==null?void 0:k.item_code),1)]),a("div",ca,[e[37]||(e[37]=a("div",null,"Ürün Adı:",-1)),a("div",pa,d((S=i.value)==null?void 0:S.item_name),1)])]),a("div",fa,[e[38]||(e[38]=a("div",null,"Ürün Boyu:",-1)),a("div",ba,d(M((x=i.value)==null?void 0:x.item_length)),1)]),a("div",_a,[l(A,{id:"hurdaGir",variant:"outlined",color:"error",width:"100%",onClick:Se},{default:s(()=>[e[39]||(e[39]=m(" F8 - Hurda Girişi ")),l(pe,{end:"",icon:"tabler-trash"})]),_:1,__:[39]})])]}),_:1})]),_:1})])]}),_:1,__:[40]})]),_:1})]),_:1})]),l(ze,{modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=o=>$.value=o),"max-width":"400"},{default:s(()=>[l(j,null,{default:s(()=>[l(Y,null,{default:s(()=>e[41]||(e[41]=[m("Hurda Girişi")])),_:1,__:[41]}),l(Re,null,{default:s(()=>[l(Le,{ref_key:"hurdaInputRef",ref:De,modelValue:z.value,"onUpdate:modelValue":e[3]||(e[3]=o=>z.value=o),label:"Hurda Miktarı",type:"number","hide-details":"",autofocus:"",onKeydown:[B(C(xe,["prevent"]),["enter"]),B(C(ie,["prevent"]),["esc"])]},null,8,["modelValue","onKeydown"]),e[42]||(e[42]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[42]}),l(Ce,null,{default:s(()=>[l($e),l(A,{variant:"text",color:"grey",onClick:ie},{default:s(()=>e[43]||(e[43]=[m("İptal (Esc)")])),_:1,__:[43]}),l(A,{variant:"elevated",color:"error",onClick:xe},{default:s(()=>e[44]||(e[44]=[m("Kaydet (Enter)")])),_:1,__:[44]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[50]||(e[50]=Ke('<div class="mid-actions" data-v-412e0a74><div class="action-left" data-v-412e0a74><button class="btn" data-v-412e0a74>İş Emrini Kapat</button><button class="btn btn-primary" data-v-412e0a74>Çalışmaya Başla</button><button class="btn" data-v-412e0a74>Operasyon Gir</button><button class="btn" data-v-412e0a74>Teknik Resim</button><button class="btn" data-v-412e0a74>Ürün Etiketi Bas</button><button class="btn icon" data-v-412e0a74>🔍 Ara</button></div><div class="action-right" data-v-412e0a74><button class="btn btn-warn" data-v-412e0a74>Vardiya Bitir</button><button class="btn icon" data-v-412e0a74>🟨</button><button class="btn icon" data-v-412e0a74>🗂️</button><button class="btn icon" data-v-412e0a74>⏻</button></div></div>',1)),a("section",ya,[l(r(yt),{class:"orders-grid","data-source":Ae.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:s(()=>[l(r(b),{type:"buttons",width:"30",buttons:je}),l(r(b),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(r(b),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(r(b),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(r(b),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(r(b),{"data-field":"stokAdi",caption:"STOK ADI"}),l(r(b),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(r(b),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}})]),_:1},8,["data-source"])]),e[51]||(e[51]=Ke('<div class="bottom-tabs" data-v-412e0a74><button class="tab active" data-v-412e0a74>İş Emirleri</button><button class="tab" data-v-412e0a74>Duruşlar</button><button class="tab" data-v-412e0a74>Hurdalar</button><button class="tab" data-v-412e0a74>Ölçümler</button><button class="tab" data-v-412e0a74>Kısayollar</button></div>',1)),l(ze,{modelValue:N.value,"onUpdate:modelValue":e[8]||(e[8]=o=>N.value=o),"max-width":"420",onKeydown:e[9]||(e[9]=B(C(o=>N.value=!1,["prevent","stop"]),["esc"]))},{default:s(()=>[l(j,null,{default:s(()=>[l(Y,null,{default:s(()=>e[45]||(e[45]=[m("İş Emrini Aktif Et")])),_:1,__:[45]}),l(Re,null,{default:s(()=>{var o,p,h;return[a("form",{onSubmit:C(se,["prevent"])},[a("div",ga,[a("strong",null,d((o=y.value)==null?void 0:o.isEmriNo),1),m(" – "+d((p=y.value)==null?void 0:p.stokKodu),1)]),a("div",ka,d((h=y.value)==null?void 0:h.stokAdi),1),l(Le,{ref:"activateLengthInput",modelValue:q.value,"onUpdate:modelValue":e[5]||(e[5]=f=>q.value=f),modelModifiers:{number:!0},type:"number",label:"Ürün Boyu (mm)",variant:"outlined",density:"compact",autofocus:"",onKeydown:[B(C(se,["prevent"]),["enter"]),e[6]||(e[6]=B(C(f=>N.value=!1,["prevent","stop"]),["esc"]))]},null,8,["modelValue","onKeydown"]),e[46]||(e[46]=a("button",{type:"submit",style:{display:"none"}},null,-1))],32)]}),_:1}),l(Ce,null,{default:s(()=>[l($e),l(A,{variant:"text",onClick:e[7]||(e[7]=o=>N.value=!1)},{default:s(()=>e[47]||(e[47]=[m("İptal")])),_:1,__:[47]}),l(A,{color:"primary",variant:"flat",onClick:se,disabled:!q.value},{default:s(()=>e[48]||(e[48]=[m("Onayla")])),_:1,__:[48]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(r(kt),{visible:g.value,"onUpdate:visible":e[11]||(e[11]=o=>g.value=o),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!1,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":Xe,titleTemplate:"title"},{content:s(()=>[l(W,{class:"pa-4"},{default:s(()=>[l(n,{modelValue:c.value,"onUpdate:modelValue":e[10]||(e[10]=o=>c.value=o),items:J.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!L.value,class:ce({"app-select--force-disabled":!L.value})},null,8,["modelValue","items","disabled","class"])]),_:1})]),title:s(()=>e[49]||(e[49]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:s(()=>[l(r(gt),{widget:"dxButton",toolbar:"bottom",location:"center",options:{...Je,onClick:me,disabled:G.value}},null,8,["options"])]),_:1},8,["visible"])])}}}),hl=ht(wa,[["__scopeId","data-v-412e0a74"]]);export{hl as default};
