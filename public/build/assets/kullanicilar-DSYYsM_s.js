import{a_ as et,d8 as le,d as E,r as f,A as tt,w as nt,v as at,aO as lt,c as ot,o as G,b as n,e as x,f as c,u as l,k as H,g as oe,m as ie,aB as it,aX as rt,F as ut,aI as B,aG as st,l as dt}from"./main-Bj_PB6s5.js";import{s as j,D as v,f as ct,g as pt,v as mt,h as gt,k as ft,d as U,m as ht,n as vt,w as bt,o as yt,p as xt,b as St,q as wt,r as Ct,x as re,u as ue}from"./data-grid-C8GNamHn.js";import{D as Dt}from"./load-panel-CeItpvu1.js";import{D as S}from"./tabs-CdRaARAq.js";import{e as Et}from"./export_data_grid-DKI6rBko.js";import{r as Y,b3 as _t,R as Bt,e as se,T as It,s as kt}from"./overlay-D806yEkz.js";import{av as Rt,aw as Tt,z as Ft,L as At}from"./m_select_box-0TR59q7t.js";import{ae as Ot}from"./m_row_dragging-GmrahOI4.js";import{n as N}from"./notify-BCaAv31e.js";import{e as Mt}from"./exceljs.min-DEGQzD6S.js";import{s as Nt}from"./FileSaver-CQu8bA20.js";import{_ as $t}from"./kullanici-ekle.vue_vue_type_script_setup_true_lang-D5GWI4PM.js";import{D as R}from"./button-BEmquVU0.js";import{p as Pt,a as k}from"./editor-DruvEpoL.js";import"./list.edit.decorator.swipe-K3CodoJw.js";import{S as $}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{V as zt}from"./VCardText-goZHKWPq.js";import{V as F,a as Kt}from"./VCard-B2I5A0HC.js";import{V as Vt}from"./VOverlay-r093P0Sf.js";import"./themes-DMm--Sro.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./validators-BwBNGiur.js";import"./helpers-BGv4x_9E.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-D_n2vM2X.js";import"./focus-Djh7PFNw.js";import"./VTextField-Dj6KtnGP.js";/* empty css                   */import"./VCounter-DHw8snC_.js";import"./VImg-_ZgxQwEA.js";import"./VField-DL5yshTU.js";import"./easing-Bybner-F.js";import"./VInput-ux1idZSg.js";import"./form-bE1gynqK.js";import"./forwardRefs-C-GTDzx5.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-vto8TvdF.js";import"./VSelect-CQIp4x5a.js";import"./VList-BfTPIXMY.js";import"./ssrBoot-aGiVkYwQ.js";import"./VAvatar-BSdY5OLx.js";import"./VDivider-CV-fhmfk.js";import"./dialog-transition-BmonbZYs.js";import"./VMenu-DPjKEaax.js";import"./scopeId-CiSpH_D5.js";import"./VCheckboxBtn-M-WJ3IN9.js";import"./VSelectionControl-C1eN5u96.js";import"./VChip-D9Rz8Grj.js";import"./VSlideGroup-CMlD8rO5.js";import"./VDialog-Dvp5uwBf.js";import"./VForm-BD22CMtE.js";import"./VRow-Cnqbp-qF.js";/* empty css              */import"./VCol-jTGJSinO.js";import"./m_popover-BTYeCCN0.js";import"./delay-DE4QCTKq.js";import"./lazy-CIcG9d43.js";const Lt="dx-list-reorder-handle-container",de="dx-list-reorder-handle",Gt="dx-list-item-ghost-reordering";class Ht extends Tt{_init(){const r=this._list,{grouped:b,itemDragging:m}=this._list.option();this._groupedEnabled=b,this._lockedDrag=!1;const _=this._groupedEnabled?"> .dx-list-items > .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-items > .dx-list-item";this._sortable=r._createComponent(r._scrollView.content(),Ot,et({component:r,contentTemplate:null,allowReordering:!1,filter:_,container:r.$element().get(0),dragDirection:m!=null&&m.group?"both":"vertical",handle:`.${de}`,dragTemplate:this._dragTemplate,onDragStart:i=>{this._dragStartHandler(i)},onDragChange:i=>{this._dragChangeHandler(i)},onReorder:i=>{this._reorderHandler(i)}},m))}afterRender(){this._sortable.update()}_dragTemplate(r){const b=Y(r.itemElement).clone().addClass(Gt).addClass("dx-state-hover");return _t(b,Bt(r.itemElement)),b}_dragStartHandler(r){this._lockedDrag&&(r.cancel=!0)}_dragChangeHandler(r){this._groupedEnabled&&le(r.fromIndex)&&le(r.toIndex)&&!this._sameParent(r.fromIndex,r.toIndex)&&(r.cancel=!0)}_sameParent(r,b){const m=this._list.getItemElementByFlatIndex(r);return this._list.getItemElementByFlatIndex(b).parent().get(0)===m.parent().get(0)}_reorderHandler(r){const b=this._list.getItemElementByFlatIndex(r.toIndex);this._list.reorderItem(Y(r.itemElement),b)}afterBag(r){const b=Y("<div>").addClass(de);se.on(b,It.down,(m=>{this._lockedDrag=!kt(m)})),se.on(b,Ft.name,{timeout:30},(m=>{m.cancel=!0,this._lockedDrag=!1})),r.$container.addClass(Lt).append(b)}}Rt("reorder","default",Ht);/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const pe={props:{accessKey:String,activeStateEnabled:Boolean,allowItemDeleting:Boolean,bounceEnabled:Boolean,collapsibleGroups:Boolean,dataSource:[Array,Object,String],disabled:Boolean,displayExpr:[Function,String],elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Number,String],hint:String,hoverStateEnabled:Boolean,indicateLoading:Boolean,itemDeleteMode:String,itemDragging:Object,itemHoldTimeout:Number,items:Array,itemTemplate:{},keyExpr:[Function,String],menuItems:Array,menuMode:String,nextButtonText:String,noDataText:String,onContentReady:Function,onDisposing:Function,onGroupRendered:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemDeleted:Function,onItemDeleting:Function,onItemHold:Function,onItemRendered:Function,onItemReordered:Function,onItemSwipe:Function,onOptionChanged:Function,onPageLoading:Function,onPullRefresh:Function,onScroll:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,onSelectionChanging:Function,pageLoadingText:String,pageLoadMode:String,pulledDownText:String,pullingDownText:String,pullRefreshEnabled:Boolean,refreshingText:String,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollByThumb:Boolean,scrollingEnabled:Boolean,searchEditorOptions:Object,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,searchValue:String,selectAllMode:String,selectAllText:String,selectByClick:Boolean,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,showScrollbar:String,showSelectionControls:Boolean,tabIndex:Number,useNativeScrolling:Boolean,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowItemDeleting":null,"update:bounceEnabled":null,"update:collapsibleGroups":null,"update:dataSource":null,"update:disabled":null,"update:displayExpr":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:indicateLoading":null,"update:itemDeleteMode":null,"update:itemDragging":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:keyExpr":null,"update:menuItems":null,"update:menuMode":null,"update:nextButtonText":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onGroupRendered":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemReordered":null,"update:onItemSwipe":null,"update:onOptionChanged":null,"update:onPageLoading":null,"update:onPullRefresh":null,"update:onScroll":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:onSelectionChanging":null,"update:pageLoadingText":null,"update:pageLoadMode":null,"update:pulledDownText":null,"update:pullingDownText":null,"update:pullRefreshEnabled":null,"update:refreshingText":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollByThumb":null,"update:scrollingEnabled":null,"update:searchEditorOptions":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:searchValue":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectByClick":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:showScrollbar":null,"update:showSelectionControls":null,"update:tabIndex":null,"update:useNativeScrolling":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=At,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},itemDragging:{isCollectionItem:!1,optionName:"itemDragging"},menuItem:{isCollectionItem:!0,optionName:"menuItems"},searchEditorOptions:{isCollectionItem:!1,optionName:"searchEditorOptions"}}}};Pt(pe);const jt=E(pe),me={emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}};k(me);const W=E(me);W.$_optionName="buttons";W.$_isCollectionItem=!0;W.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const ge={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};k(ge);const Ut=E(ge);Ut.$_optionName="cursorOffset";const fe={emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:showChevron":null,"update:template":null,"update:text":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,showChevron:Boolean,template:{},text:String,visible:Boolean}};k(fe);const he=E(fe);he.$_optionName="items";he.$_isCollectionItem=!0;const ve={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDropInsideItem":null,"update:allowReordering":null,"update:autoScroll":null,"update:boundary":null,"update:container":null,"update:cursorOffset":null,"update:data":null,"update:dragDirection":null,"update:dragTemplate":null,"update:dropFeedbackMode":null,"update:elementAttr":null,"update:filter":null,"update:group":null,"update:handle":null,"update:height":null,"update:itemOrientation":null,"update:moveItemOnDrop":null,"update:onAdd":null,"update:onDisposing":null,"update:onDragChange":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onRemove":null,"update:onReorder":null,"update:rtlEnabled":null,"update:scrollSensitivity":null,"update:scrollSpeed":null,"update:width":null},props:{allowDropInsideItem:Boolean,allowReordering:Boolean,autoScroll:Boolean,boundary:{},container:{},cursorOffset:[Object,String],data:{},dragDirection:String,dragTemplate:{},dropFeedbackMode:String,elementAttr:Object,filter:String,group:String,handle:String,height:[Number,String],itemOrientation:String,moveItemOnDrop:Boolean,onAdd:Function,onDisposing:Function,onDragChange:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onInitialized:Function,onOptionChanged:Function,onRemove:Function,onReorder:Function,rtlEnabled:Boolean,scrollSensitivity:Number,scrollSpeed:Number,width:[Number,String]}};k(ve);const be=E(ve);be.$_optionName="itemDragging";be.$_expectedChildren={cursorOffset:{isCollectionItem:!1,optionName:"cursorOffset"}};const ye={emits:{"update:isActive":null,"update:hoveredElement":null,"update:action":null,"update:text":null},props:{action:Function,text:String}};k(ye);const xe=E(ye);xe.$_optionName="menuItems";xe.$_isCollectionItem=!0;const Se={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Number,String]}};k(Se);const Yt=E(Se);Yt.$_optionName="options";const we={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttons":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isDirty":null,"update:isValid":null,"update:label":null,"update:labelMode":null,"update:mask":null,"update:maskChar":null,"update:maskInvalidMessage":null,"update:maskRules":null,"update:maxLength":null,"update:mode":null,"update:name":null,"update:onChange":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:showClearButton":null,"update:showMaskMode":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useMaskedValue":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,buttons:Array,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isDirty:Boolean,isValid:Boolean,label:String,labelMode:String,mask:String,maskChar:String,maskInvalidMessage:String,maskRules:{},maxLength:[Number,String],mode:String,name:String,onChange:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onKeyDown:Function,onKeyUp:Function,onOptionChanged:Function,onPaste:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,showClearButton:Boolean,showMaskMode:String,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useMaskedValue:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:String,valueChangeEvent:String,visible:Boolean,width:[Number,String]}};k(we);const Ce=E(we);Ce.$_optionName="searchEditorOptions";Ce.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"}};const qt={class:"informer"},Wt={class:"count"},Jt={class:"grids mt-4"},Xt={class:"list-container"},q="/api/users",ce="roleColorsV4",Qt=E({__name:"kullanicilar",setup(De){document.title="OFT - Kullanıcılar";const r=f([]),b=f([]),m=f(null),_=f(!1),i=f(null);f([]);const T=f([]),w=f([]),C=f([]),P=f(null),z=f(null),A=f(!0),J=f(0),K=f(null),V=f(!1),L=f(""),X=e=>{L.value=e,V.value=!0},Q=()=>{V.value=!1,L.value=""},Ee=e=>{if(e.rowType==="group")return;const t=e.row.data;i.value=t;let a=[];(i.value.roles||"").split(",").forEach(s=>{a.push({name:s.trim()})}),T.value=a,O()},O=async()=>{if(i.value)try{X("İzinler yükleniyor...");const{data:e}=await B.get(`/api/users/${i.value.id}/permissions`);C.value=e.assigned,w.value=e.available}finally{Q()}},_e=async e=>{var t,a,o,s;try{const d=e.itemData;if(!i.value||!d)return;C.value.push(d),w.value=w.value.filter(u=>u.id!==d.id),C.value=[...C.value],w.value=[...w.value],(a=(t=z.value)==null?void 0:t.instance)==null||a.refresh(),(s=(o=P.value)==null?void 0:o.instance)==null||s.refresh(),B.post(`/api/users/${i.value.id}/permissions/${d.id}`)}catch(d){console.error("İzin atama işlemi başarısız oldu:",d)}},Be=async e=>{var a,o,s,d;const t=e.itemData;!i.value||!t||(w.value.push(t),C.value=C.value.filter(u=>u.id!==t.id),C.value=[...C.value],w.value=[...w.value],(o=(a=z.value)==null?void 0:a.instance)==null||o.refresh(),(d=(s=P.value)==null?void 0:s.instance)==null||d.refresh(),await B.delete(`/api/users/${i.value.id}/permissions/${t.id}`))},Z=()=>{const e=r.value.map(t=>Number(t.id)||0);return e.length?Math.max(...e):0},Ie=async()=>{K.value=Z(),i.value=null,_.value=!0},ke=async()=>{if(!i.value){N("Lütfen düzenlemek için bir satır seçin","warning",1500);return}_.value=!0},Re=async()=>{if(!i.value)return;const e=$.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});e.fire({title:"Emin misiniz?",text:"İstersen sonra yine değiştirirsin :)",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(t=>{t.isConfirmed?(qe(i.value.id,i.value.AKTIF),e.fire({confirmButtonColor:"#88efb3",title:"Durum değiştirildi!",text:"Yoksa pişman mı oldun :)",icon:"success"})):t.dismiss===$.DismissReason.cancel&&e.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})})},Te=async()=>{if(!i.value)return;const e=$.mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-error"},buttonsStyling:!0});e.fire({title:"Emin misiniz?",text:"Şifre sıfırlanacak!!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#88efb3",cancelButtonColor:"#ed9595",reverseButtons:!0,confirmButtonText:"Evet, yap gitsin!",cancelButtonText:"Hayır, vazcaydım!"}).then(async t=>{t.isConfirmed?await je(i.value.id)?e.fire({confirmButtonColor:"#88efb3",title:"Şifre Sıfırlandı!",text:"pass1234",icon:"success"}):e.fire({confirmButtonColor:"#88efb3",title:"Hata",text:"Şifre sıfırlanamadı",icon:"error"}):t.dismiss===$.DismissReason.cancel&&e.fire({confirmButtonColor:"#88efb3",title:"Vazgeçildi",text:"Birşey yapmadım merak etmeyin :)",icon:"error"})})},Fe=async e=>{Le(e),await D()},Ae=async e=>{Ge(e),await D()},Oe=async e=>{var a,o;const t=(a=m.value)==null?void 0:a.instance;J.value=((o=t==null?void 0:t.getDataSource())==null?void 0:o.totalCount())??0},Me={placeholder:"Sütun ara"},D=async()=>{var e,t;try{X("Veri yükleniyor...");const a=await B.get(q,{params:{_:Date.now()}});r.value=a.data.data,b.value=a.data.kademeler,N("Veri başarıyla alındı","success",1500),await st(),(t=(e=m.value)==null?void 0:e.instance)==null||t.refresh()}catch(a){console.error("Error fetching data:",a),N("Kullanıcılar verisi alınamadı","error",1500)}finally{Q()}},Ne=(e,t)=>{const a=(t.data.roles||"").split(",");e.className="d-flex gap-2",a.forEach(o=>{const s=o.trim(),d=Ve(s),u=document.createElement("span");u.textContent=d.label,u.style.display="inline-block",u.style.padding="2px 8px",u.style.borderRadius="8px",u.style.backgroundColor=d.bg,u.style.color=d.fg,u.style.fontSize="12px",e.appendChild(u)})},M=new Map,ee=[10,28,45,60,80,100,120,140,160,180,200,220,240,260,280,300,320,340];function $e(){try{const e=localStorage.getItem(ce);if(!e)return;const t=JSON.parse(e);Object.entries(t).forEach(([a,o])=>M.set(a,o))}catch{}}function Pe(){try{const e={};M.forEach((t,a)=>{e[a]=t}),localStorage.setItem(ce,JSON.stringify(e))}catch{}}function te(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return Math.abs(t)}function ze(e,t,a){t/=100,a/=100;const o=(1-Math.abs(2*a-1))*t,s=o*(1-Math.abs(e/60%2-1)),d=a-o/2;let u=0,h=0,p=0;0<=e&&e<60?(u=o,h=s,p=0):60<=e&&e<120?(u=s,h=o,p=0):120<=e&&e<180?(u=0,h=o,p=s):180<=e&&e<240?(u=0,h=s,p=o):240<=e&&e<300?(u=s,h=0,p=o):(u=o,h=0,p=s);const g=Math.round((u+d)*255),y=Math.round((h+d)*255),I=Math.round((p+d)*255);return{r:g,g:y,b:I}}function Ke(e,t,a){return(e*299+t*587+a*114)/1e3}function Ve(e){const t=e||"—",a=M.get(t);if(a)return{...a,label:e||t};const o=ee[te(t)%ee.length],s=46,d=80,u=te(t),h=u%11-5,p=Math.floor(u/7)%9-4,g=ne(s+h,40,56),y=ne(d+p,76,84),I=`hsl(${o}, ${g}%, ${y}%)`,{r:Je,g:Xe,b:Qe}=ze(o,g,y),Ze=Ke(Je,Xe,Qe)>=140?"#111":"#fff",ae={bg:I,fg:Ze};return M.set(t,ae),Pe(),{...ae,label:e||t}}$e();function ne(e,t,a){return Math.min(a,Math.max(t,e))}const Le=e=>{e.promise=new Promise(async(t,a)=>{try{const o={...e.oldData,...e.newData};await B.put(`${q}/${e.key}`,o),await D(),e.component.cancelEditData(),t()}catch(o){console.error("Error updating data:",o),a()}})},Ge=e=>{e.promise=new Promise(async(t,a)=>{try{await B.delete(`${q}/${e.key}`),await D(),e.component.cancelEditData(),t()}catch(o){console.error("Error deleting data:",o),a()}})};tt(async()=>{await D();const e=async t=>{var d,u,h;const a=t.detail,o=(a==null?void 0:a.id)??((d=i.value)==null?void 0:d.id);if(!o)return;await D();const s=r.value.find(p=>p.id===o);if(s){i.value=s;const p=(s.roles||"").split(",");T.value=p.map(g=>({name:g.trim()})).filter(g=>g.name),await O(),(h=(u=m.value)==null?void 0:u.instance)==null||h.option("focusedRowKey",o)}};window.addEventListener("user-updated",e)}),nt(_,(e,t)=>{!e&&t&&(async()=>{var o,s,d,u,h;await D();const a=Z();if(K.value!==null&&a>K.value){const p=r.value.find(g=>Number(g.id)===a);if(p){i.value=p,(s=(o=m.value)==null?void 0:o.instance)==null||s.option("focusedRowKey",p.id),N("Kullanıcı eklendi","success",1500);const g=(p.roles||"").split(",");T.value=g.map(y=>({name:y.trim()})).filter(y=>y.name),await O()}}else{const p=(d=i.value)==null?void 0:d.id;if(p){const g=r.value.find(y=>y.id===p);if(g){i.value=g;const y=(g.roles||"").split(",");T.value=y.map(I=>({name:I.trim()})).filter(I=>I.name),await O(),(h=(u=m.value)==null?void 0:u.instance)==null||h.option("focusedRowKey",p)}}}})()});const He=at(()=>{const e=i.value||{};return{id:e.id||0,name:e.name||"",email:e.email||"",unvan:e.unvan||"",ismerkezi:e.ismerkezi_id||"",istasyon:e.istasyon_id||"",proses:e.proses||"",tip:e.tip||"",roles:e.roles||"",firma_id:e.co_id||"",firma_adi:e.co_name||""}}),je=async e=>{try{return await B.put(`/api/users/sifresifirla/${e}`),!0}catch(t){return console.error("Şifre sıfırlama hatası:",t),!1}},Ue=()=>{A.value=!A.value},Ye=lt("userData"),qe=async(e,t)=>{try{const a=await B.put(`/api/users/durumdegistir/${e}`,{userID:Ye.value.id,aktif:parseInt(t)});await D()}catch(a){console.error("Durum değiştirilirken hata oluştu: ",a)}},We=e=>{const t=new Mt.Workbook,a=t.addWorksheet("Kullanicilar");Et({component:e.component,worksheet:a,autoFilterEnabled:!0}).then(()=>{t.xlsx.writeBuffer().then(o=>{Nt(new Blob([o],{type:"application/octet-stream"}),"Kullanicilar.xlsx")})}),e.cancel=!0};return(e,t)=>(G(),ot(ut,null,[n(F,{class:"mt-0 pa-0 pt-0"},{default:c(()=>[n(zt,{class:"pa-1 ma-2 mt-0"},{default:c(()=>[n(l(j),{id:"gridusers","data-source":r.value,"key-expr":"id","show-borders":!0,ref_key:"dataGridRef",ref:m,onRowUpdating:Fe,onRowRemoving:Ae,"focused-row-enabled":!0,"column-auto-width":!1,"row-alternation-enabled":!0,onExporting:We,"allow-column-reordering":!0,onFocusedRowChanged:Ee,"allow-column-resizing":!0,"column-resizing-mode":"widget",onContentReady:Oe},{aktifTemplate:c(({data:a})=>[a.value==="0"||a.value===0||a.value===!1?(G(),oe(ie,{key:0,size:"20",icon:"tabler-x"})):(G(),oe(ie,{key:1,size:"20",icon:"tabler-check"}))]),totalRecordTemplate:c(()=>[x("div",qt,[x("div",Wt,H(J.value),1),t[2]||(t[2]=x("span",null,"Toplam Kayıt",-1))])]),yenileTemplate:c(()=>[n(l(R),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:c(()=>t[3]||(t[3]=[x("div",{style:{display:"flex","align-items":"center"}},[x("i",{class:"dx-icon dx-icon-refresh"}),x("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),collapseTemplate:c(()=>[n(l(R),{icon:A.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:Ue},null,8,["icon"])]),addUserTemplate:c(()=>[n(l(R),{"styling-mode":"text",hint:"Kullanıcı Ekle",text:"Kullanıcı Ekle",onClick:Ie})]),editUserTemplate:c(()=>[n(l(R),{"styling-mode":"text",disabled:!i.value,hint:"Kullanıcı Düzenle",text:"Düzenle",onClick:ke},null,8,["disabled"])]),toggleActiveTemplate:c(()=>[n(l(R),{"styling-mode":"text",disabled:!i.value,hint:"Aktif/Pasif Yap",text:"Aktif/Pasif",onClick:Re},null,8,["disabled"])]),resetPasswordTemplate:c(()=>[n(l(R),{"styling-mode":"text",disabled:!i.value,hint:"Şifreyi Sıfırla",text:"Şifreyi Sıfırla",onClick:Te},null,8,["disabled"])]),default:c(()=>[n(l(v),{"data-field":"AKTIF",caption:"AKTİF","data-type":"boolean",visible:!0,width:70,"cell-template":"aktifTemplate"}),n(l(v),{"data-field":"id",caption:"ID","allow-editing":!1,visible:!0,width:"70"}),n(l(v),{"data-field":"name",caption:"İSİM","allow-editing":!0,visible:!0,"validation-rules":[{type:"required"}],width:"170"}),n(l(v),{"data-field":"unvan",caption:"ÜNVAN","validation-rules":[{type:"required"}],width:"150"}),n(l(v),{"data-field":"email",caption:"E-POSTA","allow-editing":!1,visible:!0,width:"150"}),n(l(v),{"data-field":"email_verified_at",caption:"ONAY TARİHİ","data-type":"date","allow-editing":!1,width:150,visible:!0,alignment:"center",format:{formatter:a=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(a)).replace(/\//g,".")}},null,8,["format"]),n(l(v),{"data-field":"roles",caption:"ROLLER","cell-template":Ne,width:"350"}),n(l(v),{"data-field":"co_id",caption:"Firma ID",width:"200"}),n(l(v),{"data-field":"co_name",caption:"Firma Adı",width:"200"}),n(l(v),{"data-field":"proses",caption:"PROSES",width:"200"}),n(l(v),{"data-field":"tip",caption:"KADEME","validation-rules":[{type:"required"}],width:"150"}),n(l(v),{"data-field":"ismerkezi_id",caption:"İş Merkezi",width:"150"}),n(l(v),{"data-field":"istasyon_id",caption:"İş İstasyonu",width:"150"}),n(l(ct),{"auto-expand-all":A.value},null,8,["auto-expand-all"]),n(l(pt),{visible:!0}),n(l(mt),{"allow-updating":!1,"allow-adding":!1,"allow-deleting":!1,mode:"row","use-icons":!0}),n(l(gt),{visible:!0}),n(l(ft),{visible:!0,width:240,placeholder:"Ara..."}),n(l(Dt),{enabled:!0}),n(l(U),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),n(l(ht),{enabled:!0,"allow-export-selected-data":!1}),n(l(vt),{height:"540px",enabled:!0,mode:"select",title:"Sütun Seçici"},{default:c(()=>[n(l(bt),{my:"right top",at:"right bottom",of:".dx-datagrid-column-chooser-button"}),n(l(yt),{enabled:!0,"editor-options":Me}),n(l(xt),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),n(l(St),null,{default:c(()=>[n(l(S),{location:"before",name:"groupPanel"}),n(l(S),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),n(l(S),{location:"before",template:"totalRecordTemplate"}),n(l(S),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:t[0]||(t[0]=a=>D())}),n(l(S),{location:"after","locate-in-menu":"auto",template:"addUserTemplate"}),n(l(S),{location:"after","locate-in-menu":"auto",template:"editUserTemplate"}),n(l(S),{location:"after","locate-in-menu":"auto",template:"resetPasswordTemplate"}),n(l(S),{name:"exportButton"}),n(l(S),{name:"columnChooserButton"}),n(l(S),{name:"searchPanel"})]),_:1}),n(l(wt),null,{default:c(()=>[n(l(Ct),{"align-by-column":!0,column:"id","summary-type":"count","display-format":"{0} adet",alignment:"right"})]),_:1})]),_:1},8,["data-source"])]),_:1})]),_:1}),x("div",Jt,[x("div",Xt,[n(F,{class:"pa-2"},{default:c(()=>[n(Kt,null,{default:c(()=>t[4]||(t[4]=[it("Atanmış Roller")])),_:1,__:[4]}),t[5]||(t[5]=x("hr",null,null,-1)),n(l(jt),{"data-source":T.value},{item:c(({data:a})=>[x("div",null,[x("div",null,H(a.name),1)])]),_:1},8,["data-source"])]),_:1,__:[5]})]),n(F,{class:"perm-card"},{default:c(()=>[n(l(j),{class:"perm-grid","data-source":w.value,"show-borders":!0,"repaint-changes-only":!0,"key-expr":"id",height:"100%",ref_key:"availableGridRef",ref:P},{default:c(()=>[n(l(re),{enabled:!1}),n(l(U),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),n(l(ue),{group:"permissionsGroup","on-add":Be}),n(l(v),{"data-field":"name",caption:"Atanmamış İzinler"})]),_:1},8,["data-source"])]),_:1}),n(F,{class:"perm-card"},{default:c(()=>[n(l(j),{class:"perm-grid","data-source":C.value,"show-borders":!0,"repaint-changes-only":!0,"key-expr":"id",height:"100%",ref_key:"assignedGridRef",ref:z},{default:c(()=>[n(l(re),{enabled:!1}),n(l(U),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),n(l(ue),{group:"permissionsGroup","on-add":_e}),n(l(v),{"data-field":"name",caption:"Atanmış İzinler"})]),_:1},8,["data-source"])]),_:1})]),n($t,{isDrawerOpen:_.value,"onUpdate:isDrawerOpen":t[1]||(t[1]=a=>_.value=a),userData:He.value},null,8,["isDrawerOpen","userData"]),n(Vt,{persistent:"",contained:"","model-value":V.value,class:"align-center justify-center"},{default:c(()=>[n(F,{class:"pa-4 d-flex align-center justify-center"},{default:c(()=>[n(rt,{indeterminate:"",color:"primary",class:"me-3"}),x("span",null,H(L.value),1)]),_:1})]),_:1},8,["model-value"])],64))}}),na=dt(Qt,[["__scopeId","data-v-705d9b92"]]);export{na as default};
