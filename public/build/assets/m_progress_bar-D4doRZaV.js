import{a$ as o,d9 as l}from"./main-BsBPzaN6.js";import{s as a,au as r,o as _,q as p}from"./dom_component-BOMsNA7g.js";import{E as h}from"./editor-658b01uO.js";class d extends h{_getDefaultOptions(){return o({},super._getDefaultOptions(),{min:0,max:100,value:0})}_initMarkup(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),super._initMarkup()}_render(){super._render(),this._setRangeStyles(this._rangeStylesConfig())}_renderWrapper(){this._$wrapper=a("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())}_renderContainer(){this._$bar=a("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)}_renderRange(){this._$range=a("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)}_renderValue(){const{value:t,min:e,max:s}=this.option();if(e>s)return;if(t<e){this.option("value",e),this._currentRatio=0;return}if(t>s){this.option("value",s),this._currentRatio=1;return}const i=e===s?0:(t-e)/(s-e);this._needPreventAnimation||this._setRangeStyles({width:100*i+"%"}),this.setAria({valuemin:this.option("min"),valuemax:s,valuenow:t}),this._currentRatio=i}_rangeStylesConfig(){return{width:100*this._currentRatio+"%"}}_setRangeStyles(t){if(r.stop(this._$range),!t){this._$range.css({width:0});return}this._needPreventAnimation||!_()||r.animate(this._$range,{type:"custom",duration:100,to:t})}_optionChanged(t){switch(t.name){case"value":this._renderValue(),super._optionChanged(t);break;case"max":case"min":this._renderValue();break;default:super._optionChanged(t)}}_dispose(){r.stop(this._$range),super._dispose()}}p("dxTrackBar",d);const n="dx-progressbar-animating-segment";class g extends d{_getDefaultOptions(){return o({},super._getDefaultOptions(),{value:0,statusFormat:t=>`Progress: ${Math.round(100*t)}%`,showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:t=>t.platform==="android",options:{_animatingSegmentCount:2}}])}_toggleReadOnlyState(){this.setAria("readonly",void 0)}_initMarkup(){this._renderStatus(),this._createCompleteAction(),super._initMarkup(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),a("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range");const{showStatus:t}=this.option();this._toggleStatus(t)}_useTemplates(){return!1}_createCompleteAction(){this._completeAction=this._createActionByOption("onComplete")}_renderStatus(){this._$status=a("<div>").addClass("dx-progressbar-status")}_renderIndeterminateState(){this._$segmentContainer=a("<div>").addClass("dx-progressbar-animating-container");const{_animatingSegmentCount:t}=this.option();for(let e=0;e<t;e+=1)a("<div>").addClass(n).addClass(`${n}-${e+1}`).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)}_toggleStatus(t){const{statusPosition:e}=this.option(),s=e.split(" ");t?s[0]==="top"||s[0]==="left"?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()}_togglePositionClass(){const{statusPosition:t}=this.option(),e=t.split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");let s=`dx-position-${e[0]}`;e[1]&&(s+=`-${e[1]}`),this._$wrapper.addClass(s)}_toggleIndeterminateState(t){if(t)this._renderIndeterminateState(),this._$bar.toggle(!1);else{var e;this._$bar.toggle(!0),(e=this._$segmentContainer)===null||e===void 0||e.remove(),delete this._$segmentContainer}}_renderValue(){const{value:t,max:e}=this.option();if(!t&&t!==0){this._toggleIndeterminateState(!0);return}this._$segmentContainer&&this._toggleIndeterminateState(!1),t===e&&this._completeAction(),super._renderValue(),this._setStatus()}_setStatus(){const{statusFormat:t}=this.option();let e=t;l(e)?e=e.bind(this):e=function(i){return i};const s=e(this._currentRatio,this.option("value"));this._$status.text(s)}_dispose(){this._$status.remove(),super._dispose()}_optionChanged(t){const{name:e,value:s}=t;switch(e){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(s);break;case"statusPosition":{const{showStatus:i}=this.option();this._toggleStatus(i);break}case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:super._optionChanged(t)}}}p("dxProgressBar",g);export{g as P};
