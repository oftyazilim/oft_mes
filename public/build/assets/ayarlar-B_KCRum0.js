import{d as w,r as o,i as z,g as f,f as i,s as y,b as l,e as n,y as A,T as V,aF as d,m as g,cU as F,c as k,ay as T,p as _,F as E,o as p,x as K}from"./main-DopL9iyZ.js";import{V as N,a as h}from"./VCard-DIuJo35j.js";import{V as I}from"./VSpacer-BAo8z3qx.js";import{V as D}from"./VTextField-c0np_KVY.js";import{V as S}from"./VChip-CsMY07Mk.js";import{V as U}from"./VAlert-rP_kwPff.js";import{V as $}from"./VDivider-DQNCioR7.js";import{V as G}from"./VCardText-CFYfhkGa.js";import"./createSimpleFunctional-Ba0ASwBN.js";import"./VAvatar-Bdvlyw4p.js";import"./VImg-BaqRdAYZ.js";import"./index-BcYuODK2.js";/* empty css              *//* empty css                   */import"./VCounter-CeaHY_Np.js";import"./VField-66_obhZm.js";import"./focus-BRH5Qagk.js";import"./easing-Bybner-F.js";import"./VInput-Cg3B-kgV.js";import"./form-AJMHZSRF.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-rFerqEuy.js";const H={class:"d-flex gap-2 align-center",style:{"max-inline-size":"560px"}},L={class:"mt-4 d-flex flex-wrap gap-2"},M={key:0,class:"text-medium-emphasis"},Y=w({__name:"ayarlar",setup(j){const s=o([]),u=o(!1),c=o(!1),m=o(""),r=o(null);z(async()=>{u.value=!0,r.value=null;try{const{data:e}=await y.get("/api/settings/notifications/feedback");s.value=Array.isArray(e==null?void 0:e.recipients)?e.recipients:[]}catch(e){r.value=(e==null?void 0:e.message)||"Yükleme hatası"}finally{u.value=!1}});const v=()=>{const e=m.value.trim();if(!e)return;const a=e.split(/[;,\s]+/).map(t=>t.trim()).filter(Boolean);for(const t of a)x(t)&&!s.value.includes(t)&&s.value.push(t);m.value=""},x=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),b=e=>{s.value.splice(e,1)},C=async()=>{var e,a;c.value=!0,r.value=null;try{await y.put("/api/settings/notifications/feedback",{recipients:s.value})}catch(t){r.value=((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)||(t==null?void 0:t.message)||"Kaydetme hatası"}finally{c.value=!1}};return(e,a)=>(p(),f(N,{loading:u.value},{default:i(()=>[l(h,{class:"d-flex align-center gap-3"},{default:i(()=>[l(A,{icon:"tabler-bell",color:"primary"}),a[2]||(a[2]=n("span",null,"Bildirim Ayarları",-1)),l(I),l(V,{color:"primary",loading:c.value,onClick:C},{default:i(()=>a[1]||(a[1]=[d("Kaydet")])),_:1,__:[1]},8,["loading"])]),_:1,__:[2]}),l(G,null,{default:i(()=>[a[4]||(a[4]=n("p",{class:"text-body-2"}," Geri bildirimler için e-posta alıcılarını yönetin. Birden fazla e-posta ekleyebilirsiniz. ",-1)),n("div",H,[l(D,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),label:"E-posta ekle",density:"compact",onKeyup:F(v,["enter"]),"hide-details":""},null,8,["modelValue"]),l(V,{variant:"tonal",onClick:v},{default:i(()=>a[3]||(a[3]=[d("Ekle")])),_:1,__:[3]})]),n("div",L,[(p(!0),k(E,null,T(s.value,(t,B)=>(p(),f(S,{key:t,closable:"","onClick:close":J=>b(B),color:"primary",variant:"tonal"},{default:i(()=>[d(_(t),1)]),_:2},1032,["onClick:close"]))),128)),s.value.length?g("",!0):(p(),k("span",M,"Henüz alıcı eklenmedi."))]),r.value?(p(),f(U,{key:0,type:"error",class:"mt-4",density:"compact"},{default:i(()=>[d(_(r.value),1)]),_:1})):g("",!0),l($,{class:"my-6"}),a[5]||(a[5]=n("div",{class:"text-caption"}," İpucu: Birden fazla alıcıyı virgül, noktalı virgül veya boşlukla ayırarak tek seferde ekleyebilirsiniz. ",-1))]),_:1,__:[4,5]})]),_:1},8,["loading"]))}}),ve=K(Y,[["__scopeId","data-v-cae55c3b"]]);export{ve as default};
