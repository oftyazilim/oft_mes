import{_ as ni}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BjsvpkXs.js";import{_ as ii}from"./AppSelect.vue_vue_type_script_setup_true_lang-Ca3rjAQP.js";import{dm as oi,es as ai,dg as li,db as Kt,d as x,r as v,X as F,G as si,aZ as $e,f8 as ri,w as De,af as ui,b4 as di,a$ as B,c as H,o as G,l as Rt,e as a,aI as ci,b as l,v as g,f as d,I as pi,t as _,m as y,b8 as Pe,x as Qe,d3 as X,b0 as J,ae as E,Z as Be,F as me,bb as et}from"./main-V5EO4bnM.js";import{u as mi}from"./pageTitle-DZ3lwo_g.js";import{p as fi,a as w}from"./editor-D5QZv2de.js";import{a as vi}from"./overlay-CcHqXnwZ.js";import{B as hi,a as gi,b as _i,c as bi,d as yi,e as xi,f as wi}from"./base_range_container-C1n2DDRp.js";import{p as ki,s as Ht,Y as Ci,v as Gt,n as Si}from"./m_base_widget-B-FmAptq.js";import{a as V,l as Ni,D as Ti}from"./data-grid-tCINHJKl.js";import{D as Ii,a as Di}from"./popup-D0IbrKi_.js";import{n as I}from"./notify-DTXj7FBj.js";import{V as O}from"./VCol-BOvDuIU5.js";import{V as fe,a as ve,b as tt}from"./VCard-BP8zXEbp.js";import{V as ee}from"./VRow-C6KOjiEi.js";import{V as Ai}from"./VSwitch-gluvub6g.js";import{V as nt}from"./VCardText-iS_NmLX9.js";import{V as $t}from"./VTextField-BWickmOz.js";import{V as it}from"./VSpacer-BtyYafww.js";import{V as ot}from"./VDialog-YUBzDKW4.js";import{_ as Ei}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-BXza71jj.js";import"./VTextarea-fxOAsLFF.js";/* empty css                   */import"./VCounter-DgPkw2o-.js";import"./VImg-B1Egn-l0.js";import"./VField-BfRKWj98.js";import"./easing-Bybner-F.js";import"./VInput-46tJoMeS.js";import"./form-Cqj1JXaW.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-KbKprIlV.js";import"./VList-Dl3TTpSr.js";import"./ssrBoot-C6AaTKs_.js";import"./VAvatar-BzUBYjyu.js";import"./VDivider-C2LWNXzi.js";import"./dialog-transition-DAvayupy.js";import"./VMenu-DX9VMlKS.js";import"./VOverlay-DVCcc7ox.js";import"./delay-RRfhougJ.js";import"./lazy-d6o7y8ym.js";import"./scopeId-D-Ye_Yf0.js";import"./VCheckboxBtn-CsWtAgmY.js";import"./VSelectionControl-DX2yMV5P.js";import"./VChip-CD-1VZvN.js";import"./VSlideGroup-CnOnnuiS.js";import"./m_row_dragging-Cw4NaJwP.js";import"./m_select_box-vuYCiFke.js";import"./themes-BLijVOeX.js";/* empty css              */const at={dispose:function(){this._centerTemplateGroup.linkOff().dispose()},members:{_renderCenterTemplate(){const t=this.option("centerTemplate"),i=this._centerTemplateGroup.clear();if(!t)return;i.attr({visibility:"hidden"});const o=this._getCenter();this._getTemplate(t).render({model:this,container:i.element,onRendered:()=>{const s=i,r=s.getBBox(),c=r.x+r.width/2,u=r.y+r.height/2;s.move(o.x-c,o.y-u),s.attr({visibility:"visible"})}})}},customize(t){t.addChange({code:"CENTER_TEMPLATE",handler:function(){this._renderCenterTemplate()},option:"centerTemplate"})}},Oi={name:"center_template_gauge",init:oi,dispose:at.dispose,extenders:{_initCore(){this._createCenterTemplateGroup()},_renderContent(){const t=ki(this._themeManager._font);this._centerTemplateGroup.css(t),this._requestChange(["CENTER_TEMPLATE"])},_updateExtraElements(){this._requestChange(["CENTER_TEMPLATE"])}},members:{_renderCenterTemplate:at.members._renderCenterTemplate,_createCenterTemplateGroup(){this._centerTemplateGroup=this._renderer.g().attr({class:"dxg-hole-template"}).linkOn(this._renderer.root,"center-template").linkAppend()}},customize:at.customize},zi={gauge:Oi},z=Number,Ee=Ht,qt=Ci;function st(t,i){return t&&t.radius-i<=0&&(t.radius=i+1),t}const Ut=hi.inherit({_move:function(){const t=this._options,i=qt(this._actualPosition);this._rootElement.rotate(i,t.x,t.y),this._trackerElement&&this._trackerElement.rotate(i,t.x,t.y)},_isEnabled:function(){return this._options.width>0},_isVisible:function(t){return t.radius-z(this._options.indentFromCenter)>0},_getTrackerSettings:function(){const t=this._options,i=this._getRadius(),o=this._getIndentFromCenter(),s=t.x,r=t.y-(i+o)/2;let c=t.width/2,u=(i-o)/2;return c>10||(c=10),u>10||(u=10),{points:[s-c,r-u,s-c,r+u,s+c,r+u,s+c,r-u]}},_render:function(){this._renderPointer()},_clearPointer:function(){delete this._element},_clear:function(){this._clearPointer()},_getIndentFromCenter:function(t){return Number(this._options.indentFromCenter)||0},_getRadius:function(){return 0},measure:function(t){const i={max:t.radius};return this._options.indentFromCenter<0&&(i.inverseHorizontalOffset=i.inverseVerticalOffset=-z(this._options.indentFromCenter)),i},getTooltipParameters:function(){const t=this._options,i=Ee(this._actualPosition),o=(this._getRadius()+this._getIndentFromCenter())/2;return{x:t.x+i.cos*o,y:t.y-i.sin*o,value:this._currentValue,color:t.color,offset:t.width/2}}}),rt=Ut.inherit({_isVisible:function(t){const i=this._adjustOffset(Number(this._options.indentFromCenter),t.radius),o=this._adjustOffset(Number(this._options.offset),t.radius);return t.radius-i-o>0},getOffset:function(){return 0},_adjustOffset:function(t,i){const o=Number(this._options.beginAdaptingAtRadius),s=i/o;return s<1&&(t=Math.floor(t*s)),t||0},_getIndentFromCenter:function(t){return this._adjustOffset(Number(this._options.indentFromCenter),this._options.radius)},_getRadius:function(){const t=this._options;return t.radius-this._adjustOffset(Number(t.offset),t.radius)},_renderSpindle:function(){const t=this,i=t._options,o=i.radius,s=2*this._adjustOffset(z(i.spindleSize)/2,o);let r=2*this._adjustOffset(z(i.spindleGapSize)/2,o)||0;r>0&&(r=r<=s?r:s),s>0&&(t._spindleOuter=t._spindleOuter||t._renderer.circle().append(t._rootElement),t._spindleInner=t._spindleInner||t._renderer.circle().append(t._rootElement),t._spindleOuter.attr({class:"dxg-spindle-border",cx:i.x,cy:i.y,r:s/2}),t._spindleInner.attr({class:"dxg-spindle-hole",cx:i.x,cy:i.y,r:r/2,fill:i.containerBackgroundColor}))},_render:function(){this.callBase(),this._renderSpindle()},_clear:function(){this.callBase(),delete this._spindleOuter,delete this._spindleInner}}),Wt=rt.inherit({_renderPointer:function(){const t=this._options,i=t.y-this._getRadius(),o=t.y-this._getIndentFromCenter(),s=t.x-t.width/2,r=s+z(t.width);this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[s,o,s,i,r,i,r,o]})}}),Mi=rt.inherit({_renderPointer:function(){const t=this._options,i=t.y-this._getRadius(),o=t.y-this._getIndentFromCenter(),s=t.x-t.width/2,r=t.x+t.width/2;this._element=this._element||this._renderer.path([],"area").append(this._rootElement),this._element.attr({points:[s,o,t.x,i,r,o]})}}),Fi=rt.inherit({_renderPointer:function(){const t=this._options,i=t.x-t.width/2,o=t.x+t.width/2,s=t.y-this._getRadius(),r=t.y-this._getIndentFromCenter(),c=z(t.secondFraction)||0;let u,b;c>=1?u=b=r:c<=0?u=b=s:(b=s+(r-s)*c,u=b+z(t.space)),this._firstElement=this._firstElement||this._renderer.path([],"area").append(this._rootElement),this._spaceElement=this._spaceElement||this._renderer.path([],"area").append(this._rootElement),this._secondElement=this._secondElement||this._renderer.path([],"area").append(this._rootElement),this._firstElement.attr({points:[i,r,i,u,o,u,o,r]}),this._spaceElement.attr({points:[i,u,i,b,o,b,o,u],class:"dxg-hole",fill:t.containerBackgroundColor}),this._secondElement.attr({points:[i,b,i,s,o,s,o,b],class:"dxg-part",fill:t.secondColor})},_clearPointer:function(){delete this._firstElement,delete this._secondElement,delete this._spaceElement}}),Vi=Ut.inherit({_isEnabled:function(){return this._options.length>0&&this._options.width>0},_isVisible:t=>!0,resize(t){return this.callBase(st(t,0))},_render:function(){const t=this._options,i=t.x,o=t.y-t.radius,s=t.width/2||0,r=o-z(t.length);this._element=this._element||this._renderer.path([],"area").append(this._rootElement);const c={points:[i,o,i-s,r,i+s,r],stroke:"none","stroke-width":0,"stroke-linecap":"square"};t.space>0&&(c["stroke-width"]=Math.min(t.space,t.width/4)||0,c.stroke=c["stroke-width"]>0&&t.containerBackgroundColor||"none"),this._element.attr(c).sharp()},_clear:function(){delete this._element},_getTrackerSettings:function(){const t=this._options,i=t.x,o=t.y-t.radius-t.length/2;let s=t.width/2,r=t.length/2;return s>10||(s=10),r>10||(r=10),{points:[i-s,o-r,i-s,o+r,i+s,o+r,i+s,o-r]}},measure:function(t){return{min:t.radius,max:t.radius+z(this._options.length)}},getTooltipParameters:function(){const t=this._options,i=Ee(this._actualPosition),o=t.radius+t.length/2,s=this.callBase();return s.x=t.x+i.cos*o,s.y=t.y-i.sin*o,s.offset=t.length/2,s}}),Ri=gi.inherit({_isEnabled:function(){return!0},_isVisible:t=>!0,resize(t){return this.callBase(st(t,0))},_getTextCloudOptions:function(){const t=Ee(this._actualPosition),i=Gt(this._actualPosition);return{x:this._options.x+t.cos*this._options.radius,y:this._options.y-t.sin*this._options.radius,type:i>270?"left-top":i>180?"top-right":i>90?"right-bottom":"bottom-left"}},measure:function(t){const i=z(this._options.arrowLength)||0;this._measureText();const o=this._textFullHeight+i,s=this._textFullWidth+i;return{min:t.radius,max:t.radius,horizontalOffset:s,verticalOffset:o,inverseHorizontalOffset:s,inverseVerticalOffset:o}}}),$i=_i.inherit({_isEnabled:function(){return this._options.size>0},_isVisible:t=>!0,resize(t){return this.callBase(st(t,z(this._options.size)))},_createBarItem:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"}).append(this._rootElement)},_createTracker:function(){return this._renderer.arc().attr({"stroke-linejoin":"round"})},_setBarSides:function(){this._maxSide=this._options.radius,this._minSide=this._maxSide-z(this._options.size)},_getSpace:function(){const t=this._options;return t.space>0?180*t.space/t.radius/Math.PI:0},_isTextVisible:function(){return(this._options.text||{}).indent>0},_setTextItemsSides:function(){const t=this._options,i=z(t.text.indent);this._lineFrom=t.y-t.radius,this._lineTo=this._lineFrom-i,this._textRadius=t.radius+i},_getPositions:function(){const t=this._basePosition,i=this._actualPosition;let o,s;return t>=i?(o=t,s=i):(o=i,s=t),{start:this._startPosition,end:this._endPosition,main1:o,main2:s,back1:Math.min(o+this._space,this._startPosition),back2:Math.max(s-this._space,this._endPosition)}},_buildItemSettings:function(t,i){return{x:this._options.x,y:this._options.y,innerRadius:this._minSide,outerRadius:this._maxSide,startAngle:i,endAngle:t}},_updateTextPosition:function(){const t=Ee(this._actualPosition);let i=this._options.x+this._textRadius*t.cos,o=this._options.y-this._textRadius*t.sin;i+=t.cos*this._textWidth*.6,o-=t.sin*this._textHeight*.6,this._text.attr({x:i,y:o+this._textVerticalOffset})},_updateLinePosition:function(){const t=this._options.x;let i,o;this._basePosition>this._actualPosition?(i=t-2,o=t):this._basePosition<this._actualPosition?(i=t,o=t+2):(i=t-1,o=t+1),this._line.attr({points:[i,this._lineFrom,i,this._lineTo,o,this._lineTo,o,this._lineFrom]}).rotate(qt(this._actualPosition),t,this._options.y).sharp()},_getTooltipPosition:function(){const t=Ee((this._basePosition+this._actualPosition)/2),i=(this._minSide+this._maxSide)/2;return{x:this._options.x+t.cos*i,y:this._options.y-t.sin*i}},measure:function(t){const i=this,o={min:t.radius-z(i._options.size),max:t.radius};return i._measureText(),i._hasText&&(o.max+=z(i._options.text.indent),o.horizontalOffset=i._textWidth,o.verticalOffset=i._textHeight),o}}),he=Number,Pt=Math.max,Pi=bi.inherit({_processOptions:function(){const t=this;switch(t._inner=t._outer=0,Si(t._options.orientation)){case"inside":t._inner=1;break;case"center":t._inner=t._outer=.5;break;default:t._outer=1}},_isVisible:function(t){let i=this._options.width;return i=he(i)||Pt(he(i.start),he(i.end)),t.radius-this._inner*i>0},_createRange:function(t,i){const o=(t.startWidth+t.endWidth)/2;return this._renderer.arc(i.x,i.y,i.radius-this._inner*o,i.radius+this._outer*o,this._translator.translate(t.end),this._translator.translate(t.start)).attr({"stroke-linejoin":"round"})},measure:function(t){let i=this._options.width;return i=he(i)||Pt(he(i.start),he(i.end)),{min:t.radius-this._inner*i,max:t.radius+this._outer*i}}}),Bt=isFinite,Lt=Gt,jt=Ht,Bi=Math.abs,L=Math.max,Ae=Math.min,lt=Math.round,Li=li,ji=Math.PI;function Ki(t,i){const o=jt(t),s=jt(i),r=o.cos,c=o.sin,u=s.cos,b=s.sin;return{left:c<=0&&b>=0||c<=0&&b<=0&&r<=u||c>=0&&b>=0&&r>=u?-1:Ae(r,u,0),right:c>=0&&b<=0||c>=0&&b>=0&&r>=u||c<=0&&b<=0&&r<=u?1:L(r,u,0),up:r<=0&&u>=0||r<=0&&u<=0&&c>=b||r>=0&&u>=0&&c<=b?-1:-L(c,b,0),down:r>=0&&u<=0||r>=0&&u>=0&&c<=b||r<=0&&u<=0&&c>=b?1:-Ae(c,b,0)}}const _e=yi.inherit({_rootClass:"dxg-circular-gauge",_factoryMethods:{rangeContainer:"createCircularRangeContainer",indicator:"createCircularIndicator"},_gridSpacingFactor:17,_scaleTypes:{type:"polarAxes",drawingType:"circular"},_getThemeManagerOptions(){const t=this.callBase.apply(this,arguments);return t.subTheme="_circular",t},_updateScaleTickIndent:function(t){const i=t.label.indentFromTick,o=t.tick.visible?t.tick.length:0,s=this._scale.measureLabels(Kt({},this._canvas)),r=t.orientation,c=o;let u=i;if(i>=0)r==="outside"?u+=c:r==="center"&&(u+=c/2);else{const b=L(s.width,s.height);u-=b,r==="inside"?u-=c:r==="center"&&(u-=c/2)}t.label.indentFromAxis=u,this._scale.updateOptions(t)},_setupCodomain:function(){const t=this.option("geometry")||{};let i=t.startAngle,o=t.endAngle,s;i=Bt(i)?Lt(i):225,o=Bt(o)?Lt(o):-45,Bi(i-o)<1?(o-=360,s={left:-1,up:-1,right:1,down:1}):(i<o&&(o-=360),s=Ki(i,o)),this._area={x:0,y:0,radius:100,startCoord:i,endCoord:o,sides:s},this._translator.setCodomain(i,o)},_getCenter:function(){return this._getElementLayout()},_shiftScale:function(t){const i=this._scale,o=i.getCanvas();o.width=o.height=2*t.radius,i.draw(o);const s=i.getCenter();i.shift({right:t.x-s.x,bottom:t.y-s.y})},_getScaleLayoutValue:function(){return this._area.radius},_getTicksOrientation:function(t){return t.orientation},_getTicksCoefficients:function(t){const i={inner:0,outer:1};return t.orientation==="inside"?(i.inner=1,i.outer=0):t.orientation==="center"&&(i.inner=i.outer=.5),i},_correctScaleIndents:function(t,i,o){i>=0?(t.horizontalOffset=i+o.width,t.verticalOffset=i+o.height):(t.horizontalOffset=t.verticalOffset=0,t.min-=-i+L(o.width,o.height)),t.inverseHorizontalOffset=o.width/2,t.inverseVerticalOffset=o.height/2},_measureMainElements:function(t,i){const o=this._area.radius;let s=0,r=1/0,c=0,u=0,b=0,m=0;const q=this._scale;return Li(t.concat(q),(function(be,ne){const T=ne.measure?ne.measure({radius:o-ne.getOffset()}):i;T.min>0&&(r=Ae(r,T.min)),T.max>0&&(s=L(s,T.max)),T.horizontalOffset>0&&(c=L(c,T.max+T.horizontalOffset)),T.verticalOffset>0&&(u=L(u,T.max+T.verticalOffset)),T.inverseHorizontalOffset>0&&(b=L(b,T.inverseHorizontalOffset)),T.inverseVerticalOffset>0&&(m=L(m,T.inverseVerticalOffset))})),c=L(c-s,0),u=L(u-s,0),{minRadius:r,maxRadius:s,horizontalMargin:c,verticalMargin:u,inverseHorizontalMargin:b,inverseVerticalMargin:m}},_applyMainLayout:function(t,i){const o=this._measureMainElements(t,i),s=this._area,r=s.sides,c={left:(r.left<-.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,right:(r.right>.1?o.horizontalMargin:o.inverseHorizontalMargin)||0,top:(r.up<-.1?o.verticalMargin:o.inverseVerticalMargin)||0,bottom:(r.down>.1?o.verticalMargin:o.inverseVerticalMargin)||0},u=Hi(this._innerRect,(r.down-r.up)/(r.right-r.left),c);let b=Ae(ae(u)/(r.right-r.left),le(u)/(r.down-r.up));b=b-o.maxRadius+s.radius;const m=u.left-ae(u)*r.left/(r.right-r.left),q=u.top-le(u)*r.up/(r.down-r.up);s.x=lt(m),s.y=lt(q),s.radius=b,u.left-=c.left,u.right+=c.right,u.top-=c.top,u.bottom+=c.bottom,this._innerRect=u},_getElementLayout:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{x:this._area.x,y:this._area.y,radius:lt(this._area.radius-t)}},_getApproximateScreenRange:function(){const t=this._area;let i=Ae(this._canvas.width/(t.sides.right-t.sides.left),this._canvas.height/(t.sides.down-t.sides.up));return i>t.totalRadius&&(i=t.totalRadius),i*=.8,-this._translator.getCodomainRange()*i*ji/180},_getDefaultSize:function(){return{width:300,height:300}},_factory:ai(xi.prototype._factory)});function ae(t){return t.right-t.left}function le(t){return t.bottom-t.top}function Hi(t,i,o){const s=Kt({},t);let r,c=0,u=0;return o=o||{},i>0&&(s.left+=o.left||0,s.right-=o.right||0,s.top+=o.top||0,s.bottom-=o.bottom||0,ae(s)>0&&le(s)>0?(r=le(s)/ae(s),r>1?i<r?c=ae(s):u=le(s):i>r?u=le(s):c=ae(s),c>0||(c=u/i),u>0||(u=c*i),c=(ae(s)-c)/2,u=(le(s)-u)/2,s.left+=c,s.right-=c,s.top+=u,s.bottom-=u):(s.left=s.right=(s.left+s.right)/2,s.top=s.bottom=(s.top+s.bottom)/2)),s}const te=_e.prototype._factory.indicators={};_e.prototype._factory.createIndicator=wi(te);te._default=Wt;te.rectangleneedle=Wt;te.triangleneedle=Mi;te.twocolorneedle=Fi;te.trianglemarker=Vi;te.textcloud=Ri;te.rangebar=$i;_e.prototype._factory.RangeContainer=Pi;vi("dxCircularGauge",_e);_e.addPlugin(zi.gauge);/*!
 * devextreme-vue
 * Version: 25.1.5
 * Build date: Wed Sep 03 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */const Yt={props:{animation:Object,centerTemplate:{},containerBackgroundColor:String,disabled:Boolean,elementAttr:Object,export:Object,geometry:Object,loadingIndicator:Object,margin:Object,onDisposing:Function,onDrawn:Function,onExported:Function,onExporting:Function,onFileSaving:Function,onIncidentOccurred:Function,onInitialized:Function,onOptionChanged:Function,onTooltipHidden:Function,onTooltipShown:Function,pathModified:Boolean,rangeContainer:Object,redrawOnResize:Boolean,rtlEnabled:Boolean,scale:Object,size:Object,subvalueIndicator:Object,subvalues:Array,theme:String,title:[Object,String],tooltip:Object,value:Number,valueIndicator:Object},emits:{"update:isActive":null,"update:hoveredElement":null,"update:animation":null,"update:centerTemplate":null,"update:containerBackgroundColor":null,"update:disabled":null,"update:elementAttr":null,"update:export":null,"update:geometry":null,"update:loadingIndicator":null,"update:margin":null,"update:onDisposing":null,"update:onDrawn":null,"update:onExported":null,"update:onExporting":null,"update:onFileSaving":null,"update:onIncidentOccurred":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onTooltipHidden":null,"update:onTooltipShown":null,"update:pathModified":null,"update:rangeContainer":null,"update:redrawOnResize":null,"update:rtlEnabled":null,"update:scale":null,"update:size":null,"update:subvalueIndicator":null,"update:subvalues":null,"update:theme":null,"update:title":null,"update:tooltip":null,"update:value":null,"update:valueIndicator":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=_e,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},export:{isCollectionItem:!1,optionName:"export"},geometry:{isCollectionItem:!1,optionName:"geometry"},loadingIndicator:{isCollectionItem:!1,optionName:"loadingIndicator"},margin:{isCollectionItem:!1,optionName:"margin"},rangeContainer:{isCollectionItem:!1,optionName:"rangeContainer"},scale:{isCollectionItem:!1,optionName:"scale"},size:{isCollectionItem:!1,optionName:"size"},subvalueIndicator:{isCollectionItem:!1,optionName:"subvalueIndicator"},title:{isCollectionItem:!1,optionName:"title"},tooltip:{isCollectionItem:!1,optionName:"tooltip"},valueIndicator:{isCollectionItem:!1,optionName:"valueIndicator"}}}};fi(Yt);const Gi=x(Yt),Xt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:duration":null,"update:easing":null,"update:enabled":null},props:{duration:Number,easing:String,enabled:Boolean}};w(Xt);const qi=x(Xt);qi.$_optionName="animation";const Jt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};w(Jt);const Ui=x(Jt);Ui.$_optionName="backgroundColor";const Zt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,dashStyle:String,opacity:Number,visible:Boolean,width:Number}};w(Zt);const Wi=x(Zt);Wi.$_optionName="border";const Qt={emits:{"update:isActive":null,"update:hoveredElement":null,"update:base":null,"update:fillId":null},props:{base:String,fillId:String}};w(Qt);const Yi=x(Qt);Yi.$_optionName="color";const en={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:enabled":null,"update:fileName":null,"update:formats":null,"update:margin":null,"update:printingEnabled":null,"update:svgToCanvas":null},props:{backgroundColor:String,enabled:Boolean,fileName:String,formats:Array,margin:Number,printingEnabled:Boolean,svgToCanvas:Function}};w(en);const tn=x(en);tn.$_optionName="export";const nn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:family":null,"update:opacity":null,"update:size":null,"update:weight":null},props:{color:String,family:String,opacity:Number,size:[Number,String],weight:Number}};w(nn);const Xi=x(nn);Xi.$_optionName="font";const on={emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null,"update:useCurrencyAccountingStyle":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String,useCurrencyAccountingStyle:Boolean}};w(on);const Ji=x(on);Ji.$_optionName="format";const an={emits:{"update:isActive":null,"update:hoveredElement":null,"update:endAngle":null,"update:startAngle":null},props:{endAngle:Number,startAngle:Number}};w(an);const ln=x(an);ln.$_optionName="geometry";const sn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:hideFirstOrLast":null,"update:indentFromTick":null,"update:overlappingBehavior":null,"update:useRangeColors":null,"update:visible":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],hideFirstOrLast:String,indentFromTick:Number,overlappingBehavior:String,useRangeColors:Boolean,visible:Boolean}};w(sn);const ut=x(sn);ut.$_optionName="label";ut.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const rn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:font":null,"update:show":null,"update:text":null},props:{backgroundColor:String,font:Object,show:Boolean,text:String}};w(rn);const un=x(rn);un.$_optionName="loadingIndicator";un.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const dn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:bottom":null,"update:left":null,"update:right":null,"update:top":null},props:{bottom:Number,left:Number,right:Number,top:Number}};w(dn);const Zi=x(dn);Zi.$_optionName="margin";const cn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};w(cn);const pn=x(cn);pn.$_optionName="minorTick";const mn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:endValue":null,"update:startValue":null},props:{color:[Object,String],endValue:Number,startValue:Number}};w(mn);const ge=x(mn);ge.$_optionName="ranges";ge.$_isCollectionItem=!0;ge.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"}};const fn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:offset":null,"update:orientation":null,"update:palette":null,"update:paletteExtensionMode":null,"update:ranges":null,"update:width":null},props:{backgroundColor:[Object,String],offset:Number,orientation:String,palette:[Array,String],paletteExtensionMode:String,ranges:Array,width:Number}};w(fn);const dt=x(fn);dt.$_optionName="rangeContainer";dt.$_expectedChildren={backgroundColor:{isCollectionItem:!1,optionName:"backgroundColor"},range:{isCollectionItem:!0,optionName:"ranges"}};const vn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDecimals":null,"update:customMinorTicks":null,"update:customTicks":null,"update:endValue":null,"update:label":null,"update:minorTick":null,"update:minorTickInterval":null,"update:orientation":null,"update:scaleDivisionFactor":null,"update:startValue":null,"update:tick":null,"update:tickInterval":null},props:{allowDecimals:Boolean,customMinorTicks:Array,customTicks:Array,endValue:Number,label:Object,minorTick:Object,minorTickInterval:Number,orientation:String,scaleDivisionFactor:Number,startValue:Number,tick:Object,tickInterval:Number}};w(vn);const ct=x(vn);ct.$_optionName="scale";ct.$_expectedChildren={label:{isCollectionItem:!1,optionName:"label"},minorTick:{isCollectionItem:!1,optionName:"minorTick"},tick:{isCollectionItem:!1,optionName:"tick"}};const hn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:blur":null,"update:color":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null},props:{blur:Number,color:String,offsetX:Number,offsetY:Number,opacity:Number}};w(hn);const Qi=x(hn);Qi.$_optionName="shadow";const gn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:width":null},props:{height:Number,width:Number}};w(gn);const eo=x(gn);eo.$_optionName="size";const _n={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null,"update:textOverflow":null,"update:wordWrap":null},props:{font:Object,offset:Number,text:String,textOverflow:String,wordWrap:String}};w(_n);const bn=x(_n);bn.$_optionName="subtitle";bn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};const yn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};w(yn);const xn=x(yn);xn.$_optionName="subvalueIndicator";xn.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const wn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:indent":null},props:{customizeText:Function,font:Object,format:[Object,String,Function],indent:Number}};w(wn);const kn=x(wn);kn.$_optionName="text";kn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"}};const Cn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:length":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,length:Number,opacity:Number,visible:Boolean,width:Number}};w(Cn);const Sn=x(Cn);Sn.$_optionName="tick";const Nn={emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:textOverflow":null,"update:verticalAlignment":null,"update:wordWrap":null},props:{font:Object,horizontalAlignment:String,margin:[Number,Object],placeholderSize:Number,subtitle:[Object,String],text:String,textOverflow:String,verticalAlignment:String,wordWrap:String}};w(Nn);const Tn=x(Nn);Tn.$_optionName="title";Tn.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},margin:{isCollectionItem:!1,optionName:"margin"},subtitle:{isCollectionItem:!1,optionName:"subtitle"}};const In={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:border":null,"update:color":null,"update:container":null,"update:contentTemplate":null,"update:cornerRadius":null,"update:customizeTooltip":null,"update:enabled":null,"update:font":null,"update:format":null,"update:interactive":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:shadow":null,"update:zIndex":null},props:{arrowLength:Number,border:Object,color:String,container:{},contentTemplate:{},cornerRadius:Number,customizeTooltip:Function,enabled:Boolean,font:Object,format:[Object,String,Function],interactive:Boolean,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,shadow:Object,zIndex:Number}};w(In);const Dn=x(In);Dn.$_optionName="tooltip";Dn.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"},shadow:{isCollectionItem:!1,optionName:"shadow"}};const An={emits:{"update:isActive":null,"update:hoveredElement":null,"update:arrowLength":null,"update:backgroundColor":null,"update:baseValue":null,"update:beginAdaptingAtRadius":null,"update:color":null,"update:horizontalOrientation":null,"update:indentFromCenter":null,"update:length":null,"update:offset":null,"update:palette":null,"update:secondColor":null,"update:secondFraction":null,"update:size":null,"update:spindleGapSize":null,"update:spindleSize":null,"update:text":null,"update:type":null,"update:verticalOrientation":null,"update:width":null},props:{arrowLength:Number,backgroundColor:String,baseValue:Number,beginAdaptingAtRadius:Number,color:[Object,String],horizontalOrientation:String,indentFromCenter:Number,length:Number,offset:Number,palette:[Array,String],secondColor:String,secondFraction:Number,size:Number,spindleGapSize:Number,spindleSize:Number,text:Object,type:String,verticalOrientation:String,width:Number}};w(An);const pt=x(An);pt.$_optionName="valueIndicator";pt.$_expectedChildren={color:{isCollectionItem:!1,optionName:"color"},text:{isCollectionItem:!1,optionName:"text"}};const to={class:"page-rollform pa-0"},no={key:0,class:"rf-loading-overlay"},io={class:"rf-loader-box"},oo={key:0,class:"hint-line"},ao={key:1,class:"warn-line"},lo={class:"rollform-header"},so={class:"gauge-wrap"},ro={class:"badge-left"},uo={class:"gauge-center-value text-center"},co={style:{color:"goldenrod"}},po={class:"clock-wrap"},mo={class:"digital-clock"},fo={class:"digital-date"},vo={class:"kpi-row"},ho={class:"kpi"},go={class:"kpi-value"},_o={class:"pb-1 ms-1 me-1"},bo={class:"kpi"},yo={class:"kpi-value"},xo={class:"pb-1 ms-1 me-1"},wo={class:"kpi"},ko={class:"kpi-value"},Co={class:"pb-1 ms-1 me-1"},So={class:"oee-title"},No={class:"panel status-panel"},To={class:"form-row mt-2"},Io={style:{display:"flex","align-items":"center",gap:"8px"}},Do={class:"status-actions justify-between"},Ao={class:"status-actions justify-between"},Eo={class:"status-metrics mt-4 text-center"},Oo={class:"metric-time"},zo={class:"metric-time"},Mo={class:"uclu text-center mt-4"},Fo={class:"metric-time ok"},Vo={class:"metric-time warn"},Ro={class:"metric-time"},$o={class:"panel status-panel"},Po={width:"60%"},Bo={class:"sayac siparis digit"},Lo={width:"60%"},jo={class:"sayac siparis digit"},Ko={width:"60%"},Ho={class:"sayac net digit"},Go={width:"60%"},qo={class:"sayac net digit"},Uo={width:"60%"},Wo={class:"sayac kalan digit"},Yo={class:"sayac hurda digit"},Xo={class:"sayac net digit"},Jo={width:"60%"},Zo={class:"bilgi"},Qo={width:"60%"},ea={class:"bilgi"},ta={width:"60%"},na={class:"bilgi"},ia={class:"panel grid-panel"},oa={class:"rf-activate-summary"},aa={class:"mb-2"},la={class:"mb-2"},sa={class:"mb-2"},ra={class:"d-flex flex-wrap mb-1",style:{"font-size":"0.8rem",gap:"12px"}},ua={class:"bilgi"},da={class:"bilgi"},ca={class:"bilgi"},pa=x({__name:"uretim-rollform",setup(t){const i=mi(),o=v(null);function s(){var n;try{return`rollform:lastDurusReason:${((n=W==null?void 0:W.value)==null?void 0:n.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function r(){try{const n=localStorage.getItem(s());if(!n)return!1;const e=JSON.parse(n);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return o.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const c=v([]),u=v(""),b=v(!1),m=v(null),q=F(()=>{var n;return((n=m.value)==null?void 0:n.wstation_code)??"..."}),be=F(()=>{var n;return((n=m.value)==null?void 0:n.wstation_name)??"..."});function ne(n,e){const f=Number(n??0),h=Number(e??0);return!Number.isFinite(f)||!Number.isFinite(h)||h<=0?0:f*6e4/h}const T=F(()=>{var n,e;return ne((n=m.value)==null?void 0:n.speed,(e=m.value)==null?void 0:e.item_length)}),ie=F(()=>{var n,e;return ne((n=m.value)==null?void 0:n.speed_max,(e=m.value)==null?void 0:e.item_length)}),En=F(()=>{var n,e;return ne((n=m.value)==null?void 0:n.speed_target,(e=m.value)==null?void 0:e.item_length)}),On={enabled:!1},zn={width:260,height:260},Mn={size:12,color:"#cfd8dc"},mt=F(()=>{const n=Number(ie.value||0);if(n<=0)return 10;const e=Math.max(1,Math.round(n/6));return e>=5?Math.round(e/5)*5:e}),Fn=F(()=>{const n=Number(mt.value||5);return Math.max(1,Math.round(n/2))}),Vn=F(()=>{var e;const n=(e=m.value)==null?void 0:e.statu_id;return n===0?"rgba(192, 167, 167, 0.30)":n===1?"rgba(180, 50, 50, 1.00)":n===2?"green":"#4b7027"}),U=F(()=>{var n;return((n=m.value)==null?void 0:n.statu_id)===1});i.setTitle(`${q.value} (${be.value})`),document.title=`OFT - ${q.value} | ${be.value}`;const ft=F(()=>`${q.value} (${be.value})`),Rn=F(()=>{const n=Number(Y.value.oee||0);return n<50?"oee-low":n<70?"oee-mid":n<85?"oee-high":"oee-top"}),Oe=()=>{i.setTitle(ft.value),document.title=`OFT - ${q.value} | ${be.value}`};si(async()=>{if(await $e(),Oe(),await ti(),!C.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}Me(),ke(),setInterval(ke,1e4),setInterval(()=>{const n=new Date,e=String(n.getHours()).padStart(2,"0"),f=String(n.getMinutes()).padStart(2,"0"),h=String(n.getSeconds()).padStart(2,"0");gt.value=`${e}:${f}:${h}`;const p=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],k=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];_t.value=`${n.getDate()} ${k[n.getMonth()]} ${n.getFullYear()} ${p[n.getDay()]}`,Me(),bt()},1e3),setInterval(oe,2e3),Mt(),Qn(),setTimeout(()=>{we.value||(we.value=!0)},15e3),window.addEventListener("keydown",yt),window.addEventListener("keydown",St)}),ri(()=>{Oe()});const $n=De(()=>i.title,n=>{n!==ft.value&&Oe()},{flush:"post"});ui(()=>{$n(),window.removeEventListener("keydown",yt),window.removeEventListener("keydown",St)}),De(()=>m.value,()=>{Oe(),Me()});const W=di("userData");function D(n){const e=Number(n??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const Le=v("00:00:00"),je=v("00:00"),Ke=v("00:00"),He=v("00:00"),Ge=v("00:00"),vt=v(0),ht=v(0),qe=v(null),gt=v("00:00:00"),_t=v("...");function Pn(n){const e=Math.max(0,Math.floor(n||0)),f=Math.floor(e/3600),h=Math.floor(e%3600/60),p=e%60,k=$=>String($).padStart(2,"0");return`${k(f)}:${k(h)}:${k(p)}`}function ze(n){const e=Math.max(0,Math.floor(n||0)),f=Math.floor(e/3600),h=Math.floor(e%3600/60),p=k=>String(k).padStart(2,"0");return`${p(f)}:${p(h)}`}function Me(){var f;const n=(f=m.value)==null?void 0:f.statu_time;if(n==null){Le.value="00:00:00";return}let e=0;if(typeof n=="number")n>1e12?e=Math.max(0,Math.floor((Date.now()-n)/1e3)):n>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-n)):e=Math.max(0,Math.floor(n));else if(typeof n=="string"){const h=Date.parse(n);Number.isNaN(h)||(e=Math.max(0,Math.floor((Date.now()-h)/1e3)))}else n instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-n.getTime())/1e3)));Le.value=Pn(e)}function bt(){if(qe.value!=null){const n=Math.max(0,Math.floor((Date.now()-qe.value)/1e3));je.value=ze(n);const e=Math.max(0,Math.floor(vt.value||0)),f=Math.max(0,Math.floor(ht.value||0));Ke.value=ze(e),He.value=ze(f);const h=Math.max(0,n-e-f);Ge.value=ze(h)}else je.value="00:00",Ke.value="00:00",He.value="00:00",Ge.value="00:00"}function R(n){const e=n.toLowerCase();return c.value.find(f=>String(f.description||"").toLowerCase().includes(e))}function yt(n){if(U.value){if(n.key==="F9"){const e=R("çay ve yemek")||R("cay ve yemek")||R("çay & yemek");e&&(o.value={break_reason_code:e.break_reason_code,description:e.description},n.preventDefault())}else if(n.key==="F8")n.preventDefault(),xt();else if(n.key==="F10"){const e=R("yemek")||R("öğle")||R("ogle");e&&(o.value={break_reason_code:e.break_reason_code,description:e.description},n.preventDefault())}}}async function xt(){if(U.value&&C.value)try{await B.post("/api/uretim-rollform/close-and-open-down",{station_id:C.value}),I({message:"Yeni duruş başlatıldı (F8)",type:"success",displayTime:1500}),Promise.allSettled([oe(),ke()])}catch(n){console.error("F8 yeni duruş hata",n),I({message:"Yeni duruş başlatılamadı",type:"error",displayTime:2e3})}}async function Bn(){if(!U.value||A.value)return;const n=R("çay")||R("cay");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await ce()):I({message:"Çay molası sebebi bulunamadı",type:"warning",displayTime:1500})}async function Ln(){if(!U.value||A.value)return;const n=R("yemek")||R("öğle")||R("ogle");n?(o.value={break_reason_code:n.break_reason_code,description:n.description},await ce()):I({message:"Yemek molası sebebi bulunamadı",type:"warning",displayTime:1500})}const ye=v(!1),xe=v(""),Ue=v(null),se=v(!1);let We=null;function wt(){var n,e;if(!We){We=setTimeout(()=>{We=null},300);try{(e=(n=Ue.value)==null?void 0:n.blur)==null||e.call(n)}catch{}Ct()}}function kt(){xe.value="",ye.value=!0,$e(()=>{var n;return(n=Ue.value)==null?void 0:n.focus()})}async function Ct(){var k;const n=Number(xe.value);if(!Number.isFinite(n)||n<=0){Ye();return}let e=m.value?{...m.value}:null,f=((k=m.value)==null?void 0:k.worder_id)??null,h=-1,p=null;try{if(se.value)return;if(!C.value)throw new Error("İstasyon yok");se.value=!0;const $=typeof performance<"u"&&performance.now?performance.now():Date.now();if(e){const N=Number(e.scrap_qty||0);m.value={...e,scrap_qty:N+n}}if(f&&(h=j.value.findIndex(N=>N.isEmriID===f),h>=0)){p=Number(j.value[h].hurda||0);const N={...j.value[h],hurda:p+n};j.value.splice(h,1,N)}await B.post("/api/uretim-rollform/hurda-gir",{station_id:C.value,qty:n});const M=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Hurda] POST tamam: ${(M-$).toFixed(0)}ms (qty=${n})`)}catch{}I({message:"Hurda kaydedildi",type:"success",displayTime:1200}),ye.value=!1,Promise.allSettled([oe(),Mt(),ke()])}catch($){console.error("hurda kayıt hata",$);try{if(f!=null){const M=j.value.findIndex(N=>N.isEmriID===f);if(M>=0&&p!=null){const N={...j.value[M],hurda:p};j.value.splice(M,1,N)}}}catch{}try{e!==null&&(m.value=e)}catch{}I({message:"Hurda kaydedilemedi",type:"error",displayTime:2e3})}finally{se.value=!1}}function Ye(){xe.value="",ye.value=!1}function St(n){n.key==="F7"&&(kt(),n.preventDefault())}const Fe=v(0);async function Nt(n){if(!C.value)return;const e=Date.now();if(e-Fe.value<5e3){const h=Math.ceil((5e3-(e-Fe.value))/1e3);I({message:`Sayaç işlemi için ${h}s bekleyin`,type:"warning",displayTime:1200});return}Fe.value=e;const f=m.value?{...m.value}:null;if(m.value){const h=Math.max(0,Number(m.value.counter||0)+n);m.value={...m.value,counter:h}}try{await B.post("/api/uretim-rollform/adjust-counter",{station_id:C.value,delta:n}),oe()}catch(h){console.error("Sayaç ayarlanamadı",h),f&&(m.value=f),I({message:"Sayaç güncellenemedi",type:"error",displayTime:1800}),Fe.value=0}}window.addEventListener("keydown",n=>{n.key==="F4"?(n.preventDefault(),Nt(-1)):n.key==="F5"&&(n.preventDefault(),Nt(1))}),v("uretim-disi");const jn=v(!1),we=v(!1),Tt=v(!1),It=v(!1),Dt=v(!1),At=v(!1),Et=v(!1),Kn=F(()=>Tt.value&&It.value&&Dt.value&&At.value&&Et.value);De(Kn,n=>{n&&!we.value&&(we.value=!0)});const Hn=F(()=>!we.value),Y=v({availability:0,performance:0,quality:0,oee:0}),Gn=v(null);async function ke(){try{if(!C.value)return;const{data:n}=await B.get("/api/uretim-rollform/kpi",{params:{station_id:C.value}});if(n!=null&&n.kpi){const e=f=>Math.round(Number(f||0)*100);if(Y.value={availability:e(n.kpi.availability),performance:e(n.kpi.performance),quality:e(n.kpi.quality),oee:e(n.kpi.oee)},n.shift){Gn.value={id:n.shift.id,start:String(n.shift.start||"").substring(11,16),end:String(n.shift.end||"").substring(11,16)};const f=Date.parse(n.shift.start);Number.isNaN(f)||(qe.value=f)}n.raw&&(vt.value=Math.max(0,Math.floor(Number(n.raw.upSeconds||0))),ht.value=Math.max(0,Math.floor(Number(n.raw.downSeconds||0)))),bt(),jn.value=!0,Dt.value=!0}}catch(n){console.error("fetchKpiDirect error",n)}}const j=v([]),qn=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:n=>{var e;return Un((e=n==null?void 0:n.row)==null?void 0:e.data)}}],re=v(!1);v(null);const S=v(null),ue=v(!1);function Un(n){S.value=n,re.value=!0}const Ce=v(!1),Se=v(null),Ot=v(null),de=v(!1);function Wn(){Se.value=null,Ce.value=!0,$e(()=>{var n,e;return(e=(n=Ot.value)==null?void 0:n.focus)==null?void 0:e.call(n)})}function Xe(){Ce.value=!1}async function zt(){if(!de.value&&Se.value!=null)try{de.value=!0,await new Promise(n=>setTimeout(n,800)),I({message:"Üretim girişi kaydedildi (örnek).",type:"success",displayTime:1500}),Ce.value=!1}catch(n){console.error("Üretim girişi hata",n),I({message:"Üretim girişi kaydedilemedi",type:"error",displayTime:1800})}finally{de.value=!1}}async function Yn(){if(!S.value)return;const n=C.value;if(!n)return;const e={wstation_id:n,worder_id:Number(S.value.isEmriID??0),worder_no:S.value.isEmriNo,item_id:0,item_code:S.value.stokKodu,item_name:S.value.stokAdi,order_qty:Number(S.value.plnAd??0),net_qty:Number(S.value.urtAd??0),scrap_qty:Number(S.value.hurda??0)};try{if(ue.value)return;ue.value=!0,await B.post("/api/uretim-rollform/activate-workorder",e),I({message:"İş emri aktifleştirildi",type:"success",displayTime:1600}),re.value=!1,oe()}catch(f){console.error("Aktivasyon hatası",f),I({message:"İş emri aktifleştirilemedi",type:"error",displayTime:1800})}finally{ue.value=!1}}async function oe(){try{if(!C.value){m.value=null;return}const n=await B.get("/api/kapasite-works-info",{params:{station_id:C.value}}),e=Array.isArray(n.data)?n.data:[];m.value=e.length>0?e[0]:null,Me()}catch(n){console.error("WorksInfo alınamadı",n),m.value=null}finally{It.value=!0}}function Xn(){var f,h;const n=((f=S.value)==null?void 0:f.stokKodu)||((h=m.value)==null?void 0:h.item_code)||null;if(!n){alert("Önce bir iş emri/ürün seçiniz (stok kodu yok).");return}const e=`/teknik-resim?code=${encodeURIComponent(n)}`;window.open(e,"_blank")}async function Mt(){try{if(!C.value){j.value=[];return}const{data:n}=await B.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:C.value}}),e=(n||[]).map(f=>({grp:0,isEmriID:f.isemri_id,isEmriNo:f.isemri_no,stokKodu:f.stok_kodu,stokAdi:f.stok_adi,plnAd:Number(f.siparis_miktari??0),ilvAd:0,klnAd:Number(f.kalan_miktar??0),urtAd:Number(f.uretilen_net_miktar??0),hurda:Number(f.toplam_hurda_miktari??0),plnSure:Number(f.operasyon_suresi??0),grcSure:0}));j.value=e}catch(n){console.error("İş emirleri alınamadı",n)}finally{At.value=!0}}const K=v(!1),A=v(!1),Ve=v(!0),Je=v(null);function Re(n=0){var e,f,h;try{const p=((e=Je.value)==null?void 0:e.$el)||((h=(f=Je.value)==null?void 0:f.$refs)==null?void 0:h.root)||null;if(p){const k=p.querySelector("input")||p.querySelector('[role="combobox"]');if(k){k.focus(),document.activeElement!==k&&n<3&&setTimeout(()=>Re(n+1),40);return}}n<5&&setTimeout(()=>Re(n+1),50)}catch{}}function Jn(){setTimeout(()=>Re(),10)}const Ze=v(!0),Zn=F(()=>({width:110,marginBottom:30,type:"success",text:A.value?"Kaydediliyor...":"Kaydet",stylingMode:"contained",elementAttr:{class:A.value?"btn-loading":""},disabled:A.value,onClick:()=>{A.value||ce()}}));function Qn(){C.value&&B.get("/api/durus-sebepleri-al",{params:{istasyon:C.value}}).then(n=>{var e;c.value=((e=n.data)==null?void 0:e.durusSebepleri)||[]}).catch(n=>{console.error("Duruş sebepleri alınamadı",n)}).finally(()=>{Et.value=!0})}function Ft(){o.value={break_reason_code:"000",description:"GİRİLMEDİ"},K.value=!0,$e(()=>Re())}async function ce(){var n;if(!A.value){if(!o.value){I({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((n=m.value)!=null&&n.worder_id)){I({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),K.value=!1;return}if(!C.value){I({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{A.value=!0,Ve.value=!1;const e=typeof performance<"u"&&performance.now?performance.now():Date.now();await B.post("/api/duruskaydet-mekanik",{istasyonID:C.value,selectedDurus:o.value});const f=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Duruş] POST tamam: ${(f-e).toFixed(0)}ms (code=${o.value.break_reason_code})`)}catch{}I({message:"Duruş kaydedildi.",type:"success",displayTime:1600});try{localStorage.setItem(s(),JSON.stringify(o.value))}catch{}K.value=!1,Promise.allSettled([oe(),ke()])}catch(e){console.error("Duruş kaydedilemedi",e),I({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{A.value=!1,Ve.value=!0}}}function ei(n){Ve.value||(n.cancel=!0)}De(K,(n,e)=>{e&&!n&&oe()});const Vt=v(null);De(()=>{var n;return(n=m.value)==null?void 0:n.statu_id},async(n,e)=>{n===1&&Vt.value!==1?Ze.value?!r()&&!K.value&&Ft():K.value||Ft():n!==1&&(K.value&&(A.value=!1,Ve.value=!0,K.value=!1),o.value=null),Vt.value=n??null,Ze.value&&(Ze.value=!1)});const C=v(null),pe=v(null);async function ti(){var n,e,f;try{pe.value=null;const{data:h}=await B.get("/api/uretim-rollform/detect-station");if(h&&h.station_id){C.value=Number(h.station_id),Tt.value=!0;try{const p=Number(((n=W==null?void 0:W.value)==null?void 0:n.id)||((f=(e=W==null?void 0:W.value)==null?void 0:e.user)==null?void 0:f.id));Number.isFinite(p)&&p>0&&await B.post("/api/uretim-rollform/set-operator",{station_id:C.value,operator_id:p})}catch{}}else{C.value=null;const p=h!=null&&h.ip?` – tespit edilen IP: ${h.ip}`:"";pe.value="İstasyon bulunamadı (IP eşleşmedi)"+p}}catch(h){pe.value="İstasyon tespiti hata: "+((h==null?void 0:h.message)||"bilinmiyor")}}return(n,e)=>{const f=ii,h=ni;return G(),H("div",to,[Hn.value?(G(),H("div",no,[a("div",io,[e[12]||(e[12]=a("div",{class:"rf-spinner","aria-hidden":"true"},null,-1)),e[13]||(e[13]=a("h2",null,"Veriler yükleniyor",-1)),e[14]||(e[14]=a("p",null,"İstasyon, aktif iş emri, sayaç ve KPI verileri hazırlanıyor. Lütfen bekleyin…",-1)),!C.value&&!pe.value?(G(),H("small",oo,"İstasyon tespiti yapılıyor...")):pe.value?(G(),H("small",ao,g(pe.value)+" – yeniden deniyor...",1)):Rt("",!0)])])):Rt("",!0),a("div",lo,[l(ee,{class:"match-height"},{default:d(()=>[l(O,{cols:"12",md:"3",sm:"6"},{default:d(()=>[l(fe,{class:"pa-3"},{default:d(()=>[a("section",null,[l(ve,{class:"durum-title",style:pi({backgroundColor:Vn.value})},{default:d(()=>{var p,k;return[_(g(((p=m.value)==null?void 0:p.statu_id)===0?"KAPALI":((k=m.value)==null?void 0:k.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[20]||(e[20]=a("hr",null,null,-1)),a("div",so,[a("div",ro,g(q.value),1),l(y(Gi),{class:"oee-gauge",value:T.value,subvalues:[En.value],tooltip:On,size:zn},{default:d(()=>[l(y(ln),{"start-angle":225,"end-angle":-45}),l(y(ct),{"start-value":0,"end-value":ie.value,"tick-interval":mt.value,"minor-tick-interval":Fn.value},{default:d(()=>[l(y(Sn),{length:8,color:"#666"}),l(y(pn),{length:4,color:"#444"}),l(y(ut),{"use-range-colors":!0,font:Mn})]),_:1},8,["end-value","tick-interval","minor-tick-interval"]),l(y(dt),{"background-color":"#20252b",offset:10,width:10},{default:d(()=>[l(y(ge),{"start-value":0,"end-value":.4*ie.value,color:"#ce6978"},null,8,["end-value"]),l(y(ge),{"start-value":.4*ie.value,"end-value":.7*ie.value,color:"#caa93b"},null,8,["start-value","end-value"]),l(y(ge),{"start-value":.7*ie.value,"end-value":ie.value,color:"#1e8e3e"},null,8,["start-value","end-value"])]),_:1}),l(y(pt),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(y(tn),{enabled:!1})]),_:1},8,["value","subvalues"]),a("div",uo,[e[15]||(e[15]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız (ad/saat)",-1)),a("div",co,g(D(T.value)),1)])]),a("div",po,[a("div",mo,g(gt.value),1),a("div",fo,g(_t.value),1)]),a("div",vo,[a("div",ho,[e[16]||(e[16]=a("div",null,"Meço %",-1)),a("div",go,[_(g(Y.value.availability)+" ",1),a("div",_o,[l(Pe,{"model-value":Y.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",bo,[e[17]||(e[17]=a("div",null,"Performans %",-1)),a("div",yo,[_(g(Y.value.performance)+" ",1),a("div",xo,[l(Pe,{"model-value":Y.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",wo,[e[18]||(e[18]=a("div",null,"Kalite %",-1)),a("div",ko,[_(g(Y.value.quality)+" ",1),a("div",Co,[l(Pe,{"model-value":Y.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(ee,null,{default:d(()=>[l(O,{cols:"12",class:"text-center"},{default:d(()=>[a("div",So,[e[19]||(e[19]=_("OEE % ")),a("span",{class:Qe(["kpi-oee",Rn.value])},g(Y.value.oee),3)])]),_:1})]),_:1})])]),_:1})]),_:1}),l(O,{cols:"12",md:"4",sm:"6"},{default:d(()=>[l(fe,{class:"pa-3"},{default:d(()=>[l(ve,{class:"panel-title pa-0"},{default:d(()=>e[21]||(e[21]=[_("DURUM BİLGİLERİ")])),_:1,__:[21]}),e[33]||(e[33]=a("hr",null,null,-1)),a("section",No,[a("div",To,[e[23]||(e[23]=a("label",null,"Duruş Sebebi (F8 – Yeni Duruş)",-1)),a("div",Io,[l(f,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=p=>o.value=p),items:c.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!U.value||A.value,class:Qe({"app-select--force-disabled":!U.value||A.value}),onKeydown:X(J(ce,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"]),l(E,{color:"success",variant:"tonal",size:"small",disabled:!U.value||A.value||!o.value,onClick:ce},{default:d(()=>[e[22]||(e[22]=_(" Kaydet ")),l(Be,{end:"",icon:"tabler-check"})]),_:1,__:[22]},8,["disabled"])]),l(h,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=p=>u.value=p),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",Do,[l(E,{variant:"tonal",color:"error",size:"small"},{default:d(()=>e[24]||(e[24]=[_("Açıklama Gir")])),_:1,__:[24]}),l(Ai,{color:"error",modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=p=>b.value=p),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",Ao,[l(E,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:xt},{default:d(()=>[e[25]||(e[25]=_(" F8 - Yeni Duruş ")),l(Be,{end:"",icon:"tabler-player-skip-forward"})]),_:1,__:[25]}),l(E,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:Bn},{default:d(()=>[e[26]||(e[26]=_(" F9 - Çay Molası ")),l(Be,{end:"",icon:"tabler-mug"})]),_:1,__:[26]}),l(E,{variant:"tonal",color:"warning",size:"small",width:"32%",onClick:Ln},{default:d(()=>[e[27]||(e[27]=_(" F10 - Yemek Molası ")),l(Be,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[27]})]),a("div",Eo,[a("div",null,[e[28]||(e[28]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",Oo,g(Le.value),1)]),a("div",null,[e[29]||(e[29]=a("div",{class:"label"},"Vardiya",-1)),a("div",zo,g(je.value),1)])]),a("div",Mo,[a("div",null,[e[30]||(e[30]=a("div",{class:"label"},"Çalışma",-1)),a("div",Fo,g(Ke.value),1)]),a("div",null,[e[31]||(e[31]=a("div",{class:"label"},"Duruş",-1)),a("div",Vo,g(He.value),1)]),a("div",null,[e[32]||(e[32]=a("div",{class:"label"},"Boşta",-1)),a("div",Ro,g(Ge.value),1)])])])]),_:1,__:[33]})]),_:1}),l(O,{cols:"12",md:"5",sm:"6"},{default:d(()=>[l(fe,{class:"pa-3"},{default:d(()=>{var p,k,$;return[l(ve,{class:"panel-title pa-0"},{default:d(()=>e[34]||(e[34]=[_("ÜRETİM RAKAMLARI")])),_:1,__:[34]}),e[49]||(e[49]=a("hr",null,null,-1)),a("section",$o,[l(Pe,{"model-value":(((p=m.value)==null?void 0:p.net_qty)+((k=m.value)==null?void 0:k.counter))/(($=m.value)==null?void 0:$.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(ee,null,{default:d(()=>[l(O,{cols:"5"},{default:d(()=>{var M,N,Z,P,Q,Ne,Te,Ie;return[a("div",null,[a("div",Po,[e[35]||(e[35]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",Bo,g(D((M=m.value)==null?void 0:M.order_qty)),1)]),a("div",Lo,[e[36]||(e[36]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",jo,g(D((N=m.value)==null?void 0:N.net_qty)),1)]),a("div",Ko,[e[37]||(e[37]=a("div",{class:"label"},"Sayaç",-1)),a("div",Ho,g(D((Z=m.value)==null?void 0:Z.counter)),1)]),a("div",Go,[e[38]||(e[38]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",qo,g(D(((P=m.value)==null?void 0:P.net_qty)+((Q=m.value)==null?void 0:Q.counter))),1)]),a("div",Uo,[e[39]||(e[39]=a("div",{class:"label"},"Kalan",-1)),a("div",Wo,g(D((((Ne=m.value)==null?void 0:Ne.order_qty)??0)-((Te=m.value)==null?void 0:Te.counter)-(((Ie=m.value)==null?void 0:Ie.net_qty)??0))),1)])])]}),_:1}),l(O,{cols:"7"},{default:d(()=>{var M,N,Z;return[a("div",null,[l(ee,null,{default:d(()=>[l(O,{cols:"6"},{default:d(()=>{var P;return[e[40]||(e[40]=a("div",{class:"label"},"Hurda",-1)),a("div",Yo,g(D((P=m.value)==null?void 0:P.scrap_qty)),1)]}),_:1,__:[40]}),l(O,{cols:"6"},{default:d(()=>{var P,Q,Ne,Te,Ie;return[e[41]||(e[41]=a("div",{class:"label"},"O.A.%",-1)),a("div",Xo,g(((P=m.value)==null?void 0:P.net_qty)===0||((Q=m.value)==null?void 0:Q.order_qty)===0?0:((((Ne=m.value)==null?void 0:Ne.net_qty)+((Te=m.value)==null?void 0:Te.counter))/((Ie=m.value)==null?void 0:Ie.order_qty)*100).toFixed(0)),1)]}),_:1,__:[41]})]),_:1}),a("div",Jo,[e[42]||(e[42]=a("div",{class:"label"},"İş Emri No",-1)),a("div",Zo,g((M=m.value)==null?void 0:M.worder_no),1)]),a("div",Qo,[e[43]||(e[43]=a("div",{class:"label"},"Ürün Kodu",-1)),a("div",ea,g((N=m.value)==null?void 0:N.item_code),1)]),a("div",ta,[e[44]||(e[44]=a("div",{class:"label"},"Kalan",-1)),a("div",na,g((Z=m.value)==null?void 0:Z.item_name),1)])]),l(ee,{class:"mt-1"},{default:d(()=>[l(O,{cols:"6",class:"mt-0 py-2 pe-1"},{default:d(()=>[l(E,{id:"hurdaGir",block:"",variant:"outlined",color:"error",onClick:kt},{default:d(()=>e[45]||(e[45]=[_(" F7 - Hurda Girişi ")])),_:1,__:[45]})]),_:1}),l(O,{cols:"6",class:"mt-0 py-2 ps-1"},{default:d(()=>[l(E,{variant:"outlined",block:"",onClick:Wn},{default:d(()=>e[46]||(e[46]=[_("İş Emrini Kapat")])),_:1,__:[46]})]),_:1})]),_:1}),l(ee,{class:"mt-1"},{default:d(()=>[l(O,{cols:"6",class:"mt-0 py-2 pe-1"},{default:d(()=>[l(E,{variant:"outlined",block:"",onClick:Xn},{default:d(()=>e[47]||(e[47]=[_("Teknik Resim")])),_:1,__:[47]})]),_:1}),l(O,{cols:"6",class:"mt-0 py-2 ps-1"},{default:d(()=>[l(E,{variant:"outlined",block:""},{default:d(()=>e[48]||(e[48]=[_("Ürün Etiketi Bas")])),_:1,__:[48]})]),_:1})]),_:1})]}),_:1})]),_:1})])]}),_:1,__:[49]})]),_:1})]),_:1})]),a("section",ia,[l(y(Ti),{class:"orders-grid","data-source":j.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:d(()=>[l(y(V),{type:"buttons",width:"30",buttons:qn}),l(y(V),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(y(V),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(y(V),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(y(V),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(y(V),{"data-field":"stokAdi",caption:"STOK ADI"}),l(y(V),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(V),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(y(Ni),{visible:!0,width:240})]),_:1},8,["data-source"])]),e[74]||(e[74]=ci('<div class="bottom-tabs" data-v-1f8949d7><button class="tab active" data-v-1f8949d7>İş Emirleri</button><button class="tab" data-v-1f8949d7>Duruşlar</button><button class="tab" data-v-1f8949d7>Hurdalar</button><button class="tab" data-v-1f8949d7>Ölçümler</button><button class="tab" data-v-1f8949d7>Kısayollar</button></div>',1)),l(ot,{modelValue:ye.value,"onUpdate:modelValue":e[4]||(e[4]=p=>ye.value=p),"max-width":"400"},{default:d(()=>[l(fe,null,{default:d(()=>[l(ve,null,{default:d(()=>e[50]||(e[50]=[_("Hurda Girişi")])),_:1,__:[50]}),l(nt,null,{default:d(()=>[l($t,{ref_key:"hurdaInputRef",ref:Ue,modelValue:xe.value,"onUpdate:modelValue":e[3]||(e[3]=p=>xe.value=p),label:"Hurda Miktarı",type:"number","hide-details":"",min:1,step:"1",autofocus:"",onKeydown:[X(J(wt,["prevent"]),["enter"]),X(J(Ye,["prevent"]),["esc"])],onKeyup:X(J(wt,["prevent"]),["enter"])},null,8,["modelValue","onKeydown","onKeyup"]),e[51]||(e[51]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[51]}),l(tt,null,{default:d(()=>[l(it),l(E,{variant:"text",color:"grey",onClick:Ye},{default:d(()=>e[52]||(e[52]=[_("İptal (Esc)")])),_:1,__:[52]}),l(E,{variant:"elevated",color:"error",onClick:Ct,loading:se.value,disabled:se.value},{default:d(()=>[se.value?(G(),H(me,{key:0},[l(et,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[53]||(e[53]=_(" Kaydediliyor... "))],64)):(G(),H(me,{key:1},[_("Kaydet (Enter)")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ot,{modelValue:re.value,"onUpdate:modelValue":e[6]||(e[6]=p=>re.value=p),"max-width":"480",onKeydown:e[7]||(e[7]=X(J(p=>re.value=!1,["prevent","stop"]),["esc"]))},{default:d(()=>[l(fe,null,{default:d(()=>[l(ve,null,{default:d(()=>e[54]||(e[54]=[_("İş Emrini Aktif Et")])),_:1,__:[54]}),l(nt,null,{default:d(()=>{var p,k,$,M,N,Z,P,Q;return[a("div",oa,[a("div",aa,[e[55]||(e[55]=a("strong",null,"İş Emri No:",-1)),_(" "+g((p=S.value)==null?void 0:p.isEmriNo),1)]),a("div",la,[e[56]||(e[56]=a("strong",null,"Stok Kodu:",-1)),_(" "+g((k=S.value)==null?void 0:k.stokKodu),1)]),a("div",sa,[e[57]||(e[57]=a("strong",null,"Stok Adı:",-1)),_(" "+g(($=S.value)==null?void 0:$.stokAdi),1)]),a("div",ra,[a("div",null,[e[58]||(e[58]=a("strong",null,"Plan:",-1)),_(" "+g(D((M=S.value)==null?void 0:M.plnAd)),1)]),a("div",null,[e[59]||(e[59]=a("strong",null,"İlave:",-1)),_(" "+g(D((N=S.value)==null?void 0:N.ilvAd)),1)]),a("div",null,[e[60]||(e[60]=a("strong",null,"Kalan:",-1)),_(" "+g(D((Z=S.value)==null?void 0:Z.klnAd)),1)]),a("div",null,[e[61]||(e[61]=a("strong",null,"Üretilen:",-1)),_(" "+g(D((P=S.value)==null?void 0:P.urtAd)),1)]),a("div",null,[e[62]||(e[62]=a("strong",null,"Hurda:",-1)),_(" "+g(D((Q=S.value)==null?void 0:Q.hurda)),1)])]),e[63]||(e[63]=a("div",{class:"text-caption",style:{opacity:"0.7"}},"Bu iş emrini istasyonda aktif etmek istediğinize emin misiniz?",-1))])]}),_:1}),l(tt,null,{default:d(()=>[l(it),l(E,{variant:"text",onClick:e[5]||(e[5]=p=>re.value=!1)},{default:d(()=>e[64]||(e[64]=[_("Vazgeç")])),_:1,__:[64]}),l(E,{color:"primary",variant:"flat",onClick:Yn,loading:ue.value,disabled:ue.value},{default:d(()=>[ue.value?(G(),H(me,{key:0},[l(et,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[65]||(e[65]=_(" Aktarılıyor... "))],64)):(G(),H(me,{key:1},[_("Onayla")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ot,{modelValue:Ce.value,"onUpdate:modelValue":e[9]||(e[9]=p=>Ce.value=p),"max-width":"520",onKeydown:X(J(Xe,["prevent","stop"]),["esc"])},{default:d(()=>[l(fe,null,{default:d(()=>[l(ve,{class:"text-h5",style:{"background-color":"green",color:"black"}},{default:d(()=>e[66]||(e[66]=[_("Üretim Girişi")])),_:1,__:[66]}),l(nt,null,{default:d(()=>[l(ee,{class:"mb-2"},{default:d(()=>[l(O,{cols:"12",sm:"4"},{default:d(()=>{var p;return[e[67]||(e[67]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",ua,g(D((p=m.value)==null?void 0:p.order_qty)),1)]}),_:1,__:[67]}),l(O,{cols:"12",sm:"4"},{default:d(()=>{var p;return[e[68]||(e[68]=a("div",{class:"label"},"Üretilen (uyum)",-1)),a("div",da,g(D((p=m.value)==null?void 0:p.net_qty)),1)]}),_:1,__:[68]}),l(O,{cols:"12",sm:"4"},{default:d(()=>{var p;return[e[69]||(e[69]=a("div",{class:"label"},"Sayaç",-1)),a("div",ca,g(D((p=m.value)==null?void 0:p.counter)),1)]}),_:1,__:[69]})]),_:1}),l($t,{ref_key:"uretimInputRef",ref:Ot,modelValue:Se.value,"onUpdate:modelValue":e[8]||(e[8]=p=>Se.value=p),modelModifiers:{number:!0},type:"number",label:"Elle Üretim Miktarı",variant:"outlined",density:"comfortable",min:0,step:1,"hide-details":"",autofocus:"",onKeydown:[X(J(zt,["prevent"]),["enter"]),X(J(Xe,["prevent"]),["esc"])]},null,8,["modelValue","onKeydown"]),e[70]||(e[70]=a("div",{class:"text-caption mt-2"},"Sayaç değeri yanlış olabilir. Gerçek sayıyı giriniz...",-1))]),_:1,__:[70]}),l(tt,null,{default:d(()=>[l(it),l(E,{variant:"outlined",color:"grey",onClick:Xe},{default:d(()=>e[71]||(e[71]=[_("Vazgeç")])),_:1,__:[71]}),l(E,{color:"primary",variant:"outlined",onClick:zt,disabled:Se.value==null||de.value,loading:de.value},{default:d(()=>[de.value?(G(),H(me,{key:0},[l(et,{indeterminate:"",size:"18",color:"primary",class:"mr-2"}),e[72]||(e[72]=_(" Kaydediliyor... "))],64)):(G(),H(me,{key:1},[_("Kaydet (Enter)")],64))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"]),l(y(Di),{visible:K.value,"onUpdate:visible":e[11]||(e[11]=p=>K.value=p),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":ei,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}},"on-shown":Jn},{content:d(()=>[l(ee,{class:"pa-4"},{default:d(()=>[l(f,{ref_key:"durusSelectRef",ref:Je,modelValue:o.value,"onUpdate:modelValue":e[10]||(e[10]=p=>o.value=p),items:c.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!U.value||A.value,class:Qe({"app-select--force-disabled":!U.value||A.value}),onKeydown:X(J(ce,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"])]),_:1})]),title:d(()=>e[73]||(e[73]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:d(()=>[l(y(Ii),{widget:"dxButton",toolbar:"bottom",location:"center",options:Zn.value},null,8,["options"])]),_:1},8,["visible"])])}}}),rl=Ei(pa,[["__scopeId","data-v-1f8949d7"]]);export{rl as default};
