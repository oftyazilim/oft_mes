import{r as I,e as O}from"./validators-BwBNGiur.js";import{d as X,r as n,X as q,H as A,u as Y,j as Z,b1 as J,a as K,c as Q,o as y,b as o,f as s,e as r,g as k,l as w,m as a,v as x,t as f,a_ as W,aU as ee,ae,F as te,eL as oe,b2 as L,aZ as se}from"./main-nZPIp3zM.js";import{_ as re}from"./AppTextField.vue_vue_type_script_setup_true_lang-CSQPecrY.js";import{u as F}from"./useGenerateImageVariant-CuMFTFoL.js";import{a as le,b as ie,c as ne,d as ue}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as me,b as de}from"./misc-mask-light-Ha4lQOdV.js";import{V as pe}from"./VNodeRenderer--tR4chpG.js";import{$ as fe}from"./api-CiPP7jGF.js";import{V as _}from"./VCol-D2abnwsK.js";import{V as ce}from"./VImg-CLhjQ_EV.js";import{V as ge}from"./VCard-DUgU9KaA.js";import{V as G}from"./VCardText-CM2of7En.js";import{V as S}from"./VAlert-QWY_roAX.js";import{V as Ve}from"./VForm-D5iPAwAy.js";import{V as E}from"./VRow-olSiMDTC.js";import{V as be}from"./VCheckbox-Dely_e21.js";import"./helpers-BGv4x_9E.js";import"./focus-BPh5M4gR.js";import"./VTextField-DxmJk7KO.js";/* empty css                   */import"./VCounter-D7q2bK8a.js";import"./VField-DVCChhSL.js";import"./easing-Bybner-F.js";import"./VInput-LEFvBPzP.js";import"./form-BOjFMnna.js";import"./forwardRefs-C-GTDzx5.js";import"./index-qEAZJ5nL.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-D2P1Ci0o.js";import"./VCheckboxBtn-ChdnI1c8.js";import"./VSelectionControl-DHye2oOJ.js";const ye={class:"auth-logo d-flex align-center gap-x-3"},_e={class:"auth-title"},he={class:"position-relative bg-background w-100 me-0"},ve={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},ke=["src"],we={class:"text-h4 mb-1"},xe={class:"text-capitalize"},Le={class:"d-flex align-center flex-wrap justify-space-between my-6"},ra=X({__name:"login",setup(Ce){const M=F(ue,ne,ie,le,!0),N=F(de,me),c=n(!1),C=q(()=>{var t,e;return((e=(t=A)==null?void 0:t.app)==null?void 0:e.title)??"oft mes"}),R=q(()=>{var t,e;return((e=(t=A)==null?void 0:t.app)==null?void 0:e.logo)??null}),T=Y(),P=Z(),U=J(),g=n({email:void 0,password:void 0}),z=n(),i=n({email:"",password:""}),V=n(!1),d=n(!1),u=n(null),j=async()=>{d.value=!0,u.value=null,g.value={email:void 0,password:void 0};try{const t=await fe("/auth/login",{method:"POST",body:{email:i.value.email,password:i.value.password},onResponseError({response:m}){var B,D;console.error("Login error:",m._data);const v=((B=m._data)==null?void 0:B.errors)||null;g.value=v||{email:"Giriş başarısız",password:"Giriş başarısız"},u.value=((D=m._data)==null?void 0:D.message)||(typeof m._data=="string"?m._data:null)||"Giriş işlemi başarısız oldu. Lütfen bilgilerinizi kontrol edin."}}),{accessToken:e,userData:b,userAbilityRules:p}=t,l=oe(p),h=V.value?{maxAge:3600*24*30}:{session:!0};L("userAbilityRules",h).value=p,U.update(l);const H=L("userData",h);H.value=b,L("accessToken",h).value=e,await se(()=>{const v=i.value.password==="pass1234"?"/force-password":T.query.to?String(T.query.to):"/home-page";P.push(v)})}catch(t){console.error(t),u.value||(u.value="Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin.")}finally{d.value=!1}},$=()=>{var t;(t=z.value)==null||t.validate().then(({valid:e})=>{e&&j()})};return(t,e)=>{const b=K("RouterLink"),p=re;return y(),Q(te,null,[o(b,{to:"/"},{default:s(()=>[r("div",ye,[a(R)?(y(),k(a(pe),{key:0,nodes:a(R)},null,8,["nodes"])):w("",!0),r("h1",_e,x(a(C)),1)])]),_:1}),o(E,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[o(_,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[r("div",he,[r("div",ve,[o(ce,{"max-width":"613",src:a(M),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),r("img",{class:"auth-footer-mask",src:a(N),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ke)])]),_:1}),o(_,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[o(ge,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[o(G,null,{default:s(()=>[r("h4",we,[r("span",xe,x(a(C))+"'e hoşgeldiniz' ",1),e[4]||(e[4]=f("! 👋🏻 "))]),e[5]||(e[5]=r("p",{class:"mb-0"}," Lütfen hesabınıza giriş yapın ve maceraya başlayın... ",-1))]),_:1,__:[5]}),o(G,null,{default:s(()=>[a(d)?(y(),k(S,{key:0,type:"info",class:"mb-4"},{default:s(()=>e[6]||(e[6]=[f(" Giriş yapılıyor, lütfen bekleyin... ")])),_:1,__:[6]})):w("",!0),a(u)?(y(),k(S,{key:1,type:"error",class:"mb-4"},{default:s(()=>[f(x(a(u)),1)]),_:1})):w("",!0),o(a(Ve),{ref_key:"refVForm",ref:z,onSubmit:W($,["prevent"])},{default:s(()=>[o(E,null,{default:s(()=>[o(_,{cols:"12"},{default:s(()=>[o(p,{modelValue:a(i).email,"onUpdate:modelValue":e[0]||(e[0]=l=>a(i).email=l),label:"E-posta",placeholder:"oft@oft.com",type:"email",autofocus:"",rules:["requiredValidator"in t?t.requiredValidator:a(I),"emailValidator"in t?t.emailValidator:a(O)],"error-messages":a(g).email},null,8,["modelValue","rules","error-messages"])]),_:1}),o(_,{cols:"12"},{default:s(()=>[o(p,{modelValue:a(i).password,"onUpdate:modelValue":e[1]||(e[1]=l=>a(i).password=l),label:"Şifre",placeholder:"············",rules:["requiredValidator"in t?t.requiredValidator:a(I)],type:a(c)?"text":"password",autocomplete:"password","error-messages":a(g).password,"append-inner-icon":a(c)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=l=>c.value=!a(c))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),r("div",Le,[o(be,{modelValue:a(V),"onUpdate:modelValue":e[3]||(e[3]=l=>ee(V)?V.value=l:null),label:"Beni Hatırla"},null,8,["modelValue"]),o(b,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>e[7]||(e[7]=[f(" Şifremi Unuttum? ")])),_:1,__:[7]})]),o(ae,{block:"",type:"submit",loading:a(d),disabled:a(d)},{default:s(()=>e[8]||(e[8]=[f(" Giriş Yap ")])),_:1,__:[8]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{ra as default};
