import{d as _,aO as u,r as d,g as k,f as s,b as l,aB as p,e as t,ar as v,as as h,u as b,aJ as C,L as V,aI as g,o as w}from"./main-VwnjjnrB.js";import{V as x,a as D}from"./VCard-C3gf03RA.js";import{V as B}from"./VCardText-BqXbois2.js";import"./createSimpleFunctional-BV405c1c.js";import"./VAvatar-DhNTqQJV.js";import"./VImg-BRMY-HsE.js";import"./index-kNuShaCx.js";const T={class:"mt-6"},Y=["src"],U=_({__name:"yemek-listesi",setup(F){const m=u("userAbilityRules").value||[];let o=!1;m.forEach((e,a)=>{(e.action==="all"&&e.subject==="Planlama"||e.action==="read"&&e.subject==="Planlama")&&(o=!0)});const i=d(null),r=d("/storage/yemeklistesi/yemeklistesi.pdf"),c=u("userData");function f(e){var n;const a=(n=e.target.files)==null?void 0:n[0];a&&(i.value=a)}async function y(){if(!i.value)return;const e=new FormData;e.append("pdf",i.value),e.append("user_id",c.value.id);try{await g.post("/api/upload-yemek-listesi",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Yemek listesi yüklendi!"),r.value="/storage/yemeklistesi/yemeklistesi.pdf?"+new Date().getTime()}catch(a){alert("Yükleme başarısız oldu."),console.error(a)}}return(e,a)=>(w(),k(x,null,{default:s(()=>[l(D,null,{default:s(()=>a[0]||(a[0]=[p("Yemek Listesi")])),_:1,__:[0]}),l(B,null,{default:s(()=>[t("div",null,[v(t("form",{onSubmit:C(y,["prevent"])},[t("input",{type:"file",accept:"application/pdf",onChange:f},null,32),l(V,{type:"submit",color:"primary",class:"mt-2"},{default:s(()=>a[1]||(a[1]=[p("Yükle")])),_:1,__:[1]})],544),[[h,b(o)]])]),t("div",T,[t("iframe",{src:r.value+"#toolbar=0&navpanes=0&scrollbar=0",width:"100%",height:"800px",style:{border:"none"}},null,8,Y)])]),_:1})]),_:1}))}});export{U as default};
