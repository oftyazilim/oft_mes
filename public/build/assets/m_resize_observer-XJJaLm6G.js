import{dM as j,ei as q,dq as E,de as T,dg as p}from"./main-XwRbLdDd.js";import{g as f,l as D,d as u,af as C}from"./ui.errors-CQ3w3T6k.js";const $=f(),A={getXhr:()=>new $.XMLHttpRequest},H=j(A),S=f(),O=function(e){const t=u.createElement("script");for(const n in e)t[n]=e[n];return t},x=function(e){return u.getHead().appendChild(e)},k=function(e){e.parentNode.removeChild(e)},g=function(e){const t=O({text:e});x(t),k(t)},X=function(e){const t=O({src:e});return new Promise(((n,s)=>{const r={load:n,error:s},a=function(o){r[o.type](),k(t)};for(const o in r)u.listen(t,o,a);x(t)}))};function m(e){return(e.method||"GET").toUpperCase()}const N=function(e){const t=[];for(const n in e){let s=e[n];s!==void 0&&(s===null&&(s=""),typeof s=="function"&&(s=s()),t.push(`${encodeURIComponent(n)}=${encodeURIComponent(s)}`))}return t.join("&")},U=function(e){let t;return e.data&&!e.upload&&m(e)!=="GET"&&(t="application/x-www-form-urlencoded;charset=utf-8"),e.contentType||t},W=function(e){const t=e.dataType||"*",n="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",s={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",jsonp:n,script:n};return q(s,e.accepts,!0),s[t]?s[t]+(t!=="*"?", */*; q=0.01":""):s["*"]},z=function(e){const t=e.headers||{};return t["Content-Type"]=t["Content-Type"]||U(e),t.Accept=t.Accept||W(e),!e.crossDomain&&!t["X-Requested-With"]&&(t["X-Requested-With"]="XMLHttpRequest"),t},F=function(e){if(e.dataType==="jsonp"){const t=Math.random().toString().replace(/\D/g,""),n=e.jsonpCallback||`dxCallback${Date.now()}_${t}`,s=e.jsonp||"callback";return e.data=e.data||{},e.data[s]=n,n}},P=function(e,t){let n=e.data;const s=typeof n=="string";let r=e.url||S.location.href;return!s&&!e.cache&&(n=n||{},n._=Date.now()),n&&!e.upload&&(s||(n=N(n)),m(e)==="GET"?(n!==""&&(r+=(r.indexOf("?")>-1?"&":"?")+n),n=null):t["Content-Type"]&&t["Content-Type"].indexOf("application/x-www-form-urlencoded")>-1&&(n=n.replace(/%20/g,"+"))),{url:r,parameters:n}},I=function(e){if(!D())return!0;let t=!1;const n=u.createElement("a"),s=u.createElement("a");n.href=S.location.href;try{s.href=e,s.href=s.href,t=`${n.protocol}//${n.host}`!=`${s.protocol}//${s.host}`}catch{t=!0}return t},G=f(),l="success",d="error",L="timeout",J="nocontent",B="parsererror",K=function(e){return e>=200&&e<300},Q=function(e){return e!==204},V=function(e){return e.responseType&&e.responseType!=="text"||typeof e.responseText!="string"?e.response:e.responseText},Y=function(e,t,n){const s=V(t);switch(n){case"jsonp":g(s);break;case"script":g(s),e.resolve(s,l,t);break;case"json":try{e.resolve(JSON.parse(s),l,t)}catch(r){e.reject(t,B,r)}break;default:e.resolve(s,l,t)}},Z=function(e,t){return e&&setTimeout((function(){t.customStatus=L,t.abort()}),e)},ee=function(e){const t=H.getXhr(),n=new E,s=n.promise(),r=T(e.async)?e.async:!0,{dataType:a}=e,o=e.timeout||0;let h;e.crossDomain=I(e.url);const b=a==="jsonp"||a==="script";e.cache===void 0&&(e.cache=!b);const v=F(e),i=z(e),w=P(e,i),{url:y}=w,{parameters:M}=w;if(v&&(G[v]=function(c){n.resolve(c,l,t)}),e.crossDomain&&b){const c=function(){n.reject(t,d)},_=function(){a!=="jsonp"&&n.resolve(null,l,t)};return X(y).then(_,c),s}if(e.crossDomain&&!("withCredentials"in t))return n.reject(t,d),s;if(t.open(m(e),y,r,e.username,e.password),r&&(t.timeout=o,h=Z(o,t)),t.onreadystatechange=function(c){t.readyState===4&&(clearTimeout(h),K(t.status)?Q(t.status)?Y(n,t,a):n.resolve(null,J,t):n.reject(t,t.customStatus||d))},e.upload&&(t.upload.onprogress=e.upload.onprogress,t.upload.onloadstart=e.upload.onloadstart,t.upload.onabort=e.upload.onabort),e.xhrFields)for(const c in e.xhrFields)t[c]=e.xhrFields[c];e.responseType==="arraybuffer"&&(t.responseType=e.responseType);for(const c in i)Object.prototype.hasOwnProperty.call(i,c)&&T(i[c])&&t.setRequestHeader(c,i[c]);return e.beforeSend&&e.beforeSend(t),t.send(M),s.abort=function(){t.abort()},s},ce=j({sendRequest:ee}),R=C.getWindow(),te={observe:p,unobserve:p,disconnect:p};class ne{constructor(){if(!C.hasWindow()||!R.ResizeObserver)return te;this._callbacksMap=new Map,this._observer=new R.ResizeObserver((t=>{t.forEach((n=>{var s;(s=this._callbacksMap.get(n.target))===null||s===void 0||s(n)}))}))}observe(t,n){this._callbacksMap.set(t,n),this._observer.observe(t)}unobserve(t){this._callbacksMap.delete(t),this._observer.unobserve(t)}disconnect(){this._callbacksMap.clear(),this._observer.disconnect()}}const ae=new ne;export{ce as A,ae as r};
