import{_ as ft}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BMEuMvC8.js";import{_ as bt}from"./AppSelect.vue_vue_type_script_setup_true_lang-he36x_CM.js";import{d as yt,r,X as V,G as _t,aZ as we,f9 as gt,w as X,af as wt,b2 as kt,b3 as N,c as F,o as H,l as Ge,e as a,b as l,aI as Ue,v as d,f as i,I as ht,t as f,m as u,b7 as ue,x as ke,d3 as K,a_ as A,ae as M,Z as he,F as Be,ba as Dt}from"./main-Cc9Orlpg.js";import{u as St}from"./pageTitle-DEBwPoct.js";import{D as xt,a as Vt,b as At,c as Et,d as It,e as Tt,f as Nt,g as De,h as Kt,i as Mt}from"./circular-gauge-k1yhPnIv.js";import{a as g,D as Rt}from"./data-grid-BUD0qfS9.js";import{D as Ct,a as $t}from"./popup-D8s3Vvro.js";import{n as P}from"./notify-BJNOBW__.js";import{V as R}from"./VCol-D_4BNsPN.js";import{V as Q,b as ee,c as je}from"./VCard-BBOJNYNq.js";import{V as te}from"./VRow-QOHWLSFo.js";import{V as Pt}from"./VSwitch-CZpb8bkr.js";import{V as Ye}from"./VCardText-COz3V_Oh.js";import{V as We}from"./VTextField-D69fkxJ-.js";import{V as Je}from"./VSpacer-BsGstgbs.js";import{V as Ze}from"./VDialog-HBjdYgcO.js";import{_ as Lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-BGBoeTlN.js";import"./VTextarea-NudZlgYj.js";/* empty css                   */import"./VCounter-DNTlN4wI.js";import"./VImg-CqmwlR3x.js";import"./VField-CxOUgyg2.js";import"./easing-Bybner-F.js";import"./VInput-DPc4yK5S.js";import"./form-Cf4xNTVC.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-DsCTZ7Pw.js";import"./VList-CrkETVce.js";import"./ssrBoot-DI6RWoNM.js";import"./VAvatar-CpDZjsC4.js";import"./VDivider-BG4itgT_.js";import"./dialog-transition-TXShAga6.js";import"./VMenu-BUe4KHdQ.js";import"./VOverlay-D5l9lVIk.js";import"./delay-DgY1_0wu.js";import"./lazy-Dsllghsw.js";import"./scopeId-Dfl_4Vza.js";import"./VCheckboxBtn-BLWdRruf.js";import"./VSelectionControl-CEGQl0CV.js";import"./VChip-CWQ1FXer.js";import"./VSlideGroup-Ba_ahwiT.js";import"./index-D7Tl-msb.js";import"./ui.errors-BfAujpM4.js";import"./m_base_widget-C4F8_TP3.js";import"./format_helper-CUMYyix8.js";import"./m_resize_observer-C1MyCSBi.js";import"./themes-zB3ZtWhL.js";import"./m_row_dragging-5VanwQae.js";import"./m_select_box-2H7ySraY.js";import"./overlay-C9SHwVv-.js";import"./editor-BJEWTaGX.js";/* empty css              */const qt={class:"page-rollform pa-0"},zt={key:0,class:"rf-loading-overlay"},Ft={class:"rf-loader-box"},Ht={key:0,class:"hint-line"},Ot={key:1,class:"warn-line"},Gt={class:"rollform-header"},Ut={class:"gauge-wrap"},Bt={class:"badge-left"},jt={class:"gauge-center-value"},Yt={style:{color:"goldenrod"}},Wt={class:"clock-wrap"},Jt={class:"digital-clock"},Zt={class:"digital-date"},Xt={class:"kpi-row"},Qt={class:"kpi"},ea={class:"kpi-value"},ta={class:"pb-1 ms-1 me-1"},aa={class:"kpi"},la={class:"kpi-value"},oa={class:"pb-1 ms-1 me-1"},ia={class:"kpi"},sa={class:"kpi-value"},na={class:"pb-1 ms-1 me-1"},ra={class:"oee-title"},ua={class:"panel status-panel"},da={class:"form-row mt-2"},va={class:"status-actions justify-between"},ca={class:"status-actions justify-between"},ma={class:"status-metrics mt-4 text-center"},pa={class:"metric-time"},fa={class:"metric-time"},ba={class:"panel status-panel"},ya={width:"60%"},_a={class:"sayac siparis digit"},ga={width:"60%"},wa={class:"sayac siparis digit"},ka={width:"60%"},ha={class:"sayac net digit"},Da={width:"60%"},Sa={class:"sayac net digit"},xa={width:"60%"},Va={class:"sayac kalan digit"},Aa={class:"sayac hurda digit"},Ea={class:"sayac net digit"},Ia={class:"mt-10"},Ta={class:"info"},Na={width:"60%"},Ka={class:"info"},Ma={width:"60%"},Ra={class:"info"},Ca={width:"60%"},$a={class:"info"},Pa={class:"status-actions mt-11 mb-0"},La={class:"panel grid-panel"},qa={class:"mb-2"},za={class:"mb-2"},Fa=yt({__name:"uretim-rollform",setup(Ha){const de=St(),_=r(null);function Se(){var t;try{return`rollform:lastDurusReason:${((t=ve==null?void 0:ve.value)==null?void 0:t.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function Xe(){try{const t=localStorage.getItem(Se());if(!t)return!1;const e=JSON.parse(t);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return _.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const ae=r([]),xe=r(""),Ve=r(!1),o=r(null),O=V(()=>{var t;return((t=o.value)==null?void 0:t.wstation_code)??"..."}),le=V(()=>{var t;return((t=o.value)==null?void 0:t.wstation_name)??"..."}),Qe=V(()=>{var e;const t=(e=o.value)==null?void 0:e.statu_id;return t===0?"rgba(192, 167, 167, 0.30)":t===1?"rgba(180, 50, 50, 1.00)":t===2?"green":"#4b7027"}),G=V(()=>{var t;return((t=o.value)==null?void 0:t.statu_id)===1});de.setTitle(`${O.value} (${le.value})`),document.title=`OFT - ${O.value} | ${le.value}`;const Ae=V(()=>`${O.value} (${le.value})`),et=V(()=>{const t=Number(x.value.oee||0);return t<50?"oee-low":t<70?"oee-mid":t<85?"oee-high":"oee-top"}),oe=()=>{de.setTitle(Ae.value),document.title=`OFT - ${O.value} | ${le.value}`};_t(async()=>{if(await we(),oe(),await pt(),!b.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}ie(),se(),setInterval(se,1e4),setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),p=String(t.getSeconds()).padStart(2,"0");Ee.value=`${e}:${n}:${p}`;const s=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],v=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];Ie.value=`${t.getDate()} ${v[t.getMonth()]} ${t.getFullYear()} ${s[t.getDay()]}`,ie()},1e3),setInterval(W,2e3),ze(),ct(),setTimeout(()=>{j.value||(j.value=!0)},15e3),window.addEventListener("keydown",Te),window.addEventListener("keydown",Re)}),gt(()=>{oe()});const tt=X(()=>de.title,t=>{t!==Ae.value&&oe()},{flush:"post"});wt(()=>{tt(),window.removeEventListener("keydown",Te),window.removeEventListener("keydown",Re)}),X(()=>o.value,()=>{oe(),ie()});const ve=kt("userData");function C(t){const e=Number(t??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const ce=r("00:00:00"),at=r("00:00"),Ee=r("00:00:00"),Ie=r("...");function lt(t){const e=Math.max(0,Math.floor(t||0)),n=Math.floor(e/3600),p=Math.floor(e%3600/60),s=e%60,v=y=>String(y).padStart(2,"0");return`${v(n)}:${v(p)}:${v(s)}`}function ie(){var n;const t=(n=o.value)==null?void 0:n.statu_time;if(t==null){ce.value="00:00:00";return}let e=0;if(typeof t=="number")t>1e12?e=Math.max(0,Math.floor((Date.now()-t)/1e3)):t>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-t)):e=Math.max(0,Math.floor(t));else if(typeof t=="string"){const p=Date.parse(t);Number.isNaN(p)||(e=Math.max(0,Math.floor((Date.now()-p)/1e3)))}else t instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-t.getTime())/1e3)));ce.value=lt(e)}function L(t){const e=t.toLowerCase();return ae.value.find(n=>String(n.description||"").toLowerCase().includes(e))}function Te(t){if(G.value){if(t.key==="F9"){const e=L("çay ve yemek")||L("cay ve yemek")||L("çay & yemek");e&&(_.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}else if(t.key==="F10"){const e=L("çay ve yemek")||L("cay ve yemek")||L("çay & yemek");e&&(_.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}}}const U=r(!1),B=r(""),me=r(null),q=r(!1);let pe=null;function Ne(){var t,e;if(!pe){pe=setTimeout(()=>{pe=null},300);try{(e=(t=me.value)==null?void 0:t.blur)==null||e.call(t)}catch{}Me()}}function Ke(){B.value="",U.value=!0,we(()=>{var t;return(t=me.value)==null?void 0:t.focus()})}async function Me(){var v;const t=Number(B.value);if(!Number.isFinite(t)||t<=0){fe();return}let e=o.value?{...o.value}:null,n=((v=o.value)==null?void 0:v.worder_id)??null,p=-1,s=null;try{if(q.value)return;if(!b.value)throw new Error("İstasyon yok");q.value=!0;const y=typeof performance<"u"&&performance.now?performance.now():Date.now();if(e){const c=Number(e.scrap_qty||0);o.value={...e,scrap_qty:c+t}}if(n&&(p=D.value.findIndex(c=>c.isEmriID===n),p>=0)){s=Number(D.value[p].hurda||0);const c={...D.value[p],hurda:s+t};D.value.splice(p,1,c)}await N.post("/api/uretim-rollform/hurda-gir",{station_id:b.value,qty:t});const m=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Hurda] POST tamam: ${(m-y).toFixed(0)}ms (qty=${t})`)}catch{}P({message:"Hurda kaydedildi",type:"success",displayTime:1200}),U.value=!1,Promise.allSettled([W(),ze(),se()])}catch(y){console.error("hurda kayıt hata",y);try{if(n!=null){const m=D.value.findIndex(c=>c.isEmriID===n);if(m>=0&&s!=null){const c={...D.value[m],hurda:s};D.value.splice(m,1,c)}}}catch{}try{e!==null&&(o.value=e)}catch{}P({message:"Hurda kaydedilemedi",type:"error",displayTime:2e3})}finally{q.value=!1}}function fe(){B.value="",U.value=!1}function Re(t){t.key==="F8"&&(Ke(),t.preventDefault())}r("uretim-disi");const ot=r(!1),j=r(!1),Ce=r(!1),$e=r(!1),Pe=r(!1),Le=r(!1),qe=r(!1),it=V(()=>Ce.value&&$e.value&&Pe.value&&Le.value&&qe.value);X(it,t=>{t&&!j.value&&(j.value=!0)});const st=V(()=>!j.value),x=r({availability:0,performance:0,quality:0,oee:0}),nt=r(null);async function se(){try{if(!b.value)return;const{data:t}=await N.get("/api/uretim-rollform/kpi",{params:{station_id:b.value}});if(t!=null&&t.kpi){const e=n=>Math.round(Number(n||0)*100);x.value={availability:e(t.kpi.availability),performance:e(t.kpi.performance),quality:e(t.kpi.quality),oee:e(t.kpi.oee)},t.shift&&(nt.value={id:t.shift.id,start:t.shift.start.substring(11,16),end:t.shift.end.substring(11,16)}),ot.value=!0,Pe.value=!0}}catch(t){console.error("fetchKpiDirect error",t)}}const D=r([]),rt=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:t=>{var e;return ut((e=t==null?void 0:t.row)==null?void 0:e.data)}}],$=r(!1),Y=r(null),w=r(null);function ut(t){w.value=t,Y.value=null,$.value=!0}async function be(){if(!w.value)return;const t=Number(Y.value??0),e=b.value;if(!e)return;const n={wstation_id:e,worder_id:Number(w.value.isEmriID??0),worder_no:w.value.isEmriNo,item_id:0,item_code:w.value.stokKodu,item_name:w.value.stokAdi,item_length:t,order_qty:Number(w.value.plnAd??0),net_qty:Number(w.value.urtAd??0),scrap_qty:Number(w.value.hurda??0)};try{await N.post("/api/uretim-rollform/activate-workorder",n),$.value=!1,W()}catch(p){console.error("Aktivasyon hatası",p)}}async function W(){try{if(!b.value){o.value=null;return}const t=await N.get("/api/kapasite-works-info",{params:{station_id:b.value}}),e=Array.isArray(t.data)?t.data:[];o.value=e.length>0?e[0]:null,ie()}catch(t){console.error("WorksInfo alınamadı",t),o.value=null}finally{$e.value=!0}}async function ze(){try{if(!b.value){D.value=[];return}const{data:t}=await N.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:b.value}}),e=(t||[]).map(n=>({grp:0,isEmriID:n.isemri_id,isEmriNo:n.isemri_no,stokKodu:n.stok_kodu,stokAdi:n.stok_adi,plnAd:Number(n.siparis_miktari??0),ilvAd:0,klnAd:Number(n.kalan_miktar??0),urtAd:Number(n.uretilen_net_miktar??0),hurda:Number(n.toplam_hurda_miktari??0),plnSure:Number(n.operasyon_suresi??0),grcSure:0}));D.value=e}catch(t){console.error("İş emirleri alınamadı",t)}finally{Le.value=!0}}const S=r(!1),k=r(!1),ne=r(!0),ye=r(null);function re(t=0){var e,n,p;try{const s=((e=ye.value)==null?void 0:e.$el)||((p=(n=ye.value)==null?void 0:n.$refs)==null?void 0:p.root)||null;if(s){const v=s.querySelector("input")||s.querySelector('[role="combobox"]');if(v){v.focus(),document.activeElement!==v&&t<3&&setTimeout(()=>re(t+1),40);return}}t<5&&setTimeout(()=>re(t+1),50)}catch{}}function dt(){setTimeout(()=>re(),10)}const _e=r(!0),vt=V(()=>({width:110,marginBottom:30,type:"success",text:k.value?"Kaydediliyor...":"Kaydet",stylingMode:"contained",elementAttr:{class:k.value?"btn-loading":""},disabled:k.value,onClick:()=>{k.value||ge()}}));function ct(){b.value&&N.get("/api/durus-sebepleri-al",{params:{istasyon:b.value}}).then(t=>{var e;ae.value=((e=t.data)==null?void 0:e.durusSebepleri)||[]}).catch(t=>{console.error("Duruş sebepleri alınamadı",t)}).finally(()=>{qe.value=!0})}function Fe(){_.value={break_reason_code:"000",description:"GİRİLMEDİ"},S.value=!0,we(()=>re())}async function ge(){var t;if(!k.value){if(!_.value){P({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((t=o.value)!=null&&t.worder_id)){P({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),S.value=!1;return}if(!b.value){P({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{k.value=!0,ne.value=!1;const e=typeof performance<"u"&&performance.now?performance.now():Date.now();await N.post("/api/duruskaydet-mekanik",{istasyonID:b.value,selectedDurus:_.value});const n=typeof performance<"u"&&performance.now?performance.now():Date.now();try{console.info(`[Duruş] POST tamam: ${(n-e).toFixed(0)}ms (code=${_.value.break_reason_code})`)}catch{}P({message:"Duruş kaydedildi.",type:"success",displayTime:1600});try{localStorage.setItem(Se(),JSON.stringify(_.value))}catch{}S.value=!1,Promise.allSettled([W(),se()])}catch(e){console.error("Duruş kaydedilemedi",e),P({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{k.value=!1,ne.value=!0}}}function mt(t){ne.value||(t.cancel=!0)}X(S,(t,e)=>{e&&!t&&W()});const He=r(null);X(()=>{var t;return(t=o.value)==null?void 0:t.statu_id},async(t,e)=>{t===1&&He.value!==1?_e.value?!Xe()&&!S.value&&Fe():S.value||Fe():t!==1&&(S.value&&(k.value=!1,ne.value=!0,S.value=!1),_.value=null),He.value=t??null,_e.value&&(_e.value=!1)});const b=r(null),z=r(null);async function pt(){try{z.value=null;const{data:t}=await N.get("/api/uretim-rollform/detect-station");if(t&&t.station_id)b.value=Number(t.station_id),Ce.value=!0;else{b.value=null;const e=t!=null&&t.ip?` – tespit edilen IP: ${t.ip}`:"";z.value="İstasyon bulunamadı (IP eşleşmedi)"+e}}catch(t){z.value="İstasyon tespiti hata: "+((t==null?void 0:t.message)||"bilinmiyor")}}return(t,e)=>{const n=bt,p=ft;return H(),F("div",qt,[st.value?(H(),F("div",zt,[a("div",Ft,[e[12]||(e[12]=a("div",{class:"rf-spinner","aria-hidden":"true"},null,-1)),e[13]||(e[13]=a("h2",null,"Veriler yükleniyor",-1)),e[14]||(e[14]=a("p",null,"İstasyon, aktif iş emri, sayaç ve KPI verileri hazırlanıyor. Lütfen bekleyin…",-1)),!b.value&&!z.value?(H(),F("small",Ht,"İstasyon tespiti yapılıyor...")):z.value?(H(),F("small",Ot,d(z.value)+" – yeniden deniyor...",1)):Ge("",!0)])])):Ge("",!0),a("div",Gt,[l(te,{class:"match-height"},{default:i(()=>[l(R,{cols:"12",md:"3",sm:"6"},{default:i(()=>[l(Q,{class:"pa-3"},{default:i(()=>{var s,v,y;return[a("section",null,[l(ee,{class:"durum-title",style:ht({backgroundColor:Qe.value})},{default:i(()=>{var m,c;return[f(d(((m=o.value)==null?void 0:m.statu_id)===0?"KAPALI":((c=o.value)==null?void 0:c.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[20]||(e[20]=a("hr",null,null,-1)),a("div",Ut,[a("div",Bt,d(O.value),1),l(u(xt),{class:"oee-gauge",value:(s=o.value)==null?void 0:s.speed,subvalues:(v=o.value)==null?void 0:v.speed_target,tooltip:t.gaugeTooltip,size:t.gaugeSize},{default:i(()=>{var m;return[l(u(Vt),{"start-angle":225,"end-angle":-45}),l(u(At),{"start-value":0,"end-value":(m=o.value)==null?void 0:m.speed_max,"tick-interval":10,"minor-tick-interval":5},{default:i(()=>[l(u(Et),{length:8,color:"#666"}),l(u(It),{length:4,color:"#444"}),l(u(Tt),{"use-range-colors":!0,font:t.gaugeLabelFont},null,8,["font"])]),_:1},8,["end-value"]),l(u(Nt),{"background-color":"#20252b",offset:10,width:10},{default:i(()=>{var c,E,I,h,T;return[l(u(De),{"start-value":0,"end-value":.4*((c=o.value)==null?void 0:c.speed_max),color:"#ce6978"},null,8,["end-value"]),l(u(De),{"start-value":.4*((E=o.value)==null?void 0:E.speed_max),"end-value":.7*((I=o.value)==null?void 0:I.speed_max),color:"#caa93b"},null,8,["start-value","end-value"]),l(u(De),{"start-value":.7*((h=o.value)==null?void 0:h.speed_max),"end-value":(T=o.value)==null?void 0:T.speed_max,color:"#1e8e3e"},null,8,["start-value","end-value"])]}),_:1}),l(u(Kt),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(u(Mt),{enabled:!1})]}),_:1},8,["value","subvalues","tooltip","size"]),a("div",jt,[e[15]||(e[15]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız",-1)),a("div",Yt,d((y=o.value)==null?void 0:y.speed),1)])]),a("div",Wt,[a("div",Jt,d(Ee.value),1),a("div",Zt,d(Ie.value),1)]),a("div",Xt,[a("div",Qt,[e[16]||(e[16]=a("div",null,"Meço %",-1)),a("div",ea,[f(d(x.value.availability)+" ",1),a("div",ta,[l(ue,{"model-value":x.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",aa,[e[17]||(e[17]=a("div",null,"Performans %",-1)),a("div",la,[f(d(x.value.performance)+" ",1),a("div",oa,[l(ue,{"model-value":x.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",ia,[e[18]||(e[18]=a("div",null,"Kalite %",-1)),a("div",sa,[f(d(x.value.quality)+" ",1),a("div",na,[l(ue,{"model-value":x.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(te,null,{default:i(()=>[l(R,{cols:"12",class:"text-center"},{default:i(()=>[a("div",ra,[e[19]||(e[19]=f("OEE % ")),a("span",{class:ke(["kpi-oee",et.value])},d(x.value.oee),3)])]),_:1})]),_:1})])]}),_:1})]),_:1}),l(R,{cols:"12",md:"4",sm:"6"},{default:i(()=>[l(Q,{class:"pa-3"},{default:i(()=>[l(ee,{class:"panel-title pa-0"},{default:i(()=>e[21]||(e[21]=[f("DURUM BİLGİLERİ")])),_:1,__:[21]}),e[29]||(e[29]=a("hr",null,null,-1)),a("section",ua,[a("div",da,[e[22]||(e[22]=a("label",null,"Duruş Sebebi (F10 – Yeni Duruş)",-1)),l(n,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),items:ae.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!G.value||k.value,class:ke({"app-select--force-disabled":!G.value||k.value}),onKeydown:K(A(ge,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"]),l(p,{modelValue:xe.value,"onUpdate:modelValue":e[1]||(e[1]=s=>xe.value=s),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",va,[l(M,{variant:"tonal",color:"error",size:"small"},{default:i(()=>e[23]||(e[23]=[f("Açıklama Gir")])),_:1,__:[23]}),l(Pt,{color:"error",modelValue:Ve.value,"onUpdate:modelValue":e[2]||(e[2]=s=>Ve.value=s),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",ca,[l(M,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:i(()=>[e[24]||(e[24]=f(" F9 - Çay Molası ")),l(he,{end:"",icon:"tabler-mug"})]),_:1,__:[24]}),l(M,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:i(()=>[e[25]||(e[25]=f(" F10 - Yemek Molası ")),l(he,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[25]})]),a("div",ma,[a("div",null,[e[26]||(e[26]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",pa,d(ce.value),1)]),a("div",null,[e[27]||(e[27]=a("div",{class:"label"},"Vardiya",-1)),a("div",fa,d(at.value),1)])]),e[28]||(e[28]=a("div",{class:"uclu text-center mt-4"},[a("div",null,[a("div",{class:"label"},"Çalışma"),a("div",{class:"metric-time ok"},"00:00")]),a("div",null,[a("div",{class:"label"},"Duruş"),a("div",{class:"metric-time warn"},"00:00")]),a("div",null,[a("div",{class:"label"},"Boşta"),a("div",{class:"metric-time"},"02:00")])],-1))])]),_:1,__:[29]})]),_:1}),l(R,{cols:"12",md:"5",sm:"6"},{default:i(()=>[l(Q,{class:"pa-3"},{default:i(()=>{var s,v,y;return[l(ee,{class:"panel-title pa-0"},{default:i(()=>e[30]||(e[30]=[f("ÜRETİM RAKAMLARI")])),_:1,__:[30]}),e[43]||(e[43]=a("hr",null,null,-1)),a("section",ba,[l(ue,{"model-value":(((s=o.value)==null?void 0:s.net_qty)+((v=o.value)==null?void 0:v.counter))/((y=o.value)==null?void 0:y.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(te,null,{default:i(()=>[l(R,{cols:"5"},{default:i(()=>{var m,c,E,I,h,T,J,Z;return[a("div",null,[a("div",ya,[e[31]||(e[31]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",_a,d(C((m=o.value)==null?void 0:m.order_qty)),1)]),a("div",ga,[e[32]||(e[32]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",wa,d(C((c=o.value)==null?void 0:c.net_qty)),1)]),a("div",ka,[e[33]||(e[33]=a("div",{class:"label"},"Sayaç",-1)),a("div",ha,d(C((E=o.value)==null?void 0:E.counter)),1)]),a("div",Da,[e[34]||(e[34]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",Sa,d(C(((I=o.value)==null?void 0:I.net_qty)+((h=o.value)==null?void 0:h.counter))),1)]),a("div",xa,[e[35]||(e[35]=a("div",{class:"label"},"Kalan",-1)),a("div",Va,d(C((((T=o.value)==null?void 0:T.order_qty)??0)-((J=o.value)==null?void 0:J.counter)-(((Z=o.value)==null?void 0:Z.net_qty)??0))),1)])])]}),_:1}),l(R,{cols:"7"},{default:i(()=>{var m,c,E,I;return[a("div",null,[l(te,null,{default:i(()=>[l(R,{cols:"6"},{default:i(()=>{var h;return[e[36]||(e[36]=a("div",{class:"label"},"Hurda",-1)),a("div",Aa,d(C((h=o.value)==null?void 0:h.scrap_qty)),1)]}),_:1,__:[36]}),l(R,{cols:"6"},{default:i(()=>{var h,T,J,Z,Oe;return[e[37]||(e[37]=a("div",{class:"label"},"O.A.%",-1)),a("div",Ea,d(((h=o.value)==null?void 0:h.net_qty)===0||((T=o.value)==null?void 0:T.order_qty)===0?0:((((J=o.value)==null?void 0:J.net_qty)+((Z=o.value)==null?void 0:Z.counter))/((Oe=o.value)==null?void 0:Oe.order_qty)*100).toFixed(0)),1)]}),_:1,__:[37]})]),_:1}),a("div",Ia,[e[38]||(e[38]=a("div",null,"İş Emri No:",-1)),a("div",Ta,d((m=o.value)==null?void 0:m.worder_no),1)]),a("div",Na,[e[39]||(e[39]=a("div",null,"Ürün Kodu:",-1)),a("div",Ka,d((c=o.value)==null?void 0:c.item_code),1)]),a("div",Ma,[e[40]||(e[40]=a("div",null,"Ürün Adı:",-1)),a("div",Ra,d((E=o.value)==null?void 0:E.item_name),1)])]),a("div",Ca,[e[41]||(e[41]=a("div",null,"Ürün Boyu:",-1)),a("div",$a,d(C((I=o.value)==null?void 0:I.item_length)),1)]),a("div",Pa,[l(M,{id:"hurdaGir",variant:"outlined",color:"error",width:"100%",onClick:Ke},{default:i(()=>[e[42]||(e[42]=f(" F8 - Hurda Girişi ")),l(he,{end:"",icon:"tabler-trash"})]),_:1,__:[42]})])]}),_:1})]),_:1})])]}),_:1,__:[43]})]),_:1})]),_:1})]),l(Ze,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=s=>U.value=s),"max-width":"400"},{default:i(()=>[l(Q,null,{default:i(()=>[l(ee,null,{default:i(()=>e[44]||(e[44]=[f("Hurda Girişi")])),_:1,__:[44]}),l(Ye,null,{default:i(()=>[l(We,{ref_key:"hurdaInputRef",ref:me,modelValue:B.value,"onUpdate:modelValue":e[3]||(e[3]=s=>B.value=s),label:"Hurda Miktarı",type:"number","hide-details":"",min:1,step:"1",autofocus:"",onKeydown:[K(A(Ne,["prevent"]),["enter"]),K(A(fe,["prevent"]),["esc"])],onKeyup:K(A(Ne,["prevent"]),["enter"])},null,8,["modelValue","onKeydown","onKeyup"]),e[45]||(e[45]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[45]}),l(je,null,{default:i(()=>[l(Je),l(M,{variant:"text",color:"grey",onClick:fe},{default:i(()=>e[46]||(e[46]=[f("İptal (Esc)")])),_:1,__:[46]}),l(M,{variant:"elevated",color:"error",onClick:Me,loading:q.value,disabled:q.value},{default:i(()=>[q.value?(H(),F(Be,{key:0},[l(Dt,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[47]||(e[47]=f(" Kaydediliyor... "))],64)):(H(),F(Be,{key:1},[f("Kaydet (Enter)")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[53]||(e[53]=Ue('<div class="mid-actions" data-v-692bc578><div class="action-left" data-v-692bc578><button class="btn" data-v-692bc578>İş Emrini Kapat</button><button class="btn btn-primary" data-v-692bc578>Çalışmaya Başla</button><button class="btn" data-v-692bc578>Operasyon Gir</button><button class="btn" data-v-692bc578>Teknik Resim</button><button class="btn" data-v-692bc578>Ürün Etiketi Bas</button><button class="btn icon" data-v-692bc578>🔍 Ara</button></div><div class="action-right" data-v-692bc578><button class="btn btn-warn" data-v-692bc578>Vardiya Bitir</button><button class="btn icon" data-v-692bc578>🟨</button><button class="btn icon" data-v-692bc578>🗂️</button><button class="btn icon" data-v-692bc578>⏻</button></div></div>',1)),a("section",La,[l(u(Rt),{class:"orders-grid","data-source":D.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:i(()=>[l(u(g),{type:"buttons",width:"30",buttons:rt}),l(u(g),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(u(g),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(u(g),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(u(g),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(u(g),{"data-field":"stokAdi",caption:"STOK ADI"}),l(u(g),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(g),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}})]),_:1},8,["data-source"])]),e[54]||(e[54]=Ue('<div class="bottom-tabs" data-v-692bc578><button class="tab active" data-v-692bc578>İş Emirleri</button><button class="tab" data-v-692bc578>Duruşlar</button><button class="tab" data-v-692bc578>Hurdalar</button><button class="tab" data-v-692bc578>Ölçümler</button><button class="tab" data-v-692bc578>Kısayollar</button></div>',1)),l(Ze,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=s=>$.value=s),"max-width":"420",onKeydown:e[9]||(e[9]=K(A(s=>$.value=!1,["prevent","stop"]),["esc"]))},{default:i(()=>[l(Q,null,{default:i(()=>[l(ee,null,{default:i(()=>e[48]||(e[48]=[f("İş Emrini Aktif Et")])),_:1,__:[48]}),l(Ye,null,{default:i(()=>{var s,v,y;return[a("form",{onSubmit:A(be,["prevent"])},[a("div",qa,[a("strong",null,d((s=w.value)==null?void 0:s.isEmriNo),1),f(" – "+d((v=w.value)==null?void 0:v.stokKodu),1)]),a("div",za,d((y=w.value)==null?void 0:y.stokAdi),1),l(We,{ref:"activateLengthInput",modelValue:Y.value,"onUpdate:modelValue":e[5]||(e[5]=m=>Y.value=m),modelModifiers:{number:!0},type:"number",label:"Ürün Boyu (mm)",variant:"outlined",density:"compact",autofocus:"",onKeydown:[K(A(be,["prevent"]),["enter"]),e[6]||(e[6]=K(A(m=>$.value=!1,["prevent","stop"]),["esc"]))]},null,8,["modelValue","onKeydown"]),e[49]||(e[49]=a("button",{type:"submit",style:{display:"none"}},null,-1))],32)]}),_:1}),l(je,null,{default:i(()=>[l(Je),l(M,{variant:"text",onClick:e[7]||(e[7]=s=>$.value=!1)},{default:i(()=>e[50]||(e[50]=[f("İptal")])),_:1,__:[50]}),l(M,{color:"primary",variant:"flat",onClick:be,disabled:!Y.value},{default:i(()=>e[51]||(e[51]=[f("Onayla")])),_:1,__:[51]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(u($t),{visible:S.value,"onUpdate:visible":e[11]||(e[11]=s=>S.value=s),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":mt,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}},"on-shown":dt},{content:i(()=>[l(te,{class:"pa-4"},{default:i(()=>[l(n,{ref_key:"durusSelectRef",ref:ye,modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=s=>_.value=s),items:ae.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!G.value||k.value,class:ke({"app-select--force-disabled":!G.value||k.value}),onKeydown:K(A(ge,["prevent"]),["enter"])},null,8,["modelValue","items","disabled","class","onKeydown"])]),_:1})]),title:i(()=>e[52]||(e[52]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:i(()=>[l(u(Ct),{widget:"dxButton",toolbar:"bottom",location:"center",options:vt.value},null,8,["options"])]),_:1},8,["visible"])])}}}),Hl=Lt(Fa,[["__scopeId","data-v-692bc578"]]);export{Hl as default};
