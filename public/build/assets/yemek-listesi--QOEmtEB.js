import{d as y,b2 as u,r as d,g as k,f as s,o as b,b as i,t as m,e as a,J as v,a_ as h,ae as C,K as V,m as g,b3 as w}from"./main-nZPIp3zM.js";import{V as x,b as D}from"./VCard-DUgU9KaA.js";import{V as T}from"./VCardText-CM2of7En.js";import"./VAvatar-D2P1Ci0o.js";import"./VImg-CLhjQ_EV.js";const B={class:"mt-6"},Y=["src"],S=y({__name:"yemek-listesi",setup(F){const p=u("userAbilityRules").value||[];let o=!1;p.forEach((e,t)=>{(e.action==="all"&&e.subject==="Planlama"||e.action==="read"&&e.subject==="Planlama")&&(o=!0)});const l=d(null),r=d("/storage/yemeklistesi/yemeklistesi.pdf"),c=u("userData");function f(e){var n;const t=(n=e.target.files)==null?void 0:n[0];t&&(l.value=t)}async function _(){if(!l.value)return;const e=new FormData;e.append("pdf",l.value),e.append("user_id",c.value.id);try{await w.post("/api/upload-yemek-listesi",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Yemek listesi yüklendi!"),r.value="/storage/yemeklistesi/yemeklistesi.pdf?"+new Date().getTime()}catch(t){alert("Yükleme başarısız oldu."),console.error(t)}}return(e,t)=>(b(),k(x,null,{default:s(()=>[i(D,null,{default:s(()=>t[0]||(t[0]=[m("Yemek Listesi")])),_:1,__:[0]}),i(T,null,{default:s(()=>[a("div",null,[v(a("form",{onSubmit:h(_,["prevent"])},[a("input",{type:"file",accept:"application/pdf",onChange:f},null,32),i(C,{type:"submit",color:"primary",class:"mt-2"},{default:s(()=>t[1]||(t[1]=[m("Yükle")])),_:1,__:[1]})],544),[[V,g(o)]])]),a("div",B,[a("iframe",{src:r.value+"#toolbar=0&navpanes=0&scrollbar=0",width:"100%",height:"800px",style:{border:"none"}},null,8,Y)])]),_:1})]),_:1}))}});export{S as default};
