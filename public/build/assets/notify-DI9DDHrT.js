import{a_ as l,d1 as h,dc as f}from"./main-Z2bCo_SY.js";import{S,r as c,e as g,M as W,h as k,T as E,a as I,aY as T,N as M}from"./overlay-CZPbzO_l.js";import{i as y,c as v}from"./themes-SlMNtXOK.js";const D=W.add,A=["info","warning","error","success"],m=[],P={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},L={h:0,v:0};D((()=>{const t=k.getDocument();g.subscribeGlobal(t,E.down,(o=>{for(let s=m.length-1;s>=0;s-=1){var e,n;if(!((e=(n=m[s])._proxiedDocumentDownHandler)!==null&&e!==void 0&&e.call(n,o)))return}}))}));class O extends S{_getDefaultOptions(){return l({},super._getDefaultOptions(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})}_defaultOptionsRules(){const o={displayTime:y(v())?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}},e=[{device:s=>s.deviceType==="phone",options:l({width:"calc(100vw - 40px)"},o)},{device:s=>s.deviceType==="tablet",options:l({width:"auto",maxWidth:"80vw"},o)},{device:s=>y(v())&&s.deviceType==="desktop",options:{minWidth:344,maxWidth:568,displayTime:4e3}}];return[...super._defaultOptionsRules(),...e]}_init(){super._init(),this._posStringToObject()}_renderContentImpl(){const{message:o,type:e}=this.option();return this._message=c("<div>").addClass("dx-toast-message").text(o??"").appendTo(this.$content()),this.setAria("role","alert",this._message),e&&A.includes(e.toLowerCase())&&this.$content().prepend(c("<div>").addClass("dx-toast-icon")),super._renderContentImpl()}_render(){super._render(),this.$element().addClass("dx-toast"),this.$wrapper().addClass("dx-toast-wrapper");const{type:o}=this.option();o&&this.$content().addClass(`dx-toast-${o.toLowerCase()}`),this.$content().addClass("dx-toast-content"),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")}_toggleCloseEvents(o){const e=`dx${o.toLowerCase()}`;g.off(this.$content(),e);const n=`closeOn${o}`;this.option(n)&&g.on(this.$content(),e,this.hide.bind(this))}_posStringToObject(){const{position:o}=this.option();if(!h(o))return;const e=o.split(" ")[0],n=o.split(" ")[1],s=l({boundaryOffset:L},P[e]);switch(this.option("position",s),n){case"center":case"left":case"right":if(s&&typeof s=="object"){const a=`${s.at} ${n}`,r=`${s.my} ${n}`;this.option("position.at",a),this.option("position.my",r)}}}_show(){const o=super._show();return o.always((()=>{clearTimeout(this._hideTimeout);const{displayTime:e}=this.option();this._hideTimeout=setTimeout(this.hide.bind(this),e)})),o}_overlayStack(){return m}_zIndexInitValue(){return super._zIndexInitValue()+8e3}_dispose(){clearTimeout(this._hideTimeout),super._dispose()}_optionChanged(o){const{name:e,value:n,previousValue:s}=o;switch(e){case"type":this.$content().removeClass(`dx-toast-${s}`),n&&this.$content().addClass(`dx-toast-${String(n).toLowerCase()}`);break;case"message":this._message&&this._message.text(n);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:super._optionChanged(o)}}}I("dxToast",O);const b=M();let C=null;const $={},_={"top left":{top:10,left:10},"top right":{top:10,right:10},"bottom left":{bottom:10,left:10},"bottom right":{bottom:10,right:10},"top center":t=>({top:10,left:Math.round(t.windowWidth/2-t.toastWidth/2)}),"left center":t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),left:10}),"right center":t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),right:10}),center:t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),left:Math.round(t.windowWidth/2-t.toastWidth/2)}),"bottom center":t=>({bottom:10,left:Math.round(t.windowWidth/2-t.toastWidth/2)})},N={up:(t,o)=>({bottom:t.bottom??o.windowHeight-o.toastHeight-(t.top??0),top:"",left:t.left??"",right:t.right??""}),down:(t,o)=>({top:t.top??o.windowHeight-o.toastHeight-(t.bottom??0),bottom:"",left:t.left??"",right:t.right??""}),left:(t,o)=>({right:t.right??o.windowWidth-o.toastWidth-(t.left??0),left:"",top:t.top??"",bottom:t.bottom??""}),right:(t,o)=>({left:t.left??o.windowWidth-o.toastWidth-(t.right??0),right:"",top:t.top??"",bottom:t.bottom??""})},V=t=>h(t)&&t.includes("top")?"down-push":"up-push",R=t=>{const o=c("<div>").appendTo(T());return $[t]=o,o},j=t=>$[t]||R(t),B=(t,o)=>{const e=`dx-toast-stack dx-toast-stack-${o}-direction`;t.removeAttr("class").addClass(e)},F=(t,o)=>{const e=t?_[t]:_["bottom center"];return typeof e=="function"?e(o):e},z=(t,o,e)=>{const n=t.replace(/-push|-stack/g,""),s=N[n];return s?s(o,e):{top:"",bottom:"",left:"",right:""}},Y=(t,o,e)=>{const{offsetWidth:n,offsetHeight:s}=t.children().first().get(0),a={toastWidth:n,toastHeight:s,windowHeight:b.innerHeight,windowWidth:b.innerWidth},r=h(e)?F(e,a):e,d=z(o,r,a);t.css(d)},U=(t,o,e)=>{const n=f(t)?t:{message:t},s=f(o)?o:void 0,a=f(o)?void 0:o,{onHidden:r,onShowing:d}=n,p={onHidden:i=>{c(i.element).remove(),r==null||r(i)}};if(a!==void 0&&(p.type=a),e!==void 0&&(p.displayTime=e),s!=null&&s.position){const{position:i}=s,w=s.direction||V(i),x=h(i)?i:`${i.top}-${i.left}-${i.bottom}-${i.right}`,u=j(x);return B(u,w),l({},n,p,{container:u,_skipContentPositioning:!0,onShowing:H=>{Y(u,w,i),d==null||d(H)}})}return l({},n,p)},X=(t,o,e)=>{const n=U(t,o,e);C=c("<div>").appendTo(T()),new O(C,n).show()};export{X as n};
