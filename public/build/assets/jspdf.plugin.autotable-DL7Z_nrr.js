import{m as ke,c as be,a as De,a3 as Pe,D as Ne,g as b,d as Me,b as Be,s as Te,r as Fe,a4 as Le,e as Oe,f as He,h as V,a5 as Ae,i as We,G as ze,j as N,l as je,t as Ve,a6 as Ge,u as $e,v as O,w as qe,x as Ye,y as Ue,z as Je,A as P,B as W,a7 as Xe,a8 as Qe,E as Ze,F as et,H as tt,I as rt,J as nt,K as it,M as ot,N as st,V as at,W as lt,X as dt,k as ne,a9 as ht,aa as ut,ab as ct,L as ft,O as pt,ac as gt,Q as yt,Y as vt,Z as L,_ as mt}from"./m_row_dragging-B5Ei9aJD.js";import{d1 as I,d4 as C,dK as B,d9 as T,dN as G,d3 as wt,df as x,dD as xt,dO as re,a$ as k,d_ as St,d6 as _t}from"./main-DSbWB5UW.js";import{B as X,s as E,e as Ct,ai as Rt,q as It}from"./dom_component-CNNp5uUT.js";import{i as Et}from"./themes-B9tQ1-cc.js";import{w as Kt,d as kt,q as Q,s as bt}from"./m_resize_observer-DYzPMN5x.js";const p=I({},ke,{modules:[],foreachNodes(i,e,t){for(let r=0;r<i.length;r++)e(i[r])!==!1&&(t||i[r].hasChildren)&&i[r].children.length&&this.foreachNodes(i[r].children,e,t)}});p.registerModule("columnHeaders",be);class Dt extends Pe{_getFirstItems(e){return super._getFirstItems(e).map((t=>t.data))}getFirstDataColumnIndex(){const e=this.getVisibleColumns(),t=e.length;let r=0;for(let n=0;n<=t-1;n++)if(!C(e[n].command)){r=e[n].index;break}return r}}p.registerModule("columns",{defaultOptions:De.defaultOptions,controllers:{columns:Dt}});const{queryByOptions:ce}=bt,F=i=>i.option("filterMode")==="fullBranch",Pt=function(i,e){const t=[];return e.forEach((r=>{const n=i.getNodeByKey(r);n&&n.children.forEach((o=>{t.push(o.key)}))})),t},ie=(i,e)=>ce(Q(i),{sort:e}).toArray();class Nt extends Ne{_createKeyGetter(){const e=this.getKeyExpr();return B(e)}_createKeySetter(){const e=this.getKeyExpr();return T(e)?e:G(e)}createParentIdGetter(){return B(this.option("parentIdExpr"))}createParentIdSetter(){const e=this.option("parentIdExpr");return T(e)?e:G(e)}_createItemsGetter(){return B(this.option("itemsExpr"))}_createHasItemsGetter(){const e=this.option("hasItemsExpr");return e&&B(e)}_createHasItemsSetter(){const e=this.option("hasItemsExpr");return T(e)?e:e&&G(e)}_updateIndexByKeyObject(e){const t=this;t._indexByKey={},wt(e,((r,n)=>{t._indexByKey[n.key]=r}))}_calculateHasItems(e,t){const r=this,{parentIds:n}=t.storeLoadOptions;let o;const s=F(r);return r._hasItemsGetter&&(n||!t.storeLoadOptions.filter||s)&&(o=r._hasItemsGetter(e.data)),o===void 0&&(!r._isChildrenLoaded[e.key]&&t.remoteOperations.filtering&&(n||s)?o=!0:t.loadOptions.filter&&!t.remoteOperations.filtering&&s?o=e.children.length:o=e.hasChildren),!!o}_fillVisibleItemsByNodes(e,t,r){for(let n=0;n<e.length;n++)e[n].visible&&r.push(e[n]),(this.isRowExpanded(e[n].key,t)||!e[n].visible)&&e[n].hasChildren&&e[n].children.length&&this._fillVisibleItemsByNodes(e[n].children,t,r)}_convertItemToNode(e,t,r){const n=this._keyGetter(e);let o=this._parentIdGetter(e);o=C(o)?o:t;const s=r[o]=r[o]||{key:o,children:[]},a=r[n]=r[n]||{key:n,children:[]};return a.data=e,a.parent=s,a}_createNodesByItems(e,t){const r=this,n=r.option("rootValue"),o={},s=r._nodeByKey={};let a;if(t)for(a=0;a<t.length;a++)o[this._keyGetter(t[a])]=!0;for(a=0;a<e.length;a++){const l=r._convertItemToNode(e[a],n,s);if(l.key===void 0)return;l.visible=!t||!!o[l.key],l.parent&&l.parent.children.push(l)}const d=s[n]||{key:n,children:[]};return d.level=-1,d}_convertDataToPlainStructure(e,t,r){let n;if(this._itemsGetter&&!e.isConverted){r=r||[];for(let o=0;o<e.length;o++){const s=Kt(e[o]);n=this._keyGetter(s),n===void 0&&(n=r.length+1,this._keySetter(s,n)),this._parentIdSetter(s,t===void 0?this.option("rootValue"):t),r.push(s);const a=this._itemsGetter(s);if(a&&a.length){this._convertDataToPlainStructure(a,n,r);const d=this.option("itemsExpr");T(d)||delete s[d]}}return r.isConverted=!0,r}return e}_createIdFilter(e,t){const r=[];for(let n=0;n<t.length;n++)r.push([e,"=",t[n]]);return b.combineFilters(r,"or")}_customizeRemoteOperations(e,t){super._customizeRemoteOperations.apply(this,arguments),e.remoteOperations.paging=!1;let r=!1;this.option("autoExpandAll")&&(e.remoteOperations.sorting=!1,e.remoteOperations.filtering=!1,(!this._lastLoadOptions||t.filtering&&!e.storeLoadOptions.filter)&&!e.isCustomLoading&&(r=!0)),e.isCustomLoading||(this._isReload=this._isReload||t.reload,e.cachedStoreData||(this._isChildrenLoaded={},this._isReload&&(this._nodeByKey={})),this.option("expandNodesOnFiltering")&&(t.filtering||this._isReload&&e.storeLoadOptions.filter)&&(e.storeLoadOptions.filter?r=!0:e.collapseVisibleNodes=!0)),e.expandVisibleNodes=r}_getParentIdsToLoad(e){const t=[];for(let r=0;r<e.length;r++){const n=this.getNodeByKey(e[r]);(!n||n.hasChildren&&!n.children.length)&&t.push(e[r])}return t}_handleCustomizeStoreLoadOptions(e){const t=this.option("rootValue"),r=this.option("parentIdExpr");let{parentIds:n}=e.storeLoadOptions;if(n&&(e.isCustomLoading=!1),super._handleCustomizeStoreLoadOptions.apply(this,arguments),e.remoteOperations.filtering&&!e.isCustomLoading&&(F(this)&&e.cachedStoreData||!e.storeLoadOptions.filter)){const o=e.collapseVisibleNodes?[]:this.option("expandedRowKeys");n=[t].concat(o).concat(n||[]);const s=e.data?this._getParentIdsToLoad(n):n;s.length&&(e.cachedPagingData=void 0,e.data=void 0,e.mergeStoreLoadData=!0,e.delay=this.option("loadingTimeout")),e.storeLoadOptions.parentIds=s,e.storeLoadOptions.filter=this._createIdFilter(r,s)}}_generateInfoToLoad(e,t){const r=this;let n;const o={},s={},a=[],d=r.option("rootValue");let l;for(l=0;l<e.length;l++)n=t?r._parentIdGetter(e[l]):r._keyGetter(e[l]),o[n]=!0;for(l=0;l<e.length;l++){n=t?r._keyGetter(e[l]):r._parentIdGetter(e[l]);const h=t?r.isRowExpanded(n):n!==d;!o[n]&&!s[n]&&h&&(s[n]=!0,a.push(n))}return{keyMap:s,keys:a}}_loadParentsOrChildren(e,t,r){var n,o;let s,a;const{keys:d,keyMap:l}=this._generateInfoToLoad(e,r),h=new x,u=t.remoteOperations.filtering,c=this.option("maxFilterLengthInRequest"),f=((n=t.storeLoadOptions)===null||n===void 0?void 0:n.sort)??((o=t.loadOptions)===null||o===void 0?void 0:o.sort);let g=u?t.storeLoadOptions:t.loadOptions;const m=v=>(u&&(this._cachedStoreData=ie(this._cachedStoreData.concat(v),f)),ie(e.concat(v),f));if(!d.length)return h.resolve(e);let y=d.map((v=>this.getNodeByKey(v))).filter((v=>v&&v.data));if(y.length===d.length&&(r&&(y=y.reduce(((v,j)=>v.concat(j.children)),[])),y.length))return this._loadParentsOrChildren(m(y.map((v=>v.data))),t,r);const w=r?this.option("parentIdExpr"):this.getKeyExpr();s=this._createIdFilter(w,d),encodeURI(JSON.stringify(s)).length>c&&(s=v=>l[r?this._parentIdGetter(v):this._keyGetter(v)],a=u),g=I({},g,{filter:a?null:s});const S=t.fullData?new kt(t.fullData):this._dataSource.store();return this.loadFromStore(g,S).done((v=>{v.length?(a&&(v=Q(v).filter(s).toArray()),this._loadParentsOrChildren(m(v),t,r).done(h.resolve).fail(h.reject)):h.resolve(e)})).fail(h.reject),h}_loadParents(e,t){return this._loadParentsOrChildren(e,t)}_loadChildrenIfNeed(e,t){return F(this)?this._loadParentsOrChildren(e,t,!0):xt(e)}_updateHasItemsMap(e){const{parentIds:t}=e.storeLoadOptions;if(t)for(let r=0;r<t.length;r++)this._isChildrenLoaded[t[r]]=!0}_getKeyInfo(){return{key:()=>"key",keyOf:e=>e.key}}_processChanges(e){let t=[];return e.forEach((r=>{r.type==="insert"?t=t.concat(this._applyInsert(r)):r.type==="remove"?t=t.concat(this._applyRemove(r)):r.type==="update"&&t.push({type:r.type,key:r.key,data:{data:r.data}})})),t}_handleChanging(e){super._handleChanging.apply(this,arguments),e.postProcessChanges=t=>{const r=t.filter((n=>n.type==="update"));return this._processChanges(r)}}_applyBatch(e){const t=this._processChanges(e);super._applyBatch(t)}_setHasItems(e,t){const r=this._hasItemsSetter;e.hasChildren=t,r&&e.data&&r(e.data,t)}_applyInsert(e){const t=this,r=[],n=t.parentKeyOf(e.data),o=t.getNodeByKey(n);if(o){const s=t.option("rootValue"),a=t._convertItemToNode(e.data,s,t._nodeByKey);if(a.hasChildren=!1,a.level=o.level+1,a.visible=!0,o.children.push(a),t._isChildrenLoaded[a.key]=!0,t._setHasItems(o,!0),(!o.parent||t.isRowExpanded(o.key))&&e.index!==void 0){let d=t.items().indexOf(o)+1;d+=e.index>=0?Math.min(e.index,o.children.length):o.children.length,r.push({type:e.type,data:a,index:d})}}return r}_needToCopyDataObject(){return!1}_applyRemove(e){let t=[];const r=this.getNodeByKey(e.key),n=r&&r.parent;if(n){const o=n.children.indexOf(r);o>=0&&(n.children.splice(o,1),n.children.length||this._setHasItems(n,!1),t.push(e),t=t.concat(this.getChildNodeKeys(e.key).map((s=>({type:e.type,key:s})))))}return t}_handleDataLoaded(e){const t=e.data=this._convertDataToPlainStructure(e.data);!e.remoteOperations.filtering&&e.loadOptions.filter&&(e.fullData=ce(Q(e.data),{sort:e.loadOptions&&e.loadOptions.sort}).toArray()),this._updateHasItemsMap(e),super._handleDataLoaded(e),t.isConverted&&this._cachedStoreData&&(this._cachedStoreData.isConverted=!0)}_fillNodes(e,t,r,n){const o=F(this);n=n||0;for(let s=0;s<e.length;s++){const a=e[s];let d=!1;this._fillNodes(e[s].children,t,r,n+1),a.level=n,a.hasChildren=this._calculateHasItems(a,t),a.visible&&a.hasChildren&&(o?a.children.filter((l=>l.visible)).length?d=!0:a.children.length&&p.foreachNodes(a.children,(l=>{l.visible=!0})):d=!0,t.expandVisibleNodes&&d&&r.push(a.key)),(a.visible||a.hasChildren)&&(a.parent.hasChildren=!0)}}_processTreeStructure(e,t){let{data:r}=e;const{parentIds:n}=e.storeLoadOptions,o=[];if(n&&n.length||this._isReload){if(e.fullData&&(r=e.fullData,t=t||e.data),this._rootNode=this._createNodesByItems(r,t),!this._rootNode){e.data=new x().reject(X.Error("E1046",this.getKeyExpr()));return}this._fillNodes(this._rootNode.children,e,o),this._isNodesInitializing=!0,(e.collapseVisibleNodes||o.length)&&this.option("expandedRowKeys",o),this._isReload=!1,this.executeAction("onNodesInitialized",{root:this._rootNode}),this._isNodesInitializing=!1}const s=[];this._fillVisibleItemsByNodes(this._rootNode.children,e,s),e.data=s,this._totalItemsCount=s.length}_handleDataLoadedCore(e){const t=this,{data:r}=e,n=e.storeLoadOptions.filter||e.loadOptions.filter,o=t.option("filterMode");let s;const{parentIds:a}=e.storeLoadOptions,d=n&&(!a||!a.length)&&o!=="standard";if(!e.isCustomLoading){if(d){const l=e.data=new x;return o==="matchOnly"&&(s=r),t._loadParents(r,e).done((h=>{t._loadChildrenIfNeed(h,e).done((u=>{e.data=u,t._processTreeStructure(e,s),super._handleDataLoadedCore.call(t,e),l.resolve(e.data)}))})).fail(l.reject)}t._processTreeStructure(e)}super._handleDataLoadedCore(e)}_handlePush(e){let{changes:t}=e;this._dataSource._reshapeOnPush&&!!t.length&&(this._isReload=!0),t.forEach((o=>{o.index??(o.index=-1)})),super._handlePush.apply(this,arguments)}init(e,t){super.init.apply(this,arguments);const r=this.option("dataStructure");this._keyGetter=this._createKeyGetter(),this._parentIdGetter=this.createParentIdGetter(),this._hasItemsGetter=this._createHasItemsGetter(),this._hasItemsSetter=this._createHasItemsSetter(),r==="tree"&&(this._itemsGetter=this._createItemsGetter(),this._keySetter=this._createKeySetter(),this._parentIdSetter=this.createParentIdSetter()),this._nodeByKey={},this._isChildrenLoaded={},this._totalItemsCount=0,this.createAction("onNodesInitialized")}getKeyExpr(){const e=this.store(),t=e&&e.key(),r=this.option("keyExpr");if(C(t)&&C(r)&&!re(t,r))throw X.Error("E1044");return t||r||"id"}keyOf(e){return this._keyGetter&&this._keyGetter(e)}parentKeyOf(e){return this._parentIdGetter&&this._parentIdGetter(e)}getRootNode(){return this._rootNode}totalItemsCount(){return this._totalItemsCount+this._totalCountCorrection}isRowExpanded(e,t){if(t){let{isExpandedByKey:n}=t;if(!n){const o=this.option("expandedRowKeys")??[];n=t.isExpandedByKey={},o.forEach((s=>{n[s]=!0}))}return!!n[e]}return b.getIndexByKey(e,this.option("expandedRowKeys"),null)>=0}_changeRowExpandCore(e){const t=this.option("expandedRowKeys").slice(),r=b.getIndexByKey(e,t,null);r<0?t.push(e):t.splice(r,1),this.option("expandedRowKeys",t)}changeRowExpand(e){return this._changeRowExpandCore(e),this._isNodesInitializing?new x().resolve():this.load()}getNodeByKey(e){if(this._nodeByKey)return this._nodeByKey[e]}getNodeLeafKeys(){const e=this,t=[];return(e._rootNode?[e._rootNode.key]:[]).forEach((n=>{const o=e.getNodeByKey(n);o&&p.foreachNodes([o],(s=>{!s.children.length&&t.push(s.key)}))})),t}getChildNodeKeys(e){const t=this.getNodeByKey(e),r=[];return t&&p.foreachNodes(t.children,(n=>{r.push(n.key)})),r}loadDescendants(e,t){const r=this,n=new x,o=r.remoteOperations();if(C(e)?e=Array.isArray(e)?e:[e]:e=r.getNodeLeafKeys(),!o.filtering||!e.length)return n.resolve();const s=r._dataSource._createStoreLoadOptions();return s.parentIds=e,r.load(s).done((()=>{if(!t){const a=Pt(r,e);if(a.length){r.loadDescendants(a,t).done(n.resolve).fail(n.reject);return}}n.resolve()})).fail(n.reject),n.promise()}forEachNode(){let e=[],t;if(arguments.length===1){t=arguments[0];const r=this.getRootNode();e=r&&r.children||[]}else arguments.length===2&&(t=arguments[1],e=arguments[0],e=Array.isArray(e)?e:[e]);p.foreachNodes(e,t)}}let $=Nt;const fe={extend(i){$=i($)},create:i=>new $(i)};class Mt extends Be{_getDataSourceAdapter(){return fe}_getNodeLevel(e){let t=-1;for(;e.parent;)e.visible&&t++,e=e.parent;return t}_generateDataItem(e,t){return{rowType:"data",node:e,key:e.key,data:e.data,isExpanded:this.isRowExpanded(e.key,t),level:this._getNodeLevel(e)}}_loadOnOptionChange(){this._dataSource.load()}_isItemEquals(e,t){return e.isSelected!==t.isSelected||e.node&&t.node&&e.node.hasChildren!==t.node.hasChildren||e.level!==t.level||e.isExpanded!==t.isExpanded?!1:super._isItemEquals.apply(this,arguments)}_isCellChanged(e,t,r,n,o){const s=this._columnsController.getFirstDataColumnIndex();return n===s&&e.isSelected!==t.isSelected?!0:super._isCellChanged.apply(this,arguments)}init(){this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed"),super.init.apply(this,arguments)}keyOf(e){const t=this._dataSource;if(t)return t.keyOf(e)}key(){const e=this._dataSource;if(e)return e.getKeyExpr()}publicMethods(){return super.publicMethods().concat(["expandRow","collapseRow","isRowExpanded","getRootNode","getNodeByKey","loadDescendants","forEachNode"])}changeRowExpand(e){if(this._dataSource){const t={key:e},r=this.isRowExpanded(e);if(this.executeAction(r?"onRowCollapsing":"onRowExpanding",t),!t.cancel)return this._dataSource.changeRowExpand(e).done((()=>{this.executeAction(r?"onRowCollapsed":"onRowExpanded",t)}))}return new x().resolve()}isRowExpanded(e,t){return this._dataSource&&this._dataSource.isRowExpanded(e,t)}expandRow(e){return this.isRowExpanded(e)?new x().resolve():this.changeRowExpand(e)}collapseRow(e){return this.isRowExpanded(e)?this.changeRowExpand(e):new x().resolve()}getRootNode(){return this._dataSource&&this._dataSource.getRootNode()}optionChanged(e){switch(e.name){case"rootValue":case"parentIdExpr":case"itemsExpr":case"filterMode":case"expandNodesOnFiltering":case"autoExpandAll":case"hasItemsExpr":case"dataStructure":this._columnsController.reset(),this._items=[],this._refreshDataSource(),e.handled=!0;break;case"expandedRowKeys":case"onNodesInitialized":this._dataSource&&!this._dataSource._isNodesInitializing&&!re(e.value,e.previousValue)&&this._loadOnOptionChange(),e.handled=!0;break;case"maxFilterLengthInRequest":e.handled=!0;break;default:super.optionChanged(e)}}getNodeByKey(e){if(this._dataSource)return this._dataSource.getNodeByKey(e)}getChildNodeKeys(e){if(this._dataSource)return this._dataSource.getChildNodeKeys(e)}loadDescendants(e,t){if(this._dataSource)return this._dataSource.loadDescendants(e,t)}forEachNode(){this._dataSource.forEachNode.apply(this,arguments)}}p.registerModule("data",{defaultOptions:()=>I({},Me.defaultOptions(),{itemsExpr:"items",parentIdExpr:"parentId",rootValue:0,dataStructure:"plain",expandedRowKeys:[],filterMode:"withAncestors",expandNodesOnFiltering:!0,autoExpandAll:!1,onNodesInitialized:null,maxFilterLengthInRequest:1500,paging:{enabled:!1}}),controllers:{data:Mt}});p.registerModule("sorting",Te);const pe="dx-treelist-text-content",Bt=function(i){return E("<div>").addClass(pe).appendTo(i)},Tt=(i,e,t)=>{const r=E("<div>").addClass("dx-treelist-empty-space");return i&&r.addClass("dx-treelist-empty-space--last"),e&&r.addClass(t?"dx-treelist-expanded":"dx-treelist-collapsed"),r};class Ft extends Le{_renderIconContainer(e,t){const r=E("<div>").addClass("dx-treelist-icon-container").appendTo(e);if(t.watch){const n=t.watch((()=>[t.row.level,t.row.isExpanded,t.row.node.hasChildren]),(()=>{r.empty(),this._renderIcons(r,t)}));Ct.on(r,Rt,n)}return e.addClass("dx-treelist-cell-expandable"),this._renderIcons(r,t)}_renderIcons(e,t){const r=super._renderIcons(e,t),{row:n}=t,{level:o}=n;for(let s=0;s<=o;s+=1){const a=s===o,d=a&&n.node.hasChildren;Tt(a,d,n.isExpanded).appendTo(r)}return r}_renderCellCommandContent(e,t){return this._renderIconContainer(e,t),!0}_processTemplate(e,t){var r;const n=this;let o;const s=super._processTemplate(e),a=n._columnsController.getFirstDataColumnIndex();return s&&((r=t.column)===null||r===void 0?void 0:r.index)===a?o={render(d){const l=d.container;n._renderCellCommandContent(l,d.model)&&(d.container=Bt(l)),s.render(d)}}:o=s,o}_updateCell(e,t){e=e.hasClass(pe)?e.parent():e,super._updateCell(e,t)}_rowClick(e){const t=this._dataController,r=E(e.event.target),n=this.isExpandIcon(r),o=t==null?void 0:t.items()[e.rowIndex];n&&o&&t.changeRowExpand(o.key),super._rowClick(e)}_createRow(e){const t=e&&e.node,r=super._createRow.apply(this,arguments);return t&&(this.setAria("level",e.level+1,r),t.hasChildren&&this.setAriaExpandedAttribute(r,e)),r}_getGridRoleName(){return"treegrid"}isExpandIcon(e){return!!e.closest(".dx-treelist-expanded, .dx-treelist-collapsed").length}setAriaExpandedAttribute(e,t){const r=t.isExpanded;this.setAria("expanded",C(r)&&r.toString(),e)}}p.registerModule("rows",{defaultOptions:Fe.defaultOptions,views:{rowsView:Ft}});p.registerModule("contextMenu",Oe);p.registerModule("errorHandling",He);const Lt="dxTreeList-ariaExpandableInstruction";class Ot extends Ae{constructor(){super(...arguments),this._expandableWidgetAriaId=Lt}_getWidgetAriaLabel(){return"dxTreeList-ariaTreeList"}_toggleBestFitMode(e){super._toggleBestFitMode(e),this._rowsView.getTableElement().find(".dx-treelist-cell-expandable").toggleClass(this.addWidgetPrefix("best-fit"),e)}}p.registerModule("gridView",{defaultOptions:V.defaultOptions,controllers:k({},V.controllers,{resizing:Ot}),views:V.views});p.registerModule("headerPanel",We);p.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","editingRowBased","editingFormBased","editingCellBased","editing","grouping","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","headersKeyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);class Ht extends ze{_initMarkup(){super._initMarkup.apply(this,arguments),this.$element().addClass("dx-treelist"),this.getView("gridView").render(this.$element())}static registerModule(){p.registerModule.apply(p,arguments)}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>Et(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0}}}])}_init(){super._init(),this.option("_disableDeprecationWarnings")||b.logHeaderFilterDeprecatedWarningIfNeed(this),p.processModules(this,p),p.callModuleItemsMethod(this,"init")}getGridCoreHelper(){return p}focus(e){super.focus(),C(e)&&this.getController("keyboardNavigation").focus(e)}}It("dxTreeList",Ht);const At=i=>class extends N.extenders.controllers.stateStoring(i){applyState(e){super.applyState(e),this.option("expandedRowKeys",e.expandedRowKeys?e.expandedRowKeys.slice():[])}},Wt=i=>class extends N.extenders.controllers.data(i){getUserState(){const e=super.getUserState();return this.option("autoExpandAll")||(e.expandedRowKeys=this.option("expandedRowKeys")),e}};p.registerModule("stateStoring",k({},N,{extenders:k({},N.extenders,{controllers:k({},N.extenders.controllers,{stateStoring:At,data:Wt})})}));p.registerModule("columnChooser",je);const zt=i=>class extends Ge(i){isRowExpanded(){return this.isRowExpandedHack.apply(this,arguments)}_processItems(){return this._processItemsHack.apply(this,arguments)}_processDataItem(){return this._processDataItemHack.apply(this,arguments)}};p.registerModule("masterDetail",I(!0,{},Ve,{extenders:{controllers:{data:zt}}}));p.registerModule("editorFactory",$e);class jt extends O.controllers.editing{_generateNewItem(e){const t=super._generateNewItem(e);return t.data={key:e},t.children=[],t.level=0,t.parentKey=this.option("rootValue"),t}_isProcessedItem(){return!0}_setInsertAfterOrBeforeKey(e,t){const r=this._dataController.dataSource(),n=t||(r==null?void 0:r.parentKeyOf(e.data));n!==void 0&&n!==this.option("rootValue")?e.insertAfterKey=n:super._setInsertAfterOrBeforeKey.apply(this,arguments)}_getLoadedRowIndex(e,t){const r=this._dataController.dataSource(),n=r==null?void 0:r.parentKeyOf(t.data);return n!==void 0&&n!==this.option("rootValue")?b.getIndexByKey(n,e)>=0&&this._dataController.isRowExpanded(n)?super._getLoadedRowIndex.apply(this,arguments):-1:super._getLoadedRowIndex.apply(this,arguments)}_isEditColumnVisible(){const e=super._isEditColumnVisible.apply(this,arguments),t=this.option("editing");return e||t.allowAdding}_isDefaultButtonVisible(e,t){const r=super._isDefaultButtonVisible.apply(this,arguments),{row:n}=t;return e.name==="add"?this.allowAdding(t)&&n.rowIndex!==this._getVisibleEditRowIndex()&&!(n.removed||n.isNewRow):r}_getEditingButtons(e){const t=super._getEditingButtons.apply(this,arguments);return e.column.buttons||t.unshift(this._getButtonConfig("add",e)),t}_beforeSaveEditData(e){const t=super._beforeSaveEditData.apply(this,arguments);if(e&&e.type!=="insert"){var r;const n=(r=this._dataController)===null||r===void 0?void 0:r.store(),o=n==null?void 0:n.key();if(!C(o))throw X.Error("E1045")}return t}addRowByRowIndex(e){const t=this._dataController.getVisibleRows()[e];return this.addRow(t?t.key:void 0)}addRow(e){return e===void 0&&(e=this.option("rootValue")),super.addRow.call(this,e)}_addRowCore(e,t,r){const n=this.option("rootValue");if(t=this._dataController.dataSource().createParentIdGetter()(e),t!==void 0&&t!==n&&!this._dataController.isRowExpanded(t)){const a=new x;return this._dataController.expandRow(t).done((()=>{setTimeout((()=>{super._addRowCore.call(this,e,t,r).done(a.resolve).fail(a.reject)}))})).fail(a.reject),a.promise()}return super._addRowCore.call(this,e,t,r)}_initNewRow(e,t){return this._dataController.dataSource().createParentIdSetter()(e.data,t),super._initNewRow.apply(this,arguments)}allowAdding(e){return this._allowEditAction("allowAdding",e)}_needToCloseEditableCell(e){return super._needToCloseEditableCell.apply(this,arguments)||e.closest(".dx-treelist-icon-container").length&&this.isEditing()}getButtonLocalizationNames(){const e=super.getButtonLocalizationNames.apply(this);return e.add="dxTreeList-editingAddRowToNode",e}}const Vt=i=>class extends O.extenders.views.rowsView(i){_renderCellCommandContent(e,t){const r=this._editingController,n=t.row&&r.isEditRow(t.row.rowIndex),o=t.isEditing||n;return!t.isOnForm&&!o?super._renderCellCommandContent.apply(this,arguments):!1}validateClick(e){const t=E(e.event.target),r=e.event.type==="dxdblclick"?super._rowDblClick:super._rowClick;return t.closest(".dx-select-checkbox").length?!1:!this.needToCallOriginalClickHandler(e,r)}needToCallOriginalClickHandler(e,t){return E(e.event.target).closest(".dx-treelist-icon-container").length?!1:(t.call(this,e),!0)}_rowClick(e){this.validateClick(e)&&super._rowClickTreeListHack.apply(this,arguments)}_rowDblClick(e){this.validateClick(e)&&super._rowDblClickTreeListHack.apply(this,arguments)}},Gt=i=>class extends qe(i){changeRowExpand(){return this._editingController.refresh(),super.changeRowExpand.apply(this,arguments)}};p.registerModule("editing",{defaultOptions:()=>I(!0,O.defaultOptions(),{editing:{texts:{addRowToNode:St.format("dxTreeList-editingAddRowToNode")}}}),controllers:{editing:jt},extenders:{controllers:{data:Gt},views:{rowsView:Vt,headerPanel:O.extenders.views.headerPanel}}});p.registerModule("editingRowBased",Ye);p.registerModule("editingFormBased",Ue);p.registerModule("editingCellBased",Je);const $t=i=>class extends P.extenders.controllers.editing(i){processDataItem(e){super.processDataItemTreeListHack.apply(this,arguments)}processItems(e,t){return super.processItemsTreeListHack.apply(this,arguments)}};p.registerModule("validating",{defaultOptions:P.defaultOptions,controllers:P.controllers,extenders:{controllers:{editing:$t,editorFactory:P.extenders.controllers.editorFactory},views:P.extenders.views}});const qt=W.defaultOptions;W.extenders.views.rowsView=i=>class extends Xe(i){_handleDataChanged(e){const{operationTypes:t}=e;if(e!=null&&e.isDataChanged&&b.isVirtualRowRendering(this)&&t){const{fullReload:r,pageIndex:n}=t;!r&&n&&this._updateContentPosition()}super._handleDataChanged(e)}};W.extenders.controllers.data=i=>class extends Qe(i){_loadOnOptionChange(){var e;const t=(e=this._dataSource)===null||e===void 0?void 0:e._virtualScrollController;t==null||t.reset(),super._loadOnOptionChange()}};const Yt=i=>class extends Ze(i){changeRowExpand(){return super.changeRowExpand.apply(this,arguments).done((()=>{const e=this.getViewportItemIndex();e>=0&&this.setViewportItemIndex(e)}))}};p.registerModule("virtualScrolling",k({},W,{defaultOptions:()=>I(!0,qt(),{scrolling:{mode:"virtual"}})}));fe.extend(Yt);p.registerModule("filterRow",et);p.registerModule("headerFilter",tt);p.registerModule("filterSync",rt);p.registerModule("filterBuilder",nt);p.registerModule("filterPanel",it);p.registerModule("pager",ot);p.registerModule("columnsResizingReordering",st);p.registerModule("stickyColumns",at);p.registerModule("columnFixing",lt);p.registerModule("adaptivity",dt);const ge="dx-treelist-select-checkbox-container",Ut=function(i,e){return!!i.filter((t=>t===e)).length},Jt=i=>class extends ct(i){_handleDataChanged(e){this._selectionController.isRecursiveSelection()&&(!e||e.changeType!=="updateSelectionState")&&this._selectionController.updateSelectionState({selectedItemKeys:this.option("selectedRowKeys")}),super._handleDataChanged.apply(this,arguments)}loadDescendants(){const e=this,t=super.loadDescendants.apply(e,arguments);return this._selectionController.isRecursiveSelection()&&t.done((()=>{this._selectionController.updateSelectionState({selectedItemKeys:e.option("selectedRowKeys")})})),t}},Xt=i=>class extends i{constructor(){super(...arguments),this._updateSelectColumn=_t}init(){super.init.apply(this,arguments),this._selectionStateByKey={}}_getSelectionConfig(){const e=super._getSelectionConfig.apply(this,arguments),{plainItems:t}=e;return e.plainItems=r=>{let n;return r&&(n=this._dataController.getCachedStoreData()),n||(n=t.apply(this,arguments).map((o=>o.data))),n||[]},e.isItemSelected=r=>{const n=this._dataController.keyOf(r);return this.isRowSelected(n)},e.isSelectableItem=r=>!!r,e.getItemData=r=>r,e.allowLoadByRange=void 0,e}renderSelectCheckBoxContainer(e,t){const r=this.component.getView("rowsView"),n=r._renderSelectCheckBox(e,{value:t.row.isSelected,row:t.row,column:t.column});r._attachCheckBoxClickEvent(n)}_getSelectAllNodeKeys(){const{component:e}=this,t=e.getRootNode(),r={},n=[],o=this.isRecursiveSelection();return t&&p.foreachNodes(t.children,(s=>(s.key!==void 0&&(s.visible||o)&&n.push(s.key),s.visible?o?!1:e.isRowExpanded(s.key,r):!0))),n}isSelectAll(){if((this.option("selectedRowKeys")||[]).length===0)return!1;const{component:t}=this,r=this._getSelectAllNodeKeys(),n=this.isRecursiveSelection();let o=!1;const s=r.filter((a=>{const d=t.isRowSelected(a,n);return d===void 0&&(o=!0),d}));if(!s.length)return o?void 0:!1;if(s.length===r.length)return!0}selectAll(){const e=this._getSelectAllNodeKeys().filter((t=>!this.isRowSelected(t)));return this.focusedItemIndex(-1),this.selectRows(e,!0)}deselectAll(){const e=this._getSelectAllNodeKeys();return this.focusedItemIndex(-1),this.deselectRows(e)}selectedItemKeys(e,t,r,n){const o=this,s=o.option("selectedRowKeys"),d=this.isRecursiveSelection()&&o._normalizeSelectionArgs({keys:C(e)?e:[]},t,!r);return d&&!re(d.selectedRowKeys,s)?(o._isSelectionNormalizing=!0,super.selectedItemKeys(d.selectedRowKeys,!1,!1,!1).always((()=>{o._isSelectionNormalizing=!1})).done((l=>{d.selectedRowsData=l,o._fireSelectionChanged(d)}))):super.selectedItemKeys(e,t,r,n)}changeItemSelection(e,t,r){const n=this.isRecursiveSelection(),o=super.changeItemSelection.bind(this);if(n&&!t.shift){const s=this._dataController.getKeyByRowIndex(e);return this.selectedItemKeys(s,!0,this.isRowSelected(s)).done((()=>{this.isRowSelected(s)&&o(e,t,!0)}))}return super.changeItemSelection.apply(this,arguments)}_updateParentSelectionState(e,t){const r=this;let n=t;const o=e.parent;o&&(o.children.length>1&&(t===!1?n=o.children.some((a=>r._selectionStateByKey[a.key]))?void 0:!1:t===!0&&(n=o.children.some((a=>!r._selectionStateByKey[a.key]))?void 0:!0)),this._selectionStateByKey[o.key]=n,o.parent&&o.parent.level>=0&&this._updateParentSelectionState(o,n))}_updateChildrenSelectionState(e,t){const r=this,{children:n}=e;n&&n.forEach((o=>{r._selectionStateByKey[o.key]=t,o.children.length>0&&r._updateChildrenSelectionState(o,t)}))}_updateSelectionStateCore(e,t){const r=this._dataController;this._selectionStateByKey={};for(let n=0;n<e.length;n++){this._selectionStateByKey[e[n]]=t;const o=r.getNodeByKey(e[n]);o&&(this._updateParentSelectionState(o,t),this._updateChildrenSelectionState(o,t))}}_getSelectedParentKeys(e,t,r){let n;const o=this._dataController.getNodeByKey(e);let s=o&&o.parent,a=[];for(;s&&s.level>=0;){if(a.unshift(s.key),r?!Ut(t,s.key)&&this.isRowSelected(s.key):t.indexOf(s.key)>=0){n=s,a=this._getSelectedParentKeys(n.key,t,r).concat(a);break}else if(r)break;s=s.parent}return n&&a||[]}_getSelectedChildKeys(e,t){const r=[],n=this._dataController.getNodeByKey(e);return n&&p.foreachNodes(n.children,(o=>{const s=t.indexOf(o.key);return s<0&&r.push(o.key),s>0||s<0&&this._selectionStateByKey[o.key]===void 0})),r}_normalizeParentKeys(e,t){const r=this;let n=[e];const o=r._getSelectedParentKeys(e,t.selectedRowKeys);if(o.length){n=n.concat(o),n.forEach((a=>{const d=t.selectedRowKeys.indexOf(a);d>=0&&t.selectedRowKeys.splice(d,1)}));const s=r._getSelectedChildKeys(o[0],n);t.selectedRowKeys=t.selectedRowKeys.concat(s)}}_normalizeChildrenKeys(e,t){const r=this._dataController.getNodeByKey(e);r&&r.children.forEach((n=>{const o=t.selectedRowKeys.indexOf(n.key);o>=0&&t.selectedRowKeys.splice(o,1),this._normalizeChildrenKeys(n.key,t)}))}_normalizeSelectedRowKeysCore(e,t,r,n){const o=this;e.forEach((s=>{if(r&&o.isRowSelected(s)===n)return;o._normalizeChildrenKeys(s,t);const a=t.selectedRowKeys.indexOf(s);n?(a<0&&t.selectedRowKeys.push(s),t.currentSelectedRowKeys.push(s)):(a>=0&&t.selectedRowKeys.splice(a,1),t.currentDeselectedRowKeys.push(s),o._normalizeParentKeys(s,t))}))}_normalizeSelectionArgs(e,t,r){let n;const o=Array.isArray(e.keys)?e.keys:[e.keys],s=this.option("selectedRowKeys")||[];return o.length&&(n={currentSelectedRowKeys:[],currentDeselectedRowKeys:[],selectedRowKeys:t?s.slice(0):[]},this._normalizeSelectedRowKeysCore(o,n,t,r)),n}_updateSelectedItems(e){this.updateSelectionState(e),super._updateSelectedItems(e)}_fireSelectionChanged(){this._isSelectionNormalizing||super._fireSelectionChanged.apply(this,arguments)}_isModeLeavesOnly(e){return e==="leavesOnly"}_removeDuplicatedKeys(e){const t=[],r={};return e.forEach((n=>{r[n]||(r[n]=!0,t.push(n))})),t}_getAllChildKeys(e){const t=[],r=this._dataController.getNodeByKey(e);return r&&p.foreachNodes(r.children,(n=>{t.push(n.key)}),!0),t}_getAllSelectedRowKeys(e){let t=[];return e.forEach((r=>{const n=this._getSelectedParentKeys(r,[],!0),o=this._getAllChildKeys(r);t.push.apply(t,n.concat([r],o))})),t=this._removeDuplicatedKeys(t),t}_getParentSelectedRowKeys(e){const t=this,r=[];return e.forEach((n=>{!t._getSelectedParentKeys(n,e).length&&r.push(n)})),r}_getLeafSelectedRowKeys(e){const t=[],r=this._dataController;return e.forEach((n=>{const o=r.getNodeByKey(n);o&&!o.hasChildren&&t.push(n)})),t}isRecursiveSelection(){const e=this.option("selection.mode"),t=this.option("selection.recursive");return e==="multiple"&&t}updateSelectionState(e){const t=e.removedItemKeys||[],r=e.selectedItemKeys||[];this.isRecursiveSelection()&&(this._updateSelectionStateCore(t,!1),this._updateSelectionStateCore(r,!0))}isRowSelected(e,t){const r=super.isRowSelected.apply(this,arguments);return t=t??this.isRecursiveSelection(),!r&&t?e in this._selectionStateByKey?this._selectionStateByKey[e]:!1:r}getSelectedRowKeys(e){const t=this;if(!t._dataController)return[];let r=super.getSelectedRowKeys.apply(t,arguments);return e&&(this.isRecursiveSelection()&&(r=this._getAllSelectedRowKeys(r)),e!=="all"&&(e==="excludeRecursive"?r=t._getParentSelectedRowKeys(r):t._isModeLeavesOnly(e)&&(r=t._getLeafSelectedRowKeys(r)))),r}getSelectedRowsData(e){const t=this._dataController,r=this.getSelectedRowKeys(e)||[],n=[];return r.forEach((o=>{const s=t.getNodeByKey(o);s&&n.push(s.data)})),n}refresh(){return this._selectionStateByKey={},super.refresh.apply(this,arguments)}},Qt=i=>class extends ut(i){_processTemplate(e,t){const r=this;let n;const o=super._processTemplate(e,t),s=r._columnsController.getFirstDataColumnIndex();return o&&t.rowType==="header"&&t.column.index===s?n={render(a){o.render(a),r.option("selection.mode")==="multiple"&&r.renderSelectAll(a.container,a.model)}}:n=o,n}_renderSelectAllCheckBox(e){const t=E("<div>").addClass(ge),r=this._createSelectAllCheckboxElement();return r.appendTo(t),t.prependTo(e),r}renderSelectAll(e,t){e.addClass("dx-treelist-select-all"),this._renderSelectAllCheckBox(e)}_isSortableElement(e){return super._isSortableElement(e)&&!e.closest(".dx-select-checkbox").length}},Zt=i=>class extends ht(i){_renderIcons(e,t){const r=super._renderIcons(e,t),n=this.option("selection.mode")==="multiple";if(!t.row.isNewRow&&n){const o=E("<div>").addClass(ge);o.appendTo(r),this._selectionController.renderSelectCheckBoxContainer(o,t)}return r}_rowClick(e){const t=E(e.event.target);this.isExpandIcon(t)?super._rowClickForTreeList.apply(this,arguments):super._rowClick.apply(this,arguments)}};p.registerModule("selection",I(!0,{},ne,{defaultOptions:()=>I(!0,ne.defaultOptions(),{selection:{showCheckBoxesMode:"always",recursive:!1}}),extenders:{controllers:{data:Jt,selection:Xt},views:{columnHeadersView:Qt,rowsView:Zt}}}));p.registerModule("search",ft);const er=i=>class extends gt(i){_leftRightKeysHandler(e,t){const r=this.getVisibleRowIndex(),n=this._dataController;if(e.ctrl){const o=this._getDirectionCodeByKey(e.keyName),s=n.getKeyByRowIndex(r);o==="nextInRow"?n.expandRow(s):n.collapseRow(s)}else return super._leftRightKeysHandler.apply(this,arguments)}};p.registerModule("keyboardNavigation",I(!0,{},pt,{extenders:{controllers:{keyboardNavigation:er}}}));p.registerModule("headersKeyboardNavigation",yt);p.registerModule("virtualColumns",vt);function tr(i,e){let t=-1;return i.forEach(((r,n)=>{e(r)&&(t=n)})),t}const rr=i=>class extends L.extenders.controllers.data(i){changeRowExpand(e){return this.option("focusedRowEnabled")&&this.isRowExpanded(e)&&this._isFocusedRowInside(e)&&this.option("focusedRowKey",e),super.changeRowExpand.apply(this,arguments)}_isFocusedRowInside(e){const t=this.option("focusedRowKey"),r=this.getRowIndexByKey(t),n=r>=0&&this.getVisibleRows()[r];let o=n&&n.node.parent;for(;o;){if(o.key===e)return!0;o=o.parent}return!1}getParentKey(e){const t=this._dataSource,r=this.getNodeByKey(e),n=new x;return r?n.resolve(r.parent?r.parent.key:void 0):t.load({filter:[t.getKeyExpr(),"=",e]}).done((o=>{const s=o[0];s?n.resolve(t.parentKeyOf(s)):n.resolve()})).fail(n.reject),n.promise()}expandAscendants(e){const t=this,r=t._dataSource,n=new x;return t.getParentKey(e).done((o=>{r&&o!==void 0&&o!==t.option("rootValue")?(r._isNodesInitializing=!0,t.expandRow(o),r._isNodesInitializing=!1,t.expandAscendants(o).done(n.resolve).fail(n.reject)):n.resolve()})).fail(n.reject),n.promise()}getPageIndexByKey(e){const t=this,r=t._dataSource,n=new x;return t.expandAscendants(e).done((()=>{r.load({parentIds:[]}).done((o=>{const s=tr(o,(d=>t.keyOf(d.data)===e));let a=-1;s>=0&&(a=Math.floor(s/t.pageSize())),n.resolve(a)})).fail(n.reject)})).fail(n.reject),n.promise()}};p.registerModule("focus",k({},L,{extenders:k({},L.extenders,{controllers:k({},L.extenders.controllers,{data:rr})})}));p.registerModule("rowDragging",mt);function ye(i,e,t,r,n){r=r||{};var o=1.15,s=n.internal.scaleFactor,a=n.internal.getFontSize()/s,d=n.getLineHeightFactor?n.getLineHeightFactor():o,l=a*d,h=/\r\n|\r|\n/g,u="",c=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(u=typeof i=="string"?i.split(h):i,c=u.length||1),t+=a*(2-o),r.valign==="middle"?t-=c/2*l:r.valign==="bottom"&&(t-=c*l),r.halign==="center"||r.halign==="right"){var f=a;if(r.halign==="center"&&(f*=.5),u&&c>=1){for(var g=0;g<u.length;g++)n.text(u[g],e-n.getStringUnitWidth(u[g])*f,t),t+=l;return n}e-=n.getStringUnitWidth(i)*f}return r.halign==="justify"?n.text(i,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):n.text(i,e,t),n}var oe={},D=(function(){function i(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return i.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:oe=e},i.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},i.prototype.applyStyles=function(e,t){var r,n,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,d=s.fontName;if(e.font&&(d=e.font),e.fontStyle){a=e.fontStyle;var l=this.getFontList()[d];l&&l.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),a=l[0])}if(this.jsPDFDocument.setFont(d,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var h=i.unifyColor(e.fillColor);h&&(r=this.jsPDFDocument).setFillColor.apply(r,h),h=i.unifyColor(e.textColor),h&&(n=this.jsPDFDocument).setTextColor.apply(n,h),h=i.unifyColor(e.lineColor),h&&(o=this.jsPDFDocument).setDrawColor.apply(o,h),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},i.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},i.prototype.rect=function(e,t,r,n,o){return this.jsPDFDocument.rect(e,t,r,n,o)},i.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},i.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},i.prototype.getDocument=function(){return this.jsPDFDocument},i.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},i.prototype.addPage=function(){return this.jsPDFDocument.addPage()},i.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},i.prototype.getGlobalOptions=function(){return oe||{}},i.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},i.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},i.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},i.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},i.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},i.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},i})(),Z=function(i,e){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},Z(i,e)};function ve(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var me=(function(i){ve(e,i);function e(t){var r=i.call(this)||this;return r._element=t,r}return e})(Array);function nr(i){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/i,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ir(i){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[i]}function H(i,e,t){t.applyStyles(e,!0);var r=Array.isArray(i)?i:[i],n=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return n}function we(i,e,t,r){var n=e.settings.tableLineWidth,o=e.settings.tableLineColor;i.applyStyles({lineWidth:n,lineColor:o});var s=xe(n,!1);s&&i.rect(t.x,t.y,e.getWidth(i.pageSize().width),r.y-t.y,s)}function xe(i,e){var t=i>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function z(i,e){var t,r,n,o;if(i=i||e,Array.isArray(i)){if(i.length>=4)return{top:i[0],right:i[1],bottom:i[2],left:i[3]};if(i.length===3)return{top:i[0],right:i[1],bottom:i[2],left:i[1]};if(i.length===2)return{top:i[0],right:i[1],bottom:i[0],left:i[1]};i.length===1?i=i[0]:i=e}return typeof i=="object"?(typeof i.vertical=="number"&&(i.top=i.vertical,i.bottom=i.vertical),typeof i.horizontal=="number"&&(i.right=i.horizontal,i.left=i.horizontal),{left:(t=i.left)!==null&&t!==void 0?t:e,top:(r=i.top)!==null&&r!==void 0?r:e,right:(n=i.right)!==null&&n!==void 0?n:e,bottom:(o=i.bottom)!==null&&o!==void 0?o:e}):(typeof i!="number"&&(i=e),{top:i,right:i,bottom:i,left:i})}function Se(i,e){var t=z(e.settings.margin,0);return i.pageSize().width-(t.left+t.right)}function or(i,e,t,r,n){var o={},s=1.3333333333333333,a=q(e,function(S){return n.getComputedStyle(S).backgroundColor});a!=null&&(o.fillColor=a);var d=q(e,function(S){return n.getComputedStyle(S).color});d!=null&&(o.textColor=d);var l=ar(r,t);l&&(o.cellPadding=l);var h="borderTopColor",u=s*t,c=r.borderTopWidth;if(r.borderBottomWidth===c&&r.borderRightWidth===c&&r.borderLeftWidth===c){var f=(parseFloat(c)||0)/u;f&&(o.lineWidth=f)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/u,right:(parseFloat(r.borderRightWidth)||0)/u,bottom:(parseFloat(r.borderBottomWidth)||0)/u,left:(parseFloat(r.borderLeftWidth)||0)/u},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var g=q(e,function(S){return n.getComputedStyle(S)[h]});g!=null&&(o.lineColor=g);var m=["left","right","center","justify"];m.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),m=["middle","bottom","top"],m.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var y=parseInt(r.fontSize||"");isNaN(y)||(o.fontSize=y/s);var w=sr(r);w&&(o.fontStyle=w);var _=(r.fontFamily||"").toLowerCase();return i.indexOf(_)!==-1&&(o.font=_),o}function sr(i){var e="";return(i.fontWeight==="bold"||i.fontWeight==="bolder"||parseInt(i.fontWeight)>=700)&&(e="bold"),(i.fontStyle==="italic"||i.fontStyle==="oblique")&&(e+="italic"),e}function q(i,e){var t=_e(i,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var n=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function _e(i,e){var t=e(i);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?i.parentElement==null?null:_e(i.parentElement,e):t}function ar(i,e){var t=[i.paddingTop,i.paddingRight,i.paddingBottom,i.paddingLeft],r=96/(72/e),n=(parseInt(i.lineHeight)-parseInt(i.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/r}),s=z(o,0);return n>s.top&&(s.top=n),n>s.bottom&&(s.bottom=n),s}function Ce(i,e,t,r,n){var o,s;r===void 0&&(r=!1),n===void 0&&(n=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var d=Object.keys(i.getFontList()),l=i.scaleFactor(),h=[],u=[],c=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:h,body:u,foot:c};for(var f=0;f<a.rows.length;f++){var g=a.rows[f],m=(s=(o=g==null?void 0:g.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=lr(d,l,t,g,r,n);y&&(m==="thead"?h.push(y):m==="tfoot"?c.push(y):u.push(y))}return{head:h,body:u,foot:c}}function lr(i,e,t,r,n,o){for(var s=new me(r),a=0;a<r.cells.length;a++){var d=r.cells[a],l=t.getComputedStyle(d);if(n||l.display!=="none"){var h=void 0;o&&(h=or(i,d,e,l,t)),s.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:h,_element:d,content:dr(d)})}}var u=t.getComputedStyle(r);if(s.length>0&&(n||u.display!=="none"))return s}function dr(i){var e=i.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function hr(i,e,t){for(var r=0,n=[i,e,t];r<n.length;r++){var o=n[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function R(i,e,t,r,n){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(i),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])}return o}function ur(i,e){var t=new D(i),r=t.getDocumentOptions(),n=t.getGlobalOptions();hr(n,r,e);var o=R({},n,r,e),s;typeof window<"u"&&(s=window);var a=cr(n,r,e),d=fr(n,r,e),l=pr(t,o),h=yr(t,o,s);return{id:e.tableId,content:h,hooks:d,styles:a,settings:l}}function cr(i,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(d){if(d==="columnStyles"){var l=i[d],h=e[d],u=t[d];r.columnStyles=R({},l,h,u)}else{var c=[i,e,t],f=c.map(function(g){return g[d]||{}});r[d]=R({},f[0],f[1],f[2])}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];n(a)}return r}function fr(i,e,t){for(var r=[i,e,t],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var a=s[o];a.didParseCell&&n.didParseCell.push(a.didParseCell),a.willDrawCell&&n.willDrawCell.push(a.willDrawCell),a.didDrawCell&&n.didDrawCell.push(a.didDrawCell),a.willDrawPage&&n.willDrawPage.push(a.willDrawPage),a.didDrawPage&&n.didDrawPage.push(a.didDrawPage)}return n}function pr(i,e){var t,r,n,o,s,a,d,l,h,u,c,f,g=z(e.margin,40/i.scaleFactor()),m=(t=gr(i,e.startY))!==null&&t!==void 0?t:g.top,y;e.showFoot===!0?y="everyPage":e.showFoot===!1?y="never":y=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(n=e.showHead)!==null&&n!==void 0?n:"everyPage";var _=(o=e.useCss)!==null&&o!==void 0?o:!1,S=e.theme||(_?"plain":"striped"),v=!!e.horizontalPageBreak,j=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:_,theme:S,startY:m,margin:g,pageBreak:(d=e.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(l=e.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(h=e.tableWidth)!==null&&h!==void 0?h:"auto",showHead:w,showFoot:y,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(c=e.tableLineColor)!==null&&c!==void 0?c:200,horizontalPageBreak:v,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function gr(i,e){var t=i.getLastAutoTable(),r=i.scaleFactor(),n=i.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===n}return typeof e=="number"?e:(e==null||e===!1)&&o&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function yr(i,e,t){var r=e.head||[],n=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=Ce(i,e.html,t,s,e.useCss)||{};r=a.head||r,n=a.body||r,o=a.foot||r}else console.error("Cannot parse html in non browser environment")}var d=e.columns||vr(r,n,o);return{columns:d,head:r,body:n,foot:o}}function vr(i,e,t){var r=i[0]||e[0]||t[0]||[],n=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(r)?a=r[parseInt(o)]:a=r[o],typeof a=="object"&&!Array.isArray(a)&&(s=(a==null?void 0:a.colSpan)||1);for(var d=0;d<s;d++){var l=void 0;Array.isArray(r)?l=n.length:l=o+(d>0?"_".concat(d):"");var h={dataKey:l};n.push(h)}}),n}var ee=(function(){function i(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return i})(),mr=(function(i){ve(e,i);function e(t,r,n,o,s,a){var d=i.call(this,t,r,a)||this;return d.cell=n,d.row=o,d.column=s,d.section=o.section,d}return e})(ee),wr=(function(){function i(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return i.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},i.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},i.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},i.prototype.callCellHooks=function(e,t,r,n,o,s){for(var a=0,d=t;a<d.length;a++){var l=d[a],h=new mr(e,this,r,n,o,s),u=l(h)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],u)return!1}return!0},i.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,n=this.hooks.didDrawPage;r<n.length;r++){var o=n[r];o(new ee(e,this,t))}},i.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,n=this.hooks.willDrawPage;r<n.length;r++){var o=n[r];o(new ee(e,this,t))}},i.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(n,o){return n+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},i})(),Re=(function(){function i(e,t,r,n,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof me&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=n,this.spansMultiplePages=o}return i.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,n){var o;return Math.max(r,((o=t.cells[n.index])===null||o===void 0?void 0:o.height)||0)},0)},i.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var n=t.cells[r.index];return n?n.rowSpan>1:!1}).length>0},i.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},i.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(n,o){var s=r.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),d=s.padding("vertical"),l=d+a;return l>n?l:n},0)},i})(),Ie=(function(){function i(e,t,r){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(n=e.content)!==null&&n!==void 0?n:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return i.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");r=this.x+n/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},i.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/e*t,o=r*n+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},i.prototype.padding=function(e){var t=z(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},i})(),xr=(function(){function i(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return i.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,n=e.allRows();r<n.length;r++){var o=n[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},i})();function Sr(i,e){_r(i,e);var t=[],r=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var n=e.getWidth(i.pageSize().width)-r;n&&(n=te(t,n,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),n&&(n=te(t,n,function(o){return o.minWidth})),n=Math.abs(n),!e.settings.horizontalPageBreak&&n>.1/i.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),Rr(e),Ir(e,i),Cr(e)}function _r(i,e){var t=i.scaleFactor(),r=e.settings.horizontalPageBreak,n=Se(i,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var d=a[s],l=o.cells[d.index];if(l){var h=e.hooks.didParseCell;e.callCellHooks(i,h,l,o,d,null);var u=l.padding("horizontal");l.contentWidth=H(l.text,l.styles,i)+u;var c=H(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,i);if(l.minReadableWidth=c+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||r===!0)l.contentWidth>n?(l.minWidth=n,l.wrappedWidth=n):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var f=10/t;l.minWidth=l.styles.minCellWidth||f,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var d=a[s],l=o.cells[d.index];if(l&&l.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,l.wrappedWidth),d.minWidth=Math.max(d.minWidth,l.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,l.minReadableWidth);else{var h=e.styles.columnStyles[d.dataKey]||e.styles.columnStyles[d.index]||{},u=h.cellWidth||h.minCellWidth;u&&typeof u=="number"&&(d.minWidth=u,d.wrappedWidth=u)}l&&(l.colSpan>1&&!d.minWidth&&(d.minWidth=l.minWidth),l.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=l.minWidth))}})}function te(i,e,t){for(var r=e,n=i.reduce(function(f,g){return f+g.wrappedWidth},0),o=0;o<i.length;o++){var s=i[o],a=s.wrappedWidth/n,d=r*a,l=s.width+d,h=t(s),u=l<h?h:l;e-=u-s.width,s.width=u}if(e=Math.round(e*1e10)/1e10,e){var c=i.filter(function(f){return e<0?f.width>t(f):!0});c.length&&(e=te(c,e,t))}return e}function Cr(i){for(var e={},t=1,r=i.allRows(),n=0;n<r.length;n++)for(var o=r[n],s=0,a=i.columns;s<a.length;s++){var d=a[s],l=e[d.index];if(t>1)t--,delete o.cells[d.index];else if(l)l.cell.height+=o.height,t=l.cell.colSpan,delete o.cells[d.index],l.left--,l.left<=1&&delete e[d.index];else{var h=o.cells[d.index];if(!h)continue;if(h.height=o.height,h.rowSpan>1){var u=r.length-n,c=h.rowSpan>u?u:h.rowSpan;e[d.index]={cell:h,left:c,row:o}}}}}function Rr(i){for(var e=i.allRows(),t=0;t<e.length;t++)for(var r=e[t],n=null,o=0,s=0,a=0;a<i.columns.length;a++){var d=i.columns[a];if(s-=1,s>1&&i.columns[a+1])o+=d.width,delete r.cells[d.index];else if(n){var l=n;delete r.cells[d.index],n=null,l.width=d.width+o}else{var l=r.cells[d.index];if(!l)continue;if(s=l.colSpan,o=0,l.colSpan>1){n=l,o+=d.width;continue}l.width=d.width+o}}}function Ir(i,e){for(var t={count:0,height:0},r=0,n=i.allRows();r<n.length;r++){for(var o=n[r],s=0,a=i.columns;s<a.length;s++){var d=a[s],l=o.cells[d.index];if(l){e.applyStyles(l.styles,!0);var h=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=e.splitTextToSize(l.text,h+1/e.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=se(l.text,h,l.styles,e,"...");else if(l.styles.overflow==="hidden")l.text=se(l.text,h,l.styles,e,"");else if(typeof l.styles.overflow=="function"){var u=l.styles.overflow(l.text,h);typeof u=="string"?l.text=[u]:l.text=u}l.contentHeight=l.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var c=l.contentHeight/l.rowSpan;l.rowSpan>1&&t.count*t.height<c*l.rowSpan?t={height:c,count:l.rowSpan}:t&&t.count>0&&t.height>c&&(c=t.height),c>o.height&&(o.height=c)}}t.count--}}function se(i,e,t,r,n){return i.map(function(o){return Er(o,e,t,r,n)})}function Er(i,e,t,r,n){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=H(i,t,r))return i;for(;e<H(i+n,t,r)&&!(i.length<=1);)i=i.substring(0,i.length-1);return i.trim()+n}function Kr(i,e){var t=new D(i),r=kr(e,t.scaleFactor()),n=new wr(e,r);return Sr(t,n),t.applyStyles(t.userStyles),n}function kr(i,e){var t=i.content,r=Dr(t.columns);if(t.head.length===0){var n=ae(r,"head");n&&t.head.push(n)}if(t.foot.length===0){var n=ae(r,"foot");n&&t.foot.push(n)}var o=i.settings.theme,s=i.styles;return{columns:r,head:Y("head",t.head,r,s,o,e),body:Y("body",t.body,r,s,o,e),foot:Y("foot",t.foot,r,s,o,e)}}function Y(i,e,t,r,n,o){var s={},a=e.map(function(d,l){for(var h=0,u={},c=0,f=0,g=0,m=t;g<m.length;g++){var y=m[g];if(s[y.index]==null||s[y.index].left===0)if(f===0){var w=void 0;Array.isArray(d)?w=d[y.index-c-h]:w=d[y.dataKey];var _={};typeof w=="object"&&!Array.isArray(w)&&(_=(w==null?void 0:w.styles)||{});var S=Pr(i,y,l,n,r,o,_),v=new Ie(w,S,i);u[y.dataKey]=v,u[y.index]=v,f=v.colSpan-1,s[y.index]={left:v.rowSpan-1,times:f}}else f--,c++;else s[y.index].left--,f=s[y.index].times,h++}return new Re(d,l,i,u)});return a}function ae(i,e){var t={};return i.forEach(function(r){if(r.raw!=null){var n=br(e,r.raw);n!=null&&(t[r.dataKey]=n)}}),Object.keys(t).length>0?t:null}function br(i,e){if(i==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(i==="foot"&&typeof e=="object")return e.footer;return null}function Dr(i){return i.map(function(e,t){var r,n;return typeof e=="object"?n=(r=e.dataKey)!==null&&r!==void 0?r:t:n=t,new xr(n,e,t)})}function Pr(i,e,t,r,n,o,s){var a=ir(r),d;i==="head"?d=n.headStyles:i==="body"?d=n.bodyStyles:i==="foot"&&(d=n.footStyles);var l=R({},a.table,a[i],n.styles,d),h=n.columnStyles[e.dataKey]||n.columnStyles[e.index]||{},u=i==="body"?h:{},c=i==="body"&&t%2===0?R({},a.alternateRow,n.alternateRowStyles):{},f=nr(o),g=R({},f,l,c,u);return R(g,s)}function Nr(i,e,t){var r;t===void 0&&(t={});var n=Se(i,e),o=new Map,s=[],a=[],d=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?d=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(d=[e.settings.horizontalPageBreakRepeat]),d.forEach(function(c){var f=e.columns.find(function(g){return g.dataKey===c||g.index===c});f&&!o.has(f.index)&&(o.set(f.index,!0),s.push(f.index),a.push(e.columns[f.index]),n-=f.wrappedWidth)});for(var l=!0,h=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;h<e.columns.length;){if(o.has(h)){h++;continue}var u=e.columns[h].wrappedWidth;if(l||n>=u)l=!1,s.push(h),a.push(e.columns[h]),n-=u;else break;h++}return{colIndexes:s,columns:a,lastIndex:h-1}}function Mr(i,e){for(var t=[],r=0;r<e.columns.length;r++){var n=Nr(i,e,{start:r});n.columns.length&&(t.push(n),r=n.lastIndex)}return t}function Br(i,e){var t=e.settings,r=t.startY,n=t.margin,o={x:n.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+n.bottom+s;if(t.pageBreak==="avoid"){var d=e.body,l=d.reduce(function(c,f){return c+f.height},0);a+=l}var h=new D(i);(t.pageBreak==="always"||t.startY!=null&&a>h.pageSize().height)&&(Ke(h),o.y=n.top),e.callWillDrawPageHooks(h,o);var u=R({},o);e.startPageNumber=h.pageNumber(),t.horizontalPageBreak?Tr(h,e,u,o):(h.applyStyles(h.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(c){return K(h,e,c,o,e.columns)}),h.applyStyles(h.userStyles),e.body.forEach(function(c,f){var g=f===e.body.length-1;A(h,e,c,g,u,o,e.columns)}),h.applyStyles(h.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(c){return K(h,e,c,o,e.columns)})),we(h,e,u,o),e.callEndPageHooks(h,o),e.finalY=o.y,i.lastAutoTable=e,h.applyStyles(h.userStyles)}function Tr(i,e,t,r){var n=Mr(i,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(l,h){i.applyStyles(i.userStyles),h>0?M(i,e,t,r,l.columns,!0):le(i,e,r,l.columns),Fr(i,e,t,r,l.columns),U(i,e,r,l.columns)});else for(var s=-1,a=n[0],d=function(){var l=s;if(a){i.applyStyles(i.userStyles);var h=a.columns;s>=0?M(i,e,t,r,h,!0):le(i,e,r,h),l=de(i,e,s+1,r,h),U(i,e,r,h)}var u=l-s;n.slice(1).forEach(function(c){i.applyStyles(i.userStyles),M(i,e,t,r,c.columns,!0),de(i,e,s+1,r,c.columns,u),U(i,e,r,c.columns)}),s=l};s<e.body.length-1;)d()}function le(i,e,t,r){var n=e.settings;i.applyStyles(i.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(o){return K(i,e,o,t,r)})}function Fr(i,e,t,r,n){i.applyStyles(i.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;A(i,e,o,a,t,r,n)})}function de(i,e,t,r,n,o){i.applyStyles(i.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(d,l){var h=t+l===e.body.length-1,u=Ee(i,e,h,r);d.canEntireRowFit(u,n)&&(K(i,e,d,r,n),a=t+l)}),a}function U(i,e,t,r){var n=e.settings;i.applyStyles(i.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(o){return K(i,e,o,t,r)})}function Lr(i,e,t){var r=t.getLineHeight(i.styles.fontSize),n=i.padding("vertical"),o=Math.floor((e-n)/r);return Math.max(0,o)}function Or(i,e,t,r){var n={};i.spansMultiplePages=!0,i.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var d=a[s],l=i.cells[d.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var h=new Ie(l.raw,l.styles,l.section);h=R(h,l),h.text=[];var u=Lr(l,e,r);l.text.length>u&&(h.text=l.text.splice(u,l.text.length));var c=r.scaleFactor(),f=r.getLineHeightFactor();l.contentHeight=l.getContentHeight(c,f),l.contentHeight>=e&&(l.contentHeight=e,h.styles.minCellHeight-=e),l.contentHeight>i.height&&(i.height=l.contentHeight),h.contentHeight=h.getContentHeight(c,f),h.contentHeight>o&&(o=h.contentHeight),n[d.index]=h}}var g=new Re(i.raw,-1,i.section,n,!0);g.height=o;for(var m=0,y=t.columns;m<y.length;m++){var d=y[m],h=g.cells[d.index];h&&(h.height=g.height);var l=i.cells[d.index];l&&(l.height=i.height)}return g}function Hr(i,e,t,r){var n=i.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,a=n-s;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var d=e.getMinimumRowHeight(r.columns,i),l=d<t;if(d>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var h=e.hasRowSpan(r.columns),u=e.getMaxCellHeight(r.columns)>a;return u?(h&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||r.settings.rowPageBreak==="avoid")}function A(i,e,t,r,n,o,s){var a=Ee(i,e,r,o);if(t.canEntireRowFit(a,s))K(i,e,t,o,s);else if(Hr(i,t,a,e)){var d=Or(t,a,e,i);K(i,e,t,o,s),M(i,e,n,o,s),A(i,e,d,r,n,o,s)}else M(i,e,n,o,s),A(i,e,t,r,n,o,s)}function K(i,e,t,r,n){r.x=e.settings.margin.left;for(var o=0,s=n;o<s.length;o++){var a=s[o],d=t.cells[a.index];if(!d){r.x+=a.width;continue}i.applyStyles(d.styles),d.x=r.x,d.y=r.y;var l=e.callCellHooks(i,e.hooks.willDrawCell,d,t,a,r);if(l===!1){r.x+=a.width;continue}Ar(i,d,r);var h=d.getTextPos();ye(d.text,h.x,h.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},i.getDocument()),e.callCellHooks(i,e.hooks.didDrawCell,d,t,a,r),r.x+=a.width}r.y+=t.height}function Ar(i,e,t){var r=e.styles;if(i.getDocument().setFillColor(i.getDocument().getFillColor()),typeof r.lineWidth=="number"){var n=xe(r.lineWidth,r.fillColor);n&&i.rect(e.x,t.y,e.width,e.height,n)}else typeof r.lineWidth=="object"&&(r.fillColor&&i.rect(e.x,t.y,e.width,e.height,"F"),Wr(i,e,t,r.lineWidth))}function Wr(i,e,t,r){var n,o,s,a;r.top&&(n=t.x,o=t.y,s=t.x+e.width,a=t.y,r.right&&(s+=.5*r.right),r.left&&(n-=.5*r.left),d(r.top,n,o,s,a)),r.bottom&&(n=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,r.right&&(s+=.5*r.right),r.left&&(n-=.5*r.left),d(r.bottom,n,o,s,a)),r.left&&(n=t.x,o=t.y,s=t.x,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),d(r.left,n,o,s,a)),r.right&&(n=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),d(r.right,n,o,s,a));function d(l,h,u,c,f){i.getDocument().setLineWidth(l),i.getDocument().line(h,u,c,f,"S")}}function Ee(i,e,t,r){var n=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(n+=e.getFootHeight(e.columns)),i.pageSize().height-r.y-n}function M(i,e,t,r,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1),i.applyStyles(i.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return K(i,e,a,r,n)}),e.callEndPageHooks(i,r);var s=e.settings.margin;we(i,e,t,r),Ke(i),e.pageNumber++,r.x=s.left,r.y=s.top,t.y=s.top,e.callWillDrawPageHooks(i,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return K(i,e,a,r,n)}),i.applyStyles(i.userStyles))}function Ke(i){var e=i.pageNumber();i.setPage(e+1);var t=i.pageNumber();return t===e?(i.addPage(),!0):!1}function zr(i){i.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],n=ur(this,r),o=Kr(this,n);return Br(this,o),this},i.API.lastAutoTable=!1,i.API.autoTableText=function(e,t,r,n){ye(e,t,r,n,this)},i.API.autoTableSetDefaults=function(e){return D.setDefaults(e,this),this},i.autoTableSetDefaults=function(e,t){D.setDefaults(e,t)},i.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new D(this),o=Ce(n,e,window,t,!1),s=o.head,a=o.body,d=((r=s[0])===null||r===void 0?void 0:r.map(function(l){return l.content}))||[];return{columns:d,rows:a,data:a}}}var J;try{if(typeof window<"u"&&window){var he=window,ue=he.jsPDF||((J=he.jspdf)===null||J===void 0?void 0:J.jsPDF);ue&&zr(ue)}}catch(i){console.error("Could not apply autoTable plugin",i)}export{Ht as T};
