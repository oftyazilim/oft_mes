import{_ as j}from"./AppTextField.vue_vue_type_script_setup_true_lang-Db3kUdzX.js";import{d as q,aW as D,aN as G,r,w as Y,a as A,c as O,o as h,b as a,f as l,e as n,l as e,n as W,t as R,p as k,g as T,m as I,aF as w,aM as H,aE as x,T as J,y as K,F as Q}from"./main-CC0S-MzY.js";import{u as M}from"./useGenerateImageVariant-BGK8ZRgE.js";import{r as z}from"./validators-BwBNGiur.js";import{a as X,b as Z}from"./auth-v2-reset-password-illustration-light-DXjlOEVK.js";import{a as ee,b as ae}from"./misc-mask-light-Ha4lQOdV.js";import{$ as te}from"./api-Bb7robT-.js";import{V as u}from"./VCol-BvCN_tSW.js";import{V as le}from"./VImg-D4hgsP19.js";import{V as oe}from"./VCard-XhBRIBq8.js";import{V as F}from"./VCardText-C_q08Dmo.js";import{V as B}from"./VAlert-D2AEz_gG.js";import{V as se}from"./VForm-VtkGsgMs.js";import{V as L}from"./VRow-BiJFK6vz.js";import"./form-kZDJ4E4v.js";import"./VTextField-BnwXvZKs.js";/* empty css                   */import"./VCounter-CnFz9zRk.js";import"./index-B4A6uSHN.js";import"./VField-Cjbo2t6i.js";import"./easing-Bybner-F.js";import"./VInput-CE-nSsDz.js";import"./forwardRefs-C-GTDzx5.js";import"./helpers-BGv4x_9E.js";import"./index-CUR_k_tw.js";import"./index-CvOPxmL5.js";/* empty css              */import"./createSimpleFunctional-Dz-Ql0QD.js";import"./VAvatar-BHWqmz1z.js";const re={class:"auth-logo d-flex align-center gap-x-3"},ne={class:"auth-title"},ie={class:"position-relative bg-background w-100 me-0"},ue={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"150px"}},me=["src"],qe=q({__name:"reset-password",setup(de){const v=D(),N=G(),b=r(v.query.token||""),m=r(v.query.email||""),f=r(""),c=r(""),V=r(!1),y=r(!1),g=r(!1),_=r(null),d=r(null),C=r(),S=M(Z,X),P=M(ae,ee),$=o=>((o==null?void 0:o.length)??0)>=8||"Şifre en az 8 karakter olmalıdır.",E=o=>o===f.value||"Şifreler eşleşmiyor.";Y(()=>v.query,o=>{b.value=o.token||"",m.value=o.email||""},{deep:!0});const U=async()=>{var t;if(_.value=null,d.value=null,!b.value||!m.value){d.value="Bağlantı geçersiz. Lütfen “Şifremi Unuttum” üzerinden tekrar deneyin.";return}const o=await((t=C.value)==null?void 0:t.validate());if(o!=null&&o.valid)try{g.value=!0,await te("/auth/reset-password",{method:"POST",body:{token:b.value,email:m.value,password:f.value,password_confirmation:c.value},onResponseError({response:s}){var p;d.value=((p=s==null?void 0:s._data)==null?void 0:p.message)||"İşlem sırasında bir hata oluştu."}}),_.value="Şifreniz başarıyla güncellendi.",setTimeout(()=>N.push({name:"login"}),1500)}catch(s){d.value=(s==null?void 0:s.message)||"İşlem sırasında bir hata oluştu."}finally{g.value=!1}};return(o,t)=>{const s=A("RouterLink"),p=j;return h(),O(Q,null,[a(s,{to:"/"},{default:l(()=>[n("div",re,[a(e(W),{nodes:e(R).app.logo},null,8,["nodes"]),n("h1",ne,k(e(R).app.title),1)])]),_:1}),a(L,{class:"auth-wrapper bg-surface","no-gutters":""},{default:l(()=>[a(u,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[n("div",ie,[n("div",ue,[a(le,{"max-width":"451",src:e(S),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),n("img",{class:"auth-footer-mask flip-in-rtl",src:e(P),alt:"auth-footer-mask",height:"280",width:"100"},null,8,me)])]),_:1}),a(u,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[a(oe,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:l(()=>[a(F,null,{default:l(()=>t[5]||(t[5]=[n("h4",{class:"text-h4 mb-1"}," Şifreyi Sıfırla 🔒 ",-1),n("p",{class:"mb-0"}," Yeni şifreniz en az 8 karakter olmalı ve onay şifresiyle eşleşmelidir. ",-1)])),_:1,__:[5]}),a(F,null,{default:l(()=>[e(_)?(h(),T(B,{key:0,type:"success",variant:"tonal",class:"mb-4"},{default:l(()=>[w(k(e(_)),1)]),_:1})):I("",!0),e(d)?(h(),T(B,{key:1,type:"error",variant:"tonal",class:"mb-4"},{default:l(()=>[w(k(e(d)),1)]),_:1})):I("",!0),a(e(se),{ref_key:"refVForm",ref:C,onSubmit:H(U,["prevent"])},{default:l(()=>[a(L,null,{default:l(()=>[a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(m),"onUpdate:modelValue":t[0]||(t[0]=i=>x(m)?m.value=i:null),label:"E-posta",type:"email",readonly:!0},null,8,["modelValue"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(f),"onUpdate:modelValue":t[1]||(t[1]=i=>x(f)?f.value=i:null),autofocus:"",label:"Yeni Şifre",placeholder:"············",type:e(V)?"text":"password",autocomplete:"new-password","append-inner-icon":e(V)?"tabler-eye-off":"tabler-eye",rules:[e(z),$],"onClick:appendInner":t[2]||(t[2]=i=>V.value=!e(V))},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(p,{modelValue:e(c),"onUpdate:modelValue":t[3]||(t[3]=i=>x(c)?c.value=i:null),label:"Yeni Şifre (Tekrar)",placeholder:"············",type:e(y)?"text":"password",autocomplete:"new-password","append-inner-icon":e(y)?"tabler-eye-off":"tabler-eye",rules:[e(z),E],"onClick:appendInner":t[4]||(t[4]=i=>y.value=!e(y))},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(J,{block:"",type:"submit",loading:e(g),disabled:e(g)},{default:l(()=>t[6]||(t[6]=[w(" Şifreyi Güncelle ")])),_:1,__:[6]},8,["loading","disabled"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(s,{class:"d-flex align-center justify-center",to:{name:"login"}},{default:l(()=>[a(K,{icon:"tabler-chevron-left",size:"20",class:"me-1 flip-in-rtl"}),t[7]||(t[7]=n("span",null,"Giriş sayfasına dön",-1))]),_:1,__:[7]})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{qe as default};
