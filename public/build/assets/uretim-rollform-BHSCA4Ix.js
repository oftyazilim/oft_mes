import{_ as it}from"./AppTextarea.vue_vue_type_script_setup_true_lang-Ct2s-gRJ.js";import{_ as ot}from"./AppSelect.vue_vue_type_script_setup_true_lang-CIon615o.js";import{d as st,r,X as R,G as Le,aZ as se,f9 as nt,w as j,af as Pe,b2 as rt,b3 as A,c as ut,o as dt,e as a,b as l,aI as qe,f as o,I as vt,t as v,v as d,m as u,b7 as ne,x as we,ae as E,Z as he,d3 as W,a_ as z}from"./main-XwRbLdDd.js";import{u as mt}from"./pageTitle-DRrK_X8n.js";import{D as ct,a as pt,b as ft,c as bt,d as yt,e as _t,f as gt,g as Se,h as kt,i as wt}from"./circular-gauge-Ck9B-UC1.js";import{a as y,D as ht}from"./data-grid-CDzYL8kt.js";import{D as St,a as Dt}from"./popup-DN85XW6X.js";import{n as J}from"./notify-Bd8dXimS.js";import{V as M}from"./VCol-DlknZAb6.js";import{V as Z,b as X,c as Fe}from"./VCard-bvh5WqdJ.js";import{V as Q}from"./VRow-BJbYQOTI.js";import{V as xt}from"./VSwitch-BYEiAF4h.js";import{V as He}from"./VCardText-DyLp5-nE.js";import{V as Oe}from"./VTextField-x2XSbe9T.js";import{V as Ge}from"./VSpacer-C1kp7EDt.js";import{V as Ue}from"./VDialog-qvY25wuj.js";import{_ as Vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-C-X73X0H.js";import"./VTextarea-D4FGAiJL.js";/* empty css                   */import"./VCounter-D6jWx5xV.js";import"./VImg-Bxyhj52n.js";import"./VField-DNAC1FJ1.js";import"./easing-Bybner-F.js";import"./VInput-BOXSDfB4.js";import"./form-B8WGOvOY.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-quu91Ey1.js";import"./VList-aBUwPuke.js";import"./ssrBoot-DKRZo-Kn.js";import"./VAvatar-Ckxn6bn9.js";import"./VDivider-BOECSVlu.js";import"./dialog-transition-D8bcN15L.js";import"./VMenu-CfK0y7Zm.js";import"./VOverlay-BU28ZY_w.js";import"./delay-CFr-X7AC.js";import"./lazy-DP4bUwF_.js";import"./scopeId-ZWAw0pHM.js";import"./VCheckboxBtn-D2fZ73Rw.js";import"./VSelectionControl-CEyg9McA.js";import"./VChip-aG5LU0ZU.js";import"./VSlideGroup-DZ39b4A2.js";import"./index-DR5YRmXp.js";import"./ui.errors-CQ3w3T6k.js";import"./m_base_widget-DmuTryft.js";import"./format_helper-Dlwhiacf.js";import"./m_resize_observer-XJJaLm6G.js";import"./themes-CQjnx04S.js";import"./m_row_dragging-CePfikDJ.js";import"./m_select_box-CmI1_xLd.js";import"./overlay-D4b-WZqj.js";import"./editor-DP_T_3L9.js";/* empty css              */const At={class:"page-rollform pa-0"},Et={class:"rollform-header"},Mt={class:"gauge-wrap"},It={class:"badge-left"},Nt={class:"gauge-center-value"},Tt={style:{color:"goldenrod"}},$t={class:"clock-wrap"},Ct={class:"digital-clock"},Kt={class:"digital-date"},Rt={class:"kpi-row"},zt={class:"kpi"},Lt={class:"kpi-value"},Pt={class:"pb-1 ms-1 me-1"},qt={class:"kpi"},Ft={class:"kpi-value"},Ht={class:"pb-1 ms-1 me-1"},Ot={class:"kpi"},Gt={class:"kpi-value"},Ut={class:"pb-1 ms-1 me-1"},Bt={class:"oee-title"},Yt={class:"panel status-panel"},jt={class:"form-row mt-2"},Wt={class:"status-actions justify-between"},Jt={class:"status-actions justify-between"},Zt={class:"status-metrics mt-4 text-center"},Xt={class:"metric-time"},Qt={class:"metric-time"},ea={class:"panel status-panel"},ta={width:"60%"},aa={class:"sayac siparis digit"},la={width:"60%"},ia={class:"sayac siparis digit"},oa={width:"60%"},sa={class:"sayac net digit"},na={width:"60%"},ra={class:"sayac net digit"},ua={width:"60%"},da={class:"sayac kalan digit"},va={class:"sayac hurda digit"},ma={class:"sayac net digit"},ca={class:"mt-10"},pa={class:"info"},fa={width:"60%"},ba={class:"info"},ya={width:"60%"},_a={class:"info"},ga={width:"60%"},ka={class:"info"},wa={class:"status-actions mt-11 mb-0"},ha={class:"panel grid-panel"},Sa={class:"mb-2"},Da={class:"mb-2"},xa=st({__name:"uretim-rollform",setup(Va){const re=mt(),f=r(null);function De(){var t;try{return`rollform:lastDurusReason:${((t=ue==null?void 0:ue.value)==null?void 0:t.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function Be(){try{const t=localStorage.getItem(De());if(!t)return!1;const e=JSON.parse(t);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return f.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const ee=r([]),xe=r(""),Ve=r(!1),i=r(null),L=R(()=>{var t;return((t=i.value)==null?void 0:t.wstation_code)??"..."}),te=R(()=>{var t;return((t=i.value)==null?void 0:t.wstation_name)??"..."}),Ye=R(()=>{var e;const t=(e=i.value)==null?void 0:e.statu_id;return t===0?"rgba(192, 167, 167, 0.30)":t===1?"rgba(180, 50, 50, 1.00)":t===2?"green":"#4b7027"}),P=R(()=>{var t;return((t=i.value)==null?void 0:t.statu_id)===1});re.setTitle(`${L.value} (${te.value})`),document.title=`OFT - ${L.value} | ${te.value}`;const Ae=R(()=>`${L.value} (${te.value})`),je=R(()=>{const t=Number(S.value.oee||0);return t<50?"oee-low":t<70?"oee-mid":t<85?"oee-high":"oee-top"}),q=()=>{re.setTitle(Ae.value),document.title=`OFT - ${L.value} | ${te.value}`};Le(async()=>{if(await se(),q(),await Re(),!m.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}T(),O(),ie=setInterval(O,1e4),ae=setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");ve.value=`${e}:${s}:${c}`;const n=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],p=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];me.value=`${t.getDate()} ${p[t.getMonth()]} ${t.getFullYear()} ${n[t.getDay()]}`,T()},1e3),le=setInterval(C,1e3),Ne(),Te(),window.addEventListener("keydown",ce),window.addEventListener("keydown",fe)}),nt(()=>{q()});const We=j(()=>re.title,t=>{t!==Ae.value&&q()},{flush:"post"});Pe(()=>{We(),window.removeEventListener("keydown",ce),window.removeEventListener("keydown",fe)}),j(()=>i.value,()=>{q(),T()});const ue=rt("userData");function I(t){const e=Number(t??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const de=r("00:00:00"),Je=r("00:00"),ve=r("00:00:00"),me=r("...");function Ze(t){const e=Math.max(0,Math.floor(t||0)),s=Math.floor(e/3600),c=Math.floor(e%3600/60),n=e%60,p=h=>String(h).padStart(2,"0");return`${p(s)}:${p(c)}:${p(n)}`}function T(){var s;const t=(s=i.value)==null?void 0:s.statu_time;if(t==null){de.value="00:00:00";return}let e=0;if(typeof t=="number")t>1e12?e=Math.max(0,Math.floor((Date.now()-t)/1e3)):t>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-t)):e=Math.max(0,Math.floor(t));else if(typeof t=="string"){const c=Date.parse(t);Number.isNaN(c)||(e=Math.max(0,Math.floor((Date.now()-c)/1e3)))}else t instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-t.getTime())/1e3)));de.value=Ze(e)}function $(t){const e=t.toLowerCase();return ee.value.find(s=>String(s.description||"").toLowerCase().includes(e))}function ce(t){if(P.value){if(t.key==="F9"){const e=$("çay ve yemek")||$("cay ve yemek")||$("çay & yemek");e&&(f.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}else if(t.key==="F10"){const e=$("çay ve yemek")||$("cay ve yemek")||$("çay & yemek");e&&(f.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}}}const F=r(!1),H=r(""),Ee=r(null);function Me(){H.value="",F.value=!0,se(()=>{var t;return(t=Ee.value)==null?void 0:t.focus()})}async function Ie(){const t=Number(H.value);if(!Number.isFinite(t)||t<=0){pe();return}try{if(!m.value)throw new Error("İstasyon yok");await A.post("/api/uretim-rollform/hurda-gir",{station_id:m.value,qty:t}),F.value=!1,C(),O()}catch(e){console.error("hurda kayıt hata",e)}}function pe(){H.value="",F.value=!1}function fe(t){t.key==="F8"&&(Me(),t.preventDefault())}r("uretim-disi");const Xe=r(!1),S=r({availability:0,performance:0,quality:0,oee:0}),Qe=r(null);async function O(){try{if(!m.value)return;const{data:t}=await A.get("/api/uretim-rollform/kpi",{params:{station_id:m.value}});if(t!=null&&t.kpi){const e=s=>Math.round(Number(s||0)*100);S.value={availability:e(t.kpi.availability),performance:e(t.kpi.performance),quality:e(t.kpi.quality),oee:e(t.kpi.oee)},t.shift&&(Qe.value={id:t.shift.id,start:t.shift.start.substring(11,16),end:t.shift.end.substring(11,16)}),Xe.value=!0}}catch(t){console.error("fetchKpiDirect error",t)}}const be=r([]),et=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:t=>{var e;return tt((e=t==null?void 0:t.row)==null?void 0:e.data)}}],N=r(!1),G=r(null),_=r(null);function tt(t){_.value=t,G.value=null,N.value=!0}async function ye(){if(!_.value)return;const t=Number(G.value??0),e=m.value;if(!e)return;const s={wstation_id:e,worder_id:Number(_.value.isEmriID??0),worder_no:_.value.isEmriNo,item_id:0,item_code:_.value.stokKodu,item_name:_.value.stokAdi,item_length:t,order_qty:Number(_.value.plnAd??0),net_qty:Number(_.value.urtAd??0),scrap_qty:Number(_.value.hurda??0)};try{await A.post("/api/uretim-rollform/activate-workorder",s),N.value=!1,C()}catch(c){console.error("Aktivasyon hatası",c)}}let ae=null,le=null,ie=null,U=null;async function C(){try{if(!m.value){i.value=null;return}const t=await A.get("/api/kapasite-works-info",{params:{station_id:m.value}}),e=Array.isArray(t.data)?t.data:[];i.value=e.length>0?e[0]:null,T()}catch(t){console.error("WorksInfo alınamadı",t),i.value=null}}async function Ne(){try{if(!m.value){be.value=[];return}const{data:t}=await A.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:m.value}}),e=(t||[]).map(s=>({grp:0,isEmriID:s.isemri_id,isEmriNo:s.isemri_no,stokKodu:s.stok_kodu,stokAdi:s.stok_adi,plnAd:Number(s.siparis_miktari??0),ilvAd:0,klnAd:Number(s.kalan_miktar??0),urtAd:Number(s.uretilen_net_miktar??0),hurda:Number(s.toplam_hurda_miktari??0),plnSure:Number(s.operasyon_suresi??0),grcSure:0}));be.value=e}catch(t){console.error("İş emirleri alınamadı",t)}}const w=r(!1),K=r(!1),oe=r(!0),_e=r(null),ge=r(!0),at={width:100,marginBottom:30,type:"success",text:"Kaydet",stylingMode:"contained"};function Te(){m.value&&A.get("/api/durus-sebepleri-al",{params:{istasyon:m.value}}).then(t=>{var e;ee.value=((e=t.data)==null?void 0:e.durusSebepleri)||[]}).catch(t=>{console.error("Duruş sebepleri alınamadı",t)})}function $e(){f.value={break_reason_code:"000",description:"GİRİLMEDİ"},w.value=!0,se(()=>{var t,e,s;try{const c=((e=(t=_e.value)==null?void 0:t.$el)==null?void 0:e.querySelector("input"))||((s=_e.value)==null?void 0:s.$el);c==null||c.focus()}catch{}})}async function Ce(){var t;if(!K.value){if(!f.value){J({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((t=i.value)!=null&&t.worder_id)){J({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),w.value=!1;return}if(!m.value){J({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{K.value=!0,oe.value=!1,await A.post("/api/duruskaydet-mekanik",{istasyonID:m.value,selectedDurus:f.value}),J({message:"Duruş kaydedildi.",type:"success",displayTime:2e3});try{localStorage.setItem(De(),JSON.stringify(f.value))}catch{}}catch(e){console.error("Duruş kaydedilemedi",e),J({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{K.value=!1,oe.value=!0,w.value=!1,C()}}}function lt(t){oe.value||(t.cancel=!0)}j(w,(t,e)=>{e&&!t&&C()});const Ke=r(null);j(()=>{var t;return(t=i.value)==null?void 0:t.statu_id},async(t,e)=>{t===1&&Ke.value!==1?ge.value?!Be()&&!w.value&&$e():w.value||$e():t!==1&&(w.value&&(K.value=!1,oe.value=!0,w.value=!1),f.value=null),Ke.value=t??null,ge.value&&(ge.value=!1)}),j(f,(t,e)=>{U&&clearTimeout(U),t&&(U=setTimeout(async()=>{var s;if(f.value&&((s=i.value)==null?void 0:s.statu_id)===1&&!K.value&&f.value.break_reason_code!=="000")try{await Ce()}catch{}},250))});const m=r(null),ke=r(null);async function Re(){try{ke.value=null;const{data:t}=await A.get("/api/uretim-rollform/detect-station");t&&t.station_id?m.value=Number(t.station_id):(m.value=null,ke.value="İstasyon bulunamadı (IP eşleşmedi)")}catch(t){ke.value="İstasyon tespiti hata: "+((t==null?void 0:t.message)||"bilinmiyor")}}return Le(async()=>{if(await se(),q(),await Re(),!m.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}T(),O(),ie=setInterval(O,1e4),ae=setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");ve.value=`${e}:${s}:${c}`;const n=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],p=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];me.value=`${t.getDate()} ${p[t.getMonth()]} ${t.getFullYear()} ${n[t.getDay()]}`,T()},1e3),le=setInterval(C,1e3),Ne(),Te(),window.addEventListener("keydown",ce),window.addEventListener("keydown",fe)}),Pe(()=>{ae&&clearInterval(ae),le&&clearInterval(le),ie&&clearInterval(ie),U&&clearTimeout(U)}),(t,e)=>{const s=ot,c=it;return dt(),ut("div",At,[a("div",Et,[l(Q,{class:"match-height"},{default:o(()=>[l(M,{cols:"12",md:"3",sm:"6"},{default:o(()=>[l(Z,{class:"pa-3"},{default:o(()=>{var n,p,h;return[a("section",null,[l(X,{class:"durum-title",style:vt({backgroundColor:Ye.value})},{default:o(()=>{var b,g;return[v(d(((b=i.value)==null?void 0:b.statu_id)===0?"KAPALI":((g=i.value)==null?void 0:g.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[17]||(e[17]=a("hr",null,null,-1)),a("div",Mt,[a("div",It,d(L.value),1),l(u(ct),{class:"oee-gauge",value:(n=i.value)==null?void 0:n.speed,subvalues:(p=i.value)==null?void 0:p.speed_target,tooltip:t.gaugeTooltip,size:t.gaugeSize},{default:o(()=>{var b;return[l(u(pt),{"start-angle":225,"end-angle":-45}),l(u(ft),{"start-value":0,"end-value":(b=i.value)==null?void 0:b.speed_max,"tick-interval":10,"minor-tick-interval":5},{default:o(()=>[l(u(bt),{length:8,color:"#666"}),l(u(yt),{length:4,color:"#444"}),l(u(_t),{"use-range-colors":!0,font:t.gaugeLabelFont},null,8,["font"])]),_:1},8,["end-value"]),l(u(gt),{"background-color":"#20252b",offset:10,width:10},{default:o(()=>{var g,D,x,k,V;return[l(u(Se),{"start-value":0,"end-value":.4*((g=i.value)==null?void 0:g.speed_max),color:"#ce6978"},null,8,["end-value"]),l(u(Se),{"start-value":.4*((D=i.value)==null?void 0:D.speed_max),"end-value":.7*((x=i.value)==null?void 0:x.speed_max),color:"#caa93b"},null,8,["start-value","end-value"]),l(u(Se),{"start-value":.7*((k=i.value)==null?void 0:k.speed_max),"end-value":(V=i.value)==null?void 0:V.speed_max,color:"#1e8e3e"},null,8,["start-value","end-value"])]}),_:1}),l(u(kt),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(u(wt),{enabled:!1})]}),_:1},8,["value","subvalues","tooltip","size"]),a("div",Nt,[e[12]||(e[12]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız",-1)),a("div",Tt,d((h=i.value)==null?void 0:h.speed),1)])]),a("div",$t,[a("div",Ct,d(ve.value),1),a("div",Kt,d(me.value),1)]),a("div",Rt,[a("div",zt,[e[13]||(e[13]=a("div",null,"Meço %",-1)),a("div",Lt,[v(d(S.value.availability)+" ",1),a("div",Pt,[l(ne,{"model-value":S.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",qt,[e[14]||(e[14]=a("div",null,"Performans %",-1)),a("div",Ft,[v(d(S.value.performance)+" ",1),a("div",Ht,[l(ne,{"model-value":S.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",Ot,[e[15]||(e[15]=a("div",null,"Kalite %",-1)),a("div",Gt,[v(d(S.value.quality)+" ",1),a("div",Ut,[l(ne,{"model-value":S.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(Q,null,{default:o(()=>[l(M,{cols:"12",class:"text-center"},{default:o(()=>[a("div",Bt,[e[16]||(e[16]=v("OEE % ")),a("span",{class:we(["kpi-oee",je.value])},d(S.value.oee),3)])]),_:1})]),_:1})])]}),_:1})]),_:1}),l(M,{cols:"12",md:"4",sm:"6"},{default:o(()=>[l(Z,{class:"pa-3"},{default:o(()=>[l(X,{class:"panel-title pa-0"},{default:o(()=>e[18]||(e[18]=[v("DURUM BİLGİLERİ")])),_:1,__:[18]}),e[26]||(e[26]=a("hr",null,null,-1)),a("section",Yt,[a("div",jt,[e[19]||(e[19]=a("label",null,"Duruş Sebebi (F10 – Yeni Duruş)",-1)),l(s,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=n=>f.value=n),items:ee.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!P.value,class:we({"app-select--force-disabled":!P.value})},null,8,["modelValue","items","disabled","class"]),l(c,{modelValue:xe.value,"onUpdate:modelValue":e[1]||(e[1]=n=>xe.value=n),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",Wt,[l(E,{variant:"tonal",color:"error",size:"small"},{default:o(()=>e[20]||(e[20]=[v("Açıklama Gir")])),_:1,__:[20]}),l(xt,{color:"error",modelValue:Ve.value,"onUpdate:modelValue":e[2]||(e[2]=n=>Ve.value=n),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",Jt,[l(E,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:o(()=>[e[21]||(e[21]=v(" F9 - Çay Molası ")),l(he,{end:"",icon:"tabler-mug"})]),_:1,__:[21]}),l(E,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:o(()=>[e[22]||(e[22]=v(" F10 - Yemek Molası ")),l(he,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[22]})]),a("div",Zt,[a("div",null,[e[23]||(e[23]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",Xt,d(de.value),1)]),a("div",null,[e[24]||(e[24]=a("div",{class:"label"},"Vardiya",-1)),a("div",Qt,d(Je.value),1)])]),e[25]||(e[25]=a("div",{class:"uclu text-center mt-4"},[a("div",null,[a("div",{class:"label"},"Çalışma"),a("div",{class:"metric-time ok"},"00:00")]),a("div",null,[a("div",{class:"label"},"Duruş"),a("div",{class:"metric-time warn"},"00:00")]),a("div",null,[a("div",{class:"label"},"Boşta"),a("div",{class:"metric-time"},"02:00")])],-1))])]),_:1,__:[26]})]),_:1}),l(M,{cols:"12",md:"5",sm:"6"},{default:o(()=>[l(Z,{class:"pa-3"},{default:o(()=>{var n,p,h;return[l(X,{class:"panel-title pa-0"},{default:o(()=>e[27]||(e[27]=[v("ÜRETİM RAKAMLARI")])),_:1,__:[27]}),e[40]||(e[40]=a("hr",null,null,-1)),a("section",ea,[l(ne,{"model-value":(((n=i.value)==null?void 0:n.net_qty)+((p=i.value)==null?void 0:p.counter))/((h=i.value)==null?void 0:h.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(Q,null,{default:o(()=>[l(M,{cols:"5"},{default:o(()=>{var b,g,D,x,k,V,B,Y;return[a("div",null,[a("div",ta,[e[28]||(e[28]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",aa,d(I((b=i.value)==null?void 0:b.order_qty)),1)]),a("div",la,[e[29]||(e[29]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",ia,d(I((g=i.value)==null?void 0:g.net_qty)),1)]),a("div",oa,[e[30]||(e[30]=a("div",{class:"label"},"Sayaç",-1)),a("div",sa,d(I((D=i.value)==null?void 0:D.counter)),1)]),a("div",na,[e[31]||(e[31]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",ra,d(I(((x=i.value)==null?void 0:x.net_qty)+((k=i.value)==null?void 0:k.counter))),1)]),a("div",ua,[e[32]||(e[32]=a("div",{class:"label"},"Kalan",-1)),a("div",da,d(I((((V=i.value)==null?void 0:V.order_qty)??0)-((B=i.value)==null?void 0:B.counter)-(((Y=i.value)==null?void 0:Y.net_qty)??0))),1)])])]}),_:1}),l(M,{cols:"7"},{default:o(()=>{var b,g,D,x;return[a("div",null,[l(Q,null,{default:o(()=>[l(M,{cols:"6"},{default:o(()=>{var k;return[e[33]||(e[33]=a("div",{class:"label"},"Hurda",-1)),a("div",va,d(I((k=i.value)==null?void 0:k.scrap_qty)),1)]}),_:1,__:[33]}),l(M,{cols:"6"},{default:o(()=>{var k,V,B,Y,ze;return[e[34]||(e[34]=a("div",{class:"label"},"O.A.%",-1)),a("div",ma,d(((k=i.value)==null?void 0:k.net_qty)===0||((V=i.value)==null?void 0:V.order_qty)===0?0:((((B=i.value)==null?void 0:B.net_qty)+((Y=i.value)==null?void 0:Y.counter))/((ze=i.value)==null?void 0:ze.order_qty)*100).toFixed(0)),1)]}),_:1,__:[34]})]),_:1}),a("div",ca,[e[35]||(e[35]=a("div",null,"İş Emri No:",-1)),a("div",pa,d((b=i.value)==null?void 0:b.worder_no),1)]),a("div",fa,[e[36]||(e[36]=a("div",null,"Ürün Kodu:",-1)),a("div",ba,d((g=i.value)==null?void 0:g.item_code),1)]),a("div",ya,[e[37]||(e[37]=a("div",null,"Ürün Adı:",-1)),a("div",_a,d((D=i.value)==null?void 0:D.item_name),1)])]),a("div",ga,[e[38]||(e[38]=a("div",null,"Ürün Boyu:",-1)),a("div",ka,d(I((x=i.value)==null?void 0:x.item_length)),1)]),a("div",wa,[l(E,{id:"hurdaGir",variant:"outlined",color:"error",width:"100%",onClick:Me},{default:o(()=>[e[39]||(e[39]=v(" F8 - Hurda Girişi ")),l(he,{end:"",icon:"tabler-trash"})]),_:1,__:[39]})])]}),_:1})]),_:1})])]}),_:1,__:[40]})]),_:1})]),_:1})]),l(Ue,{modelValue:F.value,"onUpdate:modelValue":e[4]||(e[4]=n=>F.value=n),"max-width":"400"},{default:o(()=>[l(Z,null,{default:o(()=>[l(X,null,{default:o(()=>e[41]||(e[41]=[v("Hurda Girişi")])),_:1,__:[41]}),l(He,null,{default:o(()=>[l(Oe,{ref_key:"hurdaInputRef",ref:Ee,modelValue:H.value,"onUpdate:modelValue":e[3]||(e[3]=n=>H.value=n),label:"Hurda Miktarı",type:"number","hide-details":"",autofocus:"",onKeydown:[W(z(Ie,["prevent"]),["enter"]),W(z(pe,["prevent"]),["esc"])]},null,8,["modelValue","onKeydown"]),e[42]||(e[42]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[42]}),l(Fe,null,{default:o(()=>[l(Ge),l(E,{variant:"text",color:"grey",onClick:pe},{default:o(()=>e[43]||(e[43]=[v("İptal (Esc)")])),_:1,__:[43]}),l(E,{variant:"elevated",color:"error",onClick:Ie},{default:o(()=>e[44]||(e[44]=[v("Kaydet (Enter)")])),_:1,__:[44]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[50]||(e[50]=qe('<div class="mid-actions" data-v-d4722ae8><div class="action-left" data-v-d4722ae8><button class="btn" data-v-d4722ae8>İş Emrini Kapat</button><button class="btn btn-primary" data-v-d4722ae8>Çalışmaya Başla</button><button class="btn" data-v-d4722ae8>Operasyon Gir</button><button class="btn" data-v-d4722ae8>Teknik Resim</button><button class="btn" data-v-d4722ae8>Ürün Etiketi Bas</button><button class="btn icon" data-v-d4722ae8>🔍 Ara</button></div><div class="action-right" data-v-d4722ae8><button class="btn btn-warn" data-v-d4722ae8>Vardiya Bitir</button><button class="btn icon" data-v-d4722ae8>🟨</button><button class="btn icon" data-v-d4722ae8>🗂️</button><button class="btn icon" data-v-d4722ae8>⏻</button></div></div>',1)),a("section",ha,[l(u(ht),{class:"orders-grid","data-source":be.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:o(()=>[l(u(y),{type:"buttons",width:"30",buttons:et}),l(u(y),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(u(y),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(u(y),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(u(y),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(u(y),{"data-field":"stokAdi",caption:"STOK ADI"}),l(u(y),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}})]),_:1},8,["data-source"])]),e[51]||(e[51]=qe('<div class="bottom-tabs" data-v-d4722ae8><button class="tab active" data-v-d4722ae8>İş Emirleri</button><button class="tab" data-v-d4722ae8>Duruşlar</button><button class="tab" data-v-d4722ae8>Hurdalar</button><button class="tab" data-v-d4722ae8>Ölçümler</button><button class="tab" data-v-d4722ae8>Kısayollar</button></div>',1)),l(Ue,{modelValue:N.value,"onUpdate:modelValue":e[8]||(e[8]=n=>N.value=n),"max-width":"420",onKeydown:e[9]||(e[9]=W(z(n=>N.value=!1,["prevent","stop"]),["esc"]))},{default:o(()=>[l(Z,null,{default:o(()=>[l(X,null,{default:o(()=>e[45]||(e[45]=[v("İş Emrini Aktif Et")])),_:1,__:[45]}),l(He,null,{default:o(()=>{var n,p,h;return[a("form",{onSubmit:z(ye,["prevent"])},[a("div",Sa,[a("strong",null,d((n=_.value)==null?void 0:n.isEmriNo),1),v(" – "+d((p=_.value)==null?void 0:p.stokKodu),1)]),a("div",Da,d((h=_.value)==null?void 0:h.stokAdi),1),l(Oe,{ref:"activateLengthInput",modelValue:G.value,"onUpdate:modelValue":e[5]||(e[5]=b=>G.value=b),modelModifiers:{number:!0},type:"number",label:"Ürün Boyu (mm)",variant:"outlined",density:"compact",autofocus:"",onKeydown:[W(z(ye,["prevent"]),["enter"]),e[6]||(e[6]=W(z(b=>N.value=!1,["prevent","stop"]),["esc"]))]},null,8,["modelValue","onKeydown"]),e[46]||(e[46]=a("button",{type:"submit",style:{display:"none"}},null,-1))],32)]}),_:1}),l(Fe,null,{default:o(()=>[l(Ge),l(E,{variant:"text",onClick:e[7]||(e[7]=n=>N.value=!1)},{default:o(()=>e[47]||(e[47]=[v("İptal")])),_:1,__:[47]}),l(E,{color:"primary",variant:"flat",onClick:ye,disabled:!G.value},{default:o(()=>e[48]||(e[48]=[v("Onayla")])),_:1,__:[48]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(u(Dt),{visible:w.value,"onUpdate:visible":e[11]||(e[11]=n=>w.value=n),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":lt,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}}},{content:o(()=>[l(Q,{class:"pa-4"},{default:o(()=>[l(s,{ref_key:"durusSelectRef",ref:_e,modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=n=>f.value=n),items:ee.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!P.value,class:we({"app-select--force-disabled":!P.value})},null,8,["modelValue","items","disabled","class"])]),_:1})]),title:o(()=>e[49]||(e[49]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:o(()=>[l(u(St),{widget:"dxButton",toolbar:"bottom",location:"center",options:{...at,onClick:Ce,disabled:K.value}},null,8,["options"])]),_:1},8,["visible"])])}}}),Vl=Vt(xa,[["__scopeId","data-v-d4722ae8"]]);export{Vl as default};
