const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-CcIa1HPl.js","assets/main-0wKr-Em8.css"])))=>i.map(i=>d[i]);
import{d as se,r as d,q as x,D as N,t as D,aW as re,aN as le,aQ as ie,i as ne,a as ue,c as y,o as u,m as v,b as r,l as t,az as de,e as i,p as I,F as U,ay as me,aA as ce,f as l,g as B,n as pe,aF as w,aM as fe,aE as ye,T as ge,eB as _e,aP as $,aK as he}from"./main-CcIa1HPl.js";import{r as j,e as be}from"./validators-BwBNGiur.js";import{_ as Ve}from"./AppTextField.vue_vue_type_script_setup_true_lang-NNcDz5K8.js";import{p as ve}from"./cookies-BKoq7nke.js";import{u as K}from"./useGenerateImageVariant-Kt0cvRPB.js";import{a as we,b as ke,c as Le,d as Ce}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as Re,b as Te}from"./misc-mask-light-Ha4lQOdV.js";import{$ as xe}from"./api-NV0O4CND.js";import{V as E}from"./VCol-B2eM-9ZZ.js";import{V as Ie}from"./VImg-K7rD3lBB.js";import{V as Ee}from"./VCard-DWziF1jn.js";import{V as Y}from"./VCardText-DbElftoT.js";import{V as H}from"./VAlert-8M6DGcLr.js";import{V as ze}from"./VForm-DINsou1v.js";import{V as Q}from"./VRow-c902D45J.js";import{V as Se}from"./VCheckbox-B2y0ZAfO.js";import"./helpers-BGv4x_9E.js";import"./form-DCcyOPlW.js";import"./VTextField-BAh_jwT4.js";/* empty css                   */import"./VCounter-BWAfyOL-.js";import"./index-9Hgif7L6.js";import"./VField-BDN9Ni5A.js";import"./easing-Bybner-F.js";import"./VInput-CqVw3DlZ.js";import"./forwardRefs-C-GTDzx5.js";import"./index-B2suliLw.js";import"./index-CvOPxmL5.js";/* empty css              */import"./createSimpleFunctional-MLkkMb8d.js";import"./VAvatar-Tt7m8rPe.js";import"./VCheckboxBtn--TVa-agu.js";import"./VSelectionControl-N_SqpwCp.js";const Ae={class:"intro-content"},Me={class:"intro-title-wrapper"},Ne={key:0,class:"intro-title"},Be=["aria-label"],Pe={key:0,class:"intro-sub"},qe={class:"auth-logo d-flex align-center gap-x-3"},Fe={class:"auth-title"},Ge={class:"position-relative bg-background w-100 me-0"},Oe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},De=["src"],Ue={class:"d-flex align-center flex-wrap justify-space-between my-6"},W="loginIntroShownV1",Lt=se({__name:"login",setup($e){const J=K(Ce,Le,ke,we,!0),X=K(Te,Re),k=d(!1),z=x("userData"),L=N(()=>{var s;const a=z==null?void 0:z.value,e=(a==null?void 0:a.co_name)??(a==null?void 0:a.firma_adi)??(a==null?void 0:a.companyName)??((s=a==null?void 0:a.user)==null?void 0:s.co_name)??null;return((e?String(e).trim():"")||"kurum adı").toLowerCase()}),P=N(()=>{var a,e;return((e=(a=D)==null?void 0:a.app)==null?void 0:e.logo)??null}),q=re(),Z=le(),ee=ie(),C=d({email:void 0,password:void 0}),F=d(),c=d({email:"",password:""}),R=d(!1),h=d(!1),g=d(null),te=async()=>{var a;h.value=!0,g.value=null,C.value={email:void 0,password:void 0};try{try{ve()}catch{}const e=await xe("/auth/login",{method:"POST",body:{email:c.value.email,password:c.value.password},onResponseError({response:n}){var T,_;console.error("Login error:",n._data);const f=((T=n._data)==null?void 0:T.errors)||null;C.value=f||{email:"Giriş başarısız",password:"Giriş başarısız"},g.value=((_=n._data)==null?void 0:_.message)||(typeof n._data=="string"?n._data:null)||"Giriş işlemi başarısız oldu. Lütfen bilgilerinizi kontrol edin."}}),{accessToken:p,userData:o,userAbilityRules:s}=e,m=_e(s),O={path:"/",sameSite:"Lax",secure:typeof location<"u"?location.protocol==="https:":!1},A=R.value?{...O,maxAge:3600*24*30}:{...O,session:!0};x("userAbilityRules",A).value=s,ee.update(m);const oe=x("userData",A);oe.value=o;try{const n=window;n.__appTitleRef&&(n.__appTitleRef.value=o)}catch{}x("accessToken",A).value=p;try{const n=(o==null?void 0:o.co_name)??(o==null?void 0:o.firma_adi)??(o==null?void 0:o.companyName)??((a=o==null?void 0:o.user)==null?void 0:a.co_name),f=(n?String(n).trim():"kurum adı").toLowerCase();D.app.title=f;const{layoutConfig:T}=await $(async()=>{const{layoutConfig:_}=await import("./main-CcIa1HPl.js").then(M=>M.f1);return{layoutConfig:_}},__vite__mapDeps([0,1]));T.app.title=f;try{const _=await $(()=>import("./main-CcIa1HPl.js").then(M=>M.f2),__vite__mapDeps([0,1]));_.layoutConfig.app.title=f}catch{}}catch{}await he(()=>{const f=c.value.password==="pass1234"?"/force-password":q.query.to?String(q.query.to):"/home-page";Z.push(f)})}catch(e){console.error(e),g.value||(g.value="Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin.")}finally{h.value=!1}},ae=()=>{var a;(a=F.value)==null||a.validate().then(({valid:e})=>{e&&te()})},b=d(!1),V=d(!1),G=N(()=>(L.value||"").split(""));function S(){b.value=!1;try{localStorage.setItem(W,"1")}catch{}}return ne(()=>{var s;try{V.value=(s=window.matchMedia("(prefers-reduced-motion: reduce)"))==null?void 0:s.matches}catch{}if((()=>{try{return localStorage.getItem(W)==="1"}catch{return!1}})()||V.value){b.value=!1;return}b.value=!0;const e=1800+G.value.length*35,p=Math.min(3500,e);setTimeout(()=>{b.value&&S()},p);const o=m=>{m.key==="Escape"&&(S(),window.removeEventListener("keydown",o))};window.addEventListener("keydown",o)}),(a,e)=>{const p=ue("RouterLink"),o=Ve;return u(),y(U,null,[t(b)?(u(),y("div",{key:0,class:de(["login-intro",{"reduced-motion":t(V)}]),"aria-live":"polite"},[e[4]||(e[4]=i("div",{class:"intro-bg"},null,-1)),e[5]||(e[5]=i("div",{class:"intro-noise"},null,-1)),i("div",Ae,[i("div",Me,[t(V)?(u(),y("h1",Ne,I(t(L)),1)):(u(),y("h1",{key:1,class:"intro-title-chars","aria-label":t(L)},[(u(!0),y(U,null,me(t(G),(s,m)=>(u(),y("span",{key:m,class:"char",style:ce({animationDelay:m*35+"ms"})},I(s===" "?" ":s),5))),128))],8,Be))]),t(V)?v("",!0):(u(),y("p",Pe,"Üretimde yeni bir gün başlıyor...")),i("button",{type:"button",class:"intro-skip",onClick:S,"aria-label":"Animasyonu Geç"},"Geç")])],2)):v("",!0),r(p,{to:"/"},{default:l(()=>[i("div",qe,[t(P)?(u(),B(t(pe),{key:0,nodes:t(P)},null,8,["nodes"])):v("",!0),i("h1",Fe,I(t(L)),1)])]),_:1}),r(Q,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[r(E,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[i("div",Ge,[i("div",Oe,[r(Ie,{"max-width":"613",src:t(J),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),i("img",{class:"auth-footer-mask",src:t(X),alt:"auth-footer-mask",height:"280",width:"100"},null,8,De)])]),_:1}),r(E,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[r(Ee,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:l(()=>[r(Y,null,{default:l(()=>e[6]||(e[6]=[i("h4",{class:"text-h4 mb-1"},[i("span",{class:"text-capitalize"}," OFT MES'e hoşgeldiniz' "),w("! 👋🏻 ")],-1),i("p",{class:"mb-0"}," Lütfen hesabınıza giriş yapın ve maceraya başlayın... ",-1)])),_:1,__:[6]}),r(Y,null,{default:l(()=>[t(h)?(u(),B(H,{key:0,type:"info",class:"mb-4"},{default:l(()=>e[7]||(e[7]=[w(" Giriş yapılıyor, lütfen bekleyin... ")])),_:1,__:[7]})):v("",!0),t(g)?(u(),B(H,{key:1,type:"error",class:"mb-4"},{default:l(()=>[w(I(t(g)),1)]),_:1})):v("",!0),r(t(ze),{ref_key:"refVForm",ref:F,onSubmit:fe(ae,["prevent"])},{default:l(()=>[r(Q,null,{default:l(()=>[r(E,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).email,"onUpdate:modelValue":e[0]||(e[0]=s=>t(c).email=s),label:"E-posta",placeholder:"oft@oft.com",type:"email",autofocus:"",rules:["requiredValidator"in a?a.requiredValidator:t(j),"emailValidator"in a?a.emailValidator:t(be)],"error-messages":t(C).email},null,8,["modelValue","rules","error-messages"])]),_:1}),r(E,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).password,"onUpdate:modelValue":e[1]||(e[1]=s=>t(c).password=s),label:"Şifre",placeholder:"············",rules:["requiredValidator"in a?a.requiredValidator:t(j)],type:t(k)?"text":"password",autocomplete:"password","error-messages":t(C).password,"append-inner-icon":t(k)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=s=>k.value=!t(k))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),i("div",Ue,[r(Se,{modelValue:t(R),"onUpdate:modelValue":e[3]||(e[3]=s=>ye(R)?R.value=s:null),label:"Beni Hatırla"},null,8,["modelValue"]),r(p,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:l(()=>e[8]||(e[8]=[w(" Şifremi Unuttum? ")])),_:1,__:[8]})]),r(ge,{block:"",type:"submit",loading:t(h),disabled:t(h)},{default:l(()=>e[9]||(e[9]=[w(" Giriş Yap ")])),_:1,__:[9]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Lt as default};
