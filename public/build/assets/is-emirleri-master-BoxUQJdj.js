import{_ as xa}from"./AppStepper.vue_vue_type_style_index_0_lang-D8lhSLMy.js";import{d as Da,r as o,D as Te,w as Sa,i as Ta,aK as He,q as Ia,eC as Ca,a as ct,c as I,o as S,m as P,b as e,e as u,aF as C,p as z,f as n,g as za,l,aA as Ie,az as Q,V as Va,T as K,y as Aa,F as Ra,s as k}from"./main-CfDTW6ay.js";import{u as Pa}from"./pageTitle-CKDbQOmI.js";import{D as $}from"./button-DFDqDM2X.js";import{D as vt,a as je}from"./switch-cY4jz5JW.js";import{D as We}from"./select-box-D5gIFd43.js";import{D as Ka}from"./context-menu-CzTynFWQ.js";import{s as Ce,D as s,e as Ea,f as Na,g as ze,h as Ma,i as Ga,j as Oa,k as Fa,d as Ve,l as $a,m as Ba,n as Ua,o as Ya,p as La,b as qa,c as x,q as Ha,r as B,t as U}from"./data-grid-oLBYRoay.js";import{D as ja}from"./load-panel-BDBNVQ9Y.js";import{D as Wa}from"./number-box-FXp4kpsQ.js";import{D as E,a as Y}from"./popup-B8kVmXA8.js";import{D as ft}from"./text-area-CfitwpSz.js";import{D as V}from"./text-box-cniOd34R.js";import{D as Za}from"./tooltip-Cz1a1SSt.js";import{q as Xa}from"./m_resize_observer-DbXB89Jj.js";import"./dom_component-CxBuN1Lf.js";import"./m_select_box-XSoBwOQc.js";import{e as Ja}from"./export_data_grid-DBS5D0mX.js";import"./format_helper-RaMmsP54.js";import{n as h}from"./notify-9lWan_Fm.js";import{e as Qa}from"./exceljs.min-Dm3_meIG.js";import{F as el}from"./FileSaver.min-DTJoJ69M.js";import{_ as tl}from"./SurecCell.vue_vue_type_style_index_0_lang-tPD9N4sA.js";import{V as pe}from"./VCardText-DNtqTuId.js";import{V as p}from"./VCol-vX6rmMLY.js";import{V as Ae,a as yt,b as gt}from"./VCard-Bz9fLrng.js";import{V as T}from"./VRow-Dl8Y2lyW.js";import{V as al}from"./VDivider-V_x1YTDm.js";import{V as ll}from"./VForm-pmOh3EV3.js";import{V as il,a as Ze}from"./VWindowItem-Ce5TgCR8.js";import{V as nl}from"./VTextField-CgT4K5fw.js";import{V as ol}from"./VSwitch-B8rpE2_3.js";import{V as bt}from"./VSpacer-CzEM3mcz.js";import{V as kt}from"./VDialog-BLS0AjxZ.js";import{V as sl}from"./VSelect-xoZ8A1mG.js";import"./VSlideGroup-ByVWRBD9.js";import"./VSlideGroupItem-BC4DPljf.js";import"./VAvatar-ebY-q34V.js";import"./VImg-DobWnUWT.js";import"./index-Cy0l1E_C.js";import"./index-B6KgUdjp.js";import"./m_row_dragging-Ci-cxSDu.js";import"./themes-CpvyosPU.js";import"./overlay-D8JZN5GH.js";import"./editor-Cn-9omxE.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./m_utils.scroll-5teVK0j7.js";import"./m_popover-VlAPWAo2.js";import"./export_merged_ranges_manager-qNBu9Tp8.js";import"./language_codes-J2Dz1qEH.js";import"./progress-bar-DU5fb0yW.js";/* empty css              */import"./createSimpleFunctional-CjJ9evqk.js";import"./form-BB6vZLQh.js";import"./forwardRefs-C-GTDzx5.js";import"./lazy-BvCcbrSS.js";import"./ssrBoot-66VMtX4e.js";/* empty css                   */import"./VCounter-8HOTDAFK.js";import"./VField-DO976Md6.js";import"./easing-Bybner-F.js";import"./VInput-bEwmKZKs.js";import"./VSelectionControl-zzOxuIQ_.js";import"./VOverlay-jJDa372m.js";import"./delay-BCkG5Ru2.js";import"./scopeId-BHUB4_Vt.js";import"./dialog-transition-DZU-kviv.js";import"./VList-BMV2kgHy.js";import"./VMenu-Dq8-d2yB.js";import"./VCheckboxBtn-nBm6B-5s.js";import"./VChip-DrgH_o7A.js";const rl={key:0,class:"montaj-loading-overlay"},ul={class:"montaj-loading-content"},dl={class:"montaj-loading-hint"},ml={key:0,class:"montaj-loading-timeout"},pl={id:"liste",style:{"margin-block-end":"-10px"}},cl={class:"informer"},vl={class:"count"},fl={class:"informer"},yl={class:"count"},gl={key:0,class:Q(["dx-icon","dx-icon-belloutline"]),style:{fontSize:"20px",color:"green"}},bl={key:0,class:Q(["dx-icon","dx-icon-warning"]),style:{fontSize:"20px",color:"red"}},kl={class:"popup-center"},wl={class:"popup-center"},hl={class:"popup-center"},_l={class:"popup-center"},xl={key:0},Dl={key:1},Sl={class:"popup-center"},Tl={class:"caption"},Il={style:{"block-size":"613px"}},wt="İş Emirleri",ht="MASTER",Re="planlama:is-emirleri-master",qi=Da({__name:"is-emirleri-master",props:{tab:{},mesaj:{},tablo:{},istasyon:{type:Boolean},operasyon:{type:Boolean},grup:{type:Boolean},isMerkezi:{},indx:{}},setup(_t){function D(a){return typeof a.value=="number"?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a.value):a.valueText}const ee=o(!1),te=o(!1),ae=o(!1),ce=o(!1),ve=o(!1),le=o(!1),Pe=o(!1),y=o([]);o(null);const Xe=o(null);Pa().setTitle(`${wt} (${ht})`),document.title=`OFT - ${wt} | ${ht}`,o(null),o({});const fe=o(!1),N=o(!1),ie=o(!1),ne=o(!0),Je=o([]),L=o([]),xt=o([]),Qe=o([]),oe=o([]);o([]),o([]);const Ke=o([]),w=o(null),Dt=o(null),St=o(null),Ee=o(!0),ye=o(!1),ge=o(""),et={of:"window"},be=o(0),tt=o(0),M=o(null),ke=o(!1),q=o(!1),we=o(!1),Ne=o(!1),Me=o(!1),at=o(!1),Ge=o(!1),Tt=Te(()=>we.value&&Ne.value&&Me.value&&Ge.value);Sa(Tt,a=>{a&&!q.value&&(q.value=!0)});const It=Te(()=>{const a=[];return a.push(we.value?"Veri ✓":"Veri..."),a.push(Ne.value?"Düzen ✓":"Düzen..."),a.push(Me.value?"Render ✓":"Render..."),a.join(" / ")});setTimeout(()=>{q.value||(at.value=!0,q.value=!0)},12e3);async function Oe(a){ge.value=a,await He(),await new Promise(t=>requestAnimationFrame(()=>t()))}function Fe(){ye.value=!1,ge.value=""}const g=o([]),_=o(new Date),lt=o(new Date),it=o(null),H=o(""),$e=o("");o(null);const se=o(null),A=o(""),Ct=o(Date.now()),Be=o(0);o(0),o(0);const Ue=o(2),nt=o(0),ot=o(""),Ye=o([]),re=o(0),Le=o([]),ue=o(0);o([]),o([]);const zt=()=>{const a=["ITEM ID","STOK KODU","BAKİYE"],t=oe.value.filter(i=>i.bakiye?i.bakiye<0:!1);if(t.length===0){const i=document.createElement("textarea");i.value=" ",i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),h("Eksik bulunamadı.","warning",1500);return}const r=t.map(i=>{const c=Number.parseFloat(i.bakiye.toString())||0;return`${i.item_id}	${i.stok_kodu}	${i.stok_adi}	${c}`}),d=[a.join("	"),...r].join(`
`),v=document.createElement("textarea");v.value=d,v.style.position="absolute",v.style.left="-9999px",document.body.appendChild(v),v.select();try{document.execCommand("copy"),h("Eksikler kopyalandı.","success",1500)}catch(i){console.error("Kopyalama sırasında bir hata oluştu:",i)}document.body.removeChild(v)},j=o(!1),W=o(""),de=o(!0),Z=o([]),X=o(!1),R=o(null);async function he(){try{const{data:a}=await k.get("/api/grid-layouts",{params:{page:Re}});Z.value=Array.isArray(a)?a:[]}catch(a){console.error("Düzenler alınamadı:",a)}}function Vt(){var r;const a=(r=w.value)==null?void 0:r.instance;if(!a)return null;const t=a.state();return t&&!de.value&&("filterValue"in t&&delete t.filterValue,"filterPanel"in t&&delete t.filterPanel,Array.isArray(t.columns)&&t.columns.forEach(d=>{!d||typeof d!="object"||(delete d.filterValue,delete d.filterType,delete d.filterValues,delete d.selectedFilterOperation)})),t}async function At(){const a=Vt();if(a){if(!W.value.trim()){j.value=!0;return}try{await k.post("/api/grid-layouts",{page_key:Re,name:W.value.trim(),include_filters:de.value,state:a,meta:{version:1,last_used:!0}}),j.value=!1,await he();const t=Z.value.find(r=>r.name===W.value.trim());if(t!=null&&t.id)try{await k.put(`/api/grid-layouts/${t.id}/last-used`,{page_key:Re})}catch{}}catch(t){console.error("Düzen kayıt hatası:",t)}}}async function Rt(){await he(),R.value=null,X.value=!0}function st(a){var t;(t=w.value)!=null&&t.instance&&w.value.instance.state(a)}function Pt(){const a=Z.value.find(t=>t.id===R.value);a&&(st(a.state),X.value=!1,a.id&&k.put(`/api/grid-layouts/${a.id}/last-used`,{page_key:Re}).catch(()=>{}))}async function Kt(){if(R.value)try{await k.delete(`/api/grid-layouts/${R.value}`),await he(),R.value=null,Z.value.length===0&&(X.value=!1)}catch(a){console.error("Düzen silme hatası:",a)}}const Et=()=>{var a;(a=w.value)!=null&&a.instance&&w.value.instance.state(null)},Nt=a=>{g.value=a.selectedRowsData},Mt=(a,t)=>{const r=t.data.teknik_not1&&t.data.teknik_not1.trim()!=="",d=t.data.teknik_not2&&t.data.teknik_not2.trim()!=="";a.innerText=t.text;const v=(i,c)=>{const b=document.createElement("span");return c==="Planlamanın Notu"?b.className="dx-icon dx-icon-square":b.className="dx-icon dx-icon-message",b.style.marginLeft="8px",b.style.color=i,b.style.fontSize="16",b.style.display="inline-flex",b.addEventListener("click",()=>{it.value=c==="Planlamanın Notu"?t.data.teknik_not1:t.data.teknik_not2,H.value=c,ce.value=!ce.value}),b};if(r){let i="";switch(t.data.teknik_not1){case"Mekanik eksik":i="orange";break;case"Satınalma eksik":i="red";break;case"Revizyon yapıldı. Müşteri / Arge":i="gray";break;case"Ürün ağacı yok":i="gray";break;case"Beklemede - Yönetim - Fiyat":i="#f79191";break;case"İptal - Müşteri":i="darkgray";break;default:i="#a29bef";break}const c=v(i,"Planlamanın Notu");a.appendChild(c)}if(d){const i=v("green","Üretimin Notu");a.appendChild(i)}},rt=a=>{if(!a||typeof a!="string")return null;const[t,r,d]=a.split(".");return`${d}-${r}-${t}`},Gt=(a,t)=>{const r=rt(t.data.teslim_tarihi),d=rt(t.data.planlanan_bitis_tarihi),v=d?new Date(d):new Date,i=r?new Date(r):new Date;v.setHours(0,0,0,0),i.setHours(0,0,0,0);const c=Math.floor((i.getTime()-v.getTime())/(1e3*60*60*24));a.innerText=t.text;const b=(f,_a)=>{const J=document.createElement("span");return J.className=_a?"dx-icon dx-icon-isnotblank":"dx-icon dx-icon-isblank",J.style.marginRight="8px",J.style.color=f,J.style.fontSize="16",J.style.display="inline-flex",J};if(c<0){const f=b("red",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else if(c===0){const f=b("blue",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else if(c<=3){const f=b("orange",!0);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}else{const f=b("white",!1);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}},m=o({hafta:"",isemri_no:"",teslim_tarihi:"",siparis_belge_no:"",isemri_id:"",sip_not1:"",sip_not2:"",sip_not3:"",sip_not4:"",teknik_not1:"",teknik_not2:"",cari_ad:"",eksikler:"",kaydi_giren_kullanici:"",planlanan_baslangic:"",planlanan_bitis_tarihi:"",aksesuar:"",sip_detay_id:0,istasyon:"",stok_kodu:"",stok_adi:"",CIKIS_DEPO:"",siparis_miktari:0}),qe=o([{title:"Sipariş Detayı",subtitle:"Seçilmedi"},{title:"Alt İş Emirleri",subtitle:"Seçilmedi"},{title:"Rota",subtitle:"Tasarım aşamasında"}]),_e=o(0),Ot=()=>{if(m.value===null||m.value.isemri_no===""){h("Önce iş emrini seçmelisiniz...","error",1500);return}se.value&&(A.value===""?A.value=se.value:A.value+=(A.value?`
`:"")+se.value)},xe={width:100,type:"success",text:"Kaydet",stylingMode:"contained"},De={width:100,type:"normal",text:"Vazgeç",stylingMode:"contained",onClick:()=>{ee.value=!1,te.value=!1,ae.value=!1,ve.value=!1,le.value=!1}},Ft=async()=>{const a=g.value.map(r=>({item_id:r.item_id,isemriID:r.isemri_id,operasyonID:r.OPERASYON_ID,istasyonID:r.IS_ISTASYONU_ID,isMerkeziID:r.IS_MERKEZI_ID,satir_id:r.satir_id,ismerkezi_kodu:ue.value,istasyon_kodu:re.value,rotaGuncelle:ne.value})),t=O.value.id;try{const r=await k.post("/api/istasyonKaydet",{updateData:a,userID:t});G(),g.value=[],Se(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}le.value=!1},$t=()=>{$e.value==="planlanan_baslangic"&&Yt("t"),ee.value=!1},Bt=()=>{Lt(),te.value=!1},Ut=async()=>{ae.value=!1;const a=g.value.map(r=>({isemriNo:r.isemri_no,aksesuar:N.value===!0?1:0,orderDId:r.sip_detay_id})),t=O.value.id;console.log("Aksesuar güncelleme verisi:",a);try{const r=await k.post("/api/aksesuarKaydet",{updateData:a,userID:t});G(),g.value=[],Se(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},Yt=async a=>{y.value[1]===null&&(y.value[1]=y.value[0]),new Date(_.value),new Date(_.value);const t=g.value.map(d=>({tur:a,satir_id:d.satir_id,isEmriID:d.isemri_id,isemriNo:d.isemri_no,sure:0,aksesuar:N.value===!0?1:0,teslimTarih:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_baslangic:`${y.value[0].getFullYear()}-${(y.value[0].getMonth()+1).toString().padStart(2,"0")}-${y.value[0].getDate().toString().padStart(2,"0")} ${y.value[0].getHours().toString().padStart(2,"0")}:${y.value[0].getMinutes().toString().padStart(2,"0")}:${y.value[0].getSeconds().toString().padStart(2,"0")}`,planlanan_bitis:`${y.value[1].getFullYear()}-${(y.value[1].getMonth()+1).toString().padStart(2,"0")}-${y.value[1].getDate().toString().padStart(2,"0")} ${y.value[1].getHours().toString().padStart(2,"0")}:${y.value[1].getMinutes().toString().padStart(2,"0")}:${y.value[1].getSeconds().toString().padStart(2,"0")}`})),r=O.value.id;try{const d=await k.post("/api/updatePlanBaslangic",{updateData:t,userID:r});G(),g.value=[],Se(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(d){console.error("Güncelleme sırasında hata oluştu:",d)}},Lt=async()=>{const a=g.value.map(r=>({tur:"s",birlesik:ie.value===!0?1:0,gun:Ue.value,satir_id:r.satir_id,isEmriID:r.isemri_id,isemriNo:r.isemri_no,sure:0,sip_detay_id:r.sip_detay_id,aksesuar:N.value===!0?1:0,teslimTarih:`${_.value.getFullYear()}-${(_.value.getMonth()+1).toString().padStart(2,"0")}-${_.value.getDate().toString().padStart(2,"0")} ${_.value.getHours().toString().padStart(2,"0")}:${_.value.getMinutes().toString().padStart(2,"0")}:${_.value.getSeconds().toString().padStart(2,"0")}`})),t=O.value.id;try{const r=await k.post("/api/updatePlanBaslangic",{updateData:a,userID:t});G(),g.value=[],Se(),h("Kayıt başarıyla güncellendi...","success",1500)}catch(r){console.error("Güncelleme sırasında hata oluştu:",r)}},Se=()=>{var t;const a=(t=w.value)==null?void 0:t.instance;a==null||a.clearSelection()},qt=async()=>{try{const a=L.value.findIndex(r=>r.isemri_no===m.value.isemri_no);if(a===-1){h("Güncellenecek kayıt bulunamadı.","success",1500);return}if((await k.post("/api/planNotKaydet",{satir_id:m.value.isemri_no,not:A.value})).status===200){const r=[...L.value];r[a].teknik_not1=A.value,L.value=r,h("Notlar başarıyla güncellendi...","success",1500)}}catch(a){console.error("Kaydetme sırasında bir hata oluştu:",a)}},ut=a=>{a.rowType==="data"&&(a.column.dataField==="isemri_miktari"||a.column.dataField==="uretilen_net_miktar"||a.column.dataField==="kalan_miktar")&&a.value>0&&(a.cellElement.style.fontWeight="bold"),a.rowType==="data"&&a.column.dataField==="toplam_hurda_miktari"&&a.value>0&&(a.cellElement.style.color="white",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#EC2407"),a.rowType==="data"&&a.column.dataField==="kalan_siparis_miktari"&&a.value>0&&(a.cellElement.style.color="black",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#b7d0e8"),a.rowType==="data"&&a.column.dataField==="hafta"&&(a.cellElement.style.fontWeight="bold")},Ht=a=>{var b;if(a.rowType!=="data")return;const t=new Date,r=new Date;r.setDate(t.getDate()-1);const d=f=>f.toISOString().split("T")[0],v=d(t),i=d(r),c=(b=a.data)==null?void 0:b.kayit_tarihi;if(c){const f=d(new Date(c));(f===v||f===i)&&(a.rowElement.style.backgroundColor="rgba(250,160,8,0.12)",a.rowElement.style.fontWeight="bold")}},jt=a=>{a.rowType==="data"&&a.column.dataField==="qty_prm"&&(a.cellElement.style.fontWeight="bold")},Wt=a=>{a.rowType==="data"&&a.column.dataField==="bakiye"&&a.value<0&&(a.cellElement.style.color="white",a.cellElement.style.fontWeight="bold",a.cellElement.style.backgroundColor="#EC2407"),a.rowType==="data"&&(a.column.dataField==="qty_net"||a.column.dataField==="qty_prm")&&(a.cellElement.style.fontWeight="bold")},Zt=a=>{a.rowType==="data"&&(Ke.value=[],nt.value=a.data.stok_kodu,ot.value=a.data.stok_adi,da(a.data.item_id),Pe.value=!0)},me=_t,Xt=()=>{var a,t;(t=(a=w.value)==null?void 0:a.instance)==null||t.clearFilter()},Jt=(a,t)=>{a.innerText=t.text;const r=t.data.tipi,d=(c,b)=>{const f=document.createElement("span");return f.className="dx-icon dx-icon-isnotblank",f.style.marginRight="8px",f.style.color=c,f.style.fontSize="16",f.style.display="inline-flex",f};let v="gray";switch(r){case"Hammadde":v="gold";break;case"YarıMamul":v="limegreen";break;case"Mamul":v="green";break;case"Ticari":v="gray";break}const i=d(v);a.insertBefore(i,a.firstChild)},Qt=a=>{if(a.rowIndex===-1)return;const t=a.row.data;qe.value[0].subtitle=t.siparis_belge_no,m.value=t,Be.value=t.satir_id,m.value.siparis_belge_no=t.siparis_belge_no!=null?t.siparis_belge_no:"",m.value.istasyon=t.IS_ISTASYONU,A.value=t.teknik_not1!=null?t.teknik_not1:"",me.grup&&(ke.value=!0)},ea=a=>{const t=a.row.data;N.value=t.aksesuar!==null},ta=a=>{var d,v,i,c;const t=(d=w.value)==null?void 0:d.instance;if(!t)return;tt.value=((v=t.getDataSource())==null?void 0:v.totalCount())||0;const r=(i=t.getDataSource())==null?void 0:i.group();Array.isArray(r)&&r.length>0?(M.value=((c=r[0])==null?void 0:c.selector)||null,be.value=M.value?dt(M.value):0):r!=null&&r.selector?(M.value=r.selector,be.value=M.value?dt(M.value):0):(M.value=null,be.value=0),we.value&&!Ge.value&&(Ge.value=!0)},aa=a=>{},dt=a=>Xa(L.value).groupBy(a).toArray().length,la=()=>{Ee.value=!Ee.value},mt=a=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}$e.value=a,_.value=new Date(a==="planlanan_baslangic"?g.value[0].planlanan_baslangic:g.value[0].teslim_tarihi),lt.value=new Date(a==="planlanan_baslangic"?g.value[0].planlanan_bitis_tarihi:g.value[0].teslim_tarihi),y.value=[_.value,lt.value],ee.value=!0},ia=a=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}$e.value=a,ie.value=!1,_.value=new Date(g.value[0].teslim_tarihi),te.value=!0},na=()=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}ue.value=0,re.value=0,Le.value=[],Ye.value=[],ra(),ne.value=!0,le.value=!0},oa=()=>{if(m.value===null){h("Önce iş emrini seçmelisiniz...","error",1500);return}oe.value=[],H.value=`${m.value.isemri_no} nolu iş emri detayı ( ${m.value.stok_adi} )`,sa(),ve.value=!0},pt=()=>{if(g.value.length===0){h("Önce iş emrini seçmelisiniz...","error",1500);return}N.value=g.value[0].aksesuar!==""&&m.value.aksesuar!==null,ae.value=!0},G=async()=>{try{await Oe("Veriler yükleniyor...");const a=await k.get("/api/data",{params:{tablo:"MASTER",isMerkezi:["4001"],coID:O.value.co_id}});L.value=a.data.emirler,xt.value=a.data.siparisler,Je.value=a.data.notlar}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{Fe(),we.value=!0}},sa=async()=>{try{const a=await k.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:m.value.CIKIS_DEPO||0,isemri_id:m.value.isemri_id}});Qe.value=a.data.data,qe.value[1].subtitle=`${a.data.toplamIsEmri} ad / ${a.data.toplamSure} dk`,oe.value=a.data.malzemeler}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}},ra=async()=>{await Oe("İş merkezleri yükleniyor...");try{const a=await k.get("/api/merkezal");Le.value=a.data.merkezler}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{Fe()}},ua=async()=>{re.value=0,await Oe("İstasyonlar yükleniyor...");try{const a=await k.get("/api/istasyonal",{params:{ismerkezi:ue.value}});Ye.value=a.data.istasyonlar}catch(a){console.error("Veri çekilirken hata oluştu: ",a)}finally{Fe()}},da=async a=>{try{const t=await k.get("/api/digerdepobakiyeleri",{params:{item_id:a,depo:m.value.CIKIS_DEPO||0}});Ke.value=t.data.bakiyeler}catch(t){console.error("Veri çekilirken hata oluştu: ",t)}};Ta(async()=>{await G();try{await he();const a=Z.value.find(t=>{var r;return(r=t==null?void 0:t.meta)==null?void 0:r.last_used});a!=null&&a.state&&(await He(),st(a.state))}catch{}Ne.value=!0,He(()=>{w.value&&w.value.instance&&w.value.instance.clearSelection(),requestAnimationFrame(()=>{Me.value=!0})}),console.log("Kullanıcı bilgileri:",O.value)});const ma=async()=>{await G()},pa=()=>{fe.value=!fe.value},ca=a=>new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a),O=Ia("userData"),va=a=>{const t=new Qa.Workbook,r=t.addWorksheet("MasterIsEmirleri");Ja({component:a.component,worksheet:r,autoFilterEnabled:!0}).then(()=>{t.xlsx.writeBuffer().then(d=>{el.saveAs(new Blob([d],{type:"application/octet-stream"}),"MasterIsEmirleri.xlsx")})}),a.cancel=!0},fa=Ca(),F=Te(()=>fa.can("manage","planlama")),ya=[{text:"Yenile"},{text:"Haftaya Göre Grupla"},{text:"Detay Göster"},{text:"İstasyona Gönder",requiresManage:!0},{text:"Üretim Tarihini Değiştir",requiresManage:!0},{text:"Teslim Tarihini Değiştir",requiresManage:!0},{text:"Aksesuar",requiresManage:!0},{text:"Teknik Resim Göster"},{text:"Düzen Yükle"},{text:"Düzen Kaydet"},{text:"Düzen Sıfırla"}],ga=Te(()=>ya.filter(a=>F.value||!("requiresManage"in a)));function ba({itemData:a}){if(!(a!=null&&a.items))switch(a==null?void 0:a.text){case"Yenile":G();break;case"Detay Göster":oa();break;case"Haftaya Göre Grupla":wa();break;case"İstasyona Gönder":na();break;case"Üretim Tarihini Değiştir":H.value="Üretim tarihini seçiniz",mt("planlanan_baslangic");break;case"Teslim Tarihini Değiştir":H.value="Teslim tarihini seçiniz",ia("teslim_tarihi");break;case"Aksesuar":pt();break;case"Düzen Yükle":Rt();break;case"Teknik Resim Göster":ka();break;case"Düzen Kaydet":W.value="",de.value=!0,j.value=!0;break;case"Düzen Sıfırla":Et();break;case"RAL Kodlarını Güncelle":ha();break}}const ka=()=>{const t=`undefined/api/get-pdf/${`${m.value.stok_kodu}.pdf`}`;window.open(t,"_blank")};function wa(){var a;(a=w.value)!=null&&a.instance&&(w.value.instance.clearGrouping(),w.value.instance.columnOption("haftax","groupIndex",0))}const ha=async()=>{const a=O.value.id;try{const t=await k.post("/api/ralguncelle",{userID:a});h("Renk Kodları başarıyla güncellendi...","success",2e3)}catch(t){console.error("Güncelleme sırasında hata oluştu:",t)}ye.value=!1};return(a,t)=>{const r=ct("DxGridLoadPanel"),d=ct("DxScrollView"),v=xa;return S(),I(Ra,null,[q.value?P("",!0):(S(),I("div",rl,[u("div",ul,[t[38]||(t[38]=u("div",{class:"montaj-spinner","aria-label":"Yükleniyor"},null,-1)),t[39]||(t[39]=u("h2",{class:"montaj-loading-title"},"Master İş Emirleri Yükleniyor",-1)),u("p",dl,[t[36]||(t[36]=C(" Kritik veriler alınıyor: ")),u("strong",null,z(It.value),1)]),t[40]||(t[40]=u("p",{class:"montaj-loading-sub"}," İlk listeleme tamamlandığında ekran otomatik açılacak. ",-1)),at.value?(S(),I("p",ml,t[37]||(t[37]=[u("span",{class:"warn"},"Beklenen bazı veriler gecikti, yine de gösteriliyor...",-1)]))):P("",!0)])])),e(Ae,{class:"mt-0 pa-0 pt-2"},{default:n(()=>[e(pe,{class:"mt-0 pa-0 ms-2 me-1"},{default:n(()=>[e(p,{cols:"12",class:"mt-0 pa-1 pe-2"},{default:n(()=>[u("div",pl,[e(l(Ka),{"data-source":ga.value,width:200,target:"#grid",onItemClick:ba},null,8,["data-source"]),(S(),za(l(Ce),{id:"grid",ref_key:"dataGridRef",ref:w,key:Ct.value,"data-source":L.value,"key-expr":"satir_id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,onExporting:va,"allow-column-reordering":!0,"column-auto-width":!1,onContentReady:ta,onFocusedRowChanged:Qt,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:ut,onSelectionChanged:Nt,"auto-navigate-to-focused-row":!0,onRowPrepared:Ht,"on-option-changed":aa,onContextMenuPreparing:ea,"focused-row-key":Be.value,"onUpdate:focusedRowKey":t[0]||(t[0]=i=>Be.value=i),"selected-rows-keys":g.value},{aksesuarliTemplate:n(()=>[e(l($),{icon:"gift","styling-mode":"text",hint:"Aksesuar Ekle/Kaldır"})]),baslangicTarihiTemplate:n(()=>[e(l($),{icon:"clock","styling-mode":"text",hint:"Başlangıç Tarihini Değiştir"})]),gruplaTemplate:n(()=>[e(l($),{icon:"hierarchy","styling-mode":"text",hint:"Haftayı Grupla"})]),totalCountTemplate:n(()=>[u("div",cl,[u("div",vl,z(be.value),1),t[41]||(t[41]=u("span",null,"Toplam Grup",-1))])]),totalRecordTemplate:n(()=>[u("div",fl,[u("div",yl,z(tt.value),1),t[42]||(t[42]=u("span",null,"Toplam Kayıt",-1))])]),filtreTemizleTemplate:n(()=>[e(l($),{icon:"notequal","styling-mode":"text",hint:"Filtre Temizle",id:"filtretemizle"})]),menuFiltreTemizleTemplate:n(()=>t[43]||(t[43]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-undo"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Temizle")],-1)])),yenileTemplate:n(()=>[e(l($),{icon:"refresh","styling-mode":"text",hint:"Yenile",id:"sayim"})]),menuYenileTemplate:n(()=>t[44]||(t[44]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-refresh"}),u("span",{style:{"margin-inline-start":"8px"}},"Yenile")],-1)])),filtreGosterTemplate:n(()=>[e(l($),{icon:"filter","styling-mode":"text",hint:"Filtre Goster"})]),menuFiltreGosterTemplate:n(()=>t[45]||(t[45]=[u("div",{style:{display:"flex","align-items":"center"}},[u("i",{class:"dx-icon dx-icon-filter"}),u("span",{style:{"margin-inline-start":"8px"}},"Filtre Göster")],-1)])),collapseTemplate:n(()=>[e(l($),{icon:fe.value?"collapse":"expand",hint:"expandAll ? 'Daralt' : 'Genişlet'",width:"40",height:"40","styling-mode":"text",onClick:pa},null,8,["icon"])]),surecCellTemplate:n(({data:i})=>[e(Va,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,height:"20",color:"warning"},{default:n(()=>[u("span",null,z(Math.ceil(i.value))+"%",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),notlarPTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(S(),I("i",gl)):P("",!0)]),notlarOTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(S(),I("i",{key:0,class:Q(["dx-icon","dx-icon-belloutline"]),style:Ie({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):P("",!0)]),eksiklerTemplate:n(({data:i})=>[i.value==="1"||i.value===1?(S(),I("i",bl)):P("",!0)]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(S(),I("i",{key:0,class:Q(["dx-icon","dx-icon-gift"]),style:Ie({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):P("",!0)]),aktifTemplate:n(({data:i})=>[i.value===1?(S(),I("i",{key:0,class:Q(["dx-icon","dx-icon-runner"]),style:Ie({fontSize:"20px",color:a.staticPrimaryColor})},null,4)):P("",!0)]),default:n(()=>[e(l(s),{"data-field":"id",caption:"ID",visible:!1,"min-width":90}),e(l(s),{"data-field":"hafta",caption:"HAFTA",fixed:!0,width:120,visible:!0,alignment:"left","cell-template":Mt}),e(l(s),{"data-field":"grup_id",caption:"GRUP ID","data-type":"string",visible:me.grup,width:40},null,8,["visible"]),e(l(s),{"data-field":"IS_ISTASYONU",caption:"İST. ADI",visible:a.operasyon,width:130},null,8,["visible"]),e(l(s),{"data-field":"IS_ISTASYONU_KODU",caption:"İSTASYON KODU",visible:!1,width:150}),e(l(s),{"data-field":"IS_ISTASYONU_ADI",caption:"İSTASYON ADIx",visible:!1,width:150}),e(l(s),{"data-field":"OPERASYON",caption:"OPRSYN",visible:a.operasyon,width:120},null,8,["visible"]),e(l(s),{"data-field":"siparis_belge_no",caption:"SİPARİŞ NO",width:90,visible:!0,"allow-sorting":!1}),e(l(s),{"data-field":"cari_ad",caption:"MÜŞTERİ",visible:!0,"min-width":140,"allow-sorting":!1}),e(l(s),{"data-field":"stok_kodu",caption:"STOK KODU",visible:!0,width:120,"allow-sorting":!1}),e(l(s),{"data-field":"stok_adi",caption:"STOK ADI","min-width":"200","allow-sorting":!1}),e(l(s),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:150,visible:!1,"allow-sorting":!1}),e(l(s),{"data-field":"isemri_no",caption:"İŞ EMRİ NO",width:120,"allow-sorting":!1}),e(l(s),{"data-field":"teslim_tarihi",caption:"TESLİM TARİHİ","data-type":"date",width:140,visible:a.operasyon,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},"cell-template":Gt,"allow-sorting":!1},null,8,["visible","format"]),e(l(s),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:130,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(s),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:110,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")},alignment:"left"},null,8,["format"]),e(l(s),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:90,visible:!0,"allow-sorting":!1}),e(l(s),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center","allow-sorting":!1}),e(l(s),{"data-field":"siparis_miktari",caption:"SİPARİŞ MİKTARI","data-type":"number",width:60,visible:!0,"allow-sorting":!1}),e(l(s),{"data-field":"isemri_miktari",caption:"İŞ EMRİ MİKTARI","data-type":"number",width:60,visible:!0}),e(l(s),{"data-field":"uretilen_toplam_miktar",caption:"TOPLAM URETİLEN","data-type":"number",width:60,visible:!1,"allow-sorting":!1}),e(l(s),{"data-field":"uretilen_net_miktar",caption:"NET URETILEN","data-type":"number",width:60,visible:!0}),e(l(s),{"data-field":"toplam_hurda_miktari",caption:"HURDA MİKTARI","data-type":"number",width:60,visible:!0,"allow-sorting":!1}),e(l(s),{"data-field":"operasyon_hazirlik_suresi",caption:"HAZIRLIK SÜRESİ","data-type":"number",width:60,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(l(s),{"data-field":"operasyon_suresi",caption:"OPERASYON SÜRESİ","data-type":"number",width:60,visible:!0,format:{type:"fixedPoint",precision:1,thousandsSeparator:","},"allow-sorting":!1}),e(l(s),{"data-field":"aksesuar",caption:"AKSESUAR",visible:me.operasyon,width:60,"cell-template":"aksesuarTemplate",alignment:"center","allow-sorting":!1},null,8,["visible"]),e(l(s),{"data-field":"eksikler",caption:"EKSİKLER",visible:!0,width:60,"cell-template":"eksiklerTemplate",alignment:"center","allow-sorting":!1}),e(l(s),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140,"allow-sorting":!1}),e(l(s),{"data-field":"teknik_not1",caption:"PLN NOTU",width:60,"allow-sorting":!1}),e(l(s),{"data-field":"teknik_not2",caption:"OPR NOTU",width:90,visible:me.grup,alignment:"center","allow-sorting":!1},null,8,["visible"]),e(l(s),{"data-field":"kaydi_giren_kullanici",caption:"KAYIT YAPAN","min-width":120,width:140,"allow-sorting":!1}),e(l(s),{"data-field":"item_id",caption:"ITEM ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(s),{"data-field":"satir_id",caption:"SATIR ID",visible:!1,"min-width":90,"allow-sorting":!1}),e(l(s),{"data-field":"sip_not1",caption:"SİP NOT 1","min-width":120,"allow-sorting":!1}),e(l(s),{"data-field":"sip_not2",caption:"SİP NOT 2","min-width":120,"allow-sorting":!1}),e(l(s),{"data-field":"sip_not3",caption:"SİP NOT 3","min-width":120,"allow-sorting":!1}),e(l(s),{"data-field":"sip_not4",caption:"SİP NOT 4","min-width":120,"allow-sorting":!1}),e(l(s),{"data-field":"CIKIS_DEPO",caption:"ÇIKIŞ DEPO","min-width":80,"allow-sorting":!1}),e(r,{enabled:q.value,text:ge.value||"Yükleniyor...","show-indicator":!0,"show-pane":!0,shading:!0},null,8,["enabled","text"]),e(l(Ea),{mode:"multiple","select-all-mode":"page","show-check-boxes-mode":"onClick"}),e(l(Na),{"auto-expand-all":fe.value},null,8,["auto-expand-all"]),e(l(ze),{visible:!0}),e(l(Ma),{visible:!0}),e(l(Ga),{visible:!0}),e(l(Oa),{visible:Ee.value},null,8,["visible"]),e(l(Fa),{visible:!0,width:240}),e(l(Ve),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(l($a),{mode:"multiple"}),e(l(Ba),{enabled:!0,"allow-export-selected-data":!1}),e(l(Ua),{height:"540px",enabled:!0,mode:"select",position:et},{default:n(()=>[e(l(Ya),{enabled:!0}),e(l(La),{"allow-select-all":!0,"select-by-click":!0,recursive:!0})]),_:1}),e(l(qa),null,{default:n(()=>[e(l(x),{location:"before",name:"groupPanel"}),e(l(x),{location:"before","locate-in-menu":"auto",template:"collapseTemplate"}),e(l(x),{location:"before",template:"totalCountTemplate"}),e(l(x),{location:"before",template:"totalRecordTemplate"}),e(l(x),{location:"before",template:"gruplaTemplate",visible:ke.value&&F.value,onClick:a.grup},null,8,["visible","onClick"]),e(l(x),{location:"before",template:"baslangicTarihiTemplate",visible:ke.value&&F.value,onClick:mt},null,8,["visible"]),e(l(x),{location:"before","locate-in-menu":"auto",template:"aksesuarliTemplate",visible:ke.value&&F.value,onClick:pt},null,8,["visible"]),e(l(x),{location:"after","locate-in-menu":"auto",template:"yenileTemplate","menu-item-template":"menuYenileTemplate",onClick:ma}),e(l(x),{location:"after","locate-in-menu":"auto",template:"filtreTemizleTemplate","menu-item-template":"menuFiltreTemizleTemplate",onClick:Xt}),e(l(x),{location:"after","locate-in-menu":"auto",template:"filtreGosterTemplate","menu-item-template":"menuFiltreGosterTemplate",onClick:la}),e(l(x),{name:"exportButton"}),e(l(x),{name:"columnChooserButton"}),e(l(x),{name:"searchPanel"})]),_:1}),e(l(Ha),null,{default:n(()=>[e(l(B),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(B),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(l(B),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(B),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(B),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(B),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(B),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"isemri_no","summary-type":"count","display-format":"{0} iş emri",alignment:"right"}),e(l(U),{"align-by-column":!0,column:"kalan_miktar","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"kalan_siparis_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"isemri_miktari","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"operasyon_hazirlik_suresi","summary-type":"sum",alignment:"right","customize-text":D}),e(l(U),{"align-by-column":!0,column:"operasyon_suresi","summary-type":"sum",alignment:"right","customize-text":D})]),_:1})]),_:1},8,["data-source","focused-row-key","selected-rows-keys"])),e(l(ja),{visible:ye.value,"onUpdate:visible":t[1]||(t[1]=i=>ye.value=i),"show-indicator":!0,"show-pane":!0,shading:!0,message:ge.value||"Yükleniyor...",position:et},null,8,["visible","message"])])]),_:1})]),_:1})]),_:1}),e(l(Y),{visible:te.value,"onUpdate:visible":t[6]||(t[6]=i=>te.value=i),width:500,height:560,"hide-on-outside-click":!0,"show-close-button":!0,title:"Teslim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[u("div",kl,[e(l(vt),{ref_key:"calendarRef",ref:Xe,value:_.value,"onUpdate:value":t[2]||(t[2]=i=>_.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"single","show-today-button":!0},null,8,["value"])])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",wl,[t[46]||(t[46]=u("h2",{class:"mr-4"},"Üretimi Etkileme",-1)),e(l(je),{value:ie.value,"onUpdate:value":t[3]||(t[3]=i=>ie.value=i)},null,8,["value"]),t[47]||(t[47]=u("h2",{class:"ml-4"},"Üretimi Etkile",-1))])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",hl,[t[48]||(t[48]=u("h2",null,"Geri çekilecek gün sayısı: ",-1)),e(l(Wa),{min:0,"show-spin-buttons":!0,"read-only":!ie.value,value:Ue.value,"onUpdate:value":t[4]||(t[4]=i=>Ue.value=i),"input-attr":{"aria-label":"Gun"},style:{"inline-size":"100px","margin-inline-start":"10px"}},null,8,["read-only","value"])])]),_:1})]),default:n(()=>[e(l(E),{widget:"dxButton",toolbar:"bottom",location:"center",options:xe,onClick:t[5]||(t[5]=i=>Bt())}),e(l(E),{widget:"dxButton",toolbar:"bottom",location:"center",options:De})]),_:1},8,["visible"]),e(l(Y),{visible:ee.value,"onUpdate:visible":t[9]||(t[9]=i=>ee.value=i),width:350,height:470,"hide-on-outside-click":!0,"show-close-button":!0,title:"Üretim Tarihini Giriniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(vt),{ref_key:"calendarRef",ref:Xe,value:y.value,"onUpdate:value":t[7]||(t[7]=i=>y.value=i),"show-week-numbers":!0,"select-week-on-click":!0,"selection-mode":"range","show-today-button":!0},null,8,["value"])]),_:1})]),default:n(()=>[e(l(E),{widget:"dxButton",toolbar:"bottom",location:"after",options:xe,onClick:t[8]||(t[8]=i=>$t())}),e(l(E),{widget:"dxButton",toolbar:"bottom",location:"after",options:De})]),_:1},8,["visible"]),e(l(Y),{visible:le.value,"onUpdate:visible":t[15]||(t[15]=i=>le.value=i),width:400,height:330,"hide-on-outside-click":!1,"show-close-button":!0,title:"İş Merkezi / İstasyonu seçiniz"},{content:n(()=>[e(p,{cols:"12"},{default:n(()=>[e(l(We),{"data-source":Le.value,value:ue.value,"onUpdate:value":t[10]||(t[10]=i=>ue.value=i),label:"İş Merkezi","label-mode":"floating","display-expr":"mrk_adi","value-expr":"is_merkezi_id",onValueChanged:t[11]||(t[11]=i=>ua()),style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[e(l(We),{"data-source":Ye.value,value:re.value,"onUpdate:value":t[12]||(t[12]=i=>re.value=i),label:"İstasyon","label-mode":"floating","display-expr":"ist_adi","value-expr":"istasyon_id",style:{"inline-size":"100%"}},null,8,["data-source","value"])]),_:1}),e(p,{cols:"12"},{default:n(()=>[u("div",_l,[e(l(je),{value:ne.value,"onUpdate:value":t[13]||(t[13]=i=>ne.value=i)},null,8,["value"]),ne.value?(S(),I("div",xl,t[49]||(t[49]=[u("h2",{class:"ms-2"}," Rota Güncellensin",-1)]))):(S(),I("div",Dl,t[50]||(t[50]=[u("h2",{class:"ms-2"}," Rota Güncellenmesin",-1)])))])]),_:1})]),default:n(()=>[e(l(E),{widget:"dxButton",toolbar:"bottom",location:"center",options:xe,onClick:t[14]||(t[14]=i=>Ft())}),e(l(E),{widget:"dxButton",toolbar:"bottom",location:"center",options:De})]),_:1},8,["visible"]),e(l(Y),{visible:ae.value,"onUpdate:visible":t[18]||(t[18]=i=>ae.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:"Aksesuar olacak mı?"},{content:n(()=>[u("div",Sl,[t[51]||(t[51]=u("h2",{class:"mr-4"},"Aksesuarsız",-1)),e(l(je),{value:N.value,"onUpdate:value":t[16]||(t[16]=i=>N.value=i)},null,8,["value"]),t[52]||(t[52]=u("h2",{class:"ml-4"},"Aksesuarlı",-1))])]),default:n(()=>[e(l(E),{widget:"dxButton",toolbar:"bottom",location:"after",options:xe,onClick:t[17]||(t[17]=i=>Ut())}),e(l(E),{widget:"dxButton",toolbar:"bottom",location:"after",options:De})]),_:1},8,["visible"]),e(l(Y),{visible:ce.value,"onUpdate:visible":t[19]||(t[19]=i=>ce.value=i),width:400,height:220,"hide-on-outside-click":!0,"show-close-button":!0,title:H.value},{content:n(()=>[e(d,{width:"100%",height:"100%"},{default:n(()=>[u("div",Tl,z(m.value.isemri_no),1),C(" "+z(it.value),1)]),_:1})]),_:1},8,["visible","title"]),e(l(Y),{visible:Pe.value,"onUpdate:visible":t[20]||(t[20]=i=>Pe.value=i),"hide-on-outside-click":!0,title:"Diğer Depo Bakiyeleri","show-close-button":!1,"show-title":!0,width:600,height:500},{default:n(()=>[e(p,{class:"text-center"},{default:n(()=>[u("h2",null,z(nt.value),1),u("h2",null,z(ot.value),1)]),_:1}),t[53]||(t[53]=u("br",null,null,-1)),e(T,null,{default:n(()=>[e(p,null,{default:n(()=>[e(l(Ce),{id:"gridBakiyeler",ref:"dataGridRefB","data-source":Ke.value,"show-borders":!0,"column-auto-width":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:jt,"row-alternation-enabled":!0},{default:n(()=>[e(l(s),{"data-field":"whouse_id",caption:"DEPO ID",width:80}),e(l(s),{"data-field":"whouse_code",caption:"DEPO KODU",width:100}),e(l(s),{"data-field":"description",caption:"DEPO ADI"}),e(l(s),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(ze),{visible:!1}),e(l(Ve),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1,__:[53]},8,["visible"]),e(l(Y),{visible:ve.value,"onUpdate:visible":t[28]||(t[28]=i=>ve.value=i),width:1320,height:800,"hide-on-outside-click":!0,"show-close-button":!0,title:H.value},{content:n(()=>[e(Ae,null,{default:n(()=>[e(pe,{class:"mb-0 pb-0"},{default:n(()=>[e(v,{"current-step":_e.value,"onUpdate:currentStep":t[21]||(t[21]=i=>_e.value=i),items:qe.value,class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),e(al),e(pe,null,{default:n(()=>[e(ll,null,{default:n(()=>[e(il,{modelValue:_e.value,"onUpdate:modelValue":t[27]||(t[27]=i=>_e.value=i),class:"disable-tab-transition",style:{"block-size":"170px"}},{default:n(()=>[e(Ze,null,{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"4",class:"mt-0 pa-0"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.istasyon,label:"İş İstasyonu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.siparis_belge_no,label:"Sipariş Nosu","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.kaydi_giren_kullanici,label:"Kayıt Yapan Personel","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.isemri_no,label:"İş Emri No","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"7"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.teslim_tarihi,label:"Teslim Tarihi","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"5"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:ca(m.value.siparis_miktari),label:"Sipariş Miktarı","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not1,label:"Sipariş Notu 1","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not2,label:"Sipariş Notu 2","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,{class:"mt-0"},{default:n(()=>[e(p,{cols:"6"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not3,label:"Sipariş Notu 3","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1}),e(p,{cols:"6"},{default:n(()=>[e(l(V),{class:"kalin","styling-mode":"underlined","label-mode":"outside",value:m.value.sip_not4,label:"Sipariş Notu 4","read-only":!0,"tab-index":-1},null,8,["value"])]),_:1})]),_:1}),e(T,null,{default:n(()=>[e(p,{cols:"7",class:"pa-0 ps-2 pe-3"},{default:n(()=>[e(l(We),{modelValue:se.value,"onUpdate:modelValue":t[22]||(t[22]=i=>se.value=i),items:Je.value,"display-expr":"not","value-expr":"not",disabled:!F.value,label:"Planlama Notu Eklemeleri",class:"kalin"},null,8,["modelValue","items","disabled"])]),_:1}),e(p,{cols:"5",class:"mt-4 pa-0 ps-0 pe-0"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"2",class:"pe-0 ps-1"},{default:n(()=>[e(K,{text:"",icon:"tabler-arrow-down",rounded:"",color:"warning",block:"",disabled:!F.value,modelValue:m.value.teknik_not1,"onUpdate:modelValue":t[23]||(t[23]=i=>m.value.teknik_not1=i),onClick:Ot},null,8,["disabled","modelValue"])]),_:1}),e(p,{cols:"7",class:"pa-0 ps-1 pt-3 pe-1"},{default:n(()=>[e(K,{color:"error",block:"",onClick:qt,disabled:!F.value},{default:n(()=>[e(Aa,{start:"",icon:"tabler-device-floppy"}),t[54]||(t[54]=C(" Kaydet "))]),_:1,__:[54]},8,["disabled"])]),_:1}),e(p,{cols:"3",class:"pe-6 ps-0"},{default:n(()=>[e(K,{text:"",icon:"tabler-copy",rounded:"",color:"success",block:"",modelValue:m.value.teknik_not1,"onUpdate:modelValue":t[24]||(t[24]=i=>m.value.teknik_not1=i),onClick:zt,id:"kopyala"},null,8,["modelValue"])]),_:1}),e(l(Za),{"hide-on-outside-click":!1,target:"#kopyala","show-event":"mouseenter","hide-event":"mouseleave",position:"right"},{default:n(()=>t[55]||(t[55]=[u("b",null,"Malzeme listesindeki 0'dan küçük satırları kopyalar",-1),u("br",null,null,-1),C(" * satırları seçmenize gerek yoktur ")])),_:1,__:[55]})]),_:1})]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(ft),{modelValue:A.value,"onUpdate:modelValue":t[25]||(t[25]=i=>A.value=i),'"':"",label:" Planlamanın Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98,"max-length":950},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",class:"mt-0 pa-0 ps-2 pe-3 pt-3"},{default:n(()=>[e(l(ft),{modelValue:m.value.teknik_not2,"onUpdate:modelValue":t[26]||(t[26]=i=>m.value.teknik_not2=i),label:"Üretimin Notu",style:{"font-weight":"bold !important"},"styling-mode":"outlined","label-mode":"static",height:98},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{cols:"8",class:"mt-0 pa-0 ps-2"},{default:n(()=>[e(T,null,{default:n(()=>[e(p,{cols:"12",class:"mt-2 pa-0 ps-2 pe-3 text-center"},{default:n(()=>[u("h4",null,"Malzeme Listesi ("+z(oe.value.length)+" parça) (Depo ID: "+z(m.value.CIKIS_DEPO)+")",1),u("div",Il,[e(l(Ce),{id:"gridMalzemeler",ref_key:"dataGridRefM",ref:St,"data-source":oe.value,"key-expr":"item_id","show-borders":!0,"min-width":400,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:Wt,height:"100%","row-alternation-enabled":!0,onRowClick:Zt},{default:n(()=>[e(l(s),{"data-field":"tipi",caption:"TİPİ","data-type":"string",visible:!0,width:65,"cell-template":Jt}),e(l(s),{"data-field":"user_line_no",caption:"LINE NO",width:60,visible:!1}),e(l(s),{"data-field":"item_id",caption:"ITEM ID",width:180,visible:!1}),e(l(s),{"data-field":"stok_kodu",caption:"STOK KODU","min-width":120}),e(l(s),{"data-field":"stok_adi",caption:"STOK ADI","min-width":180}),e(l(s),{"data-field":"worder_m_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(s),{"data-field":"qty_base_bom",caption:"BOM",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(s),{"data-field":"qty_net",caption:"İHTİYAÇ",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(s),{"data-field":"qty_prm",caption:"STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(s),{"data-field":"bakiye",caption:"BAKİYE",width:100,"data-type":"number","sort-order":"asc",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(s),{"data-field":"qty_min_inv",visible:!1,caption:"MİN STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(s),{"data-field":"qty_max_inv",visible:!1,caption:"MAX STOK",width:80,"data-type":"number",format:{type:"fixedPoint",precision:2,thousandsSeparator:","}}),e(l(ze),{visible:!1}),e(l(Ve),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Ze,null,{default:n(()=>[e(T,null,{default:n(()=>[e(l(Ce),{id:"gridDetay",ref_key:"dataGridRefD",ref:Dt,"data-source":Qe.value,"key-expr":"satir_id","show-borders":!0,"min-width":200,"column-auto-width":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget",onCellPrepared:ut,height:"195"},{surecCellTemplate:n(({data:i})=>[e(tl,{"cell-data":i,"max-deger":100},null,8,["cell-data"])]),aksesuarTemplate:n(({data:i})=>[i.value==="Aksesuarlı"?(S(),I("i",{key:0,class:Q(["dx-icon","dx-icon-gift"]),style:Ie({fontSize:"16px",color:a.staticPrimaryColor})},null,4)):P("",!0)]),default:n(()=>[e(l(s),{"data-field":"IS_ISTASYONU",caption:"İSTASYON ADI",width:180}),e(l(s),{"data-field":"OPERASYON",caption:"OPERASYON",width:180}),e(l(s),{"data-field":"stok_adi",caption:"STOK ADI","min-width":200}),e(l(s),{"data-field":"isemri_id",caption:"İŞ EMRİ ID",width:150,visible:!1}),e(l(s),{"data-field":"planlanan_baslangic",caption:"PLN BŞL","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(s),{"data-field":"planlanan_bitis_tarihi",caption:"PLN BTŞ","data-type":"date",width:100,visible:!0,format:{formatter:i=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i)).replace(/\//g,".")}},null,8,["format"]),e(l(s),{"data-field":"kalan_miktar",caption:"KALAN MİKTAR","data-type":"number",width:60,visible:!0}),e(l(s),{"data-field":"surec",caption:"SÜREÇ","data-type":"number",width:150,visible:!0,"cell-template":"surecCellTemplate",alignment:"center"}),e(l(s),{"data-field":"aksesuar",caption:"AKSESUAR",visible:me.operasyon,width:60,"cell-template":"aksesuarTemplate",alignment:"center"},null,8,["visible"]),e(l(s),{"data-field":"operasyon_hazirlik_suresi",caption:"HZRL DK","data-type":"number","min-width":90,width:90}),e(l(s),{"data-field":"operasyon_suresi",caption:"OPRS DK","data-type":"number","min-width":90,width:90}),e(l(s),{"data-field":"isemri_tipi",caption:"İŞ EMRİ TİPİ","min-width":120,width:140}),e(l(ze),{visible:!1}),e(l(Ve),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"})]),_:1},8,["data-source"])]),_:1})]),_:1}),e(Ze,null,{default:n(()=>[e(T)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"]),e(kt,{modelValue:j.value,"onUpdate:modelValue":t[32]||(t[32]=i=>j.value=i),"max-width":"520"},{default:n(()=>[e(Ae,null,{default:n(()=>[e(yt,null,{default:n(()=>t[56]||(t[56]=[C("Sayfa Düzenini Kaydet")])),_:1,__:[56]}),e(pe,null,{default:n(()=>[e(nl,{modelValue:W.value,"onUpdate:modelValue":t[29]||(t[29]=i=>W.value=i),label:"Düzen adı",density:"comfortable",clearable:""},null,8,["modelValue"]),e(ol,{modelValue:de.value,"onUpdate:modelValue":t[30]||(t[30]=i=>de.value=i),label:"Filtreler dahil edilsin",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),e(gt,null,{default:n(()=>[e(bt),e(K,{variant:"text",onClick:t[31]||(t[31]=i=>j.value=!1)},{default:n(()=>t[57]||(t[57]=[C("İptal")])),_:1,__:[57]}),e(K,{color:"primary",onClick:At},{default:n(()=>t[58]||(t[58]=[C("Kaydet")])),_:1,__:[58]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(kt,{modelValue:X.value,"onUpdate:modelValue":t[35]||(t[35]=i=>X.value=i),"max-width":"520"},{default:n(()=>[e(Ae,null,{default:n(()=>[e(yt,null,{default:n(()=>t[59]||(t[59]=[C("Kayıtlı Düzenler")])),_:1,__:[59]}),e(pe,null,{default:n(()=>[e(sl,{items:Z.value,"item-title":"name","item-value":"id",label:"Bir düzen seçin",modelValue:R.value,"onUpdate:modelValue":t[33]||(t[33]=i=>R.value=i)},null,8,["items","modelValue"])]),_:1}),e(gt,null,{default:n(()=>[e(bt),e(K,{variant:"text",onClick:t[34]||(t[34]=i=>X.value=!1)},{default:n(()=>t[60]||(t[60]=[C("Kapat")])),_:1,__:[60]}),e(K,{color:"error",variant:"tonal",disabled:!R.value,onClick:Kt},{default:n(()=>t[61]||(t[61]=[C("Sil")])),_:1,__:[61]},8,["disabled"]),e(K,{color:"primary",disabled:!R.value,onClick:Pt},{default:n(()=>t[62]||(t[62]=[C("Yükle")])),_:1,__:[62]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{qi as default};
