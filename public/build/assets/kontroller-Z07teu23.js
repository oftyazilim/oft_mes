import{d as _a,r,q as ba,w as b,i as Ta,D as Sa,c as h,b as e,l as t,f as i,F as Ee,s as _,e as s,T as g,aF as p,g as fe,m as Y,az as v,p as D,ay as Da,aA as Ca,o as k,x as Ka}from"./main-BsBPzaN6.js";import{D as n,g as He,h as Ia,i as za,j as Ea,k as Ha,d as j,l as G,e as ve,q as Ve,t as Ae,s as q}from"./data-grid-BWwt-OiF.js";import{D as Ne}from"./load-panel-DNXY3KWh.js";import{D as Va,a as Aa}from"./popup-DqRFkKZM.js";import{D as A}from"./select-box-BidWZ4ma.js";import{b as Na}from"./m_resize_observer-D2tcFhH5.js";import{n as Be}from"./notify-0JiCxtId.js";import{V as y}from"./VRow-CwsVaWJo.js";import{V as ke}from"./VDialog-DSxPGXzG.js";import{V as m}from"./VCol-nFHEoKtU.js";import{V as T,c as W,b as Ba,a as Me}from"./VCard-Bn92qnwe.js";import{V as S}from"./VCardText-E037F6rH.js";import{V as N}from"./VTextarea-B2iihHaq.js";import{V as Ma}from"./VAlert-DEFyGUqd.js";import{V as he}from"./VImg-DiUUq3m5.js";import{V as Re}from"./VSpacer-fylUpn_x.js";import"./index-DCLb7BvJ.js";import"./dom_component-BOMsNA7g.js";import"./row_dragging-BzqQhtt7.js";import"./m_row_dragging-DnmdIjTe.js";import"./m_select_box-B4A-KNOi.js";import"./themes-s_hOyPlB.js";import"./editor-658b01uO.js";import"./overlay-CBORn4Ri.js";import"./format_helper-BxObqpko.js";/* empty css              */import"./VOverlay-CVP9BXVv.js";import"./easing-Bybner-F.js";import"./delay-CC_Wsdjb.js";import"./lazy-CJKMN0kx.js";import"./scopeId-D5vbCIfe.js";import"./index-Cxa9DyQz.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-DzHPUjeS.js";import"./createSimpleFunctional-DkyDAl5o.js";import"./VAvatar-DlizocLV.js";/* empty css                   */import"./VCounter-BB8ZrnDR.js";import"./VField-v_wj4PL2.js";import"./form-CvWbcuXT.js";import"./VInput-nbr9WR6i.js";const Ra={class:"d-flex gap-2"},Oa={key:0,class:v(["dx-icon","dx-icon-sun"]),style:{fontSize:"20px",color:"green"}},Ua={key:1,class:v(["dx-icon","dx-icon-moon"]),style:{fontSize:"20px",color:"lightblue"}},Pa={key:0,class:v(["dx-icon","dx-icon-eyeopen"]),style:{fontSize:"20px",color:"green"}},Fa={key:0,class:v(["dx-icon","dx-icon-taskcomplete"]),style:{fontSize:"20px",color:"green"}},$a={key:0,class:v(["dx-icon","dx-icon-runner"]),style:{fontSize:"20px",color:"green"}},La={key:0,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"green"}},Ya={key:1,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"gold"}},ja={key:2,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"red"}},Ga={key:3,class:v(["dx-icon","dx-icon-isblank"]),style:{fontSize:"16px",color:"yellow"}},qa={class:"d-flex gap-2"},Wa={key:0,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"green"}},Xa={key:1,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"gold"}},Za={key:2,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"20px",color:"red"}},Ja={key:3,class:v(["dx-icon","dx-icon-isblank"]),style:{fontSize:"20px",color:"yellow"}},Qa={key:0,class:v(["dx-icon",""]),style:{fontSize:"16px",color:"green"}},et={key:1,class:v(["dx-icon","dx-icon-isnotblank"]),style:{fontSize:"16px",color:"orange"}},at={class:"text-center"},tt={style:{"font-size":"20px"}},lt={class:"d-flex justify-space-between"},ot={class:"pa-2 d-flex justify-center gap-2"},it=_a({__name:"kontroller",setup(nt){const ge=r(!1),B=r(!1),X=ba("userData"),M=r(!1),Z=r(!1),ye=r([]),ie=r([]),Oe=r(0),J=r(null),R=r(0),C=r([]),Ue=r(null),Q=r(null),K=r(null),xe=r(0),x=r(""),we=r(0),Pe=r(!1),Fe=r(!1),$e=r(""),Le=r(""),Ye=r(""),je=r({}),ee=r([]),ne=r(!1),se=r(0),re=r(0),Ge=r([]),de=r(!1),qe=r(""),We=r(null),_e=r([]);let Xe=1;const Ze=r([]),O=r(1),ae=r("..."),ue=r("..."),I=r([]),Je=r([]);r("");const U=r(!1),be=r(""),P=r(!1),Qe=r(null),z=r([]),ce=r(0),Te=r(""),pe=[{title:"✔️ Onaylandı",value:"Onaylandı",color:"#d4edda"},{title:"❌ Red",value:"Red",color:"#f8d7da"},{title:"⚠️ Şartlı Onay",value:"Şartlı Onay",color:"#fff3cd"}],E=new Na({data:pe,key:"value"}),ea={width:100,type:"normal",text:"Kapat",stylingMode:"contained",onClick:()=>{B.value=!1}},c=r({istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:0,personelID:0,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0}),d=r({masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""}),aa=async()=>{if(R.value===0){Be({message:"Lütfen bir iş emri seçiniz.",type:"error",displayTime:3e3});return}C.value=[],ee.value=[];try{const o=await _.get("/api/isEmri",{params:{deger:R.value}});c.value.isEmriId=o.data.data[0].isemri_id,c.value.istasyonID=o.data.data[0].IS_ISTASYONU_ID,c.value.personelID=X.value.id,c.value.istasyon=o.data.data[0].IS_ISTASYONU,c.value.isEmriNo=o.data.data[0].isemri_no,c.value.urunAdi=o.data.data[0].stok_adi,c.value.urunKodu=o.data.data[0].stok_kodu,c.value.musteri=o.data.data[0].cari_ad,c.value.siparisNo=o.data.data[0].siparis_belge_no,c.value.isEmriMiktari=o.data.data[0].isemri_miktari,c.value.planTarih=o.data.data[0].plan_tarih_araligi,c.value.aksesuar=o.data.data[0].aksesuar==="Aksesuarlı",we.value=o.data.data[0].isemri_miktari,te()}catch(o){console.error("Master verileri alınırken hata oluştu:",o)}d.value.isEmriId=c.value.isEmriId,d.value.istasyonID=c.value.istasyonID,d.value.personelID=c.value.personelID,ge.value=!1,I.value=Array.from({length:c.value.isEmriMiktari},(o,a)=>{const l=a+1,u=`${c.value.isEmriNo}-${String(l).padStart(5,"0")}`;return{id:l,serino:u}}),M.value=!1};b(ge,(o,a)=>{a===!1&&o===!0&&F()}),b(B,(o,a)=>{a===!1&&o===!0&&(ie.value=[],ta(),la()),a===!0&&o===!1&&(ue.value="...",ae.value="...")}),b(Pe,(o,a)=>{a===!0&&o===!1&&te()}),b(U,(o,a)=>{a===!0&&o===!1&&Ie()}),b(Fe,(o,a)=>{a===!0&&o===!1&&(Se(),te())}),b(P,(o,a)=>{a===!0&&o===!1&&(z.value=[""])}),b(We,o=>{if(o){const a=new FileReader;a.onload=()=>{typeof a.result=="string"&&_e.value.push({id:Xe++,url:a.result})},a.readAsDataURL(o)}}),b([x,we],([o,a])=>{if(!o||!a)return;const l=[];for(let u=1;u<=Number(a);u++){const w=`${o}-${String(u).padStart(5,"0")}`;l.push({id:u,serino:w})}I.value=l});const F=async()=>{try{const o=await _.get("/api/kontrolListesiAl",{params:{istasyon:0}});ye.value=o.data}catch(o){console.error("Veri çekilirken hata oluştu: ",o)}finally{M.value=!1}},te=async()=>{if(!c.value.isEmriId||!c.value.istasyonID){console.warn("İş Emri veya İstasyon ID eksik");return}try{const o=await _.get("/api/kontrolleri-al",{params:{istasyon:c.value.istasyonID,isEmriId:c.value.isEmriId,isEmriNo:c.value.isEmriNo}}),a=o.data.kontroller;if(ee.value=o.data.revizyonlar||[],C.value=o.data.kontrollerd||[],!a){console.warn("Kontrol kaydı bulunamadı"),d.value={masterId:0,isEmriId:c.value.isEmriId,istasyonID:c.value.istasyonID,personelID:c.value.personelID,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""};return}d.value.masterId=a.id,d.value.urunAgaciText=a.urun_agaci_not,d.value.urunAgaciCheck=a.urun_agaci_ok,d.value.gorunumText=a.gorunum_not,d.value.gorunumCheck=a.gorunum_ok,d.value.olcuselText=a.olcusel_not,d.value.olcuselCheck=a.olcusel_ok,d.value.paketlemeText=a.paketleme_not,d.value.paketlemeCheck=a.paketleme_ok,d.value.etiketText=a.etiket_not,d.value.etiketCheck=a.etiket_ok,d.value.dokumanText=a.dokuman_not,d.value.dokumanCheck=a.dokuman_ok,ua()}catch(o){console.error("Kayıt çekilirken hata oluştu:",o)}finally{M.value=!1}},ta=async()=>{try{const o=await _.get("/api/isEmriDetay",{params:{tablo:"DETAY",depo:0,isemri_id:R.value}});ie.value=o.data.malzemeler,re.value=o.data.toplamMalzeme}catch(o){console.error("Veri çekilirken hata oluştu: ",o)}},la=async()=>{const o=await _.get("/api/urun-agaci-secim/yukle",{params:{urunKodu:c.value.urunKodu}}),a=o.data.selected_ids,l=o.data.data||{};if(l.created_at){const u=new Date(l.created_at),w=String(u.getDate()).padStart(2,"0"),H=String(u.getMonth()+1).padStart(2,"0"),me=u.getFullYear(),oe=String(u.getHours()).padStart(2,"0"),V=String(u.getMinutes()).padStart(2,"0");ae.value=`${w}.${H}.${me} ${oe}:${V}`}else ae.value="...";ue.value=l.personel_adi||"...",Q.value&&Q.value.instance&&Q.value.instance.selectRows(a,!0)},oa=o=>{var a,l,u,w;ce.value=((l=(a=o.row)==null?void 0:a.data)==null?void 0:l.id)||0,Te.value=((w=(u=o.row)==null?void 0:u.data)==null?void 0:w.seri_no)||""},ia=o=>{};Ta(async()=>{document.title="OFT-Kalite Kontrolleri Listesi",F()});const na=async o=>{const a=o==null?void 0:o.component;let l=o==null?void 0:o.data;if(!l&&a&&typeof a.getSelectedRowsData=="function"){const u=a.getSelectedRowsData();u&&u.length&&(l=u[0])}if(!l){console.warn("Çift tıklanan satır verisi alınamadı.");return}Z.value=!0,Se(),da(),R.value=l.isemri_id||0,xe.value=l.id||0,x.value=l.isemri_no||"";try{await aa()}finally{Z.value=!1}};function sa(o){se.value=o.selectedRowKeys.length,ne.value=se.value===re.value,d.value.urunAgaciCheck=ne.value?"Onaylandı":"Red"}const ra=o=>{Je.value=o.selectedRowsData},f=(o,a)=>{const l=document.createElement("span");l.textContent=a.column.caption;const u=a.column.tooltip||a.column.caption;l.setAttribute("title",u),o.appendChild(l)},Se=()=>{$e.value="",Le.value="",Ye.value="",je.value={},Ge.value=[],_e.value=[],Ze.value=[]},da=()=>{R.value=0,x.value="",xe.value=0,c.value={istasyon:"...",siparisNo:"...",isEmriId:0,isEmriNo:"...",urunID:0,urunAdi:"...",urunKodu:"...",musteri:"...",calSure:0,durSure:0,personelSayisi:0,sure:0,durum:"",sebep:"",calOran:0,durOran:0,istasyonID:c.value.istasyonID,personelID:c.value.personelID,planlamaNotu:"",UretimNotu:"",aksesuar:!1,planTarih:"...",isEmriMiktari:0},d.value={masterId:0,isEmriId:0,istasyonID:0,personelID:0,inspectorID:0,urunAgaciText:"",urunAgaciCheck:"",gorunumText:"",gorunumCheck:"",olcuselText:"",olcuselCheck:"",paketlemeText:"",paketlemeCheck:"",etiketText:"",etiketCheck:"",dokumanText:"",dokumanCheck:""},C.value=[],ee.value=[],I.value=[]},ua=()=>{const o=new Set(C.value.map(l=>l.seri_no)),a=I.value.filter(l=>!o.has(l.serino));I.value=a},ca=async()=>{await _.post("/api/kontrolAcKaydet",{isEmriID:c.value.isEmriId,userId:X.value.id}),F()},De=()=>{P.value=!0,_.get("/api/hata-goster-resim",{params:{isEmriNo:c.value.isEmriNo,serino:Te.value}}).then(o=>{z.value=o.data.map(a=>a.url)}).catch(()=>{z.value=[]})},pa=async()=>{if(ce.value===0){Be({message:"Lütfen bir kontrol seçiniz.",type:"error",displayTime:3e3});return}if(window.confirm("Bu kaydı silmek istediğinize emin misiniz?"))try{const a=ce.value||0,l=await _.delete(`/api/kontrol-sil/${a}`);te()}catch(a){alert("Silme işlemi başarısız."),console.error(a)}},ma=async o=>{var l,u,w;if(confirm("Bu fotoğrafı silmek istediğinizden emin misiniz?"))try{const H=await _.delete("/api/hata-sil-resim",{params:{url:o,isEmriNo:c.value.isEmriNo}});z.value=z.value.filter(V=>V!==o);const me=(l=H.data)==null?void 0:l.remaining,oe=(u=H.data)==null?void 0:u.seri_no;if(me===0&&oe){const V=C.value.find(wa=>wa.seri_no.startsWith(oe));V&&(V.is_photo=0,(w=K==null?void 0:K.value)!=null&&w.instance&&K.value.instance.refresh())}F()}catch(H){console.error("Silme hatası:",H),alert("Silinirken hata oluştu.")}},fa=o=>{be.value=o,U.value=!0},Ce=()=>O.value+=.1,Ke=()=>O.value=Math.max(.2,O.value-.1),Ie=()=>{O.value=1,L.value={x:0,y:0}},$=r(!1),le=r({x:0,y:0}),L=r({x:0,y:0}),va=o=>{$.value=!0,le.value={x:o.clientX,y:o.clientY}},ka=o=>{if(!$.value)return;const a=o.clientX-le.value.x,l=o.clientY-le.value.y;L.value.x+=a,L.value.y+=l,le.value={x:o.clientX,y:o.clientY}},ze=()=>{$.value=!1},ha=o=>{o.preventDefault(),o.deltaY<0?Ce():Ke()},ga=()=>{window.open("/api/pdf-goster","_blank")},ya=(o,a)=>{const l=document.createElement("div"),u=document.createElement("i");u.className="dx-icon dx-icon-image",u.style.fontSize="16px",u.style.color="green",l.appendChild(u),o.appendChild(l)},xa=Sa(()=>{var a,l;return(((a=X.value)==null?void 0:a.policies)||((l=X.value)==null?void 0:l.abilities)||[]).includes("button:kalite:resim-sil")});return(o,a)=>(k(),h(Ee,null,[e(t(Ne),{visible:Z.value,"onUpdate:visible":a[0]||(a[0]=l=>Z.value=l),"show-indicator":!0,"show-pane":!0,shading:!0,message:"Yükleniyor...","close-on-outside-click":!1},null,8,["visible"]),e(y,{class:"match-height pt-0 gap-0"},{default:i(()=>[e(m,{md:"8",cols:"12"},{default:i(()=>[e(T,null,{default:i(()=>[e(W,{class:"pb-0",title:"İş Emirleri",subtitle:"Kontrole alınmış iş emirleri"},{append:i(()=>[s("div",Ra,[e(t(g),{variant:"tonal","append-icon":"tabler-refresh",onClick:F},{default:i(()=>a[25]||(a[25]=[p(" Yenile ")])),_:1,__:[25]}),e(t(g),{disabled:x.value.length===0,variant:"tonal","append-icon":"tabler-picture-in-picture",onClick:ga},{default:i(()=>a[26]||(a[26]=[p(" Teknik Resim ")])),_:1,__:[26]},8,["disabled"]),e(t(g),{disabled:x.value.length===0,variant:"tonal","append-icon":"tabler-zoom-check",onClick:ca},{default:i(()=>a[27]||(a[27]=[p(" Aktif Yap ")])),_:1,__:[27]},8,["disabled"])])]),_:1}),e(S,{class:"pa-3 py-0 mt-0"},{default:i(()=>[(k(),fe(t(q),{id:"gridEmirler",ref_key:"emirlerRef",ref:Ue,key:Oe.value,"data-source":ye.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,height:583,"allow-column-resizing":!0,"column-resizing-mode":"widget","column-auto-width":!1,"focused-row-key":J.value,"onUpdate:focusedRowKey":a[2]||(a[2]=l=>J.value=l),onRowDblClick:na,onSelectionChanged:ia},{openTemplate:i(({data:l})=>[l.value===!0?(k(),h("i",Oa)):(k(),h("i",Ua))]),aktifTemplate:i(({data:l})=>[l.value===!0?(k(),h("i",Pa)):Y("",!0)]),gerekliTemplate:i(({data:l})=>[l.value===!0?(k(),h("i",Fa)):Y("",!0)]),cagirTemplate:i(({data:l})=>[l.value===!0?(k(),h("i",$a)):Y("",!0)]),default:i(()=>[e(t(n),{"data-field":"is_open",caption:"Açık",width:30,"sort-order":"desc","sort-index":1,"cell-template":"openTemplate"}),e(t(n),{"data-field":"is_active",caption:"Kontrol Ediliyor",width:30,"sort-order":"desc","sort-index":0,"cell-template":"aktifTemplate"}),e(t(n),{"data-field":"is_use_quality",caption:"Kontrol Gerekli",width:30,"cell-template":"gerekliTemplate"}),e(t(n),{"data-field":"is_check_quality_opr",caption:"Inspektor Çağrıldı",width:30,"cell-template":"cagirTemplate"}),e(t(n),{"data-field":"created_at",caption:"Tarih",width:140,"data-type":"date","sort-order":"desc","sort-index":2,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(n),{"data-field":"id",caption:"ID",visible:!1,width:40}),e(t(n),{"data-field":"isemri_id",caption:" ","data-type":"number",width:30,visible:!1}),e(t(n),{"data-field":"tanim",caption:"İstasyon",width:100,visible:!0}),e(t(n),{"data-field":"belge_no",caption:"Sipariş No",width:120,"allow-sorting":!1}),e(t(n),{"data-field":"cari_ad",caption:"Cari Ad",width:120,"allow-sorting":!1}),e(t(n),{"data-field":"isemri_no",caption:"İş Emri No",width:120,"allow-sorting":!1}),e(t(n),{"data-field":"item_name",caption:"Stok Adı","allow-sorting":!1,"min-width":300}),e(t(n),{"data-field":"item_code",caption:"Stok Kodu",visible:!0,width:150,"allow-sorting":!1}),e(t(n),{"data-field":"name",caption:"Inspektor",width:120}),e(t(n),{"data-field":"istasyon_id",caption:"İSTASYON ID","data-type":"number",width:60,visible:!1}),e(t(Ne),{visible:M.value,"onUpdate:visible":a[1]||(a[1]=l=>M.value=l),"show-indicator":!0,"show-pane":!0,shading:!0},null,8,["visible"]),e(t(He),{visible:!1}),e(t(Ia),{visible:!0}),e(t(za),{visible:!1}),e(t(Ea),{visible:!1}),e(t(Ha),{visible:!0,width:240}),e(t(j),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(t(G),{mode:"none"}),e(t(ve),{"select-all-mode":"page",mode:"single","show-check-boxes-mode":"always"}),e(t(Ve),null,{default:i(()=>[e(t(Ae),{"align-by-column":!0,column:"TANIM","summary-type":"count","display-format":"{0} adet",alignment:"right"})]),_:1})]),_:1},8,["data-source","focused-row-key"])),e(S,{class:"d-flex justify-center my-0 py-2"},{default:i(()=>a[28]||(a[28]=[s("p",{class:"d-flex align-center"},[s("i",{class:v(["dx-icon","dx-icon-sun"]),style:{fontSize:"20px",color:"green"}}),s("span",{class:"ms-3"},"Kontrol Açık")],-1),s("p",{class:"d-flex align-center ps-4"},[s("i",{class:v(["dx-icon","dx-icon-moon"]),style:{fontSize:"20px",color:"lightblue"}}),s("span",{class:"ms-3"},"Kontrol Kapalı")],-1),s("p",{class:"d-flex align-center ps-4"},[s("i",{class:v(["dx-icon","dx-icon-eyeopen"]),style:{fontSize:"20px",color:"green"}}),s("span",{class:"ms-3"},"Kontrol Yapılıyor")],-1),s("p",{class:"d-flex align-center ps-4"},[s("i",{class:v(["dx-icon","dx-icon-taskcomplete"]),style:{fontSize:"20px",color:"green"}}),s("span",{class:"ms-3"},"Kontrol Gerekli")],-1),s("p",{class:"d-flex align-center ps-4"},[s("i",{class:v(["dx-icon","dx-icon-runner"]),style:{fontSize:"20px",color:"green"}}),s("span",{class:"ms-3"},"İnspektör Çağırıldı")],-1),s("p",{class:"d-flex align-center ps-8"},[s("i",{class:v(["dx-icon","dx-icon-info"]),style:{fontSize:"20px",color:"green"}}),s("span",{class:"ms-3",style:{fontStyle:"italic",fontWeight:"bold"}}," Detay bilgi için satıra çift tıklayınız ")],-1)])),_:1,__:[28]})]),_:1})]),_:1})]),_:1}),e(m,{md:"4",cols:"12"},{default:i(()=>[e(m,{cols:"12",class:"pa-0"},{default:i(()=>[e(T,{disabled:x.value.length===0},{default:i(()=>[e(W,{class:"pb-0",title:"Seri Başlangıç Onayı",subtitle:"Montajın başlangıcında yapılan kontroller"},{append:i(()=>[e(t(g),{disabled:x.value.length===0,variant:"tonal",rounded:"",icon:"tabler-binary-tree-2",onClick:a[3]||(a[3]=l=>B.value=!0)},null,8,["disabled"])]),_:1}),e(S,{class:"gap-2 pa-3"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(N,{modelValue:d.value.urunAgaciText,"onUpdate:modelValue":a[4]||(a[4]=l=>d.value.urunAgaciText=l),label:"Ürün Ağacı Kontrolü",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.urunAgaciCheck,"onUpdate:value":a[5]||(a[5]=l=>d.value.urunAgaciCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1"},{default:i(()=>[e(N,{modelValue:d.value.gorunumText,"onUpdate:modelValue":a[6]||(a[6]=l=>d.value.gorunumText=l),label:"Görünüm Kontrolü",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.gorunumCheck,"onUpdate:value":a[7]||(a[7]=l=>d.value.gorunumCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1"},{default:i(()=>[e(N,{modelValue:d.value.olcuselText,"onUpdate:modelValue":a[8]||(a[8]=l=>d.value.olcuselText=l),label:"Ölçüsel Kontrol",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.olcuselCheck,"onUpdate:value":a[9]||(a[9]=l=>d.value.olcuselCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1"},{default:i(()=>[e(N,{modelValue:d.value.paketlemeText,"onUpdate:modelValue":a[10]||(a[10]=l=>d.value.paketlemeText=l),label:"Paketleme Kontrolü",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.paketlemeCheck,"onUpdate:value":a[11]||(a[11]=l=>d.value.paketlemeCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1"},{default:i(()=>[e(N,{modelValue:d.value.etiketText,"onUpdate:modelValue":a[12]||(a[12]=l=>d.value.etiketText=l),label:"Etiket Kontrolü",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.etiketCheck,"onUpdate:value":a[13]||(a[13]=l=>d.value.etiketCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",class:"d-flex mt-2 pa-0"},{default:i(()=>[e(y,{dense:""},{default:i(()=>[e(m,{cols:"8",class:"d-flex pa-1"},{default:i(()=>[e(N,{modelValue:d.value.dokumanText,"onUpdate:modelValue":a[14]||(a[14]=l=>d.value.dokumanText=l),label:"Doküman Kontrolü",variant:"outlined","auto-grow":"",rows:"1",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"4",class:"d-flex pa-1 pe-2"},{default:i(()=>[e(t(A),{"data-source":t(E),value:d.value.dokumanCheck,"onUpdate:value":a[15]||(a[15]=l=>d.value.dokumanCheck=l),"display-expr":"title","value-expr":"value",height:37,"read-only":!0,placeholder:"Boş"},null,8,["data-source","value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}),e(m,{cols:"12",class:"pa-0 pt-3"},{default:i(()=>[e(T,{disabled:x.value.length===0},{default:i(()=>[e(W,{class:"pb-0",title:"Onay Süreci",subtitle:"Tam onay alana kadarki kontrollerin listesidir"}),e(S,{class:"gap-2 pa-2"},{default:i(()=>[e(t(q),{id:"gridSurec","data-source":ee.value,"key-expr":"id","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,width:"100%","column-auto-width":!0,"word-wrap-enabled":!1,"allow-column-resizing":!0,"column-resizing-mode":"widget","focused-row-key":J.value,"onUpdate:focusedRowKey":a[16]||(a[16]=l=>J.value=l),height:"242"},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(k(),h("i",La)):l.value==="Şartlı Onay"?(k(),h("i",Ya)):l.value==="Red"?(k(),h("i",ja)):(k(),h("i",Ga))]),default:i(()=>[e(t(n),{"data-field":"id",caption:"ID",width:"50",visible:!1}),e(t(n),{"data-field":"revizyon",caption:"Rvz",width:"50"}),e(t(n),{"data-field":"kontrol_tarihi",caption:"Tarih","data-type":"date",width:"130",format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(l)).replace(/\//g,".")}},null,8,["format"]),e(t(n),{"data-field":"urun_agaci_ok",caption:"ÜA","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"urun_agaci_not",caption:"Ürün Ağacı Not"}),e(t(n),{"data-field":"gorunum_ok",caption:"GR","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"gorunum_not",caption:"Görünüm Not"}),e(t(n),{"data-field":"olcusel_ok",caption:"ÖL","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"olcusel_not",caption:"Ölçüsel Not"}),e(t(n),{"data-field":"paketleme_ok",caption:"PK","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"paketleme_not",caption:"Paketleme Not"}),e(t(n),{"data-field":"etiket_ok",caption:"ET","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"etiket_not",caption:"Etiket Not"}),e(t(n),{"data-field":"dokuman_ok",caption:"DK","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"dokuman_not",caption:"Doküman Not"}),e(t(j),{mode:"virtual"}),e(t(G),{mode:"none"})]),_:1},8,["data-source","focused-row-key"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(y,{class:"match-height pt-0 gap-0"},{default:i(()=>[e(m,{cols:"12",md:"9"},{default:i(()=>[e(T,{disabled:x.value.length===0},{default:i(()=>[e(W,{class:"pb-0 gap-2",title:"Seri Kontroller",subtitle:"Montajı yapılan ürünlerin birebir kontrolleri"},{append:i(()=>[s("div",qa,[e(t(g),{variant:"tonal",icon:"tabler-trash",rounded:"",onClick:pa}),e(t(g),{variant:"tonal",icon:"tabler-photo",rounded:"",onClick:De})])]),_:1}),e(S,{class:"gap-2 pa-2"},{default:i(()=>[e(t(q),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:K,"data-source":C.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onFocusedRowChanged:oa},{sonucTemplate:i(({data:l})=>[l.value==="Onaylandı"?(k(),h("i",Wa)):l.value==="Şartlı Onay"?(k(),h("i",Xa)):l.value==="Red"?(k(),h("i",Za)):(k(),h("i",Ja))]),hataTemplate:i(({data:l})=>[l.value==="0"||l.value===0?(k(),h("i",Qa)):(k(),h("i",et))]),fotoTemplate:i(({data:l})=>[l.value===!0?(k(),h("i",{key:0,onClick:a[17]||(a[17]=u=>De()),class:v(["dx-icon","dx-icon-image"]),style:{fontSize:"16px",color:"green"}})):Y("",!0)]),default:i(()=>[e(t(n),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(t(n),{"data-field":"urun_kontrol_m_id",caption:"Master ID",width:"70",visible:!1}),e(t(n),{"data-field":"kontrol_tarihi",caption:"Kontrol Tarihi","data-type":"date",width:130,format:{formatter:l=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(l)).replace(/\//g,".")},"allow-sorting":!1},null,8,["format"]),e(t(n),{"data-field":"seri_no",caption:"Seri No",width:"170"}),e(t(n),{"data-field":"is_photo","header-cell-template":ya,width:"30","cell-template":"fotoTemplate"}),e(t(n),{"data-field":"sonuc",caption:"Sonuç",width:"70","cell-template":"sonucTemplate"}),e(t(n),{"data-field":"not",caption:"Not",width:"100"}),e(t(n),{"data-field":"cc",caption:"CC",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Camda Çizik"}),e(t(n),{"data-field":"bke",caption:"BKE",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Bağlantı Kalemi Eksik"}),e(t(n),{"data-field":"cm",caption:"CM",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Çapaklı Malzeme"}),e(t(n),{"data-field":"kh",caption:"KH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kilit Hatası"}),e(t(n),{"data-field":"fb",caption:"FB",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Formda Bozukluk"}),e(t(n),{"data-field":"sh",caption:"SH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Serigrafi Hatası"}),e(t(n),{"data-field":"kah",caption:"KAH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kaynak Hatası"}),e(t(n),{"data-field":"bc",caption:"BC",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Boyada Çizik"}),e(t(n),{"data-field":"kpl",caption:"KPL",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Kaplama Hatası"}),e(t(n),{"data-field":"tkh",caption:"TKH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Topraklama Hatası"}),e(t(n),{"data-field":"bh",caption:"BH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Boya Hatası"}),e(t(n),{"data-field":"ieh",caption:"IEH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"İş Emri Hatası"}),e(t(n),{"data-field":"oh",caption:"OH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Ölçüsel Hata"}),e(t(n),{"data-field":"h19",caption:"H19",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"19'' Ölçü Hatası"}),e(t(n),{"data-field":"smh",caption:"SMH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Saç Malzeme Hatası"}),e(t(n),{"data-field":"th",caption:"TH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Taşeron Hatası"}),e(t(n),{"data-field":"ah",caption:"AH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Aksesuar Hatası"}),e(t(n),{"data-field":"mh",caption:"MH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Montaj Hatası"}),e(t(n),{"data-field":"sth",caption:"STH",width:"47","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Su Testi Hatası"}),e(t(n),{"data-field":"bks",caption:"BKS",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Bağlantı Kalemi Sıkılmamış"}),e(t(n),{"data-field":"eh",caption:"EH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Etiket Hatası"}),e(t(n),{"data-field":"elk",caption:"ELK",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Elektrik Hatası"}),e(t(n),{"data-field":"sph",caption:"SPH",width:"40","cell-template":"hataTemplate","header-cell-template":f,tooltip:"Sipariş Hatası"}),e(t(n),{"data-field":"olusturan_id",caption:"Prs ID",width:"40"}),e(t(G),{mode:"none"}),e(t(j),{mode:"virtual"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1}),e(m,{cols:"12",md:"3"},{default:i(()=>[e(T,{disabled:x.value.length===0},{default:i(()=>[e(W,{class:"pb-0 gap-2",title:"Kontrol Edilmeyenler",subtitle:"Gerekçeler girilmelidir"}),e(S,{class:"gap-2 pa-2"},{default:i(()=>[e(t(q),{id:"gridKontroller",ref_key:"dataGridRefKontrol",ref:K,"data-source":I.value,"key-expr":"id","show-borders":!0,width:"100%","focused-row-enabled":!0,"row-alternation-enabled":!0,height:"250","word-wrap-enabled":!1,onSelectionChanged:ra},{default:i(()=>[e(t(n),{"data-field":"id",caption:"ID",width:"70",visible:!1}),e(t(n),{"data-field":"serino",caption:"Seri No",width:"150"}),e(t(G),{mode:"none"}),e(t(j),{mode:"virtual"}),e(t(ve),{mode:"none"})]),_:1},8,["data-source"])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(y,{class:"match-height pt-0 gap-0"},{default:i(()=>[e(m,{cols:"12"},{default:i(()=>[e(Ma,{type:"error",border:"start","colored-border":"",elevation:"2",variant:"tonal"},{default:i(()=>a[29]||(a[29]=[s("strong",null,"CC:",-1),p(" Camda Çizik   "),s("strong",null,"BKE:",-1),p(" Bağlantı Kalemi Eksik   "),s("strong",null,"CM:",-1),p(" Çapaklı Malzeme   "),s("strong",null,"KH:",-1),p(" Kilit Hatası   "),s("strong",null,"FB:",-1),p(" Formda Bozukluk   "),s("strong",null,"SH:",-1),p(" Serigrafi Hatası   "),s("strong",null,"KAH:",-1),p(" Kaynak Hatası   "),s("strong",null,"BC:",-1),p(" Boyada Çizik   "),s("strong",null,"KPL:",-1),p(" Kaplama Hatası   "),s("strong",null,"TKH:",-1),p(" Topraklama Hatası   "),s("strong",null,"BH:",-1),p(" Boya Hatası   "),s("strong",null,"IEH:",-1),p(" İş Emri Hatası   "),s("strong",null,"OH:",-1),p(" Ölçüsel Hata   "),s("strong",null,"H19:",-1),p(" 19'' Ölçü Hatası   "),s("strong",null,"SMH:",-1),p(" Saç Malzeme Hatası   "),s("strong",null,"TH:",-1),p(" Taşeron Hatası   "),s("strong",null,"AH:",-1),p(" Aksesuar Hatası   "),s("strong",null,"MH:",-1),p(" Montaj Hatası   "),s("strong",null,"STH:",-1),p(" Su Testi Hatası   "),s("strong",null,"BKS:",-1),p(" Bağlantı Kalemi Sıkılmamış   "),s("strong",null,"EH:",-1),p(" Etiket Hatası   "),s("strong",null,"ELK:",-1),p(" Elektrik Hatası   "),s("strong",null,"SPH:",-1),p(" Sipariş Hatası   ")])),_:1,__:[29]})]),_:1})]),_:1}),e(t(Aa),{visible:B.value,"onUpdate:visible":a[18]||(a[18]=l=>B.value=l),width:"90%",height:"90%","hide-on-outside-click":!1,"show-close-button":!0,title:"Ürün Ağacı: "+c.value.urunKodu},{default:i(()=>[s("div",at,[s("h2",null,D(x.value),1),s("h3",null,"Onay Tarihi: "+D(ae.value),1),s("h3",null,"Onaylayan: "+D(ue.value),1)]),e(y,{class:"d-flex justify-center align-center pt-1 pb-2"},{default:i(()=>[e(m,{cols:"6",class:"d-flex justify-stasrt ps-5"},{default:i(()=>[s("h4",null,[a[30]||(a[30]=p("Onay:   ")),s("span",tt,D(se.value||0)+" / "+D(re.value),1)])]),_:1}),e(m,{cols:"6",class:"d-flex justify-end pe-5"},{default:i(()=>[p(D(ne.value===!0?pe[0].title:pe[1].title),1)]),_:1})]),_:1}),e(t(q),{id:"gridAgac",ref_key:"agacRef",ref:Q,"data-source":ie.value,"key-expr":"user_line_no","show-borders":!0,"focused-row-enabled":!0,"row-alternation-enabled":!0,"min-width":200,"column-auto-width":!0,height:"96%","allow-column-resizing":!0,"column-resizing-mode":"widget",onSelectionChanged:sa},{default:i(()=>[e(t(n),{"data-field":"qty_base_bom",caption:"ADET",width:50,"data-type":"number",format:{type:"fixedPoint",precision:1,thousandsSeparator:","}}),e(t(n),{"data-field":"item_id",caption:"ID",width:90,visible:!1}),e(t(n),{"data-field":"user_line_no",caption:"NO",width:50,visible:!1}),e(t(n),{"data-field":"stok_kodu",caption:"STOK KODU",width:120}),e(t(n),{"data-field":"stok_adi",caption:"STOK ADI"}),e(t(He),{visible:!1}),e(t(G),{mode:"none"}),e(t(ve),{"select-all-mode":"page",mode:"multiple","show-check-boxes-mode":"always","allow-select-all":!1}),e(t(j),{mode:"virtual","row-rendering-mode":"virtual","show-scrollbar":"always"}),e(t(Ve),null,{default:i(()=>[e(t(Ae),{"align-by-column":!0,column:"stok_kodu","summary-type":"count","display-format":"Satır sayısı: {0}",alignment:"right"})]),_:1})]),_:1},8,["data-source"]),e(t(Va),{widget:"dxButton",toolbar:"bottom",location:"center",options:ea})]),_:1},8,["visible","title"]),e(ke,{modelValue:de.value,"onUpdate:modelValue":a[20]||(a[20]=l=>de.value=l),"max-width":"1200"},{default:i(()=>[e(T,null,{default:i(()=>[e(he,{src:qe.value,class:"ma-4","aspect-ratio":"1.5"},null,8,["src"]),e(Ba,null,{default:i(()=>[e(Re),e(t(g),{text:"",onClick:a[19]||(a[19]=l=>de.value=!1)},{default:i(()=>a[31]||(a[31]=[p("Kapat")])),_:1,__:[31]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ke,{modelValue:P.value,"onUpdate:modelValue":a[22]||(a[22]=l=>P.value=l),"max-width":"800"},{default:i(()=>[e(T,null,{default:i(()=>[e(Me,{class:"d-flex justify-space-between align-center"},{default:i(()=>{var l;return[s("span",null,"Seri No: "+D(((l=Qe.value)==null?void 0:l.seri_no)||""),1),e(t(g),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[21]||(a[21]=u=>P.value=!1)})]}),_:1}),e(S,null,{default:i(()=>[e(y,null,{default:i(()=>[(k(!0),h(Ee,null,Da(z.value,(l,u)=>(k(),fe(m,{key:u,cols:"12",md:"4"},{default:i(()=>[e(he,{src:l,"aspect-ratio":"4/3",cover:"",class:"mb-2"},null,8,["src"]),s("div",lt,[xa.value?(k(),fe(t(g),{key:0,variant:"tonal",icon:"tabler-trash",rounded:"",onClick:w=>ma(l)},null,8,["onClick"])):Y("",!0),e(t(g),{variant:"tonal",icon:"tabler-eye",rounded:"",onClick:w=>fa(l)},null,8,["onClick"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ke,{modelValue:U.value,"onUpdate:modelValue":a[24]||(a[24]=l=>U.value=l),fullscreen:""},{default:i(()=>[e(T,null,{default:i(()=>[e(Me,{class:"d-flex justify-space-between align-center"},{default:i(()=>[e(Re),e(t(g),{variant:"tonal",icon:"tabler-square-letter-x",rounded:"",onClick:a[23]||(a[23]=l=>U.value=!1)})]),_:1}),s("div",ot,[e(t(g),{variant:"tonal",icon:"tabler-zoom-in",rounded:"",onClick:Ce}),e(t(g),{variant:"tonal",icon:"tabler-zoom-out",rounded:"",onClick:Ke}),e(t(g),{variant:"tonal",icon:"tabler-zoom-reset",rounded:"",onClick:Ie})]),e(S,null,{default:i(()=>[s("div",{style:{overflow:"auto","max-block-size":"80vh"},onWheel:ha,onMousedown:va,onMousemove:ka,onMouseup:ze,onMouseleave:ze},[e(he,{src:be.value,class:"w-100 h-auto",style:Ca({transform:`scale(${O.value}) translate(${L.value.x}px, ${L.value.y}px)`,cursor:$.value?"grabbing":"grab",transition:$.value?"none":"transform 0.2s ease","max-width":"unset","max-height":"unset","user-select":"none","pointer-events":"none"}),alt:"Zoomable",draggable:"false"},null,8,["src","style"])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),qt=Ka(it,[["__scopeId","data-v-1cf5b579"]]);export{qt as default};
