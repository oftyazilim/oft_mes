const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-PIO7dkvE.js","assets/main-BnlRrYju.css"])))=>i.map(i=>d[i]);
import{d as oe,r as m,b5 as I,X as A,H as O,u as se,j as re,b4 as le,G as ie,a as ne,c as f,o as u,l as V,b as r,m as t,x as ue,e as i,v as T,F as j,i as me,I as de,f as l,g as N,t as v,b1 as ce,aV as pe,af as fe,eM as ye,b3 as ge,a_ as _e}from"./main-PIO7dkvE.js";import{r as U,e as be}from"./validators-BwBNGiur.js";import{_ as he}from"./AppTextField.vue_vue_type_script_setup_true_lang-OAsPtvVz.js";import{p as Ve}from"./cookies-BKoq7nke.js";import{u as $}from"./useGenerateImageVariant-BEwS8Z5x.js";import{a as ve,b as we,c as ke,d as Le}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as Ce,b as xe}from"./misc-mask-light-Ha4lQOdV.js";import{V as Re}from"./VNodeRenderer-BEPZOz2J.js";import{$ as Ie}from"./api-BK8c3cQU.js";import{V as S}from"./VCol-T6JwByWi.js";import{V as Te}from"./VImg-DRuoOn4X.js";import{V as Se}from"./VCard-Dd-LZgmu.js";import{V as D}from"./VCardText-XQayp_gG.js";import{V as H}from"./VAlert-B5J91szb.js";import{V as ze}from"./VForm-BA6wYuVC.js";import{V as K}from"./VRow-mli9Wn_z.js";import{V as Ee}from"./VCheckbox-JyIXNpW5.js";import"./helpers-BGv4x_9E.js";import"./focus--AY2Vyh7.js";import"./VTextField-wgidcyfN.js";/* empty css                   */import"./VCounter-BVktfWCx.js";import"./VField-Dk2Amc53.js";import"./easing-Bybner-F.js";import"./VInput-X0HQAo38.js";import"./form-Hec9IYfH.js";import"./forwardRefs-C-GTDzx5.js";import"./index-Cl5RUWUs.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-DefvcMrz.js";import"./VCheckboxBtn-SBDcvQHy.js";import"./VSelectionControl-DSIZs85O.js";const Me={class:"intro-content"},Ae={class:"intro-title-wrapper"},Ne={key:0,class:"intro-title"},Be=["aria-label"],Ge={key:0,class:"intro-sub"},qe={class:"auth-logo d-flex align-center gap-x-3"},Fe={class:"auth-title"},Pe={class:"position-relative bg-background w-100 me-0"},Oe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},je=["src"],Ue={class:"d-flex align-center flex-wrap justify-space-between my-6"},Y="loginIntroShownV1",Lt=oe({__name:"login",setup($e){const X=$(Le,ke,we,ve,!0),J=$(xe,Ce),w=m(!1),z=I("userData"),k=A(()=>{var s;const a=z==null?void 0:z.value,e=(a==null?void 0:a.co_name)??(a==null?void 0:a.firma_adi)??(a==null?void 0:a.companyName)??((s=a==null?void 0:a.user)==null?void 0:s.co_name)??null;return((e?String(e).trim():"")||"kurum adı").toLowerCase()}),B=A(()=>{var a,e;return((e=(a=O)==null?void 0:a.app)==null?void 0:e.logo)??null}),G=se(),Q=re(),W=le(),L=m({email:void 0,password:void 0}),q=m(),c=m({email:"",password:""}),C=m(!1),_=m(!1),y=m(null),Z=async()=>{var a;_.value=!0,y.value=null,L.value={email:void 0,password:void 0};try{try{Ve()}catch{}const e=await Ie("/auth/login",{method:"POST",body:{email:c.value.email,password:c.value.password},onResponseError({response:n}){var x,R;console.error("Login error:",n._data);const g=((x=n._data)==null?void 0:x.errors)||null;L.value=g||{email:"Giriş başarısız",password:"Giriş başarısız"},y.value=((R=n._data)==null?void 0:R.message)||(typeof n._data=="string"?n._data:null)||"Giriş işlemi başarısız oldu. Lütfen bilgilerinizi kontrol edin."}}),{accessToken:p,userData:o,userAbilityRules:s}=e,d=ye(s),P={path:"/",sameSite:"Lax",secure:typeof location<"u"?location.protocol==="https:":!1},M=C.value?{...P,maxAge:3600*24*30}:{...P,session:!0};I("userAbilityRules",M).value=s,W.update(d);const te=I("userData",M);te.value=o;try{const n=window;n.__appTitleRef&&(n.__appTitleRef.value=o)}catch{}I("accessToken",M).value=p;try{const n=(o==null?void 0:o.co_name)??(o==null?void 0:o.firma_adi)??(o==null?void 0:o.companyName)??((a=o==null?void 0:o.user)==null?void 0:a.co_name),g=(n?String(n).trim():"kurum adı").toLowerCase();O.app.title=g;const{layoutConfig:x}=await ge(async()=>{const{layoutConfig:R}=await import("./main-PIO7dkvE.js").then(ae=>ae.fa);return{layoutConfig:R}},__vite__mapDeps([0,1]));x.app.title=g}catch{}await _e(()=>{const g=c.value.password==="pass1234"?"/force-password":G.query.to?String(G.query.to):"/home-page";Q.push(g)})}catch(e){console.error(e),y.value||(y.value="Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin.")}finally{_.value=!1}},ee=()=>{var a;(a=q.value)==null||a.validate().then(({valid:e})=>{e&&Z()})},b=m(!1),h=m(!1),F=A(()=>(k.value||"").split(""));function E(){b.value=!1;try{localStorage.setItem(Y,"1")}catch{}}return ie(()=>{var s;try{h.value=(s=window.matchMedia("(prefers-reduced-motion: reduce)"))==null?void 0:s.matches}catch{}if((()=>{try{return localStorage.getItem(Y)==="1"}catch{return!1}})()||h.value){b.value=!1;return}b.value=!0;const e=1800+F.value.length*35,p=Math.min(3500,e);setTimeout(()=>{b.value&&E()},p);const o=d=>{d.key==="Escape"&&(E(),window.removeEventListener("keydown",o))};window.addEventListener("keydown",o)}),(a,e)=>{const p=ne("RouterLink"),o=he;return u(),f(j,null,[t(b)?(u(),f("div",{key:0,class:ue(["login-intro",{"reduced-motion":t(h)}]),"aria-live":"polite"},[e[4]||(e[4]=i("div",{class:"intro-bg"},null,-1)),e[5]||(e[5]=i("div",{class:"intro-noise"},null,-1)),i("div",Me,[i("div",Ae,[t(h)?(u(),f("h1",Ne,T(t(k)),1)):(u(),f("h1",{key:1,class:"intro-title-chars","aria-label":t(k)},[(u(!0),f(j,null,me(t(F),(s,d)=>(u(),f("span",{key:d,class:"char",style:de({animationDelay:d*35+"ms"})},T(s===" "?" ":s),5))),128))],8,Be))]),t(h)?V("",!0):(u(),f("p",Ge,"Üretimde yeni bir gün başlıyor...")),i("button",{type:"button",class:"intro-skip",onClick:E,"aria-label":"Animasyonu Geç"},"Geç")])],2)):V("",!0),r(p,{to:"/"},{default:l(()=>[i("div",qe,[t(B)?(u(),N(t(Re),{key:0,nodes:t(B)},null,8,["nodes"])):V("",!0),i("h1",Fe,T(t(k)),1)])]),_:1}),r(K,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[r(S,{md:"8",class:"d-none d-md-flex"},{default:l(()=>[i("div",Pe,[i("div",Oe,[r(Te,{"max-width":"613",src:t(X),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),i("img",{class:"auth-footer-mask",src:t(J),alt:"auth-footer-mask",height:"280",width:"100"},null,8,je)])]),_:1}),r(S,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[r(Se,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:l(()=>[r(D,null,{default:l(()=>e[6]||(e[6]=[i("h4",{class:"text-h4 mb-1"},[i("span",{class:"text-capitalize"}," OFT MES'e hoşgeldiniz' "),v("! 👋🏻 ")],-1),i("p",{class:"mb-0"}," Lütfen hesabınıza giriş yapın ve maceraya başlayın... ",-1)])),_:1,__:[6]}),r(D,null,{default:l(()=>[t(_)?(u(),N(H,{key:0,type:"info",class:"mb-4"},{default:l(()=>e[7]||(e[7]=[v(" Giriş yapılıyor, lütfen bekleyin... ")])),_:1,__:[7]})):V("",!0),t(y)?(u(),N(H,{key:1,type:"error",class:"mb-4"},{default:l(()=>[v(T(t(y)),1)]),_:1})):V("",!0),r(t(ze),{ref_key:"refVForm",ref:q,onSubmit:ce(ee,["prevent"])},{default:l(()=>[r(K,null,{default:l(()=>[r(S,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).email,"onUpdate:modelValue":e[0]||(e[0]=s=>t(c).email=s),label:"E-posta",placeholder:"oft@oft.com",type:"email",autofocus:"",rules:["requiredValidator"in a?a.requiredValidator:t(U),"emailValidator"in a?a.emailValidator:t(be)],"error-messages":t(L).email},null,8,["modelValue","rules","error-messages"])]),_:1}),r(S,{cols:"12"},{default:l(()=>[r(o,{modelValue:t(c).password,"onUpdate:modelValue":e[1]||(e[1]=s=>t(c).password=s),label:"Şifre",placeholder:"············",rules:["requiredValidator"in a?a.requiredValidator:t(U)],type:t(w)?"text":"password",autocomplete:"password","error-messages":t(L).password,"append-inner-icon":t(w)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=s=>w.value=!t(w))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),i("div",Ue,[r(Ee,{modelValue:t(C),"onUpdate:modelValue":e[3]||(e[3]=s=>pe(C)?C.value=s:null),label:"Beni Hatırla"},null,8,["modelValue"]),r(p,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:l(()=>e[8]||(e[8]=[v(" Şifremi Unuttum? ")])),_:1,__:[8]})]),r(fe,{block:"",type:"submit",loading:t(_),disabled:t(_)},{default:l(()=>e[9]||(e[9]=[v(" Giriş Yap ")])),_:1,__:[9]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Lt as default};
