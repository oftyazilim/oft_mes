import{aY as _,P as m,E as v,r as l,N as R,H as D,M as H,bb as S,d as $,h as k,as as z,bc as O}from"./overlay-Dc4qbMAR.js";import{dx as V,df as j,de as E,dF as I,dg as B}from"./main-CGkPrE09.js";const d=V(),F=R(),G=H.add,K=_,X=S;let f=new j;const L="link[rel=dx-theme]",Y="data-theme",q="data-active";let o,y,u,i,c,C=15e3;function g(){if(!m())return null;const e=l("<div>",o).addClass("dx-theme-marker").appendTo(o.documentElement);let t;try{return t=F.getComputedStyle(e.get(0)).fontFamily,!t||(t=t.replace(/["']/g,""),t.substr(0,3)!=="dx.")?null:t.substr(3)}finally{e.remove()}}function b(e){let t,r,n=!0;c=e;function s(){c=null,clearInterval(r),n=!0,d.fire(),d.empty(),f.resolve()}if(x()||!C)s();else{if(!n){c&&(c=e);return}t=Date.now(),n=!1,r=setInterval((function(){const a=x(),p=!a&&Date.now()-t>C;p&&v.log("W0004",c),(a||p)&&s()}),10)}}function x(){if(!c)return!0;const e=c==="any";if(f.state()==="resolved"&&e)return!0;const t=g();return t&&e?!0:t===c}function J(){const e=l(L,o);e.length&&(u={},y=l(O("<link rel=stylesheet>"),o),e.each((function(){const t=l(this,o),r=t.attr(Y),n=t.attr("href"),s=t.attr(q)==="true";u[r]={url:n,isActive:s}})),e.last().after(y),e.remove())}function Q(e){const t=e?e.split("."):[];let r=null;if(u){if(e in u)return e;B(u,(function(n,s){const a=n.split(".");if(!(t[0]&&a[0]!==t[0])&&!(t[1]&&t[1]!==a[1])&&!(t[2]&&t[2]!==a[2])&&((!r||s.isActive)&&(r=n),s.isActive))return!1}))}return r}function U(e){try{e!==o&&(u=null)}catch{u=null}o=e}function A(e){e=e||{},U(e.context||k.getDocument()),o&&(J(),i=void 0,P(e))}function P(e){if(!arguments.length)return i=i||g(),i;W(K()),e=e||{},typeof e=="string"&&(e={theme:e});const t=e._autoInit,r=e.loadCallback;let n;if(i=Q(e.theme||i),i&&(n=u[i]),r&&d.add(r),n)y.attr("href",u[i].url),(d.has()||f.state()!=="resolved"||e._forceTimeout)&&b(i);else if(t)m()&&b("any"),d.fire(),d.empty();else throw v.Error("E0021",i);f.done((()=>M(z(),i)))}function Z(e){e=e||P();const t=[],r=e&&e.split(".");return r&&(t.push("dx-theme-"+r[0],"dx-theme-"+r[0]+"-typography"),r.length>1&&t.push("dx-color-scheme-"+r[1]+(ee(e)?"-"+r[2]:""))),t}let h;function N(e,t){h=Z(t).join(" "),l(e).addClass(h),(function(){const r=m()&&F.devicePixelRatio;if(!r||r<2)return;const n=l("<div>");n.css("border",".5px solid transparent"),l("body").append(n),D(n)===1&&(l(e).addClass("dx-hairlines"),h+=" dx-hairlines"),n.remove()})()}function M(e,t){E(I).done((()=>{N(e,t)}))}function W(e){E(I).done((()=>{l(e).removeClass(h)}))}function T(e,t){return t||(t=i||g()),new RegExp(e).test(t)}function ee(e){return te(e)||ne(e)}function te(e){return T("material",e)}function ne(e){return T("fluent",e)}function ae(e){return T("generic",e)}function re(e,t){const r=k.getDocument(),n=r.createElement("span");n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",n.style.visibility="hidden",n.style.fontFamily="Arial",n.style.fontSize="250px",n.style.fontWeight=t,n.innerHTML=e,r.body.appendChild(n);const s=n.offsetWidth;n.style.fontFamily="Roboto, RobotoFallback, Arial";const a=n.offsetWidth;return n.parentNode.removeChild(n),s!==a}function le(e,t){return new Promise((r=>{const n=()=>{clearInterval(s),clearTimeout(a),r()},s=setInterval((()=>{re(e,t)&&n()}),15),a=setTimeout(n,2e3)}))}function w(){if(A({_autoInit:!0,_forceTimeout:!0}),l(L,o).length)throw v.Error("E0022")}m()?w():G(w);X.add((function(e,t){f.done((function(){W(t),M(e)}))}));$.changed.add((function(){A({_autoInit:!0})}));export{te as a,ae as b,P as c,ne as d,ee as i,le as w};
