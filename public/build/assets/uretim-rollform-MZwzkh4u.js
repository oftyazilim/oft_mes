import{_ as wt}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CW0_JLWB.js";import{_ as ht}from"./AppSelect.vue_vue_type_script_setup_true_lang-DdbOQlYA.js";import{d as St,r as n,X as x,G as Je,aZ as me,f9 as Dt,w as F,af as Ze,b2 as xt,b3 as T,c as H,o as O,l as Xe,e as a,b as l,aI as Qe,v as d,f as o,I as Vt,t as m,m as u,b7 as ce,x as Ee,ae as I,Z as Te,d3 as G,a_ as R,F as et,ba as At}from"./main-D-SiMLc-.js";import{u as Et}from"./pageTitle-DYkAtS5r.js";import{D as Tt,a as It,b as Mt,c as Nt,d as Kt,e as Rt,f as Ct,g as Ie,h as $t,i as zt}from"./circular-gauge-DLMOPHNM.js";import{a as y,D as Lt}from"./data-grid-DHvdGYFh.js";import{D as Pt,a as qt}from"./popup-D472rNiL.js";import{n as C}from"./notify-Y78Cne3X.js";import{V as M}from"./VCol-CUagATwZ.js";import{V as ae,b as le,c as tt}from"./VCard-CrTJSgVK.js";import{V as ie}from"./VRow-Bvzmq6zu.js";import{V as Ft}from"./VSwitch-BeuzXCPD.js";import{V as at}from"./VCardText-TLedgTXA.js";import{V as lt}from"./VTextField-1bo5W7Aw.js";import{V as it}from"./VSpacer-BSoGXysv.js";import{V as ot}from"./VDialog-CZA9JvUd.js";import{_ as Ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focus-BfIBbilw.js";import"./VTextarea-CPD5-lAC.js";/* empty css                   */import"./VCounter-DkMTHhv-.js";import"./VImg-Cc13YmMm.js";import"./VField-D6T2QOoR.js";import"./easing-Bybner-F.js";import"./VInput-D07CPYP3.js";import"./form-M-D7j6ft.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CyBnlFFw.js";import"./VList-BVvELrf5.js";import"./ssrBoot-BBw5Gamk.js";import"./VAvatar-eX3ssqTG.js";import"./VDivider-BHmZFuOT.js";import"./dialog-transition-BlXdzUKE.js";import"./VMenu-DzUkUFOH.js";import"./VOverlay-HRxhGnpa.js";import"./delay-CD9o_e6I.js";import"./lazy-BKoCDCTC.js";import"./scopeId-DNf-v3va.js";import"./VCheckboxBtn-BpjsWrzn.js";import"./VSelectionControl-_JMgLbVH.js";import"./VChip-DbN4mugn.js";import"./VSlideGroup-DKtJMzRR.js";import"./index-BdFbhXmR.js";import"./ui.errors-DA9dmEOa.js";import"./m_base_widget-00biHbS4.js";import"./format_helper-C0BNlQNB.js";import"./m_resize_observer-By7pJJgF.js";import"./themes-Dksif5Ny.js";import"./m_row_dragging-idfaEyVW.js";import"./m_select_box-Ces87H0S.js";import"./overlay-1elVe3rM.js";import"./editor-B-sci-AC.js";/* empty css              */const Ot={class:"page-rollform pa-0"},Gt={key:0,class:"rf-loading-overlay"},Ut={class:"rf-loader-box"},Bt={key:0,class:"hint-line"},Yt={key:1,class:"warn-line"},jt={class:"rollform-header"},Wt={class:"gauge-wrap"},Jt={class:"badge-left"},Zt={class:"gauge-center-value"},Xt={style:{color:"goldenrod"}},Qt={class:"clock-wrap"},ea={class:"digital-clock"},ta={class:"digital-date"},aa={class:"kpi-row"},la={class:"kpi"},ia={class:"kpi-value"},oa={class:"pb-1 ms-1 me-1"},sa={class:"kpi"},na={class:"kpi-value"},ra={class:"pb-1 ms-1 me-1"},ua={class:"kpi"},da={class:"kpi-value"},va={class:"pb-1 ms-1 me-1"},ma={class:"oee-title"},ca={class:"panel status-panel"},fa={class:"form-row mt-2"},pa={class:"status-actions justify-between"},ba={class:"status-actions justify-between"},ya={class:"status-metrics mt-4 text-center"},_a={class:"metric-time"},ga={class:"metric-time"},ka={class:"panel status-panel"},wa={width:"60%"},ha={class:"sayac siparis digit"},Sa={width:"60%"},Da={class:"sayac siparis digit"},xa={width:"60%"},Va={class:"sayac net digit"},Aa={width:"60%"},Ea={class:"sayac net digit"},Ta={width:"60%"},Ia={class:"sayac kalan digit"},Ma={class:"sayac hurda digit"},Na={class:"sayac net digit"},Ka={class:"mt-10"},Ra={class:"info"},Ca={width:"60%"},$a={class:"info"},za={width:"60%"},La={class:"info"},Pa={width:"60%"},qa={class:"info"},Fa={class:"status-actions mt-11 mb-0"},Ha={class:"panel grid-panel"},Oa={class:"mb-2"},Ga={class:"mb-2"},Ua=St({__name:"uretim-rollform",setup(Ba){const fe=Et(),p=n(null);function Me(){var t;try{return`rollform:lastDurusReason:${((t=pe==null?void 0:pe.value)==null?void 0:t.istasyon_id)??"unknown"}`}catch{return"rollform:lastDurusReason:unknown"}}function st(){try{const t=localStorage.getItem(Me());if(!t)return!1;const e=JSON.parse(t);if(e&&e.break_reason_code&&e.break_reason_code!=="000")return p.value={break_reason_code:e.break_reason_code,description:e.description},!0}catch{}return!1}const oe=n([]),Ne=n(""),Ke=n(!1),i=n(null),U=x(()=>{var t;return((t=i.value)==null?void 0:t.wstation_code)??"..."}),se=x(()=>{var t;return((t=i.value)==null?void 0:t.wstation_name)??"..."}),nt=x(()=>{var e;const t=(e=i.value)==null?void 0:e.statu_id;return t===0?"rgba(192, 167, 167, 0.30)":t===1?"rgba(180, 50, 50, 1.00)":t===2?"green":"#4b7027"}),B=x(()=>{var t;return((t=i.value)==null?void 0:t.statu_id)===1});fe.setTitle(`${U.value} (${se.value})`),document.title=`OFT - ${U.value} | ${se.value}`;const Re=x(()=>`${U.value} (${se.value})`),rt=x(()=>{const t=Number(S.value.oee||0);return t<50?"oee-low":t<70?"oee-mid":t<85?"oee-high":"oee-top"}),Y=()=>{fe.setTitle(Re.value),document.title=`OFT - ${U.value} | ${se.value}`};Je(async()=>{if(await me(),Y(),await je(),!c.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}$(),Z(),ue=setInterval(Z,1e4),ne=setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),f=String(t.getSeconds()).padStart(2,"0");ye.value=`${e}:${r}:${f}`;const s=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],v=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];_e.value=`${t.getDate()} ${v[t.getMonth()]} ${t.getFullYear()} ${s[t.getDay()]}`,$()},1e3),re=setInterval(P,1e3),Oe(),Ge(),setTimeout(()=>{J.value||(J.value=!0)},15e3),window.addEventListener("keydown",ge),window.addEventListener("keydown",Se)}),Dt(()=>{Y()});const ut=F(()=>fe.title,t=>{t!==Re.value&&Y()},{flush:"post"});Ze(()=>{ut(),window.removeEventListener("keydown",ge),window.removeEventListener("keydown",Se)}),F(()=>i.value,()=>{Y(),$()});const pe=xt("userData");function N(t){const e=Number(t??0);return Number.isFinite(e)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(e)):"0"}const be=n("00:00:00"),dt=n("00:00"),ye=n("00:00:00"),_e=n("...");function vt(t){const e=Math.max(0,Math.floor(t||0)),r=Math.floor(e/3600),f=Math.floor(e%3600/60),s=e%60,v=h=>String(h).padStart(2,"0");return`${v(r)}:${v(f)}:${v(s)}`}function $(){var r;const t=(r=i.value)==null?void 0:r.statu_time;if(t==null){be.value="00:00:00";return}let e=0;if(typeof t=="number")t>1e12?e=Math.max(0,Math.floor((Date.now()-t)/1e3)):t>1e9?e=Math.max(0,Math.floor(Date.now()/1e3-t)):e=Math.max(0,Math.floor(t));else if(typeof t=="string"){const f=Date.parse(t);Number.isNaN(f)||(e=Math.max(0,Math.floor((Date.now()-f)/1e3)))}else t instanceof Date&&(e=Math.max(0,Math.floor((Date.now()-t.getTime())/1e3)));be.value=vt(e)}function z(t){const e=t.toLowerCase();return oe.value.find(r=>String(r.description||"").toLowerCase().includes(e))}function ge(t){if(B.value){if(t.key==="F9"){const e=z("çay ve yemek")||z("cay ve yemek")||z("çay & yemek");e&&(p.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}else if(t.key==="F10"){const e=z("çay ve yemek")||z("cay ve yemek")||z("çay & yemek");e&&(p.value={break_reason_code:e.break_reason_code,description:e.description},t.preventDefault())}}}const j=n(!1),W=n(""),ke=n(null),L=n(!1);let we=null;function Ce(){var t,e;if(!we){we=setTimeout(()=>{we=null},300);try{(e=(t=ke.value)==null?void 0:t.blur)==null||e.call(t)}catch{}ze()}}function $e(){W.value="",j.value=!0,me(()=>{var t;return(t=ke.value)==null?void 0:t.focus()})}async function ze(){const t=Number(W.value);if(!Number.isFinite(t)||t<=0){he();return}try{if(L.value)return;if(!c.value)throw new Error("İstasyon yok");L.value=!0,await T.post("/api/uretim-rollform/hurda-gir",{station_id:c.value,qty:t}),C({message:"Hurda kaydedildi",type:"success",displayTime:1200}),j.value=!1,P(),Z()}catch(e){console.error("hurda kayıt hata",e),C({message:"Hurda kaydedilemedi",type:"error",displayTime:2e3})}finally{L.value=!1}}function he(){W.value="",j.value=!1}function Se(t){t.key==="F8"&&($e(),t.preventDefault())}n("uretim-disi");const mt=n(!1),J=n(!1),Le=n(!1),Pe=n(!1),qe=n(!1),Fe=n(!1),He=n(!1),ct=x(()=>Le.value&&Pe.value&&qe.value&&Fe.value&&He.value);F(ct,t=>{t&&!J.value&&(J.value=!0)});const ft=x(()=>!J.value),S=n({availability:0,performance:0,quality:0,oee:0}),pt=n(null);async function Z(){try{if(!c.value)return;const{data:t}=await T.get("/api/uretim-rollform/kpi",{params:{station_id:c.value}});if(t!=null&&t.kpi){const e=r=>Math.round(Number(r||0)*100);S.value={availability:e(t.kpi.availability),performance:e(t.kpi.performance),quality:e(t.kpi.quality),oee:e(t.kpi.oee)},t.shift&&(pt.value={id:t.shift.id,start:t.shift.start.substring(11,16),end:t.shift.end.substring(11,16)}),mt.value=!0,qe.value=!0}}catch(t){console.error("fetchKpiDirect error",t)}}const De=n([]),bt=[{hint:"Aktif Et",text:"Aktif Et",icon:"login",onClick:t=>{var e;return yt((e=t==null?void 0:t.row)==null?void 0:e.data)}}],K=n(!1),X=n(null),_=n(null);function yt(t){_.value=t,X.value=null,K.value=!0}async function xe(){if(!_.value)return;const t=Number(X.value??0),e=c.value;if(!e)return;const r={wstation_id:e,worder_id:Number(_.value.isEmriID??0),worder_no:_.value.isEmriNo,item_id:0,item_code:_.value.stokKodu,item_name:_.value.stokAdi,item_length:t,order_qty:Number(_.value.plnAd??0),net_qty:Number(_.value.urtAd??0),scrap_qty:Number(_.value.hurda??0)};try{await T.post("/api/uretim-rollform/activate-workorder",r),K.value=!1,P()}catch(f){console.error("Aktivasyon hatası",f)}}let ne=null,re=null,ue=null,Q=null;async function P(){try{if(!c.value){i.value=null;return}const t=await T.get("/api/kapasite-works-info",{params:{station_id:c.value}}),e=Array.isArray(t.data)?t.data:[];i.value=e.length>0?e[0]:null,$()}catch(t){console.error("WorksInfo alınamadı",t),i.value=null}finally{Pe.value=!0}}async function Oe(){try{if(!c.value){De.value=[];return}const{data:t}=await T.get("/api/uretim-rollform/is-emirleri",{params:{istasyon:c.value}}),e=(t||[]).map(r=>({grp:0,isEmriID:r.isemri_id,isEmriNo:r.isemri_no,stokKodu:r.stok_kodu,stokAdi:r.stok_adi,plnAd:Number(r.siparis_miktari??0),ilvAd:0,klnAd:Number(r.kalan_miktar??0),urtAd:Number(r.uretilen_net_miktar??0),hurda:Number(r.toplam_hurda_miktari??0),plnSure:Number(r.operasyon_suresi??0),grcSure:0}));De.value=e}catch(t){console.error("İş emirleri alınamadı",t)}finally{Fe.value=!0}}const w=n(!1),D=n(!1),de=n(!0),Ve=n(null);function ve(t=0){var e,r,f;try{const s=((e=Ve.value)==null?void 0:e.$el)||((f=(r=Ve.value)==null?void 0:r.$refs)==null?void 0:f.root)||null;if(s){const v=s.querySelector("input")||s.querySelector('[role="combobox"]');if(v){v.focus(),document.activeElement!==v&&t<3&&setTimeout(()=>ve(t+1),40);return}}t<5&&setTimeout(()=>ve(t+1),50)}catch{}}function _t(){setTimeout(()=>ve(),10)}const Ae=n(!0),gt=x(()=>({width:110,marginBottom:30,type:"success",text:D.value?"Kaydediliyor...":"Kaydet",stylingMode:"contained",elementAttr:{class:D.value?"btn-loading":""},disabled:D.value,onClick:()=>{D.value||Be()}}));function Ge(){c.value&&T.get("/api/durus-sebepleri-al",{params:{istasyon:c.value}}).then(t=>{var e;oe.value=((e=t.data)==null?void 0:e.durusSebepleri)||[]}).catch(t=>{console.error("Duruş sebepleri alınamadı",t)}).finally(()=>{He.value=!0})}function Ue(){p.value={break_reason_code:"000",description:"GİRİLMEDİ"},w.value=!0,me(()=>ve())}async function Be(){var t;if(!D.value){if(!p.value){C({message:"Lütfen bir duruş sebebi seçiniz.",type:"error",displayTime:3e3});return}if(!((t=i.value)!=null&&t.worder_id)){C({message:"Aktif iş emri yok.",type:"warning",displayTime:2500}),w.value=!1;return}if(!c.value){C({message:"İstasyon bulunamadı.",type:"error",displayTime:3e3});return}try{D.value=!0,de.value=!1,await T.post("/api/duruskaydet-mekanik",{istasyonID:c.value,selectedDurus:p.value}),C({message:"Duruş kaydedildi.",type:"success",displayTime:2e3});try{localStorage.setItem(Me(),JSON.stringify(p.value))}catch{}}catch(e){console.error("Duruş kaydedilemedi",e),C({message:"Duruş kaydedilemedi.",type:"error",displayTime:3e3})}finally{D.value=!1,de.value=!0,w.value=!1,P()}}}function kt(t){de.value||(t.cancel=!0)}F(w,(t,e)=>{e&&!t&&P()});const Ye=n(null);F(()=>{var t;return(t=i.value)==null?void 0:t.statu_id},async(t,e)=>{t===1&&Ye.value!==1?Ae.value?!st()&&!w.value&&Ue():w.value||Ue():t!==1&&(w.value&&(D.value=!1,de.value=!0,w.value=!1),p.value=null),Ye.value=t??null,Ae.value&&(Ae.value=!1)}),F(p,(t,e)=>{Q&&clearTimeout(Q),t&&(Q=setTimeout(async()=>{var r;if(p.value&&((r=i.value)==null?void 0:r.statu_id)===1&&!D.value&&p.value.break_reason_code!=="000")try{await Be()}catch{}},250))});const c=n(null),q=n(null);async function je(){try{q.value=null;const{data:t}=await T.get("/api/uretim-rollform/detect-station");t&&t.station_id?(c.value=Number(t.station_id),Le.value=!0):(c.value=null,q.value="İstasyon bulunamadı (IP eşleşmedi)")}catch(t){q.value="İstasyon tespiti hata: "+((t==null?void 0:t.message)||"bilinmiyor")}}return Je(async()=>{if(await me(),Y(),await je(),!c.value){console.warn("İstasyon tespiti başarısız; periyodikler başlatılmadı.");return}$(),Z(),ue=setInterval(Z,1e4),ne=setInterval(()=>{const t=new Date,e=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),f=String(t.getSeconds()).padStart(2,"0");ye.value=`${e}:${r}:${f}`;const s=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],v=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];_e.value=`${t.getDate()} ${v[t.getMonth()]} ${t.getFullYear()} ${s[t.getDay()]}`,$()},1e3),re=setInterval(P,1e3),Oe(),Ge(),window.addEventListener("keydown",ge),window.addEventListener("keydown",Se)}),Ze(()=>{ne&&clearInterval(ne),re&&clearInterval(re),ue&&clearInterval(ue),Q&&clearTimeout(Q)}),(t,e)=>{const r=ht,f=wt;return O(),H("div",Ot,[ft.value?(O(),H("div",Gt,[a("div",Ut,[e[12]||(e[12]=a("div",{class:"rf-spinner","aria-hidden":"true"},null,-1)),e[13]||(e[13]=a("h2",null,"Veriler yükleniyor",-1)),e[14]||(e[14]=a("p",null,"İstasyon, aktif iş emri, sayaç ve KPI verileri hazırlanıyor. Lütfen bekleyin…",-1)),!c.value&&!q.value?(O(),H("small",Bt,"İstasyon tespiti yapılıyor...")):q.value?(O(),H("small",Yt,d(q.value)+" – yeniden deniyor...",1)):Xe("",!0)])])):Xe("",!0),a("div",jt,[l(ie,{class:"match-height"},{default:o(()=>[l(M,{cols:"12",md:"3",sm:"6"},{default:o(()=>[l(ae,{class:"pa-3"},{default:o(()=>{var s,v,h;return[a("section",null,[l(le,{class:"durum-title",style:Vt({backgroundColor:nt.value})},{default:o(()=>{var b,g;return[m(d(((b=i.value)==null?void 0:b.statu_id)===0?"KAPALI":((g=i.value)==null?void 0:g.statu_id)===1?"DURUYOR":"ÇALIŞIYOR"),1)]}),_:1},8,["style"]),e[20]||(e[20]=a("hr",null,null,-1)),a("div",Wt,[a("div",Jt,d(U.value),1),l(u(Tt),{class:"oee-gauge",value:(s=i.value)==null?void 0:s.speed,subvalues:(v=i.value)==null?void 0:v.speed_target,tooltip:t.gaugeTooltip,size:t.gaugeSize},{default:o(()=>{var b;return[l(u(It),{"start-angle":225,"end-angle":-45}),l(u(Mt),{"start-value":0,"end-value":(b=i.value)==null?void 0:b.speed_max,"tick-interval":10,"minor-tick-interval":5},{default:o(()=>[l(u(Nt),{length:8,color:"#666"}),l(u(Kt),{length:4,color:"#444"}),l(u(Rt),{"use-range-colors":!0,font:t.gaugeLabelFont},null,8,["font"])]),_:1},8,["end-value"]),l(u(Ct),{"background-color":"#20252b",offset:10,width:10},{default:o(()=>{var g,V,A,k,E;return[l(u(Ie),{"start-value":0,"end-value":.4*((g=i.value)==null?void 0:g.speed_max),color:"#ce6978"},null,8,["end-value"]),l(u(Ie),{"start-value":.4*((V=i.value)==null?void 0:V.speed_max),"end-value":.7*((A=i.value)==null?void 0:A.speed_max),color:"#caa93b"},null,8,["start-value","end-value"]),l(u(Ie),{"start-value":.7*((k=i.value)==null?void 0:k.speed_max),"end-value":(E=i.value)==null?void 0:E.speed_max,color:"#1e8e3e"},null,8,["start-value","end-value"])]}),_:1}),l(u($t),{type:"triangleNeedle","spindle-size":18,"spindle-gap-size":9,offset:10,width:8}),l(u(zt),{enabled:!1})]}),_:1},8,["value","subvalues","tooltip","size"]),a("div",Zt,[e[15]||(e[15]=a("div",{class:"label",style:{"font-size":"16px","margin-block":"-10px"}},"Hız",-1)),a("div",Xt,d((h=i.value)==null?void 0:h.speed),1)])]),a("div",Qt,[a("div",ea,d(ye.value),1),a("div",ta,d(_e.value),1)]),a("div",aa,[a("div",la,[e[16]||(e[16]=a("div",null,"Meço %",-1)),a("div",ia,[m(d(S.value.availability)+" ",1),a("div",oa,[l(ce,{"model-value":S.value.availability??0,color:"info",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",sa,[e[17]||(e[17]=a("div",null,"Performans %",-1)),a("div",na,[m(d(S.value.performance)+" ",1),a("div",ra,[l(ce,{"model-value":S.value.performance??0,color:"success",height:"4",rounded:!0},null,8,["model-value"])])])]),a("div",ua,[e[18]||(e[18]=a("div",null,"Kalite %",-1)),a("div",da,[m(d(S.value.quality)+" ",1),a("div",va,[l(ce,{"model-value":S.value.quality??0,color:"error",height:"4",rounded:!0},null,8,["model-value"])])])])]),l(ie,null,{default:o(()=>[l(M,{cols:"12",class:"text-center"},{default:o(()=>[a("div",ma,[e[19]||(e[19]=m("OEE % ")),a("span",{class:Ee(["kpi-oee",rt.value])},d(S.value.oee),3)])]),_:1})]),_:1})])]}),_:1})]),_:1}),l(M,{cols:"12",md:"4",sm:"6"},{default:o(()=>[l(ae,{class:"pa-3"},{default:o(()=>[l(le,{class:"panel-title pa-0"},{default:o(()=>e[21]||(e[21]=[m("DURUM BİLGİLERİ")])),_:1,__:[21]}),e[29]||(e[29]=a("hr",null,null,-1)),a("section",ca,[a("div",fa,[e[22]||(e[22]=a("label",null,"Duruş Sebebi (F10 – Yeni Duruş)",-1)),l(r,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),items:oe.value,"item-title":"description","item-value":"break_reason_code","return-object":"","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!B.value,class:Ee({"app-select--force-disabled":!B.value})},null,8,["modelValue","items","disabled","class"]),l(f,{modelValue:Ne.value,"onUpdate:modelValue":e[1]||(e[1]=s=>Ne.value=s),placeholder:"Açıklama...",disabled:""},null,8,["modelValue"])]),a("div",pa,[l(I,{variant:"tonal",color:"error",size:"small"},{default:o(()=>e[23]||(e[23]=[m("Açıklama Gir")])),_:1,__:[23]}),l(Ft,{color:"error",modelValue:Ke.value,"onUpdate:modelValue":e[2]||(e[2]=s=>Ke.value=s),label:"Arızalı",value:"false",height:10},null,8,["modelValue"])]),a("div",ba,[l(I,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:o(()=>[e[24]||(e[24]=m(" F9 - Çay Molası ")),l(Te,{end:"",icon:"tabler-mug"})]),_:1,__:[24]}),l(I,{variant:"tonal",color:"warning",size:"small",width:"48%"},{default:o(()=>[e[25]||(e[25]=m(" F10 - Yemek Molası ")),l(Te,{end:"",icon:"tabler-bowl-spoon"})]),_:1,__:[25]})]),a("div",ya,[a("div",null,[e[26]||(e[26]=a("div",{class:"label"},"Durum Süresi",-1)),a("div",_a,d(be.value),1)]),a("div",null,[e[27]||(e[27]=a("div",{class:"label"},"Vardiya",-1)),a("div",ga,d(dt.value),1)])]),e[28]||(e[28]=a("div",{class:"uclu text-center mt-4"},[a("div",null,[a("div",{class:"label"},"Çalışma"),a("div",{class:"metric-time ok"},"00:00")]),a("div",null,[a("div",{class:"label"},"Duruş"),a("div",{class:"metric-time warn"},"00:00")]),a("div",null,[a("div",{class:"label"},"Boşta"),a("div",{class:"metric-time"},"02:00")])],-1))])]),_:1,__:[29]})]),_:1}),l(M,{cols:"12",md:"5",sm:"6"},{default:o(()=>[l(ae,{class:"pa-3"},{default:o(()=>{var s,v,h;return[l(le,{class:"panel-title pa-0"},{default:o(()=>e[30]||(e[30]=[m("ÜRETİM RAKAMLARI")])),_:1,__:[30]}),e[43]||(e[43]=a("hr",null,null,-1)),a("section",ka,[l(ce,{"model-value":(((s=i.value)==null?void 0:s.net_qty)+((v=i.value)==null?void 0:v.counter))/((h=i.value)==null?void 0:h.order_qty)*100,color:"warning",height:"10",rounded:!0,class:"my-4"},null,8,["model-value"]),l(ie,null,{default:o(()=>[l(M,{cols:"5"},{default:o(()=>{var b,g,V,A,k,E,ee,te;return[a("div",null,[a("div",wa,[e[31]||(e[31]=a("div",{class:"label"},"İş Emri Miktarı",-1)),a("div",ha,d(N((b=i.value)==null?void 0:b.order_qty)),1)]),a("div",Sa,[e[32]||(e[32]=a("div",{class:"label"},"Üretilen (uyumsoft)",-1)),a("div",Da,d(N((g=i.value)==null?void 0:g.net_qty)),1)]),a("div",xa,[e[33]||(e[33]=a("div",{class:"label"},"Sayaç",-1)),a("div",Va,d(N((V=i.value)==null?void 0:V.counter)),1)]),a("div",Aa,[e[34]||(e[34]=a("div",{class:"label"},"Üretilen (uyum + sayaç)",-1)),a("div",Ea,d(N(((A=i.value)==null?void 0:A.net_qty)+((k=i.value)==null?void 0:k.counter))),1)]),a("div",Ta,[e[35]||(e[35]=a("div",{class:"label"},"Kalan",-1)),a("div",Ia,d(N((((E=i.value)==null?void 0:E.order_qty)??0)-((ee=i.value)==null?void 0:ee.counter)-(((te=i.value)==null?void 0:te.net_qty)??0))),1)])])]}),_:1}),l(M,{cols:"7"},{default:o(()=>{var b,g,V,A;return[a("div",null,[l(ie,null,{default:o(()=>[l(M,{cols:"6"},{default:o(()=>{var k;return[e[36]||(e[36]=a("div",{class:"label"},"Hurda",-1)),a("div",Ma,d(N((k=i.value)==null?void 0:k.scrap_qty)),1)]}),_:1,__:[36]}),l(M,{cols:"6"},{default:o(()=>{var k,E,ee,te,We;return[e[37]||(e[37]=a("div",{class:"label"},"O.A.%",-1)),a("div",Na,d(((k=i.value)==null?void 0:k.net_qty)===0||((E=i.value)==null?void 0:E.order_qty)===0?0:((((ee=i.value)==null?void 0:ee.net_qty)+((te=i.value)==null?void 0:te.counter))/((We=i.value)==null?void 0:We.order_qty)*100).toFixed(0)),1)]}),_:1,__:[37]})]),_:1}),a("div",Ka,[e[38]||(e[38]=a("div",null,"İş Emri No:",-1)),a("div",Ra,d((b=i.value)==null?void 0:b.worder_no),1)]),a("div",Ca,[e[39]||(e[39]=a("div",null,"Ürün Kodu:",-1)),a("div",$a,d((g=i.value)==null?void 0:g.item_code),1)]),a("div",za,[e[40]||(e[40]=a("div",null,"Ürün Adı:",-1)),a("div",La,d((V=i.value)==null?void 0:V.item_name),1)])]),a("div",Pa,[e[41]||(e[41]=a("div",null,"Ürün Boyu:",-1)),a("div",qa,d(N((A=i.value)==null?void 0:A.item_length)),1)]),a("div",Fa,[l(I,{id:"hurdaGir",variant:"outlined",color:"error",width:"100%",onClick:$e},{default:o(()=>[e[42]||(e[42]=m(" F8 - Hurda Girişi ")),l(Te,{end:"",icon:"tabler-trash"})]),_:1,__:[42]})])]}),_:1})]),_:1})])]}),_:1,__:[43]})]),_:1})]),_:1})]),l(ot,{modelValue:j.value,"onUpdate:modelValue":e[4]||(e[4]=s=>j.value=s),"max-width":"400"},{default:o(()=>[l(ae,null,{default:o(()=>[l(le,null,{default:o(()=>e[44]||(e[44]=[m("Hurda Girişi")])),_:1,__:[44]}),l(at,null,{default:o(()=>[l(lt,{ref_key:"hurdaInputRef",ref:ke,modelValue:W.value,"onUpdate:modelValue":e[3]||(e[3]=s=>W.value=s),label:"Hurda Miktarı",type:"number","hide-details":"",autofocus:"",onKeydown:[G(R(Ce,["prevent"]),["enter"]),G(R(he,["prevent"]),["esc"])],onKeyup:G(R(Ce,["prevent"]),["enter"])},null,8,["modelValue","onKeydown","onKeyup"]),e[45]||(e[45]=a("div",{class:"text-caption mt-2"},"Enter = Kaydet, Esc = İptal",-1))]),_:1,__:[45]}),l(tt,null,{default:o(()=>[l(it),l(I,{variant:"text",color:"grey",onClick:he},{default:o(()=>e[46]||(e[46]=[m("İptal (Esc)")])),_:1,__:[46]}),l(I,{variant:"elevated",color:"error",onClick:ze,loading:L.value,disabled:L.value},{default:o(()=>[L.value?(O(),H(et,{key:0},[l(At,{indeterminate:"",size:"18",color:"white",class:"mr-2"}),e[47]||(e[47]=m(" Kaydediliyor... "))],64)):(O(),H(et,{key:1},[m("Kaydet (Enter)")],64))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[53]||(e[53]=Qe('<div class="mid-actions" data-v-bb0cfedd><div class="action-left" data-v-bb0cfedd><button class="btn" data-v-bb0cfedd>İş Emrini Kapat</button><button class="btn btn-primary" data-v-bb0cfedd>Çalışmaya Başla</button><button class="btn" data-v-bb0cfedd>Operasyon Gir</button><button class="btn" data-v-bb0cfedd>Teknik Resim</button><button class="btn" data-v-bb0cfedd>Ürün Etiketi Bas</button><button class="btn icon" data-v-bb0cfedd>🔍 Ara</button></div><div class="action-right" data-v-bb0cfedd><button class="btn btn-warn" data-v-bb0cfedd>Vardiya Bitir</button><button class="btn icon" data-v-bb0cfedd>🟨</button><button class="btn icon" data-v-bb0cfedd>🗂️</button><button class="btn icon" data-v-bb0cfedd>⏻</button></div></div>',1)),a("section",Ha,[l(u(Lt),{class:"orders-grid","data-source":De.value,"hover-state-enabled":!0,"row-alternation-enabled":!1,"show-borders":!1,"column-auto-width":!0,"column-resizing-mode":"nextColumn","column-min-width":80,height:"360"},{default:o(()=>[l(u(y),{type:"buttons",width:"30",buttons:bt}),l(u(y),{"data-field":"grp",caption:"GRP",width:"60",visible:!1}),l(u(y),{"data-field":"isEmriID",caption:"İŞ EMRİ ID",width:"140"}),l(u(y),{"data-field":"isEmriNo",caption:"İŞ EMRİ NO",width:"140"}),l(u(y),{"data-field":"stokKodu",caption:"STOK KODU",width:"120"}),l(u(y),{"data-field":"stokAdi",caption:"STOK ADI"}),l(u(y),{"data-field":"plnAd",caption:"PLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"ilvAd",caption:"İLV.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"klnAd",caption:"KLN.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"urtAd",caption:"ÜRT.AD",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"hurda",caption:"HURDA",width:"90","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"plnSure",caption:"PLN.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}}),l(u(y),{"data-field":"grcSure",caption:"GRÇ.SÜRE",width:"100","data-type":"number",format:{type:"fixedPoint",precision:0,thousandsSeparator:","}})]),_:1},8,["data-source"])]),e[54]||(e[54]=Qe('<div class="bottom-tabs" data-v-bb0cfedd><button class="tab active" data-v-bb0cfedd>İş Emirleri</button><button class="tab" data-v-bb0cfedd>Duruşlar</button><button class="tab" data-v-bb0cfedd>Hurdalar</button><button class="tab" data-v-bb0cfedd>Ölçümler</button><button class="tab" data-v-bb0cfedd>Kısayollar</button></div>',1)),l(ot,{modelValue:K.value,"onUpdate:modelValue":e[8]||(e[8]=s=>K.value=s),"max-width":"420",onKeydown:e[9]||(e[9]=G(R(s=>K.value=!1,["prevent","stop"]),["esc"]))},{default:o(()=>[l(ae,null,{default:o(()=>[l(le,null,{default:o(()=>e[48]||(e[48]=[m("İş Emrini Aktif Et")])),_:1,__:[48]}),l(at,null,{default:o(()=>{var s,v,h;return[a("form",{onSubmit:R(xe,["prevent"])},[a("div",Oa,[a("strong",null,d((s=_.value)==null?void 0:s.isEmriNo),1),m(" – "+d((v=_.value)==null?void 0:v.stokKodu),1)]),a("div",Ga,d((h=_.value)==null?void 0:h.stokAdi),1),l(lt,{ref:"activateLengthInput",modelValue:X.value,"onUpdate:modelValue":e[5]||(e[5]=b=>X.value=b),modelModifiers:{number:!0},type:"number",label:"Ürün Boyu (mm)",variant:"outlined",density:"compact",autofocus:"",onKeydown:[G(R(xe,["prevent"]),["enter"]),e[6]||(e[6]=G(R(b=>K.value=!1,["prevent","stop"]),["esc"]))]},null,8,["modelValue","onKeydown"]),e[49]||(e[49]=a("button",{type:"submit",style:{display:"none"}},null,-1))],32)]}),_:1}),l(tt,null,{default:o(()=>[l(it),l(I,{variant:"text",onClick:e[7]||(e[7]=s=>K.value=!1)},{default:o(()=>e[50]||(e[50]=[m("İptal")])),_:1,__:[50]}),l(I,{color:"primary",variant:"flat",onClick:xe,disabled:!X.value},{default:o(()=>e[51]||(e[51]=[m("Onayla")])),_:1,__:[51]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(u(qt),{visible:w.value,"onUpdate:visible":e[11]||(e[11]=s=>w.value=s),width:500,height:200,"hide-on-outside-click":!1,"show-close-button":!1,"drag-enabled":!1,"close-on-back-button":!1,"defer-rendering":!1,"focus-state-enabled":!0,shading:!0,"shading-color":"rgba(0,0,0,0.5)","on-hiding":kt,titleTemplate:"title",animation:{show:{type:"fade",duration:120},hide:{type:"fade",duration:80}},"on-shown":_t},{content:o(()=>[l(ie,{class:"pa-4"},{default:o(()=>[l(r,{ref_key:"durusSelectRef",ref:Ve,modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=s=>p.value=s),items:oe.value,"item-title":"description","item-value":"break_reason_code","return-object":"",label:"Duruş Sebebi","single-line":"",placeholder:"Seçiniz...",variant:"outlined",disabled:!B.value,class:Ee({"app-select--force-disabled":!B.value})},null,8,["modelValue","items","disabled","class"])]),_:1})]),title:o(()=>e[52]||(e[52]=[a("p",{class:"popup-title"},"Duruş Sebebini Giriniz",-1)])),default:o(()=>[l(u(Pt),{widget:"dxButton",toolbar:"bottom",location:"center",options:gt.value},null,8,["options"])]),_:1},8,["visible"])])}}}),Bl=Ht(Ua,[["__scopeId","data-v-bb0cfedd"]]);export{Bl as default};
