import{a$ as v,dw as Gr,d4 as S,db as q,dM as jr,d1 as T,dy as qn,dc as pt,du as Je,dC as R,d9 as oe,dv as os,d_ as k,dz as Yn,d3 as x,da as G,dO as ri,e6 as qr,dK as Qe,e5 as fe,e3 as Q,e7 as Et,dD as ee,df as y,d6 as L,dX as Xn,e8 as At,dV as Yr,d2 as xt,dW as Jn,e9 as Ps,dG as kt,ea as Qn,eb as $t,ec as Pi,ed as Gs,dx as _t,ee as Mi,d8 as Re,dI as Xr,dm as ai,dn as js,d$ as Hi,dt as de,ef as Jr,dL as Li,eg as Fi,dH as Qr}from"./main-dui5Vje2.js";import{s as h,d as H,Y as Zr,W as O,y as ea,_ as nt,J as li,Z as ta,K as $,g as I,e as m,$ as _e,t as ct,u as qs,a0 as Zn,a1 as yt,a2 as U,a3 as eo,r as di,C as Ie,a4 as Vi,a5 as Wi,a6 as Ki,I as zi,a7 as Ni,x as Ys,a8 as sa,a9 as X,P as K,aa as Ui,ab as rs,ac as ia,q as ie,E as na,f as oa,ad as Ze,ae as ra,af as aa,ag as la,ah as da,ai as ca,aj as ha,p as le,ak as Gi,al as ji,U as ft,B as te,am as qi,an as ua,w as B,n as M,H as to,j as et,G as pa,ao as Ot,ap as Le,aq as Yi,T as ci,c as _a,ar as fa,as as ye,L as ma,o as ae,at as Kt,au as Ne,av as ga,aw as Zt,ax as $e,ay as Xi,az as Ji,D as so,a as io,b as no,aA as Qi,N as Ge,R as va,aB as Ms,aC as ba,aD as Ca,aE as Hs,aF as Zi,aG as Ia,aH as en,X as ya,V as Sa,aI as tn,l as Ea,aJ as xa}from"./dom_component-rNBeBBGQ.js";import{a as He,c as j,i as mt,b as wa,d as as,w as Ta}from"./themes-Dz-rJM0x.js";import{V as ls,E as vs,a as Da}from"./editor-DdcKiGMI.js";import{W as bs,A as Aa,O as oo,a as ka,i as $a,c as Oa,r as Ra}from"./overlay-CqnVo2M6.js";import{D as ro,q as tt,f as Ba,b as ao,r as ds,e as me,d as lo,A as Pa,X as Ma,g as Ha,h as La,i as Fa,j as Va,l as Wa,S as Ka,m as za,k as Na,o as sn,u as Ua,p as Ga,s as ja}from"./m_resize_observer-QIriJutP.js";function qa(i){return i==null||typeof i!="object"?!1:"key"in i&&"items"in i}function Ya(i){return Array.isArray(i)&&!!i.length&&qa(i[0])}const Cs=i=>!i||typeof i!="string"?!1:/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(i)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(i)?"image":/^[\w-_]+$/.test(i)?"dxIcon":/^\s?([\w-_:]\s?)+$/.test(i)?"fontIcon":!1,Xa=i=>{switch(Cs(i)){case"image":return h("<img>").attr("src",i).addClass("dx-icon");case"fontIcon":return h("<i>").addClass(`dx-icon ${i}`);case"dxIcon":return h("<i>").addClass(`dx-icon dx-icon-${i}`);case"svg":return h("<i>").addClass("dx-icon dx-svg-icon").append(i);default:return null}};var Rt=Array.isArray;function cs(i){var e=typeof i;return e==="string"||e==="number"}function D(i){return i==null}function Bt(i){return i===null||i===!1||i===!0||i===void 0}function A(i){return typeof i=="function"}function Pt(i){return typeof i=="string"}function Ja(i){return typeof i=="number"}function se(i){return i===null}function Qa(i){return i===void 0}function We(i,e){var t={};if(i)for(var s in i)t[s]=i[s];if(e)for(var n in e)t[n]=e[n];return t}function hi(i){return!se(i)&&typeof i=="object"}var F={},Za="$F",st=function(){this.componentDidAppear=[],this.componentWillDisappear=[],this.componentWillMove=[]};function ui(i){return i.substring(2).toLowerCase()}function co(i,e){i.appendChild(e)}function Is(i,e,t){se(t)?co(i,e):i.insertBefore(e,t)}function el(i,e){return e?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}function tl(i,e,t){i.replaceChild(e,t)}function ho(i,e){i.removeChild(e)}function uo(i){for(var e=0;e<i.length;e++)i[e]()}function sl(i,e,t){var s=i.children;return t&4?s.$LI:t&8192?i.childFlags===2?s:s[e?0:s.length-1]:s}function re(i,e){for(var t;i;){if(t=i.flags,t&1521)return i.dom;i=sl(i,e,t)}return null}function ys(i,e){for(var t=i.length,s;(s=i.pop())!==void 0;)s(function(){--t<=0&&A(e)&&e()})}function il(i){for(var e=0;e<i.length;e++)i[e].fn();for(var t=0;t<i.length;t++){var s=i[t];Is(s.parent,s.dom,s.next)}i.splice(0,i.length)}function Ss(i,e,t){do{var s=i.flags;if(s&1521){(!t||i.dom.parentNode===e)&&ho(e,i.dom);return}var n=i.children;if(s&4&&(i=n.$LI),s&8&&(i=n),s&8192)if(i.childFlags===2)i=n;else{for(var o=0,r=n.length;o<r;++o)Ss(n[o],e,!1);return}}while(i)}function nl(i,e){return function(){Ss(i,e,!0)}}function Es(i,e,t){t.componentWillDisappear.length>0?ys(t.componentWillDisappear,nl(i,e)):Ss(i,e,!1)}function ol(i,e,t,s,n,o,r,a){i.componentWillMove.push({dom:s,fn:function(){r&4?t.componentWillMove(e,n,s):r&8&&t.onComponentWillMove(e,n,s,a)},next:o,parent:n})}function po(i,e,t,s,n){var o,r,a=e.flags;do{var l=e.flags;if(l&1521){!D(o)&&(A(o.componentWillMove)||A(o.onComponentWillMove))?ol(n,i,o,e.dom,t,s,a,r):Is(t,e.dom,s);return}var d=e.children;if(l&4)o=e.children,r=e.props,e=d.$LI;else if(l&8)o=e.ref,r=e.props,e=d;else if(l&8192)if(e.childFlags===2)e=d;else{for(var c=0,_=d.length;c<_;++c)po(i,d[c],t,s,n);return}}while(e)}function _o(i,e,t){return i.constructor.getDerivedStateFromProps?We(t,i.constructor.getDerivedStateFromProps(e,t)):t}var Mt={v:!1},nn={componentComparator:null,createVNode:null,renderComplete:null};function wt(i,e){i.textContent=e}function fo(i,e){return hi(i)&&i.event===e.event&&i.data===e.data}function mo(i,e){for(var t in e)Qa(i[t])&&(i[t]=e[t]);return i}function pi(i,e){return!!A(i)&&(i(e),!0)}var Tt="$";function xs(i,e,t,s,n,o,r,a){this.childFlags=i,this.children=e,this.className=t,this.dom=null,this.flags=s,this.key=n===void 0?null:n,this.props=o===void 0?null:o,this.ref=r===void 0?null:r,this.type=a}function J(i,e,t,s,n,o,r,a){var l=n===void 0?1:n,d=new xs(l,s,t,i,r,o,a,e);return l===0&&vo(d,d.children),d}function rl(i,e,t){if(i&4)return t;var s=(i&32768?e.render:e).defaultHooks;return D(s)?t:D(t)?s:mo(t,s)}function al(i,e,t){var s=(i&32768?e.render:e).defaultProps;return D(s)?t:D(t)?We(s,null):mo(t,s)}function ll(i,e){return i&12?i:e.prototype&&e.prototype.render?4:e.render?32776:8}function ge(i,e,t,s,n){i=ll(i,e);var o=new xs(1,null,null,i,s,al(i,e,t),rl(i,e,n),e);return o}function zt(i,e){return new xs(1,D(i)||i===!0||i===!1?"":i,null,16,e,null,null,null)}function gt(i,e,t){var s=J(8192,8192,null,i,e,null,t,null);switch(s.childFlags){case 1:s.children=ws(),s.childFlags=2;break;case 16:s.children=[zt(i)],s.childFlags=4;break}return s}function Fe(i){var e=i.props;if(e){var t=i.flags;t&481&&(e.children!==void 0&&D(i.children)&&vo(i,e.children),e.className!==void 0&&(D(i.className)&&(i.className=e.className||null),e.className=void 0)),e.key!==void 0&&(i.key=e.key,e.key=void 0),e.ref!==void 0&&(t&8?i.ref=We(i.ref,e.ref):i.ref=e.ref,e.ref=void 0)}return i}function dl(i){var e=i.children,t=i.childFlags;return gt(t===2?V(e):e.map(V),t,i.key)}function V(i){var e=i.flags&-16385,t=i.props;if(e&14&&!se(t)){var s=t;t={};for(var n in s)t[n]=s[n]}return(e&8192)===0?new xs(i.childFlags,i.children,i.className,e,i.key,t,i.ref,i.type):dl(i)}function ws(){return zt("",null)}function go(i,e,t,s){for(var n=i.length;t<n;t++){var o=i[t];if(!Bt(o)){var r=s+Tt+t;if(Rt(o))go(o,e,0,r);else{if(cs(o))o=zt(o,r);else{var a=o.key,l=Pt(a)&&a[0]===Tt;(o.flags&81920||l)&&(o=V(o)),o.flags|=65536,l?a.substring(0,s.length)!==s&&(o.key=s+a):se(a)?o.key=r:o.key=s+a}e.push(o)}}}}function cl(i){switch(i){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case Za:return 8192;default:return 1}}function vo(i,e){var t,s=1;if(Bt(e))t=e;else if(cs(e))s=16,t=e;else if(Rt(e)){for(var n=e.length,o=0;o<n;++o){var r=e[o];if(Bt(r)||Rt(r)){t=t||e.slice(0,o),go(e,t,o,"");break}else if(cs(r))t=t||e.slice(0,o),t.push(zt(r,Tt+o));else{var a=r.key,l=(r.flags&81920)>0,d=se(a),c=Pt(a)&&a[0]===Tt;l||d||c?(t=t||e.slice(0,o),(l||c)&&(r=V(r)),(d||c)&&(r.key=Tt+o),t.push(r)):t&&t.push(r),r.flags|=65536}}t=t||e,t.length===0?s=1:s=8}else t=e,t.flags|=65536,e.flags&81920&&(t=V(e)),s=2;return i.children=t,i.childFlags=s,i}function Ts(i){return Bt(i)||cs(i)?zt(i,null):Rt(i)?gt(i,0,null):i.flags&16384?V(i):i}var ze="http://www.w3.org/1999/xlink",Ls="http://www.w3.org/XML/1998/namespace",on={"xlink:actuate":ze,"xlink:arcrole":ze,"xlink:href":ze,"xlink:role":ze,"xlink:show":ze,"xlink:title":ze,"xlink:type":ze,"xml:base":Ls,"xml:lang":Ls,"xml:space":Ls};function Ds(i){return{onClick:i,onDblClick:i,onFocusIn:i,onFocusOut:i,onKeyDown:i,onKeyPress:i,onKeyUp:i,onMouseDown:i,onMouseMove:i,onMouseUp:i,onTouchEnd:i,onTouchMove:i,onTouchStart:i}}var bo=Ds(0),Xs=Ds(null),Co=Ds(!0);function rn(i,e){var t=e.$EV;return t||(t=e.$EV=Ds(null)),t[i]||++bo[i]===1&&(Xs[i]=vl(i)),t}function Io(i,e){var t=e.$EV;t&&t[i]&&(--bo[i]===0&&(document.removeEventListener(ui(i),Xs[i]),Xs[i]=null),t[i]=null)}function hl(i,e,t,s){if(A(t))rn(i,s)[i]=t;else if(hi(t)){if(fo(e,t))return;rn(i,s)[i]=t}else Io(i,s)}function ul(i){return A(i.composedPath)?i.composedPath()[0]:i.target}function yo(i,e,t,s){var n=ul(i);do{if(e&&n.disabled)return;var o=n.$EV;if(o){var r=o[t];if(r&&(s.dom=n,r.event?r.event(r.data,i):r(i),i.cancelBubble))return}n=n.parentNode}while(!se(n))}function pl(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function _l(){return this.defaultPrevented}function fl(){return this.cancelBubble}function So(i){var e={dom:document};return i.isDefaultPrevented=_l,i.isPropagationStopped=fl,i.stopPropagation=pl,Object.defineProperty(i,"currentTarget",{configurable:!0,get:function(){return e.dom}}),e}function ml(i){return function(e){if(e.button!==0){e.stopPropagation();return}yo(e,!0,i,So(e))}}function gl(i){return function(e){yo(e,!1,i,So(e))}}function vl(i){var e=i==="onClick"||i==="onDblClick"?ml(i):gl(i);return document.addEventListener(ui(i),e),e}function bl(i,e){var t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function an(i,e,t){if(i[e]){var s=i[e];s.event?s.event(s.data,t):s(t)}else{var n=e.toLowerCase();i[n]&&i[n](t)}}function Nt(i,e){var t=function(n){var o=this.$V;if(o){var r=o.props||F,a=o.dom;if(Pt(i))an(r,i,n);else for(var l=0;l<i.length;++l)an(r,i[l],n);if(A(e)){var d=this.$V,c=d.props||F;e(c,a,!1,d)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function je(i,e,t){var s="$"+e,n=i[s];if(n){if(n[1].wrapped)return;i.removeEventListener(n[0],n[1]),i[s]=null}A(t)&&(i.addEventListener(e,t),i[s]=[e,t])}function _i(i){return i==="checkbox"||i==="radio"}var Cl=Nt("onInput",fi),Il=Nt(["onClick","onChange"],fi);function Eo(i){i.stopPropagation()}Eo.wrapped=!0;function yl(i,e){_i(e.type)?(je(i,"change",Il),je(i,"click",Eo)):je(i,"input",Cl)}function fi(i,e){var t=i.type,s=i.value,n=i.checked,o=i.multiple,r=i.defaultValue,a=!D(s);t&&t!==e.type&&e.setAttribute("type",t),!D(o)&&o!==e.multiple&&(e.multiple=o),!D(r)&&!a&&(e.defaultValue=r+""),_i(t)?(a&&(e.value=s),D(n)||(e.checked=n)):a&&e.value!==s?(e.defaultValue=s,e.value=s):D(n)||(e.checked=n)}function St(i,e){if(i.type==="option")Sl(i,e);else{var t=i.children,s=i.flags;if(s&4)St(t.$LI,e);else if(s&8)St(t,e);else if(i.childFlags===2)St(t,e);else if(i.childFlags&12)for(var n=0,o=t.length;n<o;++n)St(t[n],e)}}function Sl(i,e){var t=i.props||F,s=i.dom;s.value=t.value,t.value===e||Rt(e)&&e.indexOf(t.value)!==-1?s.selected=!0:(!D(e)||!D(t.selected))&&(s.selected=t.selected||!1)}var El=Nt("onChange",xo);function xl(i){je(i,"change",El)}function xo(i,e,t,s){var n=!!i.multiple;!D(i.multiple)&&n!==e.multiple&&(e.multiple=n);var o=i.selectedIndex;o===-1&&(e.selectedIndex=-1);var r=s.childFlags;if(r!==1){var a=i.value;Ja(o)&&o>-1&&e.options[o]&&(a=e.options[o].value),t&&D(a)&&(a=i.defaultValue),St(s,a)}}var wl=Nt("onInput",wo),Tl=Nt("onChange");function Dl(i,e){je(i,"input",wl),e.onChange&&je(i,"change",Tl)}function wo(i,e,t){var s=i.value,n=e.value;if(D(s)){if(t){var o=i.defaultValue;!D(o)&&o!==n&&(e.defaultValue=o,e.value=o)}}else n!==s&&(e.defaultValue=s,e.value=s)}function To(i,e,t,s,n,o){i&64?fi(s,t):i&256?xo(s,t,n,e):i&128&&wo(s,t,n),o&&(t.$V=e)}function Al(i,e,t){i&64?yl(e,t):i&256?xl(e):i&128&&Dl(e,t)}function Do(i){return i.type&&_i(i.type)?!D(i.checked):!D(i.value)}function he(){return{current:null}}function hs(i){i&&!pi(i,null)&&i.current&&(i.current=null)}function Ut(i,e,t){i&&(A(i)||i.current!==void 0)&&t.push(function(){!pi(i,e)&&i.current!==void 0&&(i.current=e)})}function pe(i,e,t){Te(i,t),Es(i,e,t)}function Te(i,e){var t=i.flags,s=i.children,n;if(t&481){n=i.ref;var o=i.props;hs(n);var r=i.childFlags;if(!se(o))for(var a=Object.keys(o),l=0,d=a.length;l<d;l++){var c=a[l];Co[c]&&Io(c,i.dom)}r&12?Ht(s,e):r===2&&Te(s,e)}else if(s)if(t&4){A(s.componentWillUnmount)&&s.componentWillUnmount();var _=e;A(s.componentWillDisappear)&&(_=new st,ln(e,s,s.$LI.dom,t,void 0)),hs(i.ref),s.$UN=!0,Te(s.$LI,_)}else if(t&8){var u=e;if(n=i.ref,!D(n)){var p=null;A(n.onComponentWillUnmount)&&(p=re(i,!0),n.onComponentWillUnmount(p,i.props||F)),A(n.onComponentWillDisappear)&&(u=new st,p=p||re(i,!0),ln(e,n,p,t,i.props))}Te(s,u)}else t&1024?pe(s,i.ref,e):t&8192&&i.childFlags&12&&Ht(s,e)}function Ht(i,e){for(var t=0,s=i.length;t<s;++t)Te(i[t],e)}function kl(i,e){return function(){if(e)for(var t=0;t<i.length;t++){var s=i[t];Ss(s,e,!1)}}}function es(i,e,t){t.componentWillDisappear.length>0?ys(t.componentWillDisappear,kl(e,i)):i.textContent=""}function ts(i,e,t,s){Ht(t,s),e.flags&8192?Es(e,i,s):es(i,t,s)}function ln(i,e,t,s,n){i.componentWillDisappear.push(function(o){s&4?e.componentWillDisappear(t,o):s&8&&e.onComponentWillDisappear(t,n,o)})}function $l(i){var e=i.event;return function(t){e(i.data,t)}}function Ol(i,e,t,s){if(hi(t)){if(fo(e,t))return;t=$l(t)}je(s,ui(i),t)}function Rl(i,e,t){if(D(e)){t.removeAttribute("style");return}var s=t.style,n,o;if(Pt(e)){s.cssText=e;return}if(!D(i)&&!Pt(i)){for(n in e)o=e[n],o!==i[n]&&s.setProperty(n,o);for(n in i)D(e[n])&&s.removeProperty(n)}else for(n in e)o=e[n],s.setProperty(n,o)}function Bl(i,e,t,s,n){var o=i&&i.__html||"",r=e&&e.__html||"";o!==r&&!D(r)&&!bl(s,r)&&(se(t)||(t.childFlags&12?Ht(t.children,n):t.childFlags===2&&Te(t.children,n),t.children=null,t.childFlags=1),s.innerHTML=r)}function Js(i,e,t,s,n,o,r,a){switch(i){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":s.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":s[i]=!!t;break;case"defaultChecked":case"value":case"volume":if(o&&i==="value")break;var l=D(t)?"":t;s[i]!==l&&(s[i]=l);break;case"style":Rl(e,t,s);break;case"dangerouslySetInnerHTML":Bl(e,t,r,s,a);break;default:Co[i]?hl(i,e,t,s):i.charCodeAt(0)===111&&i.charCodeAt(1)===110?Ol(i,e,t,s):D(t)?s.removeAttribute(i):n&&on[i]?s.setAttributeNS(on[i],i,t):s.setAttribute(i,t);break}}function Ao(i,e,t,s,n,o){var r=!1,a=(e&448)>0;a&&(r=Do(t),r&&Al(e,s,t));for(var l in t)Js(l,null,t[l],s,n,r,null,o);a&&To(e,i,s,t,!0,r)}function ko(i,e,t){var s=Ts(i.render(e,i.state,t)),n=t;return A(i.getChildContext)&&(n=We(t,i.getChildContext())),i.$CX=n,s}function $o(i,e,t,s,n,o){var r=new e(t,s),a=r.$N=!!(e.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(r.$SVG=n,r.$L=o,i.children=r,r.$BS=!1,r.context=s,r.props===F&&(r.props=t),a)r.state=_o(r,t,r.state);else if(A(r.componentWillMount)){r.$BR=!0,r.componentWillMount();var l=r.$PS;if(!se(l)){var d=r.state;if(se(d))r.state=l;else for(var c in l)d[c]=l[c];r.$PS=null}r.$BR=!1}return r.$LI=ko(r,t,s),r}function mi(i,e){var t=i.props||F;return i.flags&32768?i.type.render(t,i.ref,e):i.type(t,e)}function W(i,e,t,s,n,o,r){var a=i.flags|=16384;a&481?Ro(i,e,t,s,n,o,r):a&4?Hl(i,e,t,s,n,o,r):a&8?Ll(i,e,t,s,n,o,r):a&16?Oo(i,e,n):a&8192?Ml(i,t,e,s,n,o,r):a&1024&&Pl(i,t,e,n,o,r)}function Pl(i,e,t,s,n,o){W(i.children,i.ref,e,!1,null,n,o);var r=ws();Oo(r,t,s),i.dom=r.dom}function Ml(i,e,t,s,n,o,r){var a=i.children,l=i.childFlags;l&12&&a.length===0&&(l=i.childFlags=2,a=i.children=ws()),l===2?W(a,t,e,s,n,o,r):qe(a,t,e,s,n,o,r)}function Oo(i,e,t){var s=i.dom=document.createTextNode(i.children);se(e)||Is(e,s,t)}function Ro(i,e,t,s,n,o,r){var a=i.flags,l=i.props,d=i.className,c=i.childFlags,_=i.dom=el(i.type,s=s||(a&32)>0),u=i.children;if(!D(d)&&d!==""&&(s?_.setAttribute("class",d):_.className=d),c===16)wt(_,u);else if(c!==1){var p=s&&i.type!=="foreignObject";c===2?(u.flags&16384&&(i.children=u=V(u)),W(u,_,t,p,null,o,r)):(c===8||c===4)&&qe(u,_,t,p,null,o,r)}se(e)||Is(e,_,n),se(l)||Ao(i,a,l,_,s,r),Ut(i.ref,_,o)}function qe(i,e,t,s,n,o,r){for(var a=0;a<i.length;++a){var l=i[a];l.flags&16384&&(i[a]=l=V(l)),W(l,e,t,s,n,o,r)}}function Hl(i,e,t,s,n,o,r){var a=$o(i,i.type,i.props||F,t,s,o),l=r;A(a.componentDidAppear)&&(l=new st),W(a.$LI,e,a.$CX,s,n,o,l),Po(i.ref,a,o,r)}function Ll(i,e,t,s,n,o,r){var a=i.ref,l=r;!D(a)&&A(a.onComponentDidAppear)&&(l=new st),W(i.children=Ts(mi(i,t)),e,t,s,n,o,l),Mo(i,o,r)}function Fl(i){return function(){i.componentDidMount()}}function Bo(i,e,t,s,n){i.componentDidAppear.push(function(){s&4?e.componentDidAppear(t):s&8&&e.onComponentDidAppear(t,n)})}function Po(i,e,t,s){Ut(i,e,t),A(e.componentDidMount)&&t.push(Fl(e)),A(e.componentDidAppear)&&Bo(s,e,e.$LI.dom,4,void 0)}function Vl(i,e){return function(){i.onComponentDidMount(re(e,!0),e.props||F)}}function Mo(i,e,t){var s=i.ref;D(s)||(pi(s.onComponentWillMount,i.props||F),A(s.onComponentDidMount)&&e.push(Vl(s,i)),A(s.onComponentDidAppear)&&Bo(t,s,re(i,!0),8,i.props))}function Wl(i,e,t,s,n,o,r){Te(i,r),(e.flags&i.flags&1521)!==0?(W(e,null,s,n,null,o,r),tl(t,e.dom,i.dom)):(W(e,t,s,n,re(i,!0),o,r),Es(i,t,r))}function De(i,e,t,s,n,o,r,a){var l=e.flags|=16384;i.flags!==l||i.type!==e.type||i.key!==e.key||l&2048?i.flags&16384?Wl(i,e,t,s,n,r,a):W(e,t,s,n,o,r,a):l&481?Gl(i,e,s,n,l,r,a):l&4?Yl(i,e,t,s,n,o,r,a):l&8?Xl(i,e,t,s,n,o,r,a):l&16?Jl(i,e):l&8192?Nl(i,e,t,s,n,r,a):Ul(i,e,s,r,a)}function Kl(i,e,t){i!==e&&(i!==""?t.firstChild.nodeValue=e:wt(t,e))}function zl(i,e){i.textContent!==e&&(i.textContent=e)}function Nl(i,e,t,s,n,o,r){var a=i.children,l=e.children,d=i.childFlags,c=e.childFlags,_=null;c&12&&l.length===0&&(c=e.childFlags=2,l=e.children=ws());var u=(c&2)!==0;if(d&12){var p=a.length;(d&8&&c&8||u||!u&&l.length>p)&&(_=re(a[p-1],!1).nextSibling)}gi(d,c,a,l,t,s,n,_,i,o,r)}function Ul(i,e,t,s,n){var o=i.ref,r=e.ref,a=e.children;if(gi(i.childFlags,e.childFlags,i.children,a,o,t,!1,null,i,s,n),e.dom=i.dom,o!==r&&!Bt(a)){var l=a.dom;ho(o,l),co(r,l)}}function Gl(i,e,t,s,n,o,r){var a=e.dom=i.dom,l=i.props,d=e.props,c=!1,_=!1,u;if(s=s||(n&32)>0,l!==d){var p=l||F;if(u=d||F,u!==F){c=(n&448)>0,c&&(_=Do(u));for(var g in u){var f=p[g],C=u[g];f!==C&&Js(g,f,C,a,s,_,i,r)}}if(p!==F)for(var b in p)D(u[b])&&!D(p[b])&&Js(b,p[b],null,a,s,_,i,r)}var w=e.children,E=e.className;i.className!==E&&(D(E)?a.removeAttribute("class"):s?a.setAttribute("class",E):a.className=E),n&4096?zl(a,w):gi(i.childFlags,e.childFlags,i.children,w,a,t,s&&e.type!=="foreignObject",null,i,o,r),c&&To(n,e,a,u,!1,_);var ne=e.ref,z=i.ref;z!==ne&&(hs(z),Ut(ne,a,o))}function jl(i,e,t,s,n,o,r){Te(i,r),qe(e,t,s,n,re(i,!0),o,r),Es(i,t,r)}function gi(i,e,t,s,n,o,r,a,l,d,c){switch(i){case 2:switch(e){case 2:De(t,s,n,o,r,a,d,c);break;case 1:pe(t,n,c);break;case 16:Te(t,c),wt(n,s);break;default:jl(t,s,n,o,r,d,c);break}break;case 1:switch(e){case 2:W(s,n,o,r,a,d,c);break;case 1:break;case 16:wt(n,s);break;default:qe(s,n,o,r,a,d,c);break}break;case 16:switch(e){case 16:Kl(t,s,n);break;case 2:es(n,t,c),W(s,n,o,r,a,d,c);break;case 1:es(n,t,c);break;default:es(n,t,c),qe(s,n,o,r,a,d,c);break}break;default:switch(e){case 16:Ht(t,c),wt(n,s);break;case 2:ts(n,l,t,c),W(s,n,o,r,a,d,c);break;case 1:ts(n,l,t,c);break;default:var _=t.length|0,u=s.length|0;_===0?u>0&&qe(s,n,o,r,a,d,c):u===0?ts(n,l,t,c):e===8&&i===8?Zl(t,s,n,o,r,_,u,a,l,d,c):Ql(t,s,n,o,r,_,u,a,d,c);break}break}}function ql(i,e,t,s,n){n.push(function(){i.componentDidUpdate(e,t,s)})}function Ho(i,e,t,s,n,o,r,a,l,d){var c=i.state,_=i.props,u=!!i.$N,p=A(i.shouldComponentUpdate);if(u&&(e=_o(i,t,e!==c?We(c,e):e)),r||!p||p&&i.shouldComponentUpdate(t,e,n)){!u&&A(i.componentWillUpdate)&&i.componentWillUpdate(t,e,n),i.props=t,i.state=e,i.context=n;var g=null,f=ko(i,t,n);u&&A(i.getSnapshotBeforeUpdate)&&(g=i.getSnapshotBeforeUpdate(_,c)),De(i.$LI,f,s,i.$CX,o,a,l,d),i.$LI=f,A(i.componentDidUpdate)&&ql(i,_,c,g,l)}else i.props=t,i.state=e,i.context=n}function Yl(i,e,t,s,n,o,r,a){var l=e.children=i.children;if(!se(l)){l.$L=r;var d=e.props||F,c=e.ref,_=i.ref,u=l.state;if(!l.$N){if(A(l.componentWillReceiveProps)){if(l.$BR=!0,l.componentWillReceiveProps(d,s),l.$UN)return;l.$BR=!1}se(l.$PS)||(u=We(u,l.$PS),l.$PS=null)}Ho(l,u,d,t,s,n,!1,o,r,a),_!==c&&(hs(_),Ut(c,l,r))}}function Xl(i,e,t,s,n,o,r,a){var l=!0,d=e.props||F,c=e.ref,_=i.props,u=!D(c),p=i.children;if(u&&A(c.onComponentShouldUpdate)&&(l=c.onComponentShouldUpdate(_,d)),l!==!1){u&&A(c.onComponentWillUpdate)&&c.onComponentWillUpdate(_,d);var g=Ts(mi(e,s));De(p,g,t,s,n,o,r,a),e.children=g,u&&A(c.onComponentDidUpdate)&&c.onComponentDidUpdate(_,d)}else e.children=p}function Jl(i,e){var t=e.children,s=e.dom=i.dom;t!==i.children&&(s.nodeValue=t)}function Ql(i,e,t,s,n,o,r,a,l,d){for(var c=o>r?r:o,_=0,u,p;_<c;++_)u=e[_],p=i[_],u.flags&16384&&(u=e[_]=V(u)),De(p,u,t,s,n,a,l,d),i[_]=u;if(o<r)for(_=c;_<r;++_)u=e[_],u.flags&16384&&(u=e[_]=V(u)),W(u,t,s,n,a,l,d);else if(o>r)for(_=c;_<o;++_)pe(i[_],t,d)}function Zl(i,e,t,s,n,o,r,a,l,d,c){var _=o-1,u=r-1,p=0,g=i[p],f=e[p],C,b;e:{for(;g.key===f.key;){if(f.flags&16384&&(e[p]=f=V(f)),De(g,f,t,s,n,a,d,c),i[p]=f,++p,p>_||p>u)break e;g=i[p],f=e[p]}for(g=i[_],f=e[u];g.key===f.key;){if(f.flags&16384&&(e[u]=f=V(f)),De(g,f,t,s,n,a,d,c),i[_]=f,_--,u--,p>_||p>u)break e;g=i[_],f=e[u]}}if(p>_){if(p<=u)for(C=u+1,b=C<r?re(e[C],!0):a;p<=u;)f=e[p],f.flags&16384&&(e[p]=f=V(f)),++p,W(f,t,s,n,b,d,c)}else if(p>u)for(;p<=_;)pe(i[p++],t,c);else ed(i,e,s,o,r,_,u,p,t,n,a,l,d,c)}function ed(i,e,t,s,n,o,r,a,l,d,c,_,u,p){var g,f,C=0,b=0,w=a,E=a,ne=o-a+1,z=r-a+1,Ke=new Int32Array(z+1),Se=ne===s,Bs=!1,Z=0,bt=0;if(n<4||(ne|z)<32)for(b=w;b<=o;++b)if(g=i[b],bt<z){for(a=E;a<=r;a++)if(f=e[a],g.key===f.key){if(Ke[a-E]=b+1,Se)for(Se=!1;w<b;)pe(i[w++],l,p);Z>a?Bs=!0:Z=a,f.flags&16384&&(e[a]=f=V(f)),De(g,f,l,t,d,c,u,p),++bt;break}!Se&&a>r&&pe(g,l,p)}else Se||pe(g,l,p);else{var Ri={};for(b=E;b<=r;++b)Ri[e[b].key]=b;for(b=w;b<=o;++b)if(g=i[b],bt<z)if(a=Ri[g.key],a!==void 0){if(Se)for(Se=!1;b>w;)pe(i[w++],l,p);Ke[a-E]=b+1,Z>a?Bs=!0:Z=a,f=e[a],f.flags&16384&&(e[a]=f=V(f)),De(g,f,l,t,d,c,u,p),++bt}else Se||pe(g,l,p);else Se||pe(g,l,p)}if(Se)ts(l,_,i,p),qe(e,l,t,d,c,u,p);else if(Bs){var Bi=td(Ke);for(a=Bi.length-1,b=z-1;b>=0;b--)Ke[b]===0?(Z=b+E,f=e[Z],f.flags&16384&&(e[Z]=f=V(f)),C=Z+1,W(f,l,t,d,C<n?re(e[C],!0):c,u,p)):a<0||b!==Bi[a]?(Z=b+E,f=e[Z],C=Z+1,po(_,f,l,C<n?re(e[C],!0):c,p)):a--;p.componentWillMove.length>0&&il(p.componentWillMove)}else if(bt!==z)for(b=z-1;b>=0;b--)Ke[b]===0&&(Z=b+E,f=e[Z],f.flags&16384&&(e[Z]=f=V(f)),C=Z+1,W(f,l,t,d,C<n?re(e[C],!0):c,u,p))}var Ee,Gt,dn=0;function td(i){var e=0,t=0,s=0,n=0,o=0,r=0,a=0,l=i.length;for(l>dn&&(dn=l,Ee=new Int32Array(l),Gt=new Int32Array(l));t<l;++t)if(e=i[t],e!==0){if(s=Ee[n],i[s]<e){Gt[t]=s,Ee[++n]=t;continue}for(o=0,r=n;o<r;)a=o+r>>1,i[Ee[a]]<e?o=a+1:r=a;e<i[Ee[o]]&&(o>0&&(Gt[t]=Ee[o-1]),Ee[o]=t)}o=n+1;var d=new Int32Array(o);for(r=Ee[o-1];o-- >0;)d[o]=r,r=Gt[r],Ee[o]=0;return d}var sd=typeof document<"u";sd&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);function id(i,e,t,s){var n=[],o=new st,r=e.$V;Mt.v=!0,D(r)?D(i)||(i.flags&16384&&(i=V(i)),W(i,e,s,!1,null,n,o),e.$V=i,r=i):D(i)?(pe(r,e,o),e.$V=null):(i.flags&16384&&(i=V(i)),De(r,i,e,s,!1,null,n,o),r=e.$V=i),uo(n),ys(o.componentDidAppear),Mt.v=!1,A(t)&&t(),A(nn.renderComplete)&&nn.renderComplete(r,e)}function Lt(i,e,t,s){t===void 0&&(t=null),s===void 0&&(s=F),id(i,e,t,s)}var ss=[],nd=typeof Promise<"u"?Promise.resolve().then.bind(Promise.resolve()):function(i){window.setTimeout(i,0)},Qs=!1;function cn(i,e,t,s){var n=i.$PS;if(A(e)&&(e=e(n?We(i.state,n):i.state,i.props,i.context)),D(n))i.$PS=e;else for(var o in e)n[o]=e[o];if(i.$BR)A(t)&&i.$L.push(t.bind(i));else{if(!Mt.v&&ss.length===0){Fo(i,s),A(t)&&t.call(i);return}if(ss.indexOf(i)===-1&&ss.push(i),s&&(i.$F=!0),Qs||(Qs=!0,nd(Lo)),A(t)){var r=i.$QU;r||(r=i.$QU=[]),r.push(t)}}}function od(i){for(var e=i.$QU,t=0;t<e.length;++t)e[t].call(i);i.$QU=null}function Lo(){var i;for(Qs=!1;i=ss.shift();)if(!i.$UN){var e=i.$F;i.$F=!1,Fo(i,e),i.$QU&&od(i)}}function Fo(i,e){if(e||!i.$BR){var t=i.$PS;i.$PS=null;var s=[],n=new st;Mt.v=!0,Ho(i,We(i.state,t),i.props,re(i.$LI,!0).parentNode,i.context,i.$SVG,e,null,s,n),uo(s),ys(n.componentDidAppear),Mt.v=!1}else i.state=i.$PS,i.$PS=null}var vi=(function(){function i(t,s){this.state=null,this.props=void 0,this.context=void 0,this.displayName=void 0,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$SSR=void 0,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=t||F,this.context=s||F}var e=i.prototype;return e.forceUpdate=function(s){this.$UN||cn(this,{},s,!0)},e.setState=function(s,n){this.$UN||this.$BS||cn(this,s,n,!1)},e.render=function(s,n,o){return null},i})();vi.defaultProps=null;const Be={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(this.lockCount===0){const i=this.callbacks;this.callbacks=[],i.forEach((e=>e()))}}},Fs=(i,e)=>{if(!(i instanceof Object&&e instanceof Object))return i===e;const s=Object.keys(i),n=Object.keys(e);return s.length!==n.length?!1:!s.some((r=>i[r]!==e[r]))};class vt extends vi{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(e,t){this._pendingContext=t??{}}shouldComponentUpdate(e,t){return!Fs(this.props,e)||!Fs(this.state,t)||!Fs(this.context,this._pendingContext)}}class bi extends vt{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){Be.lock()}componentWillUpdate(e,t,s){Be.lock()}componentDidMount(){Be.callbacks.push((()=>{this._effects=this.createEffects()})),Be.callEffects()}componentDidUpdate(){Be.callbacks.push((()=>this.updateEffects())),Be.callEffects()}destroyEffects(){this._effects.forEach((e=>e.dispose()))}componentWillUnmount(){this.destroyEffects()}}class As extends bi{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){var e;const t=this.vDomElement,s=(e=t.className)!==null&&e!==void 0&&e.length?t.className.split(" "):[],n=s.filter((r=>!t.dxClasses.previous.includes(r))),o=t.dxClasses.previous.filter((r=>!s.includes(r)));n.forEach((r=>{const a=t.dxClasses.removed.indexOf(r);a>-1?t.dxClasses.removed.splice(a,1):t.dxClasses.added.includes(r)||t.dxClasses.added.push(r)})),o.forEach((r=>{const a=t.dxClasses.added.indexOf(r);a>-1?t.dxClasses.added.splice(a,1):t.dxClasses.removed.includes(r)||t.dxClasses.removed.push(r)}))}componentDidMount(){var e;const t=re(this.$LI,!0);this.vDomElement=t,super.componentDidMount(),t.dxClasses=t.dxClasses||{removed:[],added:[],previous:[]},t.dxClasses.previous=t!=null&&(e=t.className)!==null&&e!==void 0&&e.length?t.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const e=this.vDomElement;if(e!==null){var t;e.dxClasses.added.forEach((s=>e.classList.add(s))),e.dxClasses.removed.forEach((s=>e.classList.remove(s))),e.dxClasses.previous=(t=e.className)!==null&&t!==void 0&&t.length?e.className.split(" "):[]}}shouldComponentUpdate(e,t){const s=super.shouldComponentUpdate(e,t);return s&&this.vDomUpdateClasses(),s}}let rd=0;const ad=function(i){const e=rd++;return{id:e,defaultValue:i,Provider:class extends vi{getChildContext(){return v({},this.context,{[e]:this.props.value||i})}render(){return this.props.children}}}};class P{constructor(e,t){this.dependency=t,this.effect=e,this.destroy=e()}update(e){const t=this.dependency;e&&(this.dependency=e),(!e||e.some(((s,n)=>t[n]!==s)))&&(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const ld="a runtime error occured! Use Inferno in development environment to find the error.";function dd(i){return i==null}function cd(i){return i===null||i===!1||i===!0||i===void 0}function ht(i){return i===null}function hd(i){throw i||(i=ld),new Error(`Inferno Error: ${i}`)}var N;(function(i){i[i.HtmlElement=1]="HtmlElement",i[i.ComponentUnknown=2]="ComponentUnknown",i[i.ComponentClass=4]="ComponentClass",i[i.ComponentFunction=8]="ComponentFunction",i[i.Text=16]="Text",i[i.SvgElement=32]="SvgElement",i[i.InputElement=64]="InputElement",i[i.TextareaElement=128]="TextareaElement",i[i.SelectElement=256]="SelectElement",i[i.Void=512]="Void",i[i.Portal=1024]="Portal",i[i.ReCreate=2048]="ReCreate",i[i.ContentEditable=4096]="ContentEditable",i[i.Fragment=8192]="Fragment",i[i.InUse=16384]="InUse",i[i.ForwardRef=32768]="ForwardRef",i[i.Normalized=65536]="Normalized",i[i.ForwardRefComponent=32776]="ForwardRefComponent",i[i.FormElement=448]="FormElement",i[i.Element=481]="Element",i[i.Component=14]="Component",i[i.DOMRef=2033]="DOMRef",i[i.InUseOrNormalized=81920]="InUseOrNormalized",i[i.ClearInUse=-16385]="ClearInUse",i[i.ComponentKnown=12]="ComponentKnown"})(N||(N={}));var Me;(function(i){i[i.UnknownChildren=0]="UnknownChildren",i[i.HasInvalidChildren=1]="HasInvalidChildren",i[i.HasVNodeChildren=2]="HasVNodeChildren",i[i.HasNonKeyedChildren=4]="HasNonKeyedChildren",i[i.HasKeyedChildren=8]="HasKeyedChildren",i[i.HasTextChildren=16]="HasTextChildren",i[i.MultipleChildren=12]="MultipleChildren"})(Me||(Me={}));function ud(i,e){const t=document.createElement("i");return t.innerHTML=e,t.innerHTML===i.innerHTML}function pd(i){let e,t;for(;i;){if(e=i.flags,e&N.DOMRef)return i.dom;t=i.children,e&N.Fragment?i=i.childFlags===Me.HasVNodeChildren?t:t[t.length-1]:e&N.ComponentClass?i=t.$LI:i=t}return null}function _d(i,e){return!!(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&ud(i,e.dangerouslySetInnerHTML.__html))}function fd(i,e,t,s,n,o,r,a){const l=i.type,d=i.ref,c=i.props||F;let _;if(o){const u=$o(i,l,c,s,n,r),p=u.$LI;_=Ft(p,e,t,u.$CX,n,r,a),Po(d,u,r,a)}else{const u=Ts(mi(i,s));_=Ft(u,e,t,s,n,r,a),i.children=u,Mo(i,r,a)}return _}function Vo(i,e,t,s,n,o,r){const a=i.childFlags,l=i.children,d=i.props,c=i.flags;if(a!==Me.HasInvalidChildren){if(a===Me.HasVNodeChildren)ht(t)?W(l,e,s,n,null,o,r):(t=Ft(l,e,t,s,n,o,r),t=t?t.nextSibling:null);else if(a===Me.HasTextChildren)ht(t)?e.appendChild(document.createTextNode(l)):e.childNodes.length!==1||t.nodeType!==3?e.textContent=l:t.nodeValue!==l&&(t.nodeValue=l),t=null;else if(a&Me.MultipleChildren){let _=!1;for(let u=0,p=l.length;u<p;++u){const g=l[u];ht(t)||_&&(g.flags&N.Text)>0?W(g,e,s,n,t,o,r):(t=Ft(g,e,t,s,n,o,r),t=t?t.nextSibling:null),_=(g.flags&N.Text)>0}}if((c&N.Fragment)===0){let _=null;for(;t;)_=t.nextSibling,e.removeChild(t),t=_}}else!ht(e.firstChild)&&!_d(e,d)&&(e.textContent="",c&N.FormElement&&(e.defaultValue=""))}function md(i,e,t,s,n,o,r){const a=i.props,l=i.className,d=i.flags,c=i.ref;return n=n||(d&N.SvgElement)>0,t.nodeType!==1?(Ro(i,null,s,n,null,o,r),e.replaceChild(i.dom,t)):(i.dom=t,Vo(i,t,t.firstChild,s,n,o,r),ht(a)||Ao(i,d,a,t,n,r),dd(l)?t.className!==""&&t.removeAttribute("class"):n?t.setAttribute("class",l):t.className=l,Ut(c,t,o)),i.dom}function Wo(i,e,t){if(t.nodeType!==3)e.replaceChild(i.dom=document.createTextNode(i.children),t);else{const s=i.children;t.nodeValue!==s&&(t.nodeValue=s),i.dom=t}return i.dom}function gd(i,e,t,s,n,o,r){const a=i.children;return i.childFlags===Me.HasVNodeChildren?(Wo(a,e,t),a.dom):(Vo(i,e,t,s,n,o,r),pd(a[a.length-1]))}function Ft(i,e,t,s,n,o,r){const a=i.flags|=N.InUse;return a&N.Component?fd(i,e,t,s,n,(a&N.ComponentClass)>0,o,r):a&N.Element?md(i,e,t,s,n,o,r):a&N.Text?Wo(i,e,t):a&N.Void?i.dom=t:a&N.Fragment?gd(i,e,t,s,n,o,r):(hd(),null)}function hn(i,e,t){let s=e.firstChild;if(ht(s))Lt(i,e,t);else{const n=[],o=new st;for(cd(i)||(s=Ft(i,e,s,{},!1,n,o));s&&(s=s.nextSibling);)e.removeChild(s);if(n.length>0){let r;for(;(r=n.shift())!==void 0;)r()}}e.$V=i}const vd=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),bd=i=>typeof i=="number"?!0:!Number.isNaN(Number(i)),Cd=(i,e)=>vd.has(i)?e:`${e}px`,Id=/[A-Z]/g,yd=i=>i.replace(Id,"-$&").toLowerCase();function Sd(i){if(i instanceof Object)return Object.entries(i).reduce(((e,t)=>{let[s,n]=t;return e[yd(s)]=bd(n)?Cd(s,n):n,e}),{})}const ks=()=>new P((()=>{Lo()}),[]);function un(i){return i==null}function Ed(i){return typeof i=="string"}function pn(i){return i===void 0}var xd={onComponentDidAppear:1,onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillDisappear:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function is(i,e,t){var s,n=null,o=null,r=null,a,l,d=arguments.length-2;if(d===1)s=t;else if(d>1)for(s=[];d-- >0;)s[d]=arguments[d+2];if(Ed(i)){if(a=cl(i),!un(e)){l={};for(var c in e)c==="className"||c==="class"?r=e[c]:c==="key"?o=e.key:c==="children"&&pn(s)?s=e.children:c==="ref"?n=e.ref:(c==="contenteditable"&&(a|=4096),l[c]=e[c])}}else{if(a=2,pn(s)||(e||(e={}),e.children=s),!un(e)){l={};for(var _ in e)_==="key"?o=e.key:_==="ref"?n=e.ref:xd[_]===1?(n||(n={}),n[_]=e[_]):l[_]=e[_]}return ge(a,i,l,o,n)}return a&8192?gt(d===1?[s]:s,0,o):J(a,i,r,s,0,l,o,n)}const wd=i=>{var e,t;return((e=i.container)===null||e===void 0?void 0:e.get(0))||((t=i.item)===null||t===void 0?void 0:t.get(0))};function Td(i,e,t){setTimeout((()=>{Lt(is(i,e),wd(e))}),0)}const Dd=(i,e,t)=>{const s=e[i];return!!s&&typeof s!="string"},_n=i=>{const{parentNode:e}=i;if(e){const{nextSibling:t}=i;Zr(i),e.$V=i.$V,Lt(null,e),e.insertBefore(i,t),i.innerHTML="",delete e.$V}delete i.$V},at=Gr({createElement:(i,e)=>is(i,e),remove:_n,onAfterRender:()=>{Be.callEffects()},onPreRender:()=>{Be.lock()},render:(i,e,t,s)=>{if(s)Lt(is(i,e),t);else{const{parentNode:n}=t,o=t==null?void 0:t.nextSibling,r=H.createElement("div");r.appendChild(t);const a=H.createDocumentFragment().appendChild(r);!!t.$V&&_n(t),hn(is(i,e),a),t.$V=a.$V,n&&n.insertBefore(t,o)}},renderIntoContainer:(i,e,t)=>{t?Lt(i,e):hn(i,e)}}),Ad=(i,e)=>Object.keys(i).length!==Object.keys(e).length?!1:Object.entries(i).every((t=>{let[s,n]=t;const o=e[s];return n instanceof Date&&o instanceof Date?n.getTime()===o.getTime():n===o})),kd=["isEqual"],$d=i=>!!i.toArray,Od=(i,e)=>{const t={template:e,model:v({},i)},s=i.data??{},{isEqual:n}=s,o=nt(s,kd);return n&&(t.model.data=o,t.isEqual=n),t},Rd=(i,e)=>{const{data:t,index:s}=i.model??{data:{}};t&&Object.keys(t).forEach((o=>{t[o]&&H.isNode(t[o])&&(t[o]=O(h(t[o])))}));const n=i.template.render(v({container:e,transclude:i.transclude},{renovated:i.renovated},i.transclude?{}:{model:t},!i.transclude&&Number.isFinite(s)?{index:s}:{}));return n===void 0?[]:$d(n)?n.toArray():[h(n).get(0)]},Bd=(i,e)=>{e.forEach((t=>{!!!i.find((n=>t===n))&&t.parentNode&&h(t).remove()}))};class fn extends bi{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=re(this.$LI,!0);if(!(e!=null&&e.parentNode))return()=>{};const t=e.parentNode,s=h(t),n=s.contents().toArray(),o=Rd(this.props,O(s));return ea(h(e),h(o)),()=>{const r=h(t).contents().toArray();Bd(n,r),t.appendChild(e)}}shouldComponentUpdate(e){const{template:t,model:s}=this.props,{template:n,model:o,isEqual:r}=e,a=r??Ad;if(t!==n)return!0;if(!S(s)||!S(o))return s!==o;const{data:l,index:d}=s,{data:c,index:_}=o;return d!==_?!0:!S(l)||!S(c)?s!==o:!a(l,c)}createEffects(){return[new P(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}const Zs=i=>i&&(i.defaultProps?e=>Fe(ge(2,i,v({},e))):i),Vs=i=>Array.isArray(i)?[...i]:v({},i),Ko=(i,e,t)=>{const s=t.length>0&&e&&i!==e?Vs(e):Vs(i),n=t[0];return t.length>1?s[n]=Ko(i[n],e==null?void 0:e[n],t.slice(1)):n&&(q(i[n])?s[n]=Vs(i[n]):s[n]=i[n]),s},Pd=(i,e,t,s)=>{const n=e[t],o=i[t],r=i;q(n)||t!==s&&Array.isArray(n)?r[t]=Ko(n,o,jr(s).slice(1)):r[t]=n},Ws=(i,e)=>t=>{Object.prototype.hasOwnProperty.call(i,t)&&i[t]===void 0&&(i[t]=e(t))};class $s extends li{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,t){super(e,t),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const t=this.getSupportedKeyNames().length>0,s=typeof this._viewComponent.prototype.keyDown=="function";if(t&&!s)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return(e=this._viewRef)===null||e===void 0?void 0:e.current}_checkContentReadyOption(e){const t=this._getContentReadyOptions().reduce(((s,n)=>(s[n]=!0,s)),{});return this._checkContentReadyOption=s=>!!t[s],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return T(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce(((t,s)=>{let[n,o,r]=s;return v({},t,{[n]:e[o],[r]:a=>this.option(n,a)})}),{}),this._propsInfo.templates.reduce(((t,s)=>v({},t,{[s]:null})),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach((t=>{e[t]=this.option(t)})),e}_initializeComponent(){var e;super._initializeComponent(),(e=this._templateManager)===null||e===void 0||e.addDefaultTemplates(this.getDefaultTemplates());const t=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(t),this._propsInfo.templates.forEach((s=>{this._componentTemplates[s]=this._createTemplateComponent(this._props[s])})),Object.keys(this._getActionConfigsFull()).forEach((s=>this._addAction(s))),this._viewRef=he(),this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const t=this.$element()[0];this._isNodeReplaced||at.onPreRender(),at.render(this._viewComponent,e,t,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,at.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,t){this._options.silent(e,t)}_render(){}_removeWidget(){at.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:n}=e,o=Array.from(n).filter((r=>{var a;return!this._propsInfo.templates.includes(r.name)&&((a=n[r.name])===null||a===void 0?void 0:a.specified)})).reduce(((r,a)=>{let{name:l,value:d}=a;const c=r,_=l in e;return c[l]=d===""&&_?e[l]:d,c}),{});this._elementAttr=o,this._storedClasses=e.getAttribute("class")||""}const t=e.style,s={};for(let n=0;n<t.length;n+=1)s[t[n]]=t.getPropertyValue(t[n]);return this._elementAttr.style=s,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:t,twoWay:s,elements:n,props:o}=this._propsInfo,r=this._getViewComponentDefaultProps(),a=Object.keys(r),l=this._getDefaultOptions(),{ref:d,children:c,onKeyboardHandled:_}=e,p={ref:d,children:c,onKeyDown:_?(g,f)=>{_(f)}:void 0};return[...o,...this._getAdditionalProps()].forEach((g=>{Object.prototype.hasOwnProperty.call(e,g)&&(p[g]=e[g])})),t.forEach(Ws(p,(()=>null))),a.forEach(Ws(p,(g=>l[g]))),s.forEach((g=>{let[f,C]=g;Ws(p,(()=>l[C]))(f)})),n.forEach((g=>{if(g in p){const f=p[g];qn(f)&&(p[g]=this._patchElementParam(f))}})),p}getSupportedKeyNames(){return[]}prepareStyleProp(e){return typeof e.style=="string"?v({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),t=this._patchOptionValues(v({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach((s=>{t[s]=this._componentTemplates[s]})),this.prepareStyleProp(v({},t,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((e==null?void 0:e.class)??"").split(" ")].filter(((s,n,o)=>s&&o.indexOf(s)===n)).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return v({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),t={};return e.forEach((s=>{t[s]="dx-renovation-template-mock"})),t}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const t=Object.entries(this._templatesInfo).reduce(((s,n)=>{let[o,r]=n;return v({},s,{[o]:e[o]??r})}),{});return v({},e,t)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach((s=>{e[s]=n=>this.viewRef.keyDown(ta.createKeyDownOptions(n))})),e}_addAction(e,t){let s=t;if(!s){const n=this._createActionByOption(e,this._getActionConfigsFull()[e]);s=o=>(Object.keys(o).forEach((r=>{S(o[r])&&H.isNode(o[r])&&(o[r]=O(h(o[r])))})),n(o))}this._actionsMap[e]=s}_optionChanged(e){const{name:t,fullName:s,value:n,previousValue:o}=e;Pd(this._props,this.option(),t,s),this._propsInfo.templates.includes(t)&&n!==o&&(this._componentTemplates[t]=this._createTemplateComponent(n)),t&&this._getActionConfigsFull()[t]&&this._addAction(t),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(s),super._optionChanged(e),this._invalidate()}_validateOptions(e){return super._validateOptions(e)}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?at.createElement(fn,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const t=this._getTemplate(e);if(!(pt(t)&&t==="dx-renovation-template-mock"))return s=>at.createElement(fn,Od(s,t))}_wrapKeyDownHandler(e){return t=>{const{originalEvent:s,keyName:n,which:o}=t,r=this.customKeyHandlers,a=r[n]||r[o];return a!==void 0&&!a.bind(this)(s,t)?(s.cancel=!0,s):e==null?void 0:e(s,t)}}_toPublicElement(e){return O(h(e))}_patchElementParam(e){try{const t=h(e),s=t==null?void 0:t.get(0);return s!=null&&s.nodeType?s:e}catch{return e}}focus(){const e=this.$element();if(!(e.is(":focus")||e.find(":focus").length>0))if(this.option("focusStateEnabled"))e.focus();else{var s;(s=e.find("[tabindex]")[0])===null||s===void 0||s.focus()}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return v({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,t){this.customKeyHandlers[e]=t}setAria(e,t){this._aria[e]=t,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}$s.IS_RENOVATED_WIDGET=!1;$s.IS_RENOVATED_WIDGET=!0;const Ci={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},Ye=ad(void 0),Md={};class zo extends vt{constructor(){super(...arguments),this.__getterCache={}}get config(){return this.__getterCache.config!==void 0?this.__getterCache.config:this.__getterCache.config={rtlEnabled:this.props.rtlEnabled}}componentWillUpdate(e){this.props.rtlEnabled!==e.rtlEnabled&&(this.__getterCache.config=void 0)}getChildContext(){return v({},this.context,{[Ye.id]:this.config||Ye.defaultValue})}render(){return this.props.children}}zo.defaultProps=Md;const Hd=i=>Object.keys(i).filter((e=>!!e&&i[e])).join(" ").split(" ").filter(((e,t,s)=>s.indexOf(e)===t)).join(" ");function Ld(i,e){return i!==void 0?i:(e==null?void 0:e.rtlEnabled)!==void 0?e.rtlEnabled:Je().rtlEnabled}function Fd(i,e){const t=S(i),s=S(Je().rtlEnabled)&&!t&&!S(e==null?void 0:e.rtlEnabled);return t&&i!==(e==null?void 0:e.rtlEnabled)||s}const{abstract:Vd}=R,Wd=$.real(),No=R.inherit((function(){const i=I("scroll","dxScrollEmitter");return{ctor(e){this._element=e,this._locked=!1,this._proxiedScroll=t=>{this._disposed||this._scroll(t)},m.on(this._element,i,this._proxiedScroll)},_scroll:Vd,check(e,t){this._locked&&t()},dispose(){this._disposed=!0,m.off(this._element,i,this._proxiedScroll)}}})()),Uo=No.inherit({ctor(i,e){this.callBase(i),this._timeout=e},_scroll(){this._prepare(),this._forget()},_prepare(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget(){const i=this;this._timer=setTimeout((()=>{i._clearTimer()}),this._timeout)},dispose(){this.callBase(),this._clearTimer()}}),mn=Uo.inherit({ctor(i){this.callBase(i,400),this._lastWheelDirection=null},check(i,e){this._checkDirectionChanged(i),this.callBase(i,e)},_checkDirectionChanged(i){if(!_e(i)){this._lastWheelDirection=null;return}const e=i.shiftKey||!1,t=this._lastWheelDirection!==null&&e!==this._lastWheelDirection;this._lastWheelDirection=e,this._locked=this._locked&&!t}});let ei=Uo.inherit({ctor(i){this.callBase(i,400)}});(function(){const{ios:i,android:e}=Wd;(i||e)&&(ei=No.inherit({_scroll(){this._locked=!0;const t=this;ct(this._scrollFrame),this._scrollFrame=qs((()=>{t._locked=!1}))},check(t,s){ct(this._scrollFrame),ct(this._checkFrame);const n=this,{callBase:o}=this;this._checkFrame=qs((()=>{o.call(n,t,s),n._locked=!1}))},dispose(){this.callBase(),ct(this._scrollFrame),ct(this._checkFrame)}}))})();const Kd=Zn.inherit((function(){const i=Math.round(16.666666666666668);return{ctor(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new ei(e),this._wheelLocker=new mn(e)},validate:()=>!0,configure(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new ei(e.scrollTarget),this._wheelLocker=new mn(e.scrollTarget)),this.callBase(e)},_init(e){this._wheelLocker.check(e,(()=>{_e(e)&&this._accept(e)})),this._pointerLocker.check(e,(()=>{const t=this.isNative&&eo(e);!_e(e)&&!t&&this._accept(e)})),this._fireEvent("dxscrollinit",e),this._prevEventData=U(e)},move(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start(e){this._savedEventData=U(e),this._fireEvent("dxscrollstart",e),this._prevEventData=U(e)},_move(e){const t=U(e);this._fireEvent("dxscroll",e,{delta:yt(this._prevEventData,t)}),yt(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=U(e)},_end(e){const t=yt(this._prevEventData,U(e));let s={x:0,y:0};if(!_e(e)&&t.time<100){const n=yt(this._savedEventData,this._prevEventData),o=i/n.time;s={x:n.x*o,y:n.y*o}}this._fireEvent("dxscrollend",e,{velocity:s})},_stop(e){this._fireEvent("dxscrollstop",e)},cancel(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover(){if(!this.isNative)return this.callBase.apply(this,arguments)}}})());di({emitter:Kd,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const lt={init:"dxscrollinit",start:"dxscrollstart",move:"dxscroll",end:"dxscrollend",stop:"dxscrollstop",cancel:"dxscrollcancel"};function ot(i){return(e,t,s,n)=>{const o=n?I(i,n):i;if(t)return m.on(e,o,s,t),()=>{m.off(e,o,t)}}}const wp=ot(Ie),zd=ot("dxactive"),Nd=ot("dxinactive"),Ud=ot("dxhoverstart"),Gd=ot("dxhoverend"),jd=ot("focusin"),qd=ot("focusout"),Yd="dx-widget",Xd=i=>Object.keys(i).reduce(((e,t)=>i[t]?v({},e,{[t==="role"||t==="id"?t:`aria-${t}`]:String(i[t])}):e),{}),Go=v({},Ci,{_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:{},classes:"",name:"",addWidgetClass:!0});class Ii extends As{constructor(e){super(e),this.state={active:!1,focused:!1,hovered:!1},this.refs=null,this.rootElementRef=he(),this.widgetElementRef=he(),this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}componentWillUpdate(e,t,s){super.componentWillUpdate(e,t,s)}getConfig(){return this.context[Ye.id]?this.context[Ye.id]:Ye.defaultValue}createEffects(){return[new P(this.setRootElementRef,[]),new P(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new P(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new P(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new P(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new P(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new P(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new P(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new P(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new P(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new P(this.windowResizeEffect,[this.props.onDimensionChanged]),new P(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new P(this.checkDeprecation,[this.props.height,this.props.width]),new P(this.applyCssTextEffect,[this.props.cssText]),ks()]}updateEffects(){var e,t,s,n,o,r,a,l,d,c,_,u,p;(e=this._effects[1])===null||e===void 0||e.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),(t=this._effects[2])===null||t===void 0||t.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),(s=this._effects[3])===null||s===void 0||s.update([this.props.disabled,this.props.name,this.props.onClick]),(n=this._effects[4])===null||n===void 0||n.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),(o=this._effects[5])===null||o===void 0||o.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),(r=this._effects[6])===null||r===void 0||r.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),(a=this._effects[7])===null||a===void 0||a.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),(l=this._effects[8])===null||l===void 0||l.update([this.props.focusStateEnabled,this.props.onKeyDown]),(d=this._effects[9])===null||d===void 0||d.update([this.props.name,this.props.onDimensionChanged]),(c=this._effects[10])===null||c===void 0||c.update([this.props.onDimensionChanged]),(_=this._effects[11])===null||_===void 0||_.update([this.props.name,this.props.onVisibilityChange]),(u=this._effects[12])===null||u===void 0||u.update([this.props.height,this.props.width]),(p=this._effects[13])===null||p===void 0||p.update([this.props.cssText])}setRootElementRef(){var e;const{rootElementRef:t,onRootElementRendered:s}=this.props;t&&this.widgetElementRef&&(t.current=this.widgetElementRef.current),this!==null&&this!==void 0&&(e=this.widgetElementRef)!==null&&e!==void 0&&e.current&&(s==null||s(this.widgetElementRef.current))}activeEffect(){const{activeStateEnabled:e,activeStateUnit:t,disabled:s,_feedbackShowTimeout:n,onActive:o}=this.props,r=t;if(e&&!s){var a;return zd((a=this.widgetElementRef)===null||a===void 0?void 0:a.current,(l=>{this.setState({active:!0}),o==null||o(l)}),{timeout:n,selector:r},"UIFeedback")}}inactiveEffect(){const{activeStateEnabled:e,activeStateUnit:t,_feedbackHideTimeout:s,onInactive:n}=this.props,o=t;if(e){var r;return Nd((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{this.state.active&&(this.setState({active:!1}),n==null||n(a))}),{timeout:s,selector:o},"UIFeedback")}}clickEffect(){const{name:e,onClick:t,disabled:s}=this.props,n=e;if(t&&!s){var o;return Vi.on((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,t,{namespace:n}),()=>{var r;return Vi.off((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,{namespace:n})}}}focusInEffect(){const{disabled:e,focusStateEnabled:t,name:s,onFocusIn:n}=this.props,o=`${s}Focus`;if(t&&!e){var r;return jd((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{a.isDefaultPrevented()||(this.setState({focused:!0}),n==null||n(a))}),null,o)}}focusOutEffect(){const{focusStateEnabled:e,name:t,onFocusOut:s}=this.props,n=`${t}Focus`;if(e){var o;return qd((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,(r=>{!r.isDefaultPrevented()&&this.state.focused&&(this.setState({focused:!1}),s==null||s(r))}),null,n)}}hoverStartEffect(){const{activeStateUnit:e,hoverStateEnabled:t,disabled:s,onHoverStart:n}=this.props,o=e;if(t&&!s){var r;return Ud((r=this.widgetElementRef)===null||r===void 0?void 0:r.current,(a=>{this.state.active||this.setState({hovered:!0}),n==null||n(a)}),{selector:o},"UIFeedback")}}hoverEndEffect(){const{activeStateUnit:e,hoverStateEnabled:t,onHoverEnd:s}=this.props,n=e;if(t){var o;return Gd((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,(r=>{this.state.hovered&&(this.setState({hovered:!1}),s==null||s(r))}),{selector:n},"UIFeedback")}}keyboardEffect(){const{onKeyDown:e,focusStateEnabled:t}=this.props;if(t&&e){var s,n;const o=Wi.on((s=this.widgetElementRef)===null||s===void 0?void 0:s.current,(n=this.widgetElementRef)===null||n===void 0?void 0:n.current,(r=>e(r)));return()=>Wi.off(o)}}resizeEffect(){const e=`${this.props.name}VisibilityChange`,{onDimensionChanged:t}=this.props;if(t){var s;return Ki.on((s=this.widgetElementRef)===null||s===void 0?void 0:s.current,t,{namespace:e}),()=>{var n;return Ki.off((n=this.widgetElementRef)===null||n===void 0?void 0:n.current,{namespace:e})}}}windowResizeEffect(){const{onDimensionChanged:e}=this.props;if(e)return zi.add(e),()=>{zi.remove(e)}}visibilityEffect(){const{name:e,onVisibilityChange:t}=this.props,s=`${e}VisibilityChange`;if(t){var n;return Ni.on((n=this.widgetElementRef)===null||n===void 0?void 0:n.current,(()=>t(!0)),(()=>t(!1)),{namespace:s}),()=>{var o;return Ni.off((o=this.widgetElementRef)===null||o===void 0?void 0:o.current,{namespace:s})}}}checkDeprecation(){const{width:e,height:t}=this.props;oe(e)&&os.log("W0017","width"),oe(t)&&os.log("W0017","height")}applyCssTextEffect(){var e;const{cssText:t}=this.props;t!==void 0&&t!==""&&(e=this.widgetElementRef)!==null&&e!==void 0&&e.current&&(this.widgetElementRef.current.style.cssText=t)}getShouldRenderConfigProvider(){const{rtlEnabled:e}=this.props;return Fd(e,this.config)}getRtlEnabled(){const{rtlEnabled:e}=this.props;return Ld(e,this.config)}getAttributes(){const{aria:e,disabled:t,focusStateEnabled:s,visible:n}=this.props,o=s&&!t&&this.props.accessKey;return v({},T({},o&&{accessKey:o}),Xd(v({},e,{disabled:t,hidden:!n})),T({},this.getRestAttributes(this.props)))}getRestAttributes(e){const t=v({},e);return["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"].forEach((s=>{delete t[s]})),t}getStyles(){const{width:e,height:t}=this.props,s=this.props.style||{},n=Ys("width",oe(e)?e():e),o=Ys("height",oe(t)?t():t);return v({},s,{height:o??s.height,width:n??s.width})}getCssClasses(){const{classes:e,addWidgetClass:t,className:s,disabled:n,activeStateEnabled:o,focusStateEnabled:r,hoverStateEnabled:a,onVisibilityChange:l,visible:d}=this.props,c=!!r&&!n,_=!!a&&!n,u=!!o&&!n,p={[Yd]:!!t,[String(e)]:!!e,[String(s)]:!!s,"dx-state-disabled":!!n,"dx-state-invisible":!d,"dx-state-focused":!!this.state.focused&&c,"dx-state-active":!!this.state.active&&u,"dx-state-hover":!!this.state.hovered&&_&&!this.state.active,"dx-rtl":!!this.props.rtlEnabled,"dx-visibility-change-handler":!!l};return Hd(p)}getTabIndex(){const{focusStateEnabled:e,disabled:t,tabIndex:s}=this.props;return e&&!t?s:void 0}focus(){var e;sa.trigger((e=this.widgetElementRef)===null||e===void 0?void 0:e.current)}blur(){var e,t;const s=H.getActiveElement((e=this.widgetElementRef)===null||e===void 0?void 0:e.current);((t=this.widgetElementRef)===null||t===void 0?void 0:t.current)===s&&s.blur()}activate(){this.setState({active:!0})}deactivate(){this.setState({active:!1})}render(){const{hint:e,children:t}=this.props,s=Fe(J(1,"div",this.getCssClasses(),t,0,v({},this.getAttributes(),{tabindex:this.getTabIndex(),title:e,style:this.getStyles()}),null,this.widgetElementRef));return this.getShouldRenderConfigProvider()?ge(2,zo,{rtlEnabled:this.getRtlEnabled(),children:s}):s}}Ii.defaultProps=Go;function Ue(i){return Object.keys(i).filter((e=>i[e])).join(" ")}const Jd={position:"left",source:""};class jo extends vt{constructor(e){super(e),this.state={}}get sourceType(){return Cs(this.props.source)}get cssClass(){return this.props.position!=="left"?"dx-icon-right":""}get iconClassName(){const e={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:t}=this.props;return this.sourceType==="dxIcon"?Ue(v({},e,{[`dx-icon-${t}`]:!0})):this.sourceType==="fontIcon"?Ue(v({},e,{[String(t)]:!!t})):this.sourceType==="image"?Ue(e):this.sourceType==="svg"?Ue(v({},e,{"dx-svg-icon":!0})):""}render(){const{iconClassName:e,props:t,sourceType:s}=this,n=Zs(t.iconTemplate);return gt([s==="dxIcon"&&J(1,"i",e),s==="fontIcon"&&J(1,"i",e),s==="image"&&J(1,"img",e,null,1,{alt:"",src:t.source}),n&&J(1,"i",e,n({}),0)],0)}}jo.defaultProps=Jd;const qo=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{useHoldAnimation:e,waveSizeCoefficient:t,isCentered:s,wavesNumber:n}=i;return{waveSizeCoefficient:t||2,isCentered:s||!1,wavesNumber:n||1,durations:sc(e??!0)}},Qd=function(i){const e=qo(i);return{showWave:Xo.bind(this,e),hideWave:Qo.bind(this,e)}},Zd=function(i){let e=i.children(".dx-inkripple");return e.length===0&&(e=h("<div>").addClass("dx-inkripple").appendTo(i)),e},Yo=function(i,e){const t=Zd(h(i)),s=t.children(".dx-inkripple-wave").toArray();for(let n=s.length;n<e;n++){const o=h("<div>").appendTo(t).addClass("dx-inkripple-wave");s.push(o[0])}return h(s)},ec=function(i,e){const t=h(e.element),s=X(t),n=K(t),o=parseInt(Math.sqrt(s*s+n*n)),r=Math.min(4e3,parseInt(o*i.waveSizeCoefficient));let a,l;if(i.isCentered)a=(s-r)/2,l=(n-r)/2;else{const{event:d}=e,c=t.offset(),_=d.pageX-c.left,u=d.pageY-c.top;a=_-r/2,l=u-r/2}return{left:a,top:l,height:r,width:r}};function Xo(i,e){const t=Yo(e.element,i.wavesNumber).eq(e.wave||0);i.hidingTimeout&&clearTimeout(i.hidingTimeout),Jo(t),t.css(ec(i,e)),i.showingTimeout=setTimeout(tc.bind(this,i,t),0)}function tc(i,e){const t=`${i.durations.showingScale}ms`;e.addClass("dx-inkripple-showing").css("transitionDuration",t)}function sc(i){return{showingScale:i?1e3:300,hidingScale:300,hidingOpacity:300}}function Jo(i){i.removeClass("dx-inkripple-hiding").css("transitionDuration","")}function Qo(i,e){i.showingTimeout&&clearTimeout(i.showingTimeout);const t=Yo(e.element,e.wavesNumber).eq(e.wave||0),{durations:s}=i,n=`${s.hidingScale}ms, ${s.hidingOpacity}ms`;t.addClass("dx-inkripple-hiding").removeClass("dx-inkripple-showing").css("transitionDuration",n);const o=Math.max(s.hidingScale,s.hidingOpacity);i.hidingTimeout=setTimeout(Jo.bind(this,t),o)}const ic=["config"],nc={config:{}};class Zo extends vt{constructor(e){super(e),this.__getterCache={},this.state={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return this.__getterCache.getConfig===void 0&&(this.__getterCache.getConfig=qo(this.props.config)),this.__getterCache.getConfig}get restAttributes(){const e=this.props;return nt(e,ic)}hideWave(e){Qo(this.getConfig,e)}showWave(e){Xo(this.getConfig,e)}componentWillUpdate(e){this.props.config!==e.config&&(this.__getterCache.getConfig=void 0)}render(){return Fe(J(1,"div","dx-inkripple",null,1,v({},this.restAttributes)))}}Zo.defaultProps=nc;const oc="dx-button",rc=["outlined","text","contained"],er=["accessKey","activeStateEnabled","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],ac=i=>{const{icon:e,iconPosition:t,stylingMode:s,text:n,type:o}=i,r=s&&rc.includes(s),a={[oc]:!0,[`dx-button-mode-${r?s:"contained"}`]:!0,[`dx-button-${o??"normal"}`]:!0,"dx-button-has-text":!!n,"dx-button-has-icon":!!e,"dx-button-icon-right":t!=="left"};return Ue(a)},lc=(i,e)=>{const t=new Set(e);return Object.keys(i).reduce(((s,n)=>(t.has(n)||(s[n]=i[n]),s)),{})},dc=v({},Ci,{activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:{}}),tr=ia([{device:()=>$.real().deviceType==="desktop"&&!$.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>He(j()),options:{useInkRipple:!0}}]);let us=class extends As{constructor(e){super(e),this.contentRef=he(),this.inkRippleRef=he(),this.submitInputRef=he(),this.widgetRef=he(),this.__getterCache={},this.state={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[new P(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),ks()]}updateEffects(){var e;(e=this._effects[0])===null||e===void 0||e.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:e,useSubmitBehavior:t}=this.props,s=this.submitInputRef.current;if(t&&e)return Ui.on(s,(n=>e({event:n,submitInput:s})),{namespace:"UIFeedback"}),()=>Ui.off(s,{namespace:"UIFeedback"})}onActive(e){if(this.props.useInkRipple){var t;(t=this.inkRippleRef.current)===null||t===void 0||t.showWave({element:this.contentRef.current,event:e})}}onInactive(e){if(this.props.useInkRipple){var t;(t=this.inkRippleRef.current)===null||t===void 0||t.hideWave({element:this.contentRef.current,event:e})}}onWidgetClick(e){const{onClick:t,useSubmitBehavior:s}=this.props;if(t==null||t({event:e}),s){var n;(n=this.submitInputRef.current)===null||n===void 0||n.click()}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:s,originalEvent:n,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(s==="space"||o==="space"||s==="enter"||o==="enter")&&(n.preventDefault(),this.onWidgetClick(n))}get aria(){const{icon:e,text:t}=this.props;let s=t??"";if(!t&&e)switch(Cs(e)){case"image":{const r=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;s=!e.includes("base64")&&r.test(e)?e.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":s=k.format(Yn(e,!0))||e;break;case"fontIcon":s=e;break;case"svg":{var n;s=((n=/<title>(.*?)<\/title>/.exec(e))===null||n===void 0?void 0:n[1])??"";break}}return v({role:"button"},s?{label:s}:{})}get cssClasses(){return ac(this.props)}get iconSource(){return this.props.icon??""}get inkRippleConfig(){if(this.__getterCache.inkRippleConfig===void 0){const{icon:e,text:t}=this.props;this.__getterCache.inkRippleConfig=!t&&e?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}}return this.__getterCache.inkRippleConfig}get buttonTemplateData(){const{icon:e,text:t,templateData:s}=this.props;return v({icon:e,text:t},s)}get restAttributes(){const e=[...er,"children"];return lc(this.props,e)}focus(){var e;(e=this.widgetRef.current)===null||e===void 0||e.focus()}activate(){var e;(e=this.widgetRef.current)===null||e===void 0||e.activate()}deactivate(){var e;(e=this.widgetRef.current)===null||e===void 0||e.deactivate()}componentWillUpdate(e){super.componentWillUpdate(),(this.props.icon!==e.icon||this.props.text!==e.text)&&(this.__getterCache.inkRippleConfig=void 0)}render(){const{children:e,iconPosition:t,text:s}=this.props,n=Zs(this.props.template),o=Zs(this.props.iconTemplate),r=!this.props.template&&!e&&s!=="",a=t==="left",l=!n&&!e&&(this.iconSource||o)&&ge(2,jo,{source:this.iconSource,position:t,iconTemplate:o});return Fe(ge(2,Ii,v({accessKey:this.props.accessKey,activeStateEnabled:this.props.activeStateEnabled,aria:this.aria,className:this.props.className,classes:this.cssClasses,disabled:this.props.disabled,focusStateEnabled:this.props.focusStateEnabled,height:this.props.height,hint:this.props.hint,hoverStateEnabled:this.props.hoverStateEnabled,onActive:this.onActive,onClick:this.onWidgetClick,onInactive:this.onInactive,onKeyDown:this.keyDown,rtlEnabled:this.props.rtlEnabled,tabIndex:this.props.tabIndex,visible:this.props.visible,width:this.props.width},this.restAttributes,{children:J(1,"div","dx-button-content",[n?n({data:this.buttonTemplateData}):e,a&&l,r&&J(1,"span","dx-button-text",s,0),!a&&l,this.props.useSubmitBehavior&&J(64,"input","dx-button-submit-input",null,1,{type:"submit",tabindex:-1},null,this.submitInputRef),this.props.useInkRipple&&ge(2,Zo,{config:this.inkRippleConfig},null,this.inkRippleRef)],0,null,null,this.contentRef)}),null,this.widgetRef))}};us.defaultProps=v({},dc,rs(tr));const gn=[];function cc(i){gn.push(i),us.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(us.defaultProps),Object.getOwnPropertyDescriptors(rs(tr)),Object.getOwnPropertyDescriptors(rs(gn))))}class it extends $s{get _validationGroupConfig(){return ls.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const e=super.getProps();return e.onClick=s=>{let{event:n}=s;this._clickAction({event:n,validationGroup:this._validationGroupConfig})},e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),Cs(e.icon)==="svg"&&(e.iconTemplate=this._createTemplateComponent((()=>e.icon))),e}get viewRef(){return super.viewRef}get _templatesInfo(){return{template:"content"}}_toggleActiveState(e,t){if(t){var s;(s=this.viewRef)===null||s===void 0||s.activate()}else{var n;(n=this.viewRef)===null||n===void 0||n.deactivate()}}_getSubmitAction(){let e=!0,t="valid";return this._createAction((s=>{let{event:n,submitInput:o}=s;if(e){const r=this._validationGroupConfig;if(r!==void 0&&r!==""){const a=r.validate();t=a.status,a.status==="pending"&&(e=!1,this.option("disabled",!0),a.complete.then((l=>{let{status:d}=l;this.option("disabled",!1),t=d,t==="valid"&&o.click(),e=!0})))}}t!=="valid"&&n.preventDefault(),n.stopPropagation()}))}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const e=this.$element().find(".dx-button-content").first(),t=e.children().filter(".dx-template-wrapper"),s=e.children().filter(".dx-button-submit-input");t.length&&(t.addClass("dx-button-content"),t.append(s),e.replaceWith(t))}_patchOptionValues(e){return super._patchOptionValues(v({},e,{templateData:e._templateData}))}_findGroup(){const e=this.$element(),t=this.option("validationGroup");return t!==void 0&&t!==""?t:ls.findGroup(e,this._modelByElement(e))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(e){e.name==="onClick"&&(this._clickAction=this._createClickAction()),super._optionChanged(e)}focus(){var e;(e=this.viewRef)===null||e===void 0||e.focus()}activate(){var e;(e=this.viewRef)===null||e===void 0||e.activate()}deactivate(){var e;(e=this.viewRef)===null||e===void 0||e.deactivate()}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:er}}get _viewComponent(){return us}}ie("dxButton",it);it.defaultOptions=cc;const{abs:vn}=Math,hc=na.inherit({start(i){this._startEventData=U(i),this._startTimer(i)},_startTimer(i){const e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout((()=>{this._requestAccept(i),this._fireEvent("dxhold",i,{target:i.target}),this._forgetAccept()}),e)},move(i){this._touchWasMoved(i)&&this._cancel(i)},_touchWasMoved(i){const e=yt(this._startEventData,U(i));return vn(e.x)>5||vn(e.y)>5},end(){this._stopTimer()},_stopTimer(){clearTimeout(this._holdTimer)},cancel(){this._stopTimer()},dispose(){this._stopTimer()}});di({emitter:hc,bubble:!0,events:["dxhold"]});const sr={name:"dxhold"},uc=I("contextmenu","dxContexMenu"),pc=I(sr.name,"dxContexMenu"),_c=R.inherit({setup(i){const e=h(i);m.on(e,uc,this._contextMenuHandler.bind(this)),(Ze.touch||$.isSimulator())&&m.on(e,pc,this._holdHandler.bind(this))},_holdHandler(i){eo(i)&&!$.isSimulator()||this._fireContextMenu(i)},_contextMenuHandler(i){this._fireContextMenu(i)},_fireContextMenu:i=>oa({type:"dxcontextmenu",originalEvent:i}),teardown(i){m.off(i,".dxContexMenu")}});ra("dxcontextmenu",new _c);const fc="dxcontextmenu",mc=(i,e,t)=>{const s=(()=>{let n;return o=>{n!==o&&(t(o,n),n=o)}})();return{dispose:i(e,s),force(){s(e())}}};class ps{constructor(e,t,s){this._$element=e,this._options=t,this._rawData=s,aa(e,this,this._dispose),this._render()}_render(){const e=h("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()}_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))}_startWatcher(e,t){const s=this._rawData,n=this._options.fieldGetter(e),o=mc(this._options.watchMethod(),(()=>n(s)),((r,a)=>{this._dirty=!0,t(r,a)}));this._watchers.push(o)}setDataField(){return this._dirty=!1,x(this._watchers,((e,t)=>{t.force()})),this._dirty}_renderDisabled(e,t){this._$element.toggleClass("dx-state-disabled",!!e),this._$element.attr("aria-disabled",!!e),this._updateOwnerFocus(e)}_updateOwnerFocus(e){const t=this._options.owner;t&&e&&t._resetItemFocus(this._$element)}_renderVisible(e,t){this._$element.toggleClass("dx-state-invisible",e!==void 0&&!e)}_dispose(){x(this._watchers,((e,t)=>{t.dispose()}))}static getInstance(e){return la(e,this)}static isClickableItem(e){return G(e)&&"onClick"in e}}class gc{constructor(e){this._collectionWidget=e}_getItems(){const{items:e=[]}=this._collectionWidget.option();return e}getIndexByItemData(e){return R.abstract()}getItemDataByIndex(e){return R.abstract()}getKeysByItems(e){return R.abstract()}getItemsByKeys(e,t){return R.abstract()}itemsGetter(){return R.abstract()}getKeyByIndex(e){const t=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(t)])[0]}_equalKeys(e,t){return this._collectionWidget._isKeySpecified()?ri(e,t):e===t}beginCache(){this._cache={}}endCache(){this._cache=null}getIndexByKey(e){return R.abstract()}getNormalizedIndex(e){return this._isNode(e)?this._getNormalizedItemIndex(e):this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))}getIndex(e){return this._isNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this.getIndexByItemData(e)}getItemElement(e){if(this._isNode(e))return h(e);if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));const t=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(t)}_isNode(e){return H.isNode(e&&qn(e)?e.get(0):e)}deleteItemAtIndex(e){return R.abstract()}itemPlacementFunc(e,t){return this._itemsFromSameParent(e,t)&&e<t?"after":"before"}moveItemAtIndexToIndex(e,t){return R.abstract()}_isNormalizedItemIndex(e){return typeof e=="number"&&Math.round(e)===e}_isItemIndex(e){return R.abstract()}_getNormalizedItemIndex(e){return R.abstract()}_normalizeItemIndex(e){return R.abstract()}_denormalizeItemIndex(e){return R.abstract()}_getItemByNormalizedIndex(e){return R.abstract()}_itemsFromSameParent(e,t){return R.abstract()}}class ir extends gc{_getPlainItems(){return this._getItems()??[]}getIndexByItemData(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);return t?this.getIndexByKey(t(e)):this._getPlainItems().indexOf(e)}getItemDataByIndex(e){return this._getPlainItems()[e]}deleteItemAtIndex(e){this._getPlainItems().splice(e,1)}itemsGetter(){return this._getPlainItems()}getKeysByItems(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);let s=e;return t&&(s=e.map((n=>t(n)))),s}getIndexByKey(e){const t=this._cache,s=(t==null?void 0:t.keys)??this.getKeysByItems(this._getPlainItems());if(t&&!t.keys&&(t.keys=s),typeof e=="object"){for(let n=0;n<s.length;n+=1)if(this._equalKeys(e,s[n]))return n}else return s.indexOf(e);return-1}getItemsByKeys(e,t){return(t??e).slice()}moveItemAtIndexToIndex(e,t){const s=this._getPlainItems(),n=s[e];s.splice(e,1),s.splice(t,0,n)}_isItemIndex(e){return this._isNormalizedItemIndex(e)}_getNormalizedItemIndex(e){return this._collectionWidget._itemElements().index(e)}_normalizeItemIndex(e){return e}_denormalizeItemIndex(e){return e}_getItemByNormalizedIndex(e){return e>-1?this._collectionWidget._itemElements().eq(e):null}_itemsFromSameParent(e,t){return!0}}const vc=function(i,e,t,s,n){let o;const r=((a,l,d)=>l((()=>a),d))(i,e,(a=>{if(o&&o(),qr(a)){n(a);return}o=(function(l,d,c,_,u){const p={},g=c.slice(),f=c.map((C=>{const b=_[C];return d(b?()=>b(l):()=>l[C],(w=>{if(p[C]=w,g.length){const E=g.indexOf(C);E>=0&&g.splice(E,1)}g.length||u(p)}))}));return function(){f.forEach((C=>C()))}})(a,e,t,s,n)}));return function(){o&&o(),r&&r()}};class yi extends da{constructor(e,t,s,n){super(),this._render=e,this._fields=t,this._fieldsMap=n||{},this._watchMethod=s}_renderCore(e){const t=h(e.container),s=vc(e.model,this._watchMethod,this._fields,this._fieldsMap,(n=>{t.empty(),this._render(t,n,e.model)}));return m.on(t,ca,s),t.contents()}}const jt="dx-item",bc="dx-empty-collection",Cc=/^([^.]+\[\d+\]\.)+([\w.]+)$/;let Si=class extends bs{_supportedKeys(){const e=(t,s)=>{ft(s)||(s.preventDefault(),s.stopPropagation(),this._moveFocus(t,s))};return v({},super._supportedKeys(),{space:t=>{t.preventDefault(),this._enterKeyHandler(t)},enter:this._enterKeyHandler,leftArrow:e.bind(this,"left"),rightArrow:e.bind(this,"right"),upArrow:e.bind(this,"up"),downArrow:e.bind(this,"down"),pageUp:e.bind(this,"up"),pageDown:e.bind(this,"down"),home:e.bind(this,"first"),end:e.bind(this,"last")})}_getHandlerExtendedParams(e,t){return T({},e,{target:t.get(0),currentTarget:t.get(0)})}_enterKeyHandler(e){const{focusedElement:t}=this.option(),s=h(t);if(!s.length)return;const n=this._getItemData(s);if(ps.isClickableItem(n)){const o={event:e};this._itemEventHandlerByHandler(s,n.onClick,o)}this._itemClickHandler(this._getHandlerExtendedParams(e,s))}_getDefaultOptions(){return v({},super._getDefaultOptions(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:k.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusedElement:null,displayExpr:void 0,disabledExpr:e=>e?e.disabled:void 0,visibleExpr:e=>e?e.visible:void 0})}_init(){this._compileDisplayGetter(),this._initDataController(),super._init(),this._activeStateUnit=`.${jt}`,this._cleanRenderedItems(),this._refreshDataSource()}_compileDisplayGetter(){const{displayExpr:e}=this.option();this._displayGetter=e?Qe(e):void 0}_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),super._initTemplates()}_getAnonymousTemplateName(){return"item"}_initDefaultItemTemplate(){const e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new yi(((t,s)=>{q(s)?this._prepareDefaultItemTemplate(s,t):(e&&oe(e.text)&&(s=e.text(s)),t.text(String(fe(s,""))))}),this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})}_getBindableFields(){return["text","html"]}_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}}_prepareDefaultItemTemplate(e,t){const{text:s,html:n}=e;S(s)&&t.text(s),S(n)&&t.html(n)}_initItemsFromMarkup(){const e=ha(this.$element(),"dxItem"),{items:t=[]}=this.option();if(!e.length||t.length)return;const s=e.map((n=>{let{element:o,options:r}=n;return/\S/.test(o.innerHTML)&&!r.template?r.template=this._prepareItemTemplate(o):h(o).remove(),r}));this.option("items",s)}_prepareItemTemplate(e){const t=`tmpl-${new Q}`,s=h(e).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(t,s),t}_dataSourceOptions(){return{paginate:!1}}_cleanRenderedItems(){this._renderedItemsCount=0}_focusTarget(){return this.$element()}_focusInHandler(e){if(super._focusInHandler(e),!this._isFocusTarget(e.target))return;const{focusedElement:t}=this.option(),s=h(t);if(s.length)this._shouldSkipSelectOnFocus=!0,this._setFocusedItem(s),this._shouldSkipSelectOnFocus=!1;else{const n=this._getActiveItem();n.length&&this.option("focusedElement",O(n))}}_focusOutHandler(e){super._focusOutHandler(e);const{focusedElement:t}=this.option(),s=h(t);this._updateFocusedItemState(s,!1)}_findActiveTarget(e){return e.find(this._activeStateUnit)}_getActiveItem(e){const{focusedElement:t}=this.option(),s=h(t);return s.length?s:this._determineFocusedElement(e)}_determineFocusedElement(e){let t=this._getFocusedElementIndex();const s=this._getActiveElement(),n=s.length-1;return t<0&&(t=e?n:0),s.eq(t)}_getFocusedElementIndex(){return 0}_moveFocus(e,t){const s=this._getAvailableItems();let n=h();switch(e){case"pageup":case"up":n=this._prevItem(s);break;case"pagedown":case"down":n=this._nextItem(s);break;case"right":{const{rtlEnabled:o}=this.option();n=o?this._prevItem(s):this._nextItem(s);break}case"left":{const{rtlEnabled:o}=this.option();n=o?this._nextItem(s):this._prevItem(s);break}case"first":n=s.first();break;case"last":n=s.last();break;default:return!1}n.length!==0&&this.option("focusedElement",O(n))}_getVisibleItems(e){return(e??this._itemElements()).filter(":visible")}_getAvailableItems(e){return this._getVisibleItems(e)}_prevItem(e){const t=this._getActiveItem(),s=e.index(t),n=e.last();let o=h(e[s-1]);const{loopItemFocus:r}=this.option();return o.length===0&&r&&(o=n),o}_nextItem(e){const t=this._getActiveItem(!0),s=e.index(t),n=e.first();let o=h(e[s+1]);const{loopItemFocus:r}=this.option();return o.length===0&&r&&(o=n),o}_selectFocusedItem(e){this.selectItem(e)}_updateFocusedItemState(e,t,s){const n=h(e);n.length&&(this._refreshActiveDescendant(),this._refreshItemId(n,s),this._toggleFocusClass(t,n)),this._updateParentActiveDescendant()}_getElementClassToSkipRefreshId(){return""}_shouldSkipRefreshId(e){const t=this._getElementClassToSkipRefreshId();return h(e).hasClass(t)}_refreshActiveDescendant(e){const{focusedElement:t}=this.option();if(S(t)){const n=this._shouldSkipRefreshId(t)?h(t).attr("id"):this.getFocusedItemId();this.setAria("activedescendant",n,e);return}this.setAria("activedescendant",null,e)}_refreshItemId(e,t){const{focusedElement:s}=this.option();this._shouldSkipRefreshId(e)||(!t&&s?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e))}_isDisabled(e){return e&&h(e).attr("aria-disabled")==="true"}_setFocusedItem(e){if(!(e!=null&&e.length))return;this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:t}=this.option(),s=this._isDisabled(e);t&&!s&&!this._shouldSkipSelectOnFocus&&this._selectFocusedItem(e)}_findItemElementByItem(e){let t=h();const s=this._itemDataKey();return this.itemElements().each(((n,o)=>{const r=h(o);return r.data(s)===e?(t=r,!1):!0})),t}_getIndexByItem(e){const{items:t}=this.option();return t.indexOf(e)}_itemOptionChanged(e,t,s,n){const o=this._findItemElementByItem(e);if(!o.length)return;this.constructor.ItemClass.getInstance(o).setDataField(t,s)||this._refreshItem(o,e),t==="disabled"&&s&&this._resetItemFocus(o)}_resetItemFocus(e){const{focusedElement:t}=this.option();e.is(t)&&this._resetFocusedElement()}_resetFocusedElement(){this.option("focusedElement",null)}_refreshItem(e,t){const s=this._getItemData(e),n=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+n,s,null,e)}_updateParentActiveDescendant(){}_optionChanged(e){const{name:t,value:s,previousValue:n,fullName:o}=e;if(t==="items"){const r=o.match(Cc);if(r!=null&&r.length){const a=r[r.length-1],l=o.replace(`.${a}`,""),d=this.option(l);this._itemOptionChanged(d,a,s,n);return}}switch(t){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(n,!1,!0),this._setFocusedItem(h(s));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:super._optionChanged(e)}}_invalidate(){this._resetFocusedElement(),super._invalidate()}_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()}_expectNextPageLoading(){this._startIndexForAppendedItems=0}_expectLastItemLoading(){this._startIndexForAppendedItems=-1}_forgetNextPageLoading(){this._startIndexForAppendedItems=null}_dataSourceChangedHandler(e,t){const{items:s}=this.option();this._initialized&&s&&this._shouldAppendItems()?(this._renderedItemsCount=s.length,(!this._isLastPage()||this._startIndexForAppendedItems!==-1)&&(this.option().items=s.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())}_refreshContent(){this._prepareContent(),this._renderContent()}_dataSourceLoadErrorHandler(){this._forgetNextPageLoading();const{items:e}=this.option();this.option("items",e)}_shouldAppendItems(){return this._startIndexForAppendedItems!=null&&this._allowDynamicItemsAppend()}_allowDynamicItemsAppend(){return!1}_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()}_cleanItemContainer(){h(this._itemContainer()).empty()}_dispose(){super._dispose(),clearTimeout(this._itemFocusTimeout)}_refresh(){this._cleanRenderedItems(),super._refresh()}_itemContainer(e,t){return this.$element()}_itemClass(){return jt}_itemContentClass(){return`${this._itemClass()}-content`}_itemResponseWaitClass(){return"dx-item-response-wait"}_itemSelector(){return`.${this._itemClass()}`}_itemDataKey(){return"dxItemData"}_itemIndexKey(){return"dxItemIndex"}_itemElements(){return this._itemContainer().find(this._itemSelector())}_initMarkup(){super._initMarkup(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()}_prepareContent(){Et((()=>{this._renderContentImpl()}))()}_renderContent(){this._fireContentReadyAction()}_render(){super._render(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()}_getPointerEvent(){return le.down}_attachClickEvent(){const e=this._itemSelector(),t=le.down,s=le.up,n=I(Ie,this.NAME),o=I(t,this.NAME),r=I(s,this.NAME),a=new Gi((d=>{const{event:c}=d;this._itemPointerHandler(c)})),l=new Gi((d=>{const{event:c}=d;this._itemPointerUpHandler(c)}));m.off(this._itemContainer(),n,e),m.off(this._itemContainer(),o,e),m.off(this._itemContainer(),r,e),m.on(this._itemContainer(),n,e,(d=>this._itemClickHandler(d))),m.on(this._itemContainer(),o,e,(d=>{a.execute({element:h(d.target),event:d})})),m.on(this._itemContainer(),r,e,(d=>{l.execute({element:h(d.target),event:d})}))}_itemClickHandler(e,t,s){this._itemDXEventHandler(e,"onItemClick",t,s)}_handleItemFocus(e){if(e.isDefaultPrevented())return;const t=h(e.target),s=t.closest(this._itemElements()),n=this._closestFocusable(t);s.length&&this._isFocusTarget(n==null?void 0:n.get(0))&&(this._shouldSkipSelectOnFocus=!0,this.option("focusedElement",O(s)),this._shouldSkipSelectOnFocus=!1)}_itemPointerHandler(e){const{focusStateEnabled:t}=this.option();t&&(this._itemFocusHandler=()=>{clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=void 0,this._handleItemFocus(e)},this._itemFocusTimeout=setTimeout((()=>{this._forcePointerDownFocus()})))}_itemPointerUpHandler(e){}_closestFocusable(e){if(e.is(ji))return e;let t=e.parent();for(;t.length&&!H.isDocument(t.get(0))&&!H.isDocumentFragment(t.get(0));){if(t.is(ji))return t;t=t.parent()}}_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()}_updateFocusState(e,t){super._updateFocusState(e,t),this._forcePointerDownFocus()}_attachHoldEvent(){const e=this._itemContainer(),t=this._itemSelector(),s=I(sr.name,this.NAME);m.off(e,s,t),m.on(e,s,t,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))}_getHoldTimeout(){const{itemHoldTimeout:e}=this.option();return e}_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")}_itemHoldHandler(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0}_attachContextMenuEvent(){const e=this._itemContainer(),t=this._itemSelector(),s=I(fc,this.NAME);m.off(e,s,t),m.on(e,s,t,this._itemContextMenuHandler.bind(this))}_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")}_itemContextMenuHandler(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0}_renderContentImpl(){const{items:e}=this.option(),t=e??[];this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t)}_renderItems(e){e.length&&x(e,((t,s)=>{this._renderItem(this._renderedItemsCount+t,s)})),this._renderEmptyMessage()}_getItemsContainer(){return this._itemContainer()}_setAttributes(e){const{_itemAttributes:t}=this.option(),s=v({},t),{class:n}=s;if(n){const o=e.get(0).className;s.class=[o,n].join(" ")}e.attr(s)}_renderItem(e,t,s,n){const o=(e==null?void 0:e.item)??e,r=s??this._getItemsContainer(),a=this._renderItemFrame(o,t,r,n);this._setElementData(a,t,o),this._setAttributes(a),this._attachItemClickEvent(t,a);const l=this._getItemContent(a),{itemTemplate:d}=this.option(),c=this._renderItemContent({index:o,itemData:t,container:O(l),contentClass:this._itemContentClass(),defaultTemplateName:d});return ee(c).done((_=>{this._postprocessRenderItem({itemElement:a,itemContent:_,itemData:t,itemIndex:o}),this._executeItemRenderAction(e,t,O(a))})),a}_getItemContent(e){const t=e.find(".dx-item-content-placeholder");return t.removeClass("dx-item-content-placeholder"),t}_attachItemClickEvent(e,t){!e||!ps.isClickableItem(e)||m.on(t,Ie,(s=>{const n={event:s};this._itemEventHandlerByHandler(t,e.onClick,n)}))}_renderItemContent(e){const t=this._getItemTemplateName(e),s=this._getTemplate(t);this._addItemContentClasses(e);const n=h(this._createItemByTemplate(s,e));return n.hasClass("dx-template-wrapper")?this._renderItemContentByNode(e,n):e.container}_renderItemContentByNode(e,t){return h(e.container).replaceWith(t),e.container=O(t),this._addItemContentClasses(e),t}_addItemContentClasses(e){const t=[jt+"-content",e.contentClass];h(e.container).addClass(t.join(" "))}_appendItemToContainer(e,t,s){t.appendTo(e)}_renderItemFrame(e,t,s,n){const o=h("<div>");new this.constructor.ItemClass(o,this._itemOptions(),t||{}),n!=null&&n.length?n.replaceWith(o):this._appendItemToContainer.call(this,s,o,e);const{useItemTextAsTitle:r}=this.option();if(r){const a=this._displayGetter?this._displayGetter(t):t;o.attr("title",a)}return o}_itemOptions(){return{watchMethod:()=>this.option("integrationOptions.watchMethod"),owner:this,fieldGetter:e=>{const t=this.option(`${e}Expr`);return Qe(t)}}}_postprocessRenderItem(e){}_executeItemRenderAction(e,t,s){this._getItemRenderAction()({itemElement:s,itemIndex:e,itemData:t})}_setElementData(e,t,s){e.addClass([jt,this._itemClass()].join(" ")).data(this._itemDataKey(),t).data(this._itemIndexKey(),s)}_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"}),this._itemRenderAction}_getItemRenderAction(){return this._itemRenderAction??this._createItemRenderAction()}_getItemTemplateName(e){const t=e.itemData,{itemTemplateProperty:s}=this.option(),n=e.templateProperty??s;return(t&&n?t[n]:void 0)||e.defaultTemplateName}_createItemByTemplate(e,t){const{itemData:s,container:n,index:o}=t;return e.render({model:s,container:n,index:o,onRendered:this._onItemTemplateRendered(e,t)})}_onItemTemplateRendered(e,t){return()=>{}}_emptyMessageContainer(){return this._itemContainer()}_renderEmptyMessage(e){const{items:t=[],noDataText:s}=this.option(),n=e??t,o=!s||(n==null?void 0:n.length)||this._dataController.isLoading();if(o&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),!o){this._$noData=this._$noData??h("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer());const{encodeNoDataText:r}=this.option();r?this._$noData.text(s):this._$noData.html(s)}this.$element().toggleClass(bc,!o)}_itemDXEventHandler(e,t,s,n){this._itemEventHandler(e.target,t,T(s,{event:e}),n)}_itemEventHandler(e,t,s,n){const o=this._createActionByOption(t,v({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,s)}_itemEventHandlerByHandler(e,t,s,n){const o=this._createAction(t,T({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,s)}_itemEventHandlerImpl(e,t,s){const n=this._closestItemElement(h(e)),o=T({},s);return t(T(s,this._extendActionArgs(n),o))}_extendActionArgs(e){return{itemElement:O(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}}_closestItemElement(e){return h(e).closest(this._itemSelector())}_getItemData(e){return h(e).data(this._itemDataKey())}_getSummaryItemsSize(e,t,s){let n=0;return t&&x(t,((o,r)=>{e==="width"?n+=X(r,s??!1):e==="height"&&(n+=K(r,s??!1))})),n}getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new Q}`),this._focusedItemId}itemElements(){return this._itemElements()}itemsContainer(){return this._itemContainer()}};Si.ItemClass=ps;Si.include(ro);class nr{constructor(e){this._lastSelectAllPageDeferred=y().reject(),this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,t){this.options[e]=t}onSelectionChanging(){const{selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,onSelectionChanging:a=L}=this.options,l={selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,cancel:!1};return a(l),l.cancel}_callCallbackIfNotCanceled(e,t){const s=this.onSelectionChanging();Xn(s)?s.then((n=>{n?t():e()})).catch((()=>{e()})):s?t():e()}onSelectionChanged(){const{selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r,onSelectionChanged:a=L}=this.options;this._clearItemKeys(),a({selectedItems:e,selectedItemKeys:t,addedItemKeys:s,removedItemKeys:n,addedItems:o,removedItems:r})}equalKeys(e,t){return this.options.equalByReference&&G(e)&&G(t)?e===t:ri(e,t)}getSelectableItems(e){return e.filter((t=>!(t!=null&&t.disabled)))}_clearSelection(e,t,s,n){let o=e||[];return o=Array.isArray(o)?o:[o],this.validate(),this.selectedItemKeys(o,t,s,n)}_removeTemplateProperty(e){return Array.isArray(e)?e.map((t=>this._removeTemplateProperty(t))):(G(e)&&delete e.template,e)}_getQueryParams(){const{sensitivity:e}=this.options;if(e)return{langParams:{collatorOptions:{sensitivity:e}}}}_loadFilteredData(e,t,s,n){const o=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,r=this.options.maxFilterLengthInRequest&&o>this.options.maxFilterLengthInRequest,a=y(),l=this._getQueryParams(),d=v({filter:r?void 0:e,select:r?this.options.dataFields():s||this.options.dataFields()},l);return e&&Array.isArray(e)&&e.length===0?a.resolve([]):this.options.load(d).done((c=>{let _=!Array.isArray(c)&&q(c)?c.data:c;t&&!n?_=_.filter(t):r&&(_=tt(_).filter(e).toArray()),a.resolve(_)})).fail((c=>{a.reject(c)})),a}updateSelectedItemKeyHash(e){for(let t=0;t<e.length;t+=1){const s=At(e[t]);G(s)||(this.options.keyHashIndices[s]=this.options.keyHashIndices[s]||[],this.options.keyHashIndices[s].push(t))}}_isAnyItemSelected(e){if(!e.find((t=>this.options.isItemSelected(t))))return!1}_getFullSelectAllState(){const e=this.options.plainItems(),{filter:t}=this.options,s=t();let n=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter((a=>!(a!=null&&a.disabled)));s&&(n=tt(n).filter(s).toArray());const o=n.length,r=e.length-this.getSelectableItems(e).length;if(!o)return this._isAnyItemSelected(e);if(o>=this.options.totalCount()-r)return!0}_getVisibleSelectAllState(){const e=this.getSelectableItems(this.options.plainItems());let t=!1,s=!1;return e.forEach((n=>{const o=this.options.getItemData(n),r=this.options.keyOf(o);this.options.isSelectableItem(n)&&(this.isItemKeySelected(r)?t=!0:s=!0)})),t?s?void 0:!0:!1}selectedItemKeys(e,t,s,n,o,r){throw new Error("selectedItemKeys method should be overriden")}isItemKeySelected(e){throw new Error("isItemKeySelected method should be overriden")}isItemDataSelected(e){throw new Error("isItemKeySelected method should be overriden")}addSelectedItem(e,t,s){throw new Error("addSelectedItem method should be overriden")}removeSelectedItem(e){throw new Error("removeSelectedItem method should be overriden")}_selectAllPlainItems(e){this.getSelectableItems(this.options.plainItems()).forEach((s=>{if(this.options.isSelectableItem(s)){const n=this.options.getItemData(s),o=this.options.keyOf(n),r=this.isItemKeySelected(o);!r&&!e&&this.addSelectedItem(o,n),r&&e&&this.removeSelectedItem(o)}}))}}class Ic extends nr{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const e=y(),t=this.options.key(),s=pt(t)?[t]:t,n=o=>this.options.keyOf(o);return this._loadFilteredData(this.options.selectionFilter,null,s).done((o=>{const r=(Array.isArray(o)?o:[]).map(n);e.resolve(r)})).fail((o=>{e.reject(o)})),e.promise()}selectedItemKeys(e,t,s,n){if(n){const o=this.options.filter();!o||JSON.stringify(o)===JSON.stringify(this.options.selectionFilter)&&s?this._setOption("selectionFilter",s?[]:null):this._addSelectionFilter(s,o,n)}else t||this._setOption("selectionFilter",[]),e.forEach((o=>{s?this.removeSelectedItem(o):this.addSelectedItem(o,n,!t)}));return this.onSelectionChanged(),y().resolve()}setSelectedItems(e){this._setOption("selectionFilter",null),e.forEach((t=>{this.addSelectedItem(t)}))}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){const{selectionFilter:t}=this.options;if(!t)return!0;const s=this._getQueryParams();return!!tt([e],s).filter(t).toArray().length}_getKeyExpr(){const e=this.options.key();return Array.isArray(e)&&e.length===1?e[0]:e}_normalizeKey(e){const t=this.options.key();return Array.isArray(t)&&t.length===1?e[t[0]]:e}_getFilterByKey(e){const t=this._getKeyExpr();let s=[t,"=",this._normalizeKey(e)];if(Array.isArray(t)){s=[];for(let n=0;n<t.length;n+=1)s.push([t[n],"=",e[t[n]]]),n!==t.length-1&&s.push("and")}return s}addSelectedItem(e,t,s){const n=this._getFilterByKey(e);this._addSelectionFilter(!1,n,t,s)}removeSelectedItem(e){const t=this._getFilterByKey(e);this._addSelectionFilter(!0,t)}validate(){const{key:e}=this.options;if(e&&e()===void 0)throw te.Error("E1042","Deferred selection")}_findSubFilter(e,t){if(!e)return-1;const s=JSON.stringify(t);for(let n=0;n<e.length;n+=1){const o=e[n];if(o&&JSON.stringify(o)===s)return n}return-1}_isLastSubFilter(e,t){return e&&t?this._findSubFilter(e,t)===e.length-1||this._findSubFilter([e],t)===0:!1}_addFilterOperator(e,t){let s=e;return s.length>1&&pt(s[1])&&s[1]!==t&&(s=[s]),Array.isArray(s)&&s.length&&s.push(t),s}_denormalizeFilter(e){let t=e;return t&&pt(t[0])&&(t=[t]),t}_isOnlyNegativeFiltersLeft(e){return e.every(((t,s)=>s%2===0?Array.isArray(t)&&t[0]==="!":t==="and"))}_addSelectionFilter(e,t,s,n){var o;const r=e?"and":"or";let a=!0,l=this.options.selectionFilter||[];if(l=this._denormalizeFilter(l),(o=l)!==null&&o!==void 0&&o.length&&!n){const d=this._removeSameFilter(l,t,e,s),c=this._removeSameFilter(l,t,!e);e&&(d!==-1||c!==-1)&&this._isOnlyNegativeFiltersLeft(l)&&(l=[]);const u=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(l,c);a=!!(t!=null&&t.length)&&!u}if(a&&(l=this._addFilterOperator(l,r),Array.isArray(l)&&t)){const d=e?["!",t]:t;l.push(d)}l=this._normalizeFilter(l),this._setOption("selectionFilter",!e&&!l.length?null:l)}_normalizeFilter(e){let t=e;return t&&t.length===1&&([t]=t),t}_removeFilterByIndex(e,t,s){const n=e[1];t>0?e.splice(t-1,2):e.splice(t,2),s&&n==="and"&&e.splice(0,e.length)}_isSimpleKeyFilter(e,t){return(e==null?void 0:e.length)===3&&e[0]===t&&e[1]==="="}_isKeyFilter(e){if((e==null?void 0:e.length)===2&&(e==null?void 0:e[0])==="!")return this._isKeyFilter(e[1]);const t=this._getKeyExpr();if(Array.isArray(t)){if((e==null?void 0:e.length)!==2*t.length-1)return!1;for(let s=0;s<t.length;s+=1)if(s>0&&(e==null?void 0:e[2*s-1])!=="and"||!this._isSimpleKeyFilter(e==null?void 0:e[2*s],t[s]))return!1;return!0}return this._isSimpleKeyFilter(e,t)}_hasKeyFiltersOnlyStartingFromIndex(e,t){if(t>=0){for(let s=t;s<e.length;s+=1)if(typeof e[s]!="string"&&!this._isKeyFilter(e[s]))return!1;return!0}return!1}_removeSameFilter(e,t,s,n){const o=s?["!",t]:t;if(JSON.stringify(o)===JSON.stringify(e))return e.splice(0,e.length),0;const r=this._findSubFilter(e,o);if(r>=0)return this._removeFilterByIndex(e,r,n),r;for(let a=0;a<e.length;a+=1)if(Array.isArray(e[a])&&e[a].length>2){const l=this._removeSameFilter(e[a],o,!1,n);if(l>=0){if(!e[a].length)this._removeFilterByIndex(e,a,n);else if(e[a].length===1){const[d]=e[a];e[a]=d}return l}}return-1}getSelectAllState(){const e=this.options.filter();let{selectionFilter:t}=this.options;if(!t)return!0;if(!t.length)return!1;if(e!=null&&e.length){if(t=this._denormalizeFilter(t),this._isLastSubFilter(t,e))return!0;if(this._isLastSubFilter(t,["!",e]))return!1}}loadSelectedItemsWithFilter(){const e=this.options.filter(),{selectionFilter:t}=this.options,s=e?[e,"and",t]:t;return this._loadFilteredData(s)}_onePageSelectAll(e){return this._selectAllPlainItems(e),this.onSelectionChanged(),y().resolve()}}const Ei=function(i,e){const t=e(i);if(G(t))try{return JSON.stringify(t)}catch{return t}return t},yc=function(i,e,t,s){const n=Ei(i,s);return e[t[n]]},Sc=function(i,e){if(i.length!==e.length)return!1;for(let t=0;t<e.length;t++)if(i[t]!==e[t])return!1;return!0},bn=function(i,e){const t={};return i.forEach(((s,n)=>{const o=Ei(s,e);if(S(t[String(o)]))throw te.Error("E1040",o);t[o]=n})),t},Ec=function(i){let{oldItems:e,newItems:t,getKey:s,isItemEquals:n,detectReorders:o=!1}=i;try{const r=bn(e,s),a=bn(t,s);let l=0,d=0;const c=[],_=Math.max(e.length,t.length);for(let u=0;u<_+l;u+=1){const p=t[u],g=u-l+d,f=e[g];if(!p||f&&!yc(f,t,a,s))f&&(c.push({type:"remove",key:s(f),index:u,oldItem:f}),d++,u--);else{const b=Ei(p,s),w=r[b],E=e[w];if(!E)l++,c.push({type:"insert",data:p,index:u});else if(w===g)n(E,p)||c.push({type:"update",data:p,key:s(p),index:u,oldItem:E});else{if(!o)return;c.push({type:"remove",key:s(E),index:w,oldItem:E}),c.push({type:"insert",data:p,index:u}),l++,d++}}}if(o){const u=c.filter((f=>f.type==="remove")).sort(((f,C)=>C.index-f.index)),p=c.filter((f=>f.type==="insert")).sort(((f,C)=>f.index-C.index)),g=c.filter((f=>f.type==="update"));return[...u,...p,...g]}return c}catch(r){Yr.error(r);return}},Cn=function(i,e){this.getLocalFilter=function(a,l,d,c){return l=l===void 0?ri:l,o.bind(this,l,a,d,c)},this.getExpr=function(a){if(!a)return;let l;return i.forEach((function(d,c){l=l||[];let _;c>0&&l.push(e?"and":"or"),pt(a)||oe(a)?_=r(a,d):_=(function(u,p){const g=[];for(let f=0,{length:C}=u;f<C;f++){const b=u[f],w=Qe(b),E=p&&w(p),ne=r(b,E);if(!ne)break;f>0&&g.push(e?"or":"and"),g.push(ne)}return g})(a,d),l.push(_)})),l&&l.length===1&&(l=l[0]),l},this.getCombinedFilter=function(a,l){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const c=this.getExpr(a);let _=c;return(d||e)&&l&&(c?(_=[],_.push(c),_.push(l)):_=l),_};let t;const s=function(a,l){if(!t){t={};const d=n(i,a,l);for(let c=0;c<d.length;c++)t[At(d[c])]=!0}return t},n=function(a,l,d){return Array.isArray(d)?a.map((c=>l(c))):a};function o(a,l,d,c,_){const u=l(_);let p,g;if(!d&&(p=At(u),!G(p)))return s(l,c)[p]?!e:!!e;for(g=0;g<i.length;g++)if(a(i[g],u))return!e;return!!e}function r(a,l){if(l!==void 0)return[a,e?"<>":"=",l]}};class xc extends nr{constructor(e){super(e),this._lastSelectAllPageDeferred=y().reject(),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,t){const{keyOf:s}=this.options;let n;if(!s)return;const o=t&&e.length>1&&!this.options.equalByReference;o&&(n={}),e.forEach((r=>{const a=s(r);if(t){const l=this.removeSelectedItem(a,n,r&&typeof r=="object"&&"disabled"in r?!!r.disabled:!1);n&&xt(l)&&l>=0&&(n[l]=!0)}else this.addSelectedItem(a,r)})),o&&this._batchRemoveSelectedItems(n)}_batchRemoveSelectedItems(e){const t=this.options.selectedItemKeys.slice(0),s=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let n=0;n<t.length;n+=1)e[n]||(this.options.selectedItemKeys.push(t[n]),this.options.selectedItems.push(s[n]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,t,s,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r=y();const a=this.options.key();if(!e.length&&!s)return r.resolve([]),r;if(s&&t&&!n)return r.resolve(this.getSelectedItems()),r;const l=new Cn(e,s),d=l.getCombinedFilter(a,n,o);let c=[];if(t){const{selectedItems:p}=this.options;c=d&&e.length!==p.length?tt(p).filter(d).toArray():p.slice(0)}let _=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const u=l.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,a);return _=_.filter(u),c.length||!s&&_.length===e.length?r.resolve(_):r=this._loadFilteredData(d,u,null,s),r}_replaceSelectionUpdate(e){const{keyOf:t}=this.options;if(!t)return;const s=e.map((n=>t(n)));this.setSelectedItems(s,e)}_warnOnIncorrectKeys(e){const{allowNullValue:t}=this.options;e.forEach((s=>{(!t||s!==null)&&!this.isItemKeySelected(s)&&te.log("W1002",s)}))}_isMultiSelectEnabled(){const{mode:e}=this.options;return e==="all"||e==="multiple"}_requestInProgress(){var e;return((e=this._lastLoadDeferred)===null||e===void 0?void 0:e.state())==="pending"}_concatRequestsItems(e,t,s,n){let o=[];const r=s?e:[];return n?o=n:o=qi(e,this.options.selectedItemKeys),{addedItems:t.added.concat(o),removedItems:t.removed.concat(r),keys:e}}_collectLastRequestData(e,t,s,n){const o=t&&s,r={added:[],removed:[]},a=this._isMultiSelectEnabled(),l={addedItems:[],removedItems:[],keys:[]};if(!a)return l;let d=this._lastRequestData??l;if(this._shouldMergeWithLastRequest){if(o){var c;(c=this._lastLoadDeferred)===null||c===void 0||c.reject(),d={}}else if(!Sc(e,this.options.selectedItemKeys)){var _,u;if(r.added=(_=d)===null||_===void 0?void 0:_.addedItems,r.removed=(u=d)===null||u===void 0?void 0:u.removedItems,!t){var p;(p=this._lastLoadDeferred)===null||p===void 0||p.reject()}}}return d=this._concatRequestsItems(e,r,t,this._shouldMergeWithLastRequest?void 0:n),d}_updateKeysByLastRequestData(e,t,s){let n=e;if(this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&this._lastRequestData&&!t&&!s){var o;n=qi([...e,...this._lastRequestData.addedItems],(o=this._lastRequestData)===null||o===void 0?void 0:o.removedItems),n=ua(n)}return n}_loadSelectedItems(e,t,s,n){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const r=y(),a=this.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,t,s,n),ee(this._lastLoadDeferred).always((()=>{const l=this._updateKeysByLastRequestData(e,t,s);this._shouldMergeWithLastRequest=!1,this._loadSelectedItemsCore(l,t,s,a,o).done((d=>{r.resolve(d)})).fail((d=>{r.reject(d)}))})),this._lastLoadDeferred=r,r}selectedItemKeys(e,t,s,n,o,r){if(this._isCancelingInProgress)return y().reject();const a=this._loadSelectedItems(e,s,n,o,r),l=y();return a.done((d=>{this._storeSelectionState(),t?this._preserveSelectionUpdate(d,s):this._replaceSelectionUpdate(d),this._isCancelingInProgress=!0,this._callCallbackIfNotCanceled((()=>{this._isCancelingInProgress=!1,this.onSelectionChanged(),l.resolve(d)}),(()=>{this._isCancelingInProgress=!1,this._restoreSelectionState(),l.reject()}))})),l}addSelectedItem(e,t){if(S(t)&&!this.options.ignoreDisabledItems&&t.disabled){this.options.disabledItemKeys.includes(e)||this.options.disabledItemKeys.push(e);return}const s=this._getKeyHash(e);this._indexOfSelectedItemKey(s)===-1&&(!G(s)&&this.options.keyHashIndices&&(this.options.keyHashIndices[s]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(t),this.options.selectedItems.push(t))}_getSelectedIndexByKey(e,t){const{selectedItemKeys:s}=this.options;return s.findIndex(((n,o)=>!(t!=null&&t[o])&&this.equalKeys(s[o],e)))}_getSelectedIndexByHash(e,t){let s=this.options.keyHashIndices[e];return s&&s.length>1&&t&&(s=s.filter((n=>!t[n]))),s&&s[0]>=0?s[0]:-1}_indexOfSelectedItemKey(e,t){let s=-1;return this.options.equalByReference?s=this.options.selectedItemKeys.indexOf(e):G(e)?s=this._getSelectedIndexByKey(e,t):s=this._getSelectedIndexByHash(e,t),s}_shiftSelectedKeyIndices(e){for(let t=e;t<this.options.selectedItemKeys.length;t+=1){const s=this.options.selectedItemKeys[t],n=At(s),o=this.options.keyHashIndices[n];if(o)for(let r=0;r<o.length;r+=1)o[r]>e&&(o[r]-=1)}}removeSelectedItem(e,t,s){if(!this.options.ignoreDisabledItems&&s)return;const n=this._getKeyHash(e),o=!!t,r=this._indexOfSelectedItemKey(n,t);if(r<0||(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[r]),o)||(this.options.selectedItemKeys.splice(r,1),this.options.selectedItems.splice(r,1),G(n)||!this.options.keyHashIndices))return r;const a=this.options.keyHashIndices[n];return a&&(a.shift(),a.length||delete this.options.keyHashIndices[n],this._shiftSelectedKeyIndices(r)),r}_updateAddedItemKeys(e,t){for(let s=0;s<e.length;s+=1)this.isItemKeySelected(e[s])||(this.options.addedItemKeys.push(e[s]),this.options.addedItems.push(t[s]))}_updateRemovedItemKeys(e,t,s){for(let n=0;n<t.length;n+=1)this.isItemKeySelected(t[n])||(this.options.removedItemKeys.push(t[n]),this.options.removedItems.push(s[n]))}_isItemSelectionInProgress(e,t){if(t&&this._lastRequestData&&this._requestInProgress()){var n;return(((n=this._lastRequestData)===null||n===void 0?void 0:n.addedItems)??[]).includes(e)}return!1}_getKeyHash(e){return this.options.equalByReference?e:At(e)}setSelectedItems(e,t){this._updateAddedItemKeys(e,t);const s=this.options.selectedItemKeys,n=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._updateRemovedItemKeys(e,s,n)}isItemDataSelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.options.keyOf(e);return this.isItemKeySelected(s,t)}isItemKeySelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this._isItemSelectionInProgress(e,t.checkPending);if(!s){const n=this._getKeyHash(e);s=this._indexOfSelectedItemKey(n)!==-1}return s}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const e=this.options.key(),t=this.getSelectedItemKeys(),s=this.options.filter();if(!t.length)return y().resolve([]);const o=new Cn(t).getCombinedFilter(e,s,!0);return this._loadFilteredData(o)}_storeSelectionState(){const{selectedItems:e,selectedItemKeys:t,keyHashIndices:s}=this.options;this._storedSelectionState={keyHashIndices:JSON.stringify(s),selectedItems:[...e],selectedItemKeys:[...t]}}_restoreSelectionState(){if(this._clearItemKeys(),!this._storedSelectionState)return;const{selectedItemKeys:e,selectedItems:t,keyHashIndices:s}=this._storedSelectionState;this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._setOption("keyHashIndices",JSON.parse(s))}_onePageSelectAll(e){return this._lastSelectAllPageDeferred.state()==="pending"?y().reject():(this._storeSelectionState(),this._selectAllPlainItems(e),this._lastSelectAllPageDeferred=y(),this._callCallbackIfNotCanceled((()=>{this.onSelectionChanged(),this._lastSelectAllPageDeferred.resolve()}),(()=>{this._restoreSelectionState(),this._lastSelectAllPageDeferred.reject()})),this._lastSelectAllPageDeferred)}}class wc{constructor(e){this.options=T(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys??[]}),this._selectionStrategy=this.options.deferred?new Ic(this.options):new xc(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:L,key(){},keyOf:t=>t,load:()=>y().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:t=>t,dataFields(){},filter(){}}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}_isStandardStrategy(e){return this.options.deferred}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(e===void 0)return this.options.selectionFilter;const t=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,t&&this.onSelectionChanged()}setSelection(e,t){return this.selectedItemKeys(e,!1,!1,!1,t)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,t,s,n,o){let r=e??[];return r=Array.isArray(r)?r:[r],this.validate(),this._selectionStrategy.selectedItemKeys(r,t,s,n,o)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,t){this._selectionStrategy.addSelectedItem(t,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,t){this._selectionStrategy.setSelectedItems(e,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e){var t,s;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=!1;const a=this.options.plainItems(),l=a[e];let d=e,c;const{isVirtualPaging:_}=this.options,u=(t=(s=this.options).allowLoadByRange)===null||t===void 0?void 0:t.call(s),{alwaysSelectByShift:p}=this.options;let g,f=!1,C=!1;const b=z=>z>=0&&!a.filter((Ke=>Ke.loadIndex===z)).length;if(_&&S(l)&&(u&&(g=l.loadIndex-d,d=l.loadIndex),f=b(this._focusedItemIndex),S(this._shiftFocusedItemIndex)&&(C=b(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;const w=this.options.getItemData(l),E=this.options.keyOf(w);let ne=n.shift;if(p===!1&&ne&&(ne=u!==!1||!f&&!C),ne&&this.options.mode==="multiple"&&this._focusedItemIndex>=0)u&&(f||C)?(r=d!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,r&&(c=this.changeItemSelectionWhenShiftKeyInVirtualPaging(d))):r=this.changeItemSelectionWhenShiftKeyPressed(d,a,g);else if(n.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!o){const z=this._selectionStrategy.isItemDataSelected(w);this.options.mode==="single"&&this.clearSelectedItems(),z?this._removeSelectedItem(E):this._addSelectedItem(w,E)}r=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const z=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],E);(this.options.selectedItemKeys.length!==1||!z)&&(this._setSelectedItems([E],[w]),r=!0)}if(r)return ee(c).done((()=>{this._focusedItemIndex=d,o||this.onSelectionChanged()})),!0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return this.options.mode==="single"||this.options.mode==="multiple"}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._selectionStrategy.isItemKeySelected(e,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){var t,s;const n=((t=(s=this.options).getLoadOptions)===null||t===void 0?void 0:t.call(s,e,this._focusedItemIndex,this._shiftFocusedItemIndex))??{},o=y(),r=n.skip;return this.options.load(n).done((a=>{const l=!Array.isArray(a)&&q(a)?a.data:a;this.changeItemSelectionWhenShiftKeyPressed(e,l,r),o.resolve()})),o.promise()}changeItemSelectionWhenShiftKeyPressed(e,t,s){let n=!1;const o=S(s);let r=o?this._focusedItemIndex-s:this._focusedItemIndex;const{keyOf:a}=this.options,l=t[r],d=this.options.getItemData(l),c=a(d),_=l&&this.isItemDataSelected(d);S(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex);let u=0,p,g=0,f=0;if(this._shiftFocusedItemIndex!==this._focusedItemIndex)for(u=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,g=o?this._focusedItemIndex-s:this._focusedItemIndex,f=o?this._shiftFocusedItemIndex-s:this._shiftFocusedItemIndex,r=g;r!==f;r+=u)(o||this.isDataItem(t[r]))&&(p=a(this.options.getItemData(t[r])),this._removeSelectedItem(p),n=!0);if(e!==this._shiftFocusedItemIndex){for(u=e<this._shiftFocusedItemIndex?1:-1,g=o?e-s:e,f=o?this._shiftFocusedItemIndex-s:this._shiftFocusedItemIndex,r=g;r!==f;r+=u)if(o||this.isDataItem(t[r])){const C=this.options.getItemData(t[r]);p=a(C),this._addSelectedItem(C,p),n=!0}}return(o||this.isDataItem(l))&&!_&&(this._addSelectedItem(d,c),n=!0),n}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._selectionStrategy._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._selectionStrategy._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}const we=-1,ce=i=>i!==we;class Vt extends Si{constructor(e,t){Vt._userOptions=t??{},super(e,t)}_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference.selectedItem=!0}_getDefaultOptions(){return v({},super._getDefaultOptions(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:we,focusOnSelectedItem:!0,selectedItem:null,onSelectionChanging:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})}_init(){this._initEditStrategy(),super._init(),this._initKeyGetter(),this._initActions(),this._initSelectionModule()}_initKeyGetter(){const{keyExpr:e}=this.option();this._keyGetter=Qe(e)}_selectedItemClass(){return"dx-item-selected"}_getActionsList(){return["onSelectionChanging","onSelectionChanged"]}_initActions(){this._actions={},this._getActionsList().forEach((t=>{this._actions[t]=this._createActionByOption(t,{excludeValidators:["disabled","readOnly"]})??L}))}_getKeysByItems(e){return this._editStrategy.getKeysByItems(e)}_getItemsByKeys(e,t){return this._editStrategy.getItemsByKeys(e,t)}_getKeyByIndex(e){return this._editStrategy.getKeyByIndex(e)}_getIndexByKey(e){return this._editStrategy.getIndexByKey(e)}_getIndexByItemData(e){return this._editStrategy.getIndexByItemData(e)}_isKeySpecified(){return!!this._dataController.key()}_getCombinedFilter(){return this._dataController.filter()}key(){const{keyExpr:e}=this.option();return e||this._dataController.key()}keyOf(e){const{keyExpr:t}=this.option();return t?this._keyGetter(e):this._dataController.store()?this._dataController.keyOf(e):e}_nullValueSelectionSupported(){return!1}_initSelectionModule(){const e=this,{itemsGetter:t}=this._editStrategy,{selectionMode:s,maxFilterLengthInRequest:n}=this.option();this._selection=new wc({allowNullValue:this._nullValueSelectionSupported(),mode:s,maxFilterLengthInRequest:n,equalByReference:!this._isKeySpecified(),onSelectionChanging:o=>{var r,a;const l=o.addedItemKeys.length||o.removedItemKeys.length;if(!this._rendered||!l)return;const d={removedItems:o.removedItems,addedItems:o.addedItems,cancel:!1};(r=(a=this._actions).onSelectionChanging)===null||r===void 0||r.call(a,d),o.cancel=d.cancel},onSelectionChanged:o=>{(o.addedItemKeys.length||o.removedItemKeys.length)&&(this.option("selectedItems",this._getItemsByKeys(o.selectedItemKeys,o.selectedItems)),this._updateSelectedItems(o))},filter:this._getCombinedFilter.bind(this),totalCount:()=>{const{items:o=[]}=this.option(),r=this._dataController.totalCount();return r>=0?r:this._getItemsCount(o)},key:this.key.bind(this),keyOf:this.keyOf.bind(this),load(o){var r;const a=e._dataController;return o.customQueryParams=(r=a.loadOptions())===null||r===void 0?void 0:r.customQueryParams,o.userData=a.userData(),a.store()?a.loadFromStore(o).done((l=>{if(e._disposed)return;const d=Ba(l).data;a.applyMapFunction(d)})):y().resolve(this.plainItems())},dataFields:()=>this._dataController.select(),plainItems:t.bind(this._editStrategy)})}_getItemsCount(e){return e.reduce(((t,s)=>{const n=s.items?this._getItemsCount(s.items):1;return t+n}),0)}_initEditStrategy(){this._editStrategy=new ir(this)}_getSelectedItemIndices(e){const t=[],s=e??this._selection.getSelectedItemKeys();return this._editStrategy.beginCache(),x(s,((n,o)=>{const r=this._getIndexByKey(o);ce(r)&&t.push(r)})),this._editStrategy.endCache(),t}_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done((()=>{this._normalizeSelectedItems()})),super._initMarkup()}_render(){super._render(),this._rendering=!1}_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,super._fireContentReadyAction()}_syncSelectionOptions(e){switch(e??this._chooseSelectOption()){case"selectedIndex":{const{selectedIndex:s}=this.option(),n=this._editStrategy.getItemDataByIndex(s??we);S(n)?(this._setOptionWithoutOptionChange("selectedItems",[n]),this._setOptionWithoutOptionChange("selectedItem",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([n]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break}case"selectedItems":{const{selectedItems:s=[],selectionRequired:n}=this.option(),o=s.length?this._editStrategy.getIndexByItemData(s[0]):we;if(n&&!ce(o))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",s[0]),this._setOptionWithoutOptionChange("selectedIndex",o),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(s));break}case"selectedItem":{const{selectedItem:s,selectionRequired:n}=this.option(),o=this._editStrategy.getIndexByItemData(s);if(n&&!ce(o))return this._syncSelectionOptions("selectedIndex");S(s)?(this._setOptionWithoutOptionChange("selectedItems",[s]),this._setOptionWithoutOptionChange("selectedIndex",o),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([s]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",we));break}case"selectedItemKeys":{const{selectedItemKeys:s=[],selectionRequired:n}=this.option();if(n){const o=this._getIndexByKey(s[0]);if(!ce(o))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(s)}}return y().resolve()}_chooseSelectOption(){let e="selectedIndex";const t=s=>{const{[s]:n}=this.option();return!!(S(n)&&Array.isArray(n)&&n.length)||s in Vt._userOptions};return t("selectedItems")?e="selectedItems":t("selectedItem")?e="selectedItem":t("selectedItemKeys")&&(e="selectedItemKeys"),e}_compareKeys(e,t){if(e.length!==t.length)return!1;for(let s=0;s<t.length;s+=1)if(e[s]!==t[s])return!1;return!0}_normalizeSelectedItems(){const{selectionMode:e,selectedItems:t=[],items:s}=this.option();if(e==="none")this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if(e==="single"){const n=t??[],{selectionRequired:o}=this.option();if(n.length>1||!n.length&&o&&s!==null&&s!==void 0&&s.length){const r=this._selection.getSelectedItems();let a=n[0]??r[0];a===void 0&&(a=this._editStrategy.itemsGetter()[0]);const{grouped:l}=this.option();return l&&(c=>G(c)&&"items"in c&&Array.isArray(c.items))(a)&&(a.items=[a.items[0]]),this._selection.setSelection(this._getKeysByItems([a])),this._setOptionWithoutOptionChange("selectedItems",[a]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(n))}else{const n=this._getKeysByItems(t),o=this._selection.getSelectedItemKeys();this._compareKeys(o,n)||this._selection.setSelection(n)}return y().resolve()}_itemClickHandler(e,t,s){let n=y().resolve();this._createAction((o=>{n=this._itemSelectHandler(o.event)??n}),{validatingTargetName:"itemElement"})({itemElement:h(e.currentTarget),event:e}),n.always((()=>{super._itemClickHandler(e,t,s)}))}_itemSelectHandler(e,t){const{selectByClick:s}=this.option();if(!t&&!s)return;const n=e.currentTarget;if(this.isItemSelected(n))this.unselectItem(e.currentTarget);else{const o=this.selectItem(e.currentTarget);return o==null?void 0:o.promise()}}_selectedItemElement(e){return this._itemElements().eq(e)}_postprocessRenderItem(e){const{selectionMode:t}=this.option();if(t!=="none"){const s=h(e.itemElement),n=this._editStrategy.getNormalizedIndex(s.get(0)),o=this._isItemSelected(n);this._processSelectableItem(s,o)}}_processSelectableItem(e,t){e.toggleClass(this._selectedItemClass(),t),this._setAriaSelectionAttribute(e,String(t))}_updateSelectedItems(e){const{addedItemKeys:t,removedItemKeys:s}=e;if(this._rendered&&(t.length||s.length)){if(!this._rendering){const n=[],o=[];this._editStrategy.beginCache();for(let r=0;r<t.length;r+=1){const a=this._getIndexByKey(t[r]);n.push(a),this._addSelection(a)}for(let r=0;r<s.length;r+=1){const a=this._getIndexByKey(s[r]);o.push(a),this._removeSelection(a)}this._editStrategy.endCache(),this._updateSelection(n,o)}this._actions.onSelectionChanged({addedItems:e.addedItems,removedItems:e.removedItems})}}_updateSelection(e,t){}_setAriaSelectionAttribute(e,t){this.setAria("selected",t,e)}_getFocusedElementIndex(){const{focusOnSelectedItem:e}=this.option();return e?this._getFlatIndex():super._getFocusedElementIndex()}_getFlatIndex(){const{selectedIndex:e=we}=this.option();return e}_removeSelection(e){const t=this._editStrategy.getItemElement(e);ce(e)&&(this._processSelectableItem(t,!1),m.triggerHandler(t,"stateChanged",!1))}_addSelection(e){const t=this._editStrategy.getItemElement(e);ce(e)&&(this._processSelectableItem(t,!0),m.triggerHandler(t,"stateChanged",!0))}_isItemSelected(e){const t=this._getKeyByIndex(e);return this._selection.isItemSelected(t,{checkPending:!0})}_optionChanged(e){switch(e.name){case"selectionMode":this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),super._optionChanged(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done((()=>{this._normalizeSelectedItems()}));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"onSelectionChanging":case"onSelectionChanged":this._initActions();break;case"selectByClick":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":case"focusOnSelectedItem":break;default:super._optionChanged(e)}}_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")}_waitDeletingPrepare(e){if(e.data("dxItemDeleting"))return y().resolve().promise();e.data("dxItemDeleting",!0);const t=y(),s={cancel:!1},n=this._itemEventHandler(e,"onItemDeleting",s,{excludeValidators:["disabled","readOnly"]});return ee(n).always((function(o){const r=!n,a=!r&&n.state()==="resolved",l=!!arguments.length,u=r||a&&!l||a&&o;ee(Jn(s.cancel)).always((()=>{e.data("dxItemDeleting",!1)})).done((p=>{u&&!p?t.resolve():t.reject()})).fail(t.reject)})),t.promise()}_deleteItemFromDS(e){const t=this._dataController,s=y(),{disabled:n}=this.option(),o=t.store();if(!o)return y().resolve().promise();if(!o.remove)throw te.Error("E1011");return this.option("disabled",!0),o.remove(t.keyOf(this._getItemData(e))).done((r=>{r!==void 0?s.resolve():s.reject()})).fail((()=>{s.reject()})),s.always((()=>{this.option("disabled",n)})),s}_tryRefreshLastPage(){const e=y(),{grouped:t}=this.option();return this._isLastPage()||t?e.resolve():this._refreshLastPage().done((()=>{e.resolve()})),e.promise()}_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()}_updateSelectionAfterDelete(e){const t=this._getKeyByIndex(e);this._selection.deselect([t])}_updateIndicesAfterIndex(e){const t=this._itemElements();for(let s=e+1;s<t.length;s+=1)h(t[s]).data(this._itemIndexKey(),s-1)}_simulateOptionChange(e){var t;const s=this.option(e);s instanceof ao||(t=this._optionChangedAction)===null||t===void 0||t.call(this,{name:e,fullName:e,value:s})}isItemSelected(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))}selectItem(e){const{selectionMode:t}=this.option();if(t==="none")return y().resolve();const s=this._editStrategy.getNormalizedIndex(e);if(!ce(s))return y().resolve();const n=this._getKeyByIndex(s);if(this._selection.isItemSelected(n))return y().resolve();if(t==="single")return this._selection.setSelection([n]);const{selectedItemKeys:o}=this.option();return this._selection.setSelection([...o??[],n],[n])}unselectItem(e){const t=this._editStrategy.getNormalizedIndex(e);if(!ce(t))return;const s=this._selection.getSelectedItemKeys(),{selectionRequired:n}=this.option();if(n&&s.length<=1)return;const o=this._getKeyByIndex(t);this._selection.isItemSelected(o,{checkPending:!0})&&this._selection.deselect([o])}_deleteItemElementByIndex(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)}_afterItemElementDeleted(e,t){const s=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(s),this._itemEventHandler(e,"onItemDeleted",t,{beforeExecute(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()}deleteItem(e){const t=y(),s=this._editStrategy.getItemElement(e),n=this._editStrategy.getNormalizedIndex(e),o=this._itemResponseWaitClass();return ce(n)?this._waitDeletingPrepare(s).done((()=>{s.addClass(o);const r=this._extendActionArgs(s);this._deleteItemFromDS(s).done((()=>{this._deleteItemElementByIndex(n),this._afterItemElementDeleted(s,r),this._tryRefreshLastPage().done((()=>{t.resolveWith(this)}))})).fail((()=>{s.removeClass(o),t.rejectWith(this)}))})).fail((()=>{t.rejectWith(this)})):t.rejectWith(this),t.promise()}reorderItem(e,t){const s=y(),n=this._editStrategy,o=n.getItemElement(e),r=n.getItemElement(t),a=n.getNormalizedIndex(e),l=n.getNormalizedIndex(t),d=this._dataController.getDataSource()?"dataSource":"items";return ce(a)&&ce(l)&&a!==l?s.resolveWith(this):s.rejectWith(this),s.promise().done((()=>{r[n.itemPlacementFunc(a,l)](o),n.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),this.option("selectedItems",this._getItemsByKeys(this._selection.getSelectedItemKeys(),this._selection.getSelectedItems())),d==="items"&&this._simulateOptionChange(d),this._itemEventHandler(o,"onItemReordered",{fromIndex:n.getIndex(a),toIndex:n.getIndex(l)},{excludeValidators:["disabled","readOnly"]})}))}}Vt._userOptions={};class or extends Vt{_initMarkup(){this._asyncTemplateItemsMap={},super._initMarkup()}_render(){super._render(),this._planPostRenderActions()}_renderItemContent(e){const t=y(),s=y(),n=`dx${new Q}`;this._asyncTemplateItemsMap[n]=s;const o=super._renderItemContent(v({},e,{uniqueKey:n}));return s.done((()=>{t.resolve(o)})),t.promise()}_onItemTemplateRendered(e,t){return()=>{const{uniqueKey:s}=t;if(s){var n;(n=this._asyncTemplateItemsMap[s])===null||n===void 0||n.resolve()}}}_postProcessRenderItems(){}_planPostRenderActions(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=y(),o=Object.values(this._asyncTemplateItemsMap);return ee.apply(this,o).done((()=>{this._postProcessRenderItems(...t),n.resolve().done((()=>{this._asyncTemplateItemsMap={}}))})),n.promise()}_clean(){super._clean(),Object.values(this._asyncTemplateItemsMap).forEach((t=>{t.reject()})),this._asyncTemplateItemsMap={}}}function Tc(i){return class{constructor(){throw new Error(`Module '${i}' not found`)}static getInstance(){}}}const In=i=>i==="equals"?"=":i;class Wt{static setEditorClass(e){Wt.EditorClass=e}render(e,t,s,n){const o=`${e}-with-search`,r=`${e}-search`,{searchEnabled:a,onValueChanged:l}=s;if(this._onSearchBoxValueChanged=l,!a){t.removeClass(o),this.remove();return}if(this._editor)this.updateEditorOptions(s);else{const d=this._getEditorOptions(s);t.addClass(o);const c=h("<div>").addClass(r).prependTo(t);this._editor=n(c,Wt.EditorClass,d)}}updateEditorOptions(e){var t;const s=this._getEditorOptions(e);(t=this._editor)===null||t===void 0||t.option(s)}_getEditorOptions(e){const{tabIndex:t,searchValue:s,searchEditorOptions:n,searchTimeout:o}=e,r=k.format("Search");return v({mode:"search",placeholder:r,tabIndex:t,value:s,valueChangeEvent:"input",inputAttr:{"aria-label":r},onValueChanged:a=>{this._onValueChanged(a,o)}},n)}_onValueChanged(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._valueChangeDeferred=y(),clearTimeout(this._valueChangeTimeout),this._valueChangeDeferred.done((()=>{var o;(o=this._onSearchBoxValueChanged)===null||o===void 0||o.call(this,e.value)})),((t=e.event)===null||t===void 0?void 0:t.type)==="input"&&s)this._valueChangeTimeout=setTimeout((()=>{var o;(o=this._valueChangeDeferred)===null||o===void 0||o.resolve()}),s);else{var n;(n=this._valueChangeDeferred)===null||n===void 0||n.resolve()}}resolveValueChange(){var e;(e=this._valueChangeDeferred)===null||e===void 0||e.resolve()}remove(){var e;(e=this._editor)===null||e===void 0||e.$element().remove(),this._editor=null}focus(){var e;(e=this._editor)===null||e===void 0||e.focus()}dispose(){this.remove()}}Wt.EditorClass=Tc("TextBox");const Dc="dx-loadindicator-content";var Xe;(function(i){i.Circle="circle",i.Sparkle="sparkle"})(Xe||(Xe={}));const Ac={[Xe.Circle]:"dx-loadindicator-content-circle",[Xe.Sparkle]:"dx-loadindicator-content-sparkle"};class rt extends bs{_getDefaultOptions(){return v({},super._getDefaultOptions(),{_animatingSegmentCount:1,_animatingSegmentInner:!1,_animationType:Xe.Circle,activeStateEnabled:!1,hoverStateEnabled:!1,indicatorSrc:""})}_defaultOptionsRules(){const e=j();return super._defaultOptionsRules().concat([{device:()=>mt(e),options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:()=>wa(e),options:{_animatingSegmentCount:7}}])}_useTemplates(){return!1}_init(){super._init(),this.$element().addClass("dx-loadindicator");const t={role:"alert",label:k.format("Loading")};this.setAria(t)}_initMarkup(){super._initMarkup(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()}_renderWrapper(){this._$wrapper=h("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)}_getAnimationTypeContentClass(){const{_animationType:e}=this.option();return Ac[e]}_renderIndicatorContent(){const e=this._getAnimationTypeContentClass()??"",t=[Dc,e].join(" ");this._$content=h("<div>").addClass(t),this._$wrapper.append(this._$content)}_renderMarkup(){const{indicatorSrc:e}=this.option(),t=Ze.animation();e?this._renderImageMarkup():t&&this._renderAnimationMarkup()}_getSegmentParams(){const{_animationType:e,_animatingSegmentCount:t,_animatingSegmentInner:s}=this.option();switch(e){case Xe.Sparkle:return{segmentCount:2,segmentInner:!1};case Xe.Circle:default:return{segmentCount:t??0,segmentInner:!!s}}}_renderAnimationMarkup(){this._$indicator=h("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);const e=this._getSegmentParams();this._renderSegments(e)}_renderSegments(e){const{segmentCount:t,segmentInner:s}=e;for(let o=t;o>=0;o-=1){var n;const r=h("<div>").addClass("dx-loadindicator-segment").addClass(`dx-loadindicator-segment${o}`);if(s){const a=h("<div>").addClass("dx-loadindicator-segment-inner");r.append(a)}(n=this._$indicator)===null||n===void 0||n.append(r)}}_renderImageMarkup(){const{indicatorSrc:e}=this.option();this._$wrapper.addClass("dx-loadindicator-image"),this._$wrapper.css("backgroundImage",`url(${e})`)}_renderDimensions(){super._renderDimensions(),this._updateContentSizeForAnimation()}_updateContentSizeForAnimation(){if(!this._$indicator)return;let{width:e,height:t}=this.option();if(e||t){e=B(this.$element()),t=M(this.$element());const s=Math.min(t,e);this._$wrapper.css({height:s,width:s,fontSize:s})}}_clean(){super._clean(),this._removeMarkupForAnimation(),this._removeMarkupForImage()}_removeMarkupForAnimation(){this._$indicator&&(this._$indicator.remove(),delete this._$indicator)}_removeMarkupForImage(){this._$wrapper.css("backgroundImage","none")}_optionChanged(e){switch(e.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"_animationType":case"indicatorSrc":this._invalidate();break;default:super._optionChanged(e)}}}ie("dxLoadIndicator",rt);class xi{constructor(e,t,s){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=t,this.name=e,this.options=s||{}}_addPlaceMarker(e){this.$placeMarker=h("<div>").appendTo(e)}_addToContainer(e){const{$placeMarker:t,$container:s}=this;t?t.replaceWith(e):e.appendTo(s)}_attachEvents(e,t){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:e,options:t}=this;return t.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:e,$placeMarker:t}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),t==null||t.remove()}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){const{instance:t,$element:s}=this._create();this.instance=t,this._attachEvents(t,s)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const kc=le.down;class $c extends xi{_create(){const e=h("<span>").addClass("dx-clear-button-area").append(h("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){const{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,t){const{editor:s}=this,n=s.NAME;m.on(t,I(kc,n),(o=>{o.preventDefault(),o.pointerType!=="mouse"&&s._clearValueHandler(o)})),m.on(t,I(Ie,n),(o=>s._clearValueHandler(o)))}_legacyRender(e,t){e.toggleClass("dx-show-clear-button",t)}update(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||super.update();const{editor:t,instance:s}=this,n=t.$element(),o=this._isVisible();s&&s.toggleClass("dx-state-invisible",!o),this._legacyRender(n,o)}}class Oc{constructor(e){this.NAME="dxLabel",this._props=e,this._id=`dx-texteditor-label-${new Q}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=h("<div>").addClass("dx-label-before"),this._$labelSpan=h("<span>"),this._$label=h("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=h("<div>").addClass("dx-label-after"),this._$root=h("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const e=I(Ie,this.NAME),t=I(to,this.NAME),s=I(Aa,this.NAME);m.off(this._$labelSpan,e),m.off(this._$labelSpan,t),m.off(this._$labelSpan,s),this._isVisible()&&this._isOutsideMode()&&(m.on(this._$labelSpan,e,(n=>{et().getSelection().toString()===""&&(this._props.onClickHandler(),n.preventDefault())})),m.on(this._$labelSpan,t,(n=>{this._props.onHoverHandler(n)})),m.on(this._$labelSpan,s,(n=>{this._props.onActiveHandler(n)})))}_updateEditorLabelClass(e){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),e){const t=this._props.mode==="floating"?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(t),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return this._props.mode==="outside"}_updateEditorBeforeButtonsClass(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),e){const t=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(t)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const e=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:e}),this._updateLabelTransform()}}_updateLabelTransform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const s=(this._props.rtlEnabled?1:-1)*(B(this._$before)+e);this._$labelSpan.css("transform",`translateX(${s}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const e=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:e})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}class Rc extends xi{_attachEvents(e,t){const{editor:s}=this;m.on(t,to,(()=>{s.$element().addClass("dx-custom-button-hovered")})),m.on(t,pa,(()=>{s.$element().removeClass("dx-custom-button-hovered")})),m.on(t,Ie,(n=>{n.stopPropagation()}))}_create(){const{editor:e}=this,t=h("<div>");this._addToContainer(t);const s=e._createComponent(t,it,v({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:t,instance:s}}_prepareIntegrationOptions(e){return v({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){const e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){const{visible:e}=this.editor.option();return!!e}_isDisabled(){if(this.options.disabled!==void 0)return this.instance?this.instance.option("disabled"):this.options.disabled;const{readOnly:t}=this.editor.option();return t}}function Bc(i){(()=>{if(!i||typeof i!="object"||Array.isArray(i))throw te.Error("E1053")})(),(()=>{if(!("name"in i))throw te.Error("E1054")})(),(()=>{const{name:e}=i;if(typeof e!="string")throw te.Error("E1055")})(),(()=>{const{location:e}=i;"location"in i&&e!=="after"&&e!=="before"&&(i.location="after")})()}function yn(i,e){if(i.includes(e))throw te.Error("E1055",e);i.push(e)}function Pc(i,e){return!!e.find((t=>t.name===i))}class Mc{constructor(e,t){this.buttons=[],this.defaultButtonsInfo=t,this.editor=e}_compileButtonInfo(e){const t=[];return e.map((s=>{const n=typeof s=="string";if(n||Bc(s),n||Pc(s.name,this.defaultButtonsInfo)){const a=this.defaultButtonsInfo.find((l=>{let{name:d}=l;return d===s||d===s.name}));if(!a)throw te.Error("E1056",this.editor.NAME,s);return yn(t,s),a}const{name:r}=s;return yn(t,r),v({},s,{Ctor:Rc})}))}_createButton(e){const{Ctor:t,options:s,name:n}=e,o=new t(n,this.editor,s);return this.buttons.push(o),o}_renderButtons(e,t,s){let n=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach((r=>{const{location:a="after"}=r;a===s&&this._createButton(r).render((n=n??h("<div>").addClass("dx-texteditor-buttons-container"),s==="before"?t.prepend(n):t.append(n),n))})),n}clean(){this.buttons.forEach((e=>e.dispose())),this.buttons=[]}getButton(e){const t=this.buttons.find((s=>{let{name:n}=s;return n===e}));return t==null?void 0:t.instance}renderAfterButtons(e,t){return this._renderButtons(e,t,"after")}renderBeforeButtons(e,t){return this._renderButtons(e,t,"before")}updateButtons(e){this.buttons.forEach((t=>{(!e||e.includes(t.name))&&t.update()}))}}const Ap="dx-texteditor",kp="dx-texteditor-input",qt=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],Hc=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let Lc=Oc;function Sn(i){if(S(i)&&!Array.isArray(i))throw te.Error("E1053")}class Fc extends vs{ctor(e,t){t&&Sn(t.buttons),this._buttonCollection=new Mc(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,super.ctor(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:e=>S(e)&&e!==!1?e:"",stylingMode:Je().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(){const e=j();return He(e)},options:{labelMode:"floating",stylingMode:Je().editorStylingMode||"filled"}},{device(){const e=j();return as(e)},options:{labelMode:"outside"}}])}_getDefaultButtons(){return[{name:"clear",Ctor:$c}]}_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")}_input(){return this.$element().find(".dx-texteditor-input").first()}_isFocused(){return Ot(this._input())||super._isFocused()}_inputWrapper(){return this.$element()}_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)}_isControlKey(e){return Hc.includes(e)}_renderStylingMode(){super._renderStylingMode();const{stylingMode:e}=this.option();this._updateButtonsStyling(e)}_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),super._initMarkup(),this._renderValue(),this._renderLabel()}_render(){super._render(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()}_renderInput(){this._$textEditorContainer=h("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=h("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())}_getInputContainer(){return this._$textEditorInputContainer}_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const e=this._getInputContainer(),t=h("<div>").addClass("dx-pending-indicator").appendTo(e);this._pendingIndicator=this._createComponent(t,rt,{})}_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))}_renderValidationState(){super._renderValidationState(),this.option("validationStatus")==="pending"?(this._pendingIndicator||this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()}_getButtonsContainer(){return this._$textEditorContainer}_renderButtonContainers(){const{buttons:e}=this.option(),t=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(e,t),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(e,t)}_cleanButtonContainers(){var e,t;(e=this._$beforeButtonsContainer)===null||e===void 0||e.remove(),(t=this._$afterButtonsContainer)===null||t===void 0||t.remove(),this._buttonCollection.clean()}_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,super._clean()}_createInput(){const e=h("<input>");return this._applyInputAttributes(e,this.option("inputAttr")),e}_setSubmitElementName(e){const{inputAttr:t}=this.option();super._setSubmitElementName(e||(t==null?void 0:t.name)||"")}_applyInputAttributes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=T(this._getDefaultAttributes(),t);e.attr(s).addClass("dx-texteditor-input"),this._setInputMinHeight(e)}_setInputMinHeight(e){e.css("minHeight",this.option("height")?"0":"")}_getPlaceholderAttr(){const{ios:e,mac:t}=$.real(),{placeholder:s}=this.option();return s||(e||t?" ":null)}_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}}_updateButtons(e){this._buttonCollection.updateButtons(e)}_updateButtonsStyling(e){x(this.option("buttons"),((t,s)=>{let{options:n,name:o}=s;if(n&&!n.stylingMode&&this.option("visible")){const r=this.getButton(o);r!=null&&r.option&&r.option("stylingMode",e==="underlined"?"text":"contained")}}))}_renderValue(){return this._renderInputValue().promise()}_renderInputValue(e){e=e??this.option("value");const{text:t,displayValue:s,displayValueFormatter:n}=this.option();let o=t;return s!==void 0&&e!==null?o=n==null?void 0:n(s):S(o)||(o=n==null?void 0:n(e)),this.option("text",o),this._input().val()!==(S(o)?o:"")?this._renderDisplayText(o):this._toggleEmptinessEventHandler(),y().resolve()}_renderDisplayText(e){this._input().val(e),this._toggleEmptinessEventHandler()}_isValueValid(){if(this._input().length){const{validity:e}=this._input().get(0);if(e)return e.valid}return!0}_toggleEmptiness(e){this.$element().toggleClass("dx-texteditor-empty",e),this._togglePlaceholder(e)}_togglePlaceholder(e){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!e)}_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()}_toggleDisabledState(e){super._toggleDisabledState(e),this._input().prop("disabled",e)}_toggleTabIndex(){const e=this._input(),t=this.option("disabled"),s=this.option("focusStateEnabled");t||!s?e.attr("tabIndex",-1):e.removeAttr("tabIndex")}_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),super._toggleReadOnlyState()}_readOnlyPropValue(){const{readOnly:e}=this.option();return!!e}_toggleSpellcheckState(){const{spellcheck:e}=this.option();this._input().prop("spellcheck",e)}_unobserveLabelContainerResize(){this._labelContainerElement&&(ds.unobserve(this._labelContainerElement),this._labelContainerElement=null)}_getLabelContainer(){return this._input()}_getLabelContainerWidth(){return B(this._getLabelContainer())}_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&B(this._$beforeButtonsContainer))??0}_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())}_getFieldElement(){return this._getLabelContainer()}_setFieldAria(e){var t;const s=this.option("inputAttr"),n=s==null?void 0:s["aria-label"],o=(t=this._label)===null||t===void 0?void 0:t.getId(),r=n?void 0:o;if(r||e){const a={labelledby:r,label:n};this.setAria(a,this._getFieldElement())}}_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=h(this._getLabelContainer()).get(0);const{label:e,labelMode:t,labelMark:s,rtlEnabled:n}=this.option(),o={onClickHandler:()=>{this.focus()},onHoverHandler:r=>{r.stopPropagation()},onActiveHandler:r=>{r.stopPropagation()},$editor:this.$element(),text:e,mark:s,mode:t,rtlEnabled:n,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new Lc(o),this._setFieldAria(),this._labelContainerElement&&ds.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))}_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()}_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const e=this._input(),t=this.option("placeholder"),s={id:t?`dx-${new Q}`:void 0,"data-dx_placeholder":t},n=this._$placeholder=h("<div>").attr(s);n.insertAfter(e),n.addClass("dx-placeholder")}_attachPlaceholderEvents(){const e=I(le.up,this.NAME);m.on(this._$placeholder,e,(()=>{m.trigger(this._input(),"focus")})),this._toggleEmptinessEventHandler()}_placeholder(){return this._$placeholder??h()}_clearValueHandler(e){const t=this._input();e.stopPropagation(),this._saveValueChangeEvent(e),this._clearValue(),this._isFocused()||m.trigger(t,"focus"),m.trigger(t,"input")}_clearValue(){this.clear()}_renderEvents(){const e=this._input();x(qt,((t,s)=>{if(this.hasActionSubscription(`on${s}`)){const n=this._createActionByOption(`on${s}`,{excludeValidators:["readOnly"]});m.on(e,I(s.toLowerCase(),this.NAME),(o=>{this._disposed||n({event:o})}))}}))}_refreshEvents(){const e=this._input();x(qt,((t,s)=>{m.off(e,I(s.toLowerCase(),this.NAME))})),this._renderEvents()}_keyPressHandler(e){this.option("text",this._input().val())}_keyDownHandler(e){const t=this._input(),s=e.ctrlKey&&Le(e)==="enter",{value:n}=this.option(),o=t.val()!==n;s&&o&&m.trigger(t,"change")}_getValueChangeEventOptionName(){return"valueChangeEvent"}_renderValueChangeEvent(){const e=I(this._renderValueEventName(),`${this.NAME}TextChange`),t=I(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),s=I("keydown",`${this.NAME}TextChange`),n=this._input();m.on(n,e,this._keyPressHandler.bind(this)),m.on(n,t,this._valueChangeEventHandler.bind(this)),m.on(n,s,this._keyDownHandler.bind(this))}_cleanValueChangeEvent(){const e=`.${this.NAME}ValueChange`,t=`.${this.NAME}TextChange`;m.off(this._input(),e),m.off(this._input(),t)}_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()}_renderValueEventName(){return"input change keypress"}_focusTarget(){return this._input()}_focusEventTarget(){return this.element()}_isInput(e){return e===this._input().get(0)}_preventNestedFocusEvent(e){if(e.isDefaultPrevented())return!0;let t=this._isNestedTarget(e.relatedTarget);return e.type==="focusin"?t=t&&this._isNestedTarget(e.target)&&!this._isInput(e.target):t||this._toggleFocusClass(!1,this.$element()),t&&e.preventDefault(),t}_isNestedTarget(e){return!!this.$element().find(e).length}_focusClassTarget(e){return this.$element()}_focusInHandler(e){this._preventNestedFocusEvent(e),super._focusInHandler(e)}_focusOutHandler(e){this._preventNestedFocusEvent(e),super._focusOutHandler(e)}_toggleFocusClass(e,t){super._toggleFocusClass(e,this._focusClassTarget(t))}_hasFocusClass(e){return super._hasFocusClass(h(e||this.$element()))}_renderEmptinessEvent(){const e=this._input();m.on(e,"input blur",this._toggleEmptinessEventHandler.bind(this))}_toggleEmptinessEventHandler(){const e=this._input().val(),t=(e===""||e===null)&&this._isValueValid();this._toggleEmptiness(t)}_valueChangeEventHandler(e,t){this.option("readOnly")||(this._saveValueChangeEvent(e),this.option("value",arguments.length>1?t:this._input().val()),this._saveValueChangeEvent(void 0))}_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),m.off(this._input(),"keyup.onEnterKey.dxTextEditor"),m.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))}_enterKeyHandlerUp(e){if(!this._disposed&&Le(e)==="enter"){var t;(t=this._enterKeyAction)===null||t===void 0||t.call(this,{event:e})}}_updateValue(){this._options.silent("text",null),this._renderValue()}_dispose(){this._enterKeyAction=void 0,super._dispose()}_getSubmitElement(){return this._input()}_hasActiveElement(){return this._input().is(H.getActiveElement(this._input()[0]))}_optionChanged(e){const{name:t,fullName:s,value:n}=e,o=t.replace("on","");if(qt.includes(o)){this._refreshEvents();return}switch(t){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":super._optionChanged(e),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(n),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setFieldAria();break;case"width":super._optionChanged(e),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),super._optionChanged(e);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),super._optionChanged(e);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(t));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":{s===t&&Sn(n),this._cleanButtonContainers(),this._renderButtonContainers();const{stylingMode:r}=this.option();this._updateButtonsStyling(r),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break}case"visible":if(super._optionChanged(e),n&&this.option("buttons")){this._cleanButtonContainers(),this._renderButtonContainers();const{stylingMode:r}=this.option();this._updateButtonsStyling(r)}break;case"displayValueFormatter":this._invalidate();break;default:super._optionChanged(e)}}_renderInputType(){this._setInputType(this.option("mode"))}_setInputType(e){const t=this._input();e==="search"&&(e="text");try{t.prop("type",e)}catch{t.prop("type","text")}}getButton(e){return this._buttonCollection.getButton(e)}focus(){m.trigger(this._input(),"focus")}clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const e=this._getDefaultOptions();this.option("value")===e.value?(this._options.silent("text",""),this._renderValue()):this.option("value",e.value)}_resetInputText(){this._options.silent("text",this._initialValue),this._renderValue()}_isValueEqualToInitial(){const{value:e}=this.option(),t=this._initialValue;return e===t}_resetToInitialValue(){this._isValueEqualToInitial()?this._resetInputText():super._resetToInitialValue(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()}_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length?super.reset(e):super.reset()}on(e,t){const s=super.on(e,t),n=e.charAt(0).toUpperCase()+e.substr(1);return qt.includes(n)&&this._refreshEvents(),s}}class rr{constructor(e){this._value=" ",T(this,e)}next(e){if(!arguments.length)return this._next;this._next=e}_prepareHandlingArgs(e,t){t=t||{};const s=Object.prototype.hasOwnProperty.call(e,"value")?"value":"text";return e[s]=t.str??e[s],e.start=t.start??e.start,e.length=t.length??e.length,e.index+=1,e}first(e){return e=e||0,this.next().first(e+1)}isAccepted(e){return!1}adjustedCaret(e,t,s){return t?this._adjustedForward(e,0,s):this._adjustedBackward(e,0,s)}_adjustedForward(e,t,s){}_adjustedBackward(e,t,s){}isValid(e){}reset(){}clear(e){}text(){}value(){}rawValue(){}handle(e){}}class Vc extends rr{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class ar extends rr{text(){return(this._value!==" "?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value")?e.value:e.text;if(!t||!t.length||!e.length)return 0;if(e.start)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start-1}));const s=t[0],n=t.substring(1);return this._tryAcceptChar(s,e),this._accepted()?this.next().handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))+1:this.handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))}clear(e){this._tryAcceptChar(" ",e),this.next().clear(this._prepareHandlingArgs(e))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(e,t){if(this._accepted(!1),!this._isAllowed(e,t))return;const s=e===" "?this.maskChar:e;t.fullText=t.fullText.substring(0,t.index)+s+t.fullText.substring(t.index+1),this._accepted(!0),this._value=e}_accepted(e){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!e}first(e){return this._value===" "?e||0:super.first(e)}_isAllowed(e,t){return e===" "?!0:this._isValid(e,t)}_isValid(e,t){const{allowedChars:s}=this;return s instanceof RegExp?s.test(e):oe(s)?s(e,t.index,t.fullText):Array.isArray(s)?s.includes(e):s===e}isAccepted(e){return e===0?this._accepted():this.next().isAccepted(e-1)}_adjustedForward(e,t,s){return t>=e?t:this.next()._adjustedForward(e,t+1,s)||t+1}_adjustedBackward(e,t){return t>=e-1?e:this.next()._adjustedBackward(e,t+1)||t+1}isValid(e){return this._isValid(this._value,e)&&this.next().isValid(this._prepareHandlingArgs(e))}}class En extends ar{value(){return this.next().value()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value"),s=t?e.value:e.text;if(!s.length||!e.length)return 0;if(e.start||t)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start&&e.start-1}));const n=s[0],o=s.substring(1);this._tryAcceptChar(n);const r=this._isAllowed(n)?this._prepareHandlingArgs(e,{str:o,length:e.length-1}):e;return this.next().handle(r)+1}clear(e){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(e))}_tryAcceptChar(e){this._accepted(this._isValid(e))}_isValid(e){return e===this.maskChar}first(e){return e=e||0,this.next().first(e+1)}_adjustedForward(e,t,s){return t>=e&&s===this.maskChar?t:e===t+1&&this._accepted()?e:this.next()._adjustedForward(e,t+1,s)}_adjustedBackward(e,t){return t>=e-1?0:this.next()._adjustedBackward(e,t+1)}isValid(e){return this.next().isValid(this._prepareHandlingArgs(e))}}const Wc="blur beforedeactivate",Kc=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],zc=["historyUndo","historyRedo"],Nc=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function Uc(i){return" ".repeat(i)}class Gc{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const e=this._editorInput(),t=I(Wc,"dxMask");m.on(e,t,(s=>{this.editor._changeHandler(s)}))}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){const{originalEvent:t}=e;if(!t)return;const{inputType:s}=t;if(zc.includes(s))this._handleHistoryInputEvent();else if(Kc.includes(s))this._handleBackwardDeleteInputEvent();else{const n=this._editorCaret();if(!n.end)return;this._clearSelectedText(),this._autoFillHandler(t),this._editorCaret(n),this._handleInsertTextInputEvent(t.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}_handleHistoryInputEvent(){const e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText(!0);const e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(e){const s=this._prevCaret&&this._prevCaret.end-this._prevCaret.start||Number(e),n=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:n.start,length:s,text:Uc(s)}))}_handleInsertTextInputEvent(e){var t;const s=e??"";this.editor.setForwardDirection(),this._updateEditorMask({start:((t=this._prevCaret)===null||t===void 0?void 0:t.start)??0,length:s.length||1,text:s})||this._editorCaret(this._prevCaret)}_updateEditorMask(e){const t=e.text.length,s=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:n,end:o}=this._editorCaret(),r=s-t;s>1&&t===1&&this._editorCaret({start:n+r,end:o+r}),this.editor._adjustCaret()}return!!s}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout((()=>{this._editorCaret({start:e,end:e})}),0)}}_focusOutHandler(e){this.editor._changeHandler(e),this._editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){const{editor:t}=this;t._maskKeyHandler(e,(()=>{t._hasSelection()||t._handleKey(" ")}))}_cutHandler(e){const t=this._editorCaret(),s=this._editorInput().val().substring(t.start,t.end);this.editor._maskKeyHandler(e,(()=>Yi(e,s)))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout((()=>{const e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)}))}_pasteHandler(e){const{editor:t}=this;if(this._editorOption("disabled"))return;const s=this._editorCaret();t._maskKeyHandler(e,(()=>{const n=Yi(e),o=t._maskRulesChain.text().substring(s.end),r=t._handleChain({text:n,start:s.start,length:n.length}),a=s.start+r;t._handleChain({text:o,start:a,length:o.length}),t._caret({start:a,end:a})}))}_autoFillHandler(e){const{editor:t}=this,s=this._editorInput().val();this._inputHandlerTimer=setTimeout((()=>{this._isAutoFill()&&(t._maskKeyHandler(e,(()=>{t._handleChain({text:s,start:0,length:s.length})})),t._validateMask())}))}_isAutoFill(){const e=this._editorInput();if(ci.webkit){const t=e.get(0);return(t==null?void 0:t.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(e){return t=>{var s;(s=this[`_${e}Handler`])===null||s===void 0||s.call(this,t)}}attachEvents(){const e=this._editorInput();Nc.forEach((t=>{const s=I(t.toLowerCase(),"dxMask");m.on(e,s,this.getHandler(t))})),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),m.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:jc,mac:qc}=$.real(),Yc=jc||qc,Xc=i=>{let e;try{e={start:i.selectionStart,end:i.selectionEnd}}catch{e={start:0,end:0}}return e},Jc=(i,e)=>{const t=H.getBody();if(!(!t.contains(i)&&!t.contains(i.getRootNode().host)))try{i.selectionStart=e.start,i.selectionEnd=e.end}catch{}},Qc=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i=h(i).get(0),!S(e))return Xc(i);!t&&Yc&&H.getActiveElement(i)!==i||Jc(i,e)},xn=Qc,Zc={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:i=>Yt(i),l:i=>Yt(i)||Tn(i),C:/\S/,c:/./,A:i=>Yt(i)||wn(i),a:i=>Yt(i)||wn(i)||Tn(i)};function wn(i){return/[0-9]/.test(i)}function Yt(i){const e=i.charCodeAt();return e>64&&e<91||e>96&&e<123||e>127}function Tn(i){return i===" "}class eh extends Fc{_getDefaultOptions(){return v({},super._getDefaultOptions(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:k.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})}_supportedKeys(){const e=this,t={del:e._maskStrategy.getHandler("del"),enter:e._changeHandler},s=super._supportedKeys();return x(t,((n,o)=>{const r=s[n];s[n]=function(a){e.option("mask")&&o.call(e,a),r&&r(a)}})),s}_getSubmitElement(){return this.option("mask")?this._$hiddenElement:super._getSubmitElement()}_init(){super._init(),this._initMaskStrategy()}_initMaskStrategy(){this._maskStrategy=new Gc(this)}_initMarkup(){this._renderHiddenElement(),super._initMarkup()}_attachMouseWheelEventHandlers(){if(!this._hasMouseWheelHandler())return;const e=this._input(),t=I(_a,this.NAME),s=this._createAction((n=>{const{event:o}=n;Ot(e)&&!ft(o)&&(this._onMouseWheel(o),o.preventDefault(),o.stopPropagation())}));m.off(e,t),m.on(e,t,(n=>{s({event:n})}))}_hasMouseWheelHandler(){return!1}_onMouseWheel(e){}_useMaskBehavior(){return!!this.option("mask")}_attachDropEventHandler(){if(!this._useMaskBehavior())return;const t=I("drop",this.NAME),s=this._input();m.off(s,t),m.on(s,t,(n=>n.preventDefault()))}_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),super._render(),this._attachDropEventHandler()}_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=h("<input>").attr("type","hidden").appendTo(this._inputWrapper()))}_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()}_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())}_changeHandler(e){const t=this._input(),s=t.val();if(s===this._changedValue)return;this._changedValue=s;const n=fa(e,{type:"change"});m.trigger(t,n)}_parseMask(){this._maskRules=T({},Zc,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)}_parseMaskRule(e){const{mask:t}=this.option();if(e>=t.length)return new Vc;const s=t[e],n=s==="\\",o=n?new En({maskChar:t[e+1]}):this._getMaskRule(s);return o.next(this._parseMaskRule(e+1+n)),o}_getMaskRule(e){let t;return x(this._maskRules,((s,n)=>{if(s===e)return t={pattern:s,allowedChars:n},!1})),S(t)?new ar(T({maskChar:this.option("maskChar")||" "},t)):new En({maskChar:e})}_renderMaskedValue(){if(!this._maskRulesChain)return;const e=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const t={length:e.length};t[this._isMaskedValueMode()?"text":"value"]=e,this._handleChain(t),this._displayMask()}_replaceSelectedText(e,t,s){if(s===void 0)return e;const n=e.slice(0,t.start),o=e.slice(t.end);return n+s+o}_isMaskedValueMode(){return this.option("useMaskedValue")}_displayMask(e){e=e||this._caret(),this._renderValue(),this._caret(e)}_isValueEmpty(){return Ps(this._value)}_shouldShowMask(){const{showMaskMode:e}=this.option();return e==="onFocus"?Ot(this._input())||!this._isValueEmpty():!0}_showMaskPlaceholder(){if(this._shouldShowMask()){const e=this._maskRulesChain.text();this.option("text",e);const{showMaskMode:t}=this.option();t==="onFocus"&&this._renderDisplayText(e)}}_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const e=this._maskRulesChain.value(),t=Ps(e)?"":this._getPreparedValue();this._$hiddenElement.val(t)}return super._renderValue()}_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")}_valueChangeEventHandler(e,t){if(!this._maskRulesChain){super._valueChangeEventHandler.apply(this,arguments);return}this._saveValueChangeEvent(e),this.option("value",this._getPreparedValue())}_isControlKeyFired(e){return this._isControlKey(Le(e))||ft(e)}_handleChain(e){const t=this._maskRulesChain.handle(this._normalizeChainArguments(e));return this._updateMaskInfo(),t}_normalizeChainArguments(e){return e=e||{},e.index=0,e.fullText=this._maskRulesChain.text(),e}_convertToValue(e){return this._isMaskedValueMode()?e=this._replaceMaskCharWithEmpty(e||this._textValue||""):e=e||this._value||"",e}_replaceMaskCharWithEmpty(e){const{maskChar:t}=this.option();return e.replace(new RegExp(t,"g")," ")}_maskKeyHandler(e,t){if(this.option("readOnly"))return;this.setForwardDirection(),e.preventDefault(),this._handleSelection();const s=this._input().val(),n=()=>{s!==this._input().val()&&m.trigger(this._input(),"input")},o=t();o?o.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())}_handleKey(e,t){this._direction(t||"forward"),this._adjustCaret(e),this._handleKeyChain(e),this._moveCaret()}_handleSelection(){if(!this._hasSelection())return;const e=this._caret(),t=new Array(e.end-e.start+1).join(" ");this._handleKeyChain(t)}_handleKeyChain(e){const t=this._caret(),s=this.isForwardDirection()?t.start:t.start-1,n=this.isForwardDirection()?t.end:t.end-1,o=s===n?1:n-s;this._handleChain({text:e,start:s,length:o})}_tryMoveCaretBackward(){this.setBackwardDirection();const e=this._caret().start;return this._adjustCaret(),!e||e!==this._caret().start}_adjustCaret(e){const t=this._caret().start,s=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(t,s,e);this._caret({start:n,end:n})}_moveCaret(){const e=this._caret().start,t=e+(this.isForwardDirection()?0:-1),s=this._maskRulesChain.isAccepted(t)?e+(this.isForwardDirection()?1:-1):e;this._caret({start:s,end:s})}_caret(e,t){const s=this._input();if(s.length){if(!arguments.length)return xn(s);xn(s,e,t)}}_hasSelection(){const e=this._caret();return e.start!==e.end}_direction(e){if(!arguments.length)return this._typingDirection;this._typingDirection=e}setForwardDirection(){this._direction("forward")}setBackwardDirection(){this._direction("backward")}isForwardDirection(){return this._direction()==="forward"}_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()}_clean(){this._maskStrategy&&this._maskStrategy.clean(),super._clean()}_validateMask(){if(!this._maskRulesChain)return;const e=Ps(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement());const{name:e}=this.option();this._setSubmitElementName(e)}_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()}_processEmptyMask(e){if(e)return;const t=this.option("value");this.option({text:t,isValid:!0,validationError:null}),this.validationRequest.fire({value:t,editor:this}),this._renderValue()}_optionChanged(e){switch(e.name){case"mask":this._updateMaskOption(),this._processEmptyMask(e.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),super._optionChanged(e),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:super._optionChanged(e)}}clear(){const{value:e}=this._getDefaultOptions();this.option("value")===e&&this._renderMaskedValue(),super.clear()}}const th=et(),sh=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"];class lr extends eh{ctor(e,t){t&&(this._showClearButton=t.showClearButton),super.ctor(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{value:"",mode:"text",maxLength:null})}_initMarkup(){this.$element().addClass("dx-textbox"),super._initMarkup(),this.setAria("role","textbox")}_renderInputType(){super._renderInputType(),this._renderSearchMode()}_useTemplates(){return!1}_renderProps(){super._renderProps(),this._toggleMaxLengthProp()}_toggleMaxLengthProp(){const e=this._getMaxLength();e&&e>0?this._input().attr("maxLength",e):this._input().removeAttr("maxLength")}_renderSearchMode(){const{mode:e}=this.option();if(e==="search"){if(this.$element().addClass("dx-searchbox"),this._renderSearchIcon(),this._showClearButton===void 0){const{showClearButton:t}=this.option();this._showClearButton=t,this.option("showClearButton",!0)}}else this.$element().removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton}_renderSearchIcon(){const e=h("<div>").addClass("dx-icon").addClass("dx-icon-search");e.prependTo(this._input().parent()),this._$searchIcon=e}_getLabelContainerWidth(){if(this._$searchIcon){const e=this._input().parent();return B(e)-this._getLabelBeforeWidth()}return super._getLabelContainerWidth()}_getLabelBeforeWidth(){let e=super._getLabelBeforeWidth();return this._$searchIcon&&(e+=X(this._$searchIcon)),e}_optionChanged(e){switch(e.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":super._optionChanged(e),this._updateLabelWidth();break;case"mask":super._optionChanged(e),this._toggleMaxLengthProp();break;default:super._optionChanged(e)}}_onKeyDownCutOffHandler(e){const t=this._getMaxLength();if(t&&!e.ctrlKey&&!this._hasSelection()){const s=h(e.target),n=Le(e);return this._cutOffExtraChar(s),s.val().length<t||sh.includes(n)||th.getSelection().toString()!==""}return!0}_onChangeCutOffHandler(e){const t=h(e.target);this.option("maxLength")&&this._cutOffExtraChar(t)}_cutOffExtraChar(e){const t=this._getMaxLength(),s=e.val();t&&s.length>t&&e.val(s.substr(0,t))}_getMaxLength(){const{mask:e,maxLength:t}=this.option();return!!e?null:t}}ie("dxTextBox",lr);const dr=function(){return[{device:()=>!Ze.nativeScrolling,options:{useNative:!1}},{device:i=>!$.isSimulator()&&$.real().deviceType==="desktop"&&i.platform==="generic",options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:Ze.touch,showScrollbar:"onHover"}}]},ti="dxScrollbar",ih="dx-scrollbar-hoverable",Dn="horizontal";let ut=null;class cr extends bs{_getDefaultOptions(){return v({},super._getDefaultOptions(),{visible:!1,activeStateEnabled:!1,visibilityMode:"onScroll",containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})}_init(){super._init(),this._isHovered=!1}_initMarkup(){this._renderThumb(),super._initMarkup()}_render(){super._render(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode());const{hoverStateEnabled:e}=this.option();this.$element().toggleClass(ih,e)}_renderThumb(){this._$thumb=h("<div>").addClass("dx-scrollable-scroll"),h("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)}isThumb(e){return!!this.$element().find(e).length}_isHoverMode(){const{visibilityMode:e,expandable:t}=this.option();return(e==="onHover"||e==="always")&&t}_renderDirection(){const{direction:e}=this.option();this.$element().addClass(`dx-scrollbar-${e}`),this._dimension=e===Dn?"width":"height",this._prop=e===Dn?"left":"top"}_attachPointerDownHandler(){m.on(this._$thumb,I(le.down,ti),this.feedbackOn.bind(this))}feedbackOn(e){e==null||e.preventDefault(),this.$element().addClass("dx-scrollable-scrollbar-active"),ut=this}feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),ut=null}cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)}cursorLeave(){this._isHovered=!1,this.option("visible",!1)}_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})}_toggleVisibility(e){const{visibilityMode:t}=this.option();t==="onScroll"&&this._$thumb.css("opacity");const s=this._adjustVisibility(e);this.option().visible=s,this._$thumb.toggleClass("dx-state-invisible",!s)}_adjustVisibility(e){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;const{visibilityMode:t}=this.option();let s=e;switch(t){case"onScroll":default:break;case"onHover":s=s||!!this._isHovered;break;case"never":s=!1;break;case"always":s=!0}return s}moveTo(e){if(this._isAlwaysHidden())return;let t=e;q(e)&&(t=e[this._prop]||0);const s={};s[this._prop]=this._calculateScrollBarPosition(t),ye(this._$thumb,s)}_calculateScrollBarPosition(e){return-e*this._thumbRatio}_getSizes(){const{containerSize:e,contentSize:t,baseContainerSize:s,baseContentSize:n}=this.option();return{containerSize:Math.round(e),contentSize:Math.round(t),baseContainerSize:Math.round(s),baseContentSize:Math.round(n)}}_update(){const{containerSize:e,contentSize:t}=this._getSizes();let{baseContainerSize:s,baseContentSize:n}=this._getSizes();isNaN(s)&&(s=e,n=t);const{scaleRatio:o}=this.option();this._baseContainerToContentRatio=n?s/n:s,this._realContainerToContentRatio=t?e/t:e;const r=Math.round(Math.max(Math.round(e*this._realContainerToContentRatio),15));this._thumbRatio=(e-r)/(o*(t-e)),this.option(this._dimension,r/o),this.$element().css("display",this._needScrollbar()?"":"none")}_isAlwaysHidden(){const{visibilityMode:e}=this.option();return e==="never"}_needScrollbar(){return!this._isAlwaysHidden()&&this._baseContainerToContentRatio<1}containerToContentRatio(){return this._realContainerToContentRatio}_normalizeSize(e){return q(e)?e[this._dimension]||0:e}_clean(){super._clean(),this===ut&&(ut=null),m.off(this._$thumb,`.${ti}`)}_optionChanged(e){if(this._isAlwaysHidden())return;const{name:t,value:s}=e;switch(t){case"containerSize":case"contentSize":this.option()[t]=this._normalizeSize(s),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:super._optionChanged(e)}}update(){Et((()=>{this._adjustVisibility()&&this.option("visible",!0)}))()}}ma.add((()=>{m.subscribeGlobal(H.getDocument(),I(le.up,ti),(()=>{ut&&ut.feedbackOff()}))}));const An="dxNativeScrollable",nh="dx-scrollable-scrollbar-simulated",oh="dx-scrollable-scrollbars-hidden",Ct="vertical",Xt="horizontal";class wi{constructor(e){this._init(e)}_init(e){this._component=e,this._$element=e.$element(),this._$container=h(e.container()),this._$content=e.$content();const{direction:t,useSimulatedScrollbar:s}=e.option();this._direction=t,this._useSimulatedScrollbar=s,this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e),this._isRtlNativeStrategy=e._isRtlNativeStrategy.bind(e)}render(){const t=$.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${t}`).toggleClass(oh,!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()}updateRtlPosition(e){const{rtlEnabled:t}=this.option();e&&t&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()}_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(nh),this._renderScrollbar(Ct),this._renderScrollbar(Xt)}_renderScrollbar(e){if(!this._isDirection(e))return;const{scrollByThumb:t}=this.option();this._scrollbars[e]=new cr(h("<div>").appendTo(this._$element),{direction:e,expandable:t})}handleInit(e){}handleStart(){}handleMove(e){if(this._isLocked()){e.cancel=!0;return}this._allowedDirection()&&(e.originalEvent.isScrollingEvent=!0)}handleEnd(){}handleCancel(){}handleStop(){}_eachScrollbar(e){x(this._scrollbars||{},((t,s)=>{e(s,t)}))}createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")}_createActionArgs(){const{left:e,top:t}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-e):this._isReachedLeft(e),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(e)):this._isReachedRight(e),reachedTop:this._isDirection(Ct)?Math.round(t)>=0:void 0,reachedBottom:this._isDirection(Ct)?Math.round(Math.abs(t)-this._getMaxOffset().top)>=0:void 0}}_getScrollOffset(){const{top:e,left:t}=this.location();return{top:-e,left:this._normalizeOffsetLeft(-t)}}_normalizeOffsetLeft(e){return this._isRtlNativeStrategy()?this._getMaxOffset().left+e:e}_isReachedLeft(e){return this._isDirection(Xt)?Math.round(e)>=0:void 0}_isReachedRight(e){return this._isDirection(Xt)?Math.round(Math.abs(e)-this._getMaxOffset().left)>=0:void 0}_isScrollbarVisible(){const e=this.option("showScrollbar");return e!=="never"&&e!==!1}handleScroll(e){var t;this._eventForUserAction=e,this._moveScrollbars(),(t=this._scrollAction)===null||t===void 0||t.call(this,this._createActionArgs())}_moveScrollbars(){const{top:e,left:t}=this._getScrollOffset();this._eachScrollbar((s=>{s.moveTo({top:-e,left:-t}),s.option("visible",!0)})),this._hideScrollbars()}_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout((()=>{this._eachScrollbar((e=>{e.option("visible",!1)}))}),500)}location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}}disabledChanged(){}update(){this._update(),this._updateAction(this._createActionArgs())}_update(){this._updateDimensions(),this._updateScrollbars()}_updateDimensions(){this._containerSize={height:M(this._$container),width:B(this._$container)},this._componentContentSize={height:M(this._component.$content()),width:B(this._component.$content())},this._contentSize={height:M(this._$content),width:B(this._$content)}}_updateScrollbars(){this._eachScrollbar(((e,t)=>{const s=t===Ct?"height":"width";e.option({containerSize:this._containerSize[s],contentSize:this._componentContentSize[s]}),e.update()}))}_prepareDirections(){}_allowedDirections(){return{vertical:this._isDirection(Ct)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Xt)&&this._contentSize.width>this._containerSize.width}}dispose(){const{className:e}=this._$element.get(0),t=new RegExp("dx-scrollable-native\\S*","g");if(t.test(e)){const s=e.match(t);s&&this._$element.removeClass(s.join(" "))}m.off(this._$element,`.${An}`),m.off(this._$container,`.${An}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)}_removeScrollbars(){this._eachScrollbar((e=>{e.$element().remove()}))}scrollBy(e){const t=this.location();this._$container.scrollTop(Math.round(-t.top-e.top)),this._$container.scrollLeft(Math.round(-t.left-e.left))}validate(e){const{disabled:t}=this.option();return t||_e(e)&&this._isScrolledInMaxDirection(e)?!1:!!this._allowedDirection()}_isScrolledInMaxDirection(e){const t=this._$container.get(0);let s=!1;return e.delta>0?s=e.shiftKey?!t.scrollLeft:!t.scrollTop:e.shiftKey?s=t.scrollLeft>=this._getMaxOffset().left:s=t.scrollTop>=this._getMaxOffset().top,s}getDirection(){return this._allowedDirection()}}class rh{constructor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)}start(){this._stopped=!1,this._finished=!1,this._stepCore()}stop(){this._stopped=!0,ct(this._stepAnimationFrame)}_stepCore(){if(this._isStopped()){this._stop();return}if(this._isFinished()){this._finished=!0,this._complete();return}this._step(),this._stepAnimationFrame=qs(this._proxiedStepCore)}_step(){R.abstract()}_isFinished(){return this._finished}_stop(){}_complete(){}_isStopped(){return this._stopped}inProgress(){return!(this._stopped||this._finished)}}const hr="dxSimulatedScrollable",ah="dxScrollableStrategy",Jt=`${hr}Cursor`,Ks=`${hr}Keyboard`,lh="dx-scrollable-scrollbars-alwaysvisible",ve="vertical",Y="horizontal",dh=Math.round(1e3/60),ch=400/dh,hh=(1-.92**ch)/(1-.92),xe={PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home",LEFT:"leftArrow",UP:"upArrow",RIGHT:"rightArrow",DOWN:"downArrow",TAB:"tab"};class ur extends rh{constructor(e){super(),this.VELOCITY_LIMIT=1,this.scroller=e}_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT}_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()}_acceleration(){return this.scroller._inBounds()?.92:.5}_complete(){this.scroller._scrollComplete()}}class uh extends ur{constructor(){super(...arguments),this.VELOCITY_LIMIT=.2}_isFinished(){return this.scroller._crossBoundOnNextStep()||super._isFinished()}_acceleration(){return .92}_complete(){this.scroller._move(this.scroller._bounceLocation),super._complete()}}class pr{constructor(e){this._initOptions(e),this._initAnimators(),this._initScrollbar()}_initOptions(e){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=e.direction===Y?"x":"y",this._prop=e.direction===Y?"left":"top",this._dimension=e.direction===Y?"width":"height",this._scrollProp=e.direction===Y?"scrollLeft":"scrollTop",x(e,((t,s)=>{this[`_${t}`]=s}))}_initAnimators(){this._inertiaAnimator=new ur(this),this._bounceAnimator=new uh(this)}_initScrollbar(){this._scrollbar=new cr(h("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()}_visibilityModeNormalize(e){return e===!0?"onScroll":e===!1?"never":e??"never"}_scrollStep(e){const t=this._location;this._location+=e,this._suppressBounce(),this._move(),!(Math.abs(t-this._location)<1)&&m.triggerHandler(this._$container,{type:"scroll"})}_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())}_boundLocation(e){const t=e??this._location;return Math.max(Math.min(t,this._maxOffset),this._minOffset)}_move(e){this._location=e!==void 0?e*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()}_moveContent(){const e=this._location;this._$container[this._scrollProp](-e/this._getScaleRatio()),this._moveContentByTranslator(e)}_getScaleRatio(){if(ae()&&!this._scaleRatio){const e=this._$element[0],t=this._dimension,s=this._getRealDimension(e,t),n=this._getBaseDimension(e,t);this._scaleRatio=Math.round(s/n*100)/100}return this._scaleRatio||1}_getRealDimension(e,t){return Math.round(Ne(e)[t])}_getBaseDimension(e,t){const s=`offset${$t(t)}`;return e[s]}_moveContentByTranslator(e){let t;const s=-this._maxScrollPropValue;if(e>0&&(t=e),e<=s&&(t=e-s),this._translateOffset===t)return;const n={};if(n[this._prop]=t,this._translateOffset=t,!t){ga(this._$content);return}ye(this._$content,n)}_moveScrollbar(){this._scrollbar.moveTo(this._location)}_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()}_scrollToBounds(){var e;this._inBounds()||((e=this._bounceAction)===null||e===void 0||e.call(this),this._setupBounce(),this._bounceAnimator.start())}_setupBounce(){this._bounceLocation=this._boundLocation();const e=this._bounceLocation-this._location;this._velocity=e/hh}_inBounds(e){const t=e??this._location;return this._boundLocation(t)===t}_crossBoundOnNextStep(){const e=this._location,t=e+this._velocity;return e<this._minOffset&&t>=this._minOffset||e>this._maxOffset&&t<=this._maxOffset}_initHandler(e){this._stopScrolling(),this._prepareThumbScrolling(e)}_stopScrolling(){Et((()=>{this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}))()}_prepareThumbScrolling(e){if(_e(e.originalEvent))return;const t=h(e.originalEvent.target),s=this._isScrollbar(t);s&&this._moveToMouseLocation(e),this._thumbScrolling=s||this._isThumb(t),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(t),this._thumbScrolling&&this._scrollbar.feedbackOn()}_isThumbScrollingHandler(e){return this._isThumb(e)}_moveToMouseLocation(e){const t=e[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],s=this._location+t/this._containerToContentRatio()-M(this._$container)/2;this._scrollStep(-Math.round(s))}_startHandler(){this._showScrollbar()}_moveHandler(e){this._crossThumbScrolling||(this._thumbScrolling&&(e[this._axis]=-Math.round(e[this._axis]/this._containerToContentRatio())),this._scrollBy(e))}_scrollBy(e){let t=e[this._axis];this._inBounds()||(t*=.5),this._scrollStep(t)}_scrollByHandler(e){!e.x&&!e.y||(this._scrollBy(e),this._scrollComplete())}_containerToContentRatio(){return this._scrollbar.containerToContentRatio()}_endHandler(e){return this._completeDeferred=y(),this._velocity=e[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()}_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()}_suppressInertia(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)}_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1}_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()}_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()}_updateHandler(){this._update(),this._moveToBounds()}_update(){return this._stopScrolling(),Qn((()=>(this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),Gs((()=>{this._moveScrollbar(),this._scrollbar.update()})))))}_resetScaleRatio(){this._scaleRatio=null}_updateLocation(){this._location=(Kt(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()}_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()}_getMaxOffset(){return 0}_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue}_updateScrollbar(){Pi((()=>{const e=this._containerSize(),t=this._contentSize(),s=this._dimension,n=this._getBaseDimension(this._$container[0],s),o=this._getBaseDimension(this._$content[0],s);Gs((()=>{this._scrollbar.option({containerSize:e,contentSize:t,baseContainerSize:n,baseContentSize:o,scaleRatio:this._getScaleRatio()})}))}))()}_moveToBounds(){Et(Pi(Et((()=>{const e=this._boundLocation(),t=e!==this._location;if(this._location=e,this._move(),t){var s;(s=this._scrollAction)===null||s===void 0||s.call(this)}}))))()}_createActionsHandler(e){this._scrollAction=e.scroll,this._bounceAction=e.bounce}_showScrollbar(){this._scrollbar.option("visible",!0)}_hideScrollbar(){this._scrollbar.option("visible",!1)}_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)}_contentSize(){const e=this._$content.css(`overflow${this._axis.toUpperCase()}`)==="hidden";let t=this._getRealDimension(this._$content.get(0),this._dimension);if(!e){const s=this._$content[0][`scroll${$t(this._dimension)}`]*this._getScaleRatio();t=Math.max(s,t)}return t}_validateEvent(e){const t=h(e.originalEvent.target);return this._isThumb(t)||this._isScrollbar(t)}_isThumb(e){return this._scrollByThumb&&this._scrollbar.isThumb(e)}_isScrollbar(e){return!!(this._scrollByThumb&&(e!=null&&e.is(this._$scrollbar)))}_reachedMin(){return Math.round(this._location-this._minOffset)<=0}_reachedMax(){return Math.round(this._location-this._maxOffset)>=0}_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()}_cursorLeaveHandler(){this._scrollbar.cursorLeave()}isBottomReached(){return!1}dispose(){}}let ue=null,dt=null;class _r{constructor(e){this._init(e)}_init(e){this._component=e,this._$element=e.$element(),this._$container=h(e.container()),this._$wrapper=e._$wrapper,this._$content=e.$content(),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e)}render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers();const{useKeyboard:e}=this.option();e&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()}_createScrollers(){this._scrollers={},this._isDirection(Y)&&this._createScroller(Y),this._isDirection(ve)&&this._createScroller(ve),this._$element.toggleClass(lh,this.option("showScrollbar")==="always")}_createScroller(e){this._scrollers[e]=new pr(this._scrollerOptions(e))}_scrollerOptions(e){return{direction:e,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}}_applyScaleRatio(e){for(const t in this._scrollers){const s=this._getPropByDirection(t);if(S(e[s])){const n=this._scrollers[t],o=e[s];o!==void 0&&(e[s]=o*n._getScaleRatio())}}return e}_isAnyThumbScrolling(e){let t=!1;return this._eventHandler("isThumbScrolling",e).done(((s,n)=>{t=s||n})),t}handleInit(e){this._suppressDirections(e),this._eventForUserAction=e,this._eventHandler("init",e)}_suppressDirections(e){if(_e(e.originalEvent)){this._prepareDirections(!0);return}this._prepareDirections(),this._eachScroller((function(t,s){const n=h(e.originalEvent.target),o=t._validateEvent(e)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[s]=o}))}_isContent(e){return!!e.closest(this._$element).length}_prepareDirections(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._validDirections={},this._validDirections[Y]=e,this._validDirections[ve]=e}_eachScroller(e){const t=e.bind(this);x(this._scrollers,((s,n)=>{t(n,s)}))}handleStart(e){this._eventForUserAction=e,this._eventHandler("start").done(this._startAction)}_saveActive(){dt=this}_resetActive(){dt===this&&(dt=null)}handleMove(e){var t;if(this._isLocked()){e.cancel=!0,this._resetActive();return}this._saveActive(),(t=e.preventDefault)===null||t===void 0||t.call(e),this._adjustDistance(e,e.delta),this._eventForUserAction=e,this._eventHandler("move",e.delta)}_adjustDistance(e,t){t.x*=this._validDirections[Y],t.y*=this._validDirections[ve];const s=this._tryGetDevicePixelRatio();s&&_e(e.originalEvent)&&(t.x=Math.round(t.x/s*100)/100,t.y=Math.round(t.y/s*100)/100)}_tryGetDevicePixelRatio(){if(ae())return et().devicePixelRatio}handleEnd(e){var t;return this._resetActive(),this._refreshCursorState(((t=e.originalEvent)===null||t===void 0?void 0:t.target)??void 0),this._adjustDistance(e,e.velocity),this._eventForUserAction=e,this._eventHandler("end",e.velocity).done(this._endAction)}handleCancel(e){return this._resetActive(),this._eventForUserAction=e,this._eventHandler("end",{x:0,y:0})}handleStop(){this._resetActive(),this._eventHandler("stop")}handleScroll(){var e;this._updateRtlConfig(),(e=this._scrollAction)===null||e===void 0||e.call(this)}_attachKeyboardHandler(){m.off(this._$element,`.${Ks}`),!this.option("disabled")&&this.option("useKeyboard")&&m.on(this._$element,I("keydown",Ks),this._keyDownHandler.bind(this))}_keyDownHandler(e){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout((()=>{Le(e)===xe.TAB&&this._eachScroller((s=>{s._updateHandler()}))})),!this._$container.is(H.getActiveElement(this._$container.get(0))))return;let t=!0;switch(Le(e)){case xe.DOWN:this._scrollByLine({y:1});break;case xe.UP:this._scrollByLine({y:-1});break;case xe.RIGHT:this._scrollByLine({x:1});break;case xe.LEFT:this._scrollByLine({x:-1});break;case xe.PAGE_DOWN:this._scrollByPage(1);break;case xe.PAGE_UP:this._scrollByPage(-1);break;case xe.HOME:this._scrollToHome();break;case xe.END:this._scrollToEnd();break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault())}_scrollByLine(e){const t=this._tryGetDevicePixelRatio();let s=40;t&&(s=Math.abs(s/t*100)/100),this.scrollBy({top:(e.y??0)*-s,left:(e.x??0)*-s})}_scrollByPage(e){const t=this._wheelProp(),s=this._dimensionByProp(t),n={},o=s==="width"?B:M;n[t]=e*-o(this._$container),this.scrollBy(n)}_dimensionByProp(e){return e==="left"?"width":"height"}_getPropByDirection(e){return e===Y?"left":"top"}_scrollToHome(){const e=this._wheelProp(),t={};t[e]=0,this._component.scrollTo(t)}_scrollToEnd(){const e=this._wheelProp(),t=this._dimensionByProp(e),s={},n=t==="width"?B:M;s[e]=n(this._$content)-n(this._$container),this._component.scrollTo(s)}createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()}_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})}_createActionHandler(e){var t=this;const s=this._createActionByOption(e);return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];s(T(t._createActionArgs(),o))}}_createActionArgs(){const{horizontal:e,vertical:t}=this._scrollers,s=this._getScrollOffset();return this._scrollOffset={top:t&&s.top,left:e&&s.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:e==null?void 0:e._reachedMax(),reachedRight:e==null?void 0:e._reachedMin(),reachedTop:t==null?void 0:t._reachedMax(),reachedBottom:t==null?void 0:t._reachedMin()}}_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}}_eventHandler(e,t){const s=[].slice.call(arguments).slice(1),n=kt(this._scrollers,(o=>o[`_${e}Handler`].apply(o,s)));return ee.apply(h,n).promise()}location(){const e=Kt(this._$content);return e.top-=this._$container.scrollTop(),e.left-=this._$container.scrollLeft(),e}disabledChanged(){this._attachCursorHandlers()}_attachCursorHandlers(){m.off(this._$element,`.${Jt}`);const{disabled:e}=this.option();!e&&this._isHoverMode()&&(m.on(this._$element,I("mouseenter",Jt),this._cursorEnterHandler.bind(this)),m.on(this._$element,I("mouseleave",Jt),this._cursorLeaveHandler.bind(this)))}_isHoverMode(){return this.option("showScrollbar")==="onHover"}_cursorEnterHandler(e){const t=e||{};t.originalEvent=t.originalEvent||{},!(dt||t.originalEvent._hoverHandled)&&(ue&&ue._cursorLeaveHandler(),ue=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)}_cursorLeaveHandler(e){ue!==this||dt===ue||(this._eventHandler("cursorLeave"),ue=null,this._refreshCursorState(e==null?void 0:e.relatedTarget))}_refreshCursorState(e){if(!this._isHoverMode()&&(!e||dt))return;const s=h(e).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),n=s.length&&s.data(ah);ue&&ue!==n&&ue._cursorLeaveHandler(),n&&n._cursorEnterHandler()}update(){const e=this._eventHandler("update").done(this._updateAction);return ee(e,Qn((()=>{const t=this._allowedDirections();return Gs((()=>{let s=t.vertical?"pan-x":"";s=t.horizontal?"pan-y":s,s=t.vertical&&t.horizontal?"none":s,this._$container.css("touchAction",s)})),ee().promise()})))}_allowedDirections(){const{bounceEnabled:e}=this.option(),t=this._scrollers[ve],s=this._scrollers[Y];return{vertical:!!(t&&(t._minOffset<0||e)),horizontal:!!(s&&(s._minOffset<0||e))}}_updateBounds(){var e;(e=this._scrollers[Y])===null||e===void 0||e._updateBounds()}_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==ve}updateRtlPosition(e){if(e&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let t=this._getMaxOffset().left-this._rtlConfig.scrollRight;t<=0&&(t=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==t&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:t}),this._rtlConfig.skipUpdating=!1)}}_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:e,scrollLeft:t}=this._$container.get(0),s=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===s&&this._rtlConfig.clientWidth===e&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-t),this._rtlConfig.clientWidth=e,this._rtlConfig.windowPixelRatio=s}}_getWindowDevicePixelRatio(){return ae()?et().devicePixelRatio:1}scrollBy(e){var t,s;const n=this._scrollers[ve],o=this._scrollers[Y];n&&(e.top=n._boundLocation(e.top+n._location)-n._location),o&&(e.left=o._boundLocation(e.left+o._location)-o._location),this._prepareDirections(!0),(t=this._startAction)===null||t===void 0||t.call(this),this._eventHandler("scrollBy",{x:e.left,y:e.top}),(s=this._endAction)===null||s===void 0||s.call(this),this._updateRtlConfig()}validate(e){return _e(e)&&ft(e)||this.option("disabled")?!1:this.option("bounceEnabled")?!0:_e(e)?this._validateWheel(e):this._validateMove(e)}_validateWheel(e){const t=this._scrollers[this._wheelDirection(e)],s=t._reachedMin(),n=t._reachedMax(),o=!s||!n,r=!s&&!n,a=s&&e.delta>0,l=n&&e.delta<0;let d=o&&(r||a||l);return d=d||this._validateWheelTimer!==void 0,d&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout((()=>{this._validateWheelTimer=void 0}),500)),d}_validateMove(e){const{scrollByContent:t}=this.option();return!t&&!h(e.target).closest(".dx-scrollable-scrollbar").length?!1:this._allowedDirection()}getDirection(e){return _e(e)?this._wheelDirection(e):this._allowedDirection()}_wheelProp(){return this._wheelDirection()===Y?"left":"top"}_wheelDirection(e){const{direction:t}=this.option();switch(t){case Y:return Y;case ve:return ve;default:return e!=null&&e.shiftKey?Y:ve}}dispose(){this._resetActive(),ue===this&&(ue=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=void 0,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)}_detachEventHandlers(){m.off(this._$element,`.${Jt}`),m.off(this._$container,`.${Ks}`)}}const ph="vertical",$p="horizontal",Op="both",_h="dx-scrollable-content";function fh(i,e){const t={left:0,top:0};let s=e;for(;(n=s)!==null&&n!==void 0&&n.offsetParent&&!s.classList.contains(i);){var n;const o=s.offsetParent,r=s.getBoundingClientRect(),a=o.getBoundingClientRect();t.left+=r.left-a.left,t.top+=r.top-a.top,s=s.offsetParent}return t}function mh(i,e,t,s,n){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:_h;const r=v({top:0,left:0,right:0,bottom:0},n),a=e===ph,l=a?"top":"left",d=a?"bottom":"right",c=a?"height":"width",_=t[`offset${$t(c)}`],u=t[`client${$t(c)}`],p=t.getBoundingClientRect()[c],g=i.getBoundingClientRect()[c];let f=1;Math.abs(p-_)>1&&(f=p/_);const C=fh(o,i)[l]/f,b=s[l],w=b-C+r[l],E=b-C-g/f+u-r[d];return w<=0&&E>=0?b:b-(Math.abs(w)>Math.abs(E)?E:w)}const Ce="dxScrollable",gh="dxScrollableStrategy",be="vertical",Ae="horizontal",zs="both";class Ti extends li{_getDefaultOptions(){return v({},super._getDefaultOptions(),{disabled:!1,onScroll:null,direction:be,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:L})}_defaultOptionsRules(){return super._defaultOptionsRules().concat(dr(),[{device:()=>!!(Ze.nativeScrolling&&$.real().platform==="android"&&!ci.mozilla),options:{useSimulatedScrollbar:!0}}])}_initOptions(e){super._initOptions(e),"useSimulatedScrollbar"in e||this._setUseSimulatedScrollbar()}_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))}_init(){super._init(),this._initScrollableMarkup(),this._locked=!1}_visibilityChanged(e){if(e){this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset;const{_onVisibilityChanged:t}=this.option();t==null||t(this)}else this._savedScrollOffset=this.scrollOffset()}_initScrollableMarkup(){const e=this.$element().addClass("dx-scrollable"),t=h("<div>").addClass("dx-scrollable-container"),s=h("<div>").addClass("dx-scrollable-wrapper"),n=h("<div>").addClass("dx-scrollable-content");this._$container=t,this._$wrapper=s,this._$content=n,n.append(e.contents()).appendTo(t),t.appendTo(s),s.appendTo(e)}_dimensionChanged(){this.update(),this._updateRtlPosition()}_initMarkup(){super._initMarkup(),this._renderDirection()}_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),super._render(),this._updateRtlPosition(!0)}_updateRtlPosition(e){this._strategy.updateRtlPosition(e)}_getMaxOffset(){const{scrollWidth:e,clientWidth:t,scrollHeight:s,clientHeight:n}=h(this.container()).get(0);return{left:e-t,top:s-n}}_attachEventHandlers(){const e=this._strategy,t={getDirection:e.getDirection.bind(e),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};m.off(this._$wrapper,`.${Ce}`),m.on(this._$wrapper,I(lt.init,Ce),t,this._initHandler.bind(this)),m.on(this._$wrapper,I(lt.start,Ce),e.handleStart.bind(e)),m.on(this._$wrapper,I(lt.move,Ce),e.handleMove.bind(e)),m.on(this._$wrapper,I(lt.end,Ce),e.handleEnd.bind(e)),m.on(this._$wrapper,I(lt.cancel,Ce),e.handleCancel.bind(e)),m.on(this._$wrapper,I(lt.stop,Ce),e.handleStop.bind(e)),m.off(this._$container,`.${Ce}`),m.on(this._$container,I("scroll",Ce),e.handleScroll.bind(e))}_validate(e){return this._isLocked()?!1:(this._updateIfNeed(),this._moveIsAllowed(e))}_moveIsAllowed(e){return!!this._strategy.validate(e)}handleMove(e){this._strategy.handleMove(e)}_prepareDirections(e){this._strategy._prepareDirections(e)}_initHandler(e){this._strategy.handleInit(e)}_renderDisabledState(){const{disabled:e}=this.option();this.$element().toggleClass("dx-scrollable-disabled",e),this.option("disabled")?this._lock():this._unlock()}_renderDirection(){const{direction:e}=this.option();this.$element().removeClass(`dx-scrollable-${Ae}`).removeClass(`dx-scrollable-${be}`).removeClass(`dx-scrollable-${zs}`).addClass(`dx-scrollable-${e}`)}_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data(gh,this._strategy)}_createStrategy(){const{useNative:e}=this.option();this._strategy=e?new wi(this):new _r(this)}_createActions(){var e;(e=this._strategy)===null||e===void 0||e.createActions()}_clean(){var e;(e=this._strategy)===null||e===void 0||e.dispose()}_optionChanged(e){var t;switch(e.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),(t=this._strategy)===null||t===void 0||t.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":super._optionChanged(e),this._updateRtlPosition();break;default:super._optionChanged(e)}}_resetInactiveDirection(){const e=this._getInactiveProp();if(!e||!ae())return;const t=this.scrollOffset();t[e]=0,this.scrollTo(t)}_getInactiveProp(){const{direction:e}=this.option();return e===be?"left":"top"}_location(){return this._strategy.location()}_normalizeLocation(e){if(q(e)){const s=fe(e.left,e.x),n=fe(e.top,e.y);return{left:S(s)?-s:void 0,top:S(n)?-n:void 0}}const{direction:t}=this.option();return{left:t!==be?-e:void 0,top:t!==Ae?-e:void 0}}_isLocked(){return this._locked}_lock(){this._locked=!0}_unlock(){this.option("disabled")||(this._locked=!1)}_isDirection(e){const{direction:t}=this.option();return e===be?t!==Ae:e===Ae?t!==be:t===e}_updateAllowedDirection(){const e=this._strategy._allowedDirections();this._isDirection(zs)&&e.vertical&&e.horizontal?this._allowedDirectionValue=zs:this._isDirection(Ae)&&e.horizontal?this._allowedDirectionValue=Ae:this._isDirection(be)&&e.vertical?this._allowedDirectionValue=be:this._allowedDirectionValue=null}_allowedDirection(){return this._allowedDirectionValue}$content(){return this._$content}content(){return O(this._$content)}container(){return O(this._$container)}scrollOffset(){return this._strategy._getScrollOffset()}_isRtlNativeStrategy(){const{useNative:e,rtlEnabled:t}=this.option();return e&&t}scrollTop(){return this.scrollOffset().top}scrollLeft(){return this.scrollOffset().left}clientHeight(){return M(this._$container)}scrollHeight(){return K(this.$content())}clientWidth(){return B(this._$container)}scrollWidth(){return X(this.$content())}update(){return this._strategy?ee(this._strategy.update()).done((()=>{this._updateAllowedDirection()})):y().resolve()}scrollBy(e){const t=this._normalizeLocation(e);!t.top&&!t.left||(this._updateIfNeed(),this._strategy.scrollBy(t))}scrollTo(e){if(!ae())return;let t=this._normalizeLocation(e);this._updateIfNeed();let s=this._location();const{useNative:n}=this.option();if(!n){const r=this._strategy;t=r._applyScaleRatio(t),s=r._applyScaleRatio(s)}this._isRtlNativeStrategy()&&(s.left-=this._getMaxOffset().left);const o=this._normalizeLocation({left:s.left-fe(t.left,s.left),top:s.top-fe(t.top,s.top)});!o.top&&!o.left||this._strategy.scrollBy(o)}scrollToElement(e,t){const s=h(e),n=this.$content().find(e).length,o=s.parents(".dx-scrollable").length-s.parents(".dx-scrollable-content").length===0;if(!n||!o)return;const r={top:0,left:0},{direction:a}=this.option();a!==be&&(r.left=this.getScrollElementPosition(s,Ae,t)),a!==Ae&&(r.top=this.getScrollElementPosition(s,be,t)),this.scrollTo(r)}getScrollElementPosition(e,t,s){const n=this.scrollOffset();return mh(e[0],t,h(this.container())[0],n,s)}_updateIfNeed(){this.option("updateManually")||this.update()}_useTemplates(){return!1}}ie(Ce,Ti);class fr extends oo{_supportedKeys(){return v({},super._supportedKeys(),{escape:L})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{message:k.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>He(j()),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>as(j()),options:{width:"auto",height:"auto"}}])}_init(){super._init()}_render(){super._render(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._updateWrapperAria()}_updateWrapperAria(){if(this.$wrapper().removeAttr("aria-label").removeAttr("role"),!this.option("showIndicator")){const t=this._getAriaAttributes();this.$wrapper().attr(t)}}_getAriaAttributes(){const{message:e}=this.option();return{role:"alert","aria-label":e||k.format("Loading")}}_renderContentImpl(){const e=super._renderContentImpl();return this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=h("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),e}_show(){const{delay:e}=this.option();if(!e)return super._show();const t=y(),s=super._show.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout((()=>{s().done((()=>{t.resolve()}))}),e),t.promise()}_hide(){return this._clearShowTimeout(),super._hide()}_clearShowTimeout(){clearTimeout(this._showTimeout)}_renderMessage(){if(!this._$loadPanelContentWrapper)return;const{message:e}=this.option();if(!e)return;const t=h("<div>").addClass("dx-loadpanel-message").text(e);this._$loadPanelContentWrapper.append(t)}_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=h("<div>").addClass("dx-loadpanel-indicator").appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,rt,{elementAttr:this._getAriaAttributes(),indicatorSrc:this.option("indicatorSrc")}))}_cleanPreviousContent(){this.$content().find(".dx-loadpanel-message").remove(),this.$content().find(".dx-loadpanel-indicator").remove(),this._$indicator=void 0}_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))}_optionChanged(e){switch(e.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._updateWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:super._optionChanged(e)}}_dispose(){this._clearShowTimeout(),super._dispose()}}ie("dxLoadPanel",fr);const si="dx-toolbar",vh="dxToolbarItemDataKey";class bh extends or{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter((e=>e!=="disabled"))}_initTemplates(){super._initTemplates();const e=new yi(((t,s,n)=>{if(q(s)){const{text:o,html:r,widget:a}=s;o&&t.text(o).wrapInner("<div>"),r&&t.html(r),a==="dxDropDownButton"&&(s.options=s.options??{},S(s.options.stylingMode)||(s.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),a==="dxButton"&&(this.option("useFlatButtons")&&(s.options=s.options??{},s.options.stylingMode=s.options.stylingMode??"text"),this.option("useDefaultButtons")&&(s.options=s.options??{},s.options.type=s.options.type??"default"))}else t.text(String(s));this._getTemplate("dx-polymorph-widget").render({container:t,model:n,parent:this})}),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>mt(j()),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return vh}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(si),this._$toolbarItemsContainer=h("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const e=this._$toolbarItemsContainer;x(["before","center","after"],((t,s)=>{const n=`dx-toolbar-${s}`;e.find(`.${n}`).length||(this[`_$${s}Section`]=h("<div>").addClass(n).attr("role","presentation").appendTo(e))}))}_arrangeItems(e){var t,s,n,o;const r=e??B(this.$element());(t=this._$centerSection)===null||t===void 0||t.css({margin:"0 auto",float:"none"});const a=Ne((s=this._$beforeSection)===null||s===void 0?void 0:s.get(0)),l=Ne((n=this._$afterSection)===null||n===void 0?void 0:n.get(0));this._alignCenterSection(a,l,r);const d=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),c=d.parent();if(!d.length)return;const _=a.width?a.width:(o=d.position())===null||o===void 0?void 0:o.left,u=c.hasClass("dx-toolbar-before")?0:_,p=c.hasClass("dx-toolbar-after")?0:l.width;let g=0;c.children().not(".dx-toolbar-label").each(((b,w)=>{g+=X(w)}));const f=r-g,C=Math.max(f-u-p,0);if(c.hasClass("dx-toolbar-before"))this._$beforeSection&&this._alignSection(this._$beforeSection,C);else{const b=X(d)-B(d);d.css("maxWidth",C-b)}}_alignCenterSection(e,t,s){if(!this._$centerSection)return;this._alignSection(this._$centerSection,s-e.width-t.width);const n=this.option("rtlEnabled"),o=n?t:e,r=n?e:t,a=Ne(this._$centerSection.get(0));(o.right>a.left||a.right>r.left)&&this._$centerSection.css({marginLeft:o.width,marginRight:r.width,float:o.width>r.width?"none":"right"})}_alignSection(e,t){const n=e.find(".dx-toolbar-label").toArray(),o=t-this._getCurrentLabelsPaddings(n),r=this._getCurrentLabelsWidth(n),a=Math.abs(r-o);if(o<r){const l=n.reverse();this._alignSectionLabels(l,a,!1)}else this._alignSectionLabels(n,a,!0)}_alignSectionLabels(e,t,s){const n=o=>Ne(o).width;for(let o=0;o<e.length;o++){const r=h(e[o]),a=Math.ceil(n(e[o]));let l=0;s&&r.css("maxWidth","inherit");const d=s?n(e[o]):a,c=Math.ceil(d);if(c<t)l=s?c:0,t-=c;else{l=s?a+t:a-t,r.css("maxWidth",l);break}r.css("maxWidth",l)}}_applyCompactMode(){const e=h(this.element());e.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>B(e)&&e.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(e){let t=0;return e.forEach((s=>{t+=X(s)})),t}_getCurrentLabelsPaddings(e){let t=0;return e.forEach((s=>{t+=X(s)-B(s)})),t}_renderItem(e,t,s,n){const o=t.location??"center",r=s??this[`_$${o}Section`],a=!!(t.text??t.html),l=super._renderItem(e,t,r,n);return l.toggleClass("dx-toolbar-button",!a).toggleClass("dx-toolbar-label",a).addClass(t.cssClass??""),l}_renderGroupedItems(){x(this.option("items"),((e,t)=>{const s=t.items,n=h("<div>").addClass("dx-toolbar-group"),o=t.location??"center";s!=null&&s.length&&(x(s,((r,a)=>{this._renderItem(r,a,n)})),this._$toolbarItemsContainer.find(`.dx-toolbar-${o}`).append(n))}))}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){const{items:e=[]}=this.option();return e}_renderContentImpl(){const e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return B(this.$element())>0&&M(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,t,s,n){super._itemOptionChanged(e,t,s,n),this._arrangeItems()}_optionChanged(e){const{name:t}=e;switch(t){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if(He(j())){const e=()=>new Promise((s=>{const n=()=>{let r=!0;return this.$element().parents().each(((a,l)=>Zt.isAnimating(h(l).get(0))?(r=!1,!1):!0)),r&&s(),r},o=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout((()=>n()||o()),15)};o()})),t=()=>{const s=this.$element().find(".dx-toolbar-label"),n=[];return s.each(((o,r)=>{const a=h(r).text(),l=h(r).css("fontWeight");return n.push(Ta(a,l)),!0})),Promise.all(n)};Promise.all([e(),t()]).then((()=>{this._dimensionChanged()}))}}}ie("dxToolbarBase",bh);const Os="dxResizable",Ch=I(so,Os),Ih=I(io,Os),yh=I(no,Os),Sh={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"};class mr extends li{_getDefaultOptions(){return v({},super._getDefaultOptions(),{handles:"all",step:"1",stepPrecision:"simple",minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,roundStepValue:!0,keepAspectRatio:!0})}_init(){super._init(),this.$element().addClass("dx-resizable")}_initMarkup(){super._initMarkup(),this._renderHandles()}_render(){super._render(),this._renderActions()}_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")}_renderHandles(){this._handles=[];const{handles:e}=this.option();if(e==="none"||!e)return;const t=e==="all"?["top","bottom","left","right"]:e.split(" "),s={};x(t,((n,o)=>{s[o]=!0,this._renderHandle(o)})),s.bottom&&s.right&&this._renderHandle("corner-bottom-right"),s.bottom&&s.left&&this._renderHandle("corner-bottom-left"),s.top&&s.right&&this._renderHandle("corner-top-right"),s.top&&s.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}_renderHandle(e){const t=h("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${e}`).appendTo(this.$element());this._handles.push(t)}_attachEventHandlers(){if(this.option("disabled"))return;const e={};e[Ch]=this._dragStartHandler.bind(this),e[Ih]=this._dragHandler.bind(this),e[yh]=this._dragEndHandler.bind(this),this._handles.forEach((t=>{m.on(t,e,{direction:"both",immediate:!0})}))}_detachEventHandlers(){this._handles.forEach((e=>{m.off(e)}))}_toggleEventHandlers(e){e?this._attachEventHandlers():this._detachEventHandlers()}_getElementSize(){const e=this.$element();return e.css("boxSizing")==="border-box"?{width:X(e),height:K(e)}:{width:B(e),height:M(e)}}_dragStartHandler(e){var t;const s=this.$element();if(s.is(".dx-state-disabled, .dx-state-disabled *")){e.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(e),this._elementLocation=Kt(s),this._elementSize=this._getElementSize(),this._renderDragOffsets(e),(t=this._resizeStartAction)===null||t===void 0||t.call(this,{event:e,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),e.targetElements=null}_toggleResizingClass(e){this.$element().toggleClass("dx-resizable-resizing",e)}_renderDragOffsets(e){const t=this._getArea();if(!t)return;const s=h(e.target).closest(".dx-resizable-handle"),n=X(s),o=K(s),r=s.offset()??{left:0,top:0},a=t.offset,l=this._getAreaScrollOffset();this._leftMaxOffset=r.left-a.left-l.scrollX,e.maxLeftOffset=this._leftMaxOffset,this._rightMaxOffset=a.left+t.width-r.left-n+l.scrollX,e.maxRightOffset=this._rightMaxOffset,this._topMaxOffset=r.top-a.top-l.scrollY,e.maxTopOffset=this._topMaxOffset,this._bottomMaxOffset=a.top+t.height-r.top-o+l.scrollY,e.maxBottomOffset=this._bottomMaxOffset}_getBorderWidth(e,t){if(_t(e.get(0)))return 0;const s=e.css(Sh[t]);return parseInt(s,10)||0}_proportionate(e,t){const s=this._elementSize,n=e==="x"?s.width/s.height:s.height/s.width;return t*n}_getProportionalDelta(e){const{x:t,y:s}=e,n=this._proportionate("y",t);if(n>=s)return{x:t,y:n};const o=this._proportionate("x",s);return o>=t?{x:o,y:s}:{x:0,y:0}}_getDirectionName(e){const t=this._movingSides;return e==="x"?t.left?"left":"right":t.top?"top":"bottom"}_fitIntoArea(e,t){const s=this._getDirectionName(e);return Math.min(t,this[`_${s}MaxOffset`]??1/0)}_fitDeltaProportionally(e){let t=v({},e);const s=this._elementSize,{minWidth:n,minHeight:o,maxWidth:r,maxHeight:a}=this.option(),l=()=>s.width+t.x,d=()=>s.height+t.y,c=p=>t[p]===this._fitIntoArea(p,t[p]),_=()=>Mi(l(),n,r)&&c("x"),u=()=>Mi(d(),o,a)&&c("y");if(!_()){const p=this._fitIntoArea("x",Re(l(),n,r)-s.width);t={x:p,y:this._proportionate("y",p)}}if(!u()){const p=this._fitIntoArea("y",Re(d(),o,a)-s.height);t={x:this._proportionate("x",p),y:p}}return _()&&u()?t:{x:0,y:0}}_fitDelta(e){const{x:t,y:s}=e,n=this._elementSize,{minWidth:o,minHeight:r,maxWidth:a,maxHeight:l}=this.option();return{x:Re(n.width+t,o,a)-n.width,y:Re(n.height+s,r,l)-n.height}}_getDeltaByOffset(e){const t=this._movingSides,s=this._isCornerHandler(t)&&this.option("keepAspectRatio");let n={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)};if(s){const o=this._getProportionalDelta(n);n=this._fitDeltaProportionally(o)}else{const o=this._fitDelta(n);n=this._roundByStep(o)}return n}_updatePosition(e,t){const{width:s,height:n}=t,o=this._elementLocation,r=this._movingSides,a=this.$element(),l=this._getElementSize(),d=e.y*(r.top?-1:1)-((l.height||n)-n),c=e.x*(r.left?-1:1)-((l.width||s)-s);ye(a,{top:o.top+(r.top?d:0),left:o.left+(r.left?c:0)})}_dragHandler(e){const t=this._getOffset(e),s=this._getDeltaByOffset(t),n=this._updateDimensions(s);this._updatePosition(s,n),this._triggerResizeAction(e,n)}_updateDimensions(e){const t=_=>_.substring(_.length-2)==="px",{stepPrecision:s}=this.option(),n=s==="strict",o=this._elementSize,r=o.width+e.x,a=o.height+e.y,l=this.$element()[0].style,d=e.x||n||t(l.width),c=e.y||n||t(l.height);return d&&this.option({width:r}),c&&this.option({height:a}),{width:d?r:o.width,height:c?a:o.height}}_triggerResizeAction(e,t){var s;const{width:n,height:o}=t;(s=this._resizeAction)===null||s===void 0||s.call(this,{event:e,width:this.option("width")||n,height:this.option("height")||o,handles:this._movingSides}),$e(this.$element())}_isCornerHandler(e){return Object.values(e).reduce(((t,s)=>t^s),0)===0}_getOffset(e){const{offset:t}=e,s=this._movingSides;return!s.left&&!s.right&&(t.x=0),!s.top&&!s.bottom&&(t.y=0),t}_roundByStep(e){const{stepPrecision:t}=this.option();return t==="strict"?this._roundStrict(e):this._roundNotStrict(e)}_getSteps(){const{step:e,roundStepValue:t}=this.option();return Xr(e,!t)}_roundNotStrict(e){const{h:t,v:s}=this._getSteps();return{x:e.x-e.x%t,y:e.y-e.y%s}}_roundStrict(e){const t=this._movingSides,s={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)},n=this._getSteps(),o=this._elementLocation,r=this._elementSize,a=t.left?o.left:o.left+r.width,l=t.top?o.top:o.top+r.height,d=(a+s.x)%n.h,c=(l+s.y)%n.v,_=Math.sign||(w=>{const E=+w;return E===0||isNaN(E)?E:E>0?1:-1}),u=(w,E)=>(1+.2*_(E))%1*w,p=(w,E)=>Math.abs(w)<.2*E;let g=s.x-d,f=s.y-c;d>u(n.h,s.x)&&(g+=n.h),c>u(n.v,s.y)&&(f+=n.v);const C=(t.left||t.right)&&!p(s.x,n.h)?g:0,b=(t.top||t.bottom)&&!p(s.y,n.v)?f:0;return{x:C*(t.left?-1:1),y:b*(t.top?-1:1)}}_getMovingSides(e){const t=h(e.target),s=t.hasClass("dx-resizable-handle-corner-top-left"),n=t.hasClass("dx-resizable-handle-corner-top-right"),o=t.hasClass("dx-resizable-handle-corner-bottom-left"),r=t.hasClass("dx-resizable-handle-corner-bottom-right");return{top:t.hasClass("dx-resizable-handle-top")||s||n,left:t.hasClass("dx-resizable-handle-left")||s||o,bottom:t.hasClass("dx-resizable-handle-bottom")||o||r,right:t.hasClass("dx-resizable-handle-right")||n||r}}_getArea(){let{area:e}=this.option();return oe(e)&&(e=e.call(this)),q(e)?this._getAreaFromObject(e):this._getAreaFromElement(e)}_getAreaScrollOffset(){const{area:e}=this.option(),t=!oe(e)&&!q(e),s={scrollY:0,scrollX:0};if(t){const n=h(e)[0];_t(n)&&(s.scrollX=n.pageXOffset,s.scrollY=n.pageYOffset)}return s}_getAreaFromObject(e){const t={width:e.right-e.left,height:e.bottom-e.top,offset:{left:e.left,top:e.top}};return this._correctAreaGeometry(t),t}_getAreaFromElement(e){const t=h(e);if(!t.length)return;const s={width:Ji(t),height:Xi(t),offset:T({top:0,left:0},_t(t[0])?{}:t.offset())};return this._correctAreaGeometry(s,t),s}_correctAreaGeometry(e,t){const s=t?this._getBorderWidth(t,"left"):0,n=t?this._getBorderWidth(t,"top"):0;e.offset.left+=s+this._getBorderWidth(this.$element(),"left"),e.offset.top+=n+this._getBorderWidth(this.$element(),"top"),e.width-=X(this.$element())-Ji(this.$element()),e.height-=K(this.$element())-Xi(this.$element())}_dragEndHandler(e){var t;const s=this.$element();(t=this._resizeEndAction)===null||t===void 0||t.call(this,{event:e,width:X(s),height:K(s),handles:this._movingSides}),this._toggleResizingClass(!1)}_renderWidth(e){const{minWidth:t,maxWidth:s}=this.option();this.option("width",Re(e,t,s))}_renderHeight(e){const{minHeight:t,maxHeight:s}=this.option();this.option("height",Re(e,t,s))}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"disabled":this._toggleEventHandlers(!s),super._optionChanged(e);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":ae()&&this._renderWidth(X(this.$element()));break;case"minHeight":case"maxHeight":ae()&&this._renderHeight(K(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:super._optionChanged(e)}}_clean(){this.$element().find(".dx-resizable-handle").remove()}_useTemplates(){return!1}}ie(Os,mr);class Eh{constructor(e){this.init(e)}init(e){let{dragEnabled:t,handle:s,draggableElement:n,positionController:o}=e;this._positionController=o,this._draggableElement=n,this._handle=s,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){const e=this._getEventNames();m.on(this._handle,e.startEventName,(t=>{this._dragStartHandler(t)})),m.on(this._handle,e.updateEventName,(t=>{this._dragUpdateHandler(t)})),m.on(this._handle,e.endEventName,(t=>{this._dragEndHandler(t)}))}unsubscribe(){const e=this._getEventNames();m.off(this._handle,e.startEventName),m.off(this._handle,e.updateEventName),m.off(this._handle,e.endEventName)}_getEventNames(){const e=I(so,"overlayDrag"),t=I(io,"overlayDrag"),s=I(no,"overlayDrag");return{startEventName:e,updateEventName:t,endEventName:s}}_dragStartHandler(e){const t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=t.top,e.maxBottomOffset=t.bottom,e.maxLeftOffset=t.left,e.maxRightOffset=t.right}_dragUpdateHandler(e){const t={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(t),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,t,s){if(!this._dragEnabled)return;s.preventDefault(),s.stopPropagation();const n=this._fitOffsetIntoAllowedRange(e,t);this._moveByOffset(n),this._dragEndHandler(s)}_fitOffsetIntoAllowedRange(e,t){const s=this._getAllowedOffsets();return{top:Re(e,-s.top,s.bottom),left:Re(t,-s.left,s.right)}}_getContainerDimensions(){const e=H.getDocument(),t=this._positionController.$dragResizeContainer.get(0);let s=X(t),n=K(t);return _t(t)&&(n=Math.max(e.body.clientHeight,n),s=Math.max(e.body.clientWidth,s)),{width:s,height:n}}_getContainerPosition(){const e=this._positionController.$dragResizeContainer.get(0);return _t(e)?{top:0,left:0}:Qi(e)}_getElementPosition(){return Qi(this._draggableElement)}_getInnerDelta(){const e=this._getContainerDimensions(),t=this._getElementDimensions();return{x:e.width-t.width,y:e.height-t.height}}_getOuterDelta(){const{width:e,height:t}=this._getElementDimensions(),{outsideDragFactor:s}=this._positionController;return{x:e*s,y:t*s}}_getFullDelta(){const e=this._getInnerDelta(),t=this._getOuterDelta();return{x:e.x+t.x,y:e.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};const s=this._getElementPosition(),n=this._getContainerPosition(),o=this._getOuterDelta();return{top:s.top-n.top+o.y,bottom:-s.top+n.top+e.y,left:s.left-n.left+o.x,right:-s.left+n.left+e.x}}_moveByOffset(e){const t=Kt(this._draggableElement),s={left:t.left+e.left,top:t.top+e.top};ye(this._draggableElement,s)}}const xh={setOverflow:L,restoreOverflow:L},wh=()=>{if(!Ge.hasWindow())return xh;const i=Ge.getWindow(),{documentElement:e}=H.getDocument(),t=H.getBody(),s=$.real().platform==="ios",n={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:s?()=>{if(S(n.position)||t.style.position==="fixed")return;const{scrollY:o,scrollX:r}=i;n.position=t.style.position,n.top=t.style.top,n.left=t.style.left,t.style.setProperty("position","fixed"),t.style.setProperty("top",-o+"px"),t.style.setProperty("left",-r+"px")}:()=>{(()=>{const o=i.innerWidth-e.clientWidth;if(n.paddingRight||o<=0)return;const r=i.getComputedStyle(t).getPropertyValue("padding-right"),a=parseInt(r,10);n.paddingRight=a,t.style.setProperty("padding-right",`${a+o}px`)})(),!(n.overflow||t.style.overflow==="hidden")&&(n.overflow=t.style.overflow,n.overflowX=t.style.overflowX,n.overflowY=t.style.overflowY,t.style.setProperty("overflow","hidden"))},restoreOverflow:s?()=>{if(!S(n.position))return;const o=-parseInt(t.style.top,10),r=-parseInt(t.style.left,10);["position","top","left"].forEach((a=>{n[a]?t.style.setProperty(a,n[a]):t.style.removeProperty(a)})),i.scrollTo(r,o),n.position=null}:()=>{S(n.paddingRight)&&(n.paddingRight?t.style.setProperty("padding-right",`${n.paddingRight}px`):t.style.removeProperty("padding-right"),n.paddingRight=null),["overflow","overflowX","overflowY"].forEach((o=>{if(!S(n[o]))return;const r=o.replace(/(X)|(Y)/,(a=>`-${a.toLowerCase()}`));n[o]?t.style.setProperty(r,n[o]):t.style.removeProperty(r),n[o]=null}))}}},Ns=Ge.getWindow();class Th extends ka{constructor(e){super(e);const t=this._properties,{properties:s}=e,{fullScreen:n,forceApplyBindings:o,dragOutsideBoundary:r,dragAndResizeArea:a,outsideDragFactor:l}=s;this._properties=v({},t,{fullScreen:n,forceApplyBindings:o,dragOutsideBoundary:r,dragAndResizeArea:a,outsideDragFactor:l}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._properties.dragOutsideBoundary?1:this._properties.outsideDragFactor}set outsideDragFactor(e){this._properties.outsideDragFactor=e}set fullScreen(e){this._properties.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}set dragAndResizeArea(e){this._properties.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._properties.dragOutsideBoundary=e,this._updateDragResizeContainer()}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._properties.fullScreen)ye(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,t;(e=(t=this._properties).forceApplyBindings)===null||e===void 0||e.call(t),super.positionContent()}}_normalizePosition(e){const t=super._normalizePosition(e);return this._properties.fullScreen&&(t.of="window"),t}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._properties.dragOutsideBoundary?h(Ns):this._properties.dragAndResizeArea?h(this._properties.dragAndResizeArea):va().get(0)||this._properties.container?this._$markupContainer:h(Ns)}_getVisualContainer(){return this._properties.fullScreen?h(Ns):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const Dh=Ge.getWindow(),kn=["cancel","clear","done"],Oe={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},Ah=i=>{const e=$.current(),{platform:t}=e;let s="bottom",n="before";if(t==="ios")switch(i){case"cancel":s="top";break;case"clear":s="top",n="after";break;case"done":n="after"}else if(t==="android")switch(i){case"cancel":case"done":n="after"}return{toolbar:s,location:n}},kh=i=>i.toLowerCase()==="done"?"OK":Yn(i,!0),$h=(i,e)=>i===Oe.flex?-e:0;class gr extends oo{_supportedKeys(){return v({},super._supportedKeys(),{upArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveUp(e)},downArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveDown(e)},leftArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveLeft(e)},rightArrow:e=>{var t;(t=this._drag)===null||t===void 0||t.moveRight(e)}})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:e=>$.real().deviceType==="desktop"&&e.platform==="generic",options:{dragEnabled:!0}},{device:()=>$.real().deviceType==="desktop"&&!$.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>mt(j()),options:{useFlatToolbarButtons:!0}},{device:()=>He(j()),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])}_iosAnimation(){return{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}}}_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}}_init(){const{_wrapperClassExternal:e}=this.option(),t=e?`dx-popup-wrapper ${e}`:"dx-popup-wrapper";super._init(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(t),this._$popupContent=this._$content.wrapInner(h("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")}_render(){const e=!!this.option("fullScreen");this._toggleFullScreenClass(e),super._render()}_createBodyOverflowManager(){this._bodyOverflowManager=wh()}_toggleFullScreenClass(e){this.$overlayContent().toggleClass("dx-popup-fullscreen",e).toggleClass("dx-popup-normal",!e)}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({title:new Ms,bottom:new Ms})}_getActionsList(){return super._getActionsList().concat(["onResizeStart","onResize","onResizeEnd"])}_contentResizeHandler(e){this._shouldSkipContentResize(e)||this._renderGeometry({shouldOnlyReposition:!0})}_isShowAnimationResizing(){const e=this.option("animation");return["to","from"].some((t=>{var s;const n=e==null||(s=e.show)===null||s===void 0?void 0:s[t];return G(n)&&("width"in n||"height"in n)}))}_updateResizeCallbackSkipCondition(){const e=this._isShowAnimationResizing();this._shouldSkipContentResize=t=>e&&this._showAnimationProcessing||this._areContentDimensionsRendered(t)}_observeContentResize(e){if(!this.option("useResizeObserver"))return;const t=this._$content.get(0);e?ds.observe(t,(s=>{this._contentResizeHandler(s)})):ds.unobserve(t)}_areContentDimensionsRendered(e){var t,s,n;const o=(t=e.contentBoxSize)===null||t===void 0?void 0:t[0];if(o){var r,a;return parseInt(o.inlineSize,10)===((r=this._renderedDimensions)===null||r===void 0?void 0:r.width)&&parseInt(o.blockSize,10)===((a=this._renderedDimensions)===null||a===void 0?void 0:a.height)}const{contentRect:l}=e;return parseInt(l.width,10)===((s=this._renderedDimensions)===null||s===void 0?void 0:s.width)&&parseInt(l.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)}_renderContent(){super._renderContent(),this._observeContentResize(!0)}_processContentRendering(){this._renderTopToolbar(),this._renderBottomToolbar(),this._renderResize(),super._processContentRendering()}_getTopToolbarItems(){const{showTitle:e,title:t}=this.option(),{ios:s}=$.current(),n=this._getToolbarItems("top");return e&&t&&n.unshift({location:s?"center":"before",text:t}),n}_renderTopToolbar(){const{showTitle:e}=this.option(),t=this._getTopToolbarItems();if(e||t.length>0){var n;this._$topToolbar?this._updateToolbarOptions("top",{items:t}):this._renderTopToolbarImpl(),(n=this._$topToolbar)===null||n===void 0||n.toggleClass("dx-has-close-button",this._hasCloseButton())}else{var o;(o=this._$topToolbar)===null||o===void 0||o.detach()}this._toggleAriaLabel()}_renderTopToolbarImpl(){var e;(e=this._$topToolbar)===null||e===void 0||e.remove();const t=this._getTopToolbarItems(),s=h("<div>").addClass("dx-popup-title").addClass(si).insertBefore(this.$content());this._$topToolbar=this._renderToolbar("titleTemplate",t,s,{onInitialized:n=>{this._topToolbar=n.component}}),this._$topToolbar.addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$topToolbar)}_renderBottomToolbar(){const e=this._getToolbarItems("bottom");if(!e.length){var t;(t=this._$bottomToolbar)===null||t===void 0||t.detach();return}this._$bottomToolbar?this._updateToolbarOptions("bottom",{items:e}):this._renderBottomToolbarImpl(),this._toggleClasses()}_renderBottomToolbarImpl(){var e;(e=this._$bottomToolbar)===null||e===void 0||e.remove();const t=this._getToolbarItems("bottom"),s=h("<div>").addClass("dx-popup-bottom").addClass(si).insertAfter(this.$content());this._$bottomToolbar=this._renderToolbar("bottomTemplate",t,s,{compactMode:!0,onInitialized:n=>{this._bottomToolbar=n.component}}),this._$bottomToolbar.addClass("dx-popup-bottom")}_triggerToolbarResizeEvent(){[this._$topToolbar,this._$bottomToolbar].forEach((e=>{e&&($e(e),$e(e))}))}_renderToolbar(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=this._getTemplateByOption(e);return o instanceof Ms?this._renderByPolymorphicTemplate(t,s,n):this._renderByTemplate(o,s)}_renderByPolymorphicTemplate(e,t,s){const{disabled:n,rtlEnabled:o,useDefaultToolbarButtons:r,useFlatToolbarButtons:a}=this.option(),l=T({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),d=T(s,{disabled:n,rtlEnabled:o,items:e,useDefaultButtons:r,useFlatButtons:a,integrationOptions:l});this._getTemplate("dx-polymorph-widget").render({container:t,model:{widget:this._getToolbarName(),options:d}});const _=t.children("div");return t.replaceWith(_),_}_renderByTemplate(e,t){const s=h(e.render({container:O(t)}));return s.hasClass("dx-template-wrapper")&&(t.replaceWith(s),t=s),t}_updateToolbarOptions(e,t){const s=e==="top"?this._topToolbar:this._bottomToolbar;s==null||s.option(t)}_toggleAriaLabel(){var e;const{title:t,showTitle:s}=this.option(),o=s&&!!t?new Q().toString():null;(e=this._$topToolbar)===null||e===void 0||e.find(".dx-toolbar-label").eq(0).attr("id",o),this.$overlayContent().attr("aria-labelledby",o)}_animateShowing(){this._triggerToolbarResizeEvent(),super._animateShowing()}_renderVisibilityAnimate(e){return super._renderVisibilityAnimate(e)}_hide(){return this._observeContentResize(!1),super._hide()}_executeTitleRenderAction(e){this._getTitleRenderAction()({titleElement:O(e)})}_getTitleRenderAction(){return this._titleRenderAction??this._createTitleRenderAction()}_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]}),this._titleRenderAction}_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}}_getCloseButtonRenderer(){return(e,t,s)=>{const n=h("<div>").addClass("dx-closebutton");this._createComponent(n,it,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),h(s).append(n)}}_getToolbarItems(e){const{platform:t}=$.current(),{toolbarItems:s}=this.option(),n=[];this._toolbarItemClasses=[];let o=0;return x(s,((r,a)=>{const l=S(a.shortcut),d=l?Ah(a.shortcut):a;if(l&&t==="ios"&&o<2&&(d.toolbar="top",o++),d.toolbar=a.toolbar||d.toolbar||"top",d&&d.toolbar===e){l&&T(d,{location:a.location},this._getToolbarItemByAlias(a));const c=t==="generic";a.shortcut==="done"&&c||a.shortcut==="cancel"&&!c?n.unshift(d):n.push(d)}})),e==="top"&&this._hasCloseButton()&&n.push(this._getCloseButton()),n}_hasCloseButton(){const{showCloseButton:e,showTitle:t}=this.option();return e&&t}_getToolbarButtonStylingMode(e){return as(j())?e==="done"?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"}_getToolbarButtonType(e){return as(j())&&e==="done"||this.option("useDefaultToolbarButtons")?"default":"normal"}_getToolbarItemByAlias(e){const t=e.shortcut;if(!kn.includes(t))return!1;const s=T({text:k.format(kh(t)),onClick:this._createToolbarItemAction(e.onClick),integrationOptions:{},type:this._getToolbarButtonType(t),stylingMode:this._getToolbarButtonStylingMode(t)},e.options||{}),n=`dx-popup-${t}`;return this._toolbarItemClasses.push(n),{template:(o,r,a)=>{const l=h("<div>").addClass(n).appendTo(a);this._createComponent(l,it,s)}}}_createToolbarItemAction(e){return this._createAction(e,{afterExecute(t){t.component.hide()}})}_getToolbarName(){return"dxToolbarBase"}_toggleDisabledState(e){super._toggleDisabledState(...arguments),this.$content().toggleClass("dx-state-disabled",!!e)}_toggleClasses(){x(kn,((t,s)=>{var n;const o=`dx-popup-${s}`,r=this._toolbarItemClasses.includes(o);this.$wrapper().toggleClass(`${o}-visible`,r),(n=this._$bottomToolbar)===null||n===void 0||n.toggleClass(o,r)}))}_toggleFocusClass(e,t){if(super._toggleFocusClass(e,t),e&&!$a(this._zIndex)){const s=Oa(this._zIndexInitValue());Ra(this._zIndex),this._zIndex=s,this._$wrapper.css("zIndex",s),this._$content.css("zIndex",s)}}_toggleContentScrollClass(){const e=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",e)}_getPositionControllerConfig(){const e=super._getPositionControllerConfig(),{fullScreen:t,forceApplyBindings:s,dragOutsideBoundary:n,dragAndResizeArea:o,outsideDragFactor:r}=this.option(),a=v({},e.properties,{fullScreen:t,forceApplyBindings:s,dragOutsideBoundary:n,dragAndResizeArea:o,outsideDragFactor:r}),l=v({},e.elements);return{properties:a,elements:l}}_initPositionController(){this._positionController||(this._positionController=new Th(this._getPositionControllerConfig()))}_getDragTarget(){return this.topToolbar()}_renderGeometry(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{visible:t,useResizeObserver:s}=this.option(),{forceStopAnimation:n,shouldOnlyReposition:o,isDimensionChange:r}=e;if(t&&Ge.hasWindow()){const l=this._showAnimationProcessing&&!n&&s;this._isAnimationPaused=l||void 0,this._stopAnimation(),o?this._renderPosition(!1):this._renderGeometryImpl(r),l&&(this._animateShowing(),this._isAnimationPaused=void 0)}}_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(B(this._$content),10),height:parseInt(M(this._$content),10)})}_renderGeometryImpl(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||this._resetContentHeight(),super._renderGeometryImpl(),this._cacheDimensions(),this._setContentHeight()}_resetContentHeight(){this._getOptionValue("height")==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})}_renderDrag(){const e=this._getDragTarget(),{dragEnabled:t}=this.option();if(!e)return;const s={dragEnabled:t,handle:e.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(s):this._drag=new Eh(s),this.$overlayContent().toggleClass("dx-popup-draggable",t)}_renderResize(){this._resizable=this._createComponent(this._$content,mr,{handles:this.option("resizeEnabled")?"all":"none",onResizeStart:e=>{var t,s;this._observeContentResize(!1),(t=this._actions)===null||t===void 0||(s=t.onResizeStart)===null||s===void 0||s.call(t,e)},onResize:e=>{var t,s;this._setContentHeight(),(t=this._actions)===null||t===void 0||(s=t.onResize)===null||s===void 0||s.call(t,e)},onResizeEnd:e=>{this._resizeEndHandler(e),this._observeContentResize(!0)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})}_resizeEndHandler(e){var t,s;const n=this._resizable.option("width"),o=this._resizable.option("height");n&&this._setOptionWithoutOptionChange("width",n),o&&this._setOptionWithoutOptionChange("height",o),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(e.event),(t=this._actions)===null||t===void 0||(s=t.onResizeEnd)===null||s===void 0||s.call(t,e)}_setContentHeight(){const{forceApplyBindings:e}=this.option();(e??L)();const t=this.$overlayContent().get(0),s=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(s,t)),this._setHeightClasses(this.$overlayContent(),s)}_chooseHeightStrategy(e){const t=e.style.width==="auto"||e.style.width==="";let s=Oe.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(t?s=Oe.inherit:s=Oe.flex),s}_getHeightCssStyles(e,t){let s={};const n=this._getOptionValue("maxHeight",t),o=this._getOptionValue("minHeight",t),r=this._splitPopupHeight(),a=$h(e,r.popupVerticalPaddings),l=r.header+r.footer+r.contentVerticalOffsets+r.popupVerticalOffsets+a;if(e===Oe.static){if(!this._isAutoHeight()||n||o){const c=(this.option("fullScreen")?Math.min(Ne(t).height,Ge.getWindow().innerHeight):Ne(t).height)-l;s={height:Math.max(0,c),minHeight:"auto",maxHeight:"auto"}}}else{const d=h(this._positionController.$visualContainer).get(0),c=ba(n,-l,d);s={height:"auto",minHeight:Ca(o,-l,d),maxHeight:c}}return s}_setHeightClasses(e,t){let s="";for(const n in Oe)Oe[n]!==t&&(s+=` ${Oe[n]}`);e.removeClass(s).addClass(t)}_isAutoHeight(){return this.$overlayContent().get(0).style.height==="auto"}_splitPopupHeight(){const e=this.topToolbar(),t=this.bottomToolbar();return{header:Zi(e==null?void 0:e.get(0)),footer:Zi(t==null?void 0:t.get(0)),contentVerticalOffsets:Hs(this.$overlayContent().get(0),!0),popupVerticalOffsets:Hs(this.$content().get(0),!0),popupVerticalPaddings:Hs(this.$content().get(0),!1)}}_isAllWindowCovered(){const{fullScreen:e}=this.option();return super._isAllWindowCovered()||!!e}_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):super._renderDimensions(),Ge.hasWindow()&&this._renderFullscreenWidthClass()}_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})}_clean(){super._clean(),this._observeContentResize(!1)}_dispose(){super._dispose(),this._toggleBodyScroll(!0)}_renderFullscreenWidthClass(){const e=X(this.$overlayContent())===B(Dh);this.$overlayContent().toggleClass("dx-popup-fullscreen-width",e)}_toggleSafariScrolling(){this.option("enableBodyScroll")&&super._toggleSafariScrolling()}_toggleBodyScroll(e){if(!this._bodyOverflowManager)return;const{setOverflow:t,restoreOverflow:s}=this._bodyOverflowManager;e?s():t()}refreshPosition(){this._renderPosition()}_optionChanged(e){var t;const{value:s,name:n}=e;switch(n){case"rtlEnabled":case"disabled":{super._optionChanged(e);const r={[n]:!!s};this._updateToolbarOptions("top",r),this._updateToolbarOptions("bottom",r);break}case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(s);break;case"showTitle":case"title":this._renderTopToolbar(),this._renderGeometry(),$e(this.$overlayContent());break;case"titleTemplate":this._renderTopToolbarImpl(),this._renderGeometry(),$e(this.$overlayContent());break;case"bottomTemplate":this._renderBottomToolbarImpl(),this._renderGeometry(),$e(this.$overlayContent());break;case"container":if(super._optionChanged(e),this.option("resizeEnabled")){var o;(o=this._resizable)===null||o===void 0||o.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":super._optionChanged(e),(t=this._resizable)===null||t===void 0||t.option(n,s);break;case"onTitleRendered":this._createTitleRenderAction();break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":this._renderTopToolbar(),this._renderBottomToolbar(),this._renderGeometry(),this._triggerToolbarResizeEvent();break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=s,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=s,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=s;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),$e(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=s,this._toggleFullScreenClass(!!s),this._toggleSafariScrolling(),this._renderGeometry(),$e(this.$overlayContent());break;case"showCloseButton":this._renderTopToolbar();break;case"preventScrollEvents":super._optionChanged(e),this._toggleContentScrollClass();break;default:super._optionChanged(e)}}bottomToolbar(){return this._$bottomToolbar}topToolbar(){return this._$topToolbar}$content(){return this._$popupContent}content(){return O(this.$content())}$overlayContent(){return this._$content}getFocusableElements(){return this.$wrapper().find("[tabindex]").filter(((e,t)=>t.getAttribute("tabindex")>=0))}}ie("dxPopup",gr);const Oh="dxswipestart",Rh="dxswipe",vr="dxswipeend",Bh={defaultItemSizeFunc(){return B(this.getElement())},getBounds(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio(i){return(U(i).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,i)},isFastSwipe(i){const e=U(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},Ph={defaultItemSizeFunc(){return M(this.getElement())},getBounds(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio(i){return(U(i).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,i)},isFastSwipe(i){const e=U(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},Mh={horizontal:Bh,vertical:Ph},Hh=Zn.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor(i){this.callBase(i),this.direction="horizontal",this.elastic=!0},_getStrategy(){return Mh[this.direction]},_defaultItemSizeFunc(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init(i){this._tickData=U(i)},_start(i){this._savedEventData=U(i),i=this._fireEvent("dxswipestart",i),i.cancel||(this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset)},_move(i){const e=this._getStrategy(),t=U(i);let s=e.calcOffsetRatio.call(this,i);s=this._fitOffset(s,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent("dxswipe",i,{offset:s}),i.cancelable!==!1&&i.preventDefault()},_end(i){const e=this._getStrategy(),t=e.calcOffsetRatio.call(this,i),s=e.isFastSwipe.call(this,i);let n=t,o=this._calcTargetOffset(t,s);n=this._fitOffset(n,this.elastic),o=this._fitOffset(o,!1),this._fireEvent("dxswipeend",i,{offset:n,targetOffset:o})},_fitOffset(i,e){const s=this._getStrategy().getBounds.call(this);return i<-s[0]?e?(-2*s[0]+i)/3:-s[0]:i>s[1]?e?(2*s[1]+i)/3:s[1]:i},_calcTargetOffset(i,e){let t;return e?(t=Math.ceil(Math.abs(i)),i<0&&(t=-t)):t=Math.round(i),t}});di({emitter:Hh,events:["dxswipestart","dxswipe","dxswipeend"]});const Dt=et(),{abstract:$n}=R,Lh=R.inherit({ctor(i,e){this._store=i,this._dirty=!!e.data,this.save();const t=this._immediate=e.immediate,s=Math.max(100,e.flushInterval||1e4);if(!t){const n=this.save.bind(this);setInterval(n,s),m.on(Dt,"beforeunload",n),Dt.cordova&&H.listen(H.getDocument(),"pause",n,!1)}},notifyChanged(){this._dirty=!0,this._immediate&&this.save()},load(){this._store._array=this._loadImpl(),this._dirty=!1},save(){this._dirty&&(this._saveImpl(this._store._array),this._dirty=!1)},_loadImpl:$n,_saveImpl:$n}),Fh=Lh.inherit({ctor(i,e){const{name:t}=e;if(!t)throw me.Error("E4013");this._key=`dx-data-localStore-${t}`,this.callBase(i,e)},_loadImpl(){const i=Dt.localStorage.getItem(this._key);return i?JSON.parse(i):[]},_saveImpl(i){i.length?Dt.localStorage.setItem(this._key,JSON.stringify(i)):Dt.localStorage.removeItem(this._key)}}),Vh={dom:Fh};lo.inherit({ctor(i){typeof i=="string"?i={name:i}:i=i||{},this.callBase(i),this._backend=new Vh[i.backend||"dom"](this,i),this._backend.load()},_clearCache(){this._backend.load()},clear(){this.callBase(),this._backend.notifyChanged()},_insertImpl(i){const e=this._backend;return this.callBase(i).done(e.notifyChanged.bind(e))},_updateImpl(i,e){const t=this._backend;return this.callBase(i,e).done(t.notifyChanged.bind(t))},_removeImpl(i){const e=this._backend;return this.callBase(i).done(e.notifyChanged.bind(e))}},"local");const Wh=/^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$/,Kh=/^\/Date\((-?\d+)((\+|-)?(\d+)?)\)\/$/,zh=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[-+]{1}\d{2}(:?)(\d{2})?)?$/,On="application/json;odata=verbose",_s=i=>js(i)==="string"?i.split():i,br=i=>/\./.test(i),ii=(i,e,t)=>{for(i=String(i);i.length<e;)i=t?`${i}0`:`0${i}`;return i},Di=(i,e,t)=>{const s=[],n=o=>ii(o,2);return s.push(i.getFullYear()),s.push("-"),s.push(n(i.getMonth()+1)),s.push("-"),s.push(n(i.getDate())),e&&i.getHours()+i.getMinutes()+i.getSeconds()+i.getMilliseconds()<1||(s.push("T"),s.push(n(i.getHours())),s.push(":"),s.push(n(i.getMinutes())),s.push(":"),s.push(n(i.getSeconds())),i.getMilliseconds()&&(s.push("."),s.push(ii(i.getMilliseconds(),3))),t||s.push("Z")),s.join("")},Nh=i=>{const e=new Date(60*new Date(0).getTimezoneOffset()*1e3),t=i.replace("Z","").split("T"),s=/(\d{4})-(\d{2})-(\d{2})/.exec(t[0]),n=/(\d{2}):(\d{2}):(\d{2})\.?(\d{0,7})?/.exec(t[1]);if(e.setFullYear(Number(s[1])),e.setMonth(Number(s[2])-1),e.setDate(Number(s[3])),Array.isArray(n)&&n.length){e.setHours(Number(n[1])),e.setMinutes(Number(n[2])),e.setSeconds(Number(n[3]));let o=(n[4]||"").slice(0,3);o=ii(o,3,!0),e.setMilliseconds(Number(o))}return e},Uh=i=>/^(?:[a-z]+:)?\/{2,2}/i.test(i),Gh=i=>{const e=i.indexOf("?");return e>-1?i.substr(0,e):i},jh=(i,e)=>{let t;const s=Gh(i).split("/"),n=e.split("/");for(s.pop();n.length;)t=n.shift(),t===".."?s.pop():s.push(t);return s.join("/")},qh=i=>{const e=[];for(const t in i)e.push(`${t}=${i[t]}`);return e.join("&")},Yh=function(i,e){var t;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e=T({async:!0,method:"get",url:"",params:{},payload:null,headers:{},timeout:3e4},e),(t=s.beforeSend)===null||t===void 0||t.call(s,e);const{async:n,timeout:o,headers:r}=e;let{url:a,method:l}=e;const{jsonp:d,withCredentials:c}=s;l=(l||"get").toLowerCase();const _=l==="get",u=_&&d,p=T({},e.params),g=_?p:(f=e.payload,JSON.stringify(f,(function(w,E){if(!(this[w]instanceof Date))return E;switch(E=Di(this[w]),i){case 2:return E.substr(0,E.length-1);case 3:case 4:return E;default:throw me.Error("E4002")}})));var f;const C=!_&&qh(p),b=!_&&On;return C&&(a+=(a.indexOf("?")>-1?"&":"?")+C),u&&(g.$format="json"),{url:a,data:g,dataType:u?"jsonp":"json",jsonp:u&&"$callback",method:l,async:n,timeout:o,headers:r,contentType:b,accepts:{json:[On,"text/plain"].join()},xhrFields:{withCredentials:c}}},Ai=(i,e,t)=>{const{deserializeDates:s,fieldTypes:n,countOnly:o,isPaged:r}=t,a=new y,l=Yh(i,e,t);return Pa.sendRequest(l).always(((d,c)=>{const u=Qh(d,c,{deserializeDates:s,fieldTypes:n},l),{error:p,data:g,count:f}=u;let{nextUrl:C}=u;if(p)p.message!==Ma&&a.reject(p);else if(o)isFinite(f)?a.resolve(f):a.reject(me.Error("E4018"));else if(C&&!r)Uh(C)||(C=jh(l.url,C)),Ai(i,{url:C},t).fail(a.reject).done((b=>a.resolve(g.concat(b))));else{const b=isFinite(f)?{totalCount:f}:void 0;a.resolve(g,b)}})),a.promise()},Xh=i=>{let e,t,s=i;if("message"in i){var n;e=((n=i.message)===null||n===void 0?void 0:n.value)||i.message}for(;(s=s.innererror||s.internalexception)&&(t=s.message,e=t??e,!(s.internalexception&&e.indexOf("inner exception")===-1)););return e},Jh=(i,e,t)=>{var s,n,o,r;if(e==="nocontent")return null;let a="Unknown error",l=i,d=200;const c={requestOptions:t};if(e!=="success"){const{status:u,responseText:p}=i;d=u,a=Ha(i,e);try{l=JSON.parse(p)}catch{}}const _=((s=l)===null||s===void 0?void 0:s.then)||((n=l)===null||n===void 0?void 0:n.error)||((o=l)===null||o===void 0?void 0:o["odata.error"])||((r=l)===null||r===void 0?void 0:r["@odata.error"]);if(_){a=Xh(_)||a,c.errorDetails=_,d===200&&(d=500);const u=Number(_.code);isFinite(u)&&u>=400&&(d=u)}return d>=400||d===0?(c.httpStatus=d,T(Error(a),c)):null},Qh=(i,e,t,s)=>{const n=Jh(i,e,s);if(n)return{error:n};if(!q(i))return{data:i};const o="d"in i&&(Array.isArray(i.d)||G(i.d))?Zh(i):eu(i);return Cr(o,t),o},Zh=i=>{let{d:e}=i;return S(e)?{data:e.results??e,nextUrl:e.__next,count:parseInt(e.__count,10)}:{error:Error("Malformed or unsupported JSON response received")}},eu=i=>({data:i.value??i,nextUrl:i["@odata.nextLink"],count:parseInt(i["@odata.count"],10)}),Pe=R.inherit({ctor(i){this._value=i},valueOf(){return this._value}}),Cr=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x(i,((t,s)=>{if(s!==null&&typeof s=="object")"results"in s&&(i[t]=s.results),Cr(i[t],e);else if(typeof s=="string"){const{fieldTypes:n,deserializeDates:o}=e;if((!n||n[t]!=="String")&&Wh.test(s)&&(i[t]=new Q(s)),o!==!1)if(Kh.exec(s)){const a=new Date(Number(RegExp.$1)+60*RegExp.$2*1e3);i[t]=new Date(a.valueOf()+60*a.getTimezoneOffset()*1e3)}else zh.test(s)&&(i[t]=new Date(Nh(i[t]).valueOf()))}}))},tu=i=>`datetime'${Di(i,!0,!0)}'`,su=i=>`'${i.replace(/'/g,"''")}'`,Ve=i=>i instanceof Pe?i.valueOf():i.replace(/\./g,"/"),Ir=i=>i instanceof Date?Di(i,!1,!1):i instanceof Q?i.valueOf():Array.isArray(i)?`[${i.map((e=>Ir(e))).join(",")}]`:yr(i),yr=i=>i instanceof Date?tu(i):i instanceof Q?`guid'${i}'`:i instanceof Pe?i.valueOf():typeof i=="string"?su(i):String(i),fs=(i,e)=>{switch(e){case 2:case 3:return yr(i);case 4:return Ir(i);default:throw me.Error("E4002")}},iu=(i,e)=>{if(q(i)){const t=[];return x(i,((s,n)=>t.push(`${Ve(s)}=${fs(n,e)}`))),t.join()}return fs(i,e)},nu={String:i=>`${i}`,Int32:i=>Math.floor(i),Int64:i=>i instanceof Pe?i:new Pe(`${i}L`),Guid:i=>i instanceof Q?i:new Q(i),Boolean:i=>!!i,Single:i=>i instanceof Pe?i:new Pe(`${i}f`),Decimal:i=>i instanceof Pe?i:new Pe(`${i}m`)},ni=(i,e)=>{if(e===null)return null;const t=nu[i];if(!t)throw me.Error("E4014",i);return t(e)},Sr=(i,e)=>{if(e)return i<4?Ve(e.join()):ai(e,br,!0).join()},Er=i=>{let e="";const t=[],s=[];return x(i,((n,o)=>{Array.isArray(o)&&[].push.apply(t,o),q(o)&&s.push(`${n}${Er(o)}`)})),(t.length||s.length)&&(e+="(",t.length&&(e+=`$select=${kt(t,Ve).join()}`),s.length&&(t.length&&(e+=";"),e+=`$expand=${kt(s,Ve).join()}`),e+=")"),e},ou=i=>{const e=[];return x(i,((t,s)=>e.push(`${t}${Er(s)}`))),e.join()},xr=(i,e,t)=>{const s=t(e,i.shift(),i);s!==!1&&xr(i,s,t)},Rn=(i,e,t)=>x(i,((s,n)=>xr(n.split("."),e,t))),ru=(i,e)=>{const t={};return i&&x(_s(i),(function(){t[Ve(this)]=1})),e&&x(_s(e),(function(){const s=this.split(".");s.length<2||(s.pop(),t[Ve(s.join("."))]=1)})),kt(t,((s,n)=>n)).join()},au=(i,e)=>{const t={};if(i||e)return i&&Rn(_s(i),t,((s,n,o)=>(s[n]=s[n]||{},o.length?s[n]:!1))),e&&Rn(ai(_s(e),br),t,((s,n,o)=>o.length?s[n]=s[n]||{}:(s[n]=s[n]||[],s[n].push(n),!1))),ou(t)},wr=(i,e,t)=>i<4?ru(e,t):au(e,t),Tr=(i,e)=>Hi("{0}({1})",i,kt(e||{},((t,s)=>Hi("{0}={1}",s,t))).join(",")),oi=(i,e)=>{if(!i)return i;const t={};return x(i,((s,n)=>{t[s]=fs(n,e)})),t},lu=["contains","notcontains","startswith","endswith"],du=(()=>{let i,e,t;const s=_=>(u,p)=>`${u} ${_} ${p}`,n=(_,u)=>(p,g)=>{const f=[_,"("];return e&&(p=p.indexOf("tolower(")===-1?`tolower(${p})`:p,g=g.toLowerCase()),u?f.push(g,",",p):f.push(p,",",g),f.push(")"),f.join("")},o={"=":s("eq"),"<>":s("ne"),">":s("gt"),">=":s("ge"),"<":s("lt"),"<=":s("le"),startswith:n("startswith"),endswith:n("endswith")},r=T({},o,{contains:n("substringof",!0),notcontains:n("not substringof",!0)}),a=T({},o,{contains:n("contains"),notcontains:n("not contains")}),l=_=>{var u;_=Wa(_);const p=_[1],g=_[0],f=t&&t[g];if(f&&(C=p,lu.some((ne=>ne===C)))&&f!=="String")throw new me.Error("E4024",p,g,f);var C;const w=(i===4?a:r)[p.toLowerCase()];if(!w)throw me.Error("E4003",p);let E=_[2];return(u=t)!==null&&u!==void 0&&u[g]&&(E=ni(t[g],E)),w(Ve(g),fs(E,i))},d=_=>{const u=[];let p,g;return x(_,(function(f,C){if(Array.isArray(C)){if(u.length>1&&p!==g)throw new me.Error("E4019");u.push(`(${c(C)})`),p=g,g="and"}else g=Va(this)?"and":"or"})),u.join(` ${p} `)},c=_=>Array.isArray(_[0])?d(_):Fa(_)?(u=>{const p=u[0],g=c(u[1]);if(p==="!")return`not (${g})`;throw me.Error("E4003",p)})(_):l(_);return(_,u,p,g)=>(t=p,e=g??Je().oDataFilterToLower,i=u,c(_))})(),cu=i=>{let e=[];const t=[],s=i.expand;let n,o,r,a;const l=i.version||4,d=()=>o||r!==void 0,c=u=>{for(let p=0;p<u.length;p++)if(oe(u[p])||Array.isArray(u[p])&&c(u[p]))return!0;return!1},_=()=>{const u={};if(a||(e.length&&(u.$orderby=e.join(",")),o&&(u.$skip=o),r!==void 0&&(u.$top=r),u.$select=Sr(l,n)||void 0,u.$expand=wr(l,s,n)||void 0),t.length){const p=t.length<2?t[0]:t,g=i==null?void 0:i.fieldTypes,f=i==null?void 0:i.filterToLower;u.$filter=du(p,l,g,f)}return a&&(u.$top=0),(i.requireTotalCount||a)&&(l!==4?u.$inlinecount="allpages":u.$count="true"),u};return{optimize:u=>{let p=-1;for(let f=0;f<u.length;f++)if(u[f].name==="select"){p=f;break}if(p<0||!oe(u[p].args[0]))return;const g=u[1+p];!g||g.name!=="slice"||(u[1+p]=u[p],u[p]=g)},exec:u=>Ai(l,{url:u,params:T(_(),i==null?void 0:i.params)},{beforeSend:i.beforeSend,jsonp:i.jsonp,withCredentials:i.withCredentials,countOnly:a,deserializeDates:i.deserializeDates,fieldTypes:i.fieldTypes,isPaged:isFinite(r)}),multiSort(u){let p;if(d())return!1;for(let g=0;g<u.length;g++){const f=u[g][0],C=!!u[g][1];let b;if(typeof f!="string")return!1;b=Ve(f),C&&(b+=" desc"),p=p||[],p.push(b)}e=p},slice(u,p){if(d())return!1;o=u,r=p},filter(u){if(d()||(Array.isArray(u)||(u=[].slice.call(arguments)),c(u)))return!1;t.length&&t.push("and"),t.push(u)},select(u){if(n||oe(u))return!1;Array.isArray(u)||(u=[].slice.call(arguments)),n=u},count:()=>a=!0}};La.odata=cu;class Dr{constructor(e){e=e||{},this._url=String(e.url).replace(/\/+$/,""),this._beforeSend=e.beforeSend,this._jsonp=e.jsonp,this._version=e.version||4,this._withCredentials=e.withCredentials,this._deserializeDates=e.deserializeDates,this._filterToLower=e.filterToLower}sendRequest(e,t,s,n){return Ai(this.version,{url:e,method:t,params:s||{},payload:n},{beforeSend:this._beforeSend,jsonp:this._jsonp,withCredentials:this._withCredentials,deserializeDates:this._deserializeDates})}get version(){return this._version}get beforeSend(){return this._beforeSend}get url(){return this._url}get jsonp(){return this._jsonp}get filterToLower(){return this._filterToLower}}const hu="5d46402c-7899-4ea9-bd81-8b73c47c7683",uu=(i,e)=>({[i]:e}),pu=(i,e)=>{const t={};for(const s in i)t[s]=i[s];for(const s in e)s in t?t[s]!==e[s]&&me.log("W4001",s):t[s]=e[s];return t},_u=Ka.inherit({ctor(i){this.callBase(i),this._requestDispatcher=new Dr(i);let e=this.key(),{fieldTypes:t}=i,{keyType:s}=i;if(s){const n=typeof s=="string";e||(e=n?hu:Object.keys(s),this._legacyAnonymousKey=e),n&&(s=uu(e,s)),t=pu(t,s)}this._fieldTypes=t||{},this.version()===2?this._updateMethod="MERGE":this._updateMethod="PATCH"},_customLoadOptions:()=>["expand","customQueryParams"],_byKeyImpl(i,e){const t={};return e&&(t.$expand=wr(this.version(),e.expand,e.select)||void 0,t.$select=Sr(this.version(),e.select)||void 0),this._requestDispatcher.sendRequest(this._byKeyUrl(i),"GET",t)},createQuery(i){let e;const t={adapter:"odata",beforeSend:this._requestDispatcher.beforeSend,errorHandler:this._errorHandler,jsonp:this._requestDispatcher.jsonp,version:this._requestDispatcher.version,withCredentials:this._requestDispatcher._withCredentials,expand:i==null?void 0:i.expand,requireTotalCount:i==null?void 0:i.requireTotalCount,deserializeDates:this._requestDispatcher._deserializeDates,fieldTypes:this._fieldTypes};if(e=(i==null?void 0:i.urlOverride)??this._requestDispatcher.url,S(this._requestDispatcher.filterToLower)&&(t.filterToLower=this._requestDispatcher.filterToLower),i!=null&&i.customQueryParams){const s=oi(i==null?void 0:i.customQueryParams,this.version());this.version()===4?e=Tr(e,s):t.params=s}return tt(e,t)},_insertImpl(i){this._requireKey();const e=new y;return ee(this._requestDispatcher.sendRequest(this._requestDispatcher.url,"POST",null,i)).done((t=>e.resolve(t&&!Je().useLegacyStoreResult?t:i,this.keyOf(t)))).fail(e.reject),e.promise()},_updateImpl(i,e){const t=new y;return ee(this._requestDispatcher.sendRequest(this._byKeyUrl(i),this._updateMethod,null,e)).done((s=>Je().useLegacyStoreResult?t.resolve(i,e):t.resolve(s||e,i))).fail(t.reject),t.promise()},_removeImpl(i){const e=new y;return ee(this._requestDispatcher.sendRequest(this._byKeyUrl(i),"DELETE")).done((()=>e.resolve(i))).fail(e.reject),e.promise()},_convertKey(i){let e=i;const t=this._fieldTypes,s=this.key()||this._legacyAnonymousKey;if(Array.isArray(s)){e={};for(let n=0;n<s.length;n++){const o=s[n];e[o]=ni(t[o],i[o])}}else t[s]&&(e=ni(t[s],i));return e},_byKeyUrl(i){const e=this._requestDispatcher.url,t=this._convertKey(i);return`${e}(${encodeURIComponent(iu(t,this.version()))})`},version(){return this._requestDispatcher.version}},"odata");R.inherit({ctor(i){this._requestDispatcher=new Dr(i),this._errorHandler=i.errorHandler,x(i.entities||[],((e,t)=>{this[e]=new _u(T({},i,{url:`${this._requestDispatcher.url}/${encodeURIComponent(t.name||e)}`},t))}))},get(i,e){return this.invoke(i,e,"GET")},invoke(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"POST";t=t.toLowerCase();const s=new y;let n=`${this._requestDispatcher.url}/${encodeURIComponent(i)}`,o;return this.version()===4&&(t==="get"?(n=Tr(n,oi(e,this.version())),e=null):t==="post"&&(o=e,e=null)),ee(this._requestDispatcher.sendRequest(n,t,oi(e,this.version()),o)).done((r=>{q(r)&&i in r&&(r=r[i]),s.resolve(r)})).fail(this._errorHandler).fail(za).fail(s.reject),s.promise()},objectLink(i,e){const t=this[i];if(!t)throw me.Error("E4015",i);return S(e)?{__metadata:{uri:t._byKeyUrl(e)}}:null},version(){return this._requestDispatcher.version}});function Ar(i){if(!Ya(i))return i;let e=!1;return{store:{type:"array",data:i.reduce(((s,n)=>{var o;const r=((o=n.items)===null||o===void 0?void 0:o.map((a=>{let l=a;G(l)||(l={text:l},e=!0);const d=l;return"key"in d||(d.key=n.key),d})))??[];return s.concat(r)}),[])},group:{selector:"key",keepInitialKeyOrder:!0},searchExpr:e?"text":void 0}}const kr="__dx_key__";class fu extends or{_getDefaultOptions(){return v({},super._getDefaultOptions(),{repaintChangesOnly:!1})}reload(){}_init(){super._init(),this._refreshItemsCache()}_findItemElementByKey(e){let t=h();const s=this.key();return this.itemElements().each(((n,o)=>{const r=h(o),a=this._getItemData(r);return(s?Na(s,this.keyOf(a),e):this._isItemEquals(a,e))?(t=r,!1):!0})),t}_dataSourceChangedHandler(e,t){t!=null&&t.changes?this._modifyByChanges(t.changes):(super._dataSourceChangedHandler(e,t),this._refreshItemsCache())}_isItemEquals(e,t){let s=e;e&&typeof e=="object"&&e.__dx_key__&&(s=e.data);try{return JSON.stringify(s)===JSON.stringify(t)}catch{return s===t}}_isItemStrictEquals(e,t){return this._isItemEquals(e,t)}_shouldAddNewGroup(e,t){let s=!1;const{grouped:n}=this.option();return n&&(e.length||(s=!0),x(e,((o,r)=>{r.type==="insert"&&(s=!0,x(t,((a,l)=>r.data.key!==void 0&&r.data.key===l.key?(s=!1,!1):!0)))}))),s}_partialRefresh(){const{repaintChangesOnly:e}=this.option();if(e){const t=n=>n&&n.__dx_key__!==void 0?n.__dx_key__:this.keyOf(n),s=Ec({oldItems:this._itemsCache,newItems:this._editStrategy.itemsGetter(),getKey:t,isItemEquals:this._isItemStrictEquals.bind(this),detectReorders:!0});if(s&&this._itemsCache.length&&!this._shouldAddNewGroup(s,this._itemsCache))return this._modifyByChanges(s,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1}_refreshItemsCache(){const{repaintChangesOnly:e}=this.option();if(e){const t=this._editStrategy.itemsGetter();try{this._itemsCache=T(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map(((s,n)=>({[kr]:t[n],data:s}))))}catch{this._itemsCache=T([],t)}}}_updateByChange(e,t,s,n){if(n)this._renderItem(s.index,s.data,null,this._findItemElementByKey(s.key));else{const o=t[sn(e,t,s.key)];o&&Ua(e,t,s.key,s.data).done((()=>{this._renderItem(t.indexOf(o),o,null,this._findItemElementByKey(s.key))}))}}_insertByChange(e,t,s,n){ee(n??Ga(e,t,s.data,s.index)).done((()=>{this._beforeItemElementInserted(s),this._renderItem(s.index??t.length,s.data),this._afterItemElementInserted()}))}_updateSelectionAfterRemoveByChange(e){const{selectedIndex:t,selectedItems:s=[]}=this.option(),n=t;n>e?this.option("selectedIndex",n-1):n===e&&s.length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()}_beforeItemElementInserted(e){const{selectedIndex:t}=this.option(),s=t;e.index<=s&&this.option("selectedIndex",s+1)}_afterItemElementInserted(){this._renderEmptyMessage()}_removeByChange(e,t,s,n){const o=n?s.index:sn(e,t,s.key);if(n?s.oldItem:t[o]){const a=this._findItemElementByKey(s.key),l=this._extendActionArgs(a);this._waitDeletingPrepare(a).done((()=>{n?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(a,l),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(a,l))}))}}_modifyByChanges(e,t){const s=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,r=o.paginate(),a=o.group();let l=e;(r||a)&&(l=e.filter((d=>d.type!=="insert"||d.index!==void 0))),l.forEach((d=>this[`_${d.type}ByChange`](n,s,d,t))),this._renderedItemsCount=s.length,this._refreshItemsCache(),this._fireContentReadyAction()}_appendItemToContainer(e,t,s){const n=e.children(this._itemSelector())[s];H.insertElement(e[0],t[0],n)}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"items":{this._partialRefresh()||super._optionChanged(e);break}case"dataSource":{const{repaintChangesOnly:n}=this.option();(!n||!s)&&this.option("items",[]),super._optionChanged(e);break}case"repaintChangesOnly":break;default:super._optionChanged(e)}}}class mu extends ps{_renderWatchers(){super._renderWatchers(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))}_renderBadge(e){if(this._$element.children(".dx-list-item-badge-container").remove(),!e)return;const t=h("<div>").addClass("dx-list-item-badge-container").append(h("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(e)),s=this._$element.children(".dx-list-item-chevron-container").first();s.length>0?t.insertBefore(s):t.appendTo(this._$element)}_renderShowChevron(e){if(this._$element.children(".dx-list-item-chevron-container").remove(),!e)return;const t=h("<div>").addClass("dx-list-item-chevron-container"),s=h("<div>").addClass("dx-list-item-chevron");t.append(s).appendTo(this._$element)}}class gu extends wi{_init(e){super._init(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$refreshingText=e._$refreshingText,this._$scrollViewContent=h(e.content()),this._$container=h(e.container()),this._initCallbacks()}_initCallbacks(){this.pullDownCallbacks=de(),this.releaseCallbacks=de(),this.reachBottomCallbacks=de()}render(){super.render(),this._renderPullDown(),this._releaseState()}_renderPullDown(){const e=h("<div>").addClass("dx-scrollview-pull-down-image"),t=h("<div>").addClass("dx-scrollview-pull-down-indicator"),s=h("<div>")[0],n=new rt(s).$element();this._$pullDownText=h("<div>").addClass("dx-scrollview-pull-down-text");const{pullingDownText:o="",pulledDownText:r="",refreshingText:a=""}=this.option();this._$pullingDownText=h("<div>").text(o).appendTo(this._$pullDownText),this._$pulledDownText=h("<div>").text(r).appendTo(this._$pullDownText),this._$refreshingText=h("<div>").text(a).appendTo(this._$pullDownText),this._$pullDown.empty().append(e).append(t.append(n)).append(this._$pullDownText)}_releaseState(){this._state=0,this._refreshPullDownText()}_refreshPullDownText(){const e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];x(e,((t,s)=>{const n=this._state===s.visibleState?"addClass":"removeClass";s.element[n]("dx-scrollview-pull-down-text-visible")}))}update(){super.update(),this._setTopPocketOffset()}_updateDimensions(){super._updateDimensions(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)}_allowedDirections(){const e=super._allowedDirections();return e.vertical=e.vertical||this._pullDownEnabled,e}_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})}handleEnd(){super.handleEnd(),this._complete()}handleStop(){super.handleStop(),this._complete()}_complete(){this._state===1&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout((()=>{this._pullDownRefreshing()}),400))}_setPullDownOffset(e){ye(this._$topPocket,{top:e}),ye(this._$scrollViewContent,{top:e})}handleScroll(e){if(super.handleScroll(e),this._state===2)return;const t=this.location().top,s=(this._location||0)-t;this._location=t,this._isPullDown()?this._pullDownReady():s>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){return Math.round(this._bottomBoundary+Math.floor(this._location))<=1}_reachBottom(){this._state!==3&&(this._state=3,this.reachBottomCallbacks.fire())}_pullDownReady(){this._state!==1&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())}_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())}_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())}pullDownEnable(e){e&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=e}reachBottomEnable(e){this._reachBottomEnabled=e}pendingRelease(){this._state=1}release(){const e=y();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===3&&(this._state=0),this._releaseTimeout=setTimeout((()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),400),e.promise()}dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),super.dispose()}}class vu extends wi{_init(e){super._init(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$scrollViewContent=h(e.content()),this._$container=h(e.container()),this._initCallbacks(),this._location=0}_initCallbacks(){this.pullDownCallbacks=de(),this.releaseCallbacks=de(),this.reachBottomCallbacks=de()}render(){super.render(),this._renderPullDown(),this._releaseState()}_renderPullDown(){const e=h("<div>").addClass("dx-scrollview-pull-down-indicator"),t=h("<div>")[0],s=new rt(t).$element();this._$icon=h("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(e.append(s))}_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()}_releasePullDown(){this._$pullDown.css({opacity:0})}_updateDimensions(){super._updateDimensions(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)}_allowedDirections(){const e=super._allowedDirections();return e.vertical=e.vertical||this._pullDownEnabled,e}handleInit(e){super.handleInit(e),this._state===0&&this._location===0&&(this._startClientY=U(e.originalEvent).y,this._state=4)}handleMove(e){super.handleMove(e),this._deltaY=U(e.originalEvent).y-this._startClientY,this._state===4&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),this._state===5&&(e.preventDefault(),this._movePullDown())}_movePullDown(){const e=this._getPullDownHeight(),t=Math.min(3*e,this._deltaY+this._getPullDownStartPosition()),s=180*t/(3*e);this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",t<e),ye(this._$pullDown,{top:t}),this._$icon.css({transform:`rotate(${s}deg)`})}_isPullDown(){return this._pullDownEnabled&&this._state===5&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()}_getPullDownHeight(){return Math.round(.05*K(this._$element))}_getPullDownStartPosition(){return-Math.round(1.5*K(this._$pullDown))}handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()}handleStop(){this._complete()}_complete(){(this._state===4||this._state===5)&&this._releaseState()}handleScroll(e){if(super.handleScroll(e),this._state===2)return;const t=this.location().top,s=this._location-t;this._location=t,s>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){return Math.round(this._bottomBoundary+Math.floor(this._location))<=1}_reachBottom(){this.reachBottomCallbacks.fire()}_stateReleased(){this._state!==0&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())}_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()}_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()}_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),ye(this._$pullDown,{top:this._getPullDownHeight()})}pullDownEnable(e){this._$topPocket.toggle(e),this._pullDownEnabled=e}reachBottomEnable(e){this._reachBottomEnabled=e}pendingRelease(){this._state=1}release(){const e=y();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout((()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),800),e.promise()}dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),super.dispose()}}class bu extends pr{constructor(e){super(e),this._topPocketSize=0,this._bottomPocketSize=0,this._initCallbacks(),this._releaseState()}_releaseState(){this._state=0,this._refreshPullDownText()}_refreshPullDownText(){const e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];x(e,((t,s)=>{const n=this._state===s.visibleState?"addClass":"removeClass";s.element[n]("dx-scrollview-pull-down-text-visible")}))}_initCallbacks(){this.pullDownCallbacks=de(),this.releaseCallbacks=de(),this.reachBottomCallbacks=de()}_updateBounds(){if(this._direction!=="horizontal"){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const t=this._$container.get(0),s=this._$content.get(0);this._bottomBoundary=Math.max(s.clientHeight-this._bottomPocketSize-t.clientHeight,0)}super._updateBounds()}_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})}_moveContent(){super._moveContent(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==0&&this._stateReleased()}_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)}_isPullDown(){return this._pullDownEnabled&&this._location>=0}_isReachBottom(){return this._reachBottomEnabled&&this.isBottomReached()}isBottomReached(){const e=this._$container.get(0);return Math.round(this._bottomBoundary-Math.ceil(e.scrollTop))<=1}_scrollComplete(){this._inBounds()&&this._state===1?this._pullDownRefreshing():this._inBounds()&&this._state===3?this._reachBottomLoading():super._scrollComplete()}_reachBottomReady(){this._state!==3&&(this._state=3,this._minOffset=this._getMinOffset())}_getMaxOffset(){return-this._topPocketSize}_getMinOffset(){return Math.min(super._getMinOffset(),-this._topPocketSize)}_reachBottomLoading(){this.reachBottomCallbacks.fire()}_pullDownReady(){this._state!==1&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())}_stateReleased(){this._state!==0&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())}_pullDownRefreshing(){this._state!==2&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())}_releaseHandler(){var e;return this._state===0&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=Jr(this._release.bind(this)),(e=this._releaseTask)===null||e===void 0?void 0:e.promise}_release(){this._stateReleased(),this._scrollComplete()}_reachBottomEnablingHandler(e){this._reachBottomEnabled!==e&&(this._reachBottomEnabled=e,this._updateBounds())}_pullDownEnablingHandler(e){this._pullDownEnabled!==e&&(this._pullDownEnabled=e,this._considerTopPocketChange(),this._updateHandler())}_considerTopPocketChange(){this._location-=M(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()}_pendingReleaseHandler(){this._state=1}dispose(){this._releaseTask&&this._releaseTask.abort(),super.dispose()}}class Cu extends _r{_init(e){super._init(e),this._$pullDown=e._$pullDown,this._$topPocket=e._$topPocket,this._$bottomPocket=e._$bottomPocket,this._initCallbacks()}_initCallbacks(){this.pullDownCallbacks=de(),this.releaseCallbacks=de(),this.reachBottomCallbacks=de()}render(){this._renderPullDown(),super.render()}_renderPullDown(){const e=h("<div>").addClass("dx-scrollview-pull-down-image"),t=h("<div>").addClass("dx-scrollview-pull-down-indicator"),s=h("<div>")[0],n=new rt(s).$element();this._$pullDownText=h("<div>").addClass("dx-scrollview-pull-down-text");const{pullingDownText:o="",pulledDownText:r="",refreshingText:a=""}=this.option();this._$pullingDownText=h("<div>").text(o).appendTo(this._$pullDownText),this._$pulledDownText=h("<div>").text(r).appendTo(this._$pullDownText),this._$refreshingText=h("<div>").text(a).appendTo(this._$pullDownText),this._$pullDown.empty().append(e).append(t.append(n)).append(this._$pullDownText)}pullDownEnable(e){this._eventHandler("pullDownEnabling",e)}reachBottomEnable(e){this._eventHandler("reachBottomEnabling",e)}_createScroller(e){const t=new bu(this._scrollerOptions(e));this._scrollers[e]=t,t.pullDownCallbacks.add((()=>{this.pullDownCallbacks.fire()})),t.releaseCallbacks.add((()=>{this.releaseCallbacks.fire()})),t.reachBottomCallbacks.add((()=>{this.reachBottomCallbacks.fire()}))}_scrollerOptions(e){return v({},super._scrollerOptions(e),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})}pendingRelease(){this._eventHandler("pendingRelease")}release(){return this._eventHandler("release").done(this._updateAction)}location(){const e=super.location();return e.top+=M(this._$topPocket),e}isBottomReached(){return this._scrollers.vertical.isBottomReached()}dispose(){x(this._scrollers,(function(){this.dispose()})),super.dispose()}}const Iu="dx-scrollview-loadpanel",yu={pullDown:gu,swipeDown:vu,simulated:Cu},$r=!ae();class Or extends Ti{finishLoading(){}release(){}refresh(){}scrollOffset(){return{top:0,left:0}}isBottomReached(){return!1}_optionChanged(e){const{name:t}=e;if(t!=="onUpdated")return super._optionChanged(e)}}class Rr extends Ti{_getDefaultOptions(){return v({},super._getDefaultOptions(),{pullingDownText:k.format("dxScrollView-pullingDownText"),pulledDownText:k.format("dxScrollView-pulledDownText"),refreshingText:k.format("dxScrollView-refreshingText"),reachBottomText:k.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(){return $.real().platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:()=>mt(j()),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])}_init(){super._init(),this._loadingIndicatorEnabled=!0}_initScrollableMarkup(){super._initScrollableMarkup(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()}_initContent(){const e=h("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(e)}_initTopPocket(){this._$topPocket=h("<div>").addClass("dx-scrollview-top-pocket"),this._$pullDown=h("<div>").addClass("dx-scrollview-pull-down"),this._$topPocket.append(this._$pullDown),this._$content.prepend(this._$topPocket)}_initBottomPocket(){this._$bottomPocket=h("<div>").addClass("dx-scrollview-bottom-pocket"),this._$reachBottom=h("<div>").addClass("dx-scrollview-scrollbottom");const e=h("<div>").addClass("dx-scrollview-scrollbottom-indicator"),t=h("<div>")[0],s=new rt(t).$element();this._$reachBottomText=h("<div>").addClass("dx-scrollview-scrollbottom-text"),this._updateReachBottomText(),this._$reachBottom.append(e.append(s)).append(this._$reachBottomText),this._$bottomPocket.append(this._$reachBottom),this._$content.append(this._$bottomPocket)}_initLoadPanel(){const e=h("<div>").addClass(Iu).appendTo(this.$element()),{refreshingText:t}=this.option();this._loadPanel=this._createComponent(e,fr,{shading:!1,delay:400,message:t,position:{of:this.$element()}})}_updateReachBottomText(){const{reachBottomText:e}=this.option();this._$reachBottomText.text(e)}_createStrategy(){const{useNative:e,refreshStrategy:t}=this.option(),n=yu[(e?t:"simulated")??"pullDown"];this._strategy=new n(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))}_createActions(){super._createActions(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()}_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))}on(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const o=super.on.apply(this,[e,...s]);return(e==="pullDown"||e==="reachBottom")&&this._tryRefreshPocketState(),o}_pullDownEnable(e){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(e),this._strategy.pullDownEnable(e),this._pullDownEnabled=e)}_reachBottomEnable(e){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(e),this._strategy.reachBottomEnable(e),this._reachBottomEnabled=e)}_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()}_loadingIndicator(e){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=e}_pullDownLoading(){var e;this.startLoading(),(e=this._pullDownAction)===null||e===void 0||e.call(this)}_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()}_reachBottomLoading(){var e;this.startLoading(),(e=this._reachBottomAction)===null||e===void 0||e.call(this)}_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)}_optionChanged(e){switch(e.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:super._optionChanged(e)}}content(){return O(this._$content.children().eq(1))}release(e){return e!==void 0&&this.toggleLoading(!e),this._strategy.release()}toggleLoading(e){this._reachBottomEnable(e)}refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())}startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()}finishLoading(){this._loadPanel.hide(),this._unlock()}isBottomReached(){return this._strategy.isBottomReached()}_dispose(){this._strategy.dispose(),super._dispose(),this._loadPanel&&this._loadPanel.$element().remove()}}ie("dxScrollView",$r?Or:Rr);const Su=$r?Or:Rr;function Eu(i){return i?Number(i.replace("px","")):0}function xu(i){var e,t;return i&&ae()?(e=(t=et()).getComputedStyle)===null||e===void 0?void 0:e.call(t,i):null}function wu(i,e){const t=xu(i);return t?Eu(t[`margin${$t(e)}`]):0}const Tu="dx-list-select-checkbox",Du="dx-list-select-radiobutton";function Au(){return Su}class Br extends fu{_supportedKeys(){return v({},super._supportedKeys(),{leftArrow:L,rightArrow:L,pageUp(e){this._moveFocusPerPage(e,"prev")},pageDown(e){this._moveFocusPerPage(e,"next")}})}_moveFocusPerPage(e,t){if(this._isLastItemFocused(t))return;e.preventDefault(),e.stopPropagation();let s=this._getEdgeVisibleItem(t);const{focusedElement:n}=this.option();s.is(h(n))&&(this.scrollTo(this._getItemLocation(s,t)),s=this._getEdgeVisibleItem(t)),this.option("focusedElement",O(s)),this.scrollToItem(s)}_isLastItemFocused(e){const t=e==="prev"?this._itemElements().first():this._itemElements().last(),{focusedElement:s}=this.option();return t.is(h(s))}_getNextItem(e,t){const s=this._getAvailableItems(),n=s.index(e);return t==="prev"?h(s[n-1]):h(s[n+1])}_getEdgeVisibleItem(e){const t=this.scrollTop(),s=M(this.$element()),{focusedElement:n}=this.option();let o=h(n),r=!0;if(!o.length)return h();for(;r;){var a;const l=this._getNextItem(o,e);if(!l.length)break;const d=(((a=l.position())===null||a===void 0?void 0:a.top)??0)+K(l)/2;r=d<s+t&&d>t,r&&(o=l)}return o}_getItemLocation(e,t){return t==="prev"?e.position().top-M(this.$element())+K(e):e.position().top}_getDefaultOptions(){return v({},super._getDefaultOptions(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:k.format("dxList-pullingDownText"),pulledDownText:k.format("dxList-pulledDownText"),refreshingText:k.format("dxList-refreshingText"),pageLoadingText:k.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:k.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:e=>e==null?void 0:e.showChevron,badgeExpr:e=>e==null?void 0:e.badge,_onItemsRendered:()=>{}})}_defaultOptionsRules(){const e=j();return super._defaultOptionsRules().concat(dr(),[{device:()=>!Ze.nativeScrolling,options:{useNativeScrolling:!1}},{device:t=>!Ze.nativeScrolling&&!$.isSimulator()&&$.real().deviceType==="desktop"&&t.platform==="generic",options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>$.real().deviceType==="desktop"&&!$.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>He(e),options:{useInkRipple:!0}},{device:()=>mt(e),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])}_visibilityChanged(e){e&&this._updateLoadingState(!0)}_itemClass(){return"dx-list-item"}_itemDataKey(){return"dxListItemData"}_itemContainer(){return this._$container}_getItemsContainer(){return this._$listContainer}_cleanItemContainer(){super._cleanItemContainer();const e=this._getItemsContainer();h(e).empty(),e.appendTo(this._$container)}_saveSelectionChangeEvent(e){this._selectionChangeEventInstance=e}_getSelectionChangeEvent(){return this._selectionChangeEventInstance}_refreshItemElements(){const{grouped:e}=this.option(),t=this._getItemsContainer();e?this._itemElementsCache=t.children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=t.children(this._itemSelector())}_getItemAndHeaderElements(){const t=`${`> .dx-list-group-body > ${this._itemSelector()}`}, > .dx-list-group-header`;return this._getItemsContainer().children(".dx-list-group").find(t)}_getAvailableItems(e){const{collapsibleGroups:t}=this.option();return t?this._getItemAndHeaderElements().filter(((n,o)=>h(o).hasClass("dx-list-group-header")?!0:!h(o).closest(".dx-list-group").hasClass("dx-list-group-collapsed"))):super._getAvailableItems(e)}_modifyByChanges(e,t){super._modifyByChanges(e,t),this._refreshItemElements(),this._updateLoadingState(!0)}reorderItem(e,t){return super.reorderItem(e,t).done((()=>{this._refreshItemElements()}))}deleteItem(e){return super.deleteItem(e).done((()=>{this._refreshItemElements()}))}_itemElements(){return this._itemElementsCache}_itemSelectHandler(e){const{selectionMode:t}=this.option();if(t==="single"&&this.isItemSelected(e.currentTarget))return;const n=h(e.target).closest(`.${Tu}`).length||h(e.target).closest(`.${Du}`).length;return n&&this.option("focusedElement",O(h(e.currentTarget))),super._itemSelectHandler(e,n)}_allowDynamicItemsAppend(){return!0}_updateActiveStateUnit(){const{collapsibleGroups:e}=this.option(),t=[".dx-list-item",".dx-list-select-all"];e&&t.push(".dx-list-group-header"),this._activeStateUnit=t.join(",")}_init(){super._init(),this._updateActiveStateUnit(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=h("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()}_scrollBottomMode(){const{pageLoadMode:e}=this.option();return e==="scrollBottom"}_nextButtonMode(){const{pageLoadMode:e}=this.option();return e==="nextButton"}_dataSourceOptions(){const e=this._scrollBottomMode(),t=this._nextButtonMode();return v({},super._dataSourceOptions(),{paginate:fe(e||t,!0)})}_getSpecificDataSourceOption(){const{grouped:e}=this.option(),t=this.option("dataSource");return t&&e?Ar(t):t}_getGroupContainerByIndex(e){return this._getItemsContainer().find(".dx-list-group").eq(e).find(".dx-list-group-body")}_dataSourceFromUrlLoadMode(){return"raw"}_initScrollView(){const{height:e,width:t,disabled:s,showScrollbar:n,useNativeScrolling:o,bounceEnabled:r,scrollByContent:a,scrollByThumb:l,pullingDownText:d,pulledDownText:c,refreshingText:_,pageLoadingText:u,scrollingEnabled:p,pullRefreshEnabled:g}=this.option(),f=p&&g,C=p&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),Au(),{height:e,width:t,disabled:s||!p,onScroll:w=>{this._scrollHandler(w)},onPullDown:f?this._pullDownHandler.bind(this):null,onReachBottom:C?this._scrollBottomHandler.bind(this):null,showScrollbar:n,useNative:o,bounceEnabled:r,scrollByContent:a,scrollByThumb:l,pullingDownText:d,pulledDownText:c,refreshingText:_,reachBottomText:u,useKeyboard:!1}),this._$container=h(this._scrollView.content()),this._$listContainer.appendTo(this._$container);const{wrapItemText:b}=this.option();this._toggleWrapItemText(b),this._createScrollViewActions()}_toggleWrapItemText(e){this._$listContainer.toggleClass("dx-wrap-item-text",e)}_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")}_scrollHandler(e){var t;(t=this._scrollAction)===null||t===void 0||t.call(this,e)}_initTemplates(){this._templateManager.addDefaultTemplates({group:new yi(((e,t)=>{q(t)?t.key&&e.text(t.key):e.text(String(t))}),["key"],this.option("integrationOptions.watchMethod"))}),super._initTemplates()}_prepareDefaultItemTemplate(e,t){if(super._prepareDefaultItemTemplate(e,t),e.icon){const s=Xa(e.icon);if(!s)return;const n=s.addClass("dx-list-item-icon"),o=h("<div>").addClass("dx-list-item-icon-container");o.append(n),t.prepend(o)}}_getBindableFields(){return["text","html","icon"]}_updateLoadingState(e){const t=this._dataController,s=this._scrollBottomMode(),n=t.isLoading(),o=this._isLastPage(),r=s&&!!e&&!n&&!o;this._shouldContinueLoading(r)?this._infiniteDataLoading():(this._scrollView.release(!r&&!t.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))}_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()}_isDataSourceFirstLoadCompleted(e){return S(e)&&(this._isFirstLoadCompleted=e),this._isFirstLoadCompleted}_dataSourceLoadingChangedHandler(e){if(this._loadIndicationSuppressed())return;const{indicateLoading:t}=this.option();if(e&&t)this._showLoadingIndicatorTimer=setTimeout((()=>{if(!!this._itemElements().length||this._isDataSourceFirstLoadCompleted()){var r;(r=this._scrollView)===null||r===void 0||r.startLoading()}}));else{var s;clearTimeout(this._showLoadingIndicatorTimer),(s=this._scrollView)===null||s===void 0||s.finishLoading()}e||this._isDataSourceFirstLoadCompleted(!1)}_dataSourceChangedHandler(e,t){if(!this._shouldAppendItems()&&ae()){var s;(s=this._scrollView)===null||s===void 0||s.scrollTo(0)}super._dataSourceChangedHandler(e,t),this._isDataSourceFirstLoadCompleted(!0)}_refreshContent(){this._prepareContent(),this._fireContentReadyAction()}_hideLoadingIfLoadIndicationOff(){const{indicateLoading:e}=this.option();e||this._dataSourceLoadingChangedHandler(!1)}_loadIndicationSuppressed(e){return arguments.length&&(this._isLoadIndicationSuppressed=e),this._isLoadIndicationSuppressed}_scrollViewIsFull(){const e=this._scrollView;return!e||M(e.content())>M(e.container())}_pullDownHandler(){var e;const t={component:this,element:this.element()};(e=this._pullRefreshAction)===null||e===void 0||e.call(this,t);const s=this._dataController;s.getDataSource()&&!s.isLoading()?(this._clearSelectedItems(),s.pageIndex(0),s.reload()):this._updateLoadingState()}_shouldContinueLoading(e){var t;if(!e)return!1;const s=this._scrollView.content(),n=this._scrollView.container(),o=M(s),r=M(n),a=((t=this._scrollView.scrollOffset())===null||t===void 0?void 0:t.top)??0,l=o-r<a,d=this._scrollViewIsFull();return e&&!d||l}_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout((()=>{this._loadNextPage()})))}_scrollBottomHandler(e){var t;(t=this._pageLoadingAction)===null||t===void 0||t.call(this,e),!this._dataController.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()}_renderItems(e){const{grouped:t}=this.option();t?(x(e,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),He(j())&&this.attachGroupHeaderInkRippleEvents()):super._renderItems(e),this._refreshItemElements(),this._updateLoadingState(!0)}_postProcessRenderItems(){const{_onItemsRendered:e}=this.option();e==null||e()}_attachGroupCollapseEvent(){const{collapsibleGroups:e}=this.option(),t=I(Ie,this.NAME),s=this.$element();s.toggleClass("dx-list-collapsible-groups",e),m.off(s,t,".dx-list-group-header"),e&&m.on(s,t,".dx-list-group-header",(n=>{this._processGroupCollapse(n)}))}_processGroupCollapse(e){this._createAction((s=>{var n;const{focusStateEnabled:o}=this.option(),r=h((n=s.event)===null||n===void 0?void 0:n.currentTarget).parent();if(this._collapseGroupHandler(r),o){const a=O(r.find(".dx-list-group-header"));this.option({focusedElement:a})}}),{validatingTargetName:"element"})({event:e})}_enterKeyHandler(e){const{collapsibleGroups:t,focusedElement:s}=this.option(),n=h(s).hasClass("dx-list-group-header");if(t&&n){const o=this._getHandlerExtendedParams(e,h(s));this._processGroupCollapse(o);return}super._enterKeyHandler(e)}_collapseGroupHandler(e,t){const s=y(),n=e.children(".dx-list-group-header"),o=e.hasClass("dx-list-group-collapsed");if(this._updateGroupHeaderAriaExpanded(n,o),o===t)return s.resolve();const r=e.children(".dx-list-group-body"),a=K(r);let l=0;o&&(Ia(r,"auto"),l=K(r)),e.toggleClass("dx-list-group-collapsed",t);const d=r.get(0);return Zt.isAnimating(d)&&Zt.stop(d,!1),Zt.animate(d,{type:"custom",from:{height:a},to:{height:l},duration:200,complete:()=>{this.updateDimensions(),this._updateLoadingState(!0),s.resolve()}}),s.promise()}_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())}_initMarkup(){this._itemElementsCache=h(),this.$element().addClass("dx-list"),super._initMarkup();const{useInkRipple:e}=this.option();e&&this._renderInkRipple();const t={role:"group",roledescription:k.format("dxList-ariaRoleDescription")};this.setAria(t,this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()}_setListAria(){const{items:e,allowItemDeleting:t,collapsibleGroups:s}=this.option(),n=t?k.format("dxList-listAriaLabel-deletable"):k.format("dxList-listAriaLabel"),o=(e==null?void 0:e.length)&&!s,r={role:o?"listbox":void 0,label:o?n:void 0};this.setAria(r,this._$listContainer)}_focusTarget(){return this._itemContainer()}_renderInkRipple(){this._inkRipple=Qd()}_toggleActiveState(e,t,s){if(super._toggleActiveState(e,t),!this._inkRipple)return;const n={element:e,event:s};t?He(j())?this._inkRippleTimer=setTimeout((()=>{var o;(o=this._inkRipple)===null||o===void 0||o.showWave(n)}),35):this._inkRipple.showWave(n):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(n))}_postprocessRenderItem(e){this._refreshItemElements(),super._postprocessRenderItem(e);const{_swipeEnabled:t}=this.option();t&&this._attachSwipeEvent(h(e.itemElement))}_getElementClassToSkipRefreshId(){return"dx-list-group-header"}_attachSwipeEvent(e){const t=I(vr,this.NAME);m.on(e,t,(s=>{this._itemSwipeEndHandler(s)}))}_itemSwipeEndHandler(e){this._itemDXEventHandler(e,"onItemSwipe",{direction:e.offset<0?"left":"right"})}_nextButtonHandler(){var e;const t={component:this,element:this.element()};(e=this._pageLoadingAction)===null||e===void 0||e.call(this,t);const s=this._dataController;if(s.getDataSource()&&!s.isLoading()){var n;this._scrollView.toggleLoading(!0),(n=this._$nextButton)===null||n===void 0||n.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage()}}_setGroupAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?void 0:"group",labelledby:s?void 0:t};this.setAria(n,e)}_updateGroupHeaderAriaExpanded(e,t){this.setAria({expanded:t},e)}_setGroupHeaderAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?"button":void 0,expanded:s?!0:void 0,controls:s?t:void 0};this.setAria(n,e)}_setGroupBodyAria(e,t){const{collapsibleGroups:s}=this.option(),n={role:s?"listbox":void 0,labelledby:s?t:void 0};this.setAria(n,e)}_renderGroup(e,t){var s;const n=h("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),o=`dx-${new Q().toString()}`,r=h("<div>").addClass("dx-list-group-header").attr("id",o).appendTo(n),{groupTemplate:a}=this.option(),l=this._getTemplate(t.template??a,t,e,r),d={index:e,itemData:t,container:O(r)};this._createItemByTemplate(l,d),h("<div>").addClass("dx-list-group-header-indicator").prependTo(r);const c=`dx-${new Q().toString()}`,_=h("<div>").addClass("dx-list-group-body").attr("id",c).appendTo(n),u=Qe("items");x(u(t)||[],((p,g)=>{this._renderItem({group:e,item:p},g,_)})),(s=this._groupRenderAction)===null||s===void 0||s.call(this,{groupElement:O(n),groupIndex:e,groupData:t}),this._setGroupAria(n,o),this._setGroupHeaderAria(r,c),this._setGroupBodyAria(_,o)}downInkRippleHandler(e){this._toggleActiveState(h(e.currentTarget),!0,e)}upInkRippleHandler(e){this._toggleActiveState(h(e.currentTarget),!1,e)}attachGroupHeaderInkRippleEvents(){const e=".dx-list-group-header",t=this.$element();this._downInkRippleHandler=this._downInkRippleHandler??this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler??this.upInkRippleHandler.bind(this),m.off(t,le.down,e,this._downInkRippleHandler),m.on(t,le.down,e,this._downInkRippleHandler),m.off(t,[le.up,le.out].join(" "),e,this._upInkRippleHandler),m.on(t,[le.up,le.out].join(" "),e,this._upInkRippleHandler)}_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")}_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),super._clean()}_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),super._dispose()}_toggleDisabledState(e){super._toggleDisabledState(e);const{scrollingEnabled:t}=this.option();this._scrollView.option("disabled",e||!t)}_toggleNextButton(e){const t=this._dataController,s=this._getNextButton();this.$element().toggleClass("dx-has-next",e),e&&t.isLoaded()&&s.appendTo(this._itemContainer()),e||s.detach()}_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton}_createNextButton(){const e=h("<div>").addClass("dx-list-next-button"),t=h("<div>").appendTo(e),{nextButtonText:s}=this.option();return this._createComponent(t,it,{text:s,onClick:()=>{this._nextButtonHandler()},type:mt(j())?"default":void 0,integrationOptions:{}}),e}_moveFocus(e){super._moveFocus(e);const{focusedElement:t}=this.option();t&&this.scrollToItem(t)}_refresh(){if(!ae())super._refresh();else{const e=this._scrollView.scrollTop();super._refresh(),e&&this._scrollView.scrollTo(e)}}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"pageLoadMode":this._toggleNextButton(!!s),this._initScrollView();break;case"dataSource":super._optionChanged(e),this._initScrollView(),this._updateLoadingState(!0),this._isDataSourceFirstLoadCompleted(!1);break;case"items":super._optionChanged(e),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"collapsibleGroups":this._updateActiveStateUnit(),this._invalidate();break;case"wrapItemText":this._toggleWrapItemText(s);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":super._optionChanged(e),this._scrollView.option(t,s),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":super._optionChanged(e),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),super._optionChanged(e);break;case"_swipeEnabled":case"_onItemsRendered":case"selectByClick":break;default:super._optionChanged(e)}}_extendActionArgs(e){const{grouped:t}=this.option();if(!t)return super._extendActionArgs(e);const s=e.closest(".dx-list-group"),n=s.find(".dx-list-item");return v({},super._extendActionArgs(e),{itemIndex:{group:s.index(),item:n.index(e)}})}expandGroup(e){const t=y(),s=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(s,!1).done((()=>{t.resolveWith(this)})),t.promise()}collapseGroup(e){const t=y(),s=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(s,!0).done((()=>{t.resolveWith(this)})),t}updateDimensions(){const e=y();return this._scrollView?this._scrollView.update().done((()=>{this._scrollViewIsFull()||this._updateLoadingState(!0),e.resolveWith(this)})):e.resolveWith(this),e.promise()}reload(){super.reload(),this.scrollTo(0),this._pullDownHandler()}repaint(){this.scrollTo(0),super.repaint()}scrollTop(){return this._scrollView.scrollOffset().top??0}clientHeight(){return this._scrollView.clientHeight()}scrollHeight(){return this._scrollView.scrollHeight()}scrollBy(e){this._scrollView.scrollBy(e)}scrollTo(e){this._scrollView.scrollTo(e)}scrollToItem(e){if(!S(e))return;const t=this._editStrategy.getItemElement(e);this._scrollView.scrollToElement(t,{bottom:wu(t==null?void 0:t.get(0),"bottom")})}_dimensionChanged(){this.updateDimensions()}}Br.ItemClass=mu;const ku=["size"],$u={};class Pr extends vt{constructor(e){super(e),this.state={},this.elementRef=he(),this.__getterCache={}}get cssStyles(){return this.__getterCache.cssStyles!==void 0?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:e}=this.props;return{fontSize:Ys("fontSize",e)}})()}get restAttributes(){const e=this.props;return nt(e,ku)}componentWillUpdate(e){this.props.size!==e.size&&(this.__getterCache.cssStyles=void 0)}render(){const{elementRef:e,cssStyles:t}=this;return J(1,"span","dx-checkbox-icon",null,1,{style:Sd(t)},null,e)}}Pr.defaultProps=$u;const Ou=["dataSource","selectedRowKeys"],Ru={integrationOptions:!0};function It(i,e,t){return{path:i,value:e,previousValue:t}}function Bn(i,e,t,s,n,o){if(Ru[s])return;const r=js(e),a=js(t);if(e!==t)if(r!==a)i.push(It(s,t,e));else if(r==="object")if(!q(t))i.push(It(s,t,e));else{const l=Pn(e,t,n,o);i.push(...l.map((d=>v({},d,{path:`${s}.${d.path}`}))))}else if(r==="array")if(o.some((d=>n.includes(d)))&&e!==t)i.push(It(s,t,e));else if(e.length!==t.length)i.push(It(s,t,e));else{const d=Pn(e,t,n,o);[].push.apply(i,d.map((c=>v({},c,{path:`${s}${c.path}`}))))}else i.push(It(s,t,e))}const Mr=i=>(e,t,s,n)=>{const o=[],r=Array.isArray(e)?a=>{Bn(o,e[a],t[a],`[${a}]`,`${s}.${a}`,n)}:a=>{Bn(o,e[a],t[a],a,`${s}.${a}`,n)};return i(e).forEach(r),Object.keys(t).filter((a=>!Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==t[a])).forEach((a=>{o.push({path:a,value:t[a],previousValue:e[a]})})),o},Pn=Mr((i=>Object.keys(i))),Bu={key:!0,ref:!0,children:!0,style:!0},Pu=Mr((i=>Object.keys(i).filter((e=>!Bu[e]))));function Mu(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ou;return Pu(i,e,"",t)}const Hu=["componentProps","componentType","templateNames"],Mn=i=>Object.keys(i).reduce(((e,t)=>(i[t]!==void 0&&(e[t]=i[t]),e)),{});class Lu extends bi{constructor(e){super(e),this.state={},this.refs=null,this.widgetRef=he(),this.instance=null,this.prevProps=null,this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}getConfig(){const{id:e}=Ye;return this.context[e]?this.context[e]:Ye.defaultValue}render(){return Mn(J(1,"div",this.props.componentProps.className,null,1,v({},this.getRestAttributes()),null,this.widgetRef))}componentWillUpdate(e,t,s){super.componentWillUpdate(e,t,s)}createEffects(){return[new P(this.setupWidget,[]),new P(this.updateWidget,[this.props.componentProps,this.getConfig(),this.props.templateNames])]}updateEffects(){var e;const t=[this.props.componentProps,this.getConfig(),this.props.templateNames];(e=this._effects[1])===null||e===void 0||e.update(t)}setupWidget(){const e=this.widgetRef.current,t=new this.props.componentType(e,this.getProperties());return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){if(!this.instance)return;const e=Mu(this.prevProps??{},this.getProperties());e.length&&(this.instance.beginUpdate(),e.forEach((t=>{var s;const{path:n,value:o}=t;(s=this.instance)===null||s===void 0||s.option(n,o)})),this.instance.endUpdate()),this.prevProps=this.getProperties()}getRestAttributes(){const e=this.props;return nt(e,Hu)}getProperties(){var e;const t=Mn(this.props.componentProps),{valueChange:s}=t,n=T({rtlEnabled:(e=this.getConfig())===null||e===void 0?void 0:e.rtlEnabled,isRenovated:!0},t);return s&&(n.onValueChanged=r=>{const{value:a}=r;return s(a)}),this.props.templateNames.forEach((r=>{Dd(r,n)&&(n[r]=(a,l,d)=>{Td(this.props.componentProps[r],{item:a,index:l,container:d})})})),n}getInstance(){return this.instance}}const Fu=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],Vu=v({},Ci,{mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0});class Hr extends vt{constructor(e){super(e),this.state={}}get restAttributes(){const e=this.props;return nt(e,Fu)}render(){return Fe(ge(2,Lu,v({componentType:Da,componentProps:this.props,templateNames:[]},this.restAttributes)))}}Hr.defaultProps=Vu;const Wu=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Ku=i=>{const{classes:e,isValid:t,readOnly:s}=i,n={"dx-state-readonly":!!s,"dx-invalid":!t,[String(e)]:!!e};return Ue(n)},Lr=v({},Go,{readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:{},defaultValue:null,valueChange:()=>{}});let Fr=class extends As{constructor(e){super(e),this.state={},this.widgetRef=he(),this.rootElementRef=he(),this.__getterCache={},this.state={validationMessageGuid:`dx-${new Q}`,isValidationMessageVisible:!1,value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new P(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),ks()]}updateEffects(){var e;(e=this._effects)===null||e===void 0||(e=e[0])===null||e===void 0||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState((()=>({isValidationMessageVisible:this.shouldShowValidationMessage})))}onFocusIn(e){const{onFocusIn:t}=this.props;t==null||t(e)}get cssClasses(){return`${Ku(v({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:e,validationStatus:t}=this.props,s=this.validationErrors??[];return!(e&&t!=="invalid")&&s.length>0}get aria(){const{isValid:e,readOnly:t}=this.props,s={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(s.describedBy=this.state.validationMessageGuid),v({},s,this.props.aria)}get validationErrors(){return this.__getterCache.validationErrors!==void 0?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:e,validationErrors:t}=this.props;let s=t&&[...t];return!s&&e&&(s=[v({},e)]),s})()}get validationMessageTarget(){var e;return(e=this.rootElementRef)===null||e===void 0?void 0:e.current}get restAttributes(){const e=this.props;return nt(e,Wu)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return Fe(ge(2,Ii,v({rootElementRef:this.rootElementRef,aria:this.aria,classes:this.cssClasses,activeStateEnabled:this.props.activeStateEnabled,focusStateEnabled:this.props.focusStateEnabled,hoverStateEnabled:this.props.hoverStateEnabled,accessKey:this.props.accessKey,className:this.props.className,rtlEnabled:this.props.rtlEnabled,hint:this.props.hint,disabled:this.props.disabled,height:this.props.height,width:this.props.width,onFocusIn:this.props.onFocusIn,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:this.props.tabIndex,visible:this.props.visible},this.restAttributes,{children:gt([this.props.children,this.state.isValidationMessageVisible&&ge(2,Hr,{validationErrors:this.validationErrors,mode:this.props.validationMessageMode,positionSide:this.props.validationMessagePosition,rtlEnabled:this.props.rtlEnabled,target:this.validationMessageTarget,boundary:this.validationMessageTarget,visualContainer:this.validationMessageTarget,contentId:this.state.validationMessageGuid})],0)}),null,this.widgetRef))}};Fr.defaultProps=Lr;const zu=["accessKey","activeStateEnabled","aria","className","classes","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Nu=i=>{const{text:e,value:t}=i,s=t;return Ue({"dx-checkbox":!0,"dx-checkbox-checked":s===!0,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":s===null})},Uu=v({},Lr,{text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return $.real().deviceType==="desktop"&&!$.isSimulator()},defaultValue:!1,valueChange:()=>{}});let ms=class extends As{constructor(e){super(e),this.editorRef=he(),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[ks()]}onWidgetClick(e){const{enableThreeStateBehavior:t,readOnly:s,saveValueChangeEvent:n}=this.props;if(!s)if(n==null||n(e),t){var o,r;let d;this.setState((c=>(d=(this.props.value!==void 0?this.props.value:c.value)===null||((this.props.value!==void 0?this.props.value:c.value)?!1:null),{value:d}))),(o=(r=this.props).valueChange)===null||o===void 0||o.call(r,d)}else{var a,l;let d;this.setState((c=>(d=!((this.props.value!==void 0?this.props.value:c.value)??!1),{value:d}))),(a=(l=this.props).valueChange)===null||a===void 0||a.call(l,d)}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:s,originalEvent:n,which:o}=e,r=t==null?void 0:t(e);if(r!=null&&r.cancel)return r;(s==="space"||o==="space")&&(n.preventDefault(),this.onWidgetClick(n))}get cssClasses(){return Nu(v({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}get aria(){const e=(this.props.value!==void 0?this.props.value:this.state.value)===!0,s={role:"checkbox",checked:(this.props.value!==void 0?this.props.value:this.state.value)===null?"mixed":`${e}`};return v({},s,this.props.aria)}get restAttributes(){const e=this.props;return nt(e,zu)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const e=this.props.value!==void 0?this.props.value:this.state.value;return Fe(ge(2,Fr,v({aria:this.aria,classes:this.cssClasses,onClick:this.onWidgetClick,onKeyDown:this.keyDown,accessKey:this.props.accessKey,activeStateEnabled:this.props.activeStateEnabled,focusStateEnabled:this.props.focusStateEnabled,hoverStateEnabled:this.props.hoverStateEnabled,className:this.props.className,disabled:this.props.disabled,readOnly:this.props.readOnly,hint:this.props.hint,height:this.props.height,width:this.props.width,rtlEnabled:this.props.rtlEnabled,tabIndex:this.props.tabIndex,visible:this.props.visible,validationError:this.props.validationError,validationErrors:this.props.validationErrors,validationMessageMode:this.props.validationMessageMode,validationMessagePosition:this.props.validationMessagePosition,validationStatus:this.props.validationStatus,isValid:this.props.isValid,onFocusIn:this.props.onFocusIn},this.restAttributes,{children:gt([Fe(J(64,"input",null,null,1,v({type:"hidden",value:`${e}`},this.props.name&&{name:this.props.name}))),J(1,"div","dx-checkbox-container",[ge(2,Pr,{size:this.props.iconSize,isChecked:e===!0}),this.props.text&&J(1,"span","dx-checkbox-text",this.props.text,0)],0)],4)}),null,this.editorRef))}};function Gu(i){const e=["value"];return Object.keys(i).reduce(((t,s)=>{const n=i[s],o=e.some((r=>r===s))?`default${s.charAt(0).toUpperCase()}${s.slice(1)}`:s;return t[o]=n,t}),{})}ms.defaultProps=Uu;const Hn=[];function ju(i){Hn.push(i),ms.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(ms.defaultProps),Object.getOwnPropertyDescriptors(Gu(rs(Hn)))))}function qu(i,e){var t;return(((t=i.getRootNode)===null||t===void 0?void 0:t.call(i))??document).querySelector(e)}const Ln="dx-invalid-message-auto",Fn="dx-validation-target";class ki extends $s{getProps(){const e=super.getProps();return e.onFocusIn=()=>{if(this.option("validationMessageMode")==="auto"){const s=h(qu(this.element(),".dx-invalid-message.dx-overlay-wrapper"));s==null||s.removeClass(Ln);const n=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>{s==null||s.addClass(Ln)}),n)}},e.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=de(),en(this.$element()[0],Fn,this)}_render(){var e;(e=this.option("_onMarkupRendered"))===null||e===void 0||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(ls.initValidationOptions(e))}_getDefaultOptions(){return T(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){const s=T({},e.option()),n=()=>this._silent(t,s);n(),e.on("optionChanged",n)}_raiseValidation(e,t){const s=!S(e)&&!S(t);e!==t&&!s&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var s;(s=this._valueChangeAction)===null||s===void 0||s.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){const{name:t,previousValue:s,value:n}=e;switch(t&&this._getActionConfigs()[t]!==void 0&&this._addAction(t),t){case"value":this._raiseValidation(n,s),this.option("isDirty",this._initialValue!==n),this._raiseValueChangeAction(n,s);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(ls.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){const{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),en(this.element(),Fn,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}const Yu=vs.isEditor,Vr=i=>Yu(i)||i instanceof ki;ki.isEditor=Vr;vs.isEditor=Vr;let Xu=class extends ki{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const e=super.getProps();return e.value!==null&&(e.value=!!e.value),e}};class gs extends Xu{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.focus(...arguments)}blur(){var e;return(e=this.viewRef)===null||e===void 0?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return ms}}ie("dxCheckBox",gs);gs.defaultOptions=ju;const $i="dxListEditDecorator",Ju=I(Oh,$i),Qu=I(Rh,$i),Zu=I(vr,$i);class ep{constructor(e){this._itemWidthCache=0,this._list=e,this._init()}_shouldHandleSwipe(){return!1}_init(){}_attachSwipeEvent(e){const t={itemSizeFunc:()=>(this._clearSwipeCache&&(this._itemWidthCache=B(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache)};m.on(e.$itemElement,Ju,t,(s=>{this._itemSwipeStartHandler(s)})),m.on(e.$itemElement,Qu,(s=>{this._itemSwipeUpdateHandler(s)})),m.on(e.$itemElement,Zu,(s=>{this._itemSwipeEndHandler(s)}))}_itemSwipeStartHandler(e){const t=h(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *")){e.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(t)}_itemSwipeUpdateHandler(e){const t=e.currentTarget;if(t instanceof Element){const s=h(t);this._swipeUpdateHandler(s,e)}}_itemSwipeEndHandler(e){const t=e.currentTarget;if(t instanceof Element){const s=h(t);this._swipeEndHandler(s,e)}}beforeBag(e){}afterBag(e){}_commonOptions(){const{activeStateEnabled:e,hoverStateEnabled:t,focusStateEnabled:s}=this._list.option();return{activeStateEnabled:e,hoverStateEnabled:t,focusStateEnabled:s}}modifyElement(e){this._shouldHandleSwipe()&&(this._attachSwipeEvent(e),this._clearSwipeCache=!0)}afterRender(){}handleClick(e,t){}handleKeyboardEvents(e,t){}handleEnterPressing(e){}handleContextMenu(e){}_swipeStartHandler(e){}_swipeUpdateHandler(e,t){}_swipeEndHandler(e,t){}visibilityChange(){}getExcludedSelectors(){}dispose(){}}const ns={};function tp(i,e,t){ns[i]||(ns[i]={}),ns[i][e]=t}class Wr extends vs{_supportedKeys(){return v({},super._supportedKeys(),{space:function(e){e.preventDefault(),this._clickAction({event:e})}})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})}_canValueBeChangedByClick(){return!0}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>$.real().deviceType==="desktop"&&!$.isSimulator(),options:{focusStateEnabled:!0}}])}_init(){super._init(),this.$element().addClass("dx-radiobutton")}_initMarkup(){super._initMarkup(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")}_renderIcon(){this._$icon=h("<div>").addClass("dx-radiobutton-icon"),h("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)}_renderCheckedState(e){this.$element().toggleClass("dx-radiobutton-checked",e).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",e),this.setAria("checked",e)}_renderClick(){const e=I(Ie,this.NAME);this._clickAction=this._createAction((t=>{this._clickHandler(t.event)})),m.off(this.$element(),e),m.on(this.$element(),e,(t=>{var s;(s=this._clickAction)===null||s===void 0||s.call(this,{event:t})}))}_clickHandler(e){this._saveValueChangeEvent(e),this.option("value",!0),this._saveValueChangeEvent(void 0)}_optionChanged(e){const{name:t,value:s}=e;t==="value"?(this._renderCheckedState(s),super._optionChanged(e)):super._optionChanged(e)}}ie("dxRadioButton",Wr);const Vn="dx-list-select-decorator-enabled",sp="dx-list-select-checkbox-container",ip="dx-list-select-checkbox",np="dx-list-select-radiobutton-container",op="dx-list-select-radiobutton",Wn=I(Ie,"dxListEditDecorator");class rp extends ep{_init(){super._init();const{selectionMode:e}=this._list.option();this._singleStrategy=e==="single",this._containerClass=this._singleStrategy?np:sp,this._controlClass=this._singleStrategy?op:ip,this._controlWidget=this._singleStrategy?Wr:gs,this._list.$element().addClass(Vn)}beforeBag(e){const{$itemElement:t}=e,s=e.$container.addClass(this._containerClass),n=h("<div>").addClass(this._controlClass).appendTo(s);new this._controlWidget(n.get(0),v({},this._commonOptions(),{value:this._isSelected(t.get(0)),elementAttr:{"aria-label":k.format("CheckState")},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:o=>{const{value:r,component:a,event:l}=o;!!l&&(a._valueChangeEventInstance=void 0,a.option("value",!r))}}))}modifyElement(e){super.modifyElement(e);const{$itemElement:t}=e,s=this._controlWidget.getInstance(t.find(`.${this._controlClass}`).get(0));m.on(t,"stateChanged",((n,o)=>{s.option("value",o)}))}_updateSelectAllState(){var e;this._$selectAll&&((e=this._selectAllCheckBox)===null||e===void 0||e.option("value",this._list.isSelectAll()))}afterRender(){const{selectionMode:e}=this._list.option();e==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())}handleKeyboardEvents(e,t){const s=!t,n=this._list,o=this._$selectAll,r=n._getLastItemIndex();if(!!o&&(t&&e===0||s&&e===r)){n.option("focusedElement",O(o));const{focusedElement:d}=n.option();return d&&n.scrollToItem(d),!0}return!1}handleEnterPressing(e){var t;return(t=this._$selectAll)!==null&&t!==void 0&&t.hasClass("dx-state-focused")?(e.target=this._$selectAll.get(0),this._selectAllHandler(e),!0):!1}_renderSelectAll(){this._$selectAll=h("<div>").addClass("dx-list-select-all");const e=this._list._supportedKeys().downArrow.bind(this._list),t=h("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(t,gs,{elementAttr:{"aria-label":k.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",e);const{selectAllText:s=""}=this._list.option();h("<div>").addClass("dx-list-select-all-label").text(s).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()}_attachSelectAllHandler(){var e;(e=this._selectAllCheckBox)===null||e===void 0||e.option("onValueChanged",(t=>{const{value:s,component:n,event:o}=t;if(!!o){n._setOptionWithoutOptionChange("value",!s);return}this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:s})})),m.off(this._$selectAll,Wn),m.on(this._$selectAll,Wn,(t=>{this._selectAllHandler(t)}))}_updateSelectAllAriaLabel(){var e;if(!this._$selectAll)return;const{value:t}=((e=this._selectAllCheckBox)===null||e===void 0?void 0:e.option())??{},o=t===void 0?"indeterminate":t?"checked":"notChecked",r=`${k.format("dxList-selectAll")}, ${k.format(`dxList-selectAll-${o}`)}`;this._$selectAll.attr({"aria-label":r})}_selectAllHandler(e){var t;e.stopPropagation(),this._list._saveSelectionChangeEvent(e);const{value:s}=((t=this._selectAllCheckBox)===null||t===void 0?void 0:t.option())??{},n=s?this._unselectAllItems():this._selectAllItems();return this._list.option("focusedElement",O(h(this._$selectAll))),n}_checkSelectAllCapability(){const e=this._list,t=e._dataController,{selectAllMode:s,grouped:n}=e.option();return s==="allPages"&&n&&!t.group()?(te.log("W1010"),!1):!0}_selectAllItems(){if(!this._checkSelectAllCapability())return y().resolve();const{selectAllMode:e}=this._list.option();return this._list._selection.selectAll(e==="page")}_unselectAllItems(){if(!this._checkSelectAllCapability())return y().resolve();const{selectAllMode:e}=this._list.option();return this._list._selection.deselectAll(e==="page")}_isSelected(e){return this._list.isItemSelected(e)}dispose(){this._disposeSelectAll(),this._list.$element().removeClass(Vn),super.dispose()}_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}tp("selection","default",rp);const Kr=T({},ro,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new ao({store:new lo(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=Qe(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=Qe(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(i){const e=y();return i=this._unwrappedValue(i),S(i)?(this._loadSingle(this._valueGetterExpr(),i).done((t=>{this._isValueEquals(this._valueGetter(t),i)?e.resolve(t):e.reject()})).fail((()=>{e.reject()})),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading(){var i;(i=this._loadValueDeferred)===null||i===void 0||i.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(i){return i=i??this._getCurrentValue(),i&&this._dataSource&&this._valueGetterExpr()==="this"&&(i=this._getItemKey(i)),Fi.unwrap(i)},_getItemKey(i){const e=this._dataSource.key();if(Array.isArray(e)){const t={};for(let s=0,n=e.length;s<n;s++)t[e[s]]=i[e[s]];return t}return e&&typeof i=="object"&&(i=i[e]),i},_isValueEquals(i,e){const t=this._dataSource&&this._dataSource.key();let s=this._compareValues(i,e);return!s&&t&&S(i)&&S(e)&&(Array.isArray(t)?s=this._compareByCompositeKey(i,e,t):s=this._compareByKey(i,e,t)),s},_compareByCompositeKey(i,e,t){const s=G;if(!s(i)||!s(e))return!1;for(let n=0,o=t.length;n<o;n++)if(i[t[n]]!==e[t[n]])return!1;return!0},_compareByKey(i,e,t){const s=Fi.unwrap,n=fe(s(i[t]),i),o=fe(s(e[t]),e);return this._compareValues(n,o)},_compareValues:(i,e)=>Li(i,!0)===Li(e,!0),_initDynamicTemplates:L,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const i=this.option("valueExpr");return pt(i)&&i!=="this"||oe(i)?i:null},_dataExpressionOptionChanged(i){switch(i.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),ap="dx-dropdowneditor-button-visible",lp="dxDropDownEditor-selectLabel";class dp extends xi{constructor(e,t,s){super(e,t,s),this.currentTemplate=null}_attachEvents(e){const{editor:t}=this;e.option("onClick",(s=>{var n;if((n=t._shouldCallOpenHandler)!==null&&n!==void 0&&n.call(t)){t._openHandler(s);return}!t.option("openOnFieldClick")&&t._openHandler(s)})),m.on(e.$element(),"mousedown",(s=>{t.$element().is(".dx-state-focused")&&s.preventDefault()}))}_create(){const{editor:e}=this,t=h("<div>"),s=this._getOptions();this._addToContainer(t);const n=e._createComponent(t,it,T({},s,{elementAttr:{"aria-label":k.format(lp)}}));return this._legacyRender(e.$element(),t,s.visible),{$element:t,instance:n}}_getOptions(){const{editor:e}=this,t=this._isVisible(),n={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(n),n}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,s){e.toggleClass(ap,s),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:t,instance:s}=this,n=t.$element(),o=this._getOptions();s==null||s.option(o),this._legacyRender(n,s==null?void 0:s.$element(),o.visible)}}}const Kn=function(i){if(ae())return X(i)},cp=function(i){return i===null&&(i=void 0),typeof i=="function"&&(i=i()),i},Mp="dx-dropdowneditor",zn="dx-dropdowneditor-input-wrapper",Qt="dx-dropdowneditor-overlay",hp="dx-dropdowneditor-overlay-flipped",up="dx-dropdowneditor-active",pp="dx-dropdowneditor-field-clickable",_p="dx-dropdowneditor-field-template-wrapper",Nn=$.current().platform==="ios";function Un(){return h("<div>").addClass(_p)}class zr extends lr{_supportedKeys(){return v({},super._supportedKeys(),{tab:e=>{if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length){this.close();return}const t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(m.trigger(t,"focus"),t.select()),e.preventDefault()},escape:e=>(this.option("opened")&&e.preventDefault(),this.close(),!0),upArrow:e=>!ft(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this.close(),!1):!0,downArrow:e=>!ft(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this._validatedOpening(),!1):!0,enter:e=>(this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0)})}_getDefaultButtons(){return super._getDefaultButtons().concat([{name:"dropDown",Ctor:dp}])}_getDefaultOptions(){return v({},super._getDefaultOptions(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:k.format("OK"),cancelButtonText:k.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto",_userDropDownOptions:{}})}_useTemplates(){return!0}_getDefaultPopupPosition(e){const t=ya(e);return{offset:{h:0,v:-1},my:`${t} top`,at:`${t} bottom`,collision:"flip flip"}}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(e){return e.platform==="generic"},options:{popupPosition:{offset:{v:0}}}}])}_inputWrapper(){return this.$element().find(`.${zn}`).first()}_init(){super._init(),this._initVisibilityActions(),this._initPopupInitializedAction();const{rtlEnabled:e,dropDownOptions:t}=this.option();this._updatePopupPosition(e),this._cacheUserDropDownOptions(t)}_updatePopupPosition(e){const{my:t,at:s}=this._getDefaultPopupPosition(e),n=this.option("popupPosition");this.option("popupPosition",T({},n,{my:t,at:s}))}_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})}_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})}_initMarkup(){this._renderSubmitElement(),super._initMarkup(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())}_render(){this._detachFocusEvents(),super._render(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()}_renderContentImpl(){this.option("deferRendering")||this._createPopup()}_renderInput(){super._renderInput(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()}_wrapInput(){this._$container=this.$element().wrapInner(h("<div>").addClass(zn)).children().eq(0)}_getAriaHasPopup(){return"true"}_getAriaAutocomplete(){return"none"}_getAriaRole(){return"combobox"}_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})}_readOnlyPropValue(){return!this._isEditable()||super._readOnlyPropValue()}_cleanFocusState(){super._cleanFocusState(),this.option("fieldTemplate")&&this._detachFocusEvents()}_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")}_renderMask(){this.option("fieldTemplate")||super._renderMask()}_renderField(){const e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())}_renderPlaceholder(){!!this._getFieldTemplate()||super._renderPlaceholder()}_renderValue(){return this.option("useHiddenSubmitElement")&&this._setSubmitValue(),super._renderValue().always(this._renderField.bind(this))}_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer}_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=Un().prependTo(this.$element())))}_renderTemplatedField(e,t){const s=Ot(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove();const n=Un();this._$templateWrapper.replaceWith(n),this._$templateWrapper=n;const o=Symbol("renderContext");this._activeRenderContext=o,e.render({model:t,container:O(this._$templateWrapper),onRendered:()=>{if(this._activeRenderContext!==o)return;const r=this._input();if(!r.length)throw te.Error("E1010");this._integrateInput(),s&&(ci.mozilla?r.get(0).focus({preventScroll:!0}):m.trigger(r,"focus"))}})}_integrateInput(){const{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e);const{_onMarkupRendered:t}=this.option();t==null||t()}_refreshEmptinessEvent(){m.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()}_fieldRenderData(){return this.option("value")}_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new Sa((e=>{const t=h("<div>").addClass("dx-dropdowneditor-icon");h(e.container).append(t)}))}),super._initTemplates()}_renderOpenHandler(){const e=this._inputWrapper(),t=I(Ie,this.NAME),{openOnFieldClick:s}=this.option();m.off(e,t),m.on(e,t,this._getInputClickHandler(s)),this.$element().toggleClass(pp,s),s&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))}_attachFocusOutHandler(){Nn&&(this._detachFocusOutEvents(),m.on(this._inputWrapper(),I("focusout",this.NAME),(e=>{const t=e.relatedTarget;t&&this.option("opened")&&this._isTargetOutOfComponent(t)&&this.close()})))}_isTargetOutOfComponent(e){const t=this.content?h(this.content()).closest(`.${Qt}`):this._$popup;return h(e).closest(`.${Qt}`,t).length===0}_detachFocusOutEvents(){Nn&&m.off(this._inputWrapper(),I("focusout",this.NAME))}_getInputClickHandler(e){return e?t=>{this._executeOpenAction(t)}:()=>{this._focusInput()}}_openHandler(){this._toggleOpenState()}_executeOpenAction(e){var t;(t=this._openOnFieldClickAction)===null||t===void 0||t.call(this,{event:e})}_keyboardEventBindingTarget(){return this._input()}_focusInput(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Ot(this._input())&&(this._resetCaretPosition(),m.trigger(this._input(),"focus")),!0)}_resetCaretPosition(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this._input().get(0);if(t){const{value:s}=t,n=S(s)&&(e||this._isEditable())?s.length:0;this._caret({start:n,end:n},!0)}}_isEditable(){const{acceptCustomValue:e}=this.option();return e}_toggleOpenState(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))}_getControlsAria(){return this._popup&&this._popupContentId}_renderOpenedState(){const e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass(up,e),this._setPopupOption("visible",e);const t={expanded:e,controls:this._getControlsAria()};this.setAria(t),this.setAria("owns",e?this._popupContentId:void 0,this.$element())}_createPopup(){this._$popup||(this._$popup=h("<div>").addClass(Qt).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())}_setPopupAriaLabel(){const e=this._popup.$overlayContent();this.setAria("label","Dropdown",e)}_renderPopupContent(){}_renderPopup(){const e=T(this._popupConfig(),this.option("_userDropDownOptions"));this._popup=this._createComponent(this._$popup,gr,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")}_attachPopupKeyHandler(){m.on(this._popup.$overlayContent(),I("keydown",this.NAME),(e=>this._popupKeyHandler(e)))}_popupKeyHandler(e){switch(Le(e)){case"tab":this._popupTabHandler(e);break;case"escape":this._popupEscHandler()}}_popupTabHandler(e){const t=h(e.target),s=e.shiftKey&&t.is(this._getFirstPopupElement());(!e.shiftKey&&t.is(this._getLastPopupElement())||s)&&(m.trigger(this.field(),"focus"),e.preventDefault())}_popupEscHandler(){m.trigger(this._input(),"focus"),this.close()}_setPopupContentId(e){this._popupContentId=`dx-${new Q}`,this.setAria("id",this._popupContentId,e)}_contentReadyHandler(){}_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:T(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Kn(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Qt,_ignorePreventScrollEventsDeprecation:!0}}_popupInitializedHandler(){}_getPopupInitializedHandler(){const{onPopupInitialized:e}=this.option();return t=>{this._popupInitializedHandler(),e&&this._popupInitializedAction({popup:t.component})}}_dimensionChanged(){if(ae()&&!this.$element().is(":visible")){this.close();return}this._updatePopupWidth()}_updatePopupWidth(){cp(this.option("dropDownOptions.width"))===void 0&&this._setPopupOption("width",(()=>Kn(this.$element())))}_popupPositionedHandler(e){var t;const{labelMode:s,stylingMode:n}=this.option();if(!this._popup)return;const o=this._popup.$overlayContent(),r=(t=e.position)===null||t===void 0||(t=t.v)===null||t===void 0?void 0:t.flip,a=s!=="hidden"&&s!=="outside"&&n==="outlined";if(e.position&&o.toggleClass(hp,r),r&&a&&this._label.isVisible()){const l=this._label.$element();ye(o,{top:Kt(o).top-parseInt(l.css("fontSize"))})}}_popupShowingHandler(){}_popupHidingHandler(){this.option("opened",!1)}_popupShownHandler(){var e;this._openAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())}_popupHiddenHandler(){var e;this._closeAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())}_getValidationMessagePositionSide(){var e;const{validationMessagePosition:t}=this.option();if(t!=="auto")return t;let s="bottom";if((e=this._popup)!==null&&e!==void 0&&e.option("visible")){const{top:n}=tn.setup(this.$element()),{top:o}=tn.setup(this._popup.$content());s=n+this.option("popupPosition").offset.v>o?"bottom":"top"}return s}_closeOutsideDropDownHandler(e){const{target:t}=e,s=h(t),n=this.getButton("dropDown"),o=n==null?void 0:n.$element(),r=!!s.closest(this.$element()).length,a=!!s.closest(o).length;return!r&&!a}_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),super._clean()}_setPopupOption(e,t){this._setWidgetOption("_popup",arguments)}_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)}_getPopupToolbarItems(){const{applyValueMode:e}=this.option();return e==="useButtons"?this._popupToolbarItemsConfig():[]}_getFirstPopupElement(){return h(this._popup.getFocusableElements()).first()}_getLastPopupElement(){return h(this._popup.getFocusableElements()).last()}_popupToolbarItemsConfig(){const e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(e)}_applyButtonsLocation(e){const{buttonsLocation:t}=this.option(),s=e;if(t!=="default"){const n=Qr(t);x(s,((o,r)=>{T(r,{toolbar:n[0],location:n[1]})}))}return s}_applyButtonHandler(e){this.close(),this.option("focusStateEnabled")&&this.focus()}_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()}_popupOptionChanged(e){const t=bs.getOptionsFromContainer(e);this._setPopupOption(t);const s=Object.keys(t);(s.includes("width")||s.includes("height"))&&this._dimensionChanged()}_cacheUserDropDownOptions(e){const s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"dropDownOptions").replace("dropDownOptions","_userDropDownOptions");this.option(s,e)}_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=h("<input>").attr("type","hidden").appendTo(this.$element()))}_setSubmitValue(){const{value:e}=this.option();this._getSubmitElement().val(e)}_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:super._getSubmitElement()}_dispose(){this._detachFocusOutEvents(),super._dispose()}_optionChanged(e){var t;const{name:s,fullName:n,value:o}=e;switch(s){case"width":case"height":super._optionChanged(e),(t=this._popup)===null||t===void 0||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._cacheUserDropDownOptions(o,n);break;case"_userDropDownOptions":case"popupPosition":break;case"deferRendering":ae()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(o),super._optionChanged(e);break;default:super._optionChanged(e)}}open(){this.option("opened",!0)}close(){this.option("opened",!1)}field(){return O(this._input())}content(){return this._popup?this._popup.content():null}}ie("dxDropDownEditor",zr);const Nr=[],Rs=i=>{let{enabled:e,decoratorType:t,decoratorSubType:s}=i;Nr.push({enabled:e,decoratorType:t,decoratorSubType:s})};Rs({enabled(){const{menuItems:i}=this.option();return!!i.length},decoratorType:()=>"menu",decoratorSubType(){const{menuMode:i}=this.option();return i}});Rs({enabled(){const{menuItems:i,allowItemDeleting:e}=this.option();return!!(!i.length&&e)},decoratorType(){const{itemDeleteMode:i}=this.option();return["toggle","slideButton","swipe","static"].includes(i)?"delete":"menu"},decoratorSubType(){let{itemDeleteMode:i}=this.option();return i==="slideItem"&&(i="slide"),i}});Rs({enabled(){const{selectionMode:i,showSelectionControls:e}=this.option();return!!(i!=="none"&&e)},decoratorType:()=>"selection",decoratorSubType:()=>"default"});Rs({enabled(){const{itemDragging:i}=this.option();return!!(i.allowReordering||i.allowDropInsideItem||i.group)},decoratorType:()=>"reorder",decoratorSubType:()=>"default"});class fp{constructor(e){this._list=e,this._decorators=[],this._fetchRequiredDecorators()}dispose(){var e;(e=this._decorators)!==null&&e!==void 0&&e.length&&x(this._decorators,((t,s)=>{s.dispose()}))}_fetchRequiredDecorators(){x(Nr,((e,t)=>{if(t.enabled.call(this._list)){const n=t.decoratorType.call(this._list),o=t.decoratorSubType.call(this._list),r=this._createDecorator(n,o);this._decorators.push(r)}}))}_createDecorator(e,t){const s=this._findDecorator(e,t);return new s(this._list)}_findDecorator(e,t){var s;const n=(s=ns[e])===null||s===void 0?void 0:s[t];if(!n)throw te.Error("E1012",e,t);return n}modifyItemElement(e){const t=h(e.itemElement),s={$itemElement:t,$container:h()};this._prependBeforeBags(t,s),this._appendAfterBags(t,s),this._applyDecorators("modifyElement",s)}afterItemsRendered(){this._applyDecorators("afterRender")}_prependBeforeBags(e,t){const s=this._collectDecoratorsMarkup("beforeBag",t,"dx-list-item-before-bag");e.prepend(s)}_appendAfterBags(e,t){const s=this._collectDecoratorsMarkup("afterBag",t,"dx-list-item-after-bag");e.append(s)}_collectDecoratorsMarkup(e,t,s){var n;const o=h("<div>");return(n=this._decorators)===null||n===void 0||n.forEach((r=>{if(oe(r[e])){const a=h("<div>").addClass(s);r[e](v({},t,{$container:a})),a.children().length&&o.append(a)}})),o.children()}_applyDecorators(e,t){var s;(s=this._decorators)===null||s===void 0||s.forEach((n=>{n[e](t)}))}_handlerExists(e){if(!this._decorators)return!1;const t=this._decorators,{length:s}=t;for(let n=0;n<s;n+=1)if(t[n][e]!==L)return!0;return!1}_eventHandler(e){if(!this._decorators)return!1;let t=!1;const s=this._decorators,{length:n}=s;for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];for(let l=0;l<n&&(t=s[l][e](...r),!t);l+=1);return t}handleClick(e,t){return this._eventHandler("handleClick",e,t)}handleKeyboardEvents(e,t){return this._eventHandler("handleKeyboardEvents",e,t)}handleEnterPressing(e){return this._eventHandler("handleEnterPressing",e)}contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")}handleContextMenu(e,t){return this._eventHandler("handleContextMenu",e,t)}getExcludedItemSelectors(){const e=[];return this._applyDecorators("getExcludedSelectors",e),e.join(",")}}const Us=i=>(i.group<<20)+i.item,ke=i=>({group:i>>20,item:1048575&i});class mp extends ir{_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")}_groupItemElements(e){return e.find(".dx-list-item")}getIndexByItemData(e){const t=this._getItems();let s=we;if(!e)return we;const{items:n=[]}=e;return n.length&&(e=n[0]),x(t,((o,r)=>r.items?(x(r.items,((a,l)=>l!==e?!0:(s={group:o,item:a},!1))),!ce(s)):!1)),s}_isIndexNumeric(e){return xt(e)}getItemDataByIndex(e){const t=this._getItems();if(this._isIndexNumeric(e))return this.itemsGetter()[e];const s=e.group,n=t[s],{items:o=[]}=n;return e&&o[e.item]||null}itemsGetter(){let e=[];return this._getItems().forEach((s=>{s.items?e=e.concat(s.items):e.push(s)})),e}deleteItemAtIndex(e){const t=ke(e),{items:s=[]}=this._collectionWidget.option(),n=s[t.group].items;n==null||n.splice(t.item,1)}getKeysByItems(e){return e.reduce(((s,n)=>n!=null&&n.items?s.concat(n.items):(s.push(n),s)),[]).map((s=>this._collectionWidget.keyOf(s)))}getIndexByKey(e,t){const{items:s}=this._collectionWidget.option(),n=t??s;let o=-1;return x(n,((r,a)=>{if(a.items&&(x(a.items,((l,d)=>{const c=this._collectionWidget.keyOf(d);if(this._equalKeys(c,e))return o={group:r,item:l},!1})),o!==-1))return!1})),typeof o=="object"?Us(o):o}_getGroups(e){const s=this._collectionWidget._dataController.group();if(s)return ja.queryByOptions(tt(e),{group:s}).toArray();const{items:n=[]}=this._collectionWidget.option();return n}getItemsByKeys(e,t){const s=[],n=this._getGroups(t),o={},r=a=>{const l=this.getIndexByKey(a,n),d=ke(l),c=d&&n[d.group];if(c)return{groupKey:String(c.key),item:c.items[d.item]}};return x(e,((a,l)=>{var d;const c=r(l);if(!c)return;const{groupKey:_,item:u}=c;let p=o[_];p||(p={key:_,items:[]},o[_]=p,s.push(p)),(d=p.items)===null||d===void 0||d.push(u)})),s}moveItemAtIndexToIndex(e,t){const{items:s=[]}=this._collectionWidget.option(),n=ke(e),o=ke(t),r=s[n.group].items,a=s[o.group].items;if(r){const l=r==null?void 0:r[n.item];r==null||r.splice(n.item,1),a==null||a.splice(o.item,0,l)}}_isItemIndex(e){return!!(e&&xt(e.group)&&xt(e.item))}_getNormalizedItemIndex(e){const t=h(e),s=t.closest(".dx-list-group");return s.length?Us({group:this._groupElements().index(s),item:this._groupItemElements(s).index(t)}):-1}_normalizeItemIndex(e){return Us(e)}_denormalizeItemIndex(e){return ke(e)}_getItemByNormalizedIndex(e){const t=ke(e),s=this._groupElements().eq(t.group);return this._groupItemElements(s).eq(t.item)}_itemsFromSameParent(e,t){return ke(e).group===ke(t).group}}class gp extends Br{_supportedKeys(){const e=super._supportedKeys(),t=(s,n)=>{const{focusedElement:o,itemDragging:r,grouped:a}=this.option(),l=this._editStrategy,d=l.getNormalizedIndex(o);if(!(d===this._getLastItemIndex()&&this._dataController.isLoading()))if(s.shiftKey&&r!==null&&r!==void 0&&r.allowReordering){const _=d+(n?-1:1),u=l.getItemElement(_);a&&h(o).parent().get(0)!==u.parent().get(0)||(this.reorderItem(h(o).get(0),u.get(0)),this.scrollToItem(h(o))),s.preventDefault()}else this._editProvider.handleKeyboardEvents(d,n)||(n?e.upArrow(s):e.downArrow(s))};return v({},e,{del:s=>{const{allowItemDeleting:n,focusedElement:o}=this.option();n&&o&&(s.preventDefault(),this.deleteItem(o))},upArrow:s=>t(s,!0),downArrow:s=>t(s),enter:s=>{this._editProvider.handleEnterPressing(s)||e.enter.apply(this,[s])},space:s=>{this._editProvider.handleEnterPressing(s)||e.space.apply(this,[s])}})}_updateSelection(){this._editProvider.afterItemsRendered(),super._updateSelection()}_getLastItemIndex(){return this._itemElements().length-1}_refreshItemElements(){super._refreshItemElements();const e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))}_isItemStrictEquals(e,t){const s=e==null?void 0:e[kr];return s&&!this.key()&&this._selection.isItemSelected(s)?!1:super._isItemStrictEquals(e,t)}_getDefaultOptions(){return v({},super._getDefaultOptions(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:k.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:e=>e.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])}_init(){super._init(),this._initEditProvider()}_initDataSource(){if(super._initDataSource(),!this._isPageSelectAll()){var e;(e=this._dataSource)===null||e===void 0||e.requireTotalCount(!0)}}_isPageSelectAll(){const{selectAllMode:e}=this.option();return e==="page"}_initEditProvider(){this._editProvider=new fp(this)}_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()}_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()}_initEditStrategy(){const{grouped:e}=this.option();e?this._editStrategy=new mp(this):super._initEditStrategy()}_initMarkup(){this._refreshEditProvider(),super._initMarkup()}_renderItems(e){super._renderItems(e),this._editProvider.afterItemsRendered()}_renderItem(e,t,s,n){const{showSelectionControls:o,selectionMode:r}=this.option(),a=super._renderItem(e,t,s,n);return o&&r!=="none"&&this._updateItemAriaLabel(a,t),a}_updateItemAriaLabel(e,t){var s;const n=((s=this._displayGetter)===null||s===void 0?void 0:s.call(this,t))??(t==null?void 0:t.text)??t;this.setAria("label",G(n)?k.format("dxList-listAriaLabel-itemContent"):n,e)}_selectedItemClass(){return"dx-list-item-selected"}_itemResponseWaitClass(){return"dx-list-item-response-wait"}_itemClickHandler(e,t,s){const n=h(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(n,e)||(this._saveSelectionChangeEvent(e),super._itemClickHandler(e,t,s))}_shouldFireContextMenuEvent(){return super._shouldFireContextMenuEvent()||this._editProvider.contextMenuHandlerExists()}_itemHoldHandler(e){const t=h(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *"))return;if(Ea(e)&&this._editProvider.handleContextMenu(t,e)){e.handledByEditProvider=!0;return}super._itemHoldHandler(e)}_itemContextMenuHandler(e){const t=h(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *"))return;if(!e.handledByEditProvider&&this._editProvider.handleContextMenu(t,e)){e.preventDefault();return}super._itemContextMenuHandler(e)}_postprocessRenderItem(e){super._postprocessRenderItem(e),this._editProvider.modifyItemElement(e)}_clean(){this._disposeEditProvider(),super._clean()}focusListItem(e){const t=this._editStrategy.getItemElement(e);this.option("focusedElement",O(t)),this.focus(),this.scrollToItem(t)}_getFlatIndex(){const{selectedIndex:e=we}=this.option();if(xt(e)||!e)return e;const t=this._editStrategy.getItemElement(e);return this.getFlatIndexByItemElement(t)}_optionChanged(e){const{name:t}=e;switch(t){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),this._initEditStrategy(),super._optionChanged(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:super._optionChanged(e)}}selectAll(){return this._selection.selectAll(this._isPageSelectAll())}unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())}isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())}getFlatIndexByItemElement(e){return this._itemElements().index(e)}getItemElementByFlatIndex(e){const t=this._itemElements();return e<0||e>=t.length?h():t.eq(e)}getItemByIndex(e){return this._editStrategy.getItemDataByIndex(e)}deleteItem(e){const t=this._editStrategy,s=t.getNormalizedIndex(e),{focusedElement:n,focusStateEnabled:o}=this.option(),r=n?t.getNormalizedIndex(n):s,l=r===this._getLastItemIndex()||s<r?r-1:r;return super.deleteItem(e).done((()=>{o&&this.focusListItem(l)}))}}class Ur extends gp{_getCombinedFilter(){const e=this._dataController,t={filter:e.filter()};e.addSearchFilter(t);const{filter:s}=t;return s}_getDefaultOptions(){return v({},super._getDefaultOptions(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})}_getSearchBoxControllerOptions(){const{tabIndex:e,searchEnabled:t,searchValue:s,searchTimeout:n,searchEditorOptions:o}=this.option();return{tabIndex:e,searchEnabled:t,searchValue:s,searchTimeout:n,searchEditorOptions:o,onValueChanged:r=>{this.option("searchValue",r)}}}_initDataSource(){const{searchValue:e,searchExpr:t,searchMode:s}=this.option();super._initDataSource();const n=this._dataController;e!=null&&e.length&&n.searchValue(e),s!=null&&s.length&&n.searchOperation(In(s)),t&&n.searchExpr(t)}_init(){this._searchBoxController=new Wt,super._init()}_initMarkup(){this._searchBoxController.render("dx-list",this.$element(),this._getSearchBoxControllerOptions(),this._createComponent.bind(this)),super._initMarkup()}_getAriaTarget(){const{searchEnabled:e}=this.option();return e?this._itemContainer():super._getAriaTarget()}focus(){const{focusedElement:e,searchEnabled:t}=this.option();if(!e&&t){var s;(s=this._searchBoxController)===null||s===void 0||s.focus();return}super.focus()}_focusTarget(){const{searchEnabled:e}=this.option();return e?this._itemContainer():super._focusTarget()}_updateFocusState(e,t){const{searchEnabled:s}=this.option();s&&this._toggleFocusClass(t,this.$element()),super._updateFocusState(e,t)}_optionChanged(e){const{name:t,value:s}=e;switch(t){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){te.log("W1009");return}t==="searchMode"?this._dataSource.searchOperation(In(s)):this._dataSource[t](s),this._dataSource.load();break;case"searchTimeout":break;default:super._optionChanged(e)}}_refresh(){var e;(e=this._searchBoxController)===null||e===void 0||e.resolveValueChange(),super._refresh()}_cleanAria(){const e=this.$element();this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)}_clean(){this._cleanAria(),super._clean()}_dispose(){var e;(e=this._searchBoxController)===null||e===void 0||e.dispose(),super._dispose()}}ie("dxList",Ur);const Gn=et(),vp=["startswith","contains","endwith","notcontains"],jn=$.real().platform!=="android";class Oi extends zr{_supportedKeys(){const e=super._supportedKeys();return v({},e,{tab(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);const{focusedElement:s}=this._list.option(),n=h(s);n.length&&this._setSelectedElement(n)}e.tab(t)},space:L,home:L,end:L})}_allowSelectItemByTab(){const{opened:e,applyValueMode:t}=this.option();return e&&t==="instantly"}_setSelectedElement(e){const t=this._valueGetter(this._list._getItemData(e));this._setValue(t)}_setValue(e){this.option("value",e)}_getDefaultOptions(){return v({},super._getDefaultOptions(),Kr._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:k.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:L,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])}_setOptionsByReference(){super._setOptionsByReference(),T(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})}_init(){super._init(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()}_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)}_initItems(){const{items:e}=this.option();e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())}_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()}_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})}_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({item:new xa("item")})}_isEditable(){const{searchEnabled:e}=this.option();return super._isEditable()||e}_saveFocusOnWidget(){var e;(e=this._list)!==null&&e!==void 0&&e.initialOption("focusStateEnabled")&&this._focusInput()}_fitIntoRange(e,t,s){return e>s?t:e<t?s:e}_items(){const e=this._getPlainItems(!this._list&&this._dataSource.items());return new tt(e).filter("disabled","<>",!0).toArray()}_calcNextItem(e){const t=this._items(),s=this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1);return t[s]}_getSelectedIndex(){const e=this._items(),t=this.option("selectedItem");let s=-1;return x(e,((n,o)=>{if(this._isValueEquals(o,t))return s=n,!1})),s}_createPopup(){super._createPopup(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const e=this._popup.$content();m.off(e,"mouseup"),m.on(e,"mouseup",this._saveFocusOnWidget.bind(this))}_updateCustomBoundaryContainer(){const e=this.option("dropDownOptions.container"),t=e&&h(e);if(t&&t.length&&!_t(t.get(0))){const s=[].slice.call(t.parents());s.unshift(t.get(0)),x(s,((n,o)=>{if(o===h("body").get(0))return!1;if(Gn.getComputedStyle(o).overflowY==="hidden")return this._$customBoundaryContainer=h(o),!1}))}}_popupWrapperClass(){return"dx-dropdownlist-popup-wrapper"}_renderInputValue(){var e=this;let{value:t,renderOnly:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=t??this._getCurrentValue();return this._rejectValueLoading(),s?super._renderInputValue(n):this._loadInputValue(n,(function(){e._setSelectedItem(...arguments)})).always(super._renderInputValue.bind(this,n))}_loadInputValue(e,t){return this._loadItem(e).always(t)}_getItemFromPlain(e,t){let s,n;return t&&typeof e!="object"&&(t.itemByValue||(t.itemByValue={},s=this._getPlainItems(),s.forEach((function(o){t.itemByValue[this._valueGetter(o)]=o}),this)),n=t.itemByValue[e]),n||(s=this._getPlainItems(),n=ai(s,(o=>this._isValueEquals(this._valueGetter(o),e)))[0]),n}_resetInputText(){this._renderInputValue({renderOnly:!0})}_loadItem(e,t){const s=this._getItemFromPlain(e,t);return s!==void 0?y().resolve(s).promise():this._loadValue(e)}_getPlainItems(e){let t=[];const{grouped:s}=this.option();e=e||this.option("items")||this._dataSource.items()||[];for(let o=0;o<e.length;o++){var n;s&&(n=e[o])!==null&&n!==void 0&&n.items?t=t.concat(e[o].items):t.push(e[o])}return t}_updateActiveDescendant(e){var t;const s=this.option("opened"),n=(t=this._list)===null||t===void 0?void 0:t.getFocusedItemId(),o=h(`#${n}`).length>0,r=s&&o&&n;this.setAria({activedescendant:r||null},e)}_setSelectedItem(e){const t=this._displayValue(e);this.option("selectedItem",fe(e,null)),this.option("displayValue",t)}_displayValue(e){return this._displayGetter(e)}_refreshSelected(){const e={};this._listItemElements().each(((t,s)=>{const n=h(s),o=this._valueGetter(n.data("dxListItemData"));this._isSelectedValue(o,e)?this._list.selectItem(n):this._list.unselectItem(n)}))}_popupShownHandler(){super._popupShownHandler(),this._setFocusPolicy()}_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_validateSearchMode(){const e=this.option("searchMode"),t=e.toLowerCase();if(!vp.includes(t))throw te.Error("E1019",e)}_clearSelectedItem(){this.option("selectedItem",null)}_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail((()=>{this._isCustomValueAllowed()||this._clearSelectedItem()}))}_isCustomValueAllowed(){return this.option("displayCustomValue")}clear(){super.clear(),this._clearFilter(),this._clearSelectedItem()}_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):h()}_popupConfig(){return v({},super._popupConfig(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})}_renderPopupContent(){super._renderPopupContent(),this._renderList()}_getKeyboardListeners(){return this._canListHaveFocus()?super._getKeyboardListeners():super._getKeyboardListeners().concat([this._list])}_renderList(){this._listId=`dx-${new Q()._value}`;const e=h("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,Ur,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()}_renderPreventBlurOnListClick(){const e=I("mousedown","dxDropDownList");m.off(this._$list,e),m.on(this._$list,e,(t=>t.preventDefault()))}_getControlsAria(){return this._list&&this._listId}_renderOpenedState(){super._renderOpenedState(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)}_getAriaHasPopup(){return"listbox"}_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()}_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()}_isDesktopDevice(){return $.real().deviceType==="desktop"}_listConfig(){const{noDataText:e,grouped:t,wrapItemText:s,itemTemplate:n,groupTemplate:o,hoverStateEnabled:r,focusStateEnabled:a,encodeNoDataText:l,useItemTextAsTitle:d}=this.option(),c={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:e,encodeNoDataText:l,grouped:t,wrapItemText:s,useItemTextAsTitle:d,onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:n,indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:o,onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?r:!1,focusStateEnabled:this._isDesktopDevice()?a:!1,_onItemsRendered:()=>{this._popup.repaint()}};return this._canListHaveFocus()||(c.tabIndex=null),c}_canListHaveFocus(){return!1}_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null}_dataSourceOptions(){return{paginate:!1}}_getSpecificDataSourceOption(){const{grouped:e}=this.option(),t=this.option("dataSource");return t&&e?Ar(t):t}_dataSourceFromUrlLoadMode(){return"raw"}_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()}_setListOption(e,t){this._setWidgetOption("_list",arguments)}_listItemClickAction(e){this._listItemClickHandler(e),this._itemClickAction(e)}_listItemClickHandler(e){}_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))}_needPassDataSourceToList(){const{showDataBeforeSearch:e}=this.option();return e||this._isMinSearchLengthExceeded()}_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")}_needClearFilter(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()}_canKeepDataSource(){const e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded}_searchValue(){return this._input().val()||""}_getSearchEvent(){return I("input",`${this.NAME}Search`)}_getCompositionStartEvent(){return I("compositionstart",`${this.NAME}CompositionStart`)}_getCompositionEndEvent(){return I("compositionend",`${this.NAME}CompositionEnd`)}_getSetFocusPolicyEvent(){return I("input",`${this.NAME}FocusPolicy`)}_renderEvents(){super._renderEvents(),m.on(this._input(),this._getSetFocusPolicyEvent(),(()=>{this._setFocusPolicy()})),this._shouldRenderSearchEvent()&&(m.on(this._input(),this._getSearchEvent(),(e=>{this._searchHandler(e)})),jn&&(m.on(this._input(),this._getCompositionStartEvent(),(()=>{this._isTextCompositionInProgress(!0)})),m.on(this._input(),this._getCompositionEndEvent(),(e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())}))))}_shouldRenderSearchEvent(){return this.option("searchEnabled")}_refreshEvents(){m.off(this._input(),this._getSearchEvent()),m.off(this._input(),this._getSetFocusPolicyEvent()),jn&&(m.off(this._input(),this._getCompositionStartEvent()),m.off(this._input(),this._getCompositionEndEvent())),super._refreshEvents()}_isTextCompositionInProgress(e){if(arguments.length)this._isTextComposition=e;else return this._isTextComposition}_searchHandler(e,t){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}const{searchTimeout:s}=this.option();s?(this._clearSearchTimer(),this._searchTimer=setTimeout((()=>{this._searchDataSource(t)}),s)):this._searchDataSource(t)}_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()}_searchDataSource(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(e)}_filterDataSource(e){this._clearSearchTimer();const t=this._dataController;t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e))}_clearFilter(){const e=this._dataController;e.searchValue()&&e.searchValue(null)}_dataSourceFiltered(e){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()}_shouldOpenPopup(){return this._hasItemsToShow()}_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))}_dataSourceChangedHandler(e){this._dataController.pageIndex()===0?this.option().items=e:this.option().items=this.option().items.concat(e)}_hasItemsToShow(){const s=(this._dataController.items()||[]).length;return!!(this._needPassDataSourceToList()&&s)}_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer}_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()}_dimensionChanged(){super._dimensionChanged(),this._updateListDimensions()}_needPopupRepaint(){const e=this._dataController,t=e.pageIndex(),s=S(this._pageIndex)&&t<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=t,s}_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())}_getMaxHeight(){const e=this.$element(),t=this._$customBoundaryContainer,s=e.offset().top-(t?t.offset().top:0),n=K(Gn),o=t?Math.min(K(t),n):n,r=Math.max(s,o-s-K(e));return Math.min(.5*o,r)}_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,super._clean()}_dispose(){this._clearSearchTimer(),super._dispose()}_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)}_setSubmitValue(){const e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)}_shouldUseDisplayValue(e){return this.option("valueExpr")==="this"&&G(e)}_optionChanged(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),super._optionChanged(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:super._optionChanged(e)}}}Oi.include(Kr);ie("dxDropDownList",Oi);let bp=class extends Oi{_supportedKeys(){const e=this,t=super._supportedKeys(),s=function(o){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(o.preventDefault(),this.clear()),this._savedTextRemoveEvent=o,this._preventSubstitution=!0},n=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return v({},t,{tab(){const{opened:o}=this.option(),r=o&&!!this._popup.getFocusableElements().length;r||this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),r||this._cancelSearchIfNeed()},upArrow(o){if(t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},downArrow(o){if(t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},leftArrow(){var o;n(),(o=t.leftArrow)===null||o===void 0||o.apply(this,arguments)},rightArrow(){var o;n(),(o=t.rightArrow)===null||o===void 0||o.apply(this,arguments)},home(){var o;n(),(o=t.home)===null||o===void 0||o.apply(this,arguments)},end(){var o;n(),(o=t.end)===null||o===void 0||o.apply(this,arguments)},escape(){var o;const r=(o=t.escape)===null||o===void 0?void 0:o.apply(this,arguments);return this._cancelEditing(),r??!0},enter(o){const r=this.option("opened"),a=this._input().val().trim(),l=a&&this._list&&!this._list.option("focusedElement");if(!a&&S(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(o),this.option({selectedItem:null,value:null}),this.close();else{var d;if(this.option("acceptCustomValue"))return o.preventDefault(),l&&(r&&this._toggleOpenState(),this._valueChangeEventHandler(o)),r;if((d=t.enter)!==null&&d!==void 0&&d.apply(this,arguments))return r}},space(o){const r=this.option("opened"),a=this.option("searchEnabled"),l=this.option("acceptCustomValue");if(!(!r||a||l))return o.preventDefault(),this._valueChangeEventHandler(o),!0},backspace:s,del:s})}_getDefaultOptions(){return v({},super._getDefaultOptions(),{placeholder:k.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",acceptCustomValue:!1,onCustomItemCreating(e){S(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})}_init(){super._init(),this._initCustomItemCreatingAction()}_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),super._initMarkup(),this._$container.addClass("dx-selectbox-container")}_createPopup(){super._createPopup(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)}_popupWrapperClass(){return`${super._popupWrapperClass()} dx-selectbox-popup-wrapper`}_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))}_renderOpenedState(){super._renderOpenedState(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())}_focusSelectedElement(){if(!this._searchValue()){this._focusListElement(null);return}const{items:t,selectedItem:s}=this.option(),n=this._list._itemElements(),o=(t==null?void 0:t.indexOf(s))??-1,r=o!==-1&&!this._isCustomItemSelected()?n.eq(o):null;this._focusListElement(r)}_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue")){this._focusListElement(null);return}const s=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(s)}_focusListElement(e){this._preventInputValueRender=!0,this._list.option("focusedElement",O(e)),delete this._preventInputValueRender}_scrollToSelectedItem(){if(!this._list)return;const{selectedItem:e}=this._list.option();this._list.scrollToItem(e)}_listContentReadyHandler(){super._listContentReadyHandler(),!(this._dataController.paginate()&&this._needPopupRepaint())&&this._scrollToSelectedItem()}_renderValue(){return this._renderInputValue(),this._setSubmitValue(),y().resolve()}_renderInputValue(){return super._renderInputValue(...arguments).always((()=>{this._renderInputValueAsync()}))}_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always((()=>{this._refreshSelected()}))}_renderInputValueImpl(){return this._renderField(),y().resolve()}_setNextItem(e){const t=this._calcNextItem(e),s=this._valueGetter(t);this._setValue(s)}_setNextValue(e){(this._dataController.isLoaded()?y().resolve():this._dataController.load()).done((()=>{const s=this._getSelectedIndex(),n=this._dataController.pageSize(),o=this._dataController.isLastPage(),r=s===this._items().length-1;this._saveValueChangeEvent(e);const a=Le(e)==="downArrow"?1:-1;n&&!o&&r&&a>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,a))):this._setNextItem(a)}))}_setSelectedItem(e){const t=!this._isCustomValueAllowed()&&e===void 0;super._setSelectedItem(t?null:e),!t&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))}_isCustomValueAllowed(){return this.option("acceptCustomValue")||super._isCustomValueAllowed()}_displayValue(e){return e=!S(e)&&this._isCustomValueAllowed()?this.option("value"):e,super._displayValue(e)}_listConfig(){const e=T(super._listConfig(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this),_onItemsRendered:()=>{this._popup.repaint(),this.option("opened")&&this._scrollToSelectedItem()}});return this.option("showSelectionControls")&&T(e,{showSelectionControls:!0,selectByClick:!0}),e}_listFocusedItemChangeHandler(e){if(this._preventInputValueRender)return;const t=e.component,s=h(t.option("focusedElement")),n=t._getItemData(s);this._updateField(n)}_updateField(e){if(!(this._getTemplateByOption("fieldTemplate")&&this.option("fieldTemplate"))){const s=this._displayGetter(e);this.option("text",s),this._renderDisplayText(s);return}this._renderField()}_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):L}_selectionChangeHandler(e){x(e.addedItems||[],((t,s)=>{this._setValue(this._valueGetter(s))}))}_getActualSearchValue(){return this._dataController.searchValue()}_isInlineAutocompleteEnabled(){const{searchEnabled:e,acceptCustomValue:t,searchMode:s}=this.option();return e&&!t&&s==="startswith"}_getAriaAutocomplete(){const{disabled:e,readOnly:t,searchEnabled:s}=this.option();return s&&!(t||e)?this._isInlineAutocompleteEnabled()?"both":"list":"none"}_toggleOpenState(e){if(!this.option("disabled")){if(e=arguments.length?e:!this.option("opened"),!e&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&e)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const s=this._getActualSearchValue();s&&this._wasSearch(!0),this._filterDataSource(s||null)}else this._setListOption("items",[]);e&&this._scrollToSelectedItem(),super._toggleOpenState(e)}}_renderTooltip(){const{tooltipEnabled:e,displayValue:t}=this.option();e&&this.$element().attr("title",t)}_renderDimensions(){super._renderDimensions(),this._updatePopupWidth(),this._updateListDimensions()}_isValueEqualInputText(){const e=this.option("selectedItem");if(e===null)return!1;const t=this._displayGetter(e),s=t?String(t):"",n=this._searchValue();return s===n}_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),super._popupHidingHandler()}_popupHiddenHandler(){super._popupHiddenHandler(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))}_restoreInputText(e){var t;this.option("readOnly")||(t=this._loadItemDeferred)===null||t===void 0||t.always((()=>{const{acceptCustomValue:s,text:n,selectedItem:o,customItemCreateEvent:r}=this.option();if(s){if(!e&&!this._isValueChanging){let a=null;S(o)?a=o:r!==""&&(a=this._createCustomItem(n)),this._updateField(a),this._clearFilter()}return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always((a=>{const l=fe(a,o);this._setSelectedItem(l),this._updateField(l),this._clearFilter()}))}))}_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")}_isPreventedFocusOutEvent(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()}_focusOutHandler(e){this._isPreventedFocusOutEvent(e)||(this._isOverlayNestedTarget(e.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)),e.target=this._input().get(0),super._focusOutHandler(e)}_cancelSearchIfNeed(e){const{searchEnabled:t}=this.option(),s=this._isOverlayNestedTarget(e==null?void 0:e.relatedTarget);if(this._wasSearch()&&t&&!s){var o;const r=(o=this._popup)===null||o===void 0?void 0:o._hideAnimationProcessing;this._clearSearchTimer(),r?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}}_shouldCancelSearch(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e}_isOverlayNestedTarget(e){return!!h(e).closest(".dx-selectbox-popup-wrapper").length}_clearTextValue(){const e=this.option("selectedItem"),t=this._displayGetter(e);e&&t!==""&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent}_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()}_isFocused(){const e=H.getActiveElement(this.element());return super._isFocused()&&h(e).closest(this._input()).length>0}_getValueChangeEventOptionName(){return"customItemCreateEvent"}_renderValueChangeEvent(){this._isEditable()&&super._renderValueChangeEvent()}_fieldRenderData(){const{focusedElement:e}=this.option(),t=this._list&&this.option("opened")&&h(e);return t!=null&&t.length?this._list._getItemData(t):this.option("selectedItem")}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_shouldCloseOnItemClick(){const{selectionMode:e}=this.option();return!(this.option("showSelectionControls")&&e!=="single")}_listItemClickHandler(e){const t=this._getCurrentValue();this._focusListElement(h(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()}_shouldClearFilter(){return this._wasSearch()}_completeSelection(e){this._setValue(e)}_loadItem(e,t){const s=this,n=y();return super._loadItem(e,t).done((o=>{n.resolve(o)})).fail((o=>{if(o!=null&&o.shouldSkipCallback)return;const r=s.option("selectedItem");s.option("acceptCustomValue")&&e===s._valueGetter(r)?n.resolve(r):n.reject()})),n.promise()}_loadInputValue(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred}_isCustomItemSelected(){const e=this.option("selectedItem"),t=this._searchValue(),s=this._displayGetter(e);return!s||t!==s.toString()}_valueChangeEventHandler(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))}_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")}_createCustomItem(e){const t={text:e},s=this._customItemCreatingAction(t),n=fe(s,t.customItem);return S(s)&&os.log("W0015","onCustomItemCreating","customItem"),n}_customItemAddedHandler(e){const t=this._searchValue(),s=this._createCustomItem(t);if(this._saveValueChangeEvent(e),s===void 0)throw this._renderValue(),os.Error("E0121");Xn(s)?Jn(s).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(s)}_setCustomItem(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)}_clearValueHandler(e){return this._preventFiltering=!0,super._clearValueHandler(e),this._searchCanceled(),!1}_wasSearch(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e}_searchHandler(e){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),super._searchHandler(arguments)}_dataSourceFiltered(e){super._dataSourceFiltered(),e!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())}_valueSubstituted(){const e=this._input().get(0),t=this._searchValue().length,s=e.selectionStart===0&&e.selectionEnd===t,n=e.selectionStart!==e.selectionEnd,o=t===e.selectionEnd;return this._wasSearch()&&n&&!s&&o&&this._shouldSubstitutionBeRendered()}_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()}_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}const e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!e)return;const t=this._input(),s=t.val().length;if(s===0)return;const n=t.get(0),o=this._displayGetter(e).toString();n.value=o,this._caret({start:s,end:o.length})}_dispose(){this._renderInputValueAsync=L,delete this._loadItemDeferred,super._dispose()}_optionChanged(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":super._optionChanged(e),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:super._optionChanged(e)}}};ie("dxSelectBox",bp);export{gt as $,Rh as A,it as B,Vt as C,ph as D,Oh as E,Op as F,zr as G,Cs as H,fu as I,si as J,Ap as K,Ur as L,Mp as M,kp as N,Su as O,gr as P,Ci as Q,ad as R,bp as S,lr as T,vt as U,he as V,J as W,bi as X,P as Y,wp as Z,Hd as _,yi as a,ge as a0,Lu as a1,Ye as a2,Fe as a3,Ii as a4,As as a5,ks as a6,$s as a7,mh as a8,rh as a9,Qc as aa,Cn as ab,Kr as ac,tp as ad,ep as ae,$c as af,dp as ag,Mc as ah,lt as ai,Kn as b,cp as c,fr as d,ir as e,In as f,Xa as g,Wt as h,or as i,ps as j,Ti as k,sr as l,Ec as m,fc as n,Br as o,bh as p,wc as q,Qd as r,rt as s,gs as t,fh as u,_h as v,$p as w,eh as x,xi as y,vr as z};
